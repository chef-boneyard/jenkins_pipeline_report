---
result: FAILURE
url: http://manhattan.ci.chef.co/job/chef-trigger-ad_hoc/9/
failure_category: code
failure_cause: 'chef_acceptance[fips::provision]: acceptance: chef-test'
timestamp: 2016-05-18 23:08:55 UTC
duration: 1h49m54s
triggered_by: PrajaktaPurohit
active_duration: 1h49m38s
parameters:
  GIT_REF: praj/version_bump
  EXPIRE_CACHE: false
change:
  git_remote: git://github.com/chef/chef.git
  git_commit: c53843d1b43c705a43d7d8bb9f3ba2d7e15b5eae
  project: chef
  version: 12.11.0+20160518230930
stages:
  chef-test:
    result: FAILURE
    failure_category: code
    failure_cause: 'chef_acceptance[fips::provision]: acceptance'
    url: http://manhattan.ci.chef.co/job/chef-test/9/
    duration: 1h17m14s
    runs:
      acceptance:
        result: FAILURE
        failure_category: code
        failure_cause: chef_acceptance[fips::provision]
        failed_in:
          chef_acceptance:
          - fips::provision
          step: CHEF-ACCEPTANCE
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=acceptance,project=chef,role=tester/9/
        duration: 51m27s
        logs:
          consoleText:
            12781: |
              FIPS::PROVISION::[2016-05-18 23:52:13 +0000]                 >>>>>> Class: Kitchen::ActionFailed
              FIPS::PROVISION::[2016-05-18 23:52:13 +0000]
                              >>>>>> Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                              There was an error invoking '@{
                                "931ed883ed3b0f2aea5414fe18db2c15" = @{
            12852: |2
                              D      ------Exception-------
                              D      Class: Kitchen::ActionFailed
                              D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                              There was an error invoking '@{
                                "931ed883ed3b0f2aea5414fe18db2c15" = @{
            13026: |
              FIPS::PROVISION::[2016-05-18 23:52:13 +0000]                 D      [WinRM] remote shell 8A8E4DDE-4B4B-4AA7-B1F6-5892F7556812 closed
              FIPS::PROVISION::[2016-05-18 23:52:13 +0000]
                    ================================================================================
                    Error executing action `run` on resource 'execute[bundle exec kitchen converge  -c -l debug]'
                    ================================================================================

                    Mixlib::ShellOut::ShellCommandFailed
                    ------------------------------------
                    Expected process to exit with [0], but received '20'
                    ---- Begin output of bundle exec kitchen converge  -c -l debug ----
                    STDOUT: -----> Starting Kitchen (v1.8.0)
                    D      winrm requested, loading winrm gem (["~> 1.6"])
                    D      winrm is loaded.
                    D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
                    D      winrm-fs is loaded.
                    D      winrm requested, loading winrm gem (["~> 1.6"])
                    D      winrm was already loaded.
                    D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
                    D      winrm-fs was already loaded.
                    -----> Creating <fips-unit-functional-windows-2012r2>...
                    D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                    -----> Creating <fips-unit-functional-centos-6>...
                    D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                    D      platform name centos-6 appears to be a standard platform. Searching for centos 6 ...
                    -----> Creating <fips-integration-windows-2012r2>...
                    D      Searching for images matching {:name=>"CentOS-6.5-GA-*", :"owner-alias"=>"aws-marketplace", :architecture=>"x86_64", :"virtualization-type"=>"paravirtual", :"block-device-mapping.volume-type"=>"standard", :"image-type"=>"machine"} ...
                    D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                    D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                    -----> Creating <fips-integration-centos-6>...
                    D      platform name centos-6 appears to be a standard platform. Searching for centos 6 ...
                    D      Searching for images matching {:name=>"CentOS-6.5-GA-*", :"owner-alias"=>"aws-marketplace", :architecture=>"x86_64", :"virtualization-type"=>"paravirtual", :"block-device-mapping.volume-type"=>"standard", :"image-type"=>"machine"} ...
                    D      Search returned 1 images:
                    D      Search returned 3 images:
                    D      - CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2: Detected centos 6.5 x86_64.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.03.09: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-03-09T02:00:06.000Z
                    D      Search returned 1 images:
                    D      - CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2: Detected centos 6.5 x86_64.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                    D      Search returned 3 images:
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows
              FIPS::PROVISION::[2016-05-18 23:52:13 +0000] 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.03.09: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-03-09T02:00:06.000Z
            14284: |2
                      if test $? -eq 0; then
                        echo
              FIPS::PROVISION::[2016-05-18 23:52:13 +0000] "ERROR 404"
                        http_404_error
                      fi
            16148: |2
                    D      ------Exception-------
                    D      Class: Kitchen::ActionFailed
                    D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "931ed883ed3b0f2aea5414fe18db2c15" = @{
            16322: |2
                    STDERR: >>>>>> ------Exception-------
                    >>>>>> Class: Kitchen::ActionFailed
                    >>>>>> Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "931ed883ed3b0f2aea5414fe18db2c15" = @{
            16433: |2


                  ================================================================================
                  Error executing action `run` on resource 'kitchen[converge]'
                  ================================================================================

                  Mixlib::ShellOut::She
              FIPS::PROVISION::[2016-05-18 23:52:13 +0000] llCommandFailed
                  ------------------------------------
            19714: |2
                  D      ------Exception-------
                  D      Class: Kitchen::ActionFailed
                  D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "931ed883ed3b0f2aea5414fe18db2c15" = @{
            19888: |2
                  STDERR: >>>>>> ------Exception-------
                  >>>>>> Class: Kitchen::ActionFailed
                  >>>>>> Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "931ed883ed3b0f2aea5414fe18db2c15" = @{
            19994: |
              FIPS::PROVISION::[2016-05-18 23:52:14 +0000] Running handlers:
              FIPS::PROVISION::[2016-05-18 23:52:14 +0000]
              FIPS::PROVISION::[2016-05-18 23:52:14 +0000] [2016-05-18T23:52:14+00:00] ERROR: Running exception handlers
              FIPS::PROVISION::[2016-05-18 23:52:14 +0000] Running handlers complete
              FIPS::PROVISION::[2016-05-18 23:52:14 +0000] [2016-05-18T23:52:14+00:00] ERROR: Exception handlers complete
              FIPS::PROVISION::[2016-05-18 23:52:14 +0000] Chef Client failed. 0 resources updated in 03 minutes 04 seconds
              FIPS::PROVISION::[2016-05-18 23:52:14 +0000]
              FIPS::PROVISION::[2016-05-18 23:52:14 +0000] [2016-05-18T23:52:14+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/chef-stacktrace.out
              FIPS::PROVISION::[2016-05-18 23:52:14 +0000] [2016-05-18T23:52:14+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
              FIPS::PROVISION::[2016-05-18 23:52:14 +0000] [2016-05-18T23:52:14+00:00] ERROR: Found 1 errors, they are stored in the backtrace
              FIPS::PROVISION::[2016-05-18 23:52:15 +0000] [2016-05-18T23:52:15+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
              CHEF-ACCEPTANCE::[2016-05-18 23:52:15 +0000] Encountered an error running the recipe provision: Expected process to exit with [0], but received '1'
              ---- Begin output of chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/dna.json -o acceptance-cookbook::provision --no-color ----
            23236: |2
                              >>>>>> ------Exception-------
                              >>>>>> Class: Kitchen::ActionFailed
                              >>>>>> Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                              There was an error invoking '@{
                                "931ed883ed3b0f2aea5414fe18db2c15" = @{
            23307: |2
                              D      ------Exception-------
                              D      Class: Kitchen::ActionFailed
                              D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                              There was an error invoking '@{
                                "931ed883ed3b0f2aea5414fe18db2c15" = @{
            23477: |2
                              D      [WinRM] remote shell 8A8E4DDE-4B4B-4AA7-B1F6-5892F7556812 closed

                    ================================================================================
                    Error executing action `run` on resource 'execute[bundle exec kitchen converge  -c -l debug]'
                    ================================================================================

                    Mixlib::ShellOut::ShellCommandFailed
                    ------------------------------------
                    Expected process to exit with [0], but received '20'
                    ---- Begin output of bundle exec kitchen converge  -c -l debug ----
                    STDOUT: -----> Starting Kitchen (v1.8.0)
                    D      winrm requested, loading winrm gem (["~> 1.6"])
                    D      winrm is loaded.
                    D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
                    D      winrm-fs is loaded.
                    D      winrm requested, loading winrm gem (["~> 1.6"])
                    D      winrm was already loaded.
                    D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
                    D      winrm-fs was already loaded.
                    -----> Creating <fips-unit-functional-windows-2012r2>...
                    D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                    -----> Creating <fips-unit-functional-centos-6>...
                    D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                    D      platform name centos-6 appears to be a standard platform. Searching for centos 6 ...
                    -----> Creating <fips-integration-windows-2012r2>...
                    D      Searching for images matching {:name=>"CentOS-6.5-GA-*", :"owner-alias"=>"aws-marketplace", :architecture=>"x86_64", :"virtualization-type"=>"paravirtual", :"block-device-mapping.volume-type"=>"standard", :"image-type"=>"machine"} ...
                    D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                    D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                    -----> Creating <fips-integration-centos-6>...
                    D      platform name centos-6 appears to be a standard platform. Searching for centos 6 ...
                    D      Searching for images matching {:name=>"CentOS-6.5-GA-*", :"owner-alias"=>"aws-marketplace", :architecture=>"x86_64", :"virtualization-type"=>"paravirtual", :"block-device-mapping.volume-type"=>"standard", :"image-type"=>"machine"} ...
                    D      Search returned 1 images:
                    D      Search returned 3 images:
                    D      - CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2: Detected centos 6.5 x86_64.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.03.09: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-03-09T02:00:06.000Z
                    D      Search returned 1 images:
                    D      - CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2: Detected centos 6.5 x86_64.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                    D      Search returned 3 images:
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.03.09: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-03-09T02:00:06.000Z
                    D      Image for fips-integration-centos-6: CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                    D      Image for fips-unit-functional-centos-6: CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                           Detected platform: centos version 6.5 on x86_64. Instance Type: m3.large. Default username: root (default).
                           Detected platform: centos version 6.5 on x86_64. Instance Type: m3.large. Default username: root (default).
                    D      Image for fips-unit-functional-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                    D      No SSH username specified: using default username root  for image ami-b6bdde86, which we detected as centos 6.5 x86_64.
                           Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
                    D      No SSH username specified: using default username root  for image ami-b6bdde86, which we detected as centos 6.5 x86_64.
                           If you are not using an account that qualifies under the AWS
                    free-tier, you may be charged to run these suites. The charge
                    should be minimal, but neither Test Kitchen nor its maintainers
                    are responsible for your incurred costs.

                           If you are not using an account that qualifies under the AWS
                    free-tier, you may be charged to run these suites. The charge
                    should be minimal, but neither Test Kitchen nor its maintainers
                    are responsible for your incurred costs.

                    D      No SSH username specified: using default username administrator  for image ami-8db945ed, which we detected as windows 2012r2rtm x86_64.
                    D      Creating EC2 instance in region us-west-2 with properties:
                    D      Creating EC2 instance in region us-west-2 with properties:
                           If you are not using an account that qualifies under the AWS
                    free-tier, you may be charged to run these suites. The charge
                    should be minimal, but neither Test Kitchen nor its maintainers
                    are responsible for your incurred costs.

                    D      - instance_type = "m3.large"
                    D      Creating EC2 instance in region us-west-2 with properties:
                    D      - instance_type = "m3.large"
                    D      - ebs_optimized = false
                    D      - ebs_optimized = false
                    D      - image_id = "ami-b6bdde86"
                    D      - instance_type = "m3.large"
                    D      - key_name = "jenkins"
                    D      - image_id = "ami-b6bdde86"
                    D      - ebs_optimized = false
                    D      - image_id = "ami-8db945ed"
                    D      - key_name = "jenkins"
                    D      - subnet_id = "subnet-19ac017c"
                    D      - private_ip_address = nil
                    D      - placement = {:availability_zone=>"us-west-2a"}
                    D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                    D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                    D      - subnet_id = "subnet-19ac017c"
                    D      - key_name = "jenkins"
                    D      - subnet_id = "subnet-19ac017c"
                    D      - private_ip_address = nil
                    D      - private_ip_address = nil
                    D      - placement = {:availability_zone=>"us-west-2a"}
                    D      - placement = {:availability_zone=>"us-west-2a"}
                    D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                    D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                    D      Image for fips-integration-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                           Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
                    D      No SSH username specified: using default username administrator  for image ami-8db945ed, which we detected as windows 2012r2rtm x86_64.
                           If you are not using an account that qualifies under the AWS
                    free-tier, you may be charged to run these suites. The charge
                    should be minimal, but neither Test Kitchen nor its maintainers
                    are responsible for your incurred costs.

                    D      Creating EC2 instance in region us-west-2 with properties:
                    D      - instance_type = "m3.large"
                    D      - ebs_optimized = false
                    D      - image_id = "ami-8db945ed"
                    D      - key_name = "jenkins"
                    D      - subnet_id = "subnet-19ac017c"
                    D      - private_ip_address = nil
                    D      - placement = {:availability_zone=>"us-west-2a"}
                    D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                    D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                           Instance <i-adc2156b> requested.
                           Polling AWS for existence, attempt 0...
                           Instance <i-4bc2158d> requested.
                           Polling AWS for existence, attempt 0...
                           Instance <i-aec21568> requested.
                           Polling AWS for existence, attempt 0...
                           Instance <i-afc21569> requested.
                           Polling AWS for existence, attempt 0...
                           Attempting to tag the instance, 0 retries
                           Attempting to tag the instance, 0 retries
                           Attempting to tag the instance, 0 retries
                           Attempting to tag the instance, 0 retries
                           EC2 instance <i-adc2156b> created.
                           Waited 0/300s for instance <i-adc2156b> to become ready.
                           EC2 instance <i-4bc2158d> created.
                           Waited 0/300s for instance <i-4bc2158d> to become ready.
                           EC2 instance <i-aec21568> created.
                           Waited 0/300s for instance <i-aec21568> to become ready.
                           EC2 instance <i-afc21569> created.
                           Waited 0/300s for instance <i-afc21569> to become ready.
                           Waited 5/300s for instance <i-adc2156b> to become ready.
                           Waited 5/300s for instance <i-4bc2158d> to become ready.
                           Waited 5/300s for instance <i-aec21568> to become ready.
                           Waited 5/300s for instance <i-afc21569> to become ready.
                           Waited 10/300s for instance <i-4bc2158d> to become ready.
                           Waited 10/300s for instance <i-adc2156b> to become ready.
                           Waited 10/300s for instance <i-afc21569> to become ready.
                           Waited 10/300s for instance <i-aec21568> to become ready.
                           Waited 15/300s for instance <i-4bc2158d> to become ready.
                           Waited 15/300s for instance <i-adc2156b> to become ready.
                           Waited 15/300s for instance <i-afc21569> to become ready.
                           Waited 15/300s for instance <i-aec21568> to become ready.
                           Waited 20/300s for instance <i-adc2156b> to become ready.
                           Waited 20/300s for instance <i-4bc2158d> to become ready.
                           Waited 20/300s for instance <i-afc21569> to become ready.
                           EC2 instance <i-4bc2158d> ready.
                    D      [SSH] opening connection to root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"]}>
                           Waited 20/300s for instance <i-aec21568> to become ready.
                           Waited 25/300s for instance <i-adc2156b> to become ready.
                           Waited 25/300s for instance <i-afc21569> to become ready.
                           Waited 25/300s for instance <i-aec21568> to become ready.
                           EC2 instance <i-aec21568> ready.
                    D      [SSH] opening connection to root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"]}>
                           Waited 30/300s for instance <i-adc2156b> to become ready.
                           Waited 30/300s for instance <i-afc21569> to become ready.
                    D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                           Waiting for SSH service on 10.194.11.238:22, retrying in 3 seconds
                           Waited 35/300s for instance <i-adc2156b> to become ready.
                           Waited 35/300s for instance <i-afc21569> to become ready.
                    D      [SSH] opening connection to root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                    D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                           Waiting for SSH service on 10.194.9.122:22, retrying in 3 seconds
                           Waited 40/300s for instance <i-adc2156b> to become ready.
                           Waited 40/300s for instance <i-afc21569> to become ready.
                    D      [SSH] opening connection to root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                           Waited 45/300s for instance <i-adc2156b> to become ready.
                           Waited 45/300s for instance <i-afc21569> to become ready.
                           Waited 50/300s for instance <i-adc2156b> to become ready.
                           Waited 50/300s for instance <i-afc21569> to become ready.
                    D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                           Waiting for SSH service on 10.194.11.238:22, retrying in 3 seconds
                    D      [SSH] opening connection to root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                           Waited 55/300s for instance <i-adc2156b> to become ready.
                           Waited 55/300s for instance <i-afc21569> to become ready.
                    D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                           Waiting for SSH service on 10.194.9.122:22, retrying in 3 seconds
                    D      [SSH] opening connection to root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                           Waited 60/300s for instance <i-adc2156b> to become ready.
                           Waited 60/300s for instance <i-afc21569> to become ready.
                           Waited 65/300s for instance <i-adc2156b> to become ready.
                           Waited 65/300s for instance <i-afc21569> to become ready.
                    D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                           Waiting for SSH service on 10.194.11.238:22, retrying in 3 seconds
                           Waited 70/300s for instance <i-adc2156b> to become ready.
                           Waited 70/300s for instance <i-afc21569> to become ready.
                    D      [SSH] opening connection to root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                    D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                           Waiting for SSH service on 10.194.9.122:22, retrying in 3 seconds
                           Waited 75/300s for instance <i-adc2156b> to become ready.
                           Waited 75/300s for instance <i-afc21569> to become ready.
                    D      [SSH] opening connection to root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                           Waited 80/300s for instance <i-adc2156b> to become ready.
                           Waited 80/300s for instance <i-afc21569> to become ready.
                           Waited 85/300s for instance <i-adc2156b> to become ready.
                           Waited 85/300s for instance <i-afc21569> to become ready.
                    D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                           Waiting for SSH service on 10.194.11.238:22, retrying in 3 seconds
                    D      [SSH] opening connection to root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                    D      [SSH] connection failed (#<Net::SSH::AuthenticationFailed: Authentication failed for user root@10.194.11.238>)
                           Waiting for SSH service on 10.194.11.238:22, retrying in 3 seconds
                           Waited 90/300s for instance <i-adc2156b> to become ready.
                           Waited 90/300s for instance <i-afc21569> to become ready.
                    D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                           Waiting for SSH service on 10.194.9.122:22, retrying in 3 seconds
                    D      [SSH] opening connection to root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                    D      [SSH] root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (echo '[SSH] Established')
                           bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           [SSH] Established
                    D      Using sudo_command='sudo -E' for ohai hints
                    D      [SSH] reusing existing connection root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                    D      [SSH] root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E mkdir -p /etc/chef/ohai/hints; sudo -E touch /etc/chef/ohai/hints/ec2.json)
                           bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                    D      ec2:create '10.194.11.238'
                           Finished creating <fips-unit-functional-centos-6> (1m40.62s).
                    -----> Converging <fips-unit-functional-centos-6>...
                           Preparing files for transfer
                    D      Creating local sandbox in /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160518-8113-1hc2zct
                           Preparing dna.json
                    D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                           Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                           Removing non-cookbook files before transfer
                           Preparing validation.pem
                    D      Using a dummy validation.pem
                           Preparing client.rb
                    D      Creating client.rb from {:node_name=>"fips-unit-functional-centos-6", :checksum_path=>"/tmp/kitchen/checksums", :file_cache_path=>"/tmp/kitchen/cache", :file_backup_path=>"/tmp/kitchen/backup", :cookbook_path=>["/tmp/kitchen/cookbooks", "/tmp/kitchen/site-cookbooks"], :data_bag_path=>"/tmp/kitchen/data_bags", :environment_path=>"/tmp/kitchen/environments", :node_path=>"/tmp/kitchen/nodes", :role_path=>"/tmp/kitchen/roles", :client_path=>"/tmp/kitchen/clients", :user_path=>"/tmp/kitchen/users", :validation_key=>"/tmp/kitchen/validation.pem", :client_key=>"/tmp/kitchen/client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"/tmp/kitchen/encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                    D      [SSH] reusing existing connection root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                    D      [SSH] root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E cat > /tmp/chef-installer.sh <<"EOL"
                    #!/bin/bash
                    #!/bin/sh
                    # WARNING: REQUIRES /bin/sh
                    #
                    # - must run on /bin/sh on solaris 9
                    # - must run on /bin/sh on AIX 6.x
                    #
                    # Copyright:: Copyright (c) 2010-2015 Chef Software, Inc.
                    # License:: Apache License, Version 2.0
                    #
                    # Licensed under the Apache License, Version 2.0 (the "License");
                    # you may not use this file except in compliance with the License.
                    # You may obtain a copy of the License at
                    #
                    #     http://www.apache.org/licenses/LICENSE-2.0
                    #
                    # Unless required by applicable law or agreed to in writing, software
                    # distributed under the License is distributed on an "AS IS" BASIS,
                    # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                    # See the License for the specific language governing permissions and
                    # limitations under the License.
                    #

                    # helpers.sh
                    ############
                    # This section has some helper functions to make life easier.
                    #
                    # Outputs:
                    # $tmp_dir: secure-ish temp directory that can be used during installation.
                    ############

                    # Check whether a command exists - returns 0 if it does, 1 if it does not
                    exists() {
                      if command -v $1 >/dev/null 2>&1
                      then
                        return 0
                      else
                        return 1
                      fi
                    }

                    # Output the instructions to report bug about this script
                    report_bug() {
                      echo "Version: $version"
                      echo ""
                      echo "Please file a Bug Report at https://github.com/chef/omnitruck/issues/new"
                      echo "Alternatively, feel free to open a Support Ticket at https://www.chef.io/support/tickets"
                      echo "More Chef support resources can be found at https://www.chef.io/support"
                      echo ""
                      echo "Please include as many details about the problem as possible i.e., how to reproduce"
                      echo "the problem (if possible), type of the Operating System and its version, etc.,"
                      echo "and any other relevant details that might help us with troubleshooting."
                      echo ""
                    }

                    checksum_mismatch() {
                      echo "Package checksum mismatch!"
                      report_bug
                      exit 1
                    }

                    unable_to_retrieve_package() {
                      echo "Unable to retrieve a valid package!"
                      report_bug
                      echo "Metadata URL: $metadata_url"
                      if test "x$download_url" != "x"; then
                        echo "Download URL: $download_url"
                      fi
                      if test "x$stderr_results" != "x"; then
                        echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
                      fi
                      exit 1
                    }

                    http_404_error() {
                      echo "Omnitruck artifact does not exist for version $version on platform $platform"
                      echo ""
                      echo "Either this means:"
                      echo "   - We do not support $platform"
                      echo "   - We do not have an artifact for $version"
                      echo ""
                      echo "This is often the latter case due to running a prerelease or RC version of chef"
                      echo "or a gem version which was only pushed to rubygems and not omnitruck."
                      echo ""
                      echo "You may be able to set your knife[:bootstrap_version] to the most recent stable"
                      echo "release of Chef to fix this problem (or the most recent stable major version number)."
                      echo ""
                      echo "In order to test the version parameter, adventurous users may take the Metadata URL"
                      echo "below and modify the '&v=<number>' parameter until you successfully get a URL that"
                      echo "does not 404 (e.g. via curl or wget).  You should be able to use '&v=11' or '&v=12'"
                      echo "succesfully."
                      echo ""
                      echo "If you cannot fix this problem by setting the bootstrap_version, it probably means"
                      echo "that $platform is not supported."
                      echo ""
                      # deliberately do not call report_bug to suppress bug report noise.
                      echo "Metadata URL: $metadata_url"
                      if test "x$download_url" != "x"; then
                        echo "Download URL: $download_url"
                      fi
                      if test "x$stderr_results" != "x"; then
                        echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
                      fi
                      exit 1
                    }

                    capture_tmp_stderr() {
                      # spool up /tmp/stderr from all the commands we called
                      if test -f "$tmp_dir/stderr"; then
                        output=`cat $tmp_dir/stderr`
                        stderr_results="${stderr_results}\nSTDERR from $1:\n\n$output\n"
                        rm $tmp_dir/stderr
                      fi
                    }

                    # do_wget URL FILENAME
                    do_wget() {
                      echo "trying wget..."
                      wget -O "$2" "$1" 2>$tmp_dir/stderr
                      rc=$?
                      # check for 404
                      grep "ERROR 404" $tmp_dir/stderr 2>&1 >/dev/null
                      if test $? -eq 0; then
                        echo "ERROR 404"
                        http_404_error
                      fi

                      # check for bad return status or empty output
                      if test $rc -ne 0 || test ! -s "$2"; then
                        capture_tmp_stderr "wget"
                        return 1
                      fi

                      return 0
                    }

                    # do_curl URL FILENAME
                    do_curl() {
                      echo "trying curl..."
                      curl --retry 5 -sL -D $tmp_dir/stderr "$1" > "$2"
                      rc=$?
                      # check for 404
                      grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                      if test $? -eq 0; then
                        echo "ERROR 404"
                        http_404_error
                      fi

                      # check for bad return status or empty output
                      if test $rc -ne 0 || test ! -s "$2"; then
                        capture_tmp_stderr "curl"
                        return 1
                      fi

                      return 0
                    }

                    # do_fetch URL FILENAME
                    do_fetch() {
                      echo "trying fetch..."
                      fetch -o "$2" "$1" 2>$tmp_dir/stderr
                      # check for bad return status
                      test $? -ne 0 && return 1
                      return 0
                    }

                    # do_perl URL FILENAME
                    do_perl() {
                      echo "trying perl..."
                      perl -e 'use LWP::Simple; getprint($ARGV[0]);' "$1" > "$2" 2>$tmp_dir/stderr
                      rc=$?
                      # check for 404
                      grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                      if test $? -eq 0; then
                        echo "ERROR 404"
                        http_404_error
                      fi

                      # check for bad return status or empty output
                      if test $rc -ne 0 || test ! -s "$2"; then
                        capture_tmp_stderr "perl"
                        return 1
                      fi

                      return 0
                    }

                    # do_python URL FILENAME
                    do_python() {
                      echo "trying python..."
                      python -c "import sys,urllib2 ; sys.stdout.write(urllib2.urlopen(sys.argv[1]).read())" "$1" > "$2" 2>$tmp_dir/stderr
                      rc=$?
                      # check for 404
                      grep "HTTP Error 404" $tmp_dir/stderr 2>&1 >/dev/null
                      if test $? -eq 0; then
                        echo "ERROR 404"
                        http_404_error
                      fi

                      # check for bad return status or empty output
                      if test $rc -ne 0 || test ! -s "$2"; then
                        capture_tmp_stderr "python"
                        return 1
                      fi
                      return 0
                    }

                    # returns 0 if checksums match
                    do_checksum() {
                      if exists sha256sum; then
                        echo "Comparing checksum with sha256sum..."
                        checksum=`sha256sum $1 | awk '{ print $1 }'`
                        return `test "x$checksum" = "x$2"`
                      elif exists shasum; then
                        echo "Comparing checksum with shasum..."
                        checksum=`shasum -a 256 $1 | awk '{ print $1 }'`
                        return `test "x$checksum" = "x$2"`
                      else
                        echo "WARNING: could not find a valid checksum program, pre-install shasum or sha256sum in your O/S image to get valdation..."
                        return 0
                      fi
                    }

                    # do_download URL FILENAME
                    do_download() {
                      echo "downloading $1"
                      echo "  to file $2"

                      url=`echo $1`
                      if test "x$platform" = "xsolaris2"; then
                        if test "x$platform_version" = "x5.9" -o "x$platform_version" = "x5.10"; then
                          # solaris 9 lacks openssl, solaris 10 lacks recent enough credentials - your base O/S is completely insecure, please upgrade
                          url=`echo $url | sed -e 's/https/http/'`
                        fi
                      fi

                      # we try all of these until we get success.
                      # perl, in particular may be present but LWP::Simple may not be installed

                      if exists wget; then
                        do_wget $url $2 && return 0
                      fi

                      if exists curl; then
                        do_curl $url $2 && return 0
                      fi

                      if exists fetch; then
                        do_fetch $url $2 && return 0
                      fi

                      if exists perl; then
                        do_perl $url $2 && return 0
                      fi

                      if exists python; then
                        do_python $url $2 && return 0
                      fi

                      unable_to_retrieve_package
                    }

                    # install_file TYPE FILENAME
                    # TYPE is "rpm", "deb", "solaris", "sh", etc.
                    install_file() {
                      echo "Installing $project $version"
                      case "$1" in
                        "rpm")
                          if test "x$platform" = "xnexus" || test "x$platform" = "xios_xr"; then
                            echo "installing with yum..."
                            yum install -yv "$2"
                          else
                            echo "installing with rpm..."
                            rpm -Uvh --oldpackage --replacepkgs "$2"
                          fi
                          ;;
                        "deb")
                          echo "installing with dpkg..."
                          dpkg -i "$2"
                          ;;
                        "bff")
                          echo "installing with installp..."
                          installp -aXYgd "$2" all
                          ;;
                        "solaris")
                          echo "installing with pkgadd..."
                          echo "conflict=nocheck" > $tmp_dir/nocheck
                          echo "action=nocheck" >> $tmp_dir/nocheck
                          echo "mail=" >> $tmp_dir/nocheck
                          pkgrm -a $tmp_dir/nocheck -n $project >/dev/null 2>&1 || true
                          pkgadd -G -n -d "$2" -a $tmp_dir/nocheck $project
                          ;;
                        "pkg")
                          echo "installing with installer..."
                          cd / && /usr/sbin/installer -pkg "$2" -target /
                          ;;
                        "dmg")
                          echo "installing dmg file..."
                          hdiutil detach "/Volumes/chef_software" >/dev/null 2>&1 || true
                          hdiutil attach "$2" -mountpoint "/Volumes/chef_software"
                          cd / && /usr/sbin/installer -pkg `find "/Volumes/chef_software" -name \*.pkg` -target /
                          hdiutil detach "/Volumes/chef_software"
                          ;;
                        "sh" )
                          echo "installing with sh..."
                          sh "$2"
                          ;;
                        *)
                          echo "Unknown filetype: $1"
                          report_bug
                          exit 1
                          ;;
                      esac
                      if test $? -ne 0; then
                        echo "Installation failed"
                        report_bug
                        exit 1
                      fi
                    }

                    if test "x$TMPDIR" = "x"; then
                      tmp="/tmp"
                    else
                      tmp=$TMPDIR
                    fi
                    # secure-ish temp dir creation without having mktemp available (DDoS-able but not expliotable)
                    tmp_dir="$tmp/install.sh.$$"
                    (umask 077 && mkdir $tmp_dir) || exit 1

                    ############
                    # end of helpers.sh
                    ############


                    project=chef
                    version=12.11.0+20160518230930
                    channel=unstable


                    # platform_detection.sh
                    ############
                    # This section makes platform detection compatible with omnitruck on the system
                    #   it runs.
                    #
                    # Outputs:
                    # $platform: Name of the platform.
                    # $platform_version: Version of the platform.
                    # $machine: System's architecture.
                    ############

                    #
                    # Platform and Platform Version detection
                    #
                    # NOTE: This should now match ohai platform and platform_version matching.
                    # do not invented new platform and platform_version schemas, just make this behave
                    # like what ohai returns as platform and platform_version for the server.
                    #
                    # ALSO NOTE: Do not mangle platform or platform_version here.  It is less error
                    # prone and more future-proof to do that in the server, and then all omnitruck clients
                    # will 'inherit' the changes (install.sh is not the only client of the omnitruck
                    # endpoint out there).
                    #

                    machine=`uname -m`
                    os=`uname -s`

                    if test -f "/etc/lsb-release" && grep -q DISTRIB_ID /etc/lsb-release && ! grep -q wrlinux /etc/lsb-release; then
                      platform=`grep DISTRIB_ID /etc/lsb-release | cut -d "=" -f 2 | tr '[A-Z]' '[a-z]'`
                      platform_version=`grep DISTRIB_RELEASE /etc/lsb-release | cut -d "=" -f 2`
                    elif test -f "/etc/debian_version"; then
                      platform="debian"
                      platform_version=`cat /etc/debian_version`
                    elif test -f "/etc/redhat-release"; then
                      platform=`sed 's/^\(.\+\) release.*/\1/' /etc/redhat-release | tr '[A-Z]' '[a-z]'`
                      platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/redhat-release`

                      # If /etc/redhat-release exists, we act like RHEL by default
                      if test "$platform" = "fedora"; then
                        # FIXME: stop remapping fedora to el
                        # FIXME: remove client side platform_version mangling and hard coded yolo
                        # Change platform version for use below.
                        platform_version="6.0"
                      fi

                      if test "$platform" = "xenserver"; then
                        # Current XenServer 6.2 is based on CentOS 5, platform is not reset to "el" server should hanlde response
                        platform="xenserver"
                      else
                        # FIXME: use "redhat"
                        platform="el"
                      fi

                    elif test -f "/etc/system-release"; then
                      platform=`sed 's/^\(.\+\) release.\+/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
                      platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
                      # amazon is built off of fedora, so act like RHEL
                      if test "$platform" = "amazon linux ami"; then
                        # FIXME: remove client side platform_version mangling and hard coded yolo, and remapping to deprecated "el"
                        platform="el"
                        platform_version="6.0"
                      fi
                    # Apple OS X
                    elif test -f "/usr/bin/sw_vers"; then
                      platform="mac_os_x"
                      # Matching the tab-space with sed is error-prone
                      platform_version=`sw_vers | awk '/^ProductVersion:/ { print $2 }' | cut -d. -f1,2`

                      # x86_64 Apple hardware often runs 32-bit kernels (see OHAI-63)
                      x86_64=`sysctl -n hw.optional.x86_64`
                      if test $x86_64 -eq 1; then
                        machine="x86_64"
                      fi
                    elif test -f "/etc/release"; then
                      machine=`/usr/bin/uname -p`
                      if grep -q SmartOS /etc/release; then
                        platform="smartos"
                        platform_version=`grep ^Image /etc/product | awk '{ print $3 }'`
                      else
                        platform="solaris2"
                        platform_version=`/usr/bin/uname -r`
                      fi
                    elif test -f "/etc/SuSE-release"; then
                      if grep -q 'Enterprise' /etc/SuSE-release;
                      then
                          platform="sles"
                          platform_version=`awk '/^VERSION/ {V = $3}; /^PATCHLEVEL/ {P = $3}; END {print V "." P}' /etc/SuSE-release`
                      else
                          platform="suse"
                          platform_version=`awk '/^VERSION =/ { print $3 }' /etc/SuSE-release`
                      fi
                    elif test "x$os" = "xFreeBSD"; then
                      platform="freebsd"
                      platform_version=`uname -r | sed 's/-.*//'`
                    elif test "x$os" = "xAIX"; then
                      platform="aix"
                      platform_version="`uname -v`.`uname -r`"
                      machine="powerpc"
                    elif test -f "/etc/os-release"; then
                      . /etc/os-release
                      if test "x$CISCO_RELEASE_INFO" != "x"; then
                        . $CISCO_RELEASE_INFO
                      fi

                      platform=$ID
                      platform_version=$VERSION
                    fi

                    if test "x$platform" = "x"; then
                      echo "Unable to determine platform version!"
                      report_bug
                      exit 1
                    fi

                    #
                    # NOTE: platform manging in the install.sh is DEPRECATED
                    #
                    # - install.sh should be true to ohai and should not remap
                    #   platform or platform versions.
                    #
                    # - remapping platform and mangling platform version numbers is
                    #   now the complete responsibility of the server-side endpoints
                    #

                    major_version=`echo $platform_version | cut -d. -f1`
                    case $platform in
                      # FIXME: should remove this case statement completely
                      "el")
                        # FIXME:  "el" is deprecated, should use "redhat"
                        platform_version=$major_version
                        ;;
                      "debian")
                        if test "x$major_version" = "x5"; then
                          # This is here for potential back-compat.
                          # We do not have 5 in versions we publish for anymore but we
                          # might have it for earlier versions.
                          platform_version="6"
                        else
                          platform_version=$major_version
                        fi
                        ;;
                      "freebsd")
                        platform_version=$major_version
                        ;;
                      "sles")
                        platform_version=$major_version
                        ;;
                      "suse")
                        platform_version=$major_version
                        ;;
                    esac

                    if test "x$platform_version" = "x"; then
                      echo "Unable to determine platform version!"
                      report_bug
                      exit 1
                    fi

                    if test "x$platform" = "xsolaris2"; then
                      # hack up the path on Solaris to find wget, pkgadd
                      PATH=/usr/sfw/bin:/usr/sbin:$PATH
                      export PATH
                    fi

                    echo "$platform $platform_version $machine"

                    ############
                    # end of platform_detection.sh
                    ############


                    # artifactory_urls.sh
                    ############
                    # This section sets up the information for a build to be installed from artifactory
                    #  then uses $platform, $platform_version and $machine to select the correct
                    #  version.
                    #
                    # Inputs:
                    # $platform:
                    # $platform_version:
                    # $machine:
                    #
                    # Outputs:
                    # $download_url:
                    # $sha256:
                    ############


                      artifact_info_dir="$tmp_dir/artifact_info/windows/2012/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012/chef-client-12.11.0+20160518230930-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/nexus/7/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/nexus/7/chef-12.11.0+20160518230930-1.nexus7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 b5f5b8500ca3d09165f049680012dfe2a8498b8d68536dc6036e2691d2a21816" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012r2/chef-client-12.11.0+20160518230930-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/sparc"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.10/chef-12.11.0+20160518230930-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 3215e28eb64e946360fa63e799547c989ccb368598f401e63e5bb2a873833438" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/12.04/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/12.04/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.10/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.10/chef-12.11.0+20160518230930-1.dmg" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/8/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/8/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/6/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/6/chef-12.11.0+20160518230930-1.el6.i386.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 dffb2a842ca7b5665ca6456b3ca9fc5b3ca31ba40c1a1d177da855cfe6045e62" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/amd64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/10/chef-12.11.0+20160518230930_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 9e14dbacbc3934c04da1c58f8da352057cc535075ac136580bcaffa12b998f37" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/8/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/8/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/aix/7.1/powerpc"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/aix/7.1/chef-12.11.0+20160518230930-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 0f82e6aad81d75132c859a06d992097101c4c44c6ad2d8b9d296134660d2711a" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.9/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.9/chef-12.11.0+20160518230930-1.dmg" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/6/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/6/chef-12.11.0+20160518230930-1.el6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 3264230c76a0c1f210967dc8707ffc042da86e2716103d5e0a6dc06174023631" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/aix/6.1/powerpc"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/aix/6.1/chef-12.11.0+20160518230930-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 0f82e6aad81d75132c859a06d992097101c4c44c6ad2d8b9d296134660d2711a" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/5/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/5/chef-12.11.0+20160518230930-1.el5.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 cd850af4b3674fd667afc7e0e8f3dae0c7938122ccc5251af21fda28a603051a" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/14.04/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/9/chef-12.11.0+20160518230930_1.i386.sh" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 1ddac9d2d08a1799c098160a82fb3a46d9c055553b1290ef19ba29638805d4fb" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.11/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.11/chef-12.11.0+20160518230930-1.dmg" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/14.04/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.10/chef-12.11.0+20160518230930-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 4b3d49026bd0ba69af907b5e6065c2ca3955cc4bf9b73d4874541533b5781ec2" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/5/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/5/chef-12.11.0+20160518230930-1.el5.i386.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 37e17f1b0dd9a121bad9de09d84b1b210fb2d1704a73baf0d05a4687d8f67df6" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.11/chef-12.11.0+20160518230930-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 4b3d49026bd0ba69af907b5e6065c2ca3955cc4bf9b73d4874541533b5781ec2" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ios_xr/6/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ios_xr/6/chef-12.11.0+20160518230930-1.ios_xr6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 b9b278a20c4fe7dfa2f3ce035386b2c45811dba5e754e86ebf26326cc5574a6d" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/6/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/6/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/7/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/7/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/amd64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/9/chef-12.11.0+20160518230930_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 021610fbb0aa0511d9a7d45453616a0d89acdb365801badfa8780722f534ed7a" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/7/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/7/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012r2/chef-client-12.11.0+20160518230930-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/10.04/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/10.04/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/7/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/7/chef-12.11.0+20160518230930-1.el7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 380b052db91eae0364cb4c57e6344aef1d1a42b7689e95058e84c0196cdc4bff" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/10/chef-12.11.0+20160518230930_1.i386.sh" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 6f058632798033dff5519f31dca8a45ad881635ab4b0f88bac0445b863843566" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/10.04/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/10.04/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/sparc"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.11/chef-12.11.0+20160518230930-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 3215e28eb64e946360fa63e799547c989ccb368598f401e63e5bb2a873833438" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2012/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012/chef-client-12.11.0+20160518230930-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2008r2/chef-client-12.11.0+20160518230930-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2008r2/chef-client-12.11.0+20160518230930-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/6/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/6/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" >> "$artifact_info_dir/artifact_info"


                    artifact_info_for_platform="$tmp_dir/artifact_info/$platform/$platform_version/$machine/artifact_info"

                    download_url=`awk '$1 == "url" { print $2 }' "$artifact_info_for_platform"`
                    sha256=`awk '$1 == "sha256" { print $2 }' "$artifact_info_for_platform"`


                    # fetch_package.sh
                    ############
                    # This section fetchs a package from $download_url and verifies its metadata.
                    #
                    # Inputs:
                    # $download_url:
                    # $tmp_dir:
                    # Optional Inputs:
                    # $cmdline_filename: Name of the package downloaded on local disk.
                    # $cmdline_dl_dir: Name of the directory downloaded package will be saved to on local disk.
                    #
                    # Outputs:
                    # $download_filename: Name of the downloaded file on local disk.
                    # $filetype: Type of the file downloaded.
                    ############

                    filename=`echo $download_url | sed -e 's/^.*\///'`
                    filetype=`echo $filename | sed -e 's/^.*\.//'`

                    # use either $tmp_dir, the provided directory (-d) or the provided filename (-f)
                    if test "x$cmdline_filename" != "x"; then
                      download_filename="$cmdline_filename"
                    elif test "x$cmdline_dl_dir" != "x"; then
                      download_filename="$cmdline_dl_dir/$filename"
                    else
                      download_filename="$tmp_dir/$filename"
                    fi

                    # ensure the parent directory where to download the installer always exists
                    download_dir=`dirname $download_filename`
                    (umask 077 && mkdir -p $download_dir) || exit 1

                    # check if we have that file locally available and if so verify the checksum
                    cached_file_available="false"
                    if test -f $download_filename; then
                      echo "$download_filename already exists, verifiying checksum..."
                      if do_checksum "$download_filename" "$sha256"; then
                        echo "checksum compare succeeded, using existing file!"
                        cached_file_available="true"
                      else
                        echo "checksum mismatch, downloading latest version of the file"
                      fi
                    fi

                    # download if no local version of the file available
                    if test "x$cached_file_available" != "xtrue"; then
                      do_download "$download_url"  "$download_filename"
                      do_checksum "$download_filename" "$sha256" || checksum_mismatch
                    fi

                    ############
                    # end of fetch_package.sh
                    ############


                    # install_package.sh
                    ############
                    # Installs a package and removed the temp directory.
                    #
                    # Inputs:
                    # $download_filename: Name of the file to be installed.
                    # $filetype: Type of the file to be installed.
                    # $version: The version requested. Used only for warning user if not set.
                    ############

                    if test "x$version" = "x"; then
                      echo
                      echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
                      echo
                      echo "You are installing an omnibus package without a version pin.  If you are installing"
                      echo "on production servers via an automated process this is DANGEROUS and you will"
                      echo "be upgraded without warning on new releases, even to new major releases."
                      echo "Letting the version float is only appropriate in desktop, test, development or"
                      echo "CI/CD environments."
                      echo
                      echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
                      echo
                    fi

                    install_file $filetype "$download_filename"

                    if test "x$tmp_dir" != "x"; then
                      rm -r "$tmp_dir"
                    fi

                    ############
                    # end of install_package.sh
                    ############

                    EOL
                    chmod +x /tmp/chef-installer.sh
                    sudo -E /tmp/chef-installer.sh)
                           bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           /bin/bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           el 6 x86_64
                           downloading http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/6/chef-12.11.0+20160518230930-1.el6.x86_64.rpm
                             to file /tmp/install.sh.959/chef-12.11.0+20160518230930-1.el6.x86_64.rpm
                           trying curl...
                           Comparing checksum with sha256sum...
                           Installing chef 12.11.0+20160518230930
                           installing with rpm...
                           warning: /tmp/install.sh.959/chef-12.11.0+20160518230930-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
                           Preparing...                                                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                    D      [SSH] opening connection to root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                    D      [SSH] root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (echo '[SSH] Established')
                           bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           [SSH] Established
                    D      Using sudo_command='sudo -E' for ohai hints
                    D      [SSH] reusing existing connection root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                    D      [SSH] root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E mkdir -p /etc/chef/ohai/hints; sudo -E touch /etc/chef/ohai/hints/ec2.json)
                           bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                    D      ec2:create '10.194.9.122'
                           Finished creating <fips-integration-centos-6> (1m43.38s).
                    -----> Converging <fips-integration-centos-6>...
                           Preparing files for transfer
                    D      Creating local sandbox in /tmp/cheftest/fips-integration-centos-6-sandbox-20160518-8113-b9a0d2
                           Preparing dna.json
                    D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                           Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                           Removing non-cookbook files before transfer
                           Preparing validation.pem
                    D      Using a dummy validation.pem
                           Preparing client.rb
                    D      Creating client.rb from {:node_name=>"fips-integration-centos-6", :checksum_path=>"/tmp/kitchen/checksums", :file_cache_path=>"/tmp/kitchen/cache", :file_backup_path=>"/tmp/kitchen/backup", :cookbook_path=>["/tmp/kitchen/cookbooks", "/tmp/kitchen/site-cookbooks"], :data_bag_path=>"/tmp/kitchen/data_bags", :environment_path=>"/tmp/kitchen/environments", :node_path=>"/tmp/kitchen/nodes", :role_path=>"/tmp/kitchen/roles", :client_path=>"/tmp/kitchen/clients", :user_path=>"/tmp/kitchen/users", :validation_key=>"/tmp/kitchen/validation.pem", :client_key=>"/tmp/kitchen/client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"/tmp/kitchen/encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                    D      [SSH] reusing existing connection root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                    D      [SSH] root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E cat > /tmp/chef-installer.sh <<"EOL"
                    #!/bin/bash
                    #!/bin/sh
                    # WARNING: REQUIRES /bin/sh
                    #
                    # - must run on /bin/sh on solaris 9
                    # - must run on /bin/sh on AIX 6.x
                    #
                    # Copyright:: Copyright (c) 2010-2015 Chef Software, Inc.
                    # License:: Apache License, Version 2.0
                    #
                    # Licensed under the Apache License, Version 2.0 (the "License");
                    # you may not use this file except in compliance with the License.
                    # You may obtain a copy of the License at
                    #
                    #     http://www.apache.org/licenses/LICENSE-2.0
                    #
                    # Unless required by applicable law or agreed to in writing, software
                    # distributed under the License is distributed on an "AS IS" BASIS,
                    # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                    # See the License for the specific language governing permissions and
                    # limitations under the License.
                    #

                    # helpers.sh
                    ############
                    # This section has some helper functions to make life easier.
                    #
                    # Outputs:
                    # $tmp_dir: secure-ish temp directory that can be used during installation.
                    ############

                    # Check whether a command exists - returns 0 if it does, 1 if it does not
                    exists() {
                      if command -v $1 >/dev/null 2>&1
                      then
                        return 0
                      else
                        return 1
                      fi
                    }

                    # Output the instructions to report bug about this script
                    report_bug() {
                      echo "Version: $version"
                      echo ""
                      echo "Please file a Bug Report at https://github.com/chef/omnitruck/issues/new"
                      echo "Alternatively, feel free to open a Support Ticket at https://www.chef.io/support/tickets"
                      echo "More Chef support resources can be found at https://www.chef.io/support"
                      echo ""
                      echo "Please include as many details about the problem as possible i.e., how to reproduce"
                      echo "the problem (if possible), type of the Operating System and its version, etc.,"
                      echo "and any other relevant details that might help us with troubleshooting."
                      echo ""
                    }

                    checksum_mismatch() {
                      echo "Package checksum mismatch!"
                      report_bug
                      exit 1
                    }

                    unable_to_retrieve_package() {
                      echo "Unable to retrieve a valid package!"
                      report_bug
                      echo "Metadata URL: $metadata_url"
                      if test "x$download_url" != "x"; then
                        echo "Download URL: $download_url"
                      fi
                      if test "x$stderr_results" != "x"; then
                        echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
                      fi
                      exit 1
                    }

                    http_404_error() {
                      echo "Omnitruck artifact does not exist for version $version on platform $platform"
                      echo ""
                      echo "Either this means:"
                      echo "   - We do not support $platform"
                      echo "   - We do not have an artifact for $version"
                      echo ""
                      echo "This is often the latter case due to running a prerelease or RC version of chef"
                      echo "or a gem version which was only pushed to rubygems and not omnitruck."
                      echo ""
                      echo "You may be able to set your knife[:bootstrap_version] to the most recent stable"
                      echo "release of Chef to fix this problem (or the most recent stable major version number)."
                      echo ""
                      echo "In order to test the version parameter, adventurous users may take the Metadata URL"
                      echo "below and modify the '&v=<number>' parameter until you successfully get a URL that"
                      echo "does not 404 (e.g. via curl or wget).  You should be able to use '&v=11' or '&v=12'"
                      echo "succesfully."
                      echo ""
                      echo "If you cannot fix this problem by setting the bootstrap_version, it probably means"
                      echo "that $platform is not supported."
                      echo ""
                      # deliberately do not call report_bug to suppress bug report noise.
                      echo "Metadata URL: $metadata_url"
                      if test "x$download_url" != "x"; then
                        echo "Download URL: $download_url"
                      fi
                      if test "x$stderr_results" != "x"; then
                        echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
                      fi
                      exit 1
                    }

                    capture_tmp_stderr() {
                      # spool up /tmp/stderr from all the commands we called
                      if test -f "$tmp_dir/stderr"; then
                        output=`cat $tmp_dir/stderr`
                        stderr_results="${stderr_results}\nSTDERR from $1:\n\n$output\n"
                        rm $tmp_dir/stderr
                      fi
                    }

                    # do_wget URL FILENAME
                    do_wget() {
                      echo "trying wget..."
                      wget -O "$2" "$1" 2>$tmp_dir/stderr
                      rc=$?
                      # check for 404
                      grep "ERROR 404" $tmp_dir/stderr 2>&1 >/dev/null
                      if test $? -eq 0; then
                        echo "ERROR 404"
                        http_404_error
                      fi

                      # check for bad return status or empty output
                      if test $rc -ne 0 || test ! -s "$2"; then
                        capture_tmp_stderr "wget"
                        return 1
                      fi

                      return 0
                    }

                    # do_curl URL FILENAME
                    do_curl() {
                      echo "trying curl..."
                      curl --retry 5 -sL -D $tmp_dir/stderr "$1" > "$2"
                      rc=$?
                      # check for 404
                      grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                      if test $? -eq 0; then
                        echo "ERROR 404"
                        http_404_error
                      fi

                      # check for bad return status or empty output
                      if test $rc -ne 0 || test ! -s "$2"; then
                        capture_tmp_stderr "curl"
                        return 1
                      fi

                      return 0
                    }

                    # do_fetch URL FILENAME
                    do_fetch() {
                      echo "trying fetch..."
                      fetch -o "$2" "$1" 2>$tmp_dir/stderr
                      # check for bad return status
                      test $? -ne 0 && return 1
                      return 0
                    }

                    # do_perl URL FILENAME
                    do_perl() {
                      echo "trying perl..."
                      perl -e 'use LWP::Simple; getprint($ARGV[0]);' "$1" > "$2" 2>$tmp_dir/stderr
                      rc=$?
                      # check for 404
                      grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                      if test $? -eq 0; then
                        echo "ERROR 404"
                        http_404_error
                      fi

                      # check for bad return status or empty output
                      if test $rc -ne 0 || test ! -s "$2"; then
                        capture_tmp_stderr "perl"
                        return 1
                      fi

                      return 0
                    }

                    # do_python URL FILENAME
                    do_python() {
                      echo "trying python..."
                      python -c "import sys,urllib2 ; sys.stdout.write(urllib2.urlopen(sys.argv[1]).read())" "$1" > "$2" 2>$tmp_dir/stderr
                      rc=$?
                      # check for 404
                      grep "HTTP Error 404" $tmp_dir/stderr 2>&1 >/dev/null
                      if test $? -eq 0; then
                        echo "ERROR 404"
                        http_404_error
                      fi

                      # check for bad return status or empty output
                      if test $rc -ne 0 || test ! -s "$2"; then
                        capture_tmp_stderr "python"
                        return 1
                      fi
                      return 0
                    }

                    # returns 0 if checksums match
                    do_checksum() {
                      if exists sha256sum; then
                        echo "Comparing checksum with sha256sum..."
                        checksum=`sha256sum $1 | awk '{ print $1 }'`
                        return `test "x$checksum" = "x$2"`
                      elif exists shasum; then
                        echo "Comparing checksum with shasum..."
                        checksum=`shasum -a 256 $1 | awk '{ print $1 }'`
                        return `test "x$checksum" = "x$2"`
                      else
                        echo "WARNING: could not find a valid checksum program, pre-install shasum or sha256sum in your O/S image to get valdation..."
                        return 0
                      fi
                    }

                    # do_download URL FILENAME
                    do_download() {
                      echo "downloading $1"
                      echo "  to file $2"

                      url=`echo $1`
                      if test "x$platform" = "xsolaris2"; then
                        if test "x$platform_version" = "x5.9" -o "x$platform_version" = "x5.10"; then
                          # solaris 9 lacks openssl, solaris 10 lacks recent enough credentials - your base O/S is completely insecure, please upgrade
                          url=`echo $url | sed -e 's/https/http/'`
                        fi
                      fi

                      # we try all of these until we get success.
                      # perl, in particular may be present but LWP::Simple may not be installed

                      if exists wget; then
                        do_wget $url $2 && return 0
                      fi

                      if exists curl; then
                        do_curl $url $2 && return 0
                      fi

                      if exists fetch; then
                        do_fetch $url $2 && return 0
                      fi

                      if exists perl; then
                        do_perl $url $2 && return 0
                      fi

                      if exists python; then
                        do_python $url $2 && return 0
                      fi

                      unable_to_retrieve_package
                    }

                    # install_file TYPE FILENAME
                    # TYPE is "rpm", "deb", "solaris", "sh", etc.
                    install_file() {
                      echo "Installing $project $version"
                      case "$1" in
                        "rpm")
                          if test "x$platform" = "xnexus" || test "x$platform" = "xios_xr"; then
                            echo "installing with yum..."
                            yum install -yv "$2"
                          else
                            echo "installing with rpm..."
                            rpm -Uvh --oldpackage --replacepkgs "$2"
                          fi
                          ;;
                        "deb")
                          echo "installing with dpkg..."
                          dpkg -i "$2"
                          ;;
                        "bff")
                          echo "installing with installp..."
                          installp -aXYgd "$2" all
                          ;;
                        "solaris")
                          echo "installing with pkgadd..."
                          echo "conflict=nocheck" > $tmp_dir/nocheck
                          echo "action=nocheck" >> $tmp_dir/nocheck
                          echo "mail=" >> $tmp_dir/nocheck
                          pkgrm -a $tmp_dir/nocheck -n $project >/dev/null 2>&1 || true
                          pkgadd -G -n -d "$2" -a $tmp_dir/nocheck $project
                          ;;
                        "pkg")
                          echo "installing with installer..."
                          cd / && /usr/sbin/installer -pkg "$2" -target /
                          ;;
                        "dmg")
                          echo "installing dmg file..."
                          hdiutil detach "/Volumes/chef_software" >/dev/null 2>&1 || true
                          hdiutil attach "$2" -mountpoint "/Volumes/chef_software"
                          cd / && /usr/sbin/installer -pkg `find "/Volumes/chef_software" -name \*.pkg` -target /
                          hdiutil detach "/Volumes/chef_software"
                          ;;
                        "sh" )
                          echo "installing with sh..."
                          sh "$2"
                          ;;
                        *)
                          echo "Unknown filetype: $1"
                          report_bug
                          exit 1
                          ;;
                      esac
                      if test $? -ne 0; then
                        echo "Installation failed"
                        report_bug
                        exit 1
                      fi
                    }

                    if test "x$TMPDIR" = "x"; then
                      tmp="/tmp"
                    else
                      tmp=$TMPDIR
                    fi
                    # secure-ish temp dir creation without having mktemp available (DDoS-able but not expliotable)
                    tmp_dir="$tmp/install.sh.$$"
                    (umask 077 && mkdir $tmp_dir) || exit 1

                    ############
                    # end of helpers.sh
                    ############


                    project=chef
                    version=12.11.0+20160518230930
                    channel=unstable


                    # platform_detection.sh
                    ############
                    # This section makes platform detection compatible with omnitruck on the system
                    #   it runs.
                    #
                    # Outputs:
                    # $platform: Name of the platform.
                    # $platform_version: Version of the platform.
                    # $machine: System's architecture.
                    ############

                    #
                    # Platform and Platform Version detection
                    #
                    # NOTE: This should now match ohai platform and platform_version matching.
                    # do not invented new platform and platform_version schemas, just make this behave
                    # like what ohai returns as platform and platform_version for the server.
                    #
                    # ALSO NOTE: Do not mangle platform or platform_version here.  It is less error
                    # prone and more future-proof to do that in the server, and then all omnitruck clients
                    # will 'inherit' the changes (install.sh is not the only client of the omnitruck
                    # endpoint out there).
                    #

                    machine=`uname -m`
                    os=`uname -s`

                    if test -f "/etc/lsb-release" && grep -q DISTRIB_ID /etc/lsb-release && ! grep -q wrlinux /etc/lsb-release; then
                      platform=`grep DISTRIB_ID /etc/lsb-release | cut -d "=" -f 2 | tr '[A-Z]' '[a-z]'`
                      platform_version=`grep DISTRIB_RELEASE /etc/lsb-release | cut -d "=" -f 2`
                    elif test -f "/etc/debian_version"; then
                      platform="debian"
                      platform_version=`cat /etc/debian_version`
                    elif test -f "/etc/redhat-release"; then
                      platform=`sed 's/^\(.\+\) release.*/\1/' /etc/redhat-release | tr '[A-Z]' '[a-z]'`
                      platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/redhat-release`

                      # If /etc/redhat-release exists, we act like RHEL by default
                      if test "$platform" = "fedora"; then
                        # FIXME: stop remapping fedora to el
                        # FIXME: remove client side platform_version mangling and hard coded yolo
                        # Change platform version for use below.
                        platform_version="6.0"
                      fi

                      if test "$platform" = "xenserver"; then
                        # Current XenServer 6.2 is based on CentOS 5, platform is not reset to "el" server should hanlde response
                        platform="xenserver"
                      else
                        # FIXME: use "redhat"
                        platform="el"
                      fi

                    elif test -f "/etc/system-release"; then
                      platform=`sed 's/^\(.\+\) release.\+/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
                      platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
                      # amazon is built off of fedora, so act like RHEL
                      if test "$platform" = "amazon linux ami"; then
                        # FIXME: remove client side platform_version mangling and hard coded yolo, and remapping to deprecated "el"
                        platform="el"
                        platform_version="6.0"
                      fi
                    # Apple OS X
                    elif test -f "/usr/bin/sw_vers"; then
                      platform="mac_os_x"
                      # Matching the tab-space with sed is error-prone
                      platform_version=`sw_vers | awk '/^ProductVersion:/ { print $2 }' | cut -d. -f1,2`

                      # x86_64 Apple hardware often runs 32-bit kernels (see OHAI-63)
                      x86_64=`sysctl -n hw.optional.x86_64`
                      if test $x86_64 -eq 1; then
                        machine="x86_64"
                      fi
                    elif test -f "/etc/release"; then
                      machine=`/usr/bin/uname -p`
                      if grep -q SmartOS /etc/release; then
                        platform="smartos"
                        platform_version=`grep ^Image /etc/product | awk '{ print $3 }'`
                      else
                        platform="solaris2"
                        platform_version=`/usr/bin/uname -r`
                      fi
                    elif test -f "/etc/SuSE-release"; then
                      if grep -q 'Enterprise' /etc/SuSE-release;
                      then
                          platform="sles"
                          platform_version=`awk '/^VERSION/ {V = $3}; /^PATCHLEVEL/ {P = $3}; END {print V "." P}' /etc/SuSE-release`
                      else
                          platform="suse"
                          platform_version=`awk '/^VERSION =/ { print $3 }' /etc/SuSE-release`
                      fi
                    elif test "x$os" = "xFreeBSD"; then
                      platform="freebsd"
                      platform_version=`uname -r | sed 's/-.*//'`
                    elif test "x$os" = "xAIX"; then
                      platform="aix"
                      platform_version="`uname -v`.`uname -r`"
                      machine="powerpc"
                    elif test -f "/etc/os-release"; then
                      . /etc/os-release
                      if test "x$CISCO_RELEASE_INFO" != "x"; then
                        . $CISCO_RELEASE_INFO
                      fi

                      platform=$ID
                      platform_version=$VERSION
                    fi

                    if test "x$platform" = "x"; then
                      echo "Unable to determine platform version!"
                      report_bug
                      exit 1
                    fi

                    #
                    # NOTE: platform manging in the install.sh is DEPRECATED
                    #
                    # - install.sh should be true to ohai and should not remap
                    #   platform or platform versions.
                    #
                    # - remapping platform and mangling platform version numbers is
                    #   now the complete responsibility of the server-side endpoints
                    #

                    major_version=`echo $platform_version | cut -d. -f1`
                    case $platform in
                      # FIXME: should remove this case statement completely
                      "el")
                        # FIXME:  "el" is deprecated, should use "redhat"
                        platform_version=$major_version
                        ;;
                      "debian")
                        if test "x$major_version" = "x5"; then
                          # This is here for potential back-compat.
                          # We do not have 5 in versions we publish for anymore but we
                          # might have it for earlier versions.
                          platform_version="6"
                        else
                          platform_version=$major_version
                        fi
                        ;;
                      "freebsd")
                        platform_version=$major_version
                        ;;
                      "sles")
                        platform_version=$major_version
                        ;;
                      "suse")
                        platform_version=$major_version
                        ;;
                    esac

                    if test "x$platform_version" = "x"; then
                      echo "Unable to determine platform version!"
                      report_bug
                      exit 1
                    fi

                    if test "x$platform" = "xsolaris2"; then
                      # hack up the path on Solaris to find wget, pkgadd
                      PATH=/usr/sfw/bin:/usr/sbin:$PATH
                      export PATH
                    fi

                    echo "$platform $platform_version $machine"

                    ############
                    # end of platform_detection.sh
                    ############


                    # artifactory_urls.sh
                    ############
                    # This section sets up the information for a build to be installed from artifactory
                    #  then uses $platform, $platform_version and $machine to select the correct
                    #  version.
                    #
                    # Inputs:
                    # $platform:
                    # $platform_version:
                    # $machine:
                    #
                    # Outputs:
                    # $download_url:
                    # $sha256:
                    ############


                      artifact_info_dir="$tmp_dir/artifact_info/windows/2012/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012/chef-client-12.11.0+20160518230930-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/nexus/7/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/nexus/7/chef-12.11.0+20160518230930-1.nexus7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 b5f5b8500ca3d09165f049680012dfe2a8498b8d68536dc6036e2691d2a21816" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012r2/chef-client-12.11.0+20160518230930-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/sparc"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.10/chef-12.11.0+20160518230930-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 3215e28eb64e946360fa63e799547c989ccb368598f401e63e5bb2a873833438" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/12.04/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/12.04/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.10/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.10/chef-12.11.0+20160518230930-1.dmg" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/8/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/8/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/6/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/6/chef-12.11.0+20160518230930-1.el6.i386.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 dffb2a842ca7b5665ca6456b3ca9fc5b3ca31ba40c1a1d177da855cfe6045e62" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/amd64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/10/chef-12.11.0+20160518230930_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 9e14dbacbc3934c04da1c58f8da352057cc535075ac136580bcaffa12b998f37" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/8/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/8/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/aix/7.1/powerpc"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/aix/7.1/chef-12.11.0+20160518230930-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 0f82e6aad81d75132c859a06d992097101c4c44c6ad2d8b9d296134660d2711a" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.9/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.9/chef-12.11.0+20160518230930-1.dmg" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/6/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/6/chef-12.11.0+20160518230930-1.el6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 3264230c76a0c1f210967dc8707ffc042da86e2716103d5e0a6dc06174023631" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/aix/6.1/powerpc"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/aix/6.1/chef-12.11.0+20160518230930-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 0f82e6aad81d75132c859a06d992097101c4c44c6ad2d8b9d296134660d2711a" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/5/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/5/chef-12.11.0+20160518230930-1.el5.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 cd850af4b3674fd667afc7e0e8f3dae0c7938122ccc5251af21fda28a603051a" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/14.04/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/9/chef-12.11.0+20160518230930_1.i386.sh" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 1ddac9d2d08a1799c098160a82fb3a46d9c055553b1290ef19ba29638805d4fb" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.11/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.11/chef-12.11.0+20160518230930-1.dmg" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/14.04/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.10/chef-12.11.0+20160518230930-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 4b3d49026bd0ba69af907b5e6065c2ca3955cc4bf9b73d4874541533b5781ec2" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/5/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/5/chef-12.11.0+20160518230930-1.el5.i386.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 37e17f1b0dd9a121bad9de09d84b1b210fb2d1704a73baf0d05a4687d8f67df6" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.11/chef-12.11.0+20160518230930-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 4b3d49026bd0ba69af907b5e6065c2ca3955cc4bf9b73d4874541533b5781ec2" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ios_xr/6/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ios_xr/6/chef-12.11.0+20160518230930-1.ios_xr6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 b9b278a20c4fe7dfa2f3ce035386b2c45811dba5e754e86ebf26326cc5574a6d" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/6/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/6/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/7/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/7/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/amd64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/9/chef-12.11.0+20160518230930_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 021610fbb0aa0511d9a7d45453616a0d89acdb365801badfa8780722f534ed7a" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/7/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/7/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012r2/chef-client-12.11.0+20160518230930-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/10.04/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/10.04/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/7/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/7/chef-12.11.0+20160518230930-1.el7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 380b052db91eae0364cb4c57e6344aef1d1a42b7689e95058e84c0196cdc4bff" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/10/chef-12.11.0+20160518230930_1.i386.sh" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 6f058632798033dff5519f31dca8a45ad881635ab4b0f88bac0445b863843566" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/10.04/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/10.04/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/sparc"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.11/chef-12.11.0+20160518230930-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 3215e28eb64e946360fa63e799547c989ccb368598f401e63e5bb2a873833438" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2012/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012/chef-client-12.11.0+20160518230930-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2008r2/chef-client-12.11.0+20160518230930-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2008r2/chef-client-12.11.0+20160518230930-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/6/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/6/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" >> "$artifact_info_dir/artifact_info"


                    artifact_info_for_platform="$tmp_dir/artifact_info/$platform/$platform_version/$machine/artifact_info"

                    download_url=`awk '$1 == "url" { print $2 }' "$artifact_info_for_platform"`
                    sha256=`awk '$1 == "sha256" { print $2 }' "$artifact_info_for_platform"`


                    # fetch_package.sh
                    ############
                    # This section fetchs a package from $download_url and verifies its metadata.
                    #
                    # Inputs:
                    # $download_url:
                    # $tmp_dir:
                    # Optional Inputs:
                    # $cmdline_filename: Name of the package downloaded on local disk.
                    # $cmdline_dl_dir: Name of the directory downloaded package will be saved to on local disk.
                    #
                    # Outputs:
                    # $download_filename: Name of the downloaded file on local disk.
                    # $filetype: Type of the file downloaded.
                    ############

                    filename=`echo $download_url | sed -e 's/^.*\///'`
                    filetype=`echo $filename | sed -e 's/^.*\.//'`

                    # use either $tmp_dir, the provided directory (-d) or the provided filename (-f)
                    if test "x$cmdline_filename" != "x"; then
                      download_filename="$cmdline_filename"
                    elif test "x$cmdline_dl_dir" != "x"; then
                      download_filename="$cmdline_dl_dir/$filename"
                    else
                      download_filename="$tmp_dir/$filename"
                    fi

                    # ensure the parent directory where to download the installer always exists
                    download_dir=`dirname $download_filename`
                    (umask 077 && mkdir -p $download_dir) || exit 1

                    # check if we have that file locally available and if so verify the checksum
                    cached_file_available="false"
                    if test -f $download_filename; then
                      echo "$download_filename already exists, verifiying checksum..."
                      if do_checksum "$download_filename" "$sha256"; then
                        echo "checksum compare succeeded, using existing file!"
                        cached_file_available="true"
                      else
                        echo "checksum mismatch, downloading latest version of the file"
                      fi
                    fi

                    # download if no local version of the file available
                    if test "x$cached_file_available" != "xtrue"; then
                      do_download "$download_url"  "$download_filename"
                      do_checksum "$download_filename" "$sha256" || checksum_mismatch
                    fi

                    ############
                    # end of fetch_package.sh
                    ############


                    # install_package.sh
                    ############
                    # Installs a package and removed the temp directory.
                    #
                    # Inputs:
                    # $download_filename: Name of the file to be installed.
                    # $filetype: Type of the file to be installed.
                    # $version: The version requested. Used only for warning user if not set.
                    ############

                    if test "x$version" = "x"; then
                      echo
                      echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
                      echo
                      echo "You are installing an omnibus package without a version pin.  If you are installing"
                      echo "on production servers via an automated process this is DANGEROUS and you will"
                      echo "be upgraded without warning on new releases, even to new major releases."
                      echo "Letting the version float is only appropriate in desktop, test, development or"
                      echo "CI/CD environments."
                      echo
                      echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
                      echo
                    fi

                    install_file $filetype "$download_filename"

                    if test "x$tmp_dir" != "x"; then
                      rm -r "$tmp_dir"
                    fi

                    ############
                    # end of install_package.sh
                    ############

                    EOL
                    chmod +x /tmp/chef-installer.sh
                    sudo -E /tmp/chef-installer.sh)
                           bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           /bin/bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           el 6 x86_64
                           downloading http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/6/chef-12.11.0+20160518230930-1.el6.x86_64.rpm
                             to file /tmp/install.sh.959/chef-12.11.0+20160518230930-1.el6.x86_64.rpm
                           trying curl...
                           Waited 95/300s for instance <i-adc2156b> to become ready.
                           Comparing checksum with sha256sum...
                           Waited 95/300s for instance <i-afc21569> to become ready.
                           Installing chef 12.11.0+20160518230930
                           installing with rpm...
                           warning: /tmp/install.sh.959/chef-12.11.0+20160518230930-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
                           Preparing...                                                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                              1:chef                                                               (  1%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (  3%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (  6%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (  8%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        ( 10%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       ( 13%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      ( 15%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     ( 17%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    ( 19%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   ( 22%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  ( 24%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 ( 26%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                ( 28%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               ( 31%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              ( 33%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             ( 35%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            ( 38%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           ( 40%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          ( 42%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         ( 44%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        ( 47%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       ( 49%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      ( 51%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     ( 53%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    ( 56%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   ( 58%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  ( 60%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 ( 63%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                ( 65%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               ( 67%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              ( 69%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             ( 72%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            ( 74%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           ( 76%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          ( 78%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         ( 81%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        ( 83%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       ( 85%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      ( 88%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     ( 90%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    ( 92%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   ( 94%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  ( 97%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### ( 99%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                           /bin/sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           Thank you for installing Chef!
                    D      [SSH] root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '

                    sudo_rm="sudo -E rm"
                    dirs="/tmp/kitchen/clients /tmp/kitchen/cookbooks /tmp/kitchen/data /tmp/kitchen/data_bags /tmp/kitchen/encrypted_data_bag_secret /tmp/kitchen/environments /tmp/kitchen/roles"
                    root_path="/tmp/kitchen"

                    $sudo_rm -rf $dirs
                    mkdir -p $root_path
                    ')
                           bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           Transferring files to <fips-unit-functional-centos-6>
                    D      Uploaded /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160518-8113-1hc2zct/dna.json (65 bytes)
                    D      Uploaded /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160518-8113-1hc2zct/client.rb (667 bytes)
                    D      Uploaded /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160518-8113-1hc2zct/validation.pem (1679 bytes)
                    D      Uploaded /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160518-8113-1hc2zct/cookbooks/fips/metadata.rb (12 bytes)
                    D      Transfer complete
                    D      [SSH] root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '

                    sudo -E /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json --chef-zero-port 8889
                    ')
                           bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           Waited 100/300s for instance <i-adc2156b> to become ready.
                           Waited 100/300s for instance <i-afc21569> to become ready.
                              1:chef                                                               (  1%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (  3%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (  6%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (  8%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        ( 10%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       ( 13%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      ( 15%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     ( 17%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    ( 19%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   ( 22%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  ( 24%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 ( 26%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                ( 28%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               ( 31%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              ( 33%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             ( 35%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            ( 38%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           ( 40%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          ( 42%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         ( 44%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        ( 47%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       ( 49%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      ( 51%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     ( 53%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    ( 56%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   ( 58%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  ( 60%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 ( 63%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                ( 65%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               ( 67%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              ( 69%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             ( 72%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            ( 74%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           ( 76%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          ( 78%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         ( 81%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        ( 83%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       ( 85%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      ( 88%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     ( 90%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    ( 92%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   ( 94%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  ( 97%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### ( 99%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                           Starting Chef Client, version 12.11.0
                           /bin/sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           Thank you for installing Chef!
                    D      [SSH] root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '

                    sudo_rm="sudo -E rm"
                    dirs="/tmp/kitchen/clients /tmp/kitchen/cookbooks /tmp/kitchen/data /tmp/kitchen/data_bags /tmp/kitchen/encrypted_data_bag_secret /tmp/kitchen/environments /tmp/kitchen/roles"
                    root_path="/tmp/kitchen"

                    $sudo_rm -rf $dirs
                    mkdir -p $root_path
                    ')
                           bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           Transferring files to <fips-integration-centos-6>
                    D      Uploaded /tmp/cheftest/fips-integration-centos-6-sandbox-20160518-8113-b9a0d2/dna.json (65 bytes)
                    D      Uploaded /tmp/cheftest/fips-integration-centos-6-sandbox-20160518-8113-b9a0d2/client.rb (663 bytes)
                    D      Uploaded /tmp/cheftest/fips-integration-centos-6-sandbox-20160518-8113-b9a0d2/validation.pem (1679 bytes)
                    D      Uploaded /tmp/cheftest/fips-integration-centos-6-sandbox-20160518-8113-b9a0d2/cookbooks/fips/metadata.rb (12 bytes)
                    D      Transfer complete
                    D      [SSH] root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '

                    sudo -E /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json --chef-zero-port 8889
                    ')
                           bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           Starting Chef Client, version 12.11.0
                           Creating a new client identity for fips-unit-functional-centos-6 using the validator key.
                           resolving cookbooks for run list: []
                           Synchronizing Cookbooks:
                           Installing Cookbook Gems:
                           Compiling Cookbooks...
                           [2016-05-18T23:51:07+00:00] WARN: Node fips-unit-functional-centos-6 has an empty run list.
                           Converging 0 resources
                           Starting audit phase

                           Finished in 0.0003 seconds (files took 0.38651 seconds to load)
                           0 examples, 0 failures
                           Auditing complete

                           Running handlers:
                           Running handlers complete
                           Chef Client finished, 0/0 resources updated in 03 seconds
                           [2016-05-18T23:51:07+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json
                    D      Cleaning up local sandbox in /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160518-8113-1hc2zct
                           Finished converging <fips-unit-functional-centos-6> (0m13.34s).
                    D      [SSH] shutting previous connection root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                    D      [SSH] closing connection to root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                           Waited 105/300s for instance <i-adc2156b> to become ready.
                           Creating a new client identity for fips-integration-centos-6 using the validator key.
                           Waited 105/300s for instance <i-afc21569> to become ready.
                           resolving cookbooks for run list: []
                           Synchronizing Cookbooks:
                           Installing Cookbook Gems:
                           Compiling Cookbooks...
                           [2016-05-18T23:51:09+00:00] WARN: Node fips-integration-centos-6 has an empty run list.
                           Converging 0 resources
                           Starting audit phase

                           Finished in 0.0003 seconds (files took 0.37392 seconds to load)
                           0 examples, 0 failures
                           Auditing complete

                           Running handlers:
                           Running handlers complete
                           Chef Client finished, 0/0 resources updated in 03 seconds
                           [2016-05-18T23:51:09+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json
                    D      Cleaning up local sandbox in /tmp/cheftest/fips-integration-centos-6-sandbox-20160518-8113-b9a0d2
                           Finished converging <fips-integration-centos-6> (0m12.96s).
                    D      [SSH] shutting previous connection root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                    D      [SSH] closing connection to root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                           Waited 110/300s for instance <i-adc2156b> to become ready.
                           Waited 110/300s for instance <i-afc21569> to become ready.
                           Waited 115/300s for instance <i-adc2156b> to become ready.
                           Waited 115/300s for instance <i-afc21569> to become ready.
                           Waited 120/300s for instance <i-afc21569> to become ready.
                           Waited 120/300s for instance <i-adc2156b> to become ready.
                    D      Console output: ---
                    2016/05/18 23:51:11Z: EC2ConfigMonitorState: 0
                    2016/05/18 23:51:11Z: Windows sysprep configuration complete.
                    2016/05/18 23:51:13Z: AMI Origin Version: 2016.05.11
                    2016/05/18 23:51:13Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
                    2016/05/18 23:51:13Z: OS: Microsoft Windows NT 6.3.9600
                    2016/05/18 23:51:13Z: OsVersion: 6.3
                    2016/05/18 23:51:13Z: OsProductName: Windows Server 2012 R2 Standard
                    2016/05/18 23:51:13Z: OsBuildLabEx: 9600.18289.amd64fre.winblue_ltsb.160328-1315
                    2016/05/18 23:51:13Z: Language: en-US
                    2016/05/18 23:51:13Z: TimeZone: Coordinated Universal Time
                    2016/05/18 23:51:13Z: Offset: UTC 00:00:00
                    2016/05/18 23:51:13Z: EC2 Agent: Ec2Config service v3.16.930
                    2016/05/18 23:51:15Z: Message: Waiting for meta-data accessibility...
                    2016/05/18 23:51:15Z: Message: Meta-data is now available.
                    2016/05/18 23:51:16Z: AMI-ID: ami-8db945ed
                    2016/05/18 23:51:16Z: Instance-ID: i-afc21569
                    2016/05/18 23:51:17Z: Driver: AWS PV Network Device v7.3.2.0
                    2016/05/18 23:51:17Z: Driver: AWS PV Storage Host Adapter v7.3.2.0
                    2016/05/18 23:51:17Z: Ec2SetPassword: Enabled
                    2016/05/18 23:51:17Z: RDPCERTIFICATE-SUBJECTNAME: WIN-APD6GI9GO94
                    2016/05/18 23:51:17Z: RDPCERTIFICATE-THUMBPRINT: 759AEB6C635A36E6AE177073297652E5F6778F64
                    2016/05/18 23:51:20Z: Username: Administrator
                    2016/05/18 23:51:20Z: Password: <Password>
                    m5L6wO01Ypsuk0lK784jrtHo6sFotcHpairh2Y/anoPaSia4xPYNpEbu/VSozgTSu7OfuzX2Dam3g/bA1cad0c1witihTG83HOaXFn7h8/YH1rx8nYvzZG/j/my571G9sEcaE7m7sYbElAix3KUbkSYVuY6hHpwP9CCixxD4fisp9r1cHIUnW2rUtdh9LHocYUCtB9WWkMdnuFqyfAfCQJ8nViKxih5ERKTL2BGBWsvY6/cFUSU9SYsYwyXSlLFcW2j3sqgc+/7ei2u5LpM1ga9QSYLe5xgB+y3DtmpAegtyHeSlp26JdQgYTFfoIO/4ATRn89Fb/1mAQjQI96yugw==
                    </Password>
                    2016/05/18 23:51:20Z: Message: Windows is Ready to use

                           Waited 0/300s for instance <i-afc21569> to fetch windows admin password.
                           Retrieved Windows password for instance <i-afc21569>.
                           EC2 instance <i-afc21569> ready.
                    D      [WinRM] opening remote shell on http://10.194.8.169:5985/wsman
                           Waited 125/300s for instance <i-adc2156b> to become ready.
                           Waited 130/300s for instance <i-adc2156b> to become ready.
                           Waited 135/300s for instance <i-adc2156b> to become ready.
                    D      Console output: ---
                    2016/05/18 23:51:27Z: EC2ConfigMonitorState: 0
                    2016/05/18 23:51:27Z: Windows sysprep configuration complete.
                    2016/05/18 23:51:28Z: AMI Origin Version: 2016.05.11
                    2016/05/18 23:51:28Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
                    2016/05/18 23:51:28Z: OS: Microsoft Windows NT 6.3.9600
                    2016/05/18 23:51:28Z: OsVersion: 6.3
                    2016/05/18 23:51:28Z: OsProductName: Windows Server 2012 R2 Standard
                    2016/05/18 23:51:28Z: OsBuildLabEx: 9600.18289.amd64fre.winblue_ltsb.160328-1315
                    2016/05/18 23:51:28Z: Language: en-US
                    2016/05/18 23:51:28Z: TimeZone: Coordinated Universal Time
                    2016/05/18 23:51:28Z: Offset: UTC 00:00:00
                    2016/05/18 23:51:28Z: EC2 Agent: Ec2Config service v3.16.930
                    2016/05/18 23:51:31Z: Message: Waiting for meta-data accessibility...
                    2016/05/18 23:51:31Z: Message: Meta-data is now available.
                    2016/05/18 23:51:31Z: AMI-ID: ami-8db945ed
                    2016/05/18 23:51:31Z: Instance-ID: i-adc2156b
                    2016/05/18 23:51:33Z: Driver: AWS PV Network Device v7.3.2.0
                    2016/05/18 23:51:33Z: Driver: AWS PV Storage Host Adapter v7.3.2.0
                    2016/05/18 23:51:33Z: Ec2SetPassword: Enabled
                    2016/05/18 23:51:33Z: RDPCERTIFICATE-SUBJECTNAME: WIN-N75V05Q5I7S
                    2016/05/18 23:51:33Z: RDPCERTIFICATE-THUMBPRINT: CA28A628A374B4589653816F6B341DDE64520F92
                    2016/05/18 23:51:36Z: Username: Administrator
                    2016/05/18 23:51:36Z: Password: <Password>
                    AM4CJBNWDGKOAiBtX9DYiO5nz2+LCfaqIYrnfCjhbByGB/xOUqamat05tYR+n+DuHc0sotHVqN9r3G1o7VwKPM2UI9/3uSG7z+GSOoIxomWSraMchs6mN2Cun1IhzuI93vciyvc6D2h/HX4ae1WWrvxhw82a6AgwwURDXJTGwO6oevV9Jx1HlFT5RDpt2mLOC+KVJTm3p/UmuGVMNBF86WEX14FRDO1BdtoXdKOCtPbCrZ0JXyoHqjKMh/6Qt9luV15hbycEyvYqFZqmvQgK1zcUzVbxLDotb1vS7F6/o0zK7+ToGBBy0qtKsGbdkbzaK5NAH4B6vHDpKQJZzWXNUg==
                    </Password>
                    2016/05/18 23:51:38Z: Message: Windows is Ready to use

                           Waited 0/300s for instance <i-adc2156b> to fetch windows admin password.
                           Retrieved Windows password for instance <i-adc2156b>.
                           EC2 instance <i-adc2156b> ready.
                    D      [WinRM] opening remote shell on http://10.194.9.27:5985/wsman
                    D      [WinRM] remote shell E3AFAE38-5BB2-4AE5-91C0-7D07B9309E6D is open on http://10.194.8.169:5985/wsman
                    D      [WinRM] negotiate::http://10.194.8.169:5985/wsman<{:user=>"administrator", :pass=>"DU@xa8*vxN", :elevated_username=>"administrator", :elevated_password=>"DU@xa8*vxN", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
                    ')
                           [WinRM] Established

                    D      [WinRM] reusing existing connection negotiate::http://10.194.8.169:5985/wsman<{:user=>"administrator", :pass=>"DU@xa8*vxN", :elevated_username=>"administrator", :elevated_password=>"DU@xa8*vxN", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                    D      [WinRM] negotiate::http://10.194.8.169:5985/wsman<{:user=>"administrator", :pass=>"DU@xa8*vxN", :elevated_username=>"administrator", :elevated_password=>"DU@xa8*vxN", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)


                               Directory: C:\chef\ohai\hints


                           Mode                LastWriteTime     Length Name
                           ----                -------------     ------ ----
                           -a---         5/18/2016  11:51 PM          0 ec2.json


                    D      ec2:create '10.194.8.169'
                           Finished creating <fips-unit-functional-windows-2012r2> (2m40.99s).
                    -----> Converging <fips-unit-functional-windows-2012r2>...
                           Preparing files for transfer
                    D      Creating local sandbox in /tmp/cheftest/fips-unit-functional-windows-2012r2-sandbox-20160518-8113-10yidzl
                           Preparing dna.json
                    D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                           Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                           Removing non-cookbook files before transfer
                           Preparing validation.pem
                    D      Using a dummy validation.pem
                           Preparing client.rb
                    D      Creating client.rb from {:node_name=>"fips-unit-functional-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                    D      [WinRM] reusing existing connection negotiate::http://10.194.8.169:5985/wsman<{:user=>"administrator", :pass=>"DU@xa8*vxN", :elevated_username=>"administrator", :elevated_password=>"DU@xa8*vxN", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                    D      [WinRM] negotiate::http://10.194.8.169:5985/wsman<{:user=>"administrator", :pass=>"DU@xa8*vxN", :elevated_username=>"administrator", :elevated_password=>"DU@xa8*vxN", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
                    function Get-PlatformVersion {
                      switch -regex ((get-wmiobject win32_operatingsystem).version) {
                        '10\.0\.\d+' {$platform_version = '2012r2'}
                        '6\.3\.\d+'  {$platform_version = '2012r2'}
                        '6\.2\.\d+'  {$platform_version = '2012'}
                        '6\.1\.\d+'  {$platform_version = '2008r2'}
                        '6\.0\.\d+'  {$platform_version = '2008'}
                      }
                      return $platform_version
                    }

                    function Get-PlatformArchitecture {
                      if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                        $architecture = 'x86_64'
                      } else {
                        $architecture = 'i386'
                      }
                      return $architecture
                    }

                    function New-Uri {
                      param ($baseuri, $newuri)

                      new-object System.Uri $baseuri, $newuri
                    }

                    function Get-WebContent {
                      param ($uri, $filepath)
                      $proxy = New-Object -TypeName System.Net.WebProxy
                      $wc = new-object System.Net.WebClient
                      $proxy.Address = $env:http_proxy
                      $wc.Proxy = $proxy

                      try {
                        if ([string]::IsNullOrEmpty($filepath)) {
                          $wc.downloadstring($uri)
                        }
                        else {
                          $wc.downloadfile($uri, $filepath)
                        }
                      }
                      catch {
                        $exception = $_.Exception
                        Write-Host "There was an error: "
                        do {
                          Write-Host "`t$($exception.message)"
                          $exception = $exception.innerexception
                        } while ($exception)
                        throw "Failed to download from $uri."
                      }
                    }

                    function Test-ProjectPackage {
                      [cmdletbinding()]
                      param ($Path, $Algorithm = 'SHA256', $Hash)

                      if (-not (get-command get-filehash))   {
                        function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                        function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                        function Get-FileHash ($Path, $Algorithm) {
                          $Path = (resolve-path $path).providerpath
                          $hash = @{Algorithm = $Algorithm; Path = $Path}
                          use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                            use ($in = (gi $path).OpenRead()) {
                              $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                            }
                          }
                          new-object PSObject -Property $hash
                        }
                      }
                      Write-Verbose "Testing the $Algorithm hash for $path."
                      $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
                      Write-Verbose "`tDesired Hash - '$hash'"
                      Write-Verbose "`tActual Hash  - '$ActualHash'"
                      $Valid = $ActualHash -eq $Hash
                      if (-not $Valid) {
                        Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
                      }
                      return $Valid
                    }

                    function Get-ProjectMetadata {
                      <#
                        .SYNOPSIS
                        Get metadata for a Chef Software, Inc. project
                        .DESCRIPTION
                        Get metadata for project
                        .EXAMPLE
                        iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                        Gets the download url and SHA256 checksum for the latest stable release of Chef.
                        .EXAMPLE
                        iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                        Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
                      #>
                      [cmdletbinding()]
                      param (
                        # Base url to retrieve metadata from.
                        [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                        [string]
                        # Project to install
                        # chef - Chef Client
                        # chefdk - Chef Development Kit
                        # angrychef - AngryChef
                        # server and container are not valid windows targets
                        [validateset('chef', 'chefdk', 'angrychef')]
                        [string]
                        $project = 'chef',
                        # Version of the application to install
                        # This parameter is optional, if not supplied it will provide the latest version,
                        # and if an iteration number is not specified, it will grab the latest available iteration.
                        # Partial version numbers are also acceptable (using v=11
                        # will grab the latest 11.x client which matches the other flags).
                        [string]
                        $version,
                        # Release channel to install from
                        $channel = 'unstable',
                        # The following legacy switches are just aliases for the current channel
                        [switch]
                        $prerelease,
                        [switch]
                        $nightlies,
                        [validateset('auto', 'i386', 'x86_64')]
                        [string]
                        $architecture = 'auto'
                      )

                      # PowerShell is only on Windows ATM
                      $platform = 'windows'
                      Write-Verbose "Platform: $platform"

                      $platform_version = Get-PlatformVersion
                      Write-Verbose "Platform Version: $platform_version"

                      if ($architecture -eq 'auto') {
                        $architecture = Get-PlatformArchitecture
                      }

                      Write-Verbose "Architecture: $architecture"
                      Write-Verbose "Project: $project"


                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012/chef-client-12.11.0+20160518230930-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/nexus/7/chef-12.11.0+20160518230930-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 b5f5b8500ca3d09165f049680012dfe2a8498b8d68536dc6036e2691d2a21816" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012r2/chef-client-12.11.0+20160518230930-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.10/chef-12.11.0+20160518230930-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 3215e28eb64e946360fa63e799547c989ccb368598f401e63e5bb2a873833438" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/12.04/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/12.04/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.10/chef-12.11.0+20160518230930-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/8/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/6/chef-12.11.0+20160518230930-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 dffb2a842ca7b5665ca6456b3ca9fc5b3ca31ba40c1a1d177da855cfe6045e62" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/10/chef-12.11.0+20160518230930_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 9e14dbacbc3934c04da1c58f8da352057cc535075ac136580bcaffa12b998f37" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/8/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/aix/7.1/chef-12.11.0+20160518230930-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 0f82e6aad81d75132c859a06d992097101c4c44c6ad2d8b9d296134660d2711a" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.9/chef-12.11.0+20160518230930-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/6/chef-12.11.0+20160518230930-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 3264230c76a0c1f210967dc8707ffc042da86e2716103d5e0a6dc06174023631" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/aix/6.1/chef-12.11.0+20160518230930-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 0f82e6aad81d75132c859a06d992097101c4c44c6ad2d8b9d296134660d2711a" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/5/chef-12.11.0+20160518230930-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 cd850af4b3674fd667afc7e0e8f3dae0c7938122ccc5251af21fda28a603051a" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/14.04/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/9/chef-12.11.0+20160518230930_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 1ddac9d2d08a1799c098160a82fb3a46d9c055553b1290ef19ba29638805d4fb" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.11/chef-12.11.0+20160518230930-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/14.04/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.10/chef-12.11.0+20160518230930-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 4b3d49026bd0ba69af907b5e6065c2ca3955cc4bf9b73d4874541533b5781ec2" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/5/chef-12.11.0+20160518230930-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 37e17f1b0dd9a121bad9de09d84b1b210fb2d1704a73baf0d05a4687d8f67df6" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.11/chef-12.11.0+20160518230930-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 4b3d49026bd0ba69af907b5e6065c2ca3955cc4bf9b73d4874541533b5781ec2" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ios_xr/6/chef-12.11.0+20160518230930-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 b9b278a20c4fe7dfa2f3ce035386b2c45811dba5e754e86ebf26326cc5574a6d" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/6/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/7/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/9/chef-12.11.0+20160518230930_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 021610fbb0aa0511d9a7d45453616a0d89acdb365801badfa8780722f534ed7a" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/7/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012r2/chef-client-12.11.0+20160518230930-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/10.04/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/10.04/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/7/chef-12.11.0+20160518230930-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 380b052db91eae0364cb4c57e6344aef1d1a42b7689e95058e84c0196cdc4bff" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/10/chef-12.11.0+20160518230930_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 6f058632798033dff5519f31dca8a45ad881635ab4b0f88bac0445b863843566" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/10.04/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/10.04/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.11/chef-12.11.0+20160518230930-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 3215e28eb64e946360fa63e799547c989ccb368598f401e63e5bb2a873833438" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012/chef-client-12.11.0+20160518230930-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2008r2/chef-client-12.11.0+20160518230930-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2008r2/chef-client-12.11.0+20160518230930-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/6/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" | out-file "$artifact_info_dir/artifact_info" -Append


                      $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

                      $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                        foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

                      Write-Verbose "Project details: "
                      foreach ($key in $package_metadata.keys) {
                        Write-Verbose "`t$key = $($package_metadata[$key])"
                      }
                      $package_metadata
                    }

                    function Install-Project {
                      <#
                        .SYNOPSIS
                        Install a Chef Software, Inc. product
                        .DESCRIPTION
                        Install a Chef Software, Inc. product
                        .EXAMPLE
                        iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                        Installs the latest stable version of Chef.
                        .EXAMPLE
                        iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                        Installs the latest integration build of the Chef Development Kit
                      #>
                      [cmdletbinding(SupportsShouldProcess=$true)]
                      param (
                        # Project to install
                        # chef - Chef Client
                        # chefdk - Chef Development Kit
                        # angrychef - AngryChef
                        # server and container are not valid windows targets
                        [validateset('chef', 'chefdk', 'angrychef')]
                        [string]
                        $project = 'chef',
                        # Release channel to install from
                        [validateset('current', 'stable', 'unstable')]
                        [string]
                        $channel = 'stable',
                        # Version of the application to install
                        # This parameter is optional, if not supplied it will provide the latest version,
                        # and if an iteration number is not specified, it will grab the latest available iteration.
                        # Partial version numbers are also acceptable (using v=11
                        # will grab the latest 11.x client which matches the other flags).
                        [string]
                        $version,
                        # Full path for the downloaded installer.
                        [string]
                        $filename,
                        # Full path to the location to download the installer
                        [string]
                        $download_directory = $env:temp,
                        # The following legacy switches are just aliases for the current channel
                        [switch]
                        $prerelease,
                        [switch]
                        $nightlies,
                        [validateset('auto', 'i386', 'x86_64')]
                        [string]
                        $architecture = 'auto'
                      )

                      $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

                      if (-not [string]::IsNullOrEmpty($filename)) {
                        $download_directory = split-path $filename
                        $filename = split-path $filename -leaf
                        if ([string]::IsNullOrEmpty($download_directory)) {
                          $download_directory = $pwd
                        }
                      }
                      else {
                        $filename = ($package_metadata.url -split '/')[-1]
                      }
                      Write-Verbose "Download directory: $download_directory"
                      Write-Verbose "Filename: $filename"

                      if (-not (test-path $download_directory)) {
                        mkdir $download_directory
                      }
                      $download_directory = (resolve-path $download_directory).providerpath
                      $download_destination = join-path $download_directory $filename

                      if ((test-path $download_destination) -and
                        (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                        Write-Verbose "Found existing valid installer at $download_destination."
                      }
                      else {
                        if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                          Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                          Get-WebContent $package_metadata.url -filepath $download_destination
                        }
                      }

                      if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                        if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                          Write-Host "Installing $project from $download_destination"
                          $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                          $p.WaitForExit()
                          if ($p.ExitCode -ne 0) {
                            throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                          }
                        }
                        else {
                          throw "Failed to validate the downloaded installer for $project."
                        }
                      }
                    }
                    set-alias install -value Install-Project
                    export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

                    }

                    install -project chef -version 12.11.0+20160518230930 -channel unstable
                    )
                    D      creating hash for file $env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
                    D      Running check_files.ps1
                    D      @{
                    D        "931ed883ed3b0f2aea5414fe18db2c15" = @{
                    D          "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                    D          "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                    D          "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
                    D        }
                    D      }
                    D      [WinRM] opening new shell since the current one failed
                    D      [WinRM] opening remote shell on http://10.194.8.169:5985/wsman
                    D      [WinRM] remote shell 8A8E4DDE-4B4B-4AA7-B1F6-5892F7556812 is open on http://10.194.8.169:5985/wsman
                    D      Cleaning up local sandbox in /tmp/cheftest/fips-unit-functional-windows-2012r2-sandbox-20160518-8113-10yidzl
                    D      [WinRM] remote shell BFFC8747-64AD-43D3-B298-77BC334A5B40 is open on http://10.194.9.27:5985/wsman
                    D      [WinRM] negotiate::http://10.194.9.27:5985/wsman<{:user=>"administrator", :pass=>"(Q%;7!Jpp8", :elevated_username=>"administrator", :elevated_password=>"(Q%;7!Jpp8", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
                    ')
                           [WinRM] Established

                    D      [WinRM] reusing existing connection negotiate::http://10.194.9.27:5985/wsman<{:user=>"administrator", :pass=>"(Q%;7!Jpp8", :elevated_username=>"administrator", :elevated_password=>"(Q%;7!Jpp8", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                    D      [WinRM] negotiate::http://10.194.9.27:5985/wsman<{:user=>"administrator", :pass=>"(Q%;7!Jpp8", :elevated_username=>"administrator", :elevated_password=>"(Q%;7!Jpp8", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)


                               Directory: C:\chef\ohai\hints


                           Mode                LastWriteTime     Length Name
                           ----                -------------     ------ ----
                           -a---         5/18/2016  11:52 PM          0 ec2.json


                    D      ec2:create '10.194.9.27'
                           Finished creating <fips-integration-windows-2012r2> (2m55.08s).
                    -----> Converging <fips-integration-windows-2012r2>...
                           Preparing files for transfer
                    D      Creating local sandbox in /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160518-8113-1eaa2b0
                           Preparing dna.json
                    D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                           Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                           Removing non-cookbook files before transfer
                           Preparing validation.pem
                    D      Using a dummy validation.pem
                           Preparing client.rb
                    D      Creating client.rb from {:node_name=>"fips-integration-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                    D      [WinRM] reusing existing connection negotiate::http://10.194.9.27:5985/wsman<{:user=>"administrator", :pass=>"(Q%;7!Jpp8", :elevated_username=>"administrator", :elevated_password=>"(Q%;7!Jpp8", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                    D      [WinRM] negotiate::http://10.194.9.27:5985/wsman<{:user=>"administrator", :pass=>"(Q%;7!Jpp8", :elevated_username=>"administrator", :elevated_password=>"(Q%;7!Jpp8", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
                    function Get-PlatformVersion {
                      switch -regex ((get-wmiobject win32_operatingsystem).version) {
                        '10\.0\.\d+' {$platform_version = '2012r2'}
                        '6\.3\.\d+'  {$platform_version = '2012r2'}
                        '6\.2\.\d+'  {$platform_version = '2012'}
                        '6\.1\.\d+'  {$platform_version = '2008r2'}
                        '6\.0\.\d+'  {$platform_version = '2008'}
                      }
                      return $platform_version
                    }

                    function Get-PlatformArchitecture {
                      if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                        $architecture = 'x86_64'
                      } else {
                        $architecture = 'i386'
                      }
                      return $architecture
                    }

                    function New-Uri {
                      param ($baseuri, $newuri)

                      new-object System.Uri $baseuri, $newuri
                    }

                    function Get-WebContent {
                      param ($uri, $filepath)
                      $proxy = New-Object -TypeName System.Net.WebProxy
                      $wc = new-object System.Net.WebClient
                      $proxy.Address = $env:http_proxy
                      $wc.Proxy = $proxy

                      try {
                        if ([string]::IsNullOrEmpty($filepath)) {
                          $wc.downloadstring($uri)
                        }
                        else {
                          $wc.downloadfile($uri, $filepath)
                        }
                      }
                      catch {
                        $exception = $_.Exception
                        Write-Host "There was an error: "
                        do {
                          Write-Host "`t$($exception.message)"
                          $exception = $exception.innerexception
                        } while ($exception)
                        throw "Failed to download from $uri."
                      }
                    }

                    function Test-ProjectPackage {
                      [cmdletbinding()]
                      param ($Path, $Algorithm = 'SHA256', $Hash)

                      if (-not (get-command get-filehash))   {
                        function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                        function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                        function Get-FileHash ($Path, $Algorithm) {
                          $Path = (resolve-path $path).providerpath
                          $hash = @{Algorithm = $Algorithm; Path = $Path}
                          use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                            use ($in = (gi $path).OpenRead()) {
                              $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                            }
                          }
                          new-object PSObject -Property $hash
                        }
                      }
                      Write-Verbose "Testing the $Algorithm hash for $path."
                      $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
                      Write-Verbose "`tDesired Hash - '$hash'"
                      Write-Verbose "`tActual Hash  - '$ActualHash'"
                      $Valid = $ActualHash -eq $Hash
                      if (-not $Valid) {
                        Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
                      }
                      return $Valid
                    }

                    function Get-ProjectMetadata {
                      <#
                        .SYNOPSIS
                        Get metadata for a Chef Software, Inc. project
                        .DESCRIPTION
                        Get metadata for project
                        .EXAMPLE
                        iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                        Gets the download url and SHA256 checksum for the latest stable release of Chef.
                        .EXAMPLE
                        iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                        Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
                      #>
                      [cmdletbinding()]
                      param (
                        # Base url to retrieve metadata from.
                        [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                        [string]
                        # Project to install
                        # chef - Chef Client
                        # chefdk - Chef Development Kit
                        # angrychef - AngryChef
                        # server and container are not valid windows targets
                        [validateset('chef', 'chefdk', 'angrychef')]
                        [string]
                        $project = 'chef',
                        # Version of the application to install
                        # This parameter is optional, if not supplied it will provide the latest version,
                        # and if an iteration number is not specified, it will grab the latest available iteration.
                        # Partial version numbers are also acceptable (using v=11
                        # will grab the latest 11.x client which matches the other flags).
                        [string]
                        $version,
                        # Release channel to install from
                        $channel = 'unstable',
                        # The following legacy switches are just aliases for the current channel
                        [switch]
                        $prerelease,
                        [switch]
                        $nightlies,
                        [validateset('auto', 'i386', 'x86_64')]
                        [string]
                        $architecture = 'auto'
                      )

                      # PowerShell is only on Windows ATM
                      $platform = 'windows'
                      Write-Verbose "Platform: $platform"

                      $platform_version = Get-PlatformVersion
                      Write-Verbose "Platform Version: $platform_version"

                      if ($architecture -eq 'auto') {
                        $architecture = Get-PlatformArchitecture
                      }

                      Write-Verbose "Architecture: $architecture"
                      Write-Verbose "Project: $project"


                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012/chef-client-12.11.0+20160518230930-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/nexus/7/chef-12.11.0+20160518230930-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 b5f5b8500ca3d09165f049680012dfe2a8498b8d68536dc6036e2691d2a21816" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012r2/chef-client-12.11.0+20160518230930-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.10/chef-12.11.0+20160518230930-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 3215e28eb64e946360fa63e799547c989ccb368598f401e63e5bb2a873833438" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/12.04/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/12.04/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.10/chef-12.11.0+20160518230930-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/8/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/6/chef-12.11.0+20160518230930-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 dffb2a842ca7b5665ca6456b3ca9fc5b3ca31ba40c1a1d177da855cfe6045e62" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/10/chef-12.11.0+20160518230930_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 9e14dbacbc3934c04da1c58f8da352057cc535075ac136580bcaffa12b998f37" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/8/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/aix/7.1/chef-12.11.0+20160518230930-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 0f82e6aad81d75132c859a06d992097101c4c44c6ad2d8b9d296134660d2711a" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.9/chef-12.11.0+20160518230930-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/6/chef-12.11.0+20160518230930-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 3264230c76a0c1f210967dc8707ffc042da86e2716103d5e0a6dc06174023631" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/aix/6.1/chef-12.11.0+20160518230930-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 0f82e6aad81d75132c859a06d992097101c4c44c6ad2d8b9d296134660d2711a" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/5/chef-12.11.0+20160518230930-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 cd850af4b3674fd667afc7e0e8f3dae0c7938122ccc5251af21fda28a603051a" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/14.04/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/9/chef-12.11.0+20160518230930_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 1ddac9d2d08a1799c098160a82fb3a46d9c055553b1290ef19ba29638805d4fb" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.11/chef-12.11.0+20160518230930-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/14.04/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.10/chef-12.11.0+20160518230930-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 4b3d49026bd0ba69af907b5e6065c2ca3955cc4bf9b73d4874541533b5781ec2" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/5/chef-12.11.0+20160518230930-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 37e17f1b0dd9a121bad9de09d84b1b210fb2d1704a73baf0d05a4687d8f67df6" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.11/chef-12.11.0+20160518230930-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 4b3d49026bd0ba69af907b5e6065c2ca3955cc4bf9b73d4874541533b5781ec2" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ios_xr/6/chef-12.11.0+20160518230930-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 b9b278a20c4fe7dfa2f3ce035386b2c45811dba5e754e86ebf26326cc5574a6d" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/6/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/7/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/9/chef-12.11.0+20160518230930_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 021610fbb0aa0511d9a7d45453616a0d89acdb365801badfa8780722f534ed7a" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/7/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012r2/chef-client-12.11.0+20160518230930-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/10.04/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/10.04/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/7/chef-12.11.0+20160518230930-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 380b052db91eae0364cb4c57e6344aef1d1a42b7689e95058e84c0196cdc4bff" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/10/chef-12.11.0+20160518230930_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 6f058632798033dff5519f31dca8a45ad881635ab4b0f88bac0445b863843566" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/10.04/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/10.04/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.11/chef-12.11.0+20160518230930-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 3215e28eb64e946360fa63e799547c989ccb368598f401e63e5bb2a873833438" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012/chef-client-12.11.0+20160518230930-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2008r2/chef-client-12.11.0+20160518230930-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2008r2/chef-client-12.11.0+20160518230930-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/6/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" | out-file "$artifact_info_dir/artifact_info" -Append


                      $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

                      $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                        foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

                      Write-Verbose "Project details: "
                      foreach ($key in $package_metadata.keys) {
                        Write-Verbose "`t$key = $($package_metadata[$key])"
                      }
                      $package_metadata
                    }

                    function Install-Project {
                      <#
                        .SYNOPSIS
                        Install a Chef Software, Inc. product
                        .DESCRIPTION
                        Install a Chef Software, Inc. product
                        .EXAMPLE
                        iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                        Installs the latest stable version of Chef.
                        .EXAMPLE
                        iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                        Installs the latest integration build of the Chef Development Kit
                      #>
                      [cmdletbinding(SupportsShouldProcess=$true)]
                      param (
                        # Project to install
                        # chef - Chef Client
                        # chefdk - Chef Development Kit
                        # angrychef - AngryChef
                        # server and container are not valid windows targets
                        [validateset('chef', 'chefdk', 'angrychef')]
                        [string]
                        $project = 'chef',
                        # Release channel to install from
                        [validateset('current', 'stable', 'unstable')]
                        [string]
                        $channel = 'stable',
                        # Version of the application to install
                        # This parameter is optional, if not supplied it will provide the latest version,
                        # and if an iteration number is not specified, it will grab the latest available iteration.
                        # Partial version numbers are also acceptable (using v=11
                        # will grab the latest 11.x client which matches the other flags).
                        [string]
                        $version,
                        # Full path for the downloaded installer.
                        [string]
                        $filename,
                        # Full path to the location to download the installer
                        [string]
                        $download_directory = $env:temp,
                        # The following legacy switches are just aliases for the current channel
                        [switch]
                        $prerelease,
                        [switch]
                        $nightlies,
                        [validateset('auto', 'i386', 'x86_64')]
                        [string]
                        $architecture = 'auto'
                      )

                      $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

                      if (-not [string]::IsNullOrEmpty($filename)) {
                        $download_directory = split-path $filename
                        $filename = split-path $filename -leaf
                        if ([string]::IsNullOrEmpty($download_directory)) {
                          $download_directory = $pwd
                        }
                      }
                      else {
                        $filename = ($package_metadata.url -split '/')[-1]
                      }
                      Write-Verbose "Download directory: $download_directory"
                      Write-Verbose "Filename: $filename"

                      if (-not (test-path $download_directory)) {
                        mkdir $download_directory
                      }
                      $download_directory = (resolve-path $download_directory).providerpath
                      $download_destination = join-path $download_directory $filename

                      if ((test-path $download_destination) -and
                        (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                        Write-Verbose "Found existing valid installer at $download_destination."
                      }
                      else {
                        if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                          Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                          Get-WebContent $package_metadata.url -filepath $download_destination
                        }
                      }

                      if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                        if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                          Write-Host "Installing $project from $download_destination"
                          $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                          $p.WaitForExit()
                          if ($p.ExitCode -ne 0) {
                            throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                          }
                        }
                        else {
                          throw "Failed to validate the downloaded installer for $project."
                        }
                      }
                    }
                    set-alias install -value Install-Project
                    export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

                    }

                    install -project chef -version 12.11.0+20160518230930 -channel unstable
                    )
                    D      creating hash for file $env:TEMP/fips-integration-windows-2012r2-long_script.ps1
                    D      Running check_files.ps1
                    D      @{
                    D        "931ed883ed3b0f2aea5414fe18db2c15" = @{
                    D          "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1";
                    D          "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                    D          "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                    D        }
                    D      }
                    D      [WinRM] opening new shell since the current one failed
                    D      [WinRM] opening remote shell on http://10.194.9.27:5985/wsman
                    D      [WinRM] remote shell 2C896F7D-7F93-4721-A715-BDC3490BC1A3 is open on http://10.194.9.27:5985/wsman
                    D      Cleaning up local sandbox in /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160518-8113-1eaa2b0
                    D      ------Exception-------
                    D      Class: Kitchen::ActionFailed
                    D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "931ed883ed3b0f2aea5414fe18db2c15" = @{
                        "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1";
                        "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                      }
                    }@{
                      "931ed883ed3b0f2aea5414fe18db2c15" = @{
                        "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1";
                        "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                       tion
                        + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                       vokeExpressionCommand

                    At line:54 char:5
                    +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                    +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                    :String) [], RuntimeException
                        + FullyQualifiedErrorId : There was an error invoking '@{
                      "931ed883ed3b0f2aea5414fe18db2c15" = @{
                            "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                       ;
                        "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                      }
                    }@{
                      "931ed883ed3b0f2aea5414fe18db2c15" = @{
                            "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                       ;
                        "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                            + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                       xcep
                       tion
                            + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                       s.In
                       vokeExpressionCommand


                    ]
                    D      ---Nested Exception---
                    D      Class: WinRM::FS::Core::FileTransporterFailed
                    D      Message: [WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "931ed883ed3b0f2aea5414fe18db2c15" = @{
                        "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1";
                        "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                      }
                    }@{
                      "931ed883ed3b0f2aea5414fe18db2c15" = @{
                        "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1";
                        "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                       tion
                        + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                       vokeExpressionCommand

                    At line:54 char:5
                    +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                    +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                    :String) [], RuntimeException
                        + FullyQualifiedErrorId : There was an error invoking '@{
                      "931ed883ed3b0f2aea5414fe18db2c15" = @{
                            "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                       ;
                        "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                      }
                    }@{
                      "931ed883ed3b0f2aea5414fe18db2c15" = @{
                            "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                       ;
                        "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                            + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                       xcep
                       tion
                            + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                       s.In
                       vokeExpressionCommand



                    D      ------Backtrace-------
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:394:in `parse_response'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:203:in `check_files'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:80:in `block in upload'
                    D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:78:in `upload'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/transport/winrm.rb:130:in `upload'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/transport/winrm.rb:390:in `run_from_file_command'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/transport/winrm.rb:100:in `execute'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/provisioner/base.rb:67:in `block in call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/transport/winrm.rb:522:in `reuse_connection'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/transport/winrm.rb:72:in `connection'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/provisioner/base.rb:66:in `call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/instance.rb:373:in `block in converge_action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/instance.rb:513:in `call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/instance.rb:513:in `synchronize_or_call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/instance.rb:478:in `block in action'
                    D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/instance.rb:477:in `action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/instance.rb:369:in `converge_action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/instance.rb:348:in `block in transition_to'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/instance.rb:347:in `each'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/instance.rb:347:in `transition_to'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/instance.rb:138:in `converge'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/command.rb:176:in `public_send'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/command.rb:176:in `block (2 levels) in run_action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
                    D      ----------------------
                    D      [WinRM] closing remote shell BFFC8747-64AD-43D3-B298-77BC334A5B40 on http://10.194.9.27:5985/wsman
                    D      [WinRM] closing remote shell 2C896F7D-7F93-4721-A715-BDC3490BC1A3 on http://10.194.9.27:5985/wsman
                    D      [WinRM] remote shell 2C896F7D-7F93-4721-A715-BDC3490BC1A3 closed
                    D      [WinRM] closing remote shell E3AFAE38-5BB2-4AE5-91C0-7D07B9309E6D on http://10.194.8.169:5985/wsman
                    D      [WinRM] closing remote shell 8A8E4DDE-4B4B-4AA7-B1F6-5892F7556812 on http://10.194.8.169:5985/wsman
                    D      [WinRM] remote shell 8A8E4DDE-4B4B-4AA7-B1F6-5892F7556812 closed
                    STDERR: >>>>>> ------Exception-------
                    >>>>>> Class: Kitchen::ActionFailed
                    >>>>>> Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "931ed883ed3b0f2aea5414fe18db2c15" = @{
                        "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1";
                        "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                      }
                    }@{
                      "931ed883ed3b0f2aea5414fe18db2c15" = @{
                        "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1";
                        "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                       tion
                        + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                       vokeExpressionCommand

                    At line:54 char:5
                    +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                    +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                    :String) [], RuntimeException
                        + FullyQualifiedErrorId : There was an error invoking '@{
                      "931ed883ed3b0f2aea5414fe18db2c15" = @{
                            "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                       ;
                        "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                      }
                    }@{
                      "931ed883ed3b0f2aea5414fe18db2c15" = @{
                            "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                       ;
                        "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                            + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                       xcep
                       tion
                            + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                       s.In
                       vokeExpressionCommand


                    ]
                    >>>>>> ----------------------
                    >>>>>> Please see .kitchen/logs/kitchen.log for more details
                    >>>>>> Also try running `kitchen diagnose --all` for configuration
                    ---- End output of bundle exec kitchen converge  -c -l debug ----
                    Ran bundle exec kitchen converge  -c -l debug returned 20

                    Resource Declaration:
                    ---------------------
                    # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb

                     36:       execute "bundle exec kitchen #{command}#{instances ? " #{instances}" : ""}#{kitchen_options ? " #{kitchen_options}" : ""}" do
                     37:         cwd kitchen_dir
                     38:         env({
                     39:           "KITCHEN_DRIVER" => driver,
                     40:           "KITCHEN_INSTANCES" => instances,
                     41:           "KITCHEN_LOCAL_YAML" => ::File.expand_path("../../.kitchen.#{driver}.yml", __FILE__),
                     42:           "KITCHEN_CHEF_PRODUCT" => chef_product,
                     43:           "KITCHEN_CHEF_CHANNEL" => chef_channel,
                     44:           "KITCHEN_CHEF_VERSION" => chef_version,
                     45:           "ARTIFACTORY_USERNAME" => artifactory_username,
                     46:           "ARTIFACTORY_PASSWORD" => artifactory_password
                     47:         }.merge(new_resource.env))
                     48:       end
                     49:     end

                    Compiled Resource:
                    ------------------
                    # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:36:in `block in <class:Kitchen>'

                    execute("bundle exec kitchen converge  -c -l debug") do
                      action [:run]
                      retries 0
                      retry_delay 2
                      default_guard_interpreter :execute
                      command "bundle exec kitchen converge  -c -l debug"
                      backup 5
                      cwd "/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/fips"
                      environment {"KITCHEN_DRIVER"=>"ec2", "KITCHEN_INSTANCES"=>"", "KITCHEN_LOCAL_YAML"=>"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/.kitchen.ec2.yml", "KITCHEN_CHEF_PRODUCT"=>"chef", "KITCHEN_CHEF_CHANNEL"=>"unstable", "KITCHEN_CHEF_VERSION"=>"12.11.0+20160518230930", "ARTIFACTORY_USERNAME"=>"chef-web-downloads", "ARTIFACTORY_PASSWORD"=>"fWPxYSB69EiuSpl8*3Dr^kGwf#hxUE6cmjeZRB%H!Cruit7qiKp%toH3nXKStQUg"}
                      returns 0
                      declared_type :execute
                      cookbook_name "acceptance-cookbook"
                    end


                  ================================================================================
                  Error executing action `run` on resource 'kitchen[converge]'
                  ================================================================================

                  Mixlib::ShellOut::ShellCommandFailed
                  ------------------------------------
                  execute[bundle exec kitchen converge  -c -l debug] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 36) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '20'
                  ---- Begin output of bundle exec kitchen converge  -c -l debug ----
                  STDOUT: -----> Starting Kitchen (v1.8.0)
                  D      winrm requested, loading winrm gem (["~> 1.6"])
                  D      winrm is loaded.
                  D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
                  D      winrm-fs is loaded.
                  D      winrm requested, loading winrm gem (["~> 1.6"])
                  D      winrm was already loaded.
                  D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
                  D      winrm-fs was already loaded.
                  -----> Creating <fips-unit-functional-windows-2012r2>...
                  D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                  -----> Creating <fips-unit-functional-centos-6>...
                  D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                  D      platform name centos-6 appears to be a standard platform. Searching for centos 6 ...
                  -----> Creating <fips-integration-windows-2012r2>...
                  D      Searching for images matching {:name=>"CentOS-6.5-GA-*", :"owner-alias"=>"aws-marketplace", :architecture=>"x86_64", :"virtualization-type"=>"paravirtual", :"block-device-mapping.volume-type"=>"standard", :"image-type"=>"machine"} ...
                  D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                  D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                  -----> Creating <fips-integration-centos-6>...
                  D      platform name centos-6 appears to be a standard platform. Searching for centos 6 ...
                  D      Searching for images matching {:name=>"CentOS-6.5-GA-*", :"owner-alias"=>"aws-marketplace", :architecture=>"x86_64", :"virtualization-type"=>"paravirtual", :"block-device-mapping.volume-type"=>"standard", :"image-type"=>"machine"} ...
                  D      Search returned 1 images:
                  D      Search returned 3 images:
                  D      - CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2: Detected centos 6.5 x86_64.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.03.09: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-03-09T02:00:06.000Z
                  D      Search returned 1 images:
                  D      - CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2: Detected centos 6.5 x86_64.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                  D      Search returned 3 images:
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.03.09: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-03-09T02:00:06.000Z
                  D      Image for fips-integration-centos-6: CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                  D      Image for fips-unit-functional-centos-6: CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                         Detected platform: centos version 6.5 on x86_64. Instance Type: m3.large. Default username: root (default).
                         Detected platform: centos version 6.5 on x86_64. Instance Type: m3.large. Default username: root (default).
                  D      Image for fips-unit-functional-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                  D      No SSH username specified: using default username root  for image ami-b6bdde86, which we detected as centos 6.5 x86_64.
                         Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
                  D      No SSH username specified: using default username root  for image ami-b6bdde86, which we detected as centos 6.5 x86_64.
                         If you are not using an account that qualifies under the AWS
                  free-tier, you may be charged to run these suites. The charge
                  should be minimal, but neither Test Kitchen nor its maintainers
                  are responsible for your incurred costs.

                         If you are not using an account that qualifies under the AWS
                  free-tier, you may be charged to run these suites. The charge
                  should be minimal, but neither Test Kitchen nor its maintainers
                  are responsible for your incurred costs.

                  D      No SSH username specified: using default username administrator  for image ami-8db945ed, which we detected as windows 2012r2rtm x86_64.
                  D      Creating EC2 instance in region us-west-2 with properties:
                  D      Creating EC2 instance in region us-west-2 with properties:
                         If you are not using an account that qualifies under the AWS
                  free-tier, you may be charged to run these suites. The charge
                  should be minimal, but neither Test Kitchen nor its maintainers
                  are responsible for your incurred costs.

                  D      - instance_type = "m3.large"
                  D      Creating EC2 instance in region us-west-2 with properties:
                  D      - instance_type = "m3.large"
                  D      - ebs_optimized = false
                  D      - ebs_optimized = false
                  D      - image_id = "ami-b6bdde86"
                  D      - instance_type = "m3.large"
                  D      - key_name = "jenkins"
                  D      - image_id = "ami-b6bdde86"
                  D      - ebs_optimized = false
                  D      - image_id = "ami-8db945ed"
                  D      - key_name = "jenkins"
                  D      - subnet_id = "subnet-19ac017c"
                  D      - private_ip_address = nil
                  D      - placement = {:availability_zone=>"us-west-2a"}
                  D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                  D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                  D      - subnet_id = "subnet-19ac017c"
                  D      - key_name = "jenkins"
                  D      - subnet_id = "subnet-19ac017c"
                  D      - private_ip_address = nil
                  D      - private_ip_address = nil
                  D      - placement = {:availability_zone=>"us-west-2a"}
                  D      - placement = {:availability_zone=>"us-west-2a"}
                  D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                  D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                  D      Image for fips-integration-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                         Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
                  D      No SSH username specified: using default username administrator  for image ami-8db945ed, which we detected as windows 2012r2rtm x86_64.
                         If you are not using an account that qualifies under the AWS
                  free-tier, you may be charged to run these suites. The charge
                  should be minimal, but neither Test Kitchen nor its maintainers
                  are responsible for your incurred costs.

                  D      Creating EC2 instance in region us-west-2 with properties:
                  D      - instance_type = "m3.large"
                  D      - ebs_optimized = false
                  D      - image_id = "ami-8db945ed"
                  D      - key_name = "jenkins"
                  D      - subnet_id = "subnet-19ac017c"
                  D      - private_ip_address = nil
                  D      - placement = {:availability_zone=>"us-west-2a"}
                  D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                  D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                         Instance <i-adc2156b> requested.
                         Polling AWS for existence, attempt 0...
                         Instance <i-4bc2158d> requested.
                         Polling AWS for existence, attempt 0...
                         Instance <i-aec21568> requested.
                         Polling AWS for existence, attempt 0...
                         Instance <i-afc21569> requested.
                         Polling AWS for existence, attempt 0...
                         Attempting to tag the instance, 0 retries
                         Attempting to tag the instance, 0 retries
                         Attempting to tag the instance, 0 retries
                         Attempting to tag the instance, 0 retries
                         EC2 instance <i-adc2156b> created.
                         Waited 0/300s for instance <i-adc2156b> to become ready.
                         EC2 instance <i-4bc2158d> created.
                         Waited 0/300s for instance <i-4bc2158d> to become ready.
                         EC2 instance <i-aec21568> created.
                         Waited 0/300s for instance <i-aec21568> to become ready.
                         EC2 instance <i-afc21569> created.
                         Waited 0/300s for instance <i-afc21569> to become ready.
                         Waited 5/300s for instance <i-adc2156b> to become ready.
                         Waited 5/300s for instance <i-4bc2158d> to become ready.
                         Waited 5/300s for instance <i-aec21568> to become ready.
                         Waited 5/300s for instance <i-afc21569> to become ready.
                         Waited 10/300s for instance <i-4bc2158d> to become ready.
                         Waited 10/300s for instance <i-adc2156b> to become ready.
                         Waited 10/300s for instance <i-afc21569> to become ready.
                         Waited 10/300s for instance <i-aec21568> to become ready.
                         Waited 15/300s for instance <i-4bc2158d> to become ready.
                         Waited 15/300s for instance <i-adc2156b> to become ready.
                         Waited 15/300s for instance <i-afc21569> to become ready.
                         Waited 15/300s for instance <i-aec21568> to become ready.
                         Waited 20/300s for instance <i-adc2156b> to become ready.
                         Waited 20/300s for instance <i-4bc2158d> to become ready.
                         Waited 20/300s for instance <i-afc21569> to become ready.
                         EC2 instance <i-4bc2158d> ready.
                  D      [SSH] opening connection to root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"]}>
                         Waited 20/300s for instance <i-aec21568> to become ready.
                         Waited 25/300s for instance <i-adc2156b> to become ready.
                         Waited 25/300s for instance <i-afc21569> to become ready.
                         Waited 25/300s for instance <i-aec21568> to become ready.
                         EC2 instance <i-aec21568> ready.
                  D      [SSH] opening connection to root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"]}>
                         Waited 30/300s for instance <i-adc2156b> to become ready.
                         Waited 30/300s for instance <i-afc21569> to become ready.
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.11.238:22, retrying in 3 seconds
                         Waited 35/300s for instance <i-adc2156b> to become ready.
                         Waited 35/300s for instance <i-afc21569> to become ready.
                  D      [SSH] opening connection to root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.9.122:22, retrying in 3 seconds
                         Waited 40/300s for instance <i-adc2156b> to become ready.
                         Waited 40/300s for instance <i-afc21569> to become ready.
                  D      [SSH] opening connection to root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                         Waited 45/300s for instance <i-adc2156b> to become ready.
                         Waited 45/300s for instance <i-afc21569> to become ready.
                         Waited 50/300s for instance <i-adc2156b> to become ready.
                         Waited 50/300s for instance <i-afc21569> to become ready.
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.11.238:22, retrying in 3 seconds
                  D      [SSH] opening connection to root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                         Waited 55/300s for instance <i-adc2156b> to become ready.
                         Waited 55/300s for instance <i-afc21569> to become ready.
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.9.122:22, retrying in 3 seconds
                  D      [SSH] opening connection to root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                         Waited 60/300s for instance <i-adc2156b> to become ready.
                         Waited 60/300s for instance <i-afc21569> to become ready.
                         Waited 65/300s for instance <i-adc2156b> to become ready.
                         Waited 65/300s for instance <i-afc21569> to become ready.
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.11.238:22, retrying in 3 seconds
                         Waited 70/300s for instance <i-adc2156b> to become ready.
                         Waited 70/300s for instance <i-afc21569> to become ready.
                  D      [SSH] opening connection to root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.9.122:22, retrying in 3 seconds
                         Waited 75/300s for instance <i-adc2156b> to become ready.
                         Waited 75/300s for instance <i-afc21569> to become ready.
                  D      [SSH] opening connection to root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                         Waited 80/300s for instance <i-adc2156b> to become ready.
                         Waited 80/300s for instance <i-afc21569> to become ready.
                         Waited 85/300s for instance <i-adc2156b> to become ready.
                         Waited 85/300s for instance <i-afc21569> to become ready.
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.11.238:22, retrying in 3 seconds
                  D      [SSH] opening connection to root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] connection failed (#<Net::SSH::AuthenticationFailed: Authentication failed for user root@10.194.11.238>)
                         Waiting for SSH service on 10.194.11.238:22, retrying in 3 seconds
                         Waited 90/300s for instance <i-adc2156b> to become ready.
                         Waited 90/300s for instance <i-afc21569> to become ready.
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.9.122:22, retrying in 3 seconds
                  D      [SSH] opening connection to root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (echo '[SSH] Established')
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         [SSH] Established
                  D      Using sudo_command='sudo -E' for ohai hints
                  D      [SSH] reusing existing connection root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E mkdir -p /etc/chef/ohai/hints; sudo -E touch /etc/chef/ohai/hints/ec2.json)
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                  D      ec2:create '10.194.11.238'
                         Finished creating <fips-unit-functional-centos-6> (1m40.62s).
                  -----> Converging <fips-unit-functional-centos-6>...
                         Preparing files for transfer
                  D      Creating local sandbox in /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160518-8113-1hc2zct
                         Preparing dna.json
                  D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                         Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                         Removing non-cookbook files before transfer
                         Preparing validation.pem
                  D      Using a dummy validation.pem
                         Preparing client.rb
                  D      Creating client.rb from {:node_name=>"fips-unit-functional-centos-6", :checksum_path=>"/tmp/kitchen/checksums", :file_cache_path=>"/tmp/kitchen/cache", :file_backup_path=>"/tmp/kitchen/backup", :cookbook_path=>["/tmp/kitchen/cookbooks", "/tmp/kitchen/site-cookbooks"], :data_bag_path=>"/tmp/kitchen/data_bags", :environment_path=>"/tmp/kitchen/environments", :node_path=>"/tmp/kitchen/nodes", :role_path=>"/tmp/kitchen/roles", :client_path=>"/tmp/kitchen/clients", :user_path=>"/tmp/kitchen/users", :validation_key=>"/tmp/kitchen/validation.pem", :client_key=>"/tmp/kitchen/client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"/tmp/kitchen/encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                  D      [SSH] reusing existing connection root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E cat > /tmp/chef-installer.sh <<"EOL"
                  #!/bin/bash
                  #!/bin/sh
                  # WARNING: REQUIRES /bin/sh
                  #
                  # - must run on /bin/sh on solaris 9
                  # - must run on /bin/sh on AIX 6.x
                  #
                  # Copyright:: Copyright (c) 2010-2015 Chef Software, Inc.
                  # License:: Apache License, Version 2.0
                  #
                  # Licensed under the Apache License, Version 2.0 (the "License");
                  # you may not use this file except in compliance with the License.
                  # You may obtain a copy of the License at
                  #
                  #     http://www.apache.org/licenses/LICENSE-2.0
                  #
                  # Unless required by applicable law or agreed to in writing, software
                  # distributed under the License is distributed on an "AS IS" BASIS,
                  # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                  # See the License for the specific language governing permissions and
                  # limitations under the License.
                  #

                  # helpers.sh
                  ############
                  # This section has some helper functions to make life easier.
                  #
                  # Outputs:
                  # $tmp_dir: secure-ish temp directory that can be used during installation.
                  ############

                  # Check whether a command exists - returns 0 if it does, 1 if it does not
                  exists() {
                    if command -v $1 >/dev/null 2>&1
                    then
                      return 0
                    else
                      return 1
                    fi
                  }

                  # Output the instructions to report bug about this script
                  report_bug() {
                    echo "Version: $version"
                    echo ""
                    echo "Please file a Bug Report at https://github.com/chef/omnitruck/issues/new"
                    echo "Alternatively, feel free to open a Support Ticket at https://www.chef.io/support/tickets"
                    echo "More Chef support resources can be found at https://www.chef.io/support"
                    echo ""
                    echo "Please include as many details about the problem as possible i.e., how to reproduce"
                    echo "the problem (if possible), type of the Operating System and its version, etc.,"
                    echo "and any other relevant details that might help us with troubleshooting."
                    echo ""
                  }

                  checksum_mismatch() {
                    echo "Package checksum mismatch!"
                    report_bug
                    exit 1
                  }

                  unable_to_retrieve_package() {
                    echo "Unable to retrieve a valid package!"
                    report_bug
                    echo "Metadata URL: $metadata_url"
                    if test "x$download_url" != "x"; then
                      echo "Download URL: $download_url"
                    fi
                    if test "x$stderr_results" != "x"; then
                      echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
                    fi
                    exit 1
                  }

                  http_404_error() {
                    echo "Omnitruck artifact does not exist for version $version on platform $platform"
                    echo ""
                    echo "Either this means:"
                    echo "   - We do not support $platform"
                    echo "   - We do not have an artifact for $version"
                    echo ""
                    echo "This is often the latter case due to running a prerelease or RC version of chef"
                    echo "or a gem version which was only pushed to rubygems and not omnitruck."
                    echo ""
                    echo "You may be able to set your knife[:bootstrap_version] to the most recent stable"
                    echo "release of Chef to fix this problem (or the most recent stable major version number)."
                    echo ""
                    echo "In order to test the version parameter, adventurous users may take the Metadata URL"
                    echo "below and modify the '&v=<number>' parameter until you successfully get a URL that"
                    echo "does not 404 (e.g. via curl or wget).  You should be able to use '&v=11' or '&v=12'"
                    echo "succesfully."
                    echo ""
                    echo "If you cannot fix this problem by setting the bootstrap_version, it probably means"
                    echo "that $platform is not supported."
                    echo ""
                    # deliberately do not call report_bug to suppress bug report noise.
                    echo "Metadata URL: $metadata_url"
                    if test "x$download_url" != "x"; then
                      echo "Download URL: $download_url"
                    fi
                    if test "x$stderr_results" != "x"; then
                      echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
                    fi
                    exit 1
                  }

                  capture_tmp_stderr() {
                    # spool up /tmp/stderr from all the commands we called
                    if test -f "$tmp_dir/stderr"; then
                      output=`cat $tmp_dir/stderr`
                      stderr_results="${stderr_results}\nSTDERR from $1:\n\n$output\n"
                      rm $tmp_dir/stderr
                    fi
                  }

                  # do_wget URL FILENAME
                  do_wget() {
                    echo "trying wget..."
                    wget -O "$2" "$1" 2>$tmp_dir/stderr
                    rc=$?
                    # check for 404
                    grep "ERROR 404" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "wget"
                      return 1
                    fi

                    return 0
                  }

                  # do_curl URL FILENAME
                  do_curl() {
                    echo "trying curl..."
                    curl --retry 5 -sL -D $tmp_dir/stderr "$1" > "$2"
                    rc=$?
                    # check for 404
                    grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "curl"
                      return 1
                    fi

                    return 0
                  }

                  # do_fetch URL FILENAME
                  do_fetch() {
                    echo "trying fetch..."
                    fetch -o "$2" "$1" 2>$tmp_dir/stderr
                    # check for bad return status
                    test $? -ne 0 && return 1
                    return 0
                  }

                  # do_perl URL FILENAME
                  do_perl() {
                    echo "trying perl..."
                    perl -e 'use LWP::Simple; getprint($ARGV[0]);' "$1" > "$2" 2>$tmp_dir/stderr
                    rc=$?
                    # check for 404
                    grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "perl"
                      return 1
                    fi

                    return 0
                  }

                  # do_python URL FILENAME
                  do_python() {
                    echo "trying python..."
                    python -c "import sys,urllib2 ; sys.stdout.write(urllib2.urlopen(sys.argv[1]).read())" "$1" > "$2" 2>$tmp_dir/stderr
                    rc=$?
                    # check for 404
                    grep "HTTP Error 404" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "python"
                      return 1
                    fi
                    return 0
                  }

                  # returns 0 if checksums match
                  do_checksum() {
                    if exists sha256sum; then
                      echo "Comparing checksum with sha256sum..."
                      checksum=`sha256sum $1 | awk '{ print $1 }'`
                      return `test "x$checksum" = "x$2"`
                    elif exists shasum; then
                      echo "Comparing checksum with shasum..."
                      checksum=`shasum -a 256 $1 | awk '{ print $1 }'`
                      return `test "x$checksum" = "x$2"`
                    else
                      echo "WARNING: could not find a valid checksum program, pre-install shasum or sha256sum in your O/S image to get valdation..."
                      return 0
                    fi
                  }

                  # do_download URL FILENAME
                  do_download() {
                    echo "downloading $1"
                    echo "  to file $2"

                    url=`echo $1`
                    if test "x$platform" = "xsolaris2"; then
                      if test "x$platform_version" = "x5.9" -o "x$platform_version" = "x5.10"; then
                        # solaris 9 lacks openssl, solaris 10 lacks recent enough credentials - your base O/S is completely insecure, please upgrade
                        url=`echo $url | sed -e 's/https/http/'`
                      fi
                    fi

                    # we try all of these until we get success.
                    # perl, in particular may be present but LWP::Simple may not be installed

                    if exists wget; then
                      do_wget $url $2 && return 0
                    fi

                    if exists curl; then
                      do_curl $url $2 && return 0
                    fi

                    if exists fetch; then
                      do_fetch $url $2 && return 0
                    fi

                    if exists perl; then
                      do_perl $url $2 && return 0
                    fi

                    if exists python; then
                      do_python $url $2 && return 0
                    fi

                    unable_to_retrieve_package
                  }

                  # install_file TYPE FILENAME
                  # TYPE is "rpm", "deb", "solaris", "sh", etc.
                  install_file() {
                    echo "Installing $project $version"
                    case "$1" in
                      "rpm")
                        if test "x$platform" = "xnexus" || test "x$platform" = "xios_xr"; then
                          echo "installing with yum..."
                          yum install -yv "$2"
                        else
                          echo "installing with rpm..."
                          rpm -Uvh --oldpackage --replacepkgs "$2"
                        fi
                        ;;
                      "deb")
                        echo "installing with dpkg..."
                        dpkg -i "$2"
                        ;;
                      "bff")
                        echo "installing with installp..."
                        installp -aXYgd "$2" all
                        ;;
                      "solaris")
                        echo "installing with pkgadd..."
                        echo "conflict=nocheck" > $tmp_dir/nocheck
                        echo "action=nocheck" >> $tmp_dir/nocheck
                        echo "mail=" >> $tmp_dir/nocheck
                        pkgrm -a $tmp_dir/nocheck -n $project >/dev/null 2>&1 || true
                        pkgadd -G -n -d "$2" -a $tmp_dir/nocheck $project
                        ;;
                      "pkg")
                        echo "installing with installer..."
                        cd / && /usr/sbin/installer -pkg "$2" -target /
                        ;;
                      "dmg")
                        echo "installing dmg file..."
                        hdiutil detach "/Volumes/chef_software" >/dev/null 2>&1 || true
                        hdiutil attach "$2" -mountpoint "/Volumes/chef_software"
                        cd / && /usr/sbin/installer -pkg `find "/Volumes/chef_software" -name \*.pkg` -target /
                        hdiutil detach "/Volumes/chef_software"
                        ;;
                      "sh" )
                        echo "installing with sh..."
                        sh "$2"
                        ;;
                      *)
                        echo "Unknown filetype: $1"
                        report_bug
                        exit 1
                        ;;
                    esac
                    if test $? -ne 0; then
                      echo "Installation failed"
                      report_bug
                      exit 1
                    fi
                  }

                  if test "x$TMPDIR" = "x"; then
                    tmp="/tmp"
                  else
                    tmp=$TMPDIR
                  fi
                  # secure-ish temp dir creation without having mktemp available (DDoS-able but not expliotable)
                  tmp_dir="$tmp/install.sh.$$"
                  (umask 077 && mkdir $tmp_dir) || exit 1

                  ############
                  # end of helpers.sh
                  ############


                  project=chef
                  version=12.11.0+20160518230930
                  channel=unstable


                  # platform_detection.sh
                  ############
                  # This section makes platform detection compatible with omnitruck on the system
                  #   it runs.
                  #
                  # Outputs:
                  # $platform: Name of the platform.
                  # $platform_version: Version of the platform.
                  # $machine: System's architecture.
                  ############

                  #
                  # Platform and Platform Version detection
                  #
                  # NOTE: This should now match ohai platform and platform_version matching.
                  # do not invented new platform and platform_version schemas, just make this behave
                  # like what ohai returns as platform and platform_version for the server.
                  #
                  # ALSO NOTE: Do not mangle platform or platform_version here.  It is less error
                  # prone and more future-proof to do that in the server, and then all omnitruck clients
                  # will 'inherit' the changes (install.sh is not the only client of the omnitruck
                  # endpoint out there).
                  #

                  machine=`uname -m`
                  os=`uname -s`

                  if test -f "/etc/lsb-release" && grep -q DISTRIB_ID /etc/lsb-release && ! grep -q wrlinux /etc/lsb-release; then
                    platform=`grep DISTRIB_ID /etc/lsb-release | cut -d "=" -f 2 | tr '[A-Z]' '[a-z]'`
                    platform_version=`grep DISTRIB_RELEASE /etc/lsb-release | cut -d "=" -f 2`
                  elif test -f "/etc/debian_version"; then
                    platform="debian"
                    platform_version=`cat /etc/debian_version`
                  elif test -f "/etc/redhat-release"; then
                    platform=`sed 's/^\(.\+\) release.*/\1/' /etc/redhat-release | tr '[A-Z]' '[a-z]'`
                    platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/redhat-release`

                    # If /etc/redhat-release exists, we act like RHEL by default
                    if test "$platform" = "fedora"; then
                      # FIXME: stop remapping fedora to el
                      # FIXME: remove client side platform_version mangling and hard coded yolo
                      # Change platform version for use below.
                      platform_version="6.0"
                    fi

                    if test "$platform" = "xenserver"; then
                      # Current XenServer 6.2 is based on CentOS 5, platform is not reset to "el" server should hanlde response
                      platform="xenserver"
                    else
                      # FIXME: use "redhat"
                      platform="el"
                    fi

                  elif test -f "/etc/system-release"; then
                    platform=`sed 's/^\(.\+\) release.\+/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
                    platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
                    # amazon is built off of fedora, so act like RHEL
                    if test "$platform" = "amazon linux ami"; then
                      # FIXME: remove client side platform_version mangling and hard coded yolo, and remapping to deprecated "el"
                      platform="el"
                      platform_version="6.0"
                    fi
                  # Apple OS X
                  elif test -f "/usr/bin/sw_vers"; then
                    platform="mac_os_x"
                    # Matching the tab-space with sed is error-prone
                    platform_version=`sw_vers | awk '/^ProductVersion:/ { print $2 }' | cut -d. -f1,2`

                    # x86_64 Apple hardware often runs 32-bit kernels (see OHAI-63)
                    x86_64=`sysctl -n hw.optional.x86_64`
                    if test $x86_64 -eq 1; then
                      machine="x86_64"
                    fi
                  elif test -f "/etc/release"; then
                    machine=`/usr/bin/uname -p`
                    if grep -q SmartOS /etc/release; then
                      platform="smartos"
                      platform_version=`grep ^Image /etc/product | awk '{ print $3 }'`
                    else
                      platform="solaris2"
                      platform_version=`/usr/bin/uname -r`
                    fi
                  elif test -f "/etc/SuSE-release"; then
                    if grep -q 'Enterprise' /etc/SuSE-release;
                    then
                        platform="sles"
                        platform_version=`awk '/^VERSION/ {V = $3}; /^PATCHLEVEL/ {P = $3}; END {print V "." P}' /etc/SuSE-release`
                    else
                        platform="suse"
                        platform_version=`awk '/^VERSION =/ { print $3 }' /etc/SuSE-release`
                    fi
                  elif test "x$os" = "xFreeBSD"; then
                    platform="freebsd"
                    platform_version=`uname -r | sed 's/-.*//'`
                  elif test "x$os" = "xAIX"; then
                    platform="aix"
                    platform_version="`uname -v`.`uname -r`"
                    machine="powerpc"
                  elif test -f "/etc/os-release"; then
                    . /etc/os-release
                    if test "x$CISCO_RELEASE_INFO" != "x"; then
                      . $CISCO_RELEASE_INFO
                    fi

                    platform=$ID
                    platform_version=$VERSION
                  fi

                  if test "x$platform" = "x"; then
                    echo "Unable to determine platform version!"
                    report_bug
                    exit 1
                  fi

                  #
                  # NOTE: platform manging in the install.sh is DEPRECATED
                  #
                  # - install.sh should be true to ohai and should not remap
                  #   platform or platform versions.
                  #
                  # - remapping platform and mangling platform version numbers is
                  #   now the complete responsibility of the server-side endpoints
                  #

                  major_version=`echo $platform_version | cut -d. -f1`
                  case $platform in
                    # FIXME: should remove this case statement completely
                    "el")
                      # FIXME:  "el" is deprecated, should use "redhat"
                      platform_version=$major_version
                      ;;
                    "debian")
                      if test "x$major_version" = "x5"; then
                        # This is here for potential back-compat.
                        # We do not have 5 in versions we publish for anymore but we
                        # might have it for earlier versions.
                        platform_version="6"
                      else
                        platform_version=$major_version
                      fi
                      ;;
                    "freebsd")
                      platform_version=$major_version
                      ;;
                    "sles")
                      platform_version=$major_version
                      ;;
                    "suse")
                      platform_version=$major_version
                      ;;
                  esac

                  if test "x$platform_version" = "x"; then
                    echo "Unable to determine platform version!"
                    report_bug
                    exit 1
                  fi

                  if test "x$platform" = "xsolaris2"; then
                    # hack up the path on Solaris to find wget, pkgadd
                    PATH=/usr/sfw/bin:/usr/sbin:$PATH
                    export PATH
                  fi

                  echo "$platform $platform_version $machine"

                  ############
                  # end of platform_detection.sh
                  ############


                  # artifactory_urls.sh
                  ############
                  # This section sets up the information for a build to be installed from artifactory
                  #  then uses $platform, $platform_version and $machine to select the correct
                  #  version.
                  #
                  # Inputs:
                  # $platform:
                  # $platform_version:
                  # $machine:
                  #
                  # Outputs:
                  # $download_url:
                  # $sha256:
                  ############


                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012/chef-client-12.11.0+20160518230930-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/nexus/7/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/nexus/7/chef-12.11.0+20160518230930-1.nexus7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 b5f5b8500ca3d09165f049680012dfe2a8498b8d68536dc6036e2691d2a21816" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012r2/chef-client-12.11.0+20160518230930-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/sparc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.10/chef-12.11.0+20160518230930-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 3215e28eb64e946360fa63e799547c989ccb368598f401e63e5bb2a873833438" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/12.04/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/12.04/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.10/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.10/chef-12.11.0+20160518230930-1.dmg" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/8/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/8/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/6/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/6/chef-12.11.0+20160518230930-1.el6.i386.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 dffb2a842ca7b5665ca6456b3ca9fc5b3ca31ba40c1a1d177da855cfe6045e62" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/amd64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/10/chef-12.11.0+20160518230930_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 9e14dbacbc3934c04da1c58f8da352057cc535075ac136580bcaffa12b998f37" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/8/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/8/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/aix/7.1/powerpc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/aix/7.1/chef-12.11.0+20160518230930-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 0f82e6aad81d75132c859a06d992097101c4c44c6ad2d8b9d296134660d2711a" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.9/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.9/chef-12.11.0+20160518230930-1.dmg" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/6/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/6/chef-12.11.0+20160518230930-1.el6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 3264230c76a0c1f210967dc8707ffc042da86e2716103d5e0a6dc06174023631" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/aix/6.1/powerpc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/aix/6.1/chef-12.11.0+20160518230930-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 0f82e6aad81d75132c859a06d992097101c4c44c6ad2d8b9d296134660d2711a" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/5/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/5/chef-12.11.0+20160518230930-1.el5.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 cd850af4b3674fd667afc7e0e8f3dae0c7938122ccc5251af21fda28a603051a" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/14.04/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/9/chef-12.11.0+20160518230930_1.i386.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 1ddac9d2d08a1799c098160a82fb3a46d9c055553b1290ef19ba29638805d4fb" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.11/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.11/chef-12.11.0+20160518230930-1.dmg" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/14.04/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.10/chef-12.11.0+20160518230930-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 4b3d49026bd0ba69af907b5e6065c2ca3955cc4bf9b73d4874541533b5781ec2" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/5/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/5/chef-12.11.0+20160518230930-1.el5.i386.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 37e17f1b0dd9a121bad9de09d84b1b210fb2d1704a73baf0d05a4687d8f67df6" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.11/chef-12.11.0+20160518230930-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 4b3d49026bd0ba69af907b5e6065c2ca3955cc4bf9b73d4874541533b5781ec2" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ios_xr/6/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ios_xr/6/chef-12.11.0+20160518230930-1.ios_xr6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 b9b278a20c4fe7dfa2f3ce035386b2c45811dba5e754e86ebf26326cc5574a6d" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/6/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/6/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/7/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/7/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/amd64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/9/chef-12.11.0+20160518230930_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 021610fbb0aa0511d9a7d45453616a0d89acdb365801badfa8780722f534ed7a" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/7/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/7/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012r2/chef-client-12.11.0+20160518230930-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/10.04/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/10.04/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/7/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/7/chef-12.11.0+20160518230930-1.el7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 380b052db91eae0364cb4c57e6344aef1d1a42b7689e95058e84c0196cdc4bff" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/10/chef-12.11.0+20160518230930_1.i386.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 6f058632798033dff5519f31dca8a45ad881635ab4b0f88bac0445b863843566" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/10.04/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/10.04/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/sparc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.11/chef-12.11.0+20160518230930-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 3215e28eb64e946360fa63e799547c989ccb368598f401e63e5bb2a873833438" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012/chef-client-12.11.0+20160518230930-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2008r2/chef-client-12.11.0+20160518230930-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2008r2/chef-client-12.11.0+20160518230930-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/6/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/6/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" >> "$artifact_info_dir/artifact_info"


                  artifact_info_for_platform="$tmp_dir/artifact_info/$platform/$platform_version/$machine/artifact_info"

                  download_url=`awk '$1 == "url" { print $2 }' "$artifact_info_for_platform"`
                  sha256=`awk '$1 == "sha256" { print $2 }' "$artifact_info_for_platform"`


                  # fetch_package.sh
                  ############
                  # This section fetchs a package from $download_url and verifies its metadata.
                  #
                  # Inputs:
                  # $download_url:
                  # $tmp_dir:
                  # Optional Inputs:
                  # $cmdline_filename: Name of the package downloaded on local disk.
                  # $cmdline_dl_dir: Name of the directory downloaded package will be saved to on local disk.
                  #
                  # Outputs:
                  # $download_filename: Name of the downloaded file on local disk.
                  # $filetype: Type of the file downloaded.
                  ############

                  filename=`echo $download_url | sed -e 's/^.*\///'`
                  filetype=`echo $filename | sed -e 's/^.*\.//'`

                  # use either $tmp_dir, the provided directory (-d) or the provided filename (-f)
                  if test "x$cmdline_filename" != "x"; then
                    download_filename="$cmdline_filename"
                  elif test "x$cmdline_dl_dir" != "x"; then
                    download_filename="$cmdline_dl_dir/$filename"
                  else
                    download_filename="$tmp_dir/$filename"
                  fi

                  # ensure the parent directory where to download the installer always exists
                  download_dir=`dirname $download_filename`
                  (umask 077 && mkdir -p $download_dir) || exit 1

                  # check if we have that file locally available and if so verify the checksum
                  cached_file_available="false"
                  if test -f $download_filename; then
                    echo "$download_filename already exists, verifiying checksum..."
                    if do_checksum "$download_filename" "$sha256"; then
                      echo "checksum compare succeeded, using existing file!"
                      cached_file_available="true"
                    else
                      echo "checksum mismatch, downloading latest version of the file"
                    fi
                  fi

                  # download if no local version of the file available
                  if test "x$cached_file_available" != "xtrue"; then
                    do_download "$download_url"  "$download_filename"
                    do_checksum "$download_filename" "$sha256" || checksum_mismatch
                  fi

                  ############
                  # end of fetch_package.sh
                  ############


                  # install_package.sh
                  ############
                  # Installs a package and removed the temp directory.
                  #
                  # Inputs:
                  # $download_filename: Name of the file to be installed.
                  # $filetype: Type of the file to be installed.
                  # $version: The version requested. Used only for warning user if not set.
                  ############

                  if test "x$version" = "x"; then
                    echo
                    echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
                    echo
                    echo "You are installing an omnibus package without a version pin.  If you are installing"
                    echo "on production servers via an automated process this is DANGEROUS and you will"
                    echo "be upgraded without warning on new releases, even to new major releases."
                    echo "Letting the version float is only appropriate in desktop, test, development or"
                    echo "CI/CD environments."
                    echo
                    echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
                    echo
                  fi

                  install_file $filetype "$download_filename"

                  if test "x$tmp_dir" != "x"; then
                    rm -r "$tmp_dir"
                  fi

                  ############
                  # end of install_package.sh
                  ############

                  EOL
                  chmod +x /tmp/chef-installer.sh
                  sudo -E /tmp/chef-installer.sh)
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         /bin/bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         el 6 x86_64
                         downloading http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/6/chef-12.11.0+20160518230930-1.el6.x86_64.rpm
                           to file /tmp/install.sh.959/chef-12.11.0+20160518230930-1.el6.x86_64.rpm
                         trying curl...
                         Comparing checksum with sha256sum...
                         Installing chef 12.11.0+20160518230930
                         installing with rpm...
                         warning: /tmp/install.sh.959/chef-12.11.0+20160518230930-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
                         Preparing...                                                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                  D      [SSH] opening connection to root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (echo '[SSH] Established')
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         [SSH] Established
                  D      Using sudo_command='sudo -E' for ohai hints
                  D      [SSH] reusing existing connection root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E mkdir -p /etc/chef/ohai/hints; sudo -E touch /etc/chef/ohai/hints/ec2.json)
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                  D      ec2:create '10.194.9.122'
                         Finished creating <fips-integration-centos-6> (1m43.38s).
                  -----> Converging <fips-integration-centos-6>...
                         Preparing files for transfer
                  D      Creating local sandbox in /tmp/cheftest/fips-integration-centos-6-sandbox-20160518-8113-b9a0d2
                         Preparing dna.json
                  D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                         Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                         Removing non-cookbook files before transfer
                         Preparing validation.pem
                  D      Using a dummy validation.pem
                         Preparing client.rb
                  D      Creating client.rb from {:node_name=>"fips-integration-centos-6", :checksum_path=>"/tmp/kitchen/checksums", :file_cache_path=>"/tmp/kitchen/cache", :file_backup_path=>"/tmp/kitchen/backup", :cookbook_path=>["/tmp/kitchen/cookbooks", "/tmp/kitchen/site-cookbooks"], :data_bag_path=>"/tmp/kitchen/data_bags", :environment_path=>"/tmp/kitchen/environments", :node_path=>"/tmp/kitchen/nodes", :role_path=>"/tmp/kitchen/roles", :client_path=>"/tmp/kitchen/clients", :user_path=>"/tmp/kitchen/users", :validation_key=>"/tmp/kitchen/validation.pem", :client_key=>"/tmp/kitchen/client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"/tmp/kitchen/encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                  D      [SSH] reusing existing connection root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E cat > /tmp/chef-installer.sh <<"EOL"
                  #!/bin/bash
                  #!/bin/sh
                  # WARNING: REQUIRES /bin/sh
                  #
                  # - must run on /bin/sh on solaris 9
                  # - must run on /bin/sh on AIX 6.x
                  #
                  # Copyright:: Copyright (c) 2010-2015 Chef Software, Inc.
                  # License:: Apache License, Version 2.0
                  #
                  # Licensed under the Apache License, Version 2.0 (the "License");
                  # you may not use this file except in compliance with the License.
                  # You may obtain a copy of the License at
                  #
                  #     http://www.apache.org/licenses/LICENSE-2.0
                  #
                  # Unless required by applicable law or agreed to in writing, software
                  # distributed under the License is distributed on an "AS IS" BASIS,
                  # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                  # See the License for the specific language governing permissions and
                  # limitations under the License.
                  #

                  # helpers.sh
                  ############
                  # This section has some helper functions to make life easier.
                  #
                  # Outputs:
                  # $tmp_dir: secure-ish temp directory that can be used during installation.
                  ############

                  # Check whether a command exists - returns 0 if it does, 1 if it does not
                  exists() {
                    if command -v $1 >/dev/null 2>&1
                    then
                      return 0
                    else
                      return 1
                    fi
                  }

                  # Output the instructions to report bug about this script
                  report_bug() {
                    echo "Version: $version"
                    echo ""
                    echo "Please file a Bug Report at https://github.com/chef/omnitruck/issues/new"
                    echo "Alternatively, feel free to open a Support Ticket at https://www.chef.io/support/tickets"
                    echo "More Chef support resources can be found at https://www.chef.io/support"
                    echo ""
                    echo "Please include as many details about the problem as possible i.e., how to reproduce"
                    echo "the problem (if possible), type of the Operating System and its version, etc.,"
                    echo "and any other relevant details that might help us with troubleshooting."
                    echo ""
                  }

                  checksum_mismatch() {
                    echo "Package checksum mismatch!"
                    report_bug
                    exit 1
                  }

                  unable_to_retrieve_package() {
                    echo "Unable to retrieve a valid package!"
                    report_bug
                    echo "Metadata URL: $metadata_url"
                    if test "x$download_url" != "x"; then
                      echo "Download URL: $download_url"
                    fi
                    if test "x$stderr_results" != "x"; then
                      echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
                    fi
                    exit 1
                  }

                  http_404_error() {
                    echo "Omnitruck artifact does not exist for version $version on platform $platform"
                    echo ""
                    echo "Either this means:"
                    echo "   - We do not support $platform"
                    echo "   - We do not have an artifact for $version"
                    echo ""
                    echo "This is often the latter case due to running a prerelease or RC version of chef"
                    echo "or a gem version which was only pushed to rubygems and not omnitruck."
                    echo ""
                    echo "You may be able to set your knife[:bootstrap_version] to the most recent stable"
                    echo "release of Chef to fix this problem (or the most recent stable major version number)."
                    echo ""
                    echo "In order to test the version parameter, adventurous users may take the Metadata URL"
                    echo "below and modify the '&v=<number>' parameter until you successfully get a URL that"
                    echo "does not 404 (e.g. via curl or wget).  You should be able to use '&v=11' or '&v=12'"
                    echo "succesfully."
                    echo ""
                    echo "If you cannot fix this problem by setting the bootstrap_version, it probably means"
                    echo "that $platform is not supported."
                    echo ""
                    # deliberately do not call report_bug to suppress bug report noise.
                    echo "Metadata URL: $metadata_url"
                    if test "x$download_url" != "x"; then
                      echo "Download URL: $download_url"
                    fi
                    if test "x$stderr_results" != "x"; then
                      echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
                    fi
                    exit 1
                  }

                  capture_tmp_stderr() {
                    # spool up /tmp/stderr from all the commands we called
                    if test -f "$tmp_dir/stderr"; then
                      output=`cat $tmp_dir/stderr`
                      stderr_results="${stderr_results}\nSTDERR from $1:\n\n$output\n"
                      rm $tmp_dir/stderr
                    fi
                  }

                  # do_wget URL FILENAME
                  do_wget() {
                    echo "trying wget..."
                    wget -O "$2" "$1" 2>$tmp_dir/stderr
                    rc=$?
                    # check for 404
                    grep "ERROR 404" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "wget"
                      return 1
                    fi

                    return 0
                  }

                  # do_curl URL FILENAME
                  do_curl() {
                    echo "trying curl..."
                    curl --retry 5 -sL -D $tmp_dir/stderr "$1" > "$2"
                    rc=$?
                    # check for 404
                    grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "curl"
                      return 1
                    fi

                    return 0
                  }

                  # do_fetch URL FILENAME
                  do_fetch() {
                    echo "trying fetch..."
                    fetch -o "$2" "$1" 2>$tmp_dir/stderr
                    # check for bad return status
                    test $? -ne 0 && return 1
                    return 0
                  }

                  # do_perl URL FILENAME
                  do_perl() {
                    echo "trying perl..."
                    perl -e 'use LWP::Simple; getprint($ARGV[0]);' "$1" > "$2" 2>$tmp_dir/stderr
                    rc=$?
                    # check for 404
                    grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "perl"
                      return 1
                    fi

                    return 0
                  }

                  # do_python URL FILENAME
                  do_python() {
                    echo "trying python..."
                    python -c "import sys,urllib2 ; sys.stdout.write(urllib2.urlopen(sys.argv[1]).read())" "$1" > "$2" 2>$tmp_dir/stderr
                    rc=$?
                    # check for 404
                    grep "HTTP Error 404" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "python"
                      return 1
                    fi
                    return 0
                  }

                  # returns 0 if checksums match
                  do_checksum() {
                    if exists sha256sum; then
                      echo "Comparing checksum with sha256sum..."
                      checksum=`sha256sum $1 | awk '{ print $1 }'`
                      return `test "x$checksum" = "x$2"`
                    elif exists shasum; then
                      echo "Comparing checksum with shasum..."
                      checksum=`shasum -a 256 $1 | awk '{ print $1 }'`
                      return `test "x$checksum" = "x$2"`
                    else
                      echo "WARNING: could not find a valid checksum program, pre-install shasum or sha256sum in your O/S image to get valdation..."
                      return 0
                    fi
                  }

                  # do_download URL FILENAME
                  do_download() {
                    echo "downloading $1"
                    echo "  to file $2"

                    url=`echo $1`
                    if test "x$platform" = "xsolaris2"; then
                      if test "x$platform_version" = "x5.9" -o "x$platform_version" = "x5.10"; then
                        # solaris 9 lacks openssl, solaris 10 lacks recent enough credentials - your base O/S is completely insecure, please upgrade
                        url=`echo $url | sed -e 's/https/http/'`
                      fi
                    fi

                    # we try all of these until we get success.
                    # perl, in particular may be present but LWP::Simple may not be installed

                    if exists wget; then
                      do_wget $url $2 && return 0
                    fi

                    if exists curl; then
                      do_curl $url $2 && return 0
                    fi

                    if exists fetch; then
                      do_fetch $url $2 && return 0
                    fi

                    if exists perl; then
                      do_perl $url $2 && return 0
                    fi

                    if exists python; then
                      do_python $url $2 && return 0
                    fi

                    unable_to_retrieve_package
                  }

                  # install_file TYPE FILENAME
                  # TYPE is "rpm", "deb", "solaris", "sh", etc.
                  install_file() {
                    echo "Installing $project $version"
                    case "$1" in
                      "rpm")
                        if test "x$platform" = "xnexus" || test "x$platform" = "xios_xr"; then
                          echo "installing with yum..."
                          yum install -yv "$2"
                        else
                          echo "installing with rpm..."
                          rpm -Uvh --oldpackage --replacepkgs "$2"
                        fi
                        ;;
                      "deb")
                        echo "installing with dpkg..."
                        dpkg -i "$2"
                        ;;
                      "bff")
                        echo "installing with installp..."
                        installp -aXYgd "$2" all
                        ;;
                      "solaris")
                        echo "installing with pkgadd..."
                        echo "conflict=nocheck" > $tmp_dir/nocheck
                        echo "action=nocheck" >> $tmp_dir/nocheck
                        echo "mail=" >> $tmp_dir/nocheck
                        pkgrm -a $tmp_dir/nocheck -n $project >/dev/null 2>&1 || true
                        pkgadd -G -n -d "$2" -a $tmp_dir/nocheck $project
                        ;;
                      "pkg")
                        echo "installing with installer..."
                        cd / && /usr/sbin/installer -pkg "$2" -target /
                        ;;
                      "dmg")
                        echo "installing dmg file..."
                        hdiutil detach "/Volumes/chef_software" >/dev/null 2>&1 || true
                        hdiutil attach "$2" -mountpoint "/Volumes/chef_software"
                        cd / && /usr/sbin/installer -pkg `find "/Volumes/chef_software" -name \*.pkg` -target /
                        hdiutil detach "/Volumes/chef_software"
                        ;;
                      "sh" )
                        echo "installing with sh..."
                        sh "$2"
                        ;;
                      *)
                        echo "Unknown filetype: $1"
                        report_bug
                        exit 1
                        ;;
                    esac
                    if test $? -ne 0; then
                      echo "Installation failed"
                      report_bug
                      exit 1
                    fi
                  }

                  if test "x$TMPDIR" = "x"; then
                    tmp="/tmp"
                  else
                    tmp=$TMPDIR
                  fi
                  # secure-ish temp dir creation without having mktemp available (DDoS-able but not expliotable)
                  tmp_dir="$tmp/install.sh.$$"
                  (umask 077 && mkdir $tmp_dir) || exit 1

                  ############
                  # end of helpers.sh
                  ############


                  project=chef
                  version=12.11.0+20160518230930
                  channel=unstable


                  # platform_detection.sh
                  ############
                  # This section makes platform detection compatible with omnitruck on the system
                  #   it runs.
                  #
                  # Outputs:
                  # $platform: Name of the platform.
                  # $platform_version: Version of the platform.
                  # $machine: System's architecture.
                  ############

                  #
                  # Platform and Platform Version detection
                  #
                  # NOTE: This should now match ohai platform and platform_version matching.
                  # do not invented new platform and platform_version schemas, just make this behave
                  # like what ohai returns as platform and platform_version for the server.
                  #
                  # ALSO NOTE: Do not mangle platform or platform_version here.  It is less error
                  # prone and more future-proof to do that in the server, and then all omnitruck clients
                  # will 'inherit' the changes (install.sh is not the only client of the omnitruck
                  # endpoint out there).
                  #

                  machine=`uname -m`
                  os=`uname -s`

                  if test -f "/etc/lsb-release" && grep -q DISTRIB_ID /etc/lsb-release && ! grep -q wrlinux /etc/lsb-release; then
                    platform=`grep DISTRIB_ID /etc/lsb-release | cut -d "=" -f 2 | tr '[A-Z]' '[a-z]'`
                    platform_version=`grep DISTRIB_RELEASE /etc/lsb-release | cut -d "=" -f 2`
                  elif test -f "/etc/debian_version"; then
                    platform="debian"
                    platform_version=`cat /etc/debian_version`
                  elif test -f "/etc/redhat-release"; then
                    platform=`sed 's/^\(.\+\) release.*/\1/' /etc/redhat-release | tr '[A-Z]' '[a-z]'`
                    platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/redhat-release`

                    # If /etc/redhat-release exists, we act like RHEL by default
                    if test "$platform" = "fedora"; then
                      # FIXME: stop remapping fedora to el
                      # FIXME: remove client side platform_version mangling and hard coded yolo
                      # Change platform version for use below.
                      platform_version="6.0"
                    fi

                    if test "$platform" = "xenserver"; then
                      # Current XenServer 6.2 is based on CentOS 5, platform is not reset to "el" server should hanlde response
                      platform="xenserver"
                    else
                      # FIXME: use "redhat"
                      platform="el"
                    fi

                  elif test -f "/etc/system-release"; then
                    platform=`sed 's/^\(.\+\) release.\+/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
                    platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
                    # amazon is built off of fedora, so act like RHEL
                    if test "$platform" = "amazon linux ami"; then
                      # FIXME: remove client side platform_version mangling and hard coded yolo, and remapping to deprecated "el"
                      platform="el"
                      platform_version="6.0"
                    fi
                  # Apple OS X
                  elif test -f "/usr/bin/sw_vers"; then
                    platform="mac_os_x"
                    # Matching the tab-space with sed is error-prone
                    platform_version=`sw_vers | awk '/^ProductVersion:/ { print $2 }' | cut -d. -f1,2`

                    # x86_64 Apple hardware often runs 32-bit kernels (see OHAI-63)
                    x86_64=`sysctl -n hw.optional.x86_64`
                    if test $x86_64 -eq 1; then
                      machine="x86_64"
                    fi
                  elif test -f "/etc/release"; then
                    machine=`/usr/bin/uname -p`
                    if grep -q SmartOS /etc/release; then
                      platform="smartos"
                      platform_version=`grep ^Image /etc/product | awk '{ print $3 }'`
                    else
                      platform="solaris2"
                      platform_version=`/usr/bin/uname -r`
                    fi
                  elif test -f "/etc/SuSE-release"; then
                    if grep -q 'Enterprise' /etc/SuSE-release;
                    then
                        platform="sles"
                        platform_version=`awk '/^VERSION/ {V = $3}; /^PATCHLEVEL/ {P = $3}; END {print V "." P}' /etc/SuSE-release`
                    else
                        platform="suse"
                        platform_version=`awk '/^VERSION =/ { print $3 }' /etc/SuSE-release`
                    fi
                  elif test "x$os" = "xFreeBSD"; then
                    platform="freebsd"
                    platform_version=`uname -r | sed 's/-.*//'`
                  elif test "x$os" = "xAIX"; then
                    platform="aix"
                    platform_version="`uname -v`.`uname -r`"
                    machine="powerpc"
                  elif test -f "/etc/os-release"; then
                    . /etc/os-release
                    if test "x$CISCO_RELEASE_INFO" != "x"; then
                      . $CISCO_RELEASE_INFO
                    fi

                    platform=$ID
                    platform_version=$VERSION
                  fi

                  if test "x$platform" = "x"; then
                    echo "Unable to determine platform version!"
                    report_bug
                    exit 1
                  fi

                  #
                  # NOTE: platform manging in the install.sh is DEPRECATED
                  #
                  # - install.sh should be true to ohai and should not remap
                  #   platform or platform versions.
                  #
                  # - remapping platform and mangling platform version numbers is
                  #   now the complete responsibility of the server-side endpoints
                  #

                  major_version=`echo $platform_version | cut -d. -f1`
                  case $platform in
                    # FIXME: should remove this case statement completely
                    "el")
                      # FIXME:  "el" is deprecated, should use "redhat"
                      platform_version=$major_version
                      ;;
                    "debian")
                      if test "x$major_version" = "x5"; then
                        # This is here for potential back-compat.
                        # We do not have 5 in versions we publish for anymore but we
                        # might have it for earlier versions.
                        platform_version="6"
                      else
                        platform_version=$major_version
                      fi
                      ;;
                    "freebsd")
                      platform_version=$major_version
                      ;;
                    "sles")
                      platform_version=$major_version
                      ;;
                    "suse")
                      platform_version=$major_version
                      ;;
                  esac

                  if test "x$platform_version" = "x"; then
                    echo "Unable to determine platform version!"
                    report_bug
                    exit 1
                  fi

                  if test "x$platform" = "xsolaris2"; then
                    # hack up the path on Solaris to find wget, pkgadd
                    PATH=/usr/sfw/bin:/usr/sbin:$PATH
                    export PATH
                  fi

                  echo "$platform $platform_version $machine"

                  ############
                  # end of platform_detection.sh
                  ############


                  # artifactory_urls.sh
                  ############
                  # This section sets up the information for a build to be installed from artifactory
                  #  then uses $platform, $platform_version and $machine to select the correct
                  #  version.
                  #
                  # Inputs:
                  # $platform:
                  # $platform_version:
                  # $machine:
                  #
                  # Outputs:
                  # $download_url:
                  # $sha256:
                  ############


                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012/chef-client-12.11.0+20160518230930-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/nexus/7/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/nexus/7/chef-12.11.0+20160518230930-1.nexus7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 b5f5b8500ca3d09165f049680012dfe2a8498b8d68536dc6036e2691d2a21816" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012r2/chef-client-12.11.0+20160518230930-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/sparc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.10/chef-12.11.0+20160518230930-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 3215e28eb64e946360fa63e799547c989ccb368598f401e63e5bb2a873833438" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/12.04/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/12.04/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.10/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.10/chef-12.11.0+20160518230930-1.dmg" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/8/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/8/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/6/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/6/chef-12.11.0+20160518230930-1.el6.i386.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 dffb2a842ca7b5665ca6456b3ca9fc5b3ca31ba40c1a1d177da855cfe6045e62" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/amd64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/10/chef-12.11.0+20160518230930_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 9e14dbacbc3934c04da1c58f8da352057cc535075ac136580bcaffa12b998f37" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/8/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/8/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/aix/7.1/powerpc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/aix/7.1/chef-12.11.0+20160518230930-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 0f82e6aad81d75132c859a06d992097101c4c44c6ad2d8b9d296134660d2711a" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.9/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.9/chef-12.11.0+20160518230930-1.dmg" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/6/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/6/chef-12.11.0+20160518230930-1.el6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 3264230c76a0c1f210967dc8707ffc042da86e2716103d5e0a6dc06174023631" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/aix/6.1/powerpc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/aix/6.1/chef-12.11.0+20160518230930-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 0f82e6aad81d75132c859a06d992097101c4c44c6ad2d8b9d296134660d2711a" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/5/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/5/chef-12.11.0+20160518230930-1.el5.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 cd850af4b3674fd667afc7e0e8f3dae0c7938122ccc5251af21fda28a603051a" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/14.04/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/9/chef-12.11.0+20160518230930_1.i386.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 1ddac9d2d08a1799c098160a82fb3a46d9c055553b1290ef19ba29638805d4fb" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.11/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.11/chef-12.11.0+20160518230930-1.dmg" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/14.04/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.10/chef-12.11.0+20160518230930-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 4b3d49026bd0ba69af907b5e6065c2ca3955cc4bf9b73d4874541533b5781ec2" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/5/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/5/chef-12.11.0+20160518230930-1.el5.i386.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 37e17f1b0dd9a121bad9de09d84b1b210fb2d1704a73baf0d05a4687d8f67df6" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.11/chef-12.11.0+20160518230930-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 4b3d49026bd0ba69af907b5e6065c2ca3955cc4bf9b73d4874541533b5781ec2" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ios_xr/6/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ios_xr/6/chef-12.11.0+20160518230930-1.ios_xr6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 b9b278a20c4fe7dfa2f3ce035386b2c45811dba5e754e86ebf26326cc5574a6d" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/6/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/6/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/7/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/7/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/amd64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/9/chef-12.11.0+20160518230930_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 021610fbb0aa0511d9a7d45453616a0d89acdb365801badfa8780722f534ed7a" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/7/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/7/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012r2/chef-client-12.11.0+20160518230930-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/10.04/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/10.04/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/7/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/7/chef-12.11.0+20160518230930-1.el7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 380b052db91eae0364cb4c57e6344aef1d1a42b7689e95058e84c0196cdc4bff" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/10/chef-12.11.0+20160518230930_1.i386.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 6f058632798033dff5519f31dca8a45ad881635ab4b0f88bac0445b863843566" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/10.04/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/10.04/chef_12.11.0+20160518230930-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/sparc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.11/chef-12.11.0+20160518230930-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 3215e28eb64e946360fa63e799547c989ccb368598f401e63e5bb2a873833438" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012/chef-client-12.11.0+20160518230930-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2008r2/chef-client-12.11.0+20160518230930-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2008r2/chef-client-12.11.0+20160518230930-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/6/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/6/chef_12.11.0+20160518230930-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" >> "$artifact_info_dir/artifact_info"


                  artifact_info_for_platform="$tmp_dir/artifact_info/$platform/$platform_version/$machine/artifact_info"

                  download_url=`awk '$1 == "url" { print $2 }' "$artifact_info_for_platform"`
                  sha256=`awk '$1 == "sha256" { print $2 }' "$artifact_info_for_platform"`


                  # fetch_package.sh
                  ############
                  # This section fetchs a package from $download_url and verifies its metadata.
                  #
                  # Inputs:
                  # $download_url:
                  # $tmp_dir:
                  # Optional Inputs:
                  # $cmdline_filename: Name of the package downloaded on local disk.
                  # $cmdline_dl_dir: Name of the directory downloaded package will be saved to on local disk.
                  #
                  # Outputs:
                  # $download_filename: Name of the downloaded file on local disk.
                  # $filetype: Type of the file downloaded.
                  ############

                  filename=`echo $download_url | sed -e 's/^.*\///'`
                  filetype=`echo $filename | sed -e 's/^.*\.//'`

                  # use either $tmp_dir, the provided directory (-d) or the provided filename (-f)
                  if test "x$cmdline_filename" != "x"; then
                    download_filename="$cmdline_filename"
                  elif test "x$cmdline_dl_dir" != "x"; then
                    download_filename="$cmdline_dl_dir/$filename"
                  else
                    download_filename="$tmp_dir/$filename"
                  fi

                  # ensure the parent directory where to download the installer always exists
                  download_dir=`dirname $download_filename`
                  (umask 077 && mkdir -p $download_dir) || exit 1

                  # check if we have that file locally available and if so verify the checksum
                  cached_file_available="false"
                  if test -f $download_filename; then
                    echo "$download_filename already exists, verifiying checksum..."
                    if do_checksum "$download_filename" "$sha256"; then
                      echo "checksum compare succeeded, using existing file!"
                      cached_file_available="true"
                    else
                      echo "checksum mismatch, downloading latest version of the file"
                    fi
                  fi

                  # download if no local version of the file available
                  if test "x$cached_file_available" != "xtrue"; then
                    do_download "$download_url"  "$download_filename"
                    do_checksum "$download_filename" "$sha256" || checksum_mismatch
                  fi

                  ############
                  # end of fetch_package.sh
                  ############


                  # install_package.sh
                  ############
                  # Installs a package and removed the temp directory.
                  #
                  # Inputs:
                  # $download_filename: Name of the file to be installed.
                  # $filetype: Type of the file to be installed.
                  # $version: The version requested. Used only for warning user if not set.
                  ############

                  if test "x$version" = "x"; then
                    echo
                    echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
                    echo
                    echo "You are installing an omnibus package without a version pin.  If you are installing"
                    echo "on production servers via an automated process this is DANGEROUS and you will"
                    echo "be upgraded without warning on new releases, even to new major releases."
                    echo "Letting the version float is only appropriate in desktop, test, development or"
                    echo "CI/CD environments."
                    echo
                    echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
                    echo
                  fi

                  install_file $filetype "$download_filename"

                  if test "x$tmp_dir" != "x"; then
                    rm -r "$tmp_dir"
                  fi

                  ############
                  # end of install_package.sh
                  ############

                  EOL
                  chmod +x /tmp/chef-installer.sh
                  sudo -E /tmp/chef-installer.sh)
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         /bin/bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         el 6 x86_64
                         downloading http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/6/chef-12.11.0+20160518230930-1.el6.x86_64.rpm
                           to file /tmp/install.sh.959/chef-12.11.0+20160518230930-1.el6.x86_64.rpm
                         trying curl...
                         Waited 95/300s for instance <i-adc2156b> to become ready.
                         Comparing checksum with sha256sum...
                         Waited 95/300s for instance <i-afc21569> to become ready.
                         Installing chef 12.11.0+20160518230930
                         installing with rpm...
                         warning: /tmp/install.sh.959/chef-12.11.0+20160518230930-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
                         Preparing...                                                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                            1:chef                                                               (  1%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (  3%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (  6%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (  8%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        ( 10%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       ( 13%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      ( 15%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     ( 17%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    ( 19%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   ( 22%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  ( 24%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 ( 26%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                ( 28%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               ( 31%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              ( 33%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             ( 35%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            ( 38%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           ( 40%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          ( 42%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         ( 44%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        ( 47%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       ( 49%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      ( 51%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     ( 53%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    ( 56%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   ( 58%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  ( 60%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 ( 63%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                ( 65%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               ( 67%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              ( 69%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             ( 72%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            ( 74%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           ( 76%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          ( 78%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         ( 81%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        ( 83%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       ( 85%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      ( 88%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     ( 90%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    ( 92%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   ( 94%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  ( 97%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### ( 99%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                         /bin/sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         Thank you for installing Chef!
                  D      [SSH] root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '

                  sudo_rm="sudo -E rm"
                  dirs="/tmp/kitchen/clients /tmp/kitchen/cookbooks /tmp/kitchen/data /tmp/kitchen/data_bags /tmp/kitchen/encrypted_data_bag_secret /tmp/kitchen/environments /tmp/kitchen/roles"
                  root_path="/tmp/kitchen"

                  $sudo_rm -rf $dirs
                  mkdir -p $root_path
                  ')
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         Transferring files to <fips-unit-functional-centos-6>
                  D      Uploaded /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160518-8113-1hc2zct/dna.json (65 bytes)
                  D      Uploaded /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160518-8113-1hc2zct/client.rb (667 bytes)
                  D      Uploaded /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160518-8113-1hc2zct/validation.pem (1679 bytes)
                  D      Uploaded /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160518-8113-1hc2zct/cookbooks/fips/metadata.rb (12 bytes)
                  D      Transfer complete
                  D      [SSH] root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '

                  sudo -E /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json --chef-zero-port 8889
                  ')
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         Waited 100/300s for instance <i-adc2156b> to become ready.
                         Waited 100/300s for instance <i-afc21569> to become ready.
                            1:chef                                                               (  1%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (  3%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (  6%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (  8%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        ( 10%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       ( 13%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      ( 15%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     ( 17%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    ( 19%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   ( 22%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  ( 24%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 ( 26%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                ( 28%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               ( 31%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              ( 33%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             ( 35%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            ( 38%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           ( 40%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          ( 42%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         ( 44%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        ( 47%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       ( 49%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      ( 51%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     ( 53%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    ( 56%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   ( 58%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  ( 60%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 ( 63%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                ( 65%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               ( 67%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              ( 69%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             ( 72%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            ( 74%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           ( 76%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          ( 78%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         ( 81%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        ( 83%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       ( 85%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      ( 88%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     ( 90%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    ( 92%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   ( 94%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  ( 97%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### ( 99%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                         Starting Chef Client, version 12.11.0
                         /bin/sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         Thank you for installing Chef!
                  D      [SSH] root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '

                  sudo_rm="sudo -E rm"
                  dirs="/tmp/kitchen/clients /tmp/kitchen/cookbooks /tmp/kitchen/data /tmp/kitchen/data_bags /tmp/kitchen/encrypted_data_bag_secret /tmp/kitchen/environments /tmp/kitchen/roles"
                  root_path="/tmp/kitchen"

                  $sudo_rm -rf $dirs
                  mkdir -p $root_path
                  ')
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         Transferring files to <fips-integration-centos-6>
                  D      Uploaded /tmp/cheftest/fips-integration-centos-6-sandbox-20160518-8113-b9a0d2/dna.json (65 bytes)
                  D      Uploaded /tmp/cheftest/fips-integration-centos-6-sandbox-20160518-8113-b9a0d2/client.rb (663 bytes)
                  D      Uploaded /tmp/cheftest/fips-integration-centos-6-sandbox-20160518-8113-b9a0d2/validation.pem (1679 bytes)
                  D      Uploaded /tmp/cheftest/fips-integration-centos-6-sandbox-20160518-8113-b9a0d2/cookbooks/fips/metadata.rb (12 bytes)
                  D      Transfer complete
                  D      [SSH] root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '

                  sudo -E /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json --chef-zero-port 8889
                  ')
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         Starting Chef Client, version 12.11.0
                         Creating a new client identity for fips-unit-functional-centos-6 using the validator key.
                         resolving cookbooks for run list: []
                         Synchronizing Cookbooks:
                         Installing Cookbook Gems:
                         Compiling Cookbooks...
                         [2016-05-18T23:51:07+00:00] WARN: Node fips-unit-functional-centos-6 has an empty run list.
                         Converging 0 resources
                         Starting audit phase

                         Finished in 0.0003 seconds (files took 0.38651 seconds to load)
                         0 examples, 0 failures
                         Auditing complete

                         Running handlers:
                         Running handlers complete
                         Chef Client finished, 0/0 resources updated in 03 seconds
                         [2016-05-18T23:51:07+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json
                  D      Cleaning up local sandbox in /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160518-8113-1hc2zct
                         Finished converging <fips-unit-functional-centos-6> (0m13.34s).
                  D      [SSH] shutting previous connection root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] closing connection to root@10.194.11.238<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                         Waited 105/300s for instance <i-adc2156b> to become ready.
                         Creating a new client identity for fips-integration-centos-6 using the validator key.
                         Waited 105/300s for instance <i-afc21569> to become ready.
                         resolving cookbooks for run list: []
                         Synchronizing Cookbooks:
                         Installing Cookbook Gems:
                         Compiling Cookbooks...
                         [2016-05-18T23:51:09+00:00] WARN: Node fips-integration-centos-6 has an empty run list.
                         Converging 0 resources
                         Starting audit phase

                         Finished in 0.0003 seconds (files took 0.37392 seconds to load)
                         0 examples, 0 failures
                         Auditing complete

                         Running handlers:
                         Running handlers complete
                         Chef Client finished, 0/0 resources updated in 03 seconds
                         [2016-05-18T23:51:09+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json
                  D      Cleaning up local sandbox in /tmp/cheftest/fips-integration-centos-6-sandbox-20160518-8113-b9a0d2
                         Finished converging <fips-integration-centos-6> (0m12.96s).
                  D      [SSH] shutting previous connection root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] closing connection to root@10.194.9.122<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>true, :compression_level=>6, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                         Waited 110/300s for instance <i-adc2156b> to become ready.
                         Waited 110/300s for instance <i-afc21569> to become ready.
                         Waited 115/300s for instance <i-adc2156b> to become ready.
                         Waited 115/300s for instance <i-afc21569> to become ready.
                         Waited 120/300s for instance <i-afc21569> to become ready.
                         Waited 120/300s for instance <i-adc2156b> to become ready.
                  D      Console output: ---
                  2016/05/18 23:51:11Z: EC2ConfigMonitorState: 0
                  2016/05/18 23:51:11Z: Windows sysprep configuration complete.
                  2016/05/18 23:51:13Z: AMI Origin Version: 2016.05.11
                  2016/05/18 23:51:13Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
                  2016/05/18 23:51:13Z: OS: Microsoft Windows NT 6.3.9600
                  2016/05/18 23:51:13Z: OsVersion: 6.3
                  2016/05/18 23:51:13Z: OsProductName: Windows Server 2012 R2 Standard
                  2016/05/18 23:51:13Z: OsBuildLabEx: 9600.18289.amd64fre.winblue_ltsb.160328-1315
                  2016/05/18 23:51:13Z: Language: en-US
                  2016/05/18 23:51:13Z: TimeZone: Coordinated Universal Time
                  2016/05/18 23:51:13Z: Offset: UTC 00:00:00
                  2016/05/18 23:51:13Z: EC2 Agent: Ec2Config service v3.16.930
                  2016/05/18 23:51:15Z: Message: Waiting for meta-data accessibility...
                  2016/05/18 23:51:15Z: Message: Meta-data is now available.
                  2016/05/18 23:51:16Z: AMI-ID: ami-8db945ed
                  2016/05/18 23:51:16Z: Instance-ID: i-afc21569
                  2016/05/18 23:51:17Z: Driver: AWS PV Network Device v7.3.2.0
                  2016/05/18 23:51:17Z: Driver: AWS PV Storage Host Adapter v7.3.2.0
                  2016/05/18 23:51:17Z: Ec2SetPassword: Enabled
                  2016/05/18 23:51:17Z: RDPCERTIFICATE-SUBJECTNAME: WIN-APD6GI9GO94
                  2016/05/18 23:51:17Z: RDPCERTIFICATE-THUMBPRINT: 759AEB6C635A36E6AE177073297652E5F6778F64
                  2016/05/18 23:51:20Z: Username: Administrator
                  2016/05/18 23:51:20Z: Password: <Password>
                  m5L6wO01Ypsuk0lK784jrtHo6sFotcHpairh2Y/anoPaSia4xPYNpEbu/VSozgTSu7OfuzX2Dam3g/bA1cad0c1witihTG83HOaXFn7h8/YH1rx8nYvzZG/j/my571G9sEcaE7m7sYbElAix3KUbkSYVuY6hHpwP9CCixxD4fisp9r1cHIUnW2rUtdh9LHocYUCtB9WWkMdnuFqyfAfCQJ8nViKxih5ERKTL2BGBWsvY6/cFUSU9SYsYwyXSlLFcW2j3sqgc+/7ei2u5LpM1ga9QSYLe5xgB+y3DtmpAegtyHeSlp26JdQgYTFfoIO/4ATRn89Fb/1mAQjQI96yugw==
                  </Password>
                  2016/05/18 23:51:20Z: Message: Windows is Ready to use

                         Waited 0/300s for instance <i-afc21569> to fetch windows admin password.
                         Retrieved Windows password for instance <i-afc21569>.
                         EC2 instance <i-afc21569> ready.
                  D      [WinRM] opening remote shell on http://10.194.8.169:5985/wsman
                         Waited 125/300s for instance <i-adc2156b> to become ready.
                         Waited 130/300s for instance <i-adc2156b> to become ready.
                         Waited 135/300s for instance <i-adc2156b> to become ready.
                  D      Console output: ---
                  2016/05/18 23:51:27Z: EC2ConfigMonitorState: 0
                  2016/05/18 23:51:27Z: Windows sysprep configuration complete.
                  2016/05/18 23:51:28Z: AMI Origin Version: 2016.05.11
                  2016/05/18 23:51:28Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
                  2016/05/18 23:51:28Z: OS: Microsoft Windows NT 6.3.9600
                  2016/05/18 23:51:28Z: OsVersion: 6.3
                  2016/05/18 23:51:28Z: OsProductName: Windows Server 2012 R2 Standard
                  2016/05/18 23:51:28Z: OsBuildLabEx: 9600.18289.amd64fre.winblue_ltsb.160328-1315
                  2016/05/18 23:51:28Z: Language: en-US
                  2016/05/18 23:51:28Z: TimeZone: Coordinated Universal Time
                  2016/05/18 23:51:28Z: Offset: UTC 00:00:00
                  2016/05/18 23:51:28Z: EC2 Agent: Ec2Config service v3.16.930
                  2016/05/18 23:51:31Z: Message: Waiting for meta-data accessibility...
                  2016/05/18 23:51:31Z: Message: Meta-data is now available.
                  2016/05/18 23:51:31Z: AMI-ID: ami-8db945ed
                  2016/05/18 23:51:31Z: Instance-ID: i-adc2156b
                  2016/05/18 23:51:33Z: Driver: AWS PV Network Device v7.3.2.0
                  2016/05/18 23:51:33Z: Driver: AWS PV Storage Host Adapter v7.3.2.0
                  2016/05/18 23:51:33Z: Ec2SetPassword: Enabled
                  2016/05/18 23:51:33Z: RDPCERTIFICATE-SUBJECTNAME: WIN-N75V05Q5I7S
                  2016/05/18 23:51:33Z: RDPCERTIFICATE-THUMBPRINT: CA28A628A374B4589653816F6B341DDE64520F92
                  2016/05/18 23:51:36Z: Username: Administrator
                  2016/05/18 23:51:36Z: Password: <Password>
                  AM4CJBNWDGKOAiBtX9DYiO5nz2+LCfaqIYrnfCjhbByGB/xOUqamat05tYR+n+DuHc0sotHVqN9r3G1o7VwKPM2UI9/3uSG7z+GSOoIxomWSraMchs6mN2Cun1IhzuI93vciyvc6D2h/HX4ae1WWrvxhw82a6AgwwURDXJTGwO6oevV9Jx1HlFT5RDpt2mLOC+KVJTm3p/UmuGVMNBF86WEX14FRDO1BdtoXdKOCtPbCrZ0JXyoHqjKMh/6Qt9luV15hbycEyvYqFZqmvQgK1zcUzVbxLDotb1vS7F6/o0zK7+ToGBBy0qtKsGbdkbzaK5NAH4B6vHDpKQJZzWXNUg==
                  </Password>
                  2016/05/18 23:51:38Z: Message: Windows is Ready to use

                         Waited 0/300s for instance <i-adc2156b> to fetch windows admin password.
                         Retrieved Windows password for instance <i-adc2156b>.
                         EC2 instance <i-adc2156b> ready.
                  D      [WinRM] opening remote shell on http://10.194.9.27:5985/wsman
                  D      [WinRM] remote shell E3AFAE38-5BB2-4AE5-91C0-7D07B9309E6D is open on http://10.194.8.169:5985/wsman
                  D      [WinRM] negotiate::http://10.194.8.169:5985/wsman<{:user=>"administrator", :pass=>"DU@xa8*vxN", :elevated_username=>"administrator", :elevated_password=>"DU@xa8*vxN", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
                  ')
                         [WinRM] Established

                  D      [WinRM] reusing existing connection negotiate::http://10.194.8.169:5985/wsman<{:user=>"administrator", :pass=>"DU@xa8*vxN", :elevated_username=>"administrator", :elevated_password=>"DU@xa8*vxN", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                  D      [WinRM] negotiate::http://10.194.8.169:5985/wsman<{:user=>"administrator", :pass=>"DU@xa8*vxN", :elevated_username=>"administrator", :elevated_password=>"DU@xa8*vxN", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)


                             Directory: C:\chef\ohai\hints


                         Mode                LastWriteTime     Length Name
                         ----                -------------     ------ ----
                         -a---         5/18/2016  11:51 PM          0 ec2.json


                  D      ec2:create '10.194.8.169'
                         Finished creating <fips-unit-functional-windows-2012r2> (2m40.99s).
                  -----> Converging <fips-unit-functional-windows-2012r2>...
                         Preparing files for transfer
                  D      Creating local sandbox in /tmp/cheftest/fips-unit-functional-windows-2012r2-sandbox-20160518-8113-10yidzl
                         Preparing dna.json
                  D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                         Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                         Removing non-cookbook files before transfer
                         Preparing validation.pem
                  D      Using a dummy validation.pem
                         Preparing client.rb
                  D      Creating client.rb from {:node_name=>"fips-unit-functional-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                  D      [WinRM] reusing existing connection negotiate::http://10.194.8.169:5985/wsman<{:user=>"administrator", :pass=>"DU@xa8*vxN", :elevated_username=>"administrator", :elevated_password=>"DU@xa8*vxN", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                  D      [WinRM] negotiate::http://10.194.8.169:5985/wsman<{:user=>"administrator", :pass=>"DU@xa8*vxN", :elevated_username=>"administrator", :elevated_password=>"DU@xa8*vxN", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
                  function Get-PlatformVersion {
                    switch -regex ((get-wmiobject win32_operatingsystem).version) {
                      '10\.0\.\d+' {$platform_version = '2012r2'}
                      '6\.3\.\d+'  {$platform_version = '2012r2'}
                      '6\.2\.\d+'  {$platform_version = '2012'}
                      '6\.1\.\d+'  {$platform_version = '2008r2'}
                      '6\.0\.\d+'  {$platform_version = '2008'}
                    }
                    return $platform_version
                  }

                  function Get-PlatformArchitecture {
                    if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                      $architecture = 'x86_64'
                    } else {
                      $architecture = 'i386'
                    }
                    return $architecture
                  }

                  function New-Uri {
                    param ($baseuri, $newuri)

                    new-object System.Uri $baseuri, $newuri
                  }

                  function Get-WebContent {
                    param ($uri, $filepath)
                    $proxy = New-Object -TypeName System.Net.WebProxy
                    $wc = new-object System.Net.WebClient
                    $proxy.Address = $env:http_proxy
                    $wc.Proxy = $proxy

                    try {
                      if ([string]::IsNullOrEmpty($filepath)) {
                        $wc.downloadstring($uri)
                      }
                      else {
                        $wc.downloadfile($uri, $filepath)
                      }
                    }
                    catch {
                      $exception = $_.Exception
                      Write-Host "There was an error: "
                      do {
                        Write-Host "`t$($exception.message)"
                        $exception = $exception.innerexception
                      } while ($exception)
                      throw "Failed to download from $uri."
                    }
                  }

                  function Test-ProjectPackage {
                    [cmdletbinding()]
                    param ($Path, $Algorithm = 'SHA256', $Hash)

                    if (-not (get-command get-filehash))   {
                      function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                      function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                      function Get-FileHash ($Path, $Algorithm) {
                        $Path = (resolve-path $path).providerpath
                        $hash = @{Algorithm = $Algorithm; Path = $Path}
                        use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                          use ($in = (gi $path).OpenRead()) {
                            $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                          }
                        }
                        new-object PSObject -Property $hash
                      }
                    }
                    Write-Verbose "Testing the $Algorithm hash for $path."
                    $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
                    Write-Verbose "`tDesired Hash - '$hash'"
                    Write-Verbose "`tActual Hash  - '$ActualHash'"
                    $Valid = $ActualHash -eq $Hash
                    if (-not $Valid) {
                      Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
                    }
                    return $Valid
                  }

                  function Get-ProjectMetadata {
                    <#
                      .SYNOPSIS
                      Get metadata for a Chef Software, Inc. project
                      .DESCRIPTION
                      Get metadata for project
                      .EXAMPLE
                      iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                      Gets the download url and SHA256 checksum for the latest stable release of Chef.
                      .EXAMPLE
                      iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                      Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
                    #>
                    [cmdletbinding()]
                    param (
                      # Base url to retrieve metadata from.
                      [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                      [string]
                      # Project to install
                      # chef - Chef Client
                      # chefdk - Chef Development Kit
                      # angrychef - AngryChef
                      # server and container are not valid windows targets
                      [validateset('chef', 'chefdk', 'angrychef')]
                      [string]
                      $project = 'chef',
                      # Version of the application to install
                      # This parameter is optional, if not supplied it will provide the latest version,
                      # and if an iteration number is not specified, it will grab the latest available iteration.
                      # Partial version numbers are also acceptable (using v=11
                      # will grab the latest 11.x client which matches the other flags).
                      [string]
                      $version,
                      # Release channel to install from
                      $channel = 'unstable',
                      # The following legacy switches are just aliases for the current channel
                      [switch]
                      $prerelease,
                      [switch]
                      $nightlies,
                      [validateset('auto', 'i386', 'x86_64')]
                      [string]
                      $architecture = 'auto'
                    )

                    # PowerShell is only on Windows ATM
                    $platform = 'windows'
                    Write-Verbose "Platform: $platform"

                    $platform_version = Get-PlatformVersion
                    Write-Verbose "Platform Version: $platform_version"

                    if ($architecture -eq 'auto') {
                      $architecture = Get-PlatformArchitecture
                    }

                    Write-Verbose "Architecture: $architecture"
                    Write-Verbose "Project: $project"


                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012/chef-client-12.11.0+20160518230930-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/nexus/7/chef-12.11.0+20160518230930-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 b5f5b8500ca3d09165f049680012dfe2a8498b8d68536dc6036e2691d2a21816" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012r2/chef-client-12.11.0+20160518230930-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.10/chef-12.11.0+20160518230930-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 3215e28eb64e946360fa63e799547c989ccb368598f401e63e5bb2a873833438" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/12.04/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/12.04/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.10/chef-12.11.0+20160518230930-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/8/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/6/chef-12.11.0+20160518230930-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 dffb2a842ca7b5665ca6456b3ca9fc5b3ca31ba40c1a1d177da855cfe6045e62" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/10/chef-12.11.0+20160518230930_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 9e14dbacbc3934c04da1c58f8da352057cc535075ac136580bcaffa12b998f37" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/8/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/aix/7.1/chef-12.11.0+20160518230930-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 0f82e6aad81d75132c859a06d992097101c4c44c6ad2d8b9d296134660d2711a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.9/chef-12.11.0+20160518230930-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/6/chef-12.11.0+20160518230930-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 3264230c76a0c1f210967dc8707ffc042da86e2716103d5e0a6dc06174023631" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/aix/6.1/chef-12.11.0+20160518230930-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 0f82e6aad81d75132c859a06d992097101c4c44c6ad2d8b9d296134660d2711a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/5/chef-12.11.0+20160518230930-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 cd850af4b3674fd667afc7e0e8f3dae0c7938122ccc5251af21fda28a603051a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/14.04/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/9/chef-12.11.0+20160518230930_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 1ddac9d2d08a1799c098160a82fb3a46d9c055553b1290ef19ba29638805d4fb" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.11/chef-12.11.0+20160518230930-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/14.04/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.10/chef-12.11.0+20160518230930-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4b3d49026bd0ba69af907b5e6065c2ca3955cc4bf9b73d4874541533b5781ec2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/5/chef-12.11.0+20160518230930-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 37e17f1b0dd9a121bad9de09d84b1b210fb2d1704a73baf0d05a4687d8f67df6" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.11/chef-12.11.0+20160518230930-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4b3d49026bd0ba69af907b5e6065c2ca3955cc4bf9b73d4874541533b5781ec2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ios_xr/6/chef-12.11.0+20160518230930-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 b9b278a20c4fe7dfa2f3ce035386b2c45811dba5e754e86ebf26326cc5574a6d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/6/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/7/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/9/chef-12.11.0+20160518230930_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 021610fbb0aa0511d9a7d45453616a0d89acdb365801badfa8780722f534ed7a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/7/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012r2/chef-client-12.11.0+20160518230930-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/10.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/10.04/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/7/chef-12.11.0+20160518230930-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 380b052db91eae0364cb4c57e6344aef1d1a42b7689e95058e84c0196cdc4bff" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/10/chef-12.11.0+20160518230930_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 6f058632798033dff5519f31dca8a45ad881635ab4b0f88bac0445b863843566" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/10.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/10.04/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.11/chef-12.11.0+20160518230930-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 3215e28eb64e946360fa63e799547c989ccb368598f401e63e5bb2a873833438" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012/chef-client-12.11.0+20160518230930-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2008r2/chef-client-12.11.0+20160518230930-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2008r2/chef-client-12.11.0+20160518230930-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/6/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" | out-file "$artifact_info_dir/artifact_info" -Append


                    $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

                    $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                      foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

                    Write-Verbose "Project details: "
                    foreach ($key in $package_metadata.keys) {
                      Write-Verbose "`t$key = $($package_metadata[$key])"
                    }
                    $package_metadata
                  }

                  function Install-Project {
                    <#
                      .SYNOPSIS
                      Install a Chef Software, Inc. product
                      .DESCRIPTION
                      Install a Chef Software, Inc. product
                      .EXAMPLE
                      iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                      Installs the latest stable version of Chef.
                      .EXAMPLE
                      iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                      Installs the latest integration build of the Chef Development Kit
                    #>
                    [cmdletbinding(SupportsShouldProcess=$true)]
                    param (
                      # Project to install
                      # chef - Chef Client
                      # chefdk - Chef Development Kit
                      # angrychef - AngryChef
                      # server and container are not valid windows targets
                      [validateset('chef', 'chefdk', 'angrychef')]
                      [string]
                      $project = 'chef',
                      # Release channel to install from
                      [validateset('current', 'stable', 'unstable')]
                      [string]
                      $channel = 'stable',
                      # Version of the application to install
                      # This parameter is optional, if not supplied it will provide the latest version,
                      # and if an iteration number is not specified, it will grab the latest available iteration.
                      # Partial version numbers are also acceptable (using v=11
                      # will grab the latest 11.x client which matches the other flags).
                      [string]
                      $version,
                      # Full path for the downloaded installer.
                      [string]
                      $filename,
                      # Full path to the location to download the installer
                      [string]
                      $download_directory = $env:temp,
                      # The following legacy switches are just aliases for the current channel
                      [switch]
                      $prerelease,
                      [switch]
                      $nightlies,
                      [validateset('auto', 'i386', 'x86_64')]
                      [string]
                      $architecture = 'auto'
                    )

                    $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

                    if (-not [string]::IsNullOrEmpty($filename)) {
                      $download_directory = split-path $filename
                      $filename = split-path $filename -leaf
                      if ([string]::IsNullOrEmpty($download_directory)) {
                        $download_directory = $pwd
                      }
                    }
                    else {
                      $filename = ($package_metadata.url -split '/')[-1]
                    }
                    Write-Verbose "Download directory: $download_directory"
                    Write-Verbose "Filename: $filename"

                    if (-not (test-path $download_directory)) {
                      mkdir $download_directory
                    }
                    $download_directory = (resolve-path $download_directory).providerpath
                    $download_destination = join-path $download_directory $filename

                    if ((test-path $download_destination) -and
                      (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                      Write-Verbose "Found existing valid installer at $download_destination."
                    }
                    else {
                      if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                        Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                        Get-WebContent $package_metadata.url -filepath $download_destination
                      }
                    }

                    if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                      if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                        Write-Host "Installing $project from $download_destination"
                        $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                        $p.WaitForExit()
                        if ($p.ExitCode -ne 0) {
                          throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                        }
                      }
                      else {
                        throw "Failed to validate the downloaded installer for $project."
                      }
                    }
                  }
                  set-alias install -value Install-Project
                  export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

                  }

                  install -project chef -version 12.11.0+20160518230930 -channel unstable
                  )
                  D      creating hash for file $env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
                  D      Running check_files.ps1
                  D      @{
                  D        "931ed883ed3b0f2aea5414fe18db2c15" = @{
                  D          "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                  D          "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                  D          "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
                  D        }
                  D      }
                  D      [WinRM] opening new shell since the current one failed
                  D      [WinRM] opening remote shell on http://10.194.8.169:5985/wsman
                  D      [WinRM] remote shell 8A8E4DDE-4B4B-4AA7-B1F6-5892F7556812 is open on http://10.194.8.169:5985/wsman
                  D      Cleaning up local sandbox in /tmp/cheftest/fips-unit-functional-windows-2012r2-sandbox-20160518-8113-10yidzl
                  D      [WinRM] remote shell BFFC8747-64AD-43D3-B298-77BC334A5B40 is open on http://10.194.9.27:5985/wsman
                  D      [WinRM] negotiate::http://10.194.9.27:5985/wsman<{:user=>"administrator", :pass=>"(Q%;7!Jpp8", :elevated_username=>"administrator", :elevated_password=>"(Q%;7!Jpp8", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
                  ')
                         [WinRM] Established

                  D      [WinRM] reusing existing connection negotiate::http://10.194.9.27:5985/wsman<{:user=>"administrator", :pass=>"(Q%;7!Jpp8", :elevated_username=>"administrator", :elevated_password=>"(Q%;7!Jpp8", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                  D      [WinRM] negotiate::http://10.194.9.27:5985/wsman<{:user=>"administrator", :pass=>"(Q%;7!Jpp8", :elevated_username=>"administrator", :elevated_password=>"(Q%;7!Jpp8", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)


                             Directory: C:\chef\ohai\hints


                         Mode                LastWriteTime     Length Name
                         ----                -------------     ------ ----
                         -a---         5/18/2016  11:52 PM          0 ec2.json


                  D      ec2:create '10.194.9.27'
                         Finished creating <fips-integration-windows-2012r2> (2m55.08s).
                  -----> Converging <fips-integration-windows-2012r2>...
                         Preparing files for transfer
                  D      Creating local sandbox in /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160518-8113-1eaa2b0
                         Preparing dna.json
                  D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                         Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                         Removing non-cookbook files before transfer
                         Preparing validation.pem
                  D      Using a dummy validation.pem
                         Preparing client.rb
                  D      Creating client.rb from {:node_name=>"fips-integration-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                  D      [WinRM] reusing existing connection negotiate::http://10.194.9.27:5985/wsman<{:user=>"administrator", :pass=>"(Q%;7!Jpp8", :elevated_username=>"administrator", :elevated_password=>"(Q%;7!Jpp8", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                  D      [WinRM] negotiate::http://10.194.9.27:5985/wsman<{:user=>"administrator", :pass=>"(Q%;7!Jpp8", :elevated_username=>"administrator", :elevated_password=>"(Q%;7!Jpp8", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
                  function Get-PlatformVersion {
                    switch -regex ((get-wmiobject win32_operatingsystem).version) {
                      '10\.0\.\d+' {$platform_version = '2012r2'}
                      '6\.3\.\d+'  {$platform_version = '2012r2'}
                      '6\.2\.\d+'  {$platform_version = '2012'}
                      '6\.1\.\d+'  {$platform_version = '2008r2'}
                      '6\.0\.\d+'  {$platform_version = '2008'}
                    }
                    return $platform_version
                  }

                  function Get-PlatformArchitecture {
                    if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                      $architecture = 'x86_64'
                    } else {
                      $architecture = 'i386'
                    }
                    return $architecture
                  }

                  function New-Uri {
                    param ($baseuri, $newuri)

                    new-object System.Uri $baseuri, $newuri
                  }

                  function Get-WebContent {
                    param ($uri, $filepath)
                    $proxy = New-Object -TypeName System.Net.WebProxy
                    $wc = new-object System.Net.WebClient
                    $proxy.Address = $env:http_proxy
                    $wc.Proxy = $proxy

                    try {
                      if ([string]::IsNullOrEmpty($filepath)) {
                        $wc.downloadstring($uri)
                      }
                      else {
                        $wc.downloadfile($uri, $filepath)
                      }
                    }
                    catch {
                      $exception = $_.Exception
                      Write-Host "There was an error: "
                      do {
                        Write-Host "`t$($exception.message)"
                        $exception = $exception.innerexception
                      } while ($exception)
                      throw "Failed to download from $uri."
                    }
                  }

                  function Test-ProjectPackage {
                    [cmdletbinding()]
                    param ($Path, $Algorithm = 'SHA256', $Hash)

                    if (-not (get-command get-filehash))   {
                      function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                      function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                      function Get-FileHash ($Path, $Algorithm) {
                        $Path = (resolve-path $path).providerpath
                        $hash = @{Algorithm = $Algorithm; Path = $Path}
                        use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                          use ($in = (gi $path).OpenRead()) {
                            $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                          }
                        }
                        new-object PSObject -Property $hash
                      }
                    }
                    Write-Verbose "Testing the $Algorithm hash for $path."
                    $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
                    Write-Verbose "`tDesired Hash - '$hash'"
                    Write-Verbose "`tActual Hash  - '$ActualHash'"
                    $Valid = $ActualHash -eq $Hash
                    if (-not $Valid) {
                      Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
                    }
                    return $Valid
                  }

                  function Get-ProjectMetadata {
                    <#
                      .SYNOPSIS
                      Get metadata for a Chef Software, Inc. project
                      .DESCRIPTION
                      Get metadata for project
                      .EXAMPLE
                      iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                      Gets the download url and SHA256 checksum for the latest stable release of Chef.
                      .EXAMPLE
                      iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                      Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
                    #>
                    [cmdletbinding()]
                    param (
                      # Base url to retrieve metadata from.
                      [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                      [string]
                      # Project to install
                      # chef - Chef Client
                      # chefdk - Chef Development Kit
                      # angrychef - AngryChef
                      # server and container are not valid windows targets
                      [validateset('chef', 'chefdk', 'angrychef')]
                      [string]
                      $project = 'chef',
                      # Version of the application to install
                      # This parameter is optional, if not supplied it will provide the latest version,
                      # and if an iteration number is not specified, it will grab the latest available iteration.
                      # Partial version numbers are also acceptable (using v=11
                      # will grab the latest 11.x client which matches the other flags).
                      [string]
                      $version,
                      # Release channel to install from
                      $channel = 'unstable',
                      # The following legacy switches are just aliases for the current channel
                      [switch]
                      $prerelease,
                      [switch]
                      $nightlies,
                      [validateset('auto', 'i386', 'x86_64')]
                      [string]
                      $architecture = 'auto'
                    )

                    # PowerShell is only on Windows ATM
                    $platform = 'windows'
                    Write-Verbose "Platform: $platform"

                    $platform_version = Get-PlatformVersion
                    Write-Verbose "Platform Version: $platform_version"

                    if ($architecture -eq 'auto') {
                      $architecture = Get-PlatformArchitecture
                    }

                    Write-Verbose "Architecture: $architecture"
                    Write-Verbose "Project: $project"


                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012/chef-client-12.11.0+20160518230930-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/nexus/7/chef-12.11.0+20160518230930-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 b5f5b8500ca3d09165f049680012dfe2a8498b8d68536dc6036e2691d2a21816" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012r2/chef-client-12.11.0+20160518230930-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.10/chef-12.11.0+20160518230930-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 3215e28eb64e946360fa63e799547c989ccb368598f401e63e5bb2a873833438" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/12.04/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/12.04/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.10/chef-12.11.0+20160518230930-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/8/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/6/chef-12.11.0+20160518230930-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 dffb2a842ca7b5665ca6456b3ca9fc5b3ca31ba40c1a1d177da855cfe6045e62" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/10/chef-12.11.0+20160518230930_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 9e14dbacbc3934c04da1c58f8da352057cc535075ac136580bcaffa12b998f37" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/8/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/aix/7.1/chef-12.11.0+20160518230930-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 0f82e6aad81d75132c859a06d992097101c4c44c6ad2d8b9d296134660d2711a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.9/chef-12.11.0+20160518230930-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/6/chef-12.11.0+20160518230930-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 3264230c76a0c1f210967dc8707ffc042da86e2716103d5e0a6dc06174023631" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/aix/6.1/chef-12.11.0+20160518230930-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 0f82e6aad81d75132c859a06d992097101c4c44c6ad2d8b9d296134660d2711a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/5/chef-12.11.0+20160518230930-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 cd850af4b3674fd667afc7e0e8f3dae0c7938122ccc5251af21fda28a603051a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/14.04/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/9/chef-12.11.0+20160518230930_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 1ddac9d2d08a1799c098160a82fb3a46d9c055553b1290ef19ba29638805d4fb" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/mac_os_x/10.11/chef-12.11.0+20160518230930-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 35a2439968a7d7f92d92bcfa7e30ff89b9c1452e2ec40d833b9f92264e95d0a3" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/14.04/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.10/chef-12.11.0+20160518230930-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4b3d49026bd0ba69af907b5e6065c2ca3955cc4bf9b73d4874541533b5781ec2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/5/chef-12.11.0+20160518230930-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 37e17f1b0dd9a121bad9de09d84b1b210fb2d1704a73baf0d05a4687d8f67df6" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.11/chef-12.11.0+20160518230930-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4b3d49026bd0ba69af907b5e6065c2ca3955cc4bf9b73d4874541533b5781ec2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ios_xr/6/chef-12.11.0+20160518230930-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 b9b278a20c4fe7dfa2f3ce035386b2c45811dba5e754e86ebf26326cc5574a6d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/6/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/7/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/9/chef-12.11.0+20160518230930_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 021610fbb0aa0511d9a7d45453616a0d89acdb365801badfa8780722f534ed7a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/7/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4aaf1a9f0f3a95996c2770feebe1c52758d37da55544b72be9ec4f28f7ae12ee" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012r2/chef-client-12.11.0+20160518230930-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/10.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/10.04/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c298db7dcaef0b4cb694b1989c12a75dfcdbdd6750857f9f94a76298c0c95a99" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/el/7/chef-12.11.0+20160518230930-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 380b052db91eae0364cb4c57e6344aef1d1a42b7689e95058e84c0196cdc4bff" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/freebsd/10/chef-12.11.0+20160518230930_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 6f058632798033dff5519f31dca8a45ad881635ab4b0f88bac0445b863843566" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/10.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/ubuntu/10.04/chef_12.11.0+20160518230930-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 f97b9f398a9bcbcdf42538fc2cb775c518a54dab3133efb8c25a7f08736e0a92" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/solaris2/5.11/chef-12.11.0+20160518230930-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 3215e28eb64e946360fa63e799547c989ccb368598f401e63e5bb2a873833438" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2012/chef-client-12.11.0+20160518230930-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2008r2/chef-client-12.11.0+20160518230930-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 ad8f89ea1512bc1e78773e68032a369b0b5e23c2982f2aaa7c6395101b6157ff" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/windows/2008r2/chef-client-12.11.0+20160518230930-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 cea344ce0298216be85f4794823389c5f200386d44bd45f3fcf17ae5d112548a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.11.0+20160518230930/debian/6/chef_12.11.0+20160518230930-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 bff9af41371d7b4deb2da26c70068fdd7a859c71c4fd756824ddedff3725b985" | out-file "$artifact_info_dir/artifact_info" -Append


                    $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

                    $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                      foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

                    Write-Verbose "Project details: "
                    foreach ($key in $package_metadata.keys) {
                      Write-Verbose "`t$key = $($package_metadata[$key])"
                    }
                    $package_metadata
                  }

                  function Install-Project {
                    <#
                      .SYNOPSIS
                      Install a Chef Software, Inc. product
                      .DESCRIPTION
                      Install a Chef Software, Inc. product
                      .EXAMPLE
                      iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                      Installs the latest stable version of Chef.
                      .EXAMPLE
                      iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                      Installs the latest integration build of the Chef Development Kit
                    #>
                    [cmdletbinding(SupportsShouldProcess=$true)]
                    param (
                      # Project to install
                      # chef - Chef Client
                      # chefdk - Chef Development Kit
                      # angrychef - AngryChef
                      # server and container are not valid windows targets
                      [validateset('chef', 'chefdk', 'angrychef')]
                      [string]
                      $project = 'chef',
                      # Release channel to install from
                      [validateset('current', 'stable', 'unstable')]
                      [string]
                      $channel = 'stable',
                      # Version of the application to install
                      # This parameter is optional, if not supplied it will provide the latest version,
                      # and if an iteration number is not specified, it will grab the latest available iteration.
                      # Partial version numbers are also acceptable (using v=11
                      # will grab the latest 11.x client which matches the other flags).
                      [string]
                      $version,
                      # Full path for the downloaded installer.
                      [string]
                      $filename,
                      # Full path to the location to download the installer
                      [string]
                      $download_directory = $env:temp,
                      # The following legacy switches are just aliases for the current channel
                      [switch]
                      $prerelease,
                      [switch]
                      $nightlies,
                      [validateset('auto', 'i386', 'x86_64')]
                      [string]
                      $architecture = 'auto'
                    )

                    $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

                    if (-not [string]::IsNullOrEmpty($filename)) {
                      $download_directory = split-path $filename
                      $filename = split-path $filename -leaf
                      if ([string]::IsNullOrEmpty($download_directory)) {
                        $download_directory = $pwd
                      }
                    }
                    else {
                      $filename = ($package_metadata.url -split '/')[-1]
                    }
                    Write-Verbose "Download directory: $download_directory"
                    Write-Verbose "Filename: $filename"

                    if (-not (test-path $download_directory)) {
                      mkdir $download_directory
                    }
                    $download_directory = (resolve-path $download_directory).providerpath
                    $download_destination = join-path $download_directory $filename

                    if ((test-path $download_destination) -and
                      (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                      Write-Verbose "Found existing valid installer at $download_destination."
                    }
                    else {
                      if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                        Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                        Get-WebContent $package_metadata.url -filepath $download_destination
                      }
                    }

                    if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                      if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                        Write-Host "Installing $project from $download_destination"
                        $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                        $p.WaitForExit()
                        if ($p.ExitCode -ne 0) {
                          throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                        }
                      }
                      else {
                        throw "Failed to validate the downloaded installer for $project."
                      }
                    }
                  }
                  set-alias install -value Install-Project
                  export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

                  }

                  install -project chef -version 12.11.0+20160518230930 -channel unstable
                  )
                  D      creating hash for file $env:TEMP/fips-integration-windows-2012r2-long_script.ps1
                  D      Running check_files.ps1
                  D      @{
                  D        "931ed883ed3b0f2aea5414fe18db2c15" = @{
                  D          "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1";
                  D          "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                  D          "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                  D        }
                  D      }
                  D      [WinRM] opening new shell since the current one failed
                  D      [WinRM] opening remote shell on http://10.194.9.27:5985/wsman
                  D      [WinRM] remote shell 2C896F7D-7F93-4721-A715-BDC3490BC1A3 is open on http://10.194.9.27:5985/wsman
                  D      Cleaning up local sandbox in /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160518-8113-1eaa2b0
                  D      ------Exception-------
                  D      Class: Kitchen::ActionFailed
                  D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "931ed883ed3b0f2aea5414fe18db2c15" = @{
                      "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1";
                      "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                    }
                  }@{
                    "931ed883ed3b0f2aea5414fe18db2c15" = @{
                      "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1";
                      "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                     tion
                      + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                     vokeExpressionCommand

                  At line:54 char:5
                  +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                  +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                  :String) [], RuntimeException
                      + FullyQualifiedErrorId : There was an error invoking '@{
                    "931ed883ed3b0f2aea5414fe18db2c15" = @{
                          "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                     ;
                      "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                    }
                  }@{
                    "931ed883ed3b0f2aea5414fe18db2c15" = @{
                          "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                     ;
                      "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                          + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                     xcep
                     tion
                          + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                     s.In
                     vokeExpressionCommand


                  ]
                  D      ---Nested Exception---
                  D      Class: WinRM::FS::Core::FileTransporterFailed
                  D      Message: [WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "931ed883ed3b0f2aea5414fe18db2c15" = @{
                      "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1";
                      "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                    }
                  }@{
                    "931ed883ed3b0f2aea5414fe18db2c15" = @{
                      "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1";
                      "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                     tion
                      + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                     vokeExpressionCommand

                  At line:54 char:5
                  +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                  +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                  :String) [], RuntimeException
                      + FullyQualifiedErrorId : There was an error invoking '@{
                    "931ed883ed3b0f2aea5414fe18db2c15" = @{
                          "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                     ;
                      "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                    }
                  }@{
                    "931ed883ed3b0f2aea5414fe18db2c15" = @{
                          "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                     ;
                      "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                          + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                     xcep
                     tion
                          + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                     s.In
                     vokeExpressionCommand



                  D      ------Backtrace-------
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:394:in `parse_response'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:203:in `check_files'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:80:in `block in upload'
                  D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:78:in `upload'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/transport/winrm.rb:130:in `upload'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/transport/winrm.rb:390:in `run_from_file_command'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/transport/winrm.rb:100:in `execute'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/provisioner/base.rb:67:in `block in call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/transport/winrm.rb:522:in `reuse_connection'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/transport/winrm.rb:72:in `connection'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/provisioner/base.rb:66:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/instance.rb:373:in `block in converge_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/instance.rb:513:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/instance.rb:513:in `synchronize_or_call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/instance.rb:478:in `block in action'
                  D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/instance.rb:477:in `action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/instance.rb:369:in `converge_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/instance.rb:348:in `block in transition_to'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/instance.rb:347:in `each'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/instance.rb:347:in `transition_to'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/instance.rb:138:in `converge'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/command.rb:176:in `public_send'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.8.0/lib/kitchen/command.rb:176:in `block (2 levels) in run_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
                  D      ----------------------
                  D      [WinRM] closing remote shell BFFC8747-64AD-43D3-B298-77BC334A5B40 on http://10.194.9.27:5985/wsman
                  D      [WinRM] closing remote shell 2C896F7D-7F93-4721-A715-BDC3490BC1A3 on http://10.194.9.27:5985/wsman
                  D      [WinRM] remote shell 2C896F7D-7F93-4721-A715-BDC3490BC1A3 closed
                  D      [WinRM] closing remote shell E3AFAE38-5BB2-4AE5-91C0-7D07B9309E6D on http://10.194.8.169:5985/wsman
                  D      [WinRM] closing remote shell 8A8E4DDE-4B4B-4AA7-B1F6-5892F7556812 on http://10.194.8.169:5985/wsman
                  D      [WinRM] remote shell 8A8E4DDE-4B4B-4AA7-B1F6-5892F7556812 closed
                  STDERR: >>>>>> ------Exception-------
                  >>>>>> Class: Kitchen::ActionFailed
                  >>>>>> Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "931ed883ed3b0f2aea5414fe18db2c15" = @{
                      "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1";
                      "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                    }
                  }@{
                    "931ed883ed3b0f2aea5414fe18db2c15" = @{
                      "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1";
                      "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                     tion
                      + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                     vokeExpressionCommand

                  At line:54 char:5
                  +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                  +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                  :String) [], RuntimeException
                      + FullyQualifiedErrorId : There was an error invoking '@{
                    "931ed883ed3b0f2aea5414fe18db2c15" = @{
                          "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                     ;
                      "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                    }
                  }@{
                    "931ed883ed3b0f2aea5414fe18db2c15" = @{
                          "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                     ;
                      "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                          + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                     xcep
                     tion
                          + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                     s.In
                     vokeExpressionCommand


                  ]
                  >>>>>> ----------------------
                  >>>>>> Please see .kitchen/logs/kitchen.log for more details
                  >>>>>> Also try running `kitchen diagnose --all` for configuration
                  ---- End output of bundle exec kitchen converge  -c -l debug ----
                  Ran bundle exec kitchen converge  -c -l debug returned 20

                  Resource Declaration:
                  ---------------------
                  # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/acceptance-cookbook/recipes/provision.rb

                    1: kitchen "converge"

                  Compiled Resource:
                  ------------------
                  # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/acceptance-cookbook/recipes/provision.rb:1:in `from_file'

                  kitchen("converge") do
                    action [:run]
                    retries 0
                    retry_delay 2
                    default_guard_interpreter :default
                    declared_type :kitchen
                    cookbook_name "acceptance-cookbook"
                    recipe_name "provision"
                    command "converge"
                    kitchen_options "-c -l debug"
                    kitchen_dir "/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/fips"
                    chef_product "chef"
                  end

              Starting audit phase
            30484: |2

              Running handlers:
              [2016-05-18T23:52:14+00:00] ERROR: Running exception handlers
              Running handlers complete
              [2016-05-18T23:52:14+00:00] ERROR: Exception handlers complete
              Chef Client failed. 0 resources updated in 03 minutes 04 seconds
              [2016-05-18T23:52:14+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/chef-stacktrace.out
              [2016-05-18T23:52:14+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
              [2016-05-18T23:52:14+00:00] ERROR: Found 1 errors, they are stored in the backtrace
              [2016-05-18T23:52:15+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
              STDERR:
              ---- End output of chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/dna.json -o acceptance-cookbook::provision --no-color ----
              Ran chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/dna.json -o acceptance-cookbook::provision --no-color returned 1
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:289:in `invalid!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:276:in `error!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-47e931cec100/lib/chef-acceptance/chef_runner.rb:53:in `block in run!'
              /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:219:in `block in with_clean_env'
              /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:199:in `with_original_env'
              /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:205:in `with_clean_env'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-47e931cec100/lib/chef-acceptance/chef_runner.rb:42:in `run!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-47e931cec100/lib/chef-acceptance/application.rb:149:in `run_command'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-47e931cec100/lib/chef-acceptance/application.rb:116:in `block in run_suite'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-47e931cec100/lib/chef-acceptance/application.rb:114:in `each'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-47e931cec100/lib/chef-acceptance/application.rb:114:in `run_suite'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-47e931cec100/lib/chef-acceptance/application.rb:76:in `block (2 levels) in start_worker'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-47e931cec100/lib/chef-acceptance/application.rb:74:in `loop'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-47e931cec100/lib/chef-acceptance/application.rb:74:in `block in start_worker'
              CHEF-ACCEPTANCE::[2016-05-18 23:52:15 +0000] --force-destroy specified so attempting to run the destroy recipe
              FIPS::DESTROY::[2016-05-18 23:52:15 +0000] Initialized [/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/logs/fips/destroy.log] logger...
            38197: |
              CHEF-ACCEPTANCE::[2016-05-19 00:33:03 +0000] | top-cookbooks   | Total         | 00:49:47 | N     |
              CHEF-ACCEPTANCE::[2016-05-19 00:33:03 +0000] | Run             | Total         | 00:49:47 | Y     |
              Build step 'Invoke XShell command' marked build as failure
              Archiving artifacts
              Recording fingerprints
        steps:
          total: 51m27s
          before (setup time): 1m41s
          CHEF-ACCEPTANCE:
            total: 49m47s
            OMNITRUCK::PROVISION: 19s
            TRIVIAL::PROVISION: 5m13s
            TOP-COOKBOOKS::PROVISION: 48m13s
            OMNITRUCK::VERIFY: 19s
            WINDOWS-SERVICE::PROVISION: 4m46s
            TRIVIAL::VERIFY: 16s
            TRIVIAL::DESTROY: 20s
            WINDOWS-SERVICE::VERIFY: 1m1s
            FIPS::PROVISION: 3m9s
            WINDOWS-SERVICE::DESTROY: 12s
            BASICS::PROVISION: 1m21s
            BASICS::VERIFY: 38s
            BASICS::DESTROY: 12s
            FIPS::DESTROY: 13s
            TOP-COOKBOOKS::VERIFY: 45s
            TOP-COOKBOOKS::DESTROY: 49s
        chef_acceptance_timing:
        - omnitruck:
            provision: 10s
            verify: 14s
            destroy: 4s
            Total: 46s
          trivial:
            provision: 4m36s
            verify: 12s
            destroy: 13s
            Total: 5m50s
          windows-service:
            provision: 4m20s
            verify: 49s
            destroy: 9s
            Total: 6m
          basics:
            provision: 1m12s
            verify: 31s
            destroy: 7s
            Total: 2m10s
          fips:
            provision: 2m39s
            force-destroy: 7s
            Total: 3m20s
          top-cookbooks:
            provision: 44m35s
            verify: 32s
            destroy: 34s
            Total: 49m47s
          Run:
            Total: 49m47s
      debian-6-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=debian-6,project=chef,role=tester/9/
        duration: 9m57s
      debian-7-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=debian-7,project=chef,role=tester/9/
        duration: 10m33s
      el-5-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=el-5,project=chef,role=tester/9/
        duration: 22m33s
      el-6-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=el-6,project=chef,role=tester/9/
        duration: 29m56s
      freebsd-10-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=freebsd-10,project=chef,role=tester/9/
        duration: 8m54s
      freebsd-9-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=freebsd-9,project=chef,role=tester/9/
        duration: 9m29s
      ubuntu-10.04-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=ubuntu-10.04,project=chef,role=tester/9/
        duration: 9m
      ubuntu-12.04-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=ubuntu-12.04,project=chef,role=tester/9/
        duration: 10m20s
      ubuntu-14.04-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=ubuntu-14.04,project=chef,role=tester/9/
        duration: 10m29s
      windows-2008r2-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=windows-2008r2,project=chef,role=tester/9/
        duration: 17m12s
      solaris-10-i86pc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i86pc,platform=solaris-10,project=chef,role=tester/9/
        duration: 7m12s
      solaris-11-i86pc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i86pc,platform=solaris-11,project=chef,role=tester/9/
        duration: 8m5s
      aix-6.1-powerpc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=powerpc,platform=aix-6.1,project=chef,role=tester/9/
        duration: 21m47s
      aix-7.1-powerpc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=powerpc,platform=aix-7.1,project=chef,role=tester/9/
        duration: 20m20s
      solaris-10-sun4v:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=sun4v,platform=solaris-10,project=chef,role=tester/9/
        duration: 1h14m11s
      solaris-11-sun4v:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=sun4v,platform=solaris-11,project=chef,role=tester/9/
        duration: 1h17m12s
      debian-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=debian-6,project=chef,role=tester/9/
        duration: 19m7s
      debian-7:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=debian-7,project=chef,role=tester/9/
        duration: 13m21s
      debian-8:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=debian-8,project=chef,role=tester/9/
        duration: 14m36s
      el-5:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=el-5,project=chef,role=tester/9/
        duration: 32m18s
      el-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=el-6,project=chef,role=tester/9/
        duration: 47m57s
      el-7:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=el-7,project=chef,role=tester/9/
        duration: 12m48s
      freebsd-10:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=freebsd-10,project=chef,role=tester/9/
        duration: 14m28s
      freebsd-9:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=freebsd-9,project=chef,role=tester/9/
        duration: 14m47s
      ios_xr-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=ios_xr-6,project=chef,role=tester/9/
        duration: 7m57s
      mac_os_x-10.10:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=mac_os_x-10.10,project=chef,role=tester/9/
        duration: 10m41s
      mac_os_x-10.11:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=mac_os_x-10.11,project=chef,role=tester/9/
        duration: 7m51s
      mac_os_x-10.9:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=mac_os_x-10.9,project=chef,role=tester/9/
        duration: 10m10s
      nexus-7:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=nexus-7,project=chef,role=tester/9/
        duration: 10m18s
      ubuntu-10.04:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=ubuntu-10.04,project=chef,role=tester/9/
        duration: 15m17s
      ubuntu-12.04:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=ubuntu-12.04,project=chef,role=tester/9/
        duration: 15m36s
      ubuntu-14.04:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=ubuntu-14.04,project=chef,role=tester/9/
        duration: 13m37s
      windows-2008r2:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=windows-2008r2,project=chef,role=tester/9/
        duration: 17m21s
      windows-2012:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=windows-2012,project=chef,role=tester/9/
        duration: 17m5s
      windows-2012r2:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=windows-2012r2,project=chef,role=tester/9/
        duration: 18m27s
  chef-build:
    result: SUCCESS
    url: http://manhattan.ci.chef.co/job/chef-build/13/
    duration: 31m58s
    runs:
      debian-6-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=debian-6,project=chef,role=builder/13/
        duration: 5m46s
      el-5-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=el-5,project=chef,role=builder/13/
        duration: 6m37s
      el-6-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=el-6,project=chef,role=builder/13/
        duration: 6m54s
      freebsd-10-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=freebsd-10,project=chef,role=builder/13/
        duration: 5m45s
      freebsd-9-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=freebsd-9,project=chef,role=builder/13/
        duration: 6m18s
      ubuntu-10.04-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=ubuntu-10.04,project=chef,role=builder/13/
        duration: 5m36s
      windows-2008r2-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=windows-2008r2,project=chef,role=builder/13/
        duration: 10m18s
      solaris-10-i86pc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i86pc,platform=solaris-10,project=chef,role=builder/13/
        duration: 7m33s
      aix-6.1-powerpc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=powerpc,platform=aix-6.1,project=chef,role=builder/13/
        duration: 17m43s
      solaris-10-sun4v:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=sun4v,platform=solaris-10,project=chef,role=builder/13/
        duration: 31m31s
      debian-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=debian-6,project=chef,role=builder/13/
        duration: 7m44s
      el-5:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=el-5,project=chef,role=builder/13/
        duration: 8m52s
      el-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=el-6,project=chef,role=builder/13/
        duration: 9m19s
      el-7:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=el-7,project=chef,role=builder/13/
        duration: 6m57s
      freebsd-10:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=freebsd-10,project=chef,role=builder/13/
        duration: 8m26s
      freebsd-9:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=freebsd-9,project=chef,role=builder/13/
        duration: 9m34s
      ios_xr-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=ios_xr-6,project=chef,role=builder/13/
        duration: 4m58s
      mac_os_x-10.9:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=mac_os_x-10.9,project=chef,role=builder/13/
        duration: 4m15s
      nexus-7:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=nexus-7,project=chef,role=builder/13/
        duration: 6m1s
      ubuntu-10.04:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=ubuntu-10.04,project=chef,role=builder/13/
        duration: 7m42s
      windows-2008r2:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=windows-2008r2,project=chef,role=builder/13/
        duration: 13m5s
  chef-trigger-ad_hoc:
    result: SUCCESS
    url: http://manhattan.ci.chef.co/job/chef-trigger-ad_hoc/9/
    duration: 25s
successful_logs_analyzed: false
