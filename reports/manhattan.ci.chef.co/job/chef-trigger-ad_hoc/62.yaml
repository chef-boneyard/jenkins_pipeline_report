---
result: FAILURE
url: http://manhattan.ci.chef.co/job/chef-trigger-ad_hoc/62/
failure_category: unknown
failure_cause: 'chef_acceptance[top-cookbooks::provision]: acceptance; unknown: ubuntu-12.04:
  chef-test'
timestamp: 2016-06-30 19:38:06 UTC
duration: 1h51m14s
triggered_by: prajaktapurohit
active_duration: 1h50m59s
parameters:
  GIT_REF: praj/FLOW-370/acceptance_logging
  EXPIRE_CACHE: false
change:
  git_remote: git://github.com/chef/chef.git
  git_commit: 90443496223e526a26e4b66011e5e1c61ac2ed35
  project: chef
  version: 12.12.7+20160630193837
stages:
  chef-test:
    result: FAILURE
    failure_category: unknown
    failure_cause: 'chef_acceptance[top-cookbooks::provision]: acceptance; unknown:
      ubuntu-12.04'
    url: http://manhattan.ci.chef.co/job/chef-test/55/
    duration: 1h18m3s
    runs:
      acceptance:
        result: FAILURE
        failure_category: code
        failure_cause: chef_acceptance[top-cookbooks::provision]
        failed_in:
          chef_acceptance:
          - top-cookbooks::provision
          step: CHEF-ACCEPTANCE
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=acceptance,project=chef,role=tester/55/
        duration: 34m15s
        logs:
          consoleText:
            18599: |2

              TOP-COOKBOOKS::PROVISION::[2016-06-30 20:44:40 +0000]
                      ================================================================================
                      Error executing action `run` on resource 'execute[bundle exec kitchen converge  -c -l debug]'
                      ================================================================================

                      Mixlib::ShellOut::ShellCommandFailed
                      ------------------------------------
                      Expected process to exit with [0], but received ''
                      ---- Begin output of bundle exec kitchen converge  -c -l debug ----
                      STDOUT: -----> Starting Kitchen (v1.10.2)
                      D      Berksfile found at /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/powershell/Berksfile, loading Berkshelf
                      D      Berkshelf 4.3.5 library loaded
                      D      winrm requested, loading winrm gem (["~> 1.6"])
                      D      winrm is loaded.
                      D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
                      D      winrm-fs is loaded.
                      -----> Creating <powershell-windows-2012r2>...
                      D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                      D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                      D      Search returned 3 images:
                      D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                      D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                      D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
                      D      Image for powershell-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                             Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
                      D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
                             If you are not using an account that qualifies under the AWS
                      free-tier, you may be charged to run these suites. The charge
                      should be minimal, but neither Test Kitchen nor its maintainers
                      are responsible for your incurred costs.

                      D      Creating EC2 instance in region us-west-2 with properties:
                      D      - instance_type = "m3.large"
                      D      - ebs_optimized = false
                      D      - image_id = "ami-8d0acfed"
                      D      - key_name = "jenkins"
                      D      - subnet_id = "subnet-19ac017c"
                      D      - private_ip_address = nil
                      D      - placement = {:availability_zone=>"us-west-2a"}
                      D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                      D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJi
              TOP-COOKBOOKS::PROVISION::[2016-06-30 20:44:40 +0000] B3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                             Instance <i-c1924a6e> requested.
            20582: |2


                  ================================================================================
                  Error executing action `run` on resource 'top_cookbooks[converge]'
                  ================================================================================

                  Mixlib::ShellOut::ShellCommandFailed
                  ------------------------------------
                  cookbook_kitchen[converge powershell] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/libraries/top_cookbooks.rb line 23) had an error: Mixlib::ShellOut::ShellCommandFailed: execute[bundle exec kitchen converge  -c -l debug] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 37) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received ''
                  ---- Begin output of bundle exec kitchen converge  -c -l debug ----
                  STDOUT: -----> Starting Kitchen (v1.10.2)
                  D      Berksfile found at /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/powershell/Berksfile, loading Berkshelf
                  D      Berkshelf 4.3.5 library loaded
                  D      winrm requested, loading winrm gem (["~> 1.6"])
                  D      winrm is loaded.
                  D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
                  D      winrm-fs is loaded.
                  -----> Creating <powershell-windows-2012r2>...
                  D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                  D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                  D      Search returned 3 images:
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
                  D      Image for powershell-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                         De
              TOP-COOKBOOKS::PROVISION::[2016-06-30 20:44:40 +0000] tected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
                  D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
            21561: |
              TOP-COOKBOOKS::PROVISION::[2016-06-30 20:44:41 +0000] Running handlers:
              TOP-COOKBOOKS::PROVISION::[2016-06-30 20:44:41 +0000]
              TOP-COOKBOOKS::PROVISION::[2016-06-30 20:44:41 +0000] [2016-06-30T20:44:41+00:00] ERROR: Running exception handlers
              TOP-COOKBOOKS::PROVISION::[2016-06-30 20:44:41 +0000] Running handlers complete
              TOP-COOKBOOKS::PROVISION::[2016-06-30 20:44:41 +0000] [2016-06-30T20:44:41+00:00] ERROR: Exception handlers complete
              TOP-COOKBOOKS::PROVISION::[2016-06-30 20:44:41 +0000] Chef Client failed. 18 resources updated in 31 minutes 39 seconds
              TOP-COOKBOOKS::PROVISION::[2016-06-30 20:44:41 +0000]
              TOP-COOKBOOKS::PROVISION::[2016-06-30 20:44:41 +0000] [2016-06-30T20:44:41+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/chef-stacktrace.out
              [2016-06-30T20:44:41+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
              [2016-06-30T20:44:41+00:00] ERROR: Found 1 errors, they are stored in the backtrace
              TOP-COOKBOOKS::PROVISION::[2016-06-30 20:44:42 +0000] [2016-06-30T20:44:42+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
              CHEF-ACCEPTANCE::[2016-06-30 20:44:42 +0000] Encountered an error running the recipe provision: Expected process to exit with [0], but received '1'
              ---- Begin output of chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/dna.json -o acceptance-cookbook::provision --no-color ----
            29833: |2


                      ================================================================================
                      Error executing action `run` on resource 'execute[bundle exec kitchen converge  -c -l debug]'
                      ================================================================================

                      Mixlib::ShellOut::ShellCommandFailed
                      ------------------------------------
                      Expected process to exit with [0], but received ''
                      ---- Begin output of bundle exec kitchen converge  -c -l debug ----
                      STDOUT: -----> Starting Kitchen (v1.10.2)
                      D      Berksfile found at /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/powershell/Berksfile, loading Berkshelf
                      D      Berkshelf 4.3.5 library loaded
                      D      winrm requested, loading winrm gem (["~> 1.6"])
                      D      winrm is loaded.
                      D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
                      D      winrm-fs is loaded.
                      -----> Creating <powershell-windows-2012r2>...
                      D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                      D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                      D      Search returned 3 images:
                      D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                      D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                      D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
                      D      Image for powershell-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                             Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
                      D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
                             If you are not using an account that qualifies under the AWS
                      free-tier, you may be charged to run these suites. The charge
                      should be minimal, but neither Test Kitchen nor its maintainers
                      are responsible for your incurred costs.

                      D      Creating EC2 instance in region us-west-2 with properties:
                      D      - instance_type = "m3.large"
                      D      - ebs_optimized = false
                      D      - image_id = "ami-8d0acfed"
                      D      - key_name = "jenkins"
                      D      - subnet_id = "subnet-19ac017c"
                      D      - private_ip_address = nil
                      D      - placement = {:availability_zone=>"us-west-2a"}
                      D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                      D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                             Instance <i-c1924a6e> requested.
                             Polling AWS for existence, attempt 0...
                             Attempting to tag the instance, 0 retries
                             EC2 instance <i-c1924a6e> created.
                             Waited 0/300s for instance <i-c1924a6e> to become ready.
                             Waited 5/300s for instance <i-c1924a6e> to become ready.
                             Waited 10/300s for instance <i-c1924a6e> to become ready.
                             Waited 15/300s for instance <i-c1924a6e> to become ready.
                             Waited 20/300s for instance <i-c1924a6e> to become ready.
                             Waited 25/300s for instance <i-c1924a6e> to become ready.
                             Waited 30/300s for instance <i-c1924a6e> to become ready.
                             Waited 35/300s for instance <i-c1924a6e> to become ready.
                             Waited 40/300s for instance <i-c1924a6e> to become ready.
                             Waited 45/300s for instance <i-c1924a6e> to become ready.
                             Waited 50/300s for instance <i-c1924a6e> to become ready.
                             Waited 55/300s for instance <i-c1924a6e> to become ready.
                             Waited 60/300s for instance <i-c1924a6e> to become ready.
                             Waited 65/300s for instance <i-c1924a6e> to become ready.
                             Waited 70/300s for instance <i-c1924a6e> to become ready.
                             Waited 75/300s for instance <i-c1924a6e> to become ready.
                             Waited 80/300s for instance <i-c1924a6e> to become ready.
                             Waited 85/300s for instance <i-c1924a6e> to become ready.
                             Waited 90/300s for instance <i-c1924a6e> to become ready.
                             Waited 95/300s for instance <i-c1924a6e> to become ready.
                             Waited 100/300s for instance <i-c1924a6e> to become ready.
                             Waited 105/300s for instance <i-c1924a6e> to become ready.
                             Waited 110/300s for instance <i-c1924a6e> to become ready.
                      D      Console output: ---
                      2016/06/30 20:38:39Z: EC2ConfigMonitorState: 0
                      2016/06/30 20:38:39Z: Windows sysprep configuration complete.
                      2016/06/30 20:38:43Z: AMI Origin Version: 2016.06.15
                      2016/06/30 20:38:43Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
                      2016/06/30 20:38:43Z: OS: Microsoft Windows NT 6.3.9600
                      2016/06/30 20:38:43Z: OsVersion: 6.3
                      2016/06/30 20:38:43Z: OsProductName: Windows Server 2012 R2 Standard
                      2016/06/30 20:38:43Z: OsBuildLabEx: 9600.18292.amd64fre.winblue_ltsb.160330-1744
                      2016/06/30 20:38:43Z: Language: en-US
                      2016/06/30 20:38:43Z: TimeZone: Coordinated Universal Time
                      2016/06/30 20:38:43Z: Offset: UTC 00:00:00
                      2016/06/30 20:38:43Z: EC2 Agent: Ec2Config service v3.17.1032
                      2016/06/30 20:38:46Z: Message: Waiting for meta-data accessibility...
                      2016/06/30 20:38:46Z: Message: Meta-data is now available.
                      2016/06/30 20:38:47Z: AMI-ID: ami-8d0acfed
                      2016/06/30 20:38:47Z: Instance-ID: i-c1924a6e
                      2016/06/30 20:38:49Z: Driver: AWS PV Network Device v7.3.2.0
                      2016/06/30 20:38:49Z: Driver: AWS PV Storage Host Adapter v7.3.2.0
                      2016/06/30 20:38:49Z: Ec2SetPassword: Enabled
                      2016/06/30 20:38:49Z: RDPCERTIFICATE-SUBJECTNAME: WIN-3GFI3EJG37H
                      2016/06/30 20:38:49Z: RDPCERTIFICATE-THUMBPRINT: 0B6CFA83E9B5E95E87F4343FC0E3CB6B669AA94C
                      2016/06/30 20:38:52Z: Username: Administrator
                      2016/06/30 20:38:52Z: Password: <Password>
                      uAvOwElr/lk5D+3x7ywutccVnJCPzSA5FnaGSUAdus2WcomrHoU9R27qwaBPg80k2Kf3BhXdu92k6c2Nc2Y3EIytvrtQPLCn64kfxQvacL66nXHQf8tqEw6GB2ZItxqe1VK2sad1uRZt0/apRJy0q1o5ClG5qCzT0thy20y5+Ckcc7E8NjScyPnIvS33ziOuIuxtXYxtvx1S6FwdEqa6DQiC3mG7wZbzSoXAIjqWb9vhLxhL3pvpIRtIC26fgNW80HWnAFB0teG1CATlRM4yY5R3BCpy83ybVKguC3G2npq11pRMc8W6jWHBTwPLcztYUnuJxND9OFNFX0xBRk2/+Q==
                      </Password>
                      2016/06/30 20:38:53Z: Message: Windows is Ready to use

                             Waited 0/300s for instance <i-c1924a6e> to fetch windows admin password.
                             Retrieved Windows password for instance <i-c1924a6e>.
                             EC2 instance <i-c1924a6e> ready.
                             [WinRM] connection failed. retrying in 3 seconds: #<HTTPClient::ConnectTimeoutError: execution expired>
                             [WinRM] connection failed. retrying in 3 seconds: #<HTTPClient::ConnectTimeoutError: execution expired>
                             [WinRM] connection failed. retrying in 3 seconds: #<HTTPClient::ConnectTimeoutError: execution expired>
                      D      [WinRM] opening remote shell on http://10.194.8.253:5985/wsman
                      D      [WinRM] remote shell B815EEE4-82B4-4984-8906-195584DDE595 is open on http://10.194.8.253:5985/wsman
                      D      [WinRM] negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
                      ')
                             [WinRM] Established

                      D      [WinRM] reusing existing connection negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                      D      [WinRM] negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)


                                 Directory: C:\chef\ohai\hints


                             Mode                LastWriteTime     Length Name
                             ----                -------------     ------ ----
                             -a---         6/30/2016   8:42 PM          0 ec2.json


                      D      ec2:create '10.194.8.253'
                             Finished creating <powershell-windows-2012r2> (5m11.22s).
                      -----> Converging <powershell-windows-2012r2>...
                             Preparing files for transfer
                      D      Creating local sandbox in /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s
                             Preparing dna.json
                      D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>["recipe[powershell::powershell2]"]}
                             Resolving cookbook dependencies with Berkshelf 4.3.5...
                      D      Using Berksfile from /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/powershell/Berksfile
                             Removing non-cookbook files before transfer
                             Preparing validation.pem
                      D      Using a dummy validation.pem
                             Preparing client.rb
                      D      Creating client.rb from {:node_name=>"powershell-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                      D      [WinRM] reusing existing connection negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                      D      [WinRM] negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
                      function Get-PlatformVersion {
                        switch -regex ((get-wmiobject win32_operatingsystem).version) {
                          '10\.0\.\d+' {$platform_version = '2012r2'}
                          '6\.3\.\d+'  {$platform_version = '2012r2'}
                          '6\.2\.\d+'  {$platform_version = '2012'}
                          '6\.1\.\d+'  {$platform_version = '2008r2'}
                          '6\.0\.\d+'  {$platform_version = '2008'}
                        }
                        return $platform_version
                      }

                      function Get-PlatformArchitecture {
                        if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                          $architecture = 'x86_64'
                        } else {
                          $architecture = 'i386'
                        }
                        return $architecture
                      }

                      function New-Uri {
                        param ($baseuri, $newuri)

                        try {
                        new-object System.Uri $baseuri, $newuri
                        }
                        catch [System.Management.Automation.MethodInvocationException]{
                          Write-Error "$($_.exception.message)"
                          throw $_.exception
                        }
                      }

                      function Get-WebContent {
                        param ($uri, $filepath)
                        $proxy = New-Object -TypeName System.Net.WebProxy
                        $wc = new-object System.Net.WebClient
                        $proxy.Address = $env:http_proxy
                        $wc.Proxy = $proxy

                        try {
                          if ([string]::IsNullOrEmpty($filepath)) {
                            $wc.downloadstring($uri)
                          }
                          else {
                            $wc.downloadfile($uri, $filepath)
                          }
                        }
                        catch {
                          $exception = $_.Exception
                          Write-Host "There was an error: "
                          do {
                            Write-Host "`t$($exception.message)"
                            $exception = $exception.innerexception
                          } while ($exception)
                          throw "Failed to download from $uri."
                        }
                      }

                      function Test-ProjectPackage {
                        [cmdletbinding()]
                        param ($Path, $Algorithm = 'SHA256', $Hash)

                        if (-not (get-command get-filehash))   {
                          function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                          function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                          function Get-FileHash ($Path, $Algorithm) {
                            $Path = (resolve-path $path).providerpath
                            $hash = @{Algorithm = $Algorithm; Path = $Path}
                            use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                              use ($in = (gi $path).OpenRead()) {
                                $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                              }
                            }
                            new-object PSObject -Property $hash
                          }
                        }
                        Write-Verbose "Testing the $Algorithm hash for $path."
                        $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
                        Write-Verbose "`tDesired Hash - '$hash'"
                        Write-Verbose "`tActual Hash  - '$ActualHash'"
                        $Valid = $ActualHash -eq $Hash
                        if (-not $Valid) {
                          Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
                        }
                        return $Valid
                      }

                      function Get-ProjectMetadata {
                        <#
                          .SYNOPSIS
                          Get metadata for a Chef Software, Inc. project
                          .DESCRIPTION
                          Get metadata for project
                          .EXAMPLE
                          iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                          Gets the download url and SHA256 checksum for the latest stable release of Chef.
                          .EXAMPLE
                          iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                          Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
                        #>
                        [cmdletbinding()]
                        param (
                          # Base url to retrieve metadata from.
                          [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                          [string]
                          # Project to install
                          [string]
                          $project = 'chef',
                          # Version of the application to install
                          # This parameter is optional, if not supplied it will provide the latest version,
                          # and if an iteration number is not specified, it will grab the latest available iteration.
                          # Partial version numbers are also acceptable (using v=11
                          # will grab the latest 11.x client which matches the other flags).
                          [string]
                          $version,
                          # Release channel to install from
                          $channel = 'unstable',
                          # The following legacy switches are just aliases for the current channel
                          [switch]
                          $prerelease,
                          [switch]
                          $nightlies,
                          [validateset('auto', 'i386', 'x86_64')]
                          [string]
                          $architecture = 'auto'
                        )

                        # PowerShell is only on Windows ATM
                        $platform = 'windows'
                        Write-Verbose "Platform: $platform"

                        $platform_version = Get-PlatformVersion
                        Write-Verbose "Platform Version: $platform_version"

                        if ($architecture -eq 'auto') {
                          $architecture = Get-PlatformArchitecture
                        }

                        Write-Verbose "Architecture: $architecture"
                        Write-Verbose "Project: $project"


                          $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/ubuntu/14.04/chef_12.12.7+20160630193837-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 c4efc50ff0d90552f9a2e3bd915b34223f6fa0973401bb3d0687c23e3f955fda" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/mac_os_x/10.9/chef-12.12.7+20160630193837-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 7d711ad84db124d266fd049babd46406de640b7007a9f97724b3976b7b231e62" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/mac_os_x/10.10/chef-12.12.7+20160630193837-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 7d711ad84db124d266fd049babd46406de640b7007a9f97724b3976b7b231e62" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/mac_os_x/10.11/chef-12.12.7+20160630193837-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 7d711ad84db124d266fd049babd46406de640b7007a9f97724b3976b7b231e62" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/ios_xr/6/chef-12.12.7+20160630193837-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 c5762f4aec0b7f3045b5d7c0f938558355e11c2c944d72f0d35d6feb4bdff14c" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/nexus/7/chef-12.12.7+20160630193837-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 0317e6e049cef02ae10d255a67db2b0d33368bdce8bd46f0461bd45c900edafb" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/debian/6/chef_12.12.7+20160630193837-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 08c815fe4e82303c2f8609566fdbf8b384fabd222085f0463e6bae0665c48449" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/debian/7/chef_12.12.7+20160630193837-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 08c815fe4e82303c2f8609566fdbf8b384fabd222085f0463e6bae0665c48449" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/debian/8/chef_12.12.7+20160630193837-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 08c815fe4e82303c2f8609566fdbf8b384fabd222085f0463e6bae0665c48449" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/freebsd/10/chef-12.12.7+20160630193837_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 21bad6295f876282d8bf42b7bda810c3993fe11610b6e1fcd028178af23c23d7" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/ubuntu/12.04/chef_12.12.7+20160630193837-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 a81f2c1ad3638863b95d85018efed51f6b41c03cdfad34d61c719c71bc42b56e" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/ubuntu/14.04/chef_12.12.7+20160630193837-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 a81f2c1ad3638863b95d85018efed51f6b41c03cdfad34d61c719c71bc42b56e" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/freebsd/9/chef-12.12.7+20160630193837_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 aac1ff6e55c08f7d8a567dd7a46fc5d478840296a65a177d2c1639d20ce4c0d5" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/5/chef-12.12.7+20160630193837-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 19452307e7fac66e0238e448b9a9adadb3ad34496f5543a6d4ff49856cba396d" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/7/chef-12.12.7+20160630193837-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 d483abc2a16bcd302f6e8ca53f31764c17d5a1c557ba4db6ebd58c8b7cceca64" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/solaris2/5.10/chef-12.12.7+20160630193837-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 82fd260ad3b1b2ddffdcdeaaf94b406de5b1c9b5311f390ca360c80030fb2912" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/solaris2/5.11/chef-12.12.7+20160630193837-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 82fd260ad3b1b2ddffdcdeaaf94b406de5b1c9b5311f390ca360c80030fb2912" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/6/chef-12.12.7+20160630193837-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 97fef125e287712aab6c7b1d7b65d3ebf10f5ecf7fb0452a927e157985743fe7" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/windows/2008r2/chef-client-12.12.7+20160630193837-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 cd23325eac55966e2549f77b7e505c787f2aa0bda5abc2f20a42bc5a77f4593f" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/ubuntu/12.04/chef_12.12.7+20160630193837-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 617fb4e0ee8d077d502815bad81cbecb8242474b2d00387108b055dc90ce4d59" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/ubuntu/14.04/chef_12.12.7+20160630193837-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 617fb4e0ee8d077d502815bad81cbecb8242474b2d00387108b055dc90ce4d59" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/7/chef-12.12.7+20160630193837-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 c4493918447a7258260e252f76a038666bb4828bc5d7b1ca3015261cfee9834d" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/windows/2012/chef-client-12.12.7+20160630193837-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 cd23325eac55966e2549f77b7e505c787f2aa0bda5abc2f20a42bc5a77f4593f" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/7/chef-12.12.7+20160630193837-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 a65074c9a2e437947e71d67ad5d6e6365891e6aab94360435801fef4534b002a" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/debian/6/chef_12.12.7+20160630193837-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 2627010050c565a988a1e3a3d96790e812710b0903eaf39a37511378777fa35d" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/debian/7/chef_12.12.7+20160630193837-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 2627010050c565a988a1e3a3d96790e812710b0903eaf39a37511378777fa35d" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/debian/8/chef_12.12.7+20160630193837-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 2627010050c565a988a1e3a3d96790e812710b0903eaf39a37511378777fa35d" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/windows/2012r2/chef-client-12.12.7+20160630193837-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 cd23325eac55966e2549f77b7e505c787f2aa0bda5abc2f20a42bc5a77f4593f" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/freebsd/10/chef-12.12.7+20160630193837_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 d4b081c6779e8bb2c05c52a883849b8efed031c74d11e4b310c44f3ec7f80cfb" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/5/chef-12.12.7+20160630193837-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 077e75275ab8c19a53d6fd4d5c70223f73d7937419537cb1959c59a9a7905dd8" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/6/chef-12.12.7+20160630193837-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 f7a420a1911ed2c3594a6618088e1df53b98fa3e983bd54d7e2f38c10ee6c88e" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/windows/2008r2/chef-client-12.12.7+20160630193837-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 7d7473cf1d7c05329500906bf7d0376ddd5085b5177615135941d0f69f94754e" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/freebsd/9/chef-12.12.7+20160630193837_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 8db728137b266b620c679105afcd576bd6abaf0a7d8fb84a537bf5ed837929db" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/windows/2012/chef-client-12.12.7+20160630193837-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 7d7473cf1d7c05329500906bf7d0376ddd5085b5177615135941d0f69f94754e" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/windows/2012r2/chef-client-12.12.7+20160630193837-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 7d7473cf1d7c05329500906bf7d0376ddd5085b5177615135941d0f69f94754e" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/aix/6.1/chef-12.12.7+20160630193837-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 38c83aa5d88a2dd1ac40d821bf645cda87cbae124f2d7cc5d14e66e745a84d03" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/aix/7.1/chef-12.12.7+20160630193837-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 38c83aa5d88a2dd1ac40d821bf645cda87cbae124f2d7cc5d14e66e745a84d03" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/solaris2/5.10/chef-12.12.7+20160630193837-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 b69dae5b265e2c9ffde1860b05d429178dcaec0a225bf42209306dc4439687ab" | out-file "$artifact_info_dir/artifact_info" -Append

                          $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                          New-Item -ItemType directory -Path $artifact_info_dir -force
                          New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                          "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/solaris2/5.11/chef-12.12.7+20160630193837-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                          "sha256 b69dae5b265e2c9ffde1860b05d429178dcaec0a225bf42209306dc4439687ab" | out-file "$artifact_info_dir/artifact_info" -Append


                        $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

                        $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                          foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

                        Write-Verbose "Project details: "
                        foreach ($key in $package_metadata.keys) {
                          Write-Verbose "`t$key = $($package_metadata[$key])"
                        }
                        $package_metadata
                      }

                      function Install-Project {
                        <#
                          .SYNOPSIS
                          Install a Chef Software, Inc. product
                          .DESCRIPTION
                          Install a Chef Software, Inc. product
                          .EXAMPLE
                          iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                          Installs the latest stable version of Chef.
                          .EXAMPLE
                          iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                          Installs the latest integration build of the Chef Development Kit
                        #>
                        [cmdletbinding(SupportsShouldProcess=$true)]
                        param (
                          # Project to install
                          [string]
                          $project = 'chef',
                          # Release channel to install from
                          [validateset('current', 'stable', 'unstable')]
                          [string]
                          $channel = 'stable',
                          # Version of the application to install
                          # This parameter is optional, if not supplied it will provide the latest version,
                          # and if an iteration number is not specified, it will grab the latest available iteration.
                          # Partial version numbers are also acceptable (using v=11
                          # will grab the latest 11.x client which matches the other flags).
                          [string]
                          $version,
                          # Full path for the downloaded installer.
                          [string]
                          $filename,
                          # Full path to the location to download the installer
                          [string]
                          $download_directory = $env:temp,
                          # The following legacy switches are just aliases for the current channel
                          [switch]
                          $prerelease,
                          [switch]
                          $nightlies,
                          [validateset('auto', 'i386', 'x86_64')]
                          [string]
                          $architecture = 'auto'
                        )

                        $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

                        if (-not [string]::IsNullOrEmpty($filename)) {
                          $download_directory = split-path $filename
                          $filename = split-path $filename -leaf
                          if ([string]::IsNullOrEmpty($download_directory)) {
                            $download_directory = $pwd
                          }
                        }
                        else {
                          $filename = ($package_metadata.url -split '/')[-1]
                        }
                        Write-Verbose "Download directory: $download_directory"
                        Write-Verbose "Filename: $filename"

                        if (-not (test-path $download_directory)) {
                          mkdir $download_directory
                        }
                        $download_directory = (resolve-path $download_directory).providerpath
                        $download_destination = join-path $download_directory $filename

                        if ((test-path $download_destination) -and
                          (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                          Write-Verbose "Found existing valid installer at $download_destination."
                        }
                        else {
                          if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                            Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                            Get-WebContent $package_metadata.url -filepath $download_destination
                          }
                        }

                        if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                          if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                            Write-Host "Installing $project from $download_destination"
                            $installingProject = $True
                            $installAttempts = 0
                            while ($installingProject) {
                              $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                              $p.WaitForExit()
                              if ($p.ExitCode -eq 1618) {
                                Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                                continue
                              } elseif ($p.ExitCode -ne 0) {
                                throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                              }
                              $installingProject = $False
                            }
                          }
                          else {
                            throw "Failed to validate the downloaded installer for $project."
                          }
                        }
                      }
                      set-alias install -value Install-Project
                      export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

                      }

                      install -project chef -version 12.12.7+20160630193837 -channel unstable
                      )
                      D      creating hash for file $env:TEMP/powershell-windows-2012r2-long_script.ps1
                      D      Running check_files.ps1
                      D      @{
                      D        "dfec0130a5d1c856df5a59c7a1695b6a" = @{
                      D          "target" = "$env:TEMP/powershell-windows-2012r2-long_script.ps1";
                      D          "src_basename" = "powershell-windows-2012r2-long_script.ps1";
                      D          "dst" = "$env:TEMP/powershell-windows-2012r2-long_script.ps1"
                      D        }
                      D      }
                      D      Parsing CSV Response
                      D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
                      "False","dfec0130a5d1c856df5a59c7a1695b6a",,"True","False","False"

                      D      Uploading /tmp/cheftest/kitchen-long-script20160630-14886-1s5yuhz/powershell-windows-2012r2-long_script.ps1 to encoded tmpfile $env:TEMP\b64-dfec0130a5d1c856df5a59c7a1695b6a.txt
                      D      Finished uploading /tmp/cheftest/kitchen-long-script20160630-14886-1s5yuhz/powershell-windows-2012r2-long_script.ps1 to encoded tmpfile $env:TEMP\b64-dfec0130a5d1c856df5a59c7a1695b6a.txt (40.316 KB over 6 chunks) in (0m0.52s)
                      D      Running decode_files.ps1
                      D      @{
                      D        "$env:TEMP\b64-dfec0130a5d1c856df5a59c7a1695b6a.txt" = @{
                      D          "dst" = "$env:TEMP/powershell-windows-2012r2-long_script.ps1"
                      D        }
                      D      }
                      D      Parsing CSV Response
                      D      "src_md5","tmpzip","verifies","tmpfile","dst_md5","dst"
                      "dfec0130a5d1c856df5a59c7a1695b6a",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-dfec0130a5d1c856df5a59c7a1695b6a.txt","dfec0130a5d1c856df5a59c7a1695b6a","C:\Users\ADMINI~1\AppData\Local\Temp/powershell-windows-2012r2-long_script.ps1"

                      D      Uploaded 1 items dirty_check: (0m0.67s) stream_files: (0m0.52s) decode: (0m0.81s)

                             ModuleType Version    Name                                ExportedCommands
                             ---------- -------    ----                                ----------------
                             Script     0.0        Omnitruck                           {Get-ProjectMetada...
                             Installing chef from C:\Users\ADMINI~1\AppData\Local\Temp\chef-client-12.12.7+20160630193837-1-x64.msi
                      D      [WinRM] retrying receive request after timeout


                      D      [WinRM] negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($dirs = @("$env:TEMP\kitchen\clients", "$env:TEMP\kitchen\cookbooks", "$env:TEMP\kitchen\data", "$env:TEMP\kitchen\data_bags", "$env:TEMP\kitchen\encrypted_data_bag_secret", "$env:TEMP\kitchen\environments", "$env:TEMP\kitchen\roles")
                      $root_path = "$env:TEMP\kitchen"

                      Function Delete-AllDirs($dirs) {
                        $dirs | ForEach-Object {
                          if (Test-Path ($path = Unresolve-Path $_)) { Remove-Item $path -Recurse -Force }
                        }
                      }

                      Function Unresolve-Path($p) {
                        if ($p -eq $null) { return $null }
                        else { return $ExecutionContext.SessionState.Path.GetUnresolvedProviderPathFromPSPath($p) }
                      }

                      Function Make-RootPath($p) {
                        $p = Unresolve-Path $p
                        if (-Not (Test-Path $p)) { New-Item $p -ItemType directory | Out-Null }
                      }

                      Delete-AllDirs $dirs
                      Make-RootPath $root_path
                      )
                             Transferring files to <powershell-windows-2012r2>
                      D      creating hash for file $env:TEMP\kitchen
                      D      creating hash for file $env:TEMP\kitchen
                      D      creating hash for directory $env:TEMP\kitchen
                      D      Populating files
                      D      === All files added.
                      D      creating hash for file $env:TEMP\kitchen
                      D      creating hash for directory $env:TEMP\kitchen
                      D      Populating files
                      D      +++ Adding chef_handler/README.md
                      D      +++ Adding chef_handler/attributes/default.rb
                      D      +++ Adding chef_handler/files/default/handlers/README
                      D      +++ Adding chef_handler/libraries/helpers.rb
                      D      +++ Adding chef_handler/libraries/matchers.rb
                      D      +++ Adding chef_handler/metadata.json
                      D      +++ Adding chef_handler/providers/default.rb
                      D      +++ Adding chef_handler/recipes/default.rb
                      D      +++ Adding chef_handler/recipes/json_file.rb
                      D      +++ Adding chef_handler/resources/default.rb
                      D      +++ Adding minimal/metadata.json
                      D      +++ Adding minimal/recipes/default.rb
                      D      +++ Adding ms_dotnet/README.md
                      D      +++ Adding ms_dotnet/attributes/default.rb
                      D      +++ Adding ms_dotnet/attributes/ms_dotnet2.rb
                      D      +++ Adding ms_dotnet/attributes/ms_dotnet3.rb
                      D      +++ Adding ms_dotnet/attributes/ms_dotnet4.rb
                      D      +++ Adding ms_dotnet/libraries/windows_version_helper.rb
                      D      +++ Adding ms_dotnet/metadata.json
                      D      +++ Adding ms_dotnet/recipes/default.rb
                      D      +++ Adding ms_dotnet/recipes/ms_dotnet2.rb
                      D      +++ Adding ms_dotnet/recipes/ms_dotnet3.rb
                      D      +++ Adding ms_dotnet/recipes/ms_dotnet4.rb
                      D      +++ Adding ms_dotnet/recipes/regiis.rb
                      D      +++ Adding powershell/README.md
                      D      +++ Adding powershell/attributes/bits_4.rb
                      D      +++ Adding powershell/attributes/config_lcm.rb
                      D      +++ Adding powershell/attributes/default.rb
                      D      +++ Adding powershell/attributes/powershell2.rb
                      D      +++ Adding powershell/attributes/powershell3.rb
                      D      +++ Adding powershell/attributes/powershell4.rb
                      D      +++ Adding powershell/attributes/powershell5.rb
                      D      +++ Adding powershell/libraries/powershell_module_provider.rb
                      D      +++ Adding powershell/libraries/powershell_module_resource.rb
                      D      +++ Adding powershell/libraries/powershell_version.rb
                      D      +++ Adding powershell/metadata.json
                      D      +++ Adding powershell/providers/default.rb
                      D      +++ Adding powershell/recipes/default.rb
                      D      +++ Adding powershell/recipes/disable_lcm.rb
                      D      +++ Adding powershell/recipes/dsc.rb
                      D      +++ Adding powershell/recipes/enable_dsc_script.rb
                      D      +++ Adding powershell/recipes/enable_lcm.rb
                      D      +++ Adding powershell/recipes/powershell2.rb
                      D      +++ Adding powershell/recipes/powershell3.rb
                      D      +++ Adding powershell/recipes/powershell4.rb
                      D      +++ Adding powershell/recipes/powershell5.rb
                      D      +++ Adding powershell/recipes/powershell_module.rb
                      D      +++ Adding powershell/recipes/windows_reboot.rb
                      D      +++ Adding powershell/recipes/winrm.rb
                      D      +++ Adding powershell/resources/default.rb
                      D      +++ Adding windows/README.md
                      D      +++ Adding windows/attributes/default.rb
                      D      +++ Adding windows/files/default/handlers/windows_reboot_handler.rb
                      D      +++ Adding windows/libraries/feature_base.rb
                      D      +++ Adding windows/libraries/matchers.rb
                      D      +++ Adding windows/libraries/powershell_helper.rb
                      D      +++ Adding windows/libraries/powershell_out.rb
                      D      +++ Adding windows/libraries/registry_helper.rb
                      D      +++ Adding windows/libraries/version.rb
                      D      +++ Adding windows/libraries/windows_architecture_helper.rb
                      D      +++ Adding windows/libraries/windows_helper.rb
                      D      +++ Adding windows/libraries/windows_package.rb
                      D      +++ Adding windows/libraries/windows_privileged.rb
                      D      +++ Adding windows/libraries/wmi_helper.rb
                      D      +++ Adding windows/metadata.json
                      D      +++ Adding windows/providers/auto_run.rb
                      D      +++ Adding windows/providers/batch.rb
                      D      +++ Adding windows/providers/certificate.rb
                      D      +++ Adding windows/providers/certificate_binding.rb
                      D      +++ Adding windows/providers/feature_dism.rb
                      D      +++ Adding windows/providers/feature_powershell.rb
                      D      +++ Adding windows/providers/feature_servermanagercmd.rb
                      D      +++ Adding windows/providers/font.rb
                      D      +++ Adding windows/providers/http_acl.rb
                      D      +++ Adding windows/providers/pagefile.rb
                      D      +++ Adding windows/providers/path.rb
                      D      +++ Adding windows/providers/printer.rb
                      D      +++ Adding windows/providers/printer_port.rb
                      D      +++ Adding windows/providers/reboot.rb
                      D      +++ Adding windows/providers/registry.rb
                      D      +++ Adding windows/providers/shortcut.rb
                      D      +++ Adding windows/providers/task.rb
                      D      +++ Adding windows/providers/zipfile.rb
                      D      +++ Adding windows/recipes/default.rb
                      D      +++ Adding windows/recipes/reboot_handler.rb
                      D      +++ Adding windows/resources/auto_run.rb
                      D      +++ Adding windows/resources/batch.rb
                      D      +++ Adding windows/resources/certificate.rb
                      D      +++ Adding windows/resources/certificate_binding.rb
                      D      +++ Adding windows/resources/feature.rb
                      D      +++ Adding windows/resources/font.rb
                      D      +++ Adding windows/resources/http_acl.rb
                      D      +++ Adding windows/resources/pagefile.rb
                      D      +++ Adding windows/resources/path.rb
                      D      +++ Adding windows/resources/printer.rb
                      D      +++ Adding windows/resources/printer_port.rb
                      D      +++ Adding windows/resources/reboot.rb
                      D      +++ Adding windows/resources/registry.rb
                      D      +++ Adding windows/resources/shortcut.rb
                      D      +++ Adding windows/resources/task.rb
                      D      +++ Adding windows/resources/zipfile.rb
                      D      === All files added.
                      D      Running check_files.ps1
                      D      @{
                      D        "9768ea17a1471084212c406c34a8636d" = @{
                      D          "target" = "$env:TEMP\kitchen";
                      D          "src_basename" = "dna.json";
                      D          "dst" = "$env:TEMP\kitchen"
                      D        };
                      D        "d2f1dba7153c3ceee9427ecc1c3ca078" = @{
                      D          "target" = "$env:TEMP\kitchen";
                      D          "src_basename" = "client.rb";
                      D          "dst" = "$env:TEMP\kitchen"
                      D        };
                      D        "76cdb2bad9582d23c1f6f4d868218d6c" = @{
                      D          "target" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip";
                      D          "src_basename" = "cache";
                      D          "dst" = "$env:TEMP\kitchen\cache"
                      D        };
                      D        "49abb94825cb80b9a9cd59e5f76daf4a" = @{
                      D          "target" = "$env:TEMP\kitchen";
                      D          "src_basename" = "validation.pem";
                      D          "dst" = "$env:TEMP\kitchen"
                      D        };
                      D        "a0d0950fa969e51c8583c88e6339a8de" = @{
                      D          "target" = "$env:TEMP\winrm-upload\tmpzip-a0d0950fa969e51c8583c88e6339a8de.zip";
                      D          "src_basename" = "cookbooks";
                      D          "dst" = "$env:TEMP\kitchen\cookbooks"
                      D        }
                      D      }
                      D      Parsing CSV Response
                      D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
                      "False","76cdb2bad9582d23c1f6f4d868218d6c",,"True","False","False"
                      "False","49abb94825cb80b9a9cd59e5f76daf4a",,"True","False","True"
                      "False","a0d0950fa969e51c8583c88e6339a8de",,"True","False","False"
                      "False","9768ea17a1471084212c406c34a8636d",,"True","False","True"
                      "False","d2f1dba7153c3ceee9427ecc1c3ca078",,"True","False","True"

                      D      Uploading /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s/dna.json to encoded tmpfile $env:TEMP\b64-9768ea17a1471084212c406c34a8636d.txt
                      D      Finished uploading /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s/dna.json to encoded tmpfile $env:TEMP\b64-9768ea17a1471084212c406c34a8636d.txt (0.128 KB over 1 chunks) in (0m0.11s)
                      D      Uploading /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s/client.rb to encoded tmpfile $env:TEMP\b64-d2f1dba7153c3ceee9427ecc1c3ca078.txt
                      D      Finished uploading /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s/client.rb to encoded tmpfile $env:TEMP\b64-d2f1dba7153c3ceee9427ecc1c3ca078.txt (1.108 KB over 1 chunks) in (0m0.10s)
                      D      Uploading /tmp/cheftest/tmpzip-20160630-14886-hfu1hd.zip to encoded tmpfile $env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt
                      D      Finished uploading /tmp/cheftest/tmpzip-20160630-14886-hfu1hd.zip to encoded tmpfile $env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt (0.028 KB over 1 chunks) in (0m0.06s)
                      D      Uploading /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s/validation.pem to encoded tmpfile $env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt
                      D      Finished uploading /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s/validation.pem to encoded tmpfile $env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt (2.236 KB over 1 chunks) in (0m0.11s)
                      D      Uploading /tmp/cheftest/tmpzip-20160630-14886-1qxo2ts.zip to encoded tmpfile $env:TEMP\b64-a0d0950fa969e51c8583c88e6339a8de.txt
                      D      Finished uploading /tmp/cheftest/tmpzip-20160630-14886-1qxo2ts.zip to encoded tmpfile $env:TEMP\b64-a0d0950fa969e51c8583c88e6339a8de.txt (189.124 KB over 24 chunks) in (0m2.10s)
                      D      Running decode_files.ps1
                      D      @{
                      D        "$env:TEMP\b64-9768ea17a1471084212c406c34a8636d.txt" = @{
                      D          "dst" = "$env:TEMP\kitchen/dna.json"
                      D        };
                      D        "$env:TEMP\b64-d2f1dba7153c3ceee9427ecc1c3ca078.txt" = @{
                      D          "dst" = "$env:TEMP\kitchen/client.rb"
                      D        };
                      D        "$env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt" = @{
                      D          "dst" = "$env:TEMP\kitchen\cache";
                      D          "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip"
                      D        };
                      D        "$env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt" = @{
                      D          "dst" = "$env:TEMP\kitchen/validation.pem"
                      D        };
                      D        "$env:TEMP\b64-a0d0950fa969e51c8583c88e6339a8de.txt" = @{
                      D          "dst" = "$env:TEMP\kitchen\cookbooks";
                      D          "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-a0d0950fa969e51c8583c88e6339a8de.zip"
                      D        }
                      D      }
                      D      Parsing CSV Response
                      D      "src_md5","tmpzip","verifies","tmpfile","dst_md5","dst"
                      "76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip","True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt","76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache"
                      "a0d0950fa969e51c8583c88e6339a8de","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-a0d0950fa969e51c8583c88e6339a8de.zip","True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-a0d0950fa969e51c8583c88e6339a8de.txt","a0d0950fa969e51c8583c88e6339a8de","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cookbooks"
                      "d2f1dba7153c3ceee9427ecc1c3ca078",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-d2f1dba7153c3ceee9427ecc1c3ca078.txt","d2f1dba7153c3ceee9427ecc1c3ca078","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/client.rb"
                      "49abb94825cb80b9a9cd59e5f76daf4a",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt","49abb94825cb80b9a9cd59e5f76daf4a","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/validation.pem"
                      "9768ea17a1471084212c406c34a8636d",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-9768ea17a1471084212c406c34a8636d.txt","9768ea17a1471084212c406c34a8636d","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/dna.json"

                      D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160630-14886-hfu1hd.zip
                      D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160630-14886-1qxo2ts.zip
                      D      Uploaded 5 items dirty_check: (0m1.26s) stream_files: (0m2.51s) decode: (0m1.78s)
                      D      Transfer complete
                      D      Attempting to execute command - try 1 of 1.
                      D      [WinRM] negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($env:PATH = [System.Environment]::GetEnvironmentVariable("PATH","Machine")

                      & $env:systemdrive\opscode\chef\bin\chef-client.bat --local-mode --config $env:TEMP\kitchen\client.rb --log_level auto --force-formatter --no-color --json-attributes $env:TEMP\kitchen\dna.json --chef-zero-port 8889 ; exit $LastExitCode)
                             Starting Chef Client, version 12.12.7
                             Creating a new client identity for powershell-windows-2012r2 using the validator key.
                             resolving cookbooks for run list: ["powershell::powershell2"]
                             Synchronizing Cookbooks:
                               - powershell (3.3.2)
                               - windows (1.44.1)
                               - ms_dotnet (2.6.2)
                               - chef_handler (1.4.0)
                             Installing Cookbook Gems:
                             Compiling Cookbooks...
                             [2016-06-30T20:44:33+00:00] WARN: PowerShell 2.0 is not supported or already installed on this version of Windows: 6.3.9600
                             Converging 8 resources
                             Recipe: windows::default
                               * chef_gem[win32-api] action install (up to date)
                               * chef_gem[win32-service] action install (up to date)
                               * chef_gem[windows-api] action install (up to date)
                               * chef_gem[windows-pr] action install
                                 - install version 1.2.5 of package windows-pr
                               * chef_gem[win32-dir] action install (up to date)
                               * chef_gem[win32-event] action install (up to date)
                               * chef_gem[win32-mutex] action install (up to date)
                             Recipe: ms_dotnet::ms_dotnet2
                               * log[.NET Framework 2.0 is already enabled on this version of Windows] action write[2016-06-30T20:44:38+00:00] WARN: .NET Framework 2.0 is already enabled on this version of Windows


                             Starting audit phase

                             Finished in 0 seconds (files took 0.60937 seconds to load)
                             0 examples, 0 failures
                             Auditing complete

                             Running handlers:
                             Running handlers complete
                             Chef Client finished, 2/8 resources updated in 38 seconds
                             [2016-06-30T20:44:39+00:00] ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json
                      $$$$$$ C:/opscode/chef/embedded/lib/ruby/2.1.0/x64-mingw32/dl.so: warning: already initialized constant DL::RUBY_FREE
                      $$$$$$ C:/opscode/chef/embedded/lib/ruby/gems/2.1.0/gems/net-ssh-3.2.0/lib/net/ssh/authentication/pageant.rb:16: warning: previous definition of RUBY_FREE was here
                      $$$$$$ DL is deprecated, please use Fiddle
                      D      Cleaning up local sandbox in /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s
                             Finished converging <powershell-windows-2012r2> (2m28.04s).
                      -----> Kitchen is finished. (7m40.80s)
                      D      [WinRM] closing remote shell B815EEE4-82B4-4984-8906-195584DDE595 on http://10.194.8.253:5985/wsman
                      D      [WinRM] remote shell B815EEE4-82B4-4984-8906-195584DDE595 closed
                      STDERR: [BUG] Segmentation fault at 0x000000000002f0
                      ruby 2.1.6p336 (2015-04-13 revision 50298) [x86_64-linux]
                      ---- End output of bundle exec kitchen converge  -c -l debug ----
                      Ran bundle exec kitchen converge  -c -l debug returned

                      Resource Declaration:
                      ---------------------
                      # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb

                       37:       execute "bundle exec kitchen #{command}#{instances ? " #{instances}" : ""}#{kitchen_options ? " #{kitchen_options}" : ""}" do
                       38:         cwd kitchen_dir
                       39:         env({
                       40:           "KITCHEN_DRIVER" => driver,
                       41:           "KITCHEN_INSTANCES" => instances,
                       42:           "KITCHEN_LOCAL_YAML" => ::File.expand_path("../../.kitchen.#{driver}.yml", __FILE__),
                       43:           "KITCHEN_CHEF_PRODUCT" => chef_product,
                       44:           "KITCHEN_CHEF_CHANNEL" => chef_channel,
                       45:           "KITCHEN_CHEF_VERSION" => chef_version,
                       46:           "ARTIFACTORY_USERNAME" => artifactory_username,
                       47:           "ARTIFACTORY_PASSWORD" => artifactory_password
                       48:         }.merge(new_resource.env))
                       49:       end
                       50:       ruby_block "copy_kitchen_logs_to_data_path" do

                      Compiled Resource:
                      ------------------
                      # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:37:in `block in <class:Kitchen>'

                      execute("bundle exec kitchen converge  -c -l debug") do
                        action [:run]
                        retries 0
                        retry_delay 2
                        default_guard_interpreter :execute
                        command "bundle exec kitchen converge  -c -l debug"
                        backup 5
                        cwd "/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/powershell/"
                        environment {"KITCHEN_DRIVER"=>"ec2", "KITCHEN_INSTANCES"=>"", "KITCHEN_LOCAL_YAML"=>"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/.kitchen.ec2.yml", "KITCHEN_CHEF_PRODUCT"=>"chef", "KITCHEN_CHEF_CHANNEL"=>"unstable", "KITCHEN_CHEF_VERSION"=>"12.12.7+20160630193837", "ARTIFACTORY_USERNAME"=>"chef-web-downloads", "ARTIFACTORY_PASSWORD"=>"fWPxYSB69EiuSpl8*3Dr^kGwf#hxUE6cmjeZRB%H!Cruit7qiKp%toH3nXKStQUg", "BUNDLE_GEMFILE"=>"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/Gemfile", "KITCHEN_YAML"=>"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/.kitchen.powershell.yml"}
                        returns 0
                        declared_type :execute
                        cookbook_name "acceptance-cookbook"
                      end


                    ================================================================================
                    Error executing action `run` on resource 'cookbook_kitchen[converge powershell]'
                    ================================================================================

                    Mixlib::ShellOut::ShellCommandFailed
                    ------------------------------------
                    execute[bundle exec kitchen converge  -c -l debug] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 37) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received ''
                    ---- Begin output of bundle exec kitchen converge  -c -l debug ----
                    STDOUT: -----> Starting Kitchen (v1.10.2)
                    D      Berksfile found at /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/powershell/Berksfile, loading Berkshelf
                    D      Berkshelf 4.3.5 library loaded
                    D      winrm requested, loading winrm gem (["~> 1.6"])
                    D      winrm is loaded.
                    D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
                    D      winrm-fs is loaded.
                    -----> Creating <powershell-windows-2012r2>...
                    D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                    D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                    D      Search returned 3 images:
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
                    D      Image for powershell-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                           Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
                    D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
                           If you are not using an account that qualifies under the AWS
                    free-tier, you may be charged to run these suites. The charge
                    should be minimal, but neither Test Kitchen nor its maintainers
                    are responsible for your incurred costs.

                    D      Creating EC2 instance in region us-west-2 with properties:
                    D      - instance_type = "m3.large"
                    D      - ebs_optimized = false
                    D      - image_id = "ami-8d0acfed"
                    D      - key_name = "jenkins"
                    D      - subnet_id = "subnet-19ac017c"
                    D      - private_ip_address = nil
                    D      - placement = {:availability_zone=>"us-west-2a"}
                    D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                    D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                           Instance <i-c1924a6e> requested.
                           Polling AWS for existence, attempt 0...
                           Attempting to tag the instance, 0 retries
                           EC2 instance <i-c1924a6e> created.
                           Waited 0/300s for instance <i-c1924a6e> to become ready.
                           Waited 5/300s for instance <i-c1924a6e> to become ready.
                           Waited 10/300s for instance <i-c1924a6e> to become ready.
                           Waited 15/300s for instance <i-c1924a6e> to become ready.
                           Waited 20/300s for instance <i-c1924a6e> to become ready.
                           Waited 25/300s for instance <i-c1924a6e> to become ready.
                           Waited 30/300s for instance <i-c1924a6e> to become ready.
                           Waited 35/300s for instance <i-c1924a6e> to become ready.
                           Waited 40/300s for instance <i-c1924a6e> to become ready.
                           Waited 45/300s for instance <i-c1924a6e> to become ready.
                           Waited 50/300s for instance <i-c1924a6e> to become ready.
                           Waited 55/300s for instance <i-c1924a6e> to become ready.
                           Waited 60/300s for instance <i-c1924a6e> to become ready.
                           Waited 65/300s for instance <i-c1924a6e> to become ready.
                           Waited 70/300s for instance <i-c1924a6e> to become ready.
                           Waited 75/300s for instance <i-c1924a6e> to become ready.
                           Waited 80/300s for instance <i-c1924a6e> to become ready.
                           Waited 85/300s for instance <i-c1924a6e> to become ready.
                           Waited 90/300s for instance <i-c1924a6e> to become ready.
                           Waited 95/300s for instance <i-c1924a6e> to become ready.
                           Waited 100/300s for instance <i-c1924a6e> to become ready.
                           Waited 105/300s for instance <i-c1924a6e> to become ready.
                           Waited 110/300s for instance <i-c1924a6e> to become ready.
                    D      Console output: ---
                    2016/06/30 20:38:39Z: EC2ConfigMonitorState: 0
                    2016/06/30 20:38:39Z: Windows sysprep configuration complete.
                    2016/06/30 20:38:43Z: AMI Origin Version: 2016.06.15
                    2016/06/30 20:38:43Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
                    2016/06/30 20:38:43Z: OS: Microsoft Windows NT 6.3.9600
                    2016/06/30 20:38:43Z: OsVersion: 6.3
                    2016/06/30 20:38:43Z: OsProductName: Windows Server 2012 R2 Standard
                    2016/06/30 20:38:43Z: OsBuildLabEx: 9600.18292.amd64fre.winblue_ltsb.160330-1744
                    2016/06/30 20:38:43Z: Language: en-US
                    2016/06/30 20:38:43Z: TimeZone: Coordinated Universal Time
                    2016/06/30 20:38:43Z: Offset: UTC 00:00:00
                    2016/06/30 20:38:43Z: EC2 Agent: Ec2Config service v3.17.1032
                    2016/06/30 20:38:46Z: Message: Waiting for meta-data accessibility...
                    2016/06/30 20:38:46Z: Message: Meta-data is now available.
                    2016/06/30 20:38:47Z: AMI-ID: ami-8d0acfed
                    2016/06/30 20:38:47Z: Instance-ID: i-c1924a6e
                    2016/06/30 20:38:49Z: Driver: AWS PV Network Device v7.3.2.0
                    2016/06/30 20:38:49Z: Driver: AWS PV Storage Host Adapter v7.3.2.0
                    2016/06/30 20:38:49Z: Ec2SetPassword: Enabled
                    2016/06/30 20:38:49Z: RDPCERTIFICATE-SUBJECTNAME: WIN-3GFI3EJG37H
                    2016/06/30 20:38:49Z: RDPCERTIFICATE-THUMBPRINT: 0B6CFA83E9B5E95E87F4343FC0E3CB6B669AA94C
                    2016/06/30 20:38:52Z: Username: Administrator
                    2016/06/30 20:38:52Z: Password: <Password>
                    uAvOwElr/lk5D+3x7ywutccVnJCPzSA5FnaGSUAdus2WcomrHoU9R27qwaBPg80k2Kf3BhXdu92k6c2Nc2Y3EIytvrtQPLCn64kfxQvacL66nXHQf8tqEw6GB2ZItxqe1VK2sad1uRZt0/apRJy0q1o5ClG5qCzT0thy20y5+Ckcc7E8NjScyPnIvS33ziOuIuxtXYxtvx1S6FwdEqa6DQiC3mG7wZbzSoXAIjqWb9vhLxhL3pvpIRtIC26fgNW80HWnAFB0teG1CATlRM4yY5R3BCpy83ybVKguC3G2npq11pRMc8W6jWHBTwPLcztYUnuJxND9OFNFX0xBRk2/+Q==
                    </Password>
                    2016/06/30 20:38:53Z: Message: Windows is Ready to use

                           Waited 0/300s for instance <i-c1924a6e> to fetch windows admin password.
                           Retrieved Windows password for instance <i-c1924a6e>.
                           EC2 instance <i-c1924a6e> ready.
                           [WinRM] connection failed. retrying in 3 seconds: #<HTTPClient::ConnectTimeoutError: execution expired>
                           [WinRM] connection failed. retrying in 3 seconds: #<HTTPClient::ConnectTimeoutError: execution expired>
                           [WinRM] connection failed. retrying in 3 seconds: #<HTTPClient::ConnectTimeoutError: execution expired>
                    D      [WinRM] opening remote shell on http://10.194.8.253:5985/wsman
                    D      [WinRM] remote shell B815EEE4-82B4-4984-8906-195584DDE595 is open on http://10.194.8.253:5985/wsman
                    D      [WinRM] negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
                    ')
                           [WinRM] Established

                    D      [WinRM] reusing existing connection negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                    D      [WinRM] negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)


                               Directory: C:\chef\ohai\hints


                           Mode                LastWriteTime     Length Name
                           ----                -------------     ------ ----
                           -a---         6/30/2016   8:42 PM          0 ec2.json


                    D      ec2:create '10.194.8.253'
                           Finished creating <powershell-windows-2012r2> (5m11.22s).
                    -----> Converging <powershell-windows-2012r2>...
                           Preparing files for transfer
                    D      Creating local sandbox in /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s
                           Preparing dna.json
                    D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>["recipe[powershell::powershell2]"]}
                           Resolving cookbook dependencies with Berkshelf 4.3.5...
                    D      Using Berksfile from /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/powershell/Berksfile
                           Removing non-cookbook files before transfer
                           Preparing validation.pem
                    D      Using a dummy validation.pem
                           Preparing client.rb
                    D      Creating client.rb from {:node_name=>"powershell-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                    D      [WinRM] reusing existing connection negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                    D      [WinRM] negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
                    function Get-PlatformVersion {
                      switch -regex ((get-wmiobject win32_operatingsystem).version) {
                        '10\.0\.\d+' {$platform_version = '2012r2'}
                        '6\.3\.\d+'  {$platform_version = '2012r2'}
                        '6\.2\.\d+'  {$platform_version = '2012'}
                        '6\.1\.\d+'  {$platform_version = '2008r2'}
                        '6\.0\.\d+'  {$platform_version = '2008'}
                      }
                      return $platform_version
                    }

                    function Get-PlatformArchitecture {
                      if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                        $architecture = 'x86_64'
                      } else {
                        $architecture = 'i386'
                      }
                      return $architecture
                    }

                    function New-Uri {
                      param ($baseuri, $newuri)

                      try {
                      new-object System.Uri $baseuri, $newuri
                      }
                      catch [System.Management.Automation.MethodInvocationException]{
                        Write-Error "$($_.exception.message)"
                        throw $_.exception
                      }
                    }

                    function Get-WebContent {
                      param ($uri, $filepath)
                      $proxy = New-Object -TypeName System.Net.WebProxy
                      $wc = new-object System.Net.WebClient
                      $proxy.Address = $env:http_proxy
                      $wc.Proxy = $proxy

                      try {
                        if ([string]::IsNullOrEmpty($filepath)) {
                          $wc.downloadstring($uri)
                        }
                        else {
                          $wc.downloadfile($uri, $filepath)
                        }
                      }
                      catch {
                        $exception = $_.Exception
                        Write-Host "There was an error: "
                        do {
                          Write-Host "`t$($exception.message)"
                          $exception = $exception.innerexception
                        } while ($exception)
                        throw "Failed to download from $uri."
                      }
                    }

                    function Test-ProjectPackage {
                      [cmdletbinding()]
                      param ($Path, $Algorithm = 'SHA256', $Hash)

                      if (-not (get-command get-filehash))   {
                        function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                        function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                        function Get-FileHash ($Path, $Algorithm) {
                          $Path = (resolve-path $path).providerpath
                          $hash = @{Algorithm = $Algorithm; Path = $Path}
                          use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                            use ($in = (gi $path).OpenRead()) {
                              $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                            }
                          }
                          new-object PSObject -Property $hash
                        }
                      }
                      Write-Verbose "Testing the $Algorithm hash for $path."
                      $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
                      Write-Verbose "`tDesired Hash - '$hash'"
                      Write-Verbose "`tActual Hash  - '$ActualHash'"
                      $Valid = $ActualHash -eq $Hash
                      if (-not $Valid) {
                        Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
                      }
                      return $Valid
                    }

                    function Get-ProjectMetadata {
                      <#
                        .SYNOPSIS
                        Get metadata for a Chef Software, Inc. project
                        .DESCRIPTION
                        Get metadata for project
                        .EXAMPLE
                        iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                        Gets the download url and SHA256 checksum for the latest stable release of Chef.
                        .EXAMPLE
                        iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                        Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
                      #>
                      [cmdletbinding()]
                      param (
                        # Base url to retrieve metadata from.
                        [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                        [string]
                        # Project to install
                        [string]
                        $project = 'chef',
                        # Version of the application to install
                        # This parameter is optional, if not supplied it will provide the latest version,
                        # and if an iteration number is not specified, it will grab the latest available iteration.
                        # Partial version numbers are also acceptable (using v=11
                        # will grab the latest 11.x client which matches the other flags).
                        [string]
                        $version,
                        # Release channel to install from
                        $channel = 'unstable',
                        # The following legacy switches are just aliases for the current channel
                        [switch]
                        $prerelease,
                        [switch]
                        $nightlies,
                        [validateset('auto', 'i386', 'x86_64')]
                        [string]
                        $architecture = 'auto'
                      )

                      # PowerShell is only on Windows ATM
                      $platform = 'windows'
                      Write-Verbose "Platform: $platform"

                      $platform_version = Get-PlatformVersion
                      Write-Verbose "Platform Version: $platform_version"

                      if ($architecture -eq 'auto') {
                        $architecture = Get-PlatformArchitecture
                      }

                      Write-Verbose "Architecture: $architecture"
                      Write-Verbose "Project: $project"


                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/ubuntu/14.04/chef_12.12.7+20160630193837-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 c4efc50ff0d90552f9a2e3bd915b34223f6fa0973401bb3d0687c23e3f955fda" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/mac_os_x/10.9/chef-12.12.7+20160630193837-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7d711ad84db124d266fd049babd46406de640b7007a9f97724b3976b7b231e62" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/mac_os_x/10.10/chef-12.12.7+20160630193837-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7d711ad84db124d266fd049babd46406de640b7007a9f97724b3976b7b231e62" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/mac_os_x/10.11/chef-12.12.7+20160630193837-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7d711ad84db124d266fd049babd46406de640b7007a9f97724b3976b7b231e62" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/ios_xr/6/chef-12.12.7+20160630193837-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 c5762f4aec0b7f3045b5d7c0f938558355e11c2c944d72f0d35d6feb4bdff14c" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/nexus/7/chef-12.12.7+20160630193837-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 0317e6e049cef02ae10d255a67db2b0d33368bdce8bd46f0461bd45c900edafb" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/debian/6/chef_12.12.7+20160630193837-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 08c815fe4e82303c2f8609566fdbf8b384fabd222085f0463e6bae0665c48449" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/debian/7/chef_12.12.7+20160630193837-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 08c815fe4e82303c2f8609566fdbf8b384fabd222085f0463e6bae0665c48449" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/debian/8/chef_12.12.7+20160630193837-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 08c815fe4e82303c2f8609566fdbf8b384fabd222085f0463e6bae0665c48449" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/freebsd/10/chef-12.12.7+20160630193837_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 21bad6295f876282d8bf42b7bda810c3993fe11610b6e1fcd028178af23c23d7" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/ubuntu/12.04/chef_12.12.7+20160630193837-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 a81f2c1ad3638863b95d85018efed51f6b41c03cdfad34d61c719c71bc42b56e" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/ubuntu/14.04/chef_12.12.7+20160630193837-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 a81f2c1ad3638863b95d85018efed51f6b41c03cdfad34d61c719c71bc42b56e" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/freebsd/9/chef-12.12.7+20160630193837_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 aac1ff6e55c08f7d8a567dd7a46fc5d478840296a65a177d2c1639d20ce4c0d5" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/5/chef-12.12.7+20160630193837-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 19452307e7fac66e0238e448b9a9adadb3ad34496f5543a6d4ff49856cba396d" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/7/chef-12.12.7+20160630193837-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 d483abc2a16bcd302f6e8ca53f31764c17d5a1c557ba4db6ebd58c8b7cceca64" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/solaris2/5.10/chef-12.12.7+20160630193837-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 82fd260ad3b1b2ddffdcdeaaf94b406de5b1c9b5311f390ca360c80030fb2912" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/solaris2/5.11/chef-12.12.7+20160630193837-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 82fd260ad3b1b2ddffdcdeaaf94b406de5b1c9b5311f390ca360c80030fb2912" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/6/chef-12.12.7+20160630193837-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 97fef125e287712aab6c7b1d7b65d3ebf10f5ecf7fb0452a927e157985743fe7" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/windows/2008r2/chef-client-12.12.7+20160630193837-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 cd23325eac55966e2549f77b7e505c787f2aa0bda5abc2f20a42bc5a77f4593f" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/ubuntu/12.04/chef_12.12.7+20160630193837-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 617fb4e0ee8d077d502815bad81cbecb8242474b2d00387108b055dc90ce4d59" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/ubuntu/14.04/chef_12.12.7+20160630193837-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 617fb4e0ee8d077d502815bad81cbecb8242474b2d00387108b055dc90ce4d59" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/7/chef-12.12.7+20160630193837-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 c4493918447a7258260e252f76a038666bb4828bc5d7b1ca3015261cfee9834d" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/windows/2012/chef-client-12.12.7+20160630193837-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 cd23325eac55966e2549f77b7e505c787f2aa0bda5abc2f20a42bc5a77f4593f" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/7/chef-12.12.7+20160630193837-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 a65074c9a2e437947e71d67ad5d6e6365891e6aab94360435801fef4534b002a" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/debian/6/chef_12.12.7+20160630193837-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 2627010050c565a988a1e3a3d96790e812710b0903eaf39a37511378777fa35d" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/debian/7/chef_12.12.7+20160630193837-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 2627010050c565a988a1e3a3d96790e812710b0903eaf39a37511378777fa35d" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/debian/8/chef_12.12.7+20160630193837-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 2627010050c565a988a1e3a3d96790e812710b0903eaf39a37511378777fa35d" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/windows/2012r2/chef-client-12.12.7+20160630193837-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 cd23325eac55966e2549f77b7e505c787f2aa0bda5abc2f20a42bc5a77f4593f" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/freebsd/10/chef-12.12.7+20160630193837_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 d4b081c6779e8bb2c05c52a883849b8efed031c74d11e4b310c44f3ec7f80cfb" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/5/chef-12.12.7+20160630193837-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 077e75275ab8c19a53d6fd4d5c70223f73d7937419537cb1959c59a9a7905dd8" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/6/chef-12.12.7+20160630193837-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 f7a420a1911ed2c3594a6618088e1df53b98fa3e983bd54d7e2f38c10ee6c88e" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/windows/2008r2/chef-client-12.12.7+20160630193837-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7d7473cf1d7c05329500906bf7d0376ddd5085b5177615135941d0f69f94754e" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/freebsd/9/chef-12.12.7+20160630193837_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 8db728137b266b620c679105afcd576bd6abaf0a7d8fb84a537bf5ed837929db" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/windows/2012/chef-client-12.12.7+20160630193837-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7d7473cf1d7c05329500906bf7d0376ddd5085b5177615135941d0f69f94754e" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/windows/2012r2/chef-client-12.12.7+20160630193837-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7d7473cf1d7c05329500906bf7d0376ddd5085b5177615135941d0f69f94754e" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/aix/6.1/chef-12.12.7+20160630193837-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 38c83aa5d88a2dd1ac40d821bf645cda87cbae124f2d7cc5d14e66e745a84d03" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/aix/7.1/chef-12.12.7+20160630193837-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 38c83aa5d88a2dd1ac40d821bf645cda87cbae124f2d7cc5d14e66e745a84d03" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/solaris2/5.10/chef-12.12.7+20160630193837-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 b69dae5b265e2c9ffde1860b05d429178dcaec0a225bf42209306dc4439687ab" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/solaris2/5.11/chef-12.12.7+20160630193837-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 b69dae5b265e2c9ffde1860b05d429178dcaec0a225bf42209306dc4439687ab" | out-file "$artifact_info_dir/artifact_info" -Append


                      $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

                      $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                        foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

                      Write-Verbose "Project details: "
                      foreach ($key in $package_metadata.keys) {
                        Write-Verbose "`t$key = $($package_metadata[$key])"
                      }
                      $package_metadata
                    }

                    function Install-Project {
                      <#
                        .SYNOPSIS
                        Install a Chef Software, Inc. product
                        .DESCRIPTION
                        Install a Chef Software, Inc. product
                        .EXAMPLE
                        iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                        Installs the latest stable version of Chef.
                        .EXAMPLE
                        iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                        Installs the latest integration build of the Chef Development Kit
                      #>
                      [cmdletbinding(SupportsShouldProcess=$true)]
                      param (
                        # Project to install
                        [string]
                        $project = 'chef',
                        # Release channel to install from
                        [validateset('current', 'stable', 'unstable')]
                        [string]
                        $channel = 'stable',
                        # Version of the application to install
                        # This parameter is optional, if not supplied it will provide the latest version,
                        # and if an iteration number is not specified, it will grab the latest available iteration.
                        # Partial version numbers are also acceptable (using v=11
                        # will grab the latest 11.x client which matches the other flags).
                        [string]
                        $version,
                        # Full path for the downloaded installer.
                        [string]
                        $filename,
                        # Full path to the location to download the installer
                        [string]
                        $download_directory = $env:temp,
                        # The following legacy switches are just aliases for the current channel
                        [switch]
                        $prerelease,
                        [switch]
                        $nightlies,
                        [validateset('auto', 'i386', 'x86_64')]
                        [string]
                        $architecture = 'auto'
                      )

                      $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

                      if (-not [string]::IsNullOrEmpty($filename)) {
                        $download_directory = split-path $filename
                        $filename = split-path $filename -leaf
                        if ([string]::IsNullOrEmpty($download_directory)) {
                          $download_directory = $pwd
                        }
                      }
                      else {
                        $filename = ($package_metadata.url -split '/')[-1]
                      }
                      Write-Verbose "Download directory: $download_directory"
                      Write-Verbose "Filename: $filename"

                      if (-not (test-path $download_directory)) {
                        mkdir $download_directory
                      }
                      $download_directory = (resolve-path $download_directory).providerpath
                      $download_destination = join-path $download_directory $filename

                      if ((test-path $download_destination) -and
                        (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                        Write-Verbose "Found existing valid installer at $download_destination."
                      }
                      else {
                        if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                          Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                          Get-WebContent $package_metadata.url -filepath $download_destination
                        }
                      }

                      if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                        if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                          Write-Host "Installing $project from $download_destination"
                          $installingProject = $True
                          $installAttempts = 0
                          while ($installingProject) {
                            $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                            $p.WaitForExit()
                            if ($p.ExitCode -eq 1618) {
                              Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                              continue
                            } elseif ($p.ExitCode -ne 0) {
                              throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                            }
                            $installingProject = $False
                          }
                        }
                        else {
                          throw "Failed to validate the downloaded installer for $project."
                        }
                      }
                    }
                    set-alias install -value Install-Project
                    export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

                    }

                    install -project chef -version 12.12.7+20160630193837 -channel unstable
                    )
                    D      creating hash for file $env:TEMP/powershell-windows-2012r2-long_script.ps1
                    D      Running check_files.ps1
                    D      @{
                    D        "dfec0130a5d1c856df5a59c7a1695b6a" = @{
                    D          "target" = "$env:TEMP/powershell-windows-2012r2-long_script.ps1";
                    D          "src_basename" = "powershell-windows-2012r2-long_script.ps1";
                    D          "dst" = "$env:TEMP/powershell-windows-2012r2-long_script.ps1"
                    D        }
                    D      }
                    D      Parsing CSV Response
                    D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
                    "False","dfec0130a5d1c856df5a59c7a1695b6a",,"True","False","False"

                    D      Uploading /tmp/cheftest/kitchen-long-script20160630-14886-1s5yuhz/powershell-windows-2012r2-long_script.ps1 to encoded tmpfile $env:TEMP\b64-dfec0130a5d1c856df5a59c7a1695b6a.txt
                    D      Finished uploading /tmp/cheftest/kitchen-long-script20160630-14886-1s5yuhz/powershell-windows-2012r2-long_script.ps1 to encoded tmpfile $env:TEMP\b64-dfec0130a5d1c856df5a59c7a1695b6a.txt (40.316 KB over 6 chunks) in (0m0.52s)
                    D      Running decode_files.ps1
                    D      @{
                    D        "$env:TEMP\b64-dfec0130a5d1c856df5a59c7a1695b6a.txt" = @{
                    D          "dst" = "$env:TEMP/powershell-windows-2012r2-long_script.ps1"
                    D        }
                    D      }
                    D      Parsing CSV Response
                    D      "src_md5","tmpzip","verifies","tmpfile","dst_md5","dst"
                    "dfec0130a5d1c856df5a59c7a1695b6a",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-dfec0130a5d1c856df5a59c7a1695b6a.txt","dfec0130a5d1c856df5a59c7a1695b6a","C:\Users\ADMINI~1\AppData\Local\Temp/powershell-windows-2012r2-long_script.ps1"

                    D      Uploaded 1 items dirty_check: (0m0.67s) stream_files: (0m0.52s) decode: (0m0.81s)

                           ModuleType Version    Name                                ExportedCommands
                           ---------- -------    ----                                ----------------
                           Script     0.0        Omnitruck                           {Get-ProjectMetada...
                           Installing chef from C:\Users\ADMINI~1\AppData\Local\Temp\chef-client-12.12.7+20160630193837-1-x64.msi
                    D      [WinRM] retrying receive request after timeout


                    D      [WinRM] negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($dirs = @("$env:TEMP\kitchen\clients", "$env:TEMP\kitchen\cookbooks", "$env:TEMP\kitchen\data", "$env:TEMP\kitchen\data_bags", "$env:TEMP\kitchen\encrypted_data_bag_secret", "$env:TEMP\kitchen\environments", "$env:TEMP\kitchen\roles")
                    $root_path = "$env:TEMP\kitchen"

                    Function Delete-AllDirs($dirs) {
                      $dirs | ForEach-Object {
                        if (Test-Path ($path = Unresolve-Path $_)) { Remove-Item $path -Recurse -Force }
                      }
                    }

                    Function Unresolve-Path($p) {
                      if ($p -eq $null) { return $null }
                      else { return $ExecutionContext.SessionState.Path.GetUnresolvedProviderPathFromPSPath($p) }
                    }

                    Function Make-RootPath($p) {
                      $p = Unresolve-Path $p
                      if (-Not (Test-Path $p)) { New-Item $p -ItemType directory | Out-Null }
                    }

                    Delete-AllDirs $dirs
                    Make-RootPath $root_path
                    )
                           Transferring files to <powershell-windows-2012r2>
                    D      creating hash for file $env:TEMP\kitchen
                    D      creating hash for file $env:TEMP\kitchen
                    D      creating hash for directory $env:TEMP\kitchen
                    D      Populating files
                    D      === All files added.
                    D      creating hash for file $env:TEMP\kitchen
                    D      creating hash for directory $env:TEMP\kitchen
                    D      Populating files
                    D      +++ Adding chef_handler/README.md
                    D      +++ Adding chef_handler/attributes/default.rb
                    D      +++ Adding chef_handler/files/default/handlers/README
                    D      +++ Adding chef_handler/libraries/helpers.rb
                    D      +++ Adding chef_handler/libraries/matchers.rb
                    D      +++ Adding chef_handler/metadata.json
                    D      +++ Adding chef_handler/providers/default.rb
                    D      +++ Adding chef_handler/recipes/default.rb
                    D      +++ Adding chef_handler/recipes/json_file.rb
                    D      +++ Adding chef_handler/resources/default.rb
                    D      +++ Adding minimal/metadata.json
                    D      +++ Adding minimal/recipes/default.rb
                    D      +++ Adding ms_dotnet/README.md
                    D      +++ Adding ms_dotnet/attributes/default.rb
                    D      +++ Adding ms_dotnet/attributes/ms_dotnet2.rb
                    D      +++ Adding ms_dotnet/attributes/ms_dotnet3.rb
                    D      +++ Adding ms_dotnet/attributes/ms_dotnet4.rb
                    D      +++ Adding ms_dotnet/libraries/windows_version_helper.rb
                    D      +++ Adding ms_dotnet/metadata.json
                    D      +++ Adding ms_dotnet/recipes/default.rb
                    D      +++ Adding ms_dotnet/recipes/ms_dotnet2.rb
                    D      +++ Adding ms_dotnet/recipes/ms_dotnet3.rb
                    D      +++ Adding ms_dotnet/recipes/ms_dotnet4.rb
                    D      +++ Adding ms_dotnet/recipes/regiis.rb
                    D      +++ Adding powershell/README.md
                    D      +++ Adding powershell/attributes/bits_4.rb
                    D      +++ Adding powershell/attributes/config_lcm.rb
                    D      +++ Adding powershell/attributes/default.rb
                    D      +++ Adding powershell/attributes/powershell2.rb
                    D      +++ Adding powershell/attributes/powershell3.rb
                    D      +++ Adding powershell/attributes/powershell4.rb
                    D      +++ Adding powershell/attributes/powershell5.rb
                    D      +++ Adding powershell/libraries/powershell_module_provider.rb
                    D      +++ Adding powershell/libraries/powershell_module_resource.rb
                    D      +++ Adding powershell/libraries/powershell_version.rb
                    D      +++ Adding powershell/metadata.json
                    D      +++ Adding powershell/providers/default.rb
                    D      +++ Adding powershell/recipes/default.rb
                    D      +++ Adding powershell/recipes/disable_lcm.rb
                    D      +++ Adding powershell/recipes/dsc.rb
                    D      +++ Adding powershell/recipes/enable_dsc_script.rb
                    D      +++ Adding powershell/recipes/enable_lcm.rb
                    D      +++ Adding powershell/recipes/powershell2.rb
                    D      +++ Adding powershell/recipes/powershell3.rb
                    D      +++ Adding powershell/recipes/powershell4.rb
                    D      +++ Adding powershell/recipes/powershell5.rb
                    D      +++ Adding powershell/recipes/powershell_module.rb
                    D      +++ Adding powershell/recipes/windows_reboot.rb
                    D      +++ Adding powershell/recipes/winrm.rb
                    D      +++ Adding powershell/resources/default.rb
                    D      +++ Adding windows/README.md
                    D      +++ Adding windows/attributes/default.rb
                    D      +++ Adding windows/files/default/handlers/windows_reboot_handler.rb
                    D      +++ Adding windows/libraries/feature_base.rb
                    D      +++ Adding windows/libraries/matchers.rb
                    D      +++ Adding windows/libraries/powershell_helper.rb
                    D      +++ Adding windows/libraries/powershell_out.rb
                    D      +++ Adding windows/libraries/registry_helper.rb
                    D      +++ Adding windows/libraries/version.rb
                    D      +++ Adding windows/libraries/windows_architecture_helper.rb
                    D      +++ Adding windows/libraries/windows_helper.rb
                    D      +++ Adding windows/libraries/windows_package.rb
                    D      +++ Adding windows/libraries/windows_privileged.rb
                    D      +++ Adding windows/libraries/wmi_helper.rb
                    D      +++ Adding windows/metadata.json
                    D      +++ Adding windows/providers/auto_run.rb
                    D      +++ Adding windows/providers/batch.rb
                    D      +++ Adding windows/providers/certificate.rb
                    D      +++ Adding windows/providers/certificate_binding.rb
                    D      +++ Adding windows/providers/feature_dism.rb
                    D      +++ Adding windows/providers/feature_powershell.rb
                    D      +++ Adding windows/providers/feature_servermanagercmd.rb
                    D      +++ Adding windows/providers/font.rb
                    D      +++ Adding windows/providers/http_acl.rb
                    D      +++ Adding windows/providers/pagefile.rb
                    D      +++ Adding windows/providers/path.rb
                    D      +++ Adding windows/providers/printer.rb
                    D      +++ Adding windows/providers/printer_port.rb
                    D      +++ Adding windows/providers/reboot.rb
                    D      +++ Adding windows/providers/registry.rb
                    D      +++ Adding windows/providers/shortcut.rb
                    D      +++ Adding windows/providers/task.rb
                    D      +++ Adding windows/providers/zipfile.rb
                    D      +++ Adding windows/recipes/default.rb
                    D      +++ Adding windows/recipes/reboot_handler.rb
                    D      +++ Adding windows/resources/auto_run.rb
                    D      +++ Adding windows/resources/batch.rb
                    D      +++ Adding windows/resources/certificate.rb
                    D      +++ Adding windows/resources/certificate_binding.rb
                    D      +++ Adding windows/resources/feature.rb
                    D      +++ Adding windows/resources/font.rb
                    D      +++ Adding windows/resources/http_acl.rb
                    D      +++ Adding windows/resources/pagefile.rb
                    D      +++ Adding windows/resources/path.rb
                    D      +++ Adding windows/resources/printer.rb
                    D      +++ Adding windows/resources/printer_port.rb
                    D      +++ Adding windows/resources/reboot.rb
                    D      +++ Adding windows/resources/registry.rb
                    D      +++ Adding windows/resources/shortcut.rb
                    D      +++ Adding windows/resources/task.rb
                    D      +++ Adding windows/resources/zipfile.rb
                    D      === All files added.
                    D      Running check_files.ps1
                    D      @{
                    D        "9768ea17a1471084212c406c34a8636d" = @{
                    D          "target" = "$env:TEMP\kitchen";
                    D          "src_basename" = "dna.json";
                    D          "dst" = "$env:TEMP\kitchen"
                    D        };
                    D        "d2f1dba7153c3ceee9427ecc1c3ca078" = @{
                    D          "target" = "$env:TEMP\kitchen";
                    D          "src_basename" = "client.rb";
                    D          "dst" = "$env:TEMP\kitchen"
                    D        };
                    D        "76cdb2bad9582d23c1f6f4d868218d6c" = @{
                    D          "target" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip";
                    D          "src_basename" = "cache";
                    D          "dst" = "$env:TEMP\kitchen\cache"
                    D        };
                    D        "49abb94825cb80b9a9cd59e5f76daf4a" = @{
                    D          "target" = "$env:TEMP\kitchen";
                    D          "src_basename" = "validation.pem";
                    D          "dst" = "$env:TEMP\kitchen"
                    D        };
                    D        "a0d0950fa969e51c8583c88e6339a8de" = @{
                    D          "target" = "$env:TEMP\winrm-upload\tmpzip-a0d0950fa969e51c8583c88e6339a8de.zip";
                    D          "src_basename" = "cookbooks";
                    D          "dst" = "$env:TEMP\kitchen\cookbooks"
                    D        }
                    D      }
                    D      Parsing CSV Response
                    D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
                    "False","76cdb2bad9582d23c1f6f4d868218d6c",,"True","False","False"
                    "False","49abb94825cb80b9a9cd59e5f76daf4a",,"True","False","True"
                    "False","a0d0950fa969e51c8583c88e6339a8de",,"True","False","False"
                    "False","9768ea17a1471084212c406c34a8636d",,"True","False","True"
                    "False","d2f1dba7153c3ceee9427ecc1c3ca078",,"True","False","True"

                    D      Uploading /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s/dna.json to encoded tmpfile $env:TEMP\b64-9768ea17a1471084212c406c34a8636d.txt
                    D      Finished uploading /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s/dna.json to encoded tmpfile $env:TEMP\b64-9768ea17a1471084212c406c34a8636d.txt (0.128 KB over 1 chunks) in (0m0.11s)
                    D      Uploading /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s/client.rb to encoded tmpfile $env:TEMP\b64-d2f1dba7153c3ceee9427ecc1c3ca078.txt
                    D      Finished uploading /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s/client.rb to encoded tmpfile $env:TEMP\b64-d2f1dba7153c3ceee9427ecc1c3ca078.txt (1.108 KB over 1 chunks) in (0m0.10s)
                    D      Uploading /tmp/cheftest/tmpzip-20160630-14886-hfu1hd.zip to encoded tmpfile $env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt
                    D      Finished uploading /tmp/cheftest/tmpzip-20160630-14886-hfu1hd.zip to encoded tmpfile $env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt (0.028 KB over 1 chunks) in (0m0.06s)
                    D      Uploading /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s/validation.pem to encoded tmpfile $env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt
                    D      Finished uploading /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s/validation.pem to encoded tmpfile $env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt (2.236 KB over 1 chunks) in (0m0.11s)
                    D      Uploading /tmp/cheftest/tmpzip-20160630-14886-1qxo2ts.zip to encoded tmpfile $env:TEMP\b64-a0d0950fa969e51c8583c88e6339a8de.txt
                    D      Finished uploading /tmp/cheftest/tmpzip-20160630-14886-1qxo2ts.zip to encoded tmpfile $env:TEMP\b64-a0d0950fa969e51c8583c88e6339a8de.txt (189.124 KB over 24 chunks) in (0m2.10s)
                    D      Running decode_files.ps1
                    D      @{
                    D        "$env:TEMP\b64-9768ea17a1471084212c406c34a8636d.txt" = @{
                    D          "dst" = "$env:TEMP\kitchen/dna.json"
                    D        };
                    D        "$env:TEMP\b64-d2f1dba7153c3ceee9427ecc1c3ca078.txt" = @{
                    D          "dst" = "$env:TEMP\kitchen/client.rb"
                    D        };
                    D        "$env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt" = @{
                    D          "dst" = "$env:TEMP\kitchen\cache";
                    D          "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip"
                    D        };
                    D        "$env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt" = @{
                    D          "dst" = "$env:TEMP\kitchen/validation.pem"
                    D        };
                    D        "$env:TEMP\b64-a0d0950fa969e51c8583c88e6339a8de.txt" = @{
                    D          "dst" = "$env:TEMP\kitchen\cookbooks";
                    D          "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-a0d0950fa969e51c8583c88e6339a8de.zip"
                    D        }
                    D      }
                    D      Parsing CSV Response
                    D      "src_md5","tmpzip","verifies","tmpfile","dst_md5","dst"
                    "76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip","True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt","76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache"
                    "a0d0950fa969e51c8583c88e6339a8de","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-a0d0950fa969e51c8583c88e6339a8de.zip","True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-a0d0950fa969e51c8583c88e6339a8de.txt","a0d0950fa969e51c8583c88e6339a8de","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cookbooks"
                    "d2f1dba7153c3ceee9427ecc1c3ca078",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-d2f1dba7153c3ceee9427ecc1c3ca078.txt","d2f1dba7153c3ceee9427ecc1c3ca078","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/client.rb"
                    "49abb94825cb80b9a9cd59e5f76daf4a",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt","49abb94825cb80b9a9cd59e5f76daf4a","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/validation.pem"
                    "9768ea17a1471084212c406c34a8636d",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-9768ea17a1471084212c406c34a8636d.txt","9768ea17a1471084212c406c34a8636d","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/dna.json"

                    D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160630-14886-hfu1hd.zip
                    D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160630-14886-1qxo2ts.zip
                    D      Uploaded 5 items dirty_check: (0m1.26s) stream_files: (0m2.51s) decode: (0m1.78s)
                    D      Transfer complete
                    D      Attempting to execute command - try 1 of 1.
                    D      [WinRM] negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($env:PATH = [System.Environment]::GetEnvironmentVariable("PATH","Machine")

                    & $env:systemdrive\opscode\chef\bin\chef-client.bat --local-mode --config $env:TEMP\kitchen\client.rb --log_level auto --force-formatter --no-color --json-attributes $env:TEMP\kitchen\dna.json --chef-zero-port 8889 ; exit $LastExitCode)
                           Starting Chef Client, version 12.12.7
                           Creating a new client identity for powershell-windows-2012r2 using the validator key.
                           resolving cookbooks for run list: ["powershell::powershell2"]
                           Synchronizing Cookbooks:
                             - powershell (3.3.2)
                             - windows (1.44.1)
                             - ms_dotnet (2.6.2)
                             - chef_handler (1.4.0)
                           Installing Cookbook Gems:
                           Compiling Cookbooks...
                           [2016-06-30T20:44:33+00:00] WARN: PowerShell 2.0 is not supported or already installed on this version of Windows: 6.3.9600
                           Converging 8 resources
                           Recipe: windows::default
                             * chef_gem[win32-api] action install (up to date)
                             * chef_gem[win32-service] action install (up to date)
                             * chef_gem[windows-api] action install (up to date)
                             * chef_gem[windows-pr] action install
                               - install version 1.2.5 of package windows-pr
                             * chef_gem[win32-dir] action install (up to date)
                             * chef_gem[win32-event] action install (up to date)
                             * chef_gem[win32-mutex] action install (up to date)
                           Recipe: ms_dotnet::ms_dotnet2
                             * log[.NET Framework 2.0 is already enabled on this version of Windows] action write[2016-06-30T20:44:38+00:00] WARN: .NET Framework 2.0 is already enabled on this version of Windows


                           Starting audit phase

                           Finished in 0 seconds (files took 0.60937 seconds to load)
                           0 examples, 0 failures
                           Auditing complete

                           Running handlers:
                           Running handlers complete
                           Chef Client finished, 2/8 resources updated in 38 seconds
                           [2016-06-30T20:44:39+00:00] ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json
                    $$$$$$ C:/opscode/chef/embedded/lib/ruby/2.1.0/x64-mingw32/dl.so: warning: already initialized constant DL::RUBY_FREE
                    $$$$$$ C:/opscode/chef/embedded/lib/ruby/gems/2.1.0/gems/net-ssh-3.2.0/lib/net/ssh/authentication/pageant.rb:16: warning: previous definition of RUBY_FREE was here
                    $$$$$$ DL is deprecated, please use Fiddle
                    D      Cleaning up local sandbox in /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s
                           Finished converging <powershell-windows-2012r2> (2m28.04s).
                    -----> Kitchen is finished. (7m40.80s)
                    D      [WinRM] closing remote shell B815EEE4-82B4-4984-8906-195584DDE595 on http://10.194.8.253:5985/wsman
                    D      [WinRM] remote shell B815EEE4-82B4-4984-8906-195584DDE595 closed
                    STDERR: [BUG] Segmentation fault at 0x000000000002f0
                    ruby 2.1.6p336 (2015-04-13 revision 50298) [x86_64-linux]
                    ---- End output of bundle exec kitchen converge  -c -l debug ----
                    Ran bundle exec kitchen converge  -c -l debug returned

                    Resource Declaration:
                    ---------------------
                    # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/libraries/top_cookbooks.rb

                     23:     cookbook_kitchen "#{command} powershell" do
                     24:     end
                     25:

                    Compiled Resource:
                    ------------------
                    # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/libraries/top_cookbooks.rb:23:in `block in <class:TopCookbooks>'

                    cookbook_kitchen("converge powershell") do
                      action [:run]
                      updated true
                      updated_by_last_action true
                      retries 0
                      retry_delay 2
                      default_guard_interpreter :default
                      declared_type :cookbook_kitchen
                      cookbook_name "acceptance-cookbook"
                      repository "https://github.com/chef-cookbooks/powershell.git"
                      test_cookbook "powershell"
                      repository_root "/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/powershell"
                      branch "master"
                      command "converge"
                      kitchen_options "-c -l debug"
                      kitchen_dir "/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/powershell/"
                      chef_product "chef"
                      env {"BUNDLE_GEMFILE"=>"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/Gemfile", "KITCHEN_YAML"=>"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/.kitchen.powershell.yml"}
                    end


                  ================================================================================
                  Error executing action `run` on resource 'top_cookbooks[converge]'
                  ================================================================================

                  Mixlib::ShellOut::ShellCommandFailed
                  ------------------------------------
                  cookbook_kitchen[converge powershell] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/libraries/top_cookbooks.rb line 23) had an error: Mixlib::ShellOut::ShellCommandFailed: execute[bundle exec kitchen converge  -c -l debug] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 37) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received ''
                  ---- Begin output of bundle exec kitchen converge  -c -l debug ----
                  STDOUT: -----> Starting Kitchen (v1.10.2)
                  D      Berksfile found at /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/powershell/Berksfile, loading Berkshelf
                  D      Berkshelf 4.3.5 library loaded
                  D      winrm requested, loading winrm gem (["~> 1.6"])
                  D      winrm is loaded.
                  D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
                  D      winrm-fs is loaded.
                  -----> Creating <powershell-windows-2012r2>...
                  D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                  D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                  D      Search returned 3 images:
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
                  D      Image for powershell-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                         Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
                  D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
                         If you are not using an account that qualifies under the AWS
                  free-tier, you may be charged to run these suites. The charge
                  should be minimal, but neither Test Kitchen nor its maintainers
                  are responsible for your incurred costs.

                  D      Creating EC2 instance in region us-west-2 with properties:
                  D      - instance_type = "m3.large"
                  D      - ebs_optimized = false
                  D      - image_id = "ami-8d0acfed"
                  D      - key_name = "jenkins"
                  D      - subnet_id = "subnet-19ac017c"
                  D      - private_ip_address = nil
                  D      - placement = {:availability_zone=>"us-west-2a"}
                  D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                  D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                         Instance <i-c1924a6e> requested.
                         Polling AWS for existence, attempt 0...
                         Attempting to tag the instance, 0 retries
                         EC2 instance <i-c1924a6e> created.
                         Waited 0/300s for instance <i-c1924a6e> to become ready.
                         Waited 5/300s for instance <i-c1924a6e> to become ready.
                         Waited 10/300s for instance <i-c1924a6e> to become ready.
                         Waited 15/300s for instance <i-c1924a6e> to become ready.
                         Waited 20/300s for instance <i-c1924a6e> to become ready.
                         Waited 25/300s for instance <i-c1924a6e> to become ready.
                         Waited 30/300s for instance <i-c1924a6e> to become ready.
                         Waited 35/300s for instance <i-c1924a6e> to become ready.
                         Waited 40/300s for instance <i-c1924a6e> to become ready.
                         Waited 45/300s for instance <i-c1924a6e> to become ready.
                         Waited 50/300s for instance <i-c1924a6e> to become ready.
                         Waited 55/300s for instance <i-c1924a6e> to become ready.
                         Waited 60/300s for instance <i-c1924a6e> to become ready.
                         Waited 65/300s for instance <i-c1924a6e> to become ready.
                         Waited 70/300s for instance <i-c1924a6e> to become ready.
                         Waited 75/300s for instance <i-c1924a6e> to become ready.
                         Waited 80/300s for instance <i-c1924a6e> to become ready.
                         Waited 85/300s for instance <i-c1924a6e> to become ready.
                         Waited 90/300s for instance <i-c1924a6e> to become ready.
                         Waited 95/300s for instance <i-c1924a6e> to become ready.
                         Waited 100/300s for instance <i-c1924a6e> to become ready.
                         Waited 105/300s for instance <i-c1924a6e> to become ready.
                         Waited 110/300s for instance <i-c1924a6e> to become ready.
                  D      Console output: ---
                  2016/06/30 20:38:39Z: EC2ConfigMonitorState: 0
                  2016/06/30 20:38:39Z: Windows sysprep configuration complete.
                  2016/06/30 20:38:43Z: AMI Origin Version: 2016.06.15
                  2016/06/30 20:38:43Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
                  2016/06/30 20:38:43Z: OS: Microsoft Windows NT 6.3.9600
                  2016/06/30 20:38:43Z: OsVersion: 6.3
                  2016/06/30 20:38:43Z: OsProductName: Windows Server 2012 R2 Standard
                  2016/06/30 20:38:43Z: OsBuildLabEx: 9600.18292.amd64fre.winblue_ltsb.160330-1744
                  2016/06/30 20:38:43Z: Language: en-US
                  2016/06/30 20:38:43Z: TimeZone: Coordinated Universal Time
                  2016/06/30 20:38:43Z: Offset: UTC 00:00:00
                  2016/06/30 20:38:43Z: EC2 Agent: Ec2Config service v3.17.1032
                  2016/06/30 20:38:46Z: Message: Waiting for meta-data accessibility...
                  2016/06/30 20:38:46Z: Message: Meta-data is now available.
                  2016/06/30 20:38:47Z: AMI-ID: ami-8d0acfed
                  2016/06/30 20:38:47Z: Instance-ID: i-c1924a6e
                  2016/06/30 20:38:49Z: Driver: AWS PV Network Device v7.3.2.0
                  2016/06/30 20:38:49Z: Driver: AWS PV Storage Host Adapter v7.3.2.0
                  2016/06/30 20:38:49Z: Ec2SetPassword: Enabled
                  2016/06/30 20:38:49Z: RDPCERTIFICATE-SUBJECTNAME: WIN-3GFI3EJG37H
                  2016/06/30 20:38:49Z: RDPCERTIFICATE-THUMBPRINT: 0B6CFA83E9B5E95E87F4343FC0E3CB6B669AA94C
                  2016/06/30 20:38:52Z: Username: Administrator
                  2016/06/30 20:38:52Z: Password: <Password>
                  uAvOwElr/lk5D+3x7ywutccVnJCPzSA5FnaGSUAdus2WcomrHoU9R27qwaBPg80k2Kf3BhXdu92k6c2Nc2Y3EIytvrtQPLCn64kfxQvacL66nXHQf8tqEw6GB2ZItxqe1VK2sad1uRZt0/apRJy0q1o5ClG5qCzT0thy20y5+Ckcc7E8NjScyPnIvS33ziOuIuxtXYxtvx1S6FwdEqa6DQiC3mG7wZbzSoXAIjqWb9vhLxhL3pvpIRtIC26fgNW80HWnAFB0teG1CATlRM4yY5R3BCpy83ybVKguC3G2npq11pRMc8W6jWHBTwPLcztYUnuJxND9OFNFX0xBRk2/+Q==
                  </Password>
                  2016/06/30 20:38:53Z: Message: Windows is Ready to use

                         Waited 0/300s for instance <i-c1924a6e> to fetch windows admin password.
                         Retrieved Windows password for instance <i-c1924a6e>.
                         EC2 instance <i-c1924a6e> ready.
                         [WinRM] connection failed. retrying in 3 seconds: #<HTTPClient::ConnectTimeoutError: execution expired>
                         [WinRM] connection failed. retrying in 3 seconds: #<HTTPClient::ConnectTimeoutError: execution expired>
                         [WinRM] connection failed. retrying in 3 seconds: #<HTTPClient::ConnectTimeoutError: execution expired>
                  D      [WinRM] opening remote shell on http://10.194.8.253:5985/wsman
                  D      [WinRM] remote shell B815EEE4-82B4-4984-8906-195584DDE595 is open on http://10.194.8.253:5985/wsman
                  D      [WinRM] negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
                  ')
                         [WinRM] Established

                  D      [WinRM] reusing existing connection negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                  D      [WinRM] negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)


                             Directory: C:\chef\ohai\hints


                         Mode                LastWriteTime     Length Name
                         ----                -------------     ------ ----
                         -a---         6/30/2016   8:42 PM          0 ec2.json


                  D      ec2:create '10.194.8.253'
                         Finished creating <powershell-windows-2012r2> (5m11.22s).
                  -----> Converging <powershell-windows-2012r2>...
                         Preparing files for transfer
                  D      Creating local sandbox in /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s
                         Preparing dna.json
                  D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>["recipe[powershell::powershell2]"]}
                         Resolving cookbook dependencies with Berkshelf 4.3.5...
                  D      Using Berksfile from /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/powershell/Berksfile
                         Removing non-cookbook files before transfer
                         Preparing validation.pem
                  D      Using a dummy validation.pem
                         Preparing client.rb
                  D      Creating client.rb from {:node_name=>"powershell-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                  D      [WinRM] reusing existing connection negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                  D      [WinRM] negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
                  function Get-PlatformVersion {
                    switch -regex ((get-wmiobject win32_operatingsystem).version) {
                      '10\.0\.\d+' {$platform_version = '2012r2'}
                      '6\.3\.\d+'  {$platform_version = '2012r2'}
                      '6\.2\.\d+'  {$platform_version = '2012'}
                      '6\.1\.\d+'  {$platform_version = '2008r2'}
                      '6\.0\.\d+'  {$platform_version = '2008'}
                    }
                    return $platform_version
                  }

                  function Get-PlatformArchitecture {
                    if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                      $architecture = 'x86_64'
                    } else {
                      $architecture = 'i386'
                    }
                    return $architecture
                  }

                  function New-Uri {
                    param ($baseuri, $newuri)

                    try {
                    new-object System.Uri $baseuri, $newuri
                    }
                    catch [System.Management.Automation.MethodInvocationException]{
                      Write-Error "$($_.exception.message)"
                      throw $_.exception
                    }
                  }

                  function Get-WebContent {
                    param ($uri, $filepath)
                    $proxy = New-Object -TypeName System.Net.WebProxy
                    $wc = new-object System.Net.WebClient
                    $proxy.Address = $env:http_proxy
                    $wc.Proxy = $proxy

                    try {
                      if ([string]::IsNullOrEmpty($filepath)) {
                        $wc.downloadstring($uri)
                      }
                      else {
                        $wc.downloadfile($uri, $filepath)
                      }
                    }
                    catch {
                      $exception = $_.Exception
                      Write-Host "There was an error: "
                      do {
                        Write-Host "`t$($exception.message)"
                        $exception = $exception.innerexception
                      } while ($exception)
                      throw "Failed to download from $uri."
                    }
                  }

                  function Test-ProjectPackage {
                    [cmdletbinding()]
                    param ($Path, $Algorithm = 'SHA256', $Hash)

                    if (-not (get-command get-filehash))   {
                      function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                      function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                      function Get-FileHash ($Path, $Algorithm) {
                        $Path = (resolve-path $path).providerpath
                        $hash = @{Algorithm = $Algorithm; Path = $Path}
                        use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                          use ($in = (gi $path).OpenRead()) {
                            $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                          }
                        }
                        new-object PSObject -Property $hash
                      }
                    }
                    Write-Verbose "Testing the $Algorithm hash for $path."
                    $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
                    Write-Verbose "`tDesired Hash - '$hash'"
                    Write-Verbose "`tActual Hash  - '$ActualHash'"
                    $Valid = $ActualHash -eq $Hash
                    if (-not $Valid) {
                      Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
                    }
                    return $Valid
                  }

                  function Get-ProjectMetadata {
                    <#
                      .SYNOPSIS
                      Get metadata for a Chef Software, Inc. project
                      .DESCRIPTION
                      Get metadata for project
                      .EXAMPLE
                      iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                      Gets the download url and SHA256 checksum for the latest stable release of Chef.
                      .EXAMPLE
                      iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                      Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
                    #>
                    [cmdletbinding()]
                    param (
                      # Base url to retrieve metadata from.
                      [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                      [string]
                      # Project to install
                      [string]
                      $project = 'chef',
                      # Version of the application to install
                      # This parameter is optional, if not supplied it will provide the latest version,
                      # and if an iteration number is not specified, it will grab the latest available iteration.
                      # Partial version numbers are also acceptable (using v=11
                      # will grab the latest 11.x client which matches the other flags).
                      [string]
                      $version,
                      # Release channel to install from
                      $channel = 'unstable',
                      # The following legacy switches are just aliases for the current channel
                      [switch]
                      $prerelease,
                      [switch]
                      $nightlies,
                      [validateset('auto', 'i386', 'x86_64')]
                      [string]
                      $architecture = 'auto'
                    )

                    # PowerShell is only on Windows ATM
                    $platform = 'windows'
                    Write-Verbose "Platform: $platform"

                    $platform_version = Get-PlatformVersion
                    Write-Verbose "Platform Version: $platform_version"

                    if ($architecture -eq 'auto') {
                      $architecture = Get-PlatformArchitecture
                    }

                    Write-Verbose "Architecture: $architecture"
                    Write-Verbose "Project: $project"


                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/ubuntu/14.04/chef_12.12.7+20160630193837-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c4efc50ff0d90552f9a2e3bd915b34223f6fa0973401bb3d0687c23e3f955fda" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/mac_os_x/10.9/chef-12.12.7+20160630193837-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7d711ad84db124d266fd049babd46406de640b7007a9f97724b3976b7b231e62" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/mac_os_x/10.10/chef-12.12.7+20160630193837-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7d711ad84db124d266fd049babd46406de640b7007a9f97724b3976b7b231e62" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/mac_os_x/10.11/chef-12.12.7+20160630193837-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7d711ad84db124d266fd049babd46406de640b7007a9f97724b3976b7b231e62" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/ios_xr/6/chef-12.12.7+20160630193837-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c5762f4aec0b7f3045b5d7c0f938558355e11c2c944d72f0d35d6feb4bdff14c" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/nexus/7/chef-12.12.7+20160630193837-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 0317e6e049cef02ae10d255a67db2b0d33368bdce8bd46f0461bd45c900edafb" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/debian/6/chef_12.12.7+20160630193837-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 08c815fe4e82303c2f8609566fdbf8b384fabd222085f0463e6bae0665c48449" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/debian/7/chef_12.12.7+20160630193837-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 08c815fe4e82303c2f8609566fdbf8b384fabd222085f0463e6bae0665c48449" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/debian/8/chef_12.12.7+20160630193837-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 08c815fe4e82303c2f8609566fdbf8b384fabd222085f0463e6bae0665c48449" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/freebsd/10/chef-12.12.7+20160630193837_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 21bad6295f876282d8bf42b7bda810c3993fe11610b6e1fcd028178af23c23d7" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/ubuntu/12.04/chef_12.12.7+20160630193837-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 a81f2c1ad3638863b95d85018efed51f6b41c03cdfad34d61c719c71bc42b56e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/ubuntu/14.04/chef_12.12.7+20160630193837-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 a81f2c1ad3638863b95d85018efed51f6b41c03cdfad34d61c719c71bc42b56e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/freebsd/9/chef-12.12.7+20160630193837_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 aac1ff6e55c08f7d8a567dd7a46fc5d478840296a65a177d2c1639d20ce4c0d5" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/5/chef-12.12.7+20160630193837-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 19452307e7fac66e0238e448b9a9adadb3ad34496f5543a6d4ff49856cba396d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/7/chef-12.12.7+20160630193837-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 d483abc2a16bcd302f6e8ca53f31764c17d5a1c557ba4db6ebd58c8b7cceca64" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/solaris2/5.10/chef-12.12.7+20160630193837-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 82fd260ad3b1b2ddffdcdeaaf94b406de5b1c9b5311f390ca360c80030fb2912" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/solaris2/5.11/chef-12.12.7+20160630193837-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 82fd260ad3b1b2ddffdcdeaaf94b406de5b1c9b5311f390ca360c80030fb2912" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/6/chef-12.12.7+20160630193837-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 97fef125e287712aab6c7b1d7b65d3ebf10f5ecf7fb0452a927e157985743fe7" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/windows/2008r2/chef-client-12.12.7+20160630193837-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 cd23325eac55966e2549f77b7e505c787f2aa0bda5abc2f20a42bc5a77f4593f" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/ubuntu/12.04/chef_12.12.7+20160630193837-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 617fb4e0ee8d077d502815bad81cbecb8242474b2d00387108b055dc90ce4d59" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/ubuntu/14.04/chef_12.12.7+20160630193837-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 617fb4e0ee8d077d502815bad81cbecb8242474b2d00387108b055dc90ce4d59" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/7/chef-12.12.7+20160630193837-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c4493918447a7258260e252f76a038666bb4828bc5d7b1ca3015261cfee9834d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/windows/2012/chef-client-12.12.7+20160630193837-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 cd23325eac55966e2549f77b7e505c787f2aa0bda5abc2f20a42bc5a77f4593f" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/7/chef-12.12.7+20160630193837-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 a65074c9a2e437947e71d67ad5d6e6365891e6aab94360435801fef4534b002a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/debian/6/chef_12.12.7+20160630193837-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 2627010050c565a988a1e3a3d96790e812710b0903eaf39a37511378777fa35d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/debian/7/chef_12.12.7+20160630193837-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 2627010050c565a988a1e3a3d96790e812710b0903eaf39a37511378777fa35d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/debian/8/chef_12.12.7+20160630193837-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 2627010050c565a988a1e3a3d96790e812710b0903eaf39a37511378777fa35d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/windows/2012r2/chef-client-12.12.7+20160630193837-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 cd23325eac55966e2549f77b7e505c787f2aa0bda5abc2f20a42bc5a77f4593f" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/freebsd/10/chef-12.12.7+20160630193837_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 d4b081c6779e8bb2c05c52a883849b8efed031c74d11e4b310c44f3ec7f80cfb" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/5/chef-12.12.7+20160630193837-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 077e75275ab8c19a53d6fd4d5c70223f73d7937419537cb1959c59a9a7905dd8" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/el/6/chef-12.12.7+20160630193837-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 f7a420a1911ed2c3594a6618088e1df53b98fa3e983bd54d7e2f38c10ee6c88e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/windows/2008r2/chef-client-12.12.7+20160630193837-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7d7473cf1d7c05329500906bf7d0376ddd5085b5177615135941d0f69f94754e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/freebsd/9/chef-12.12.7+20160630193837_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 8db728137b266b620c679105afcd576bd6abaf0a7d8fb84a537bf5ed837929db" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/windows/2012/chef-client-12.12.7+20160630193837-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7d7473cf1d7c05329500906bf7d0376ddd5085b5177615135941d0f69f94754e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/windows/2012r2/chef-client-12.12.7+20160630193837-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7d7473cf1d7c05329500906bf7d0376ddd5085b5177615135941d0f69f94754e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/aix/6.1/chef-12.12.7+20160630193837-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 38c83aa5d88a2dd1ac40d821bf645cda87cbae124f2d7cc5d14e66e745a84d03" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/aix/7.1/chef-12.12.7+20160630193837-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 38c83aa5d88a2dd1ac40d821bf645cda87cbae124f2d7cc5d14e66e745a84d03" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/solaris2/5.10/chef-12.12.7+20160630193837-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 b69dae5b265e2c9ffde1860b05d429178dcaec0a225bf42209306dc4439687ab" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160630193837/solaris2/5.11/chef-12.12.7+20160630193837-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 b69dae5b265e2c9ffde1860b05d429178dcaec0a225bf42209306dc4439687ab" | out-file "$artifact_info_dir/artifact_info" -Append


                    $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

                    $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                      foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

                    Write-Verbose "Project details: "
                    foreach ($key in $package_metadata.keys) {
                      Write-Verbose "`t$key = $($package_metadata[$key])"
                    }
                    $package_metadata
                  }

                  function Install-Project {
                    <#
                      .SYNOPSIS
                      Install a Chef Software, Inc. product
                      .DESCRIPTION
                      Install a Chef Software, Inc. product
                      .EXAMPLE
                      iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                      Installs the latest stable version of Chef.
                      .EXAMPLE
                      iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                      Installs the latest integration build of the Chef Development Kit
                    #>
                    [cmdletbinding(SupportsShouldProcess=$true)]
                    param (
                      # Project to install
                      [string]
                      $project = 'chef',
                      # Release channel to install from
                      [validateset('current', 'stable', 'unstable')]
                      [string]
                      $channel = 'stable',
                      # Version of the application to install
                      # This parameter is optional, if not supplied it will provide the latest version,
                      # and if an iteration number is not specified, it will grab the latest available iteration.
                      # Partial version numbers are also acceptable (using v=11
                      # will grab the latest 11.x client which matches the other flags).
                      [string]
                      $version,
                      # Full path for the downloaded installer.
                      [string]
                      $filename,
                      # Full path to the location to download the installer
                      [string]
                      $download_directory = $env:temp,
                      # The following legacy switches are just aliases for the current channel
                      [switch]
                      $prerelease,
                      [switch]
                      $nightlies,
                      [validateset('auto', 'i386', 'x86_64')]
                      [string]
                      $architecture = 'auto'
                    )

                    $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

                    if (-not [string]::IsNullOrEmpty($filename)) {
                      $download_directory = split-path $filename
                      $filename = split-path $filename -leaf
                      if ([string]::IsNullOrEmpty($download_directory)) {
                        $download_directory = $pwd
                      }
                    }
                    else {
                      $filename = ($package_metadata.url -split '/')[-1]
                    }
                    Write-Verbose "Download directory: $download_directory"
                    Write-Verbose "Filename: $filename"

                    if (-not (test-path $download_directory)) {
                      mkdir $download_directory
                    }
                    $download_directory = (resolve-path $download_directory).providerpath
                    $download_destination = join-path $download_directory $filename

                    if ((test-path $download_destination) -and
                      (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                      Write-Verbose "Found existing valid installer at $download_destination."
                    }
                    else {
                      if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                        Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                        Get-WebContent $package_metadata.url -filepath $download_destination
                      }
                    }

                    if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                      if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                        Write-Host "Installing $project from $download_destination"
                        $installingProject = $True
                        $installAttempts = 0
                        while ($installingProject) {
                          $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                          $p.WaitForExit()
                          if ($p.ExitCode -eq 1618) {
                            Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                            continue
                          } elseif ($p.ExitCode -ne 0) {
                            throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                          }
                          $installingProject = $False
                        }
                      }
                      else {
                        throw "Failed to validate the downloaded installer for $project."
                      }
                    }
                  }
                  set-alias install -value Install-Project
                  export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

                  }

                  install -project chef -version 12.12.7+20160630193837 -channel unstable
                  )
                  D      creating hash for file $env:TEMP/powershell-windows-2012r2-long_script.ps1
                  D      Running check_files.ps1
                  D      @{
                  D        "dfec0130a5d1c856df5a59c7a1695b6a" = @{
                  D          "target" = "$env:TEMP/powershell-windows-2012r2-long_script.ps1";
                  D          "src_basename" = "powershell-windows-2012r2-long_script.ps1";
                  D          "dst" = "$env:TEMP/powershell-windows-2012r2-long_script.ps1"
                  D        }
                  D      }
                  D      Parsing CSV Response
                  D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
                  "False","dfec0130a5d1c856df5a59c7a1695b6a",,"True","False","False"

                  D      Uploading /tmp/cheftest/kitchen-long-script20160630-14886-1s5yuhz/powershell-windows-2012r2-long_script.ps1 to encoded tmpfile $env:TEMP\b64-dfec0130a5d1c856df5a59c7a1695b6a.txt
                  D      Finished uploading /tmp/cheftest/kitchen-long-script20160630-14886-1s5yuhz/powershell-windows-2012r2-long_script.ps1 to encoded tmpfile $env:TEMP\b64-dfec0130a5d1c856df5a59c7a1695b6a.txt (40.316 KB over 6 chunks) in (0m0.52s)
                  D      Running decode_files.ps1
                  D      @{
                  D        "$env:TEMP\b64-dfec0130a5d1c856df5a59c7a1695b6a.txt" = @{
                  D          "dst" = "$env:TEMP/powershell-windows-2012r2-long_script.ps1"
                  D        }
                  D      }
                  D      Parsing CSV Response
                  D      "src_md5","tmpzip","verifies","tmpfile","dst_md5","dst"
                  "dfec0130a5d1c856df5a59c7a1695b6a",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-dfec0130a5d1c856df5a59c7a1695b6a.txt","dfec0130a5d1c856df5a59c7a1695b6a","C:\Users\ADMINI~1\AppData\Local\Temp/powershell-windows-2012r2-long_script.ps1"

                  D      Uploaded 1 items dirty_check: (0m0.67s) stream_files: (0m0.52s) decode: (0m0.81s)

                         ModuleType Version    Name                                ExportedCommands
                         ---------- -------    ----                                ----------------
                         Script     0.0        Omnitruck                           {Get-ProjectMetada...
                         Installing chef from C:\Users\ADMINI~1\AppData\Local\Temp\chef-client-12.12.7+20160630193837-1-x64.msi
                  D      [WinRM] retrying receive request after timeout


                  D      [WinRM] negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($dirs = @("$env:TEMP\kitchen\clients", "$env:TEMP\kitchen\cookbooks", "$env:TEMP\kitchen\data", "$env:TEMP\kitchen\data_bags", "$env:TEMP\kitchen\encrypted_data_bag_secret", "$env:TEMP\kitchen\environments", "$env:TEMP\kitchen\roles")
                  $root_path = "$env:TEMP\kitchen"

                  Function Delete-AllDirs($dirs) {
                    $dirs | ForEach-Object {
                      if (Test-Path ($path = Unresolve-Path $_)) { Remove-Item $path -Recurse -Force }
                    }
                  }

                  Function Unresolve-Path($p) {
                    if ($p -eq $null) { return $null }
                    else { return $ExecutionContext.SessionState.Path.GetUnresolvedProviderPathFromPSPath($p) }
                  }

                  Function Make-RootPath($p) {
                    $p = Unresolve-Path $p
                    if (-Not (Test-Path $p)) { New-Item $p -ItemType directory | Out-Null }
                  }

                  Delete-AllDirs $dirs
                  Make-RootPath $root_path
                  )
                         Transferring files to <powershell-windows-2012r2>
                  D      creating hash for file $env:TEMP\kitchen
                  D      creating hash for file $env:TEMP\kitchen
                  D      creating hash for directory $env:TEMP\kitchen
                  D      Populating files
                  D      === All files added.
                  D      creating hash for file $env:TEMP\kitchen
                  D      creating hash for directory $env:TEMP\kitchen
                  D      Populating files
                  D      +++ Adding chef_handler/README.md
                  D      +++ Adding chef_handler/attributes/default.rb
                  D      +++ Adding chef_handler/files/default/handlers/README
                  D      +++ Adding chef_handler/libraries/helpers.rb
                  D      +++ Adding chef_handler/libraries/matchers.rb
                  D      +++ Adding chef_handler/metadata.json
                  D      +++ Adding chef_handler/providers/default.rb
                  D      +++ Adding chef_handler/recipes/default.rb
                  D      +++ Adding chef_handler/recipes/json_file.rb
                  D      +++ Adding chef_handler/resources/default.rb
                  D      +++ Adding minimal/metadata.json
                  D      +++ Adding minimal/recipes/default.rb
                  D      +++ Adding ms_dotnet/README.md
                  D      +++ Adding ms_dotnet/attributes/default.rb
                  D      +++ Adding ms_dotnet/attributes/ms_dotnet2.rb
                  D      +++ Adding ms_dotnet/attributes/ms_dotnet3.rb
                  D      +++ Adding ms_dotnet/attributes/ms_dotnet4.rb
                  D      +++ Adding ms_dotnet/libraries/windows_version_helper.rb
                  D      +++ Adding ms_dotnet/metadata.json
                  D      +++ Adding ms_dotnet/recipes/default.rb
                  D      +++ Adding ms_dotnet/recipes/ms_dotnet2.rb
                  D      +++ Adding ms_dotnet/recipes/ms_dotnet3.rb
                  D      +++ Adding ms_dotnet/recipes/ms_dotnet4.rb
                  D      +++ Adding ms_dotnet/recipes/regiis.rb
                  D      +++ Adding powershell/README.md
                  D      +++ Adding powershell/attributes/bits_4.rb
                  D      +++ Adding powershell/attributes/config_lcm.rb
                  D      +++ Adding powershell/attributes/default.rb
                  D      +++ Adding powershell/attributes/powershell2.rb
                  D      +++ Adding powershell/attributes/powershell3.rb
                  D      +++ Adding powershell/attributes/powershell4.rb
                  D      +++ Adding powershell/attributes/powershell5.rb
                  D      +++ Adding powershell/libraries/powershell_module_provider.rb
                  D      +++ Adding powershell/libraries/powershell_module_resource.rb
                  D      +++ Adding powershell/libraries/powershell_version.rb
                  D      +++ Adding powershell/metadata.json
                  D      +++ Adding powershell/providers/default.rb
                  D      +++ Adding powershell/recipes/default.rb
                  D      +++ Adding powershell/recipes/disable_lcm.rb
                  D      +++ Adding powershell/recipes/dsc.rb
                  D      +++ Adding powershell/recipes/enable_dsc_script.rb
                  D      +++ Adding powershell/recipes/enable_lcm.rb
                  D      +++ Adding powershell/recipes/powershell2.rb
                  D      +++ Adding powershell/recipes/powershell3.rb
                  D      +++ Adding powershell/recipes/powershell4.rb
                  D      +++ Adding powershell/recipes/powershell5.rb
                  D      +++ Adding powershell/recipes/powershell_module.rb
                  D      +++ Adding powershell/recipes/windows_reboot.rb
                  D      +++ Adding powershell/recipes/winrm.rb
                  D      +++ Adding powershell/resources/default.rb
                  D      +++ Adding windows/README.md
                  D      +++ Adding windows/attributes/default.rb
                  D      +++ Adding windows/files/default/handlers/windows_reboot_handler.rb
                  D      +++ Adding windows/libraries/feature_base.rb
                  D      +++ Adding windows/libraries/matchers.rb
                  D      +++ Adding windows/libraries/powershell_helper.rb
                  D      +++ Adding windows/libraries/powershell_out.rb
                  D      +++ Adding windows/libraries/registry_helper.rb
                  D      +++ Adding windows/libraries/version.rb
                  D      +++ Adding windows/libraries/windows_architecture_helper.rb
                  D      +++ Adding windows/libraries/windows_helper.rb
                  D      +++ Adding windows/libraries/windows_package.rb
                  D      +++ Adding windows/libraries/windows_privileged.rb
                  D      +++ Adding windows/libraries/wmi_helper.rb
                  D      +++ Adding windows/metadata.json
                  D      +++ Adding windows/providers/auto_run.rb
                  D      +++ Adding windows/providers/batch.rb
                  D      +++ Adding windows/providers/certificate.rb
                  D      +++ Adding windows/providers/certificate_binding.rb
                  D      +++ Adding windows/providers/feature_dism.rb
                  D      +++ Adding windows/providers/feature_powershell.rb
                  D      +++ Adding windows/providers/feature_servermanagercmd.rb
                  D      +++ Adding windows/providers/font.rb
                  D      +++ Adding windows/providers/http_acl.rb
                  D      +++ Adding windows/providers/pagefile.rb
                  D      +++ Adding windows/providers/path.rb
                  D      +++ Adding windows/providers/printer.rb
                  D      +++ Adding windows/providers/printer_port.rb
                  D      +++ Adding windows/providers/reboot.rb
                  D      +++ Adding windows/providers/registry.rb
                  D      +++ Adding windows/providers/shortcut.rb
                  D      +++ Adding windows/providers/task.rb
                  D      +++ Adding windows/providers/zipfile.rb
                  D      +++ Adding windows/recipes/default.rb
                  D      +++ Adding windows/recipes/reboot_handler.rb
                  D      +++ Adding windows/resources/auto_run.rb
                  D      +++ Adding windows/resources/batch.rb
                  D      +++ Adding windows/resources/certificate.rb
                  D      +++ Adding windows/resources/certificate_binding.rb
                  D      +++ Adding windows/resources/feature.rb
                  D      +++ Adding windows/resources/font.rb
                  D      +++ Adding windows/resources/http_acl.rb
                  D      +++ Adding windows/resources/pagefile.rb
                  D      +++ Adding windows/resources/path.rb
                  D      +++ Adding windows/resources/printer.rb
                  D      +++ Adding windows/resources/printer_port.rb
                  D      +++ Adding windows/resources/reboot.rb
                  D      +++ Adding windows/resources/registry.rb
                  D      +++ Adding windows/resources/shortcut.rb
                  D      +++ Adding windows/resources/task.rb
                  D      +++ Adding windows/resources/zipfile.rb
                  D      === All files added.
                  D      Running check_files.ps1
                  D      @{
                  D        "9768ea17a1471084212c406c34a8636d" = @{
                  D          "target" = "$env:TEMP\kitchen";
                  D          "src_basename" = "dna.json";
                  D          "dst" = "$env:TEMP\kitchen"
                  D        };
                  D        "d2f1dba7153c3ceee9427ecc1c3ca078" = @{
                  D          "target" = "$env:TEMP\kitchen";
                  D          "src_basename" = "client.rb";
                  D          "dst" = "$env:TEMP\kitchen"
                  D        };
                  D        "76cdb2bad9582d23c1f6f4d868218d6c" = @{
                  D          "target" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip";
                  D          "src_basename" = "cache";
                  D          "dst" = "$env:TEMP\kitchen\cache"
                  D        };
                  D        "49abb94825cb80b9a9cd59e5f76daf4a" = @{
                  D          "target" = "$env:TEMP\kitchen";
                  D          "src_basename" = "validation.pem";
                  D          "dst" = "$env:TEMP\kitchen"
                  D        };
                  D        "a0d0950fa969e51c8583c88e6339a8de" = @{
                  D          "target" = "$env:TEMP\winrm-upload\tmpzip-a0d0950fa969e51c8583c88e6339a8de.zip";
                  D          "src_basename" = "cookbooks";
                  D          "dst" = "$env:TEMP\kitchen\cookbooks"
                  D        }
                  D      }
                  D      Parsing CSV Response
                  D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
                  "False","76cdb2bad9582d23c1f6f4d868218d6c",,"True","False","False"
                  "False","49abb94825cb80b9a9cd59e5f76daf4a",,"True","False","True"
                  "False","a0d0950fa969e51c8583c88e6339a8de",,"True","False","False"
                  "False","9768ea17a1471084212c406c34a8636d",,"True","False","True"
                  "False","d2f1dba7153c3ceee9427ecc1c3ca078",,"True","False","True"

                  D      Uploading /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s/dna.json to encoded tmpfile $env:TEMP\b64-9768ea17a1471084212c406c34a8636d.txt
                  D      Finished uploading /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s/dna.json to encoded tmpfile $env:TEMP\b64-9768ea17a1471084212c406c34a8636d.txt (0.128 KB over 1 chunks) in (0m0.11s)
                  D      Uploading /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s/client.rb to encoded tmpfile $env:TEMP\b64-d2f1dba7153c3ceee9427ecc1c3ca078.txt
                  D      Finished uploading /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s/client.rb to encoded tmpfile $env:TEMP\b64-d2f1dba7153c3ceee9427ecc1c3ca078.txt (1.108 KB over 1 chunks) in (0m0.10s)
                  D      Uploading /tmp/cheftest/tmpzip-20160630-14886-hfu1hd.zip to encoded tmpfile $env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt
                  D      Finished uploading /tmp/cheftest/tmpzip-20160630-14886-hfu1hd.zip to encoded tmpfile $env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt (0.028 KB over 1 chunks) in (0m0.06s)
                  D      Uploading /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s/validation.pem to encoded tmpfile $env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt
                  D      Finished uploading /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s/validation.pem to encoded tmpfile $env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt (2.236 KB over 1 chunks) in (0m0.11s)
                  D      Uploading /tmp/cheftest/tmpzip-20160630-14886-1qxo2ts.zip to encoded tmpfile $env:TEMP\b64-a0d0950fa969e51c8583c88e6339a8de.txt
                  D      Finished uploading /tmp/cheftest/tmpzip-20160630-14886-1qxo2ts.zip to encoded tmpfile $env:TEMP\b64-a0d0950fa969e51c8583c88e6339a8de.txt (189.124 KB over 24 chunks) in (0m2.10s)
                  D      Running decode_files.ps1
                  D      @{
                  D        "$env:TEMP\b64-9768ea17a1471084212c406c34a8636d.txt" = @{
                  D          "dst" = "$env:TEMP\kitchen/dna.json"
                  D        };
                  D        "$env:TEMP\b64-d2f1dba7153c3ceee9427ecc1c3ca078.txt" = @{
                  D          "dst" = "$env:TEMP\kitchen/client.rb"
                  D        };
                  D        "$env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt" = @{
                  D          "dst" = "$env:TEMP\kitchen\cache";
                  D          "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip"
                  D        };
                  D        "$env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt" = @{
                  D          "dst" = "$env:TEMP\kitchen/validation.pem"
                  D        };
                  D        "$env:TEMP\b64-a0d0950fa969e51c8583c88e6339a8de.txt" = @{
                  D          "dst" = "$env:TEMP\kitchen\cookbooks";
                  D          "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-a0d0950fa969e51c8583c88e6339a8de.zip"
                  D        }
                  D      }
                  D      Parsing CSV Response
                  D      "src_md5","tmpzip","verifies","tmpfile","dst_md5","dst"
                  "76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip","True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt","76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache"
                  "a0d0950fa969e51c8583c88e6339a8de","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-a0d0950fa969e51c8583c88e6339a8de.zip","True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-a0d0950fa969e51c8583c88e6339a8de.txt","a0d0950fa969e51c8583c88e6339a8de","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cookbooks"
                  "d2f1dba7153c3ceee9427ecc1c3ca078",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-d2f1dba7153c3ceee9427ecc1c3ca078.txt","d2f1dba7153c3ceee9427ecc1c3ca078","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/client.rb"
                  "49abb94825cb80b9a9cd59e5f76daf4a",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt","49abb94825cb80b9a9cd59e5f76daf4a","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/validation.pem"
                  "9768ea17a1471084212c406c34a8636d",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-9768ea17a1471084212c406c34a8636d.txt","9768ea17a1471084212c406c34a8636d","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/dna.json"

                  D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160630-14886-hfu1hd.zip
                  D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160630-14886-1qxo2ts.zip
                  D      Uploaded 5 items dirty_check: (0m1.26s) stream_files: (0m2.51s) decode: (0m1.78s)
                  D      Transfer complete
                  D      Attempting to execute command - try 1 of 1.
                  D      [WinRM] negotiate::http://10.194.8.253:5985/wsman<{:user=>"administrator", :pass=>"Ja9KUmVKns", :elevated_username=>"administrator", :elevated_password=>"Ja9KUmVKns", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($env:PATH = [System.Environment]::GetEnvironmentVariable("PATH","Machine")

                  & $env:systemdrive\opscode\chef\bin\chef-client.bat --local-mode --config $env:TEMP\kitchen\client.rb --log_level auto --force-formatter --no-color --json-attributes $env:TEMP\kitchen\dna.json --chef-zero-port 8889 ; exit $LastExitCode)
                         Starting Chef Client, version 12.12.7
                         Creating a new client identity for powershell-windows-2012r2 using the validator key.
                         resolving cookbooks for run list: ["powershell::powershell2"]
                         Synchronizing Cookbooks:
                           - powershell (3.3.2)
                           - windows (1.44.1)
                           - ms_dotnet (2.6.2)
                           - chef_handler (1.4.0)
                         Installing Cookbook Gems:
                         Compiling Cookbooks...
                         [2016-06-30T20:44:33+00:00] WARN: PowerShell 2.0 is not supported or already installed on this version of Windows: 6.3.9600
                         Converging 8 resources
                         Recipe: windows::default
                           * chef_gem[win32-api] action install (up to date)
                           * chef_gem[win32-service] action install (up to date)
                           * chef_gem[windows-api] action install (up to date)
                           * chef_gem[windows-pr] action install
                             - install version 1.2.5 of package windows-pr
                           * chef_gem[win32-dir] action install (up to date)
                           * chef_gem[win32-event] action install (up to date)
                           * chef_gem[win32-mutex] action install (up to date)
                         Recipe: ms_dotnet::ms_dotnet2
                           * log[.NET Framework 2.0 is already enabled on this version of Windows] action write[2016-06-30T20:44:38+00:00] WARN: .NET Framework 2.0 is already enabled on this version of Windows


                         Starting audit phase

                         Finished in 0 seconds (files took 0.60937 seconds to load)
                         0 examples, 0 failures
                         Auditing complete

                         Running handlers:
                         Running handlers complete
                         Chef Client finished, 2/8 resources updated in 38 seconds
                         [2016-06-30T20:44:39+00:00] ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json
                  $$$$$$ C:/opscode/chef/embedded/lib/ruby/2.1.0/x64-mingw32/dl.so: warning: already initialized constant DL::RUBY_FREE
                  $$$$$$ C:/opscode/chef/embedded/lib/ruby/gems/2.1.0/gems/net-ssh-3.2.0/lib/net/ssh/authentication/pageant.rb:16: warning: previous definition of RUBY_FREE was here
                  $$$$$$ DL is deprecated, please use Fiddle
                  D      Cleaning up local sandbox in /tmp/cheftest/powershell-windows-2012r2-sandbox-20160630-14886-pk3n8s
                         Finished converging <powershell-windows-2012r2> (2m28.04s).
                  -----> Kitchen is finished. (7m40.80s)
                  D      [WinRM] closing remote shell B815EEE4-82B4-4984-8906-195584DDE595 on http://10.194.8.253:5985/wsman
                  D      [WinRM] remote shell B815EEE4-82B4-4984-8906-195584DDE595 closed
                  STDERR: [BUG] Segmentation fault at 0x000000000002f0
                  ruby 2.1.6p336 (2015-04-13 revision 50298) [x86_64-linux]
                  ---- End output of bundle exec kitchen converge  -c -l debug ----
                  Ran bundle exec kitchen converge  -c -l debug returned

                  Resource Declaration:
                  ---------------------
                  # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/recipes/provision.rb

                    1: top_cookbooks "converge"

                  Compiled Resource:
                  ------------------
                  # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/recipes/provision.rb:1:in `from_file'

                  top_cookbooks("converge") do
                    action [:run]
                    updated true
                    updated_by_last_action true
                    retries 0
                    retry_delay 2
                    default_guard_interpreter :default
                    declared_type :top_cookbooks
                    cookbook_name "acceptance-cookbook"
                    recipe_name "provision"
                    command "converge"
                  end

              Starting audit phase
            32727: |2

              Running handlers:
              [2016-06-30T20:44:41+00:00] ERROR: Running exception handlers
              Running handlers complete
              [2016-06-30T20:44:41+00:00] ERROR: Exception handlers complete
              Chef Client failed. 18 resources updated in 31 minutes 39 seconds
              [2016-06-30T20:44:41+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/chef-stacktrace.out
              [2016-06-30T20:44:41+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
              [2016-06-30T20:44:41+00:00] ERROR: Found 1 errors, they are stored in the backtrace
              [2016-06-30T20:44:42+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
              STDERR:
              ---- End output of chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/dna.json -o acceptance-cookbook::provision --no-color ----
              Ran chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/dna.json -o acceptance-cookbook::provision --no-color returned 1
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:289:in `invalid!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:276:in `error!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/chef_runner.rb:53:in `block in run!'
              /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:219:in `block in with_clean_env'
              /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:199:in `with_original_env'
              /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:205:in `with_clean_env'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/chef_runner.rb:42:in `run!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:149:in `run_command'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:116:in `block in run_suite'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:114:in `each'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:114:in `run_suite'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:76:in `block (2 levels) in start_worker'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:74:in `loop'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:74:in `block in start_worker'
              CHEF-ACCEPTANCE::[2016-06-30 20:44:42 +0000] --force-destroy specified so attempting to run the destroy recipe
              TOP-COOKBOOKS::DESTROY::[2016-06-30 20:44:42 +0000] Initialized [/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/logs/top-cookbooks/destroy.log] logger...
            33044: |
              CHEF-ACCEPTANCE::[2016-06-30 20:45:35 +0000] | top-cookbooks   | Total         | 00:32:43 | Y     |
              CHEF-ACCEPTANCE::[2016-06-30 20:45:35 +0000] | Run             | Total         | 00:32:43 | Y     |
              Build step 'Invoke XShell command' marked build as failure
              Archiving artifacts
              Recording fingerprints
        steps:
          total: 34m15s
          before (setup time): 1m33s
          CHEF-ACCEPTANCE:
            total: 32m43s
            OMNITRUCK::PROVISION: 21s
            TRIVIAL::PROVISION: 4m54s
            TOP-COOKBOOKS::PROVISION: 31m50s
            OMNITRUCK::VERIFY: 21s
            OMNITRUCK::DESTROY: 10s
            WINDOWS-SERVICE::PROVISION: 4m53s
            TRIVIAL::VERIFY: 15s
            TRIVIAL::DESTROY: 14s
            FIPS::PROVISION: 5m26s
            WINDOWS-SERVICE::VERIFY: 58s
            WINDOWS-SERVICE::DESTROY: 13s
            BASICS::PROVISION: 1m22s
            BASICS::VERIFY: 32s
            BASICS::DESTROY: 11s
            DATA-COLLECTOR::PROVISION: 1m13s
            DATA-COLLECTOR::VERIFY: 49s
            FIPS::VERIFY: 18m9s
            DATA-COLLECTOR::DESTROY: 16s
            FIPS::DESTROY: 17s
            TOP-COOKBOOKS::DESTROY: 53s
        chef_acceptance_timing:
        - omnitruck:
            provision: 12s
            verify: 14s
            destroy: 6s
            Total: 51s
          trivial:
            provision: 4m14s
            verify: 10s
            destroy: 9s
            Total: 5m22s
          windows-service:
            provision: 4m18s
            verify: 50s
            destroy: 9s
            Total: 6m4s
          basics:
            provision: 1m11s
            verify: 26s
            destroy: 7s
            Total: 2m6s
          data-collector:
            provision: 1m3s
            verify: 40s
            destroy: 9s
            Total: 2m16s
          fips:
            provision: 4m35s
            verify: 17m3s
            destroy: 9s
            Total: 23m48s
          top-cookbooks:
            provision: 28m49s
            force-destroy: 37s
            Total: 32m43s
          Run:
            Total: 32m43s
      ubuntu-12.04:
        result: FAILURE
        failure_category: unknown
        failure_cause: unknown
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=ubuntu-12.04,project=chef,role=tester/55/
        duration: 13m41s
        logs:
          consoleText:
            666: |2
                /opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/spec/support/shared/integration/integration_helper.rb:111
              The new definition will overwrite the original one.
              /opt/chef/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- win32/daemon (LoadError)
                from /opt/chef/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'
              Run options:
            9512: |
              rspec ./spec/functional/resource/package_spec.rb:374 # Chef::Resource::Package with a remote package source and an older version of the package is installed and the resource specifies the new version upgrades the package for action :install

              Build step 'Invoke XShell command' marked build as failure
              Archiving artifacts
              Recording fingerprints
      debian-6-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=debian-6,project=chef,role=tester/55/
        duration: 10m22s
      debian-7-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=debian-7,project=chef,role=tester/55/
        duration: 10m34s
      el-5-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=el-5,project=chef,role=tester/55/
        duration: 22m34s
      el-6-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=el-6,project=chef,role=tester/55/
        duration: 30m3s
      freebsd-10-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=freebsd-10,project=chef,role=tester/55/
        duration: 8m40s
      freebsd-9-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=freebsd-9,project=chef,role=tester/55/
        duration: 9m20s
      ubuntu-12.04-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=ubuntu-12.04,project=chef,role=tester/55/
        duration: 10m23s
      ubuntu-14.04-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=ubuntu-14.04,project=chef,role=tester/55/
        duration: 10m23s
      windows-2008r2-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=windows-2008r2,project=chef,role=tester/55/
        duration: 16m16s
      solaris-10-i86pc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i86pc,platform=solaris-10,project=chef,role=tester/55/
        duration: 7m12s
      solaris-11-i86pc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i86pc,platform=solaris-11,project=chef,role=tester/55/
        duration: 7m55s
      aix-6.1-powerpc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=powerpc,platform=aix-6.1,project=chef,role=tester/55/
        duration: 21m14s
      aix-7.1-powerpc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=powerpc,platform=aix-7.1,project=chef,role=tester/55/
        duration: 20m20s
      el-7-ppc64:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=ppc64,platform=el-7,project=chef,role=tester/55/
        duration: 8m48s
      el-7-ppc64le:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=ppc64le,platform=el-7,project=chef,role=tester/55/
        duration: 9m25s
      ubuntu-14.04-ppc64le:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=ppc64le,platform=ubuntu-14.04,project=chef,role=tester/55/
        duration: 6m44s
      solaris-10-sun4v:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=sun4v,platform=solaris-10,project=chef,role=tester/55/
        duration: 1h14m19s
      solaris-11-sun4v:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=sun4v,platform=solaris-11,project=chef,role=tester/55/
        duration: 1h18m1s
      debian-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=debian-6,project=chef,role=tester/55/
        duration: 19m23s
      debian-7:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=debian-7,project=chef,role=tester/55/
        duration: 13m39s
      debian-8:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=debian-8,project=chef,role=tester/55/
        duration: 14m5s
      el-5:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=el-5,project=chef,role=tester/55/
        duration: 32m54s
      el-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=el-6,project=chef,role=tester/55/
        duration: 49m43s
      el-7:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=el-7,project=chef,role=tester/55/
        duration: 13m56s
      freebsd-10:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=freebsd-10,project=chef,role=tester/55/
        duration: 14m31s
      freebsd-9:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=freebsd-9,project=chef,role=tester/55/
        duration: 15m44s
      ios_xr-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=ios_xr-6,project=chef,role=tester/55/
        duration: 7m54s
      mac_os_x-10.10:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=mac_os_x-10.10,project=chef,role=tester/55/
        duration: 10m20s
      mac_os_x-10.11:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=mac_os_x-10.11,project=chef,role=tester/55/
        duration: 7m52s
      mac_os_x-10.9:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=mac_os_x-10.9,project=chef,role=tester/55/
        duration: 9m41s
      nexus-7:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=nexus-7,project=chef,role=tester/55/
        duration: 10m5s
      ubuntu-14.04:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=ubuntu-14.04,project=chef,role=tester/55/
        duration: 13m33s
      windows-2008r2:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=windows-2008r2,project=chef,role=tester/55/
        duration: 16m52s
      windows-2012:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=windows-2012,project=chef,role=tester/55/
        duration: 15m51s
      windows-2012r2:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=windows-2012r2,project=chef,role=tester/55/
        duration: 18m1s
  chef-build:
    result: SUCCESS
    url: http://manhattan.ci.chef.co/job/chef-build/107/
    duration: 32m31s
    runs:
      debian-6-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=debian-6,project=chef,role=builder/107/
        duration: 5m51s
        steps:
          total: 5m51s
          before (setup time): 2m25s
          omnibus:
            total: 3m47s
            fetch:
              PathFetcher:
                chef: 35s
            build:
              total: 3m5s
              GitCache: 1m41s
              Software: 1m41s
              Builder:
                total: 1m30s
                chef: 49s
                chef-appbundle: 33s
              Project:
                chef: 1m24s
              Licensing: 11s
              HealthCheck: 12s
              Packager::DEB: 1m1s
          after (cleanup time): "-21s"
      el-5-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=el-5,project=chef,role=builder/107/
        duration: 6m42s
        steps:
          total: 6m42s
          before (setup time): 2m25s
          omnibus:
            total: 4m36s
            fetch:
              PathFetcher:
                chef: 35s
            build:
              total: 3m53s
              GitCache: 1m51s
              Software: 1m51s
              Builder:
                total: 1m39s
                chef: 58s
                chef-appbundle: 32s
              Project:
                chef: 2m2s
              Licensing: 12s
              HealthCheck: 15s
              Packager::RPM: 1m35s
          after (cleanup time): "-19s"
      el-6-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=el-6,project=chef,role=builder/107/
        duration: 7m20s
        steps:
          total: 7m20s
          before (setup time): "-1m10s"
          omnibus:
            total: 4m54s
            fetch:
              PathFetcher:
                chef: 41s
            build:
              total: 4m5s
              GitCache: 2m2s
              Software: 2m2s
              Builder:
                total: 1m47s
                chef: 1m
                chef-appbundle: 35s
              Project:
                chef: 2m3s
              Licensing: 14s
              HealthCheck: 20s
              Packager::RPM: 1m29s
          after (cleanup time): 3m37s
      freebsd-10-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=freebsd-10,project=chef,role=builder/107/
        duration: 6m2s
        steps:
          total: 6m2s
          before (setup time): 2m9s
          omnibus:
            total: 3m42s
            fetch:
              PathFetcher:
                chef: 39s
            build:
              total: 2m57s
              GitCache: 1m46s
              Software: 1m46s
              Builder:
                total: 1m33s
                chef: 50s
                chef-appbundle: 30s
              Project:
                chef: 1m11s
              Licensing: 11s
              Packager::Makeself: 1m
          after (cleanup time): 11s
      freebsd-9-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=freebsd-9,project=chef,role=builder/107/
        duration: 6m30s
        steps:
          total: 6m30s
          before (setup time): 5m54s
          omnibus:
            total: 3m59s
            fetch:
              PathFetcher:
                chef: 39s
            build:
              total: 3m13s
              GitCache: 1m50s
              Software: 1m50s
              Builder:
                total: 1m36s
                chef: 53s
                chef-appbundle: 30s
              Project:
                chef: 1m23s
              Licensing: 12s
              Packager::Makeself: 1m10s
          after (cleanup time): "-3m23s"
      ubuntu-12.04-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=ubuntu-12.04,project=chef,role=builder/107/
        duration: 6m24s
        steps:
          total: 6m24s
          before (setup time): 2m53s
          omnibus:
            total: 3m52s
            fetch:
              PathFetcher:
                chef: 35s
            build:
              total: 3m10s
              GitCache: 1m35s
              Software: 1m35s
              Builder:
                total: 1m24s
                chef: 46s
                chef-appbundle: 29s
              Project:
                chef: 1m35s
              Licensing: 11s
              HealthCheck: 11s
              Packager::DEB: 1m13s
          after (cleanup time): "-20s"
      windows-2008r2-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=windows-2008r2,project=chef,role=builder/107/
        duration: 8m15s
        steps:
          total: 8m15s
          before (setup time): "-4m34s"
          omnibus:
            total: 6m8s
            fetch:
              PathFetcher:
                chef: 32s
            build:
              total: 5m29s
              GitCache: 3m29s
              Software: 3m28s
              Builder:
                total: 3m5s
                chef: 1m49s
                chef-appbundle: 43s
              GitFetcher: 21s
              NetFetcher: 15s
              Project:
                chef: 2m
              Licensing: 17s
              Packager::MSI: 1m43s
          after (cleanup time): 6m42s
      solaris-10-i86pc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i86pc,platform=solaris-10,project=chef,role=builder/107/
        duration: 7m12s
        steps:
          total: 7m12s
          before (setup time): 10m19s
          omnibus:
            total: 2m13s
            fetch:
              PathFetcher:
                chef: 22s
            build:
              total: 1m46s
              GitCache: 1m24s
              Software: 1m24s
              Builder:
                total: 1m16s
                chef: 36s
                chef-appbundle: 25s
              Project:
                chef: 22s
              Licensing: 10s
              Packager::Solaris: 12s
          after (cleanup time): "-5m19s"
      aix-6.1-powerpc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=powerpc,platform=aix-6.1,project=chef,role=builder/107/
        duration: 15m46s
        steps:
          total: 15m46s
          before (setup time): 2m13s
          omnibus:
            total: 9m48s
            fetch:
              PathFetcher:
                total: 50s
                chef: 49s
                chef-appbundle: 12s
            build:
              total: 8m48s
              GitCache: 2m24s
              Software: 2m24s
              Builder:
                total: 2m14s
                chef: 1m10s
                chef-appbundle: 49s
              Project:
                chef: 6m24s
              Licensing: 10s
              Packager::BFF: 6m13s
          after (cleanup time): 3m45s
      el-7-ppc64:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=ppc64,platform=el-7,project=chef,role=builder/107/
        duration: 7m59s
        steps:
          total: 7m59s
          before (setup time): 5m29s
          omnibus:
            total: 2m51s
            fetch:
              PathFetcher:
                chef: 18s
            build:
              total: 2m30s
              GitCache: 1m1s
              Software: 1m1s
              Builder:
                total: 51s
                chef: 28s
                chef-appbundle: 20s
              Project:
                chef: 1m29s
              Licensing: 12s
              Packager::RPM: 1m13s
          after (cleanup time): "-21s"
      el-7-ppc64le:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=ppc64le,platform=el-7,project=chef,role=builder/107/
        duration: 7m44s
        steps:
          total: 7m44s
          before (setup time): 5m18s
          omnibus:
            total: 2m47s
            fetch:
              PathFetcher:
                chef: 18s
            build:
              total: 2m25s
              GitCache: 1m3s
              Software: 1m2s
              Builder:
                total: 53s
                chef: 29s
                chef-appbundle: 19s
              Project:
                chef: 1m22s
              Licensing: 12s
              Packager::RPM: 1m6s
          after (cleanup time): "-20s"
      ubuntu-14.04-ppc64le:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=ppc64le,platform=ubuntu-14.04,project=chef,role=builder/107/
        duration: 3m23s
        steps:
          total: 3m23s
          before (setup time): 1m17s
          omnibus:
            total: 2m28s
            fetch:
              PathFetcher:
                chef: 18s
            build:
              total: 2m6s
              GitCache: 56s
              Software: 56s
              Builder:
                total: 49s
                chef: 27s
                chef-appbundle: 18s
              Project:
                chef: 1m10s
              Licensing: 10s
              Packager::DEB: 55s
          after (cleanup time): "-21s"
      solaris-10-sun4v:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=sun4v,platform=solaris-10,project=chef,role=builder/107/
        duration: 32m3s
        steps:
          total: 32m3s
          before (setup time): 6m
          omnibus:
            total: 24m17s
            fetch:
              total: 6m41s
              Software:
                total: 26s
                chef: 23s
                config_guess: 21s
                pkg-config-lite: 22s
              PathFetcher:
                total: 6m13s
                chef: 6m13s
                chef-appbundle: 1m29s
            build:
              total: 16m58s
              GitCache: 14m53s
              Software: 14m54s
              Builder:
                total: 14m8s
                chef: 7m27s
                chef-appbundle: 5m40s
                gem-permissions: 10s
              GitFetcher: 24s
              Project:
                chef: 2m4s
              Licensing: 14s
              Packager::Solaris: 1m49s
          after (cleanup time): 1m45s
      debian-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=debian-6,project=chef,role=builder/107/
        duration: 8m6s
        steps:
          total: 8m6s
          before (setup time): 2m37s
          omnibus:
            total: 5m49s
            fetch:
              total: 44s
              NullFetcher:
                chef-complete: 11s
                after (cleanup time): "-11s"
              PathFetcher:
                chef: 40s
            build:
              total: 4m59s
              GitCache: 2m25s
              Software: 2m26s
              Builder:
                total: 2m10s
                chef: 1m14s
                chef-appbundle: 41s
              Project:
                chef: 2m33s
              Licensing: 12s
              HealthCheck: 17s
              Packager::DEB: 2m4s
          after (cleanup time): "-19s"
      el-5:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=el-5,project=chef,role=builder/107/
        duration: 8m50s
        steps:
          total: 8m50s
          before (setup time): 2m35s
          omnibus:
            total: 6m33s
            fetch:
              total: 47s
              NullFetcher:
                chef-complete: 11s
                after (cleanup time): "-11s"
              PathFetcher:
                chef: 44s
            build:
              total: 5m40s
              GitCache: 2m29s
              Software: 2m29s
              Builder:
                total: 2m12s
                chef: 1m15s
                chef-appbundle: 40s
              Project:
                chef: 3m11s
              Licensing: 12s
              HealthCheck: 21s
              Packager::RPM: 2m37s
          after (cleanup time): "-17s"
      el-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=el-6,project=chef,role=builder/107/
        duration: 9m20s
        steps:
          total: 9m20s
          before (setup time): 11m13s
          omnibus:
            total: 6m49s
            fetch:
              total: 47s
              NullFetcher:
                chef-complete: 10s
                after (cleanup time): "-10s"
              PathFetcher:
                chef: 43s
            build:
              total: 5m56s
              GitCache: 2m48s
              Software: 2m48s
              Builder:
                total: 2m26s
                chef: 1m20s
                chef-appbundle: 46s
              Project:
                chef: 3m8s
              Licensing: 15s
              HealthCheck: 21s
              Packager::RPM: 2m32s
          after (cleanup time): "-8m42s"
      el-7:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=el-7,project=chef,role=builder/107/
        duration: 6m57s
        steps:
          total: 6m57s
          before (setup time): 2m34s
          omnibus:
            total: 4m44s
            fetch:
              PathFetcher:
                chef: 31s
            build:
              total: 4m7s
              GitCache: 1m38s
              Software: 1m38s
              Builder:
                total: 1m29s
                chef: 52s
                chef-appbundle: 31s
              Project:
                chef: 2m29s
              Licensing: 13s
              Packager::RPM: 2m8s
          after (cleanup time): "-21s"
      freebsd-10:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=freebsd-10,project=chef,role=builder/107/
        duration: 8m23s
        steps:
          total: 8m23s
          before (setup time): 2m44s
          omnibus:
            total: 5m45s
            fetch:
              PathFetcher:
                total: 52s
                chef: 52s
                openssl-customization: 10s
            build:
              total: 4m44s
              GitCache: 2m47s
              Software: 2m47s
              Builder:
                total: 2m31s
                chef: 1m27s
                chef-appbundle: 46s
              Project:
                chef: 1m57s
              Licensing: 12s
              Packager::Makeself: 1m44s
      freebsd-9:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=freebsd-9,project=chef,role=builder/107/
        duration: 9m38s
        steps:
          total: 9m38s
          before (setup time): 9m9s
          omnibus:
            total: 6m51s
            fetch:
              PathFetcher:
                chef: 1m
            build:
              total: 5m39s
              GitCache: 3m16s
              Software: 3m16s
              Builder:
                total: 2m57s
                chef: 1m41s
                chef-appbundle: 54s
              Project:
                chef: 2m23s
              Licensing: 13s
              Packager::Makeself: 2m10s
          after (cleanup time): "-6m22s"
      ios_xr-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=ios_xr-6,project=chef,role=builder/107/
        duration: 4m50s
        steps:
          total: 4m50s
          before (setup time): "-9m49s"
          omnibus:
            total: 3m34s
            fetch:
              PathFetcher:
                chef: 22s
            build:
              total: 3m8s
              GitCache: 1m42s
              Software: 1m42s
              Builder:
                total: 1m34s
                chef: 50s
                chef-appbundle: 39s
              Project:
                chef: 1m26s
              Licensing: 11s
              Packager::RPM: 1m10s
          after (cleanup time): 11m5s
      mac_os_x-10.9:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=mac_os_x-10.9,project=chef,role=builder/107/
        duration: 3m35s
        steps:
          total: 3m35s
          before (setup time): 2m54s
          omnibus:
            total: 2m17s
            fetch:
              PathFetcher:
                chef: 15s
            build:
              total: 1m59s
              GitCache: 1m6s
              Software: 1m6s
              Builder:
                total: 56s
                chef: 34s
                chef-appbundle: 16s
              Project:
                chef: 53s
              Licensing: 11s
              Packager::PKG: 14s
              Compressor::DMG: 28s
          after (cleanup time): "-1m35s"
      nexus-7:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=nexus-7,project=chef,role=builder/107/
        duration: 5m33s
        steps:
          total: 5m33s
          before (setup time): "-11m5s"
          omnibus:
            total: 4m9s
            fetch:
              PathFetcher:
                chef: 22s
            build:
              total: 3m43s
              GitCache: 2m11s
              Software: 2m11s
              Builder:
                total: 2m
                chef: 1m35s
                chef-appbundle: 20s
              Project:
                chef: 1m32s
              Licensing: 10s
              Packager::RPM: 1m17s
          after (cleanup time): 12m29s
      ubuntu-12.04:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=ubuntu-12.04,project=chef,role=builder/107/
        duration: 7m37s
        steps:
          total: 7m37s
          before (setup time): 2m37s
          omnibus:
            total: 5m22s
            fetch:
              total: 48s
              NullFetcher:
                chef-complete: 11s
                after (cleanup time): "-11s"
              PathFetcher:
                chef: 45s
            build:
              total: 4m28s
              GitCache: 1m57s
              Software: 1m57s
              Builder:
                total: 1m49s
                chef: 1m4s
                chef-appbundle: 36s
              Project:
                chef: 2m31s
              Licensing: 12s
              Packager::DEB: 2m10s
          after (cleanup time): "-21s"
      windows-2008r2:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=windows-2008r2,project=chef,role=builder/107/
        duration: 11m10s
        steps:
          total: 11m10s
          before (setup time): "-4m27s"
          omnibus:
            total: 7m45s
            fetch:
              PathFetcher:
                chef: 27s
            build:
              total: 7m11s
              GitCache:
                total: 3m49s
                chef 2: 12s
                ruby-windows-devkit: 11s
              Software: 3m48s
              Builder:
                total: 3m23s
                chef: 1m50s
                chef-appbundle: 42s
                ruby-windows-devkit: 14s
              GitFetcher: 35s
              NetFetcher: 25s
              Project:
                chef: 3m21s
              Licensing: 16s
              Packager::MSI: 3m5s
          after (cleanup time): 7m53s
  chef-trigger-ad_hoc:
    result: SUCCESS
    url: http://manhattan.ci.chef.co/job/chef-trigger-ad_hoc/62/
    duration: 24s
