---
result: ABORTED
url: http://manhattan.ci.chef.co/job/chef-trigger-ad_hoc/65/
failure_category: aborted
failure_cause: 'aborted: aix-6.1-powerpc, el-5, el-5-i386, el-6, el-6-i386, solaris-10-sun4v,
  solaris-11-sun4v; chef_acceptance[trivial::provision,top-cookbooks::provision,fips::provision]:
  acceptance: chef-test'
timestamp: 2016-07-01 15:09:07 UTC
duration: 54m31s
triggered_by: prajaktapurohit
active_duration: 54m13s
parameters:
  GIT_REF: praj/FLOW-370/acceptance_logging
  EXPIRE_CACHE: false
change:
  git_remote: git://github.com/chef/chef.git
  git_commit: 69de48e30bbc8cec1493cba715bb09f766bd4082
  project: chef
  version: 12.12.7+20160701150941
stages:
  chef-test:
    result: ABORTED
    failure_category: aborted
    failure_cause: 'aborted: aix-6.1-powerpc, el-5, el-5-i386, el-6, el-6-i386, solaris-10-sun4v,
      solaris-11-sun4v; chef_acceptance[trivial::provision,top-cookbooks::provision,fips::provision]:
      acceptance'
    url: http://manhattan.ci.chef.co/job/chef-test/62/
    duration: 21m26s
    runs:
      el-5-i386:
        result: ABORTED
        failure_category: aborted
        failure_cause: aborted
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=el-5,project=chef,role=tester/62/
        duration: 21m24s
        logs:
          consoleText:
            688: |2
                /opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/spec/support/shared/integration/integration_helper.rb:111
              The new definition will overwrite the original one.
              /opt/chef/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- win32/daemon (LoadError)
                from /opt/chef/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'
              Run options:
      el-6-i386:
        result: ABORTED
        failure_category: aborted
        failure_cause: aborted
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=el-6,project=chef,role=tester/62/
        duration: 21m24s
        logs:
          consoleText:
            682: |2
                /opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/spec/support/shared/integration/integration_helper.rb:111
              The new definition will overwrite the original one.
              /opt/chef/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- win32/daemon (LoadError)
                from /opt/chef/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'
              Run options:
            6406: |2
                            sets mode on the new resource as a String
                when fetching files over HTTPS
              [2016-07-01 12:00:12] ERROR OpenSSL::SSL::SSLError: SSL_accept returned=1 errno=0 state=SSLv2/v3 read client hello A: http request
                /opt/chef/embedded/lib/ruby/2.1.0/openssl/ssl.rb:306:in `accept'
              [2016-07-01 12:00:12] ERROR OpenSSL::SSL::SSLError: SSL_accept returned=1 errno=0 state=SSLv2/v3 read client hello A: http request
                /opt/chef/embedded/lib/ruby/2.1.0/openssl/ssl.rb:306:in `accept'
                  behaves like a file resource
                    when deploying with :move
      aix-6.1-powerpc:
        result: ABORTED
        failure_category: aborted
        failure_cause: aborted
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=powerpc,platform=aix-6.1,project=chef,role=tester/62/
        duration: 21m24s
        logs:
          consoleText:
            780: |2
                /opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/spec/support/shared/integration/integration_helper.rb:111
              The new definition will overwrite the original one.
              /opt/chef/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- win32/daemon (LoadError)
                from /opt/chef/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'
              Run options:
      solaris-10-sun4v:
        result: ABORTED
        failure_category: aborted
        failure_cause: aborted
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=sun4v,platform=solaris-10,project=chef,role=tester/62/
        duration: 21m24s
        logs:
          consoleText:
            670: |2
                /opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/spec/support/shared/integration/integration_helper.rb:111
              The new definition will overwrite the original one.
              /opt/chef/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- win32/daemon (LoadError)
                from /opt/chef/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'
              Run options:
      solaris-11-sun4v:
        result: ABORTED
        failure_category: aborted
        failure_cause: aborted
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=sun4v,platform=solaris-11,project=chef,role=tester/62/
        duration: 21m24s
        logs:
          consoleText:
            669: |2
                /opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/spec/support/shared/integration/integration_helper.rb:111
              The new definition will overwrite the original one.
              /opt/chef/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- win32/daemon (LoadError)
                from /opt/chef/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'
              Run options:
      acceptance:
        result: FAILURE
        failure_category: code
        failure_cause: chef_acceptance[trivial::provision,top-cookbooks::provision,fips::provision]
        failed_in:
          chef_acceptance:
          - trivial::provision
          - top-cookbooks::provision
          - fips::provision
          step: CHEF-ACCEPTANCE
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=acceptance,project=chef,role=tester/62/
        duration: 10m6s
        logs:
          consoleText:
            2822: |
              TRIVIAL::PROVISION::[2016-07-01 15:46:31 +0000]
              TRIVIAL::PROVISION::[2016-07-01 15:46:31 +0000]                 >>>>>> Message: 1 actions failed.
                              >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                              There was an error invoking '@{
                                "f819689a04a73f68cedca447fe8bbc14" = @{
            2901: |
              TRIVIAL::PROVISION::[2016-07-01 15:46:31 +0000]                 D      Class: Kitchen::ActionFailed
              TRIVIAL::PROVISION::[2016-07-01 15:46:31 +0000]                 D      Message: 1 actions failed.
                              >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                              There was an error invoking '@{
                                "f819689a04a73f68cedca447fe8bbc14" = @{
            2993: |
              TRIVIAL::PROVISION::[2016-07-01 15:46:31 +0000]                 D      -Composite Exception--
              TRIVIAL::PROVISION::[2016-07-01 15:46:31 +0000]                 D      Class: Kitchen::ActionFailed
              TRIVIAL::PROVISION::[2016-07-01 15:46:31 +0000]                 D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                              There was an error invoking '@{
                                "f819689a04a73f68cedca447fe8bbc14" = @{
            3098: |2
                              D      ---Nested Exception---
                              D      Class: Kitchen::ActionFailed
                              D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                              There was an error invoking '@{
                                "f819689a04a73f68cedca447fe8bbc14" = @{
            3205: |
              TRIVIAL::PROVISION::[2016-07-01 15:46:31 +0000]                 D      [WinRM] remote shell 849EBA56-7E45-44B2-B0B0-C7A6C72BA472 closed
              TRIVIAL::PROVISION::[2016-07-01 15:46:31 +0000]
                    ================================================================================
                    Error executing action `run` on resource 'execute[bundle exec kitchen setup  -c -l debug]'
                    ================================================================================

                    Mixlib::ShellOut::ShellCommandFailed
                    ------------------------------------
                    Expected process to exit with [0], but received '20'
                    ---- Begin output of bundle exec kitchen setup  -c -l debug ----
                    STDOUT: -----> Starting Kitchen (v1.10.2)
                    D      winrm requested, loading winrm gem (["~> 1.6"])
                    D      winrm is loaded.
                    D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
                    D      winrm-fs is loaded.
                    -----> Creating <chef-current-install-windows-2012r2>...
                    D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                    D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                    D      Search returned 3 images:
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
                    D      Image for chef-current-install-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                           Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
                    D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
                           If you are not using an account that qualifies under the AWS
                    free-tier, you may be charged to run these suites. The charge
                    should be minimal, but neither Test Kitchen nor its maintainers
                    are responsible for your incurred costs.

                    D      Creating EC2 instance in region us-west-2 with properties:
                    D      - instance_type = "m3.large"
                    D      - ebs_optimized = false
                    D      - image_id = "ami-8d0acfed"
                    D      - key_name = "jenkins"
                    D      - subnet_id = "subnet-19ac017c"
                    D      - private_ip_address = nil
                    D      - placement = {:availability_zone=>"us-west-2a"}
                    D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                    D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW9
              TRIVIAL::PROVISION::[2016-07-01 15:46:31 +0000] 0ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                           Instance <i-7a05ded5> requested.
            3860: |2
                    D      Class: Kitchen::ActionFailed
                    D      Message: 1 actions failed.
                    >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
            3953: |2
                    D      -Composite Exception--
                    D      Class: Kitchen::ActionFailed
                    D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
            4058: |2
                    D      ---Nested Exception---
                    D      Class: Kitchen::ActionFailed
                    D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
            4168: |2
                    >>>>>> Class: Kitchen::ActionFailed
                    >>>>>> Message: 1 actions failed.
                    >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
            4283: |2


                  ================================================================================
                  Error executing action `run` on resource 'kitchen[setup]'
                  ================================================================================

                  Mixlib::ShellOut::ShellCommandFailed
                  ------------------------------------
              TRIVIAL::PROVISION::[2016-07-01 15:46:31 +0000]
              TRIVIAL::PROVISION::[2016-07-01 15:46:31 +0000] execute[bundle exec kitchen setup  -c -l debug] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/trivial/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 36) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '20'
            4948: |2
                  D      Class: Kitchen::ActionFailed
                  D      Message: 1 actions failed.
                  >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
            5042: |2
                  D      -Composite Exception--
                  D      Class: Kitchen::ActionFailed
                  D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
            5147: |2
                  D      ---Nested Exception---
                  D      Class: Kitchen::ActionFailed
                  D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
            5256: |2
                  >>>>>> Class: Kitchen::ActionFailed
                  >>>>>> Message: 1 actions failed.
                  >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
            5366: |
              TRIVIAL::PROVISION::[2016-07-01 15:46:32 +0000] Running handlers:
              TRIVIAL::PROVISION::[2016-07-01 15:46:32 +0000]
              TRIVIAL::PROVISION::[2016-07-01 15:46:32 +0000] [2016-07-01T15:46:32+00:00] ERROR: Running exception handlers
              TRIVIAL::PROVISION::[2016-07-01 15:46:32 +0000] Running handlers complete
              TRIVIAL::PROVISION::[2016-07-01 15:46:32 +0000] [2016-07-01T15:46:32+00:00] ERROR: Exception handlers complete
              TRIVIAL::PROVISION::[2016-07-01 15:46:32 +0000] Chef Client failed. 0 resources updated in 02 minutes 48 seconds
              TRIVIAL::PROVISION::[2016-07-01 15:46:32 +0000]
              TRIVIAL::PROVISION::[2016-07-01 15:46:32 +0000] [2016-07-01T15:46:32+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/trivial/provision/cache/chef-stacktrace.out
              TRIVIAL::PROVISION::[2016-07-01 15:46:32 +0000] [2016-07-01T15:46:32+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
              TRIVIAL::PROVISION::[2016-07-01 15:46:32 +0000] [2016-07-01T15:46:32+00:00] ERROR: Found 1 errors, they are stored in the backtrace
              TRIVIAL::PROVISION::[2016-07-01 15:46:34 +0000] [2016-07-01T15:46:34+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
              CHEF-ACCEPTANCE::[2016-07-01 15:46:34 +0000] Encountered an error running the recipe provision: Expected process to exit with [0], but received '1'
              ---- Begin output of chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/trivial/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/trivial/provision/dna.json -o acceptance-cookbook::provision --no-color ----
            6025: |2
                              >>>>>> Class: Kitchen::ActionFailed
                              >>>>>> Message: 1 actions failed.
                              >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                              There was an error invoking '@{
                                "f819689a04a73f68cedca447fe8bbc14" = @{
            6101: |2
                              D      Class: Kitchen::ActionFailed
                              D      Message: 1 actions failed.
                              >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                              There was an error invoking '@{
                                "f819689a04a73f68cedca447fe8bbc14" = @{
            6193: |2
                              D      -Composite Exception--
                              D      Class: Kitchen::ActionFailed
                              D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                              There was an error invoking '@{
                                "f819689a04a73f68cedca447fe8bbc14" = @{
            6296: |2
                              D      ---Nested Exception---
                              D      Class: Kitchen::ActionFailed
                              D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                              There was an error invoking '@{
                                "f819689a04a73f68cedca447fe8bbc14" = @{
            6401: |2
                              D      [WinRM] remote shell 849EBA56-7E45-44B2-B0B0-C7A6C72BA472 closed

                    ================================================================================
                    Error executing action `run` on resource 'execute[bundle exec kitchen setup  -c -l debug]'
                    ================================================================================

                    Mixlib::ShellOut::ShellCommandFailed
                    ------------------------------------
                    Expected process to exit with [0], but received '20'
                    ---- Begin output of bundle exec kitchen setup  -c -l debug ----
                    STDOUT: -----> Starting Kitchen (v1.10.2)
                    D      winrm requested, loading winrm gem (["~> 1.6"])
                    D      winrm is loaded.
                    D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
                    D      winrm-fs is loaded.
                    -----> Creating <chef-current-install-windows-2012r2>...
                    D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                    D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                    D      Search returned 3 images:
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
                    D      Image for chef-current-install-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                           Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
                    D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
                           If you are not using an account that qualifies under the AWS
                    free-tier, you may be charged to run these suites. The charge
                    should be minimal, but neither Test Kitchen nor its maintainers
                    are responsible for your incurred costs.

                    D      Creating EC2 instance in region us-west-2 with properties:
                    D      - instance_type = "m3.large"
                    D      - ebs_optimized = false
                    D      - image_id = "ami-8d0acfed"
                    D      - key_name = "jenkins"
                    D      - subnet_id = "subnet-19ac017c"
                    D      - private_ip_address = nil
                    D      - placement = {:availability_zone=>"us-west-2a"}
                    D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                    D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                           Instance <i-7a05ded5> requested.
                           Polling AWS for existence, attempt 0...
                           Attempting to tag the instance, 0 retries
                           EC2 instance <i-7a05ded5> created.
                           Waited 0/300s for instance <i-7a05ded5> to become ready.
                           Waited 5/300s for instance <i-7a05ded5> to become ready.
                           Waited 10/300s for instance <i-7a05ded5> to become ready.
                           Waited 15/300s for instance <i-7a05ded5> to become ready.
                           Waited 20/300s for instance <i-7a05ded5> to become ready.
                           Waited 25/300s for instance <i-7a05ded5> to become ready.
                           Waited 30/300s for instance <i-7a05ded5> to become ready.
                           Waited 35/300s for instance <i-7a05ded5> to become ready.
                           Waited 40/300s for instance <i-7a05ded5> to become ready.
                           Waited 45/300s for instance <i-7a05ded5> to become ready.
                           Waited 50/300s for instance <i-7a05ded5> to become ready.
                           Waited 55/300s for instance <i-7a05ded5> to become ready.
                           Waited 60/300s for instance <i-7a05ded5> to become ready.
                           Waited 65/300s for instance <i-7a05ded5> to become ready.
                           Waited 70/300s for instance <i-7a05ded5> to become ready.
                           Waited 75/300s for instance <i-7a05ded5> to become ready.
                           Waited 80/300s for instance <i-7a05ded5> to become ready.
                           Waited 85/300s for instance <i-7a05ded5> to become ready.
                           Waited 90/300s for instance <i-7a05ded5> to become ready.
                           Waited 95/300s for instance <i-7a05ded5> to become ready.
                           Waited 100/300s for instance <i-7a05ded5> to become ready.
                           Waited 105/300s for instance <i-7a05ded5> to become ready.
                    D      Console output: ---
                    2016/07/01 15:45:36Z: EC2ConfigMonitorState: 0
                    2016/07/01 15:45:36Z: Windows sysprep configuration complete.
                    2016/07/01 15:45:38Z: AMI Origin Version: 2016.06.15
                    2016/07/01 15:45:38Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
                    2016/07/01 15:45:38Z: OS: Microsoft Windows NT 6.3.9600
                    2016/07/01 15:45:38Z: OsVersion: 6.3
                    2016/07/01 15:45:38Z: OsProductName: Windows Server 2012 R2 Standard
                    2016/07/01 15:45:38Z: OsBuildLabEx: 9600.18292.amd64fre.winblue_ltsb.160330-1744
                    2016/07/01 15:45:38Z: Language: en-US
                    2016/07/01 15:45:38Z: TimeZone: Coordinated Universal Time
                    2016/07/01 15:45:38Z: Offset: UTC 00:00:00
                    2016/07/01 15:45:38Z: EC2 Agent: Ec2Config service v3.17.1032
                    2016/07/01 15:45:40Z: Message: Waiting for meta-data accessibility...
                    2016/07/01 15:45:40Z: Message: Meta-data is now available.
                    2016/07/01 15:45:41Z: AMI-ID: ami-8d0acfed
                    2016/07/01 15:45:41Z: Instance-ID: i-7a05ded5
                    2016/07/01 15:45:43Z: Driver: AWS PV Network Device v7.3.2.0
                    2016/07/01 15:45:43Z: Driver: AWS PV Storage Host Adapter v7.3.2.0
                    2016/07/01 15:45:43Z: Ec2SetPassword: Enabled
                    2016/07/01 15:45:44Z: RDPCERTIFICATE-SUBJECTNAME: WIN-3PIJKLNQ80D
                    2016/07/01 15:45:44Z: RDPCERTIFICATE-THUMBPRINT: 3B2C9F2B5166C02C372CA2983A012CF5E1E619F5
                    2016/07/01 15:45:47Z: Username: Administrator
                    2016/07/01 15:45:47Z: Password: <Password>
                    v0akI81N34BuMFoTB/z0BRfIMkrCogYVEVWy1vQyqEW79GPsVxYivtnEmpMfCEvq4rl/x7Lfi5/tn3goxdv4h+KwaaHh6fHfceOl69pKzDNVJfqw2inrxYpS3RQVCMferHdDuvl+0HYBsjM1Ym11bCy3KR4oOZVeg4O/q2Pp0GK5bg9w3JAiIA1Bw69i/BmCV8SuCPKqPrvG66anE99RwZwg+NZMEaKa9YxQp6W/K1DQquH9gKCvxRgNwRVBAcfnhEDUtv8JqMKEwHwe3xxwR0ERLc+yyRt7jxrnq+EPdwnGAxBVXNlqfkvCH32iAn+esocmgmPFWuMxwUt8NEFzVg==
                    </Password>
                    2016/07/01 15:45:49Z: Message: Windows is Ready to use

                           Waited 0/300s for instance <i-7a05ded5> to fetch windows admin password.
                           Retrieved Windows password for instance <i-7a05ded5>.
                           EC2 instance <i-7a05ded5> ready.
                    D      [WinRM] opening remote shell on http://10.194.15.199:5985/wsman
                    D      [WinRM] remote shell A000E413-CA37-47CF-87CB-9EC4F07E9B3D is open on http://10.194.15.199:5985/wsman
                    D      [WinRM] negotiate::http://10.194.15.199:5985/wsman<{:user=>"administrator", :pass=>"J?8oXM?cvig", :elevated_username=>"administrator", :elevated_password=>"J?8oXM?cvig", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
                    ')
                           [WinRM] Established

                    D      [WinRM] reusing existing connection negotiate::http://10.194.15.199:5985/wsman<{:user=>"administrator", :pass=>"J?8oXM?cvig", :elevated_username=>"administrator", :elevated_password=>"J?8oXM?cvig", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                    D      [WinRM] negotiate::http://10.194.15.199:5985/wsman<{:user=>"administrator", :pass=>"J?8oXM?cvig", :elevated_username=>"administrator", :elevated_password=>"J?8oXM?cvig", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)


                               Directory: C:\chef\ohai\hints


                           Mode                LastWriteTime     Length Name
                           ----                -------------     ------ ----
                           -a---          7/1/2016   3:46 PM          0 ec2.json


                    D      ec2:create '10.194.15.199'
                           Finished creating <chef-current-install-windows-2012r2> (2m27.87s).
                    -----> Converging <chef-current-install-windows-2012r2>...
                           Preparing files for transfer
                    D      Creating local sandbox in /tmp/cheftest/chef-current-install-windows-2012r2-sandbox-20160701-11604-11jjor0
                           Preparing dna.json
                    D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                           Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                           Removing non-cookbook files before transfer
                           Preparing validation.pem
                    D      Using a dummy validation.pem
                           Preparing client.rb
                    D      Creating client.rb from {:node_name=>"chef-current-install-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                    D      [WinRM] reusing existing connection negotiate::http://10.194.15.199:5985/wsman<{:user=>"administrator", :pass=>"J?8oXM?cvig", :elevated_username=>"administrator", :elevated_password=>"J?8oXM?cvig", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                    D      [WinRM] negotiate::http://10.194.15.199:5985/wsman<{:user=>"administrator", :pass=>"J?8oXM?cvig", :elevated_username=>"administrator", :elevated_password=>"J?8oXM?cvig", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
                    function Get-PlatformVersion {
                      switch -regex ((get-wmiobject win32_operatingsystem).version) {
                        '10\.0\.\d+' {$platform_version = '2012r2'}
                        '6\.3\.\d+'  {$platform_version = '2012r2'}
                        '6\.2\.\d+'  {$platform_version = '2012'}
                        '6\.1\.\d+'  {$platform_version = '2008r2'}
                        '6\.0\.\d+'  {$platform_version = '2008'}
                      }
                      return $platform_version
                    }

                    function Get-PlatformArchitecture {
                      if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                        $architecture = 'x86_64'
                      } else {
                        $architecture = 'i386'
                      }
                      return $architecture
                    }

                    function New-Uri {
                      param ($baseuri, $newuri)

                      try {
                      new-object System.Uri $baseuri, $newuri
                      }
                      catch [System.Management.Automation.MethodInvocationException]{
                        Write-Error "$($_.exception.message)"
                        throw $_.exception
                      }
                    }

                    function Get-WebContent {
                      param ($uri, $filepath)
                      $proxy = New-Object -TypeName System.Net.WebProxy
                      $wc = new-object System.Net.WebClient
                      $proxy.Address = $env:http_proxy
                      $wc.Proxy = $proxy

                      try {
                        if ([string]::IsNullOrEmpty($filepath)) {
                          $wc.downloadstring($uri)
                        }
                        else {
                          $wc.downloadfile($uri, $filepath)
                        }
                      }
                      catch {
                        $exception = $_.Exception
                        Write-Host "There was an error: "
                        do {
                          Write-Host "`t$($exception.message)"
                          $exception = $exception.innerexception
                        } while ($exception)
                        throw "Failed to download from $uri."
                      }
                    }

                    function Test-ProjectPackage {
                      [cmdletbinding()]
                      param ($Path, $Algorithm = 'SHA256', $Hash)

                      if (-not (get-command get-filehash))   {
                        function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                        function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                        function Get-FileHash ($Path, $Algorithm) {
                          $Path = (resolve-path $path).providerpath
                          $hash = @{Algorithm = $Algorithm; Path = $Path}
                          use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                            use ($in = (gi $path).OpenRead()) {
                              $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                            }
                          }
                          new-object PSObject -Property $hash
                        }
                      }
                      Write-Verbose "Testing the $Algorithm hash for $path."
                      $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
                      Write-Verbose "`tDesired Hash - '$hash'"
                      Write-Verbose "`tActual Hash  - '$ActualHash'"
                      $Valid = $ActualHash -eq $Hash
                      if (-not $Valid) {
                        Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
                      }
                      return $Valid
                    }

                    function Get-ProjectMetadata {
                      <#
                        .SYNOPSIS
                        Get metadata for a Chef Software, Inc. project
                        .DESCRIPTION
                        Get metadata for project
                        .EXAMPLE
                        iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                        Gets the download url and SHA256 checksum for the latest stable release of Chef.
                        .EXAMPLE
                        iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                        Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
                      #>
                      [cmdletbinding()]
                      param (
                        # Base url to retrieve metadata from.
                        [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                        [string]
                        # Project to install
                        [string]
                        $project = 'chef',
                        # Version of the application to install
                        # This parameter is optional, if not supplied it will provide the latest version,
                        # and if an iteration number is not specified, it will grab the latest available iteration.
                        # Partial version numbers are also acceptable (using v=11
                        # will grab the latest 11.x client which matches the other flags).
                        [string]
                        $version,
                        # Release channel to install from
                        $channel = 'unstable',
                        # The following legacy switches are just aliases for the current channel
                        [switch]
                        $prerelease,
                        [switch]
                        $nightlies,
                        [validateset('auto', 'i386', 'x86_64')]
                        [string]
                        $architecture = 'auto'
                      )

                      # PowerShell is only on Windows ATM
                      $platform = 'windows'
                      Write-Verbose "Platform: $platform"

                      $platform_version = Get-PlatformVersion
                      Write-Verbose "Platform Version: $platform_version"

                      if ($architecture -eq 'auto') {
                        $architecture = Get-PlatformArchitecture
                      }

                      Write-Verbose "Architecture: $architecture"
                      Write-Verbose "Project: $project"


                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 89a564bafc4b22db5f5539fe1925587c6bf2334f0c344e0c13264f52ae537b0a" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.9/chef-12.12.7+20160701150941-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.10/chef-12.12.7+20160701150941-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.11/chef-12.12.7+20160701150941-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ios_xr/6/chef-12.12.7+20160701150941-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 96689d0525260209d68e4991db7144b0aa31a6f7628c9e4e5f23c6f150025fb0" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/nexus/7/chef-12.12.7+20160701150941-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 f5c620dc0166571903f28990240a5bbb1123bd6e8433a8d8d4aa9b2ba8587bbb" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 6d3b80e324377a5a80889d51ec5b0d0730d7503eb14c32a4ed7fd9e2ad21d615" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 8d63b437804b48672cc7b325bd3eb3a1ff525978b894c9b6e7c63db011aac295" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 e910142a9bdc53757635db7f997f00e5415cc6dadea981aeec1e999489586ee2" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 13296dfe3559a3cb5664a8319e57153635ba867a3a72feb4b040ce833fc22914" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 e31a417ea73cefb3424496b07b19e188a5d079db40fc29bae0c8a24b2fb9d558" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 5fb71d38e54b0a6e8fc142f48e693de2dc54891edde59f65db61bf097766a3de" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 bc5a1ea39782df044cd069523d6534f72222855bbf99a98961858cdaee51d7c0" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 f4c5e3b437e5129e89a5ca0d69036dcf0e6e4b21a0eef61b495ab63a0be2fe94" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 58bed7db8fe43a1e8441d9a2a5e46b9fe4ab7e932dd1f7f5e0dc53adc004704c" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 e30aac011f866a56f3542eaaa17cf18e40df6021e997e32fd3d1ae5b8f11e274" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 6fc165d1fbc96f5ed5ffbfedb154e7ede4d6e87fccec3c80c0de5510527bd673" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/6.1/chef-12.12.7+20160701150941-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/7.1/chef-12.12.7+20160701150941-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817" | out-file "$artifact_info_dir/artifact_info" -Append


                      $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

                      $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                        foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

                      Write-Verbose "Project details: "
                      foreach ($key in $package_metadata.keys) {
                        Write-Verbose "`t$key = $($package_metadata[$key])"
                      }
                      $package_metadata
                    }

                    function Install-Project {
                      <#
                        .SYNOPSIS
                        Install a Chef Software, Inc. product
                        .DESCRIPTION
                        Install a Chef Software, Inc. product
                        .EXAMPLE
                        iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                        Installs the latest stable version of Chef.
                        .EXAMPLE
                        iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                        Installs the latest integration build of the Chef Development Kit
                      #>
                      [cmdletbinding(SupportsShouldProcess=$true)]
                      param (
                        # Project to install
                        [string]
                        $project = 'chef',
                        # Release channel to install from
                        [validateset('current', 'stable', 'unstable')]
                        [string]
                        $channel = 'stable',
                        # Version of the application to install
                        # This parameter is optional, if not supplied it will provide the latest version,
                        # and if an iteration number is not specified, it will grab the latest available iteration.
                        # Partial version numbers are also acceptable (using v=11
                        # will grab the latest 11.x client which matches the other flags).
                        [string]
                        $version,
                        # Full path for the downloaded installer.
                        [string]
                        $filename,
                        # Full path to the location to download the installer
                        [string]
                        $download_directory = $env:temp,
                        # The following legacy switches are just aliases for the current channel
                        [switch]
                        $prerelease,
                        [switch]
                        $nightlies,
                        [validateset('auto', 'i386', 'x86_64')]
                        [string]
                        $architecture = 'auto'
                      )

                      $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

                      if (-not [string]::IsNullOrEmpty($filename)) {
                        $download_directory = split-path $filename
                        $filename = split-path $filename -leaf
                        if ([string]::IsNullOrEmpty($download_directory)) {
                          $download_directory = $pwd
                        }
                      }
                      else {
                        $filename = ($package_metadata.url -split '/')[-1]
                      }
                      Write-Verbose "Download directory: $download_directory"
                      Write-Verbose "Filename: $filename"

                      if (-not (test-path $download_directory)) {
                        mkdir $download_directory
                      }
                      $download_directory = (resolve-path $download_directory).providerpath
                      $download_destination = join-path $download_directory $filename

                      if ((test-path $download_destination) -and
                        (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                        Write-Verbose "Found existing valid installer at $download_destination."
                      }
                      else {
                        if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                          Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                          Get-WebContent $package_metadata.url -filepath $download_destination
                        }
                      }

                      if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                        if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                          Write-Host "Installing $project from $download_destination"
                          $installingProject = $True
                          $installAttempts = 0
                          while ($installingProject) {
                            $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                            $p.WaitForExit()
                            if ($p.ExitCode -eq 1618) {
                              Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                              continue
                            } elseif ($p.ExitCode -ne 0) {
                              throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                            }
                            $installingProject = $False
                          }
                        }
                        else {
                          throw "Failed to validate the downloaded installer for $project."
                        }
                      }
                    }
                    set-alias install -value Install-Project
                    export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

                    }

                    install -project chef -version 12.12.7+20160701150941 -channel unstable
                    )
                    D      creating hash for file $env:TEMP/chef-current-install-windows-2012r2-long_script.ps1
                    D      Running check_files.ps1
                    D      @{
                    D        "f819689a04a73f68cedca447fe8bbc14" = @{
                    D          "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1";
                    D          "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1";
                    D          "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1"
                    D        }
                    D      }
                    D      [WinRM] opening new shell since the current one failed
                    D      [WinRM] opening remote shell on http://10.194.15.199:5985/wsman
                    D      [WinRM] remote shell 849EBA56-7E45-44B2-B0B0-C7A6C72BA472 is open on http://10.194.15.199:5985/wsman
                    D      Cleaning up local sandbox in /tmp/cheftest/chef-current-install-windows-2012r2-sandbox-20160701-11604-11jjor0
                    D      ------Exception-------
                    D      Class: Kitchen::ActionFailed
                    D      Message: 1 actions failed.
                    >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                        "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1";
                        "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1"
                      }
                    }@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                        "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1";
                        "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1"
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                       tion
                        + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                       vokeExpressionCommand

                    At line:54 char:5
                    +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                    +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                    :String) [], RuntimeException
                        + FullyQualifiedErrorId : There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                            "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.
                       ps1";
                            "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1"
                       ;
                            "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1
                       "
                      }
                    }@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                            "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.
                       ps1";
                            "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1"
                       ;
                            "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1
                       "
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                            + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                       xcep
                       tion
                            + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                       s.In
                       vokeExpressionCommand


                    ] on chef-current-install-windows-2012r2
                    D      ----------------------
                    D      ------Backtrace-------
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:187:in `report_errors'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:178:in `run_action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command/action.rb:39:in `block in call'
                    D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command/action.rb:37:in `call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:56:in `perform'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:184:in `block (2 levels) in <class:CLI>'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:325:in `invoke_task'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/bin/kitchen:13:in `block in <top (required)>'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/errors.rb:174:in `with_friendly_errors'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/bin/kitchen:13:in `<top (required)>'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:23:in `load'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:23:in `<main>'
                    D      ----End Backtrace-----
                    D      -Composite Exception--
                    D      Class: Kitchen::ActionFailed
                    D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                        "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1";
                        "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1"
                      }
                    }@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                        "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1";
                        "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1"
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                       tion
                        + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                       vokeExpressionCommand

                    At line:54 char:5
                    +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                    +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                    :String) [], RuntimeException
                        + FullyQualifiedErrorId : There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                            "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.
                       ps1";
                            "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1"
                       ;
                            "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1
                       "
                      }
                    }@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                            "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.
                       ps1";
                            "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1"
                       ;
                            "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1
                       "
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                            + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                       xcep
                       tion
                            + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                       s.In
                       vokeExpressionCommand


                    ] on chef-current-install-windows-2012r2
                    D      ----------------------
                    D      ------Backtrace-------
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:394:in `parse_response'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:203:in `check_files'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:80:in `block in upload'
                    D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:78:in `upload'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:134:in `upload'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:394:in `run_from_file_command'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:102:in `execute'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:72:in `block in call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:526:in `reuse_connection'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:72:in `connection'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:71:in `call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:373:in `block in converge_action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in `call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in `synchronize_or_call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:478:in `block in action'
                    D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:477:in `action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:369:in `converge_action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:348:in `block in transition_to'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in `each'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in `transition_to'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:149:in `setup'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in `public_send'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in `run_action_in_thread'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
                    D      ----End Backtrace-----
                    D      ---Nested Exception---
                    D      Class: Kitchen::ActionFailed
                    D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                        "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1";
                        "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1"
                      }
                    }@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                        "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1";
                        "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1"
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                       tion
                        + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                       vokeExpressionCommand

                    At line:54 char:5
                    +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                    +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                    :String) [], RuntimeException
                        + FullyQualifiedErrorId : There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                            "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.
                       ps1";
                            "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1"
                       ;
                            "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1
                       "
                      }
                    }@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                            "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.
                       ps1";
                            "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1"
                       ;
                            "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1
                       "
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                            + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                       xcep
                       tion
                            + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                       s.In
                       vokeExpressionCommand


                    ]
                    D      ----------------------
                    D      ------Backtrace-------
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:394:in `parse_response'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:203:in `check_files'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:80:in `block in upload'
                    D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:78:in `upload'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:134:in `upload'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:394:in `run_from_file_command'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:102:in `execute'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:72:in `block in call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:526:in `reuse_connection'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:72:in `connection'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:71:in `call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:373:in `block in converge_action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in `call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in `synchronize_or_call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:478:in `block in action'
                    D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:477:in `action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:369:in `converge_action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:348:in `block in transition_to'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in `each'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in `transition_to'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:149:in `setup'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in `public_send'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in `run_action_in_thread'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
                    D      ----End Backtrace-----
                    D      [WinRM] closing remote shell A000E413-CA37-47CF-87CB-9EC4F07E9B3D on http://10.194.15.199:5985/wsman
                    D      [WinRM] closing remote shell 849EBA56-7E45-44B2-B0B0-C7A6C72BA472 on http://10.194.15.199:5985/wsman
                    D      [WinRM] remote shell 849EBA56-7E45-44B2-B0B0-C7A6C72BA472 closed
                    STDERR: >>>>>> ------Exception-------
                    >>>>>> Class: Kitchen::ActionFailed
                    >>>>>> Message: 1 actions failed.
                    >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                        "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1";
                        "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1"
                      }
                    }@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                        "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1";
                        "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1"
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                       tion
                        + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                       vokeExpressionCommand

                    At line:54 char:5
                    +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                    +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                    :String) [], RuntimeException
                        + FullyQualifiedErrorId : There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                            "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.
                       ps1";
                            "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1"
                       ;
                            "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1
                       "
                      }
                    }@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                            "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.
                       ps1";
                            "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1"
                       ;
                            "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1
                       "
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                            + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                       xcep
                       tion
                            + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                       s.In
                       vokeExpressionCommand


                    ] on chef-current-install-windows-2012r2
                    >>>>>> ----------------------
                    >>>>>> Please see .kitchen/logs/kitchen.log for more details
                    >>>>>> Also try running `kitchen diagnose --all` for configuration
                    ---- End output of bundle exec kitchen setup  -c -l debug ----
                    Ran bundle exec kitchen setup  -c -l debug returned 20

                    Resource Declaration:
                    ---------------------
                    # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/trivial/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb

                     36:       execute "bundle exec kitchen #{command}#{instances ? " #{instances}" : ""}#{kitchen_options ? " #{kitchen_options}" : ""}" do
                     37:         cwd kitchen_dir
                     38:         env({
                     39:           "KITCHEN_DRIVER" => driver,
                     40:           "KITCHEN_INSTANCES" => instances,
                     41:           "KITCHEN_LOCAL_YAML" => ::File.expand_path("../../.kitchen.#{driver}.yml", __FILE__),
                     42:           "KITCHEN_CHEF_PRODUCT" => chef_product,
                     43:           "KITCHEN_CHEF_CHANNEL" => chef_channel,
                     44:           "KITCHEN_CHEF_VERSION" => chef_version,
                     45:           "ARTIFACTORY_USERNAME" => artifactory_username,
                     46:           "ARTIFACTORY_PASSWORD" => artifactory_password
                     47:         }.merge(new_resource.env))
                     48:       end
                     49:       ruby_block "copy_kitchen_logs_to_data_path" do

                    Compiled Resource:
                    ------------------
                    # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/trivial/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:36:in `block in <class:Kitchen>'

                    execute("bundle exec kitchen setup  -c -l debug") do
                      action [:run]
                      retries 0
                      retry_delay 2
                      default_guard_interpreter :execute
                      command "bundle exec kitchen setup  -c -l debug"
                      backup 5
                      cwd "/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/trivial"
                      environment {"KITCHEN_DRIVER"=>"ec2", "KITCHEN_INSTANCES"=>"", "KITCHEN_LOCAL_YAML"=>"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/trivial/provision/cache/cookbooks/kitchen_acceptance/.kitchen.ec2.yml", "KITCHEN_CHEF_PRODUCT"=>"chef", "KITCHEN_CHEF_CHANNEL"=>"unstable", "KITCHEN_CHEF_VERSION"=>"12.12.7+20160701150941", "ARTIFACTORY_USERNAME"=>"chef-web-downloads", "ARTIFACTORY_PASSWORD"=>"fWPxYSB69EiuSpl8*3Dr^kGwf#hxUE6cmjeZRB%H!Cruit7qiKp%toH3nXKStQUg"}
                      returns 0
                      declared_type :execute
                      cookbook_name "acceptance-cookbook"
                    end


                  ================================================================================
                  Error executing action `run` on resource 'kitchen[setup]'
                  ================================================================================

                  Mixlib::ShellOut::ShellCommandFailed
                  ------------------------------------
                  execute[bundle exec kitchen setup  -c -l debug] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/trivial/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 36) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '20'
                  ---- Begin output of bundle exec kitchen setup  -c -l debug ----
                  STDOUT: -----> Starting Kitchen (v1.10.2)
                  D      winrm requested, loading winrm gem (["~> 1.6"])
                  D      winrm is loaded.
                  D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
                  D      winrm-fs is loaded.
                  -----> Creating <chef-current-install-windows-2012r2>...
                  D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                  D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                  D      Search returned 3 images:
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
                  D      Image for chef-current-install-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                         Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
                  D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
                         If you are not using an account that qualifies under the AWS
                  free-tier, you may be charged to run these suites. The charge
                  should be minimal, but neither Test Kitchen nor its maintainers
                  are responsible for your incurred costs.

                  D      Creating EC2 instance in region us-west-2 with properties:
                  D      - instance_type = "m3.large"
                  D      - ebs_optimized = false
                  D      - image_id = "ami-8d0acfed"
                  D      - key_name = "jenkins"
                  D      - subnet_id = "subnet-19ac017c"
                  D      - private_ip_address = nil
                  D      - placement = {:availability_zone=>"us-west-2a"}
                  D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                  D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                         Instance <i-7a05ded5> requested.
                         Polling AWS for existence, attempt 0...
                         Attempting to tag the instance, 0 retries
                         EC2 instance <i-7a05ded5> created.
                         Waited 0/300s for instance <i-7a05ded5> to become ready.
                         Waited 5/300s for instance <i-7a05ded5> to become ready.
                         Waited 10/300s for instance <i-7a05ded5> to become ready.
                         Waited 15/300s for instance <i-7a05ded5> to become ready.
                         Waited 20/300s for instance <i-7a05ded5> to become ready.
                         Waited 25/300s for instance <i-7a05ded5> to become ready.
                         Waited 30/300s for instance <i-7a05ded5> to become ready.
                         Waited 35/300s for instance <i-7a05ded5> to become ready.
                         Waited 40/300s for instance <i-7a05ded5> to become ready.
                         Waited 45/300s for instance <i-7a05ded5> to become ready.
                         Waited 50/300s for instance <i-7a05ded5> to become ready.
                         Waited 55/300s for instance <i-7a05ded5> to become ready.
                         Waited 60/300s for instance <i-7a05ded5> to become ready.
                         Waited 65/300s for instance <i-7a05ded5> to become ready.
                         Waited 70/300s for instance <i-7a05ded5> to become ready.
                         Waited 75/300s for instance <i-7a05ded5> to become ready.
                         Waited 80/300s for instance <i-7a05ded5> to become ready.
                         Waited 85/300s for instance <i-7a05ded5> to become ready.
                         Waited 90/300s for instance <i-7a05ded5> to become ready.
                         Waited 95/300s for instance <i-7a05ded5> to become ready.
                         Waited 100/300s for instance <i-7a05ded5> to become ready.
                         Waited 105/300s for instance <i-7a05ded5> to become ready.
                  D      Console output: ---
                  2016/07/01 15:45:36Z: EC2ConfigMonitorState: 0
                  2016/07/01 15:45:36Z: Windows sysprep configuration complete.
                  2016/07/01 15:45:38Z: AMI Origin Version: 2016.06.15
                  2016/07/01 15:45:38Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
                  2016/07/01 15:45:38Z: OS: Microsoft Windows NT 6.3.9600
                  2016/07/01 15:45:38Z: OsVersion: 6.3
                  2016/07/01 15:45:38Z: OsProductName: Windows Server 2012 R2 Standard
                  2016/07/01 15:45:38Z: OsBuildLabEx: 9600.18292.amd64fre.winblue_ltsb.160330-1744
                  2016/07/01 15:45:38Z: Language: en-US
                  2016/07/01 15:45:38Z: TimeZone: Coordinated Universal Time
                  2016/07/01 15:45:38Z: Offset: UTC 00:00:00
                  2016/07/01 15:45:38Z: EC2 Agent: Ec2Config service v3.17.1032
                  2016/07/01 15:45:40Z: Message: Waiting for meta-data accessibility...
                  2016/07/01 15:45:40Z: Message: Meta-data is now available.
                  2016/07/01 15:45:41Z: AMI-ID: ami-8d0acfed
                  2016/07/01 15:45:41Z: Instance-ID: i-7a05ded5
                  2016/07/01 15:45:43Z: Driver: AWS PV Network Device v7.3.2.0
                  2016/07/01 15:45:43Z: Driver: AWS PV Storage Host Adapter v7.3.2.0
                  2016/07/01 15:45:43Z: Ec2SetPassword: Enabled
                  2016/07/01 15:45:44Z: RDPCERTIFICATE-SUBJECTNAME: WIN-3PIJKLNQ80D
                  2016/07/01 15:45:44Z: RDPCERTIFICATE-THUMBPRINT: 3B2C9F2B5166C02C372CA2983A012CF5E1E619F5
                  2016/07/01 15:45:47Z: Username: Administrator
                  2016/07/01 15:45:47Z: Password: <Password>
                  v0akI81N34BuMFoTB/z0BRfIMkrCogYVEVWy1vQyqEW79GPsVxYivtnEmpMfCEvq4rl/x7Lfi5/tn3goxdv4h+KwaaHh6fHfceOl69pKzDNVJfqw2inrxYpS3RQVCMferHdDuvl+0HYBsjM1Ym11bCy3KR4oOZVeg4O/q2Pp0GK5bg9w3JAiIA1Bw69i/BmCV8SuCPKqPrvG66anE99RwZwg+NZMEaKa9YxQp6W/K1DQquH9gKCvxRgNwRVBAcfnhEDUtv8JqMKEwHwe3xxwR0ERLc+yyRt7jxrnq+EPdwnGAxBVXNlqfkvCH32iAn+esocmgmPFWuMxwUt8NEFzVg==
                  </Password>
                  2016/07/01 15:45:49Z: Message: Windows is Ready to use

                         Waited 0/300s for instance <i-7a05ded5> to fetch windows admin password.
                         Retrieved Windows password for instance <i-7a05ded5>.
                         EC2 instance <i-7a05ded5> ready.
                  D      [WinRM] opening remote shell on http://10.194.15.199:5985/wsman
                  D      [WinRM] remote shell A000E413-CA37-47CF-87CB-9EC4F07E9B3D is open on http://10.194.15.199:5985/wsman
                  D      [WinRM] negotiate::http://10.194.15.199:5985/wsman<{:user=>"administrator", :pass=>"J?8oXM?cvig", :elevated_username=>"administrator", :elevated_password=>"J?8oXM?cvig", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
                  ')
                         [WinRM] Established

                  D      [WinRM] reusing existing connection negotiate::http://10.194.15.199:5985/wsman<{:user=>"administrator", :pass=>"J?8oXM?cvig", :elevated_username=>"administrator", :elevated_password=>"J?8oXM?cvig", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                  D      [WinRM] negotiate::http://10.194.15.199:5985/wsman<{:user=>"administrator", :pass=>"J?8oXM?cvig", :elevated_username=>"administrator", :elevated_password=>"J?8oXM?cvig", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)


                             Directory: C:\chef\ohai\hints


                         Mode                LastWriteTime     Length Name
                         ----                -------------     ------ ----
                         -a---          7/1/2016   3:46 PM          0 ec2.json


                  D      ec2:create '10.194.15.199'
                         Finished creating <chef-current-install-windows-2012r2> (2m27.87s).
                  -----> Converging <chef-current-install-windows-2012r2>...
                         Preparing files for transfer
                  D      Creating local sandbox in /tmp/cheftest/chef-current-install-windows-2012r2-sandbox-20160701-11604-11jjor0
                         Preparing dna.json
                  D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                         Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                         Removing non-cookbook files before transfer
                         Preparing validation.pem
                  D      Using a dummy validation.pem
                         Preparing client.rb
                  D      Creating client.rb from {:node_name=>"chef-current-install-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                  D      [WinRM] reusing existing connection negotiate::http://10.194.15.199:5985/wsman<{:user=>"administrator", :pass=>"J?8oXM?cvig", :elevated_username=>"administrator", :elevated_password=>"J?8oXM?cvig", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                  D      [WinRM] negotiate::http://10.194.15.199:5985/wsman<{:user=>"administrator", :pass=>"J?8oXM?cvig", :elevated_username=>"administrator", :elevated_password=>"J?8oXM?cvig", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
                  function Get-PlatformVersion {
                    switch -regex ((get-wmiobject win32_operatingsystem).version) {
                      '10\.0\.\d+' {$platform_version = '2012r2'}
                      '6\.3\.\d+'  {$platform_version = '2012r2'}
                      '6\.2\.\d+'  {$platform_version = '2012'}
                      '6\.1\.\d+'  {$platform_version = '2008r2'}
                      '6\.0\.\d+'  {$platform_version = '2008'}
                    }
                    return $platform_version
                  }

                  function Get-PlatformArchitecture {
                    if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                      $architecture = 'x86_64'
                    } else {
                      $architecture = 'i386'
                    }
                    return $architecture
                  }

                  function New-Uri {
                    param ($baseuri, $newuri)

                    try {
                    new-object System.Uri $baseuri, $newuri
                    }
                    catch [System.Management.Automation.MethodInvocationException]{
                      Write-Error "$($_.exception.message)"
                      throw $_.exception
                    }
                  }

                  function Get-WebContent {
                    param ($uri, $filepath)
                    $proxy = New-Object -TypeName System.Net.WebProxy
                    $wc = new-object System.Net.WebClient
                    $proxy.Address = $env:http_proxy
                    $wc.Proxy = $proxy

                    try {
                      if ([string]::IsNullOrEmpty($filepath)) {
                        $wc.downloadstring($uri)
                      }
                      else {
                        $wc.downloadfile($uri, $filepath)
                      }
                    }
                    catch {
                      $exception = $_.Exception
                      Write-Host "There was an error: "
                      do {
                        Write-Host "`t$($exception.message)"
                        $exception = $exception.innerexception
                      } while ($exception)
                      throw "Failed to download from $uri."
                    }
                  }

                  function Test-ProjectPackage {
                    [cmdletbinding()]
                    param ($Path, $Algorithm = 'SHA256', $Hash)

                    if (-not (get-command get-filehash))   {
                      function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                      function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                      function Get-FileHash ($Path, $Algorithm) {
                        $Path = (resolve-path $path).providerpath
                        $hash = @{Algorithm = $Algorithm; Path = $Path}
                        use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                          use ($in = (gi $path).OpenRead()) {
                            $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                          }
                        }
                        new-object PSObject -Property $hash
                      }
                    }
                    Write-Verbose "Testing the $Algorithm hash for $path."
                    $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
                    Write-Verbose "`tDesired Hash - '$hash'"
                    Write-Verbose "`tActual Hash  - '$ActualHash'"
                    $Valid = $ActualHash -eq $Hash
                    if (-not $Valid) {
                      Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
                    }
                    return $Valid
                  }

                  function Get-ProjectMetadata {
                    <#
                      .SYNOPSIS
                      Get metadata for a Chef Software, Inc. project
                      .DESCRIPTION
                      Get metadata for project
                      .EXAMPLE
                      iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                      Gets the download url and SHA256 checksum for the latest stable release of Chef.
                      .EXAMPLE
                      iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                      Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
                    #>
                    [cmdletbinding()]
                    param (
                      # Base url to retrieve metadata from.
                      [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                      [string]
                      # Project to install
                      [string]
                      $project = 'chef',
                      # Version of the application to install
                      # This parameter is optional, if not supplied it will provide the latest version,
                      # and if an iteration number is not specified, it will grab the latest available iteration.
                      # Partial version numbers are also acceptable (using v=11
                      # will grab the latest 11.x client which matches the other flags).
                      [string]
                      $version,
                      # Release channel to install from
                      $channel = 'unstable',
                      # The following legacy switches are just aliases for the current channel
                      [switch]
                      $prerelease,
                      [switch]
                      $nightlies,
                      [validateset('auto', 'i386', 'x86_64')]
                      [string]
                      $architecture = 'auto'
                    )

                    # PowerShell is only on Windows ATM
                    $platform = 'windows'
                    Write-Verbose "Platform: $platform"

                    $platform_version = Get-PlatformVersion
                    Write-Verbose "Platform Version: $platform_version"

                    if ($architecture -eq 'auto') {
                      $architecture = Get-PlatformArchitecture
                    }

                    Write-Verbose "Architecture: $architecture"
                    Write-Verbose "Project: $project"


                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 89a564bafc4b22db5f5539fe1925587c6bf2334f0c344e0c13264f52ae537b0a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.9/chef-12.12.7+20160701150941-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.10/chef-12.12.7+20160701150941-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.11/chef-12.12.7+20160701150941-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ios_xr/6/chef-12.12.7+20160701150941-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 96689d0525260209d68e4991db7144b0aa31a6f7628c9e4e5f23c6f150025fb0" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/nexus/7/chef-12.12.7+20160701150941-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 f5c620dc0166571903f28990240a5bbb1123bd6e8433a8d8d4aa9b2ba8587bbb" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 6d3b80e324377a5a80889d51ec5b0d0730d7503eb14c32a4ed7fd9e2ad21d615" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 8d63b437804b48672cc7b325bd3eb3a1ff525978b894c9b6e7c63db011aac295" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e910142a9bdc53757635db7f997f00e5415cc6dadea981aeec1e999489586ee2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 13296dfe3559a3cb5664a8319e57153635ba867a3a72feb4b040ce833fc22914" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e31a417ea73cefb3424496b07b19e188a5d079db40fc29bae0c8a24b2fb9d558" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 5fb71d38e54b0a6e8fc142f48e693de2dc54891edde59f65db61bf097766a3de" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 bc5a1ea39782df044cd069523d6534f72222855bbf99a98961858cdaee51d7c0" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 f4c5e3b437e5129e89a5ca0d69036dcf0e6e4b21a0eef61b495ab63a0be2fe94" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 58bed7db8fe43a1e8441d9a2a5e46b9fe4ab7e932dd1f7f5e0dc53adc004704c" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e30aac011f866a56f3542eaaa17cf18e40df6021e997e32fd3d1ae5b8f11e274" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 6fc165d1fbc96f5ed5ffbfedb154e7ede4d6e87fccec3c80c0de5510527bd673" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/6.1/chef-12.12.7+20160701150941-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/7.1/chef-12.12.7+20160701150941-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817" | out-file "$artifact_info_dir/artifact_info" -Append


                    $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

                    $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                      foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

                    Write-Verbose "Project details: "
                    foreach ($key in $package_metadata.keys) {
                      Write-Verbose "`t$key = $($package_metadata[$key])"
                    }
                    $package_metadata
                  }

                  function Install-Project {
                    <#
                      .SYNOPSIS
                      Install a Chef Software, Inc. product
                      .DESCRIPTION
                      Install a Chef Software, Inc. product
                      .EXAMPLE
                      iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                      Installs the latest stable version of Chef.
                      .EXAMPLE
                      iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                      Installs the latest integration build of the Chef Development Kit
                    #>
                    [cmdletbinding(SupportsShouldProcess=$true)]
                    param (
                      # Project to install
                      [string]
                      $project = 'chef',
                      # Release channel to install from
                      [validateset('current', 'stable', 'unstable')]
                      [string]
                      $channel = 'stable',
                      # Version of the application to install
                      # This parameter is optional, if not supplied it will provide the latest version,
                      # and if an iteration number is not specified, it will grab the latest available iteration.
                      # Partial version numbers are also acceptable (using v=11
                      # will grab the latest 11.x client which matches the other flags).
                      [string]
                      $version,
                      # Full path for the downloaded installer.
                      [string]
                      $filename,
                      # Full path to the location to download the installer
                      [string]
                      $download_directory = $env:temp,
                      # The following legacy switches are just aliases for the current channel
                      [switch]
                      $prerelease,
                      [switch]
                      $nightlies,
                      [validateset('auto', 'i386', 'x86_64')]
                      [string]
                      $architecture = 'auto'
                    )

                    $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

                    if (-not [string]::IsNullOrEmpty($filename)) {
                      $download_directory = split-path $filename
                      $filename = split-path $filename -leaf
                      if ([string]::IsNullOrEmpty($download_directory)) {
                        $download_directory = $pwd
                      }
                    }
                    else {
                      $filename = ($package_metadata.url -split '/')[-1]
                    }
                    Write-Verbose "Download directory: $download_directory"
                    Write-Verbose "Filename: $filename"

                    if (-not (test-path $download_directory)) {
                      mkdir $download_directory
                    }
                    $download_directory = (resolve-path $download_directory).providerpath
                    $download_destination = join-path $download_directory $filename

                    if ((test-path $download_destination) -and
                      (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                      Write-Verbose "Found existing valid installer at $download_destination."
                    }
                    else {
                      if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                        Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                        Get-WebContent $package_metadata.url -filepath $download_destination
                      }
                    }

                    if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                      if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                        Write-Host "Installing $project from $download_destination"
                        $installingProject = $True
                        $installAttempts = 0
                        while ($installingProject) {
                          $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                          $p.WaitForExit()
                          if ($p.ExitCode -eq 1618) {
                            Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                            continue
                          } elseif ($p.ExitCode -ne 0) {
                            throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                          }
                          $installingProject = $False
                        }
                      }
                      else {
                        throw "Failed to validate the downloaded installer for $project."
                      }
                    }
                  }
                  set-alias install -value Install-Project
                  export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

                  }

                  install -project chef -version 12.12.7+20160701150941 -channel unstable
                  )
                  D      creating hash for file $env:TEMP/chef-current-install-windows-2012r2-long_script.ps1
                  D      Running check_files.ps1
                  D      @{
                  D        "f819689a04a73f68cedca447fe8bbc14" = @{
                  D          "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1";
                  D          "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1";
                  D          "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1"
                  D        }
                  D      }
                  D      [WinRM] opening new shell since the current one failed
                  D      [WinRM] opening remote shell on http://10.194.15.199:5985/wsman
                  D      [WinRM] remote shell 849EBA56-7E45-44B2-B0B0-C7A6C72BA472 is open on http://10.194.15.199:5985/wsman
                  D      Cleaning up local sandbox in /tmp/cheftest/chef-current-install-windows-2012r2-sandbox-20160701-11604-11jjor0
                  D      ------Exception-------
                  D      Class: Kitchen::ActionFailed
                  D      Message: 1 actions failed.
                  >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                      "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1";
                      "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1"
                    }
                  }@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                      "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1";
                      "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1"
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                     tion
                      + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                     vokeExpressionCommand

                  At line:54 char:5
                  +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                  +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                  :String) [], RuntimeException
                      + FullyQualifiedErrorId : There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                          "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.
                     ps1";
                          "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1"
                     ;
                          "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1
                     "
                    }
                  }@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                          "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.
                     ps1";
                          "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1"
                     ;
                          "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1
                     "
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                          + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                     xcep
                     tion
                          + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                     s.In
                     vokeExpressionCommand


                  ] on chef-current-install-windows-2012r2
                  D      ----------------------
                  D      ------Backtrace-------
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:187:in `report_errors'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:178:in `run_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command/action.rb:39:in `block in call'
                  D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command/action.rb:37:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:56:in `perform'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:184:in `block (2 levels) in <class:CLI>'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:325:in `invoke_task'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/bin/kitchen:13:in `block in <top (required)>'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/errors.rb:174:in `with_friendly_errors'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/bin/kitchen:13:in `<top (required)>'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:23:in `load'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:23:in `<main>'
                  D      ----End Backtrace-----
                  D      -Composite Exception--
                  D      Class: Kitchen::ActionFailed
                  D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                      "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1";
                      "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1"
                    }
                  }@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                      "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1";
                      "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1"
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                     tion
                      + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                     vokeExpressionCommand

                  At line:54 char:5
                  +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                  +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                  :String) [], RuntimeException
                      + FullyQualifiedErrorId : There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                          "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.
                     ps1";
                          "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1"
                     ;
                          "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1
                     "
                    }
                  }@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                          "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.
                     ps1";
                          "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1"
                     ;
                          "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1
                     "
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                          + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                     xcep
                     tion
                          + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                     s.In
                     vokeExpressionCommand


                  ] on chef-current-install-windows-2012r2
                  D      ----------------------
                  D      ------Backtrace-------
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:394:in `parse_response'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:203:in `check_files'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:80:in `block in upload'
                  D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:78:in `upload'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:134:in `upload'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:394:in `run_from_file_command'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:102:in `execute'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:72:in `block in call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:526:in `reuse_connection'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:72:in `connection'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:71:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:373:in `block in converge_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in `synchronize_or_call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:478:in `block in action'
                  D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:477:in `action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:369:in `converge_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:348:in `block in transition_to'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in `each'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in `transition_to'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:149:in `setup'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in `public_send'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in `run_action_in_thread'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
                  D      ----End Backtrace-----
                  D      ---Nested Exception---
                  D      Class: Kitchen::ActionFailed
                  D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                      "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1";
                      "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1"
                    }
                  }@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                      "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1";
                      "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1"
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                     tion
                      + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                     vokeExpressionCommand

                  At line:54 char:5
                  +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                  +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                  :String) [], RuntimeException
                      + FullyQualifiedErrorId : There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                          "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.
                     ps1";
                          "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1"
                     ;
                          "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1
                     "
                    }
                  }@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                          "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.
                     ps1";
                          "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1"
                     ;
                          "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1
                     "
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                          + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                     xcep
                     tion
                          + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                     s.In
                     vokeExpressionCommand


                  ]
                  D      ----------------------
                  D      ------Backtrace-------
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:394:in `parse_response'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:203:in `check_files'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:80:in `block in upload'
                  D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:78:in `upload'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:134:in `upload'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:394:in `run_from_file_command'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:102:in `execute'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:72:in `block in call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:526:in `reuse_connection'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:72:in `connection'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:71:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:373:in `block in converge_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in `synchronize_or_call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:478:in `block in action'
                  D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:477:in `action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:369:in `converge_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:348:in `block in transition_to'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in `each'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in `transition_to'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:149:in `setup'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in `public_send'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in `run_action_in_thread'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
                  D      ----End Backtrace-----
                  D      [WinRM] closing remote shell A000E413-CA37-47CF-87CB-9EC4F07E9B3D on http://10.194.15.199:5985/wsman
                  D      [WinRM] closing remote shell 849EBA56-7E45-44B2-B0B0-C7A6C72BA472 on http://10.194.15.199:5985/wsman
                  D      [WinRM] remote shell 849EBA56-7E45-44B2-B0B0-C7A6C72BA472 closed
                  STDERR: >>>>>> ------Exception-------
                  >>>>>> Class: Kitchen::ActionFailed
                  >>>>>> Message: 1 actions failed.
                  >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                      "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1";
                      "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1"
                    }
                  }@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                      "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1";
                      "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1"
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                     tion
                      + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                     vokeExpressionCommand

                  At line:54 char:5
                  +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                  +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                  :String) [], RuntimeException
                      + FullyQualifiedErrorId : There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                          "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.
                     ps1";
                          "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1"
                     ;
                          "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1
                     "
                    }
                  }@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                          "target" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.
                     ps1";
                          "src_basename" = "chef-current-install-windows-2012r2-long_script.ps1"
                     ;
                          "dst" = "$env:TEMP/chef-current-install-windows-2012r2-long_script.ps1
                     "
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                          + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                     xcep
                     tion
                          + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                     s.In
                     vokeExpressionCommand


                  ] on chef-current-install-windows-2012r2
                  >>>>>> ----------------------
                  >>>>>> Please see .kitchen/logs/kitchen.log for more details
                  >>>>>> Also try running `kitchen diagnose --all` for configuration
                  ---- End output of bundle exec kitchen setup  -c -l debug ----
                  Ran bundle exec kitchen setup  -c -l debug returned 20

                  Resource Declaration:
                  ---------------------
                  # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/trivial/provision/cache/cookbooks/acceptance-cookbook/recipes/provision.rb

                    1: kitchen "setup"

                  Compiled Resource:
                  ------------------
                  # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/trivial/provision/cache/cookbooks/acceptance-cookbook/recipes/provision.rb:1:in `from_file'

                  kitchen("setup") do
                    action [:run]
                    retries 0
                    retry_delay 2
                    default_guard_interpreter :default
                    declared_type :kitchen
                    cookbook_name "acceptance-cookbook"
                    recipe_name "provision"
                    command "setup"
                    kitchen_options "-c -l debug"
                    kitchen_dir "/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/trivial"
                    chef_product "chef"
                  end

              Starting audit phase
            8512: |2

              Running handlers:
              [2016-07-01T15:46:32+00:00] ERROR: Running exception handlers
              Running handlers complete
              [2016-07-01T15:46:32+00:00] ERROR: Exception handlers complete
              Chef Client failed. 0 resources updated in 02 minutes 48 seconds
              [2016-07-01T15:46:32+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/trivial/provision/cache/chef-stacktrace.out
              [2016-07-01T15:46:32+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
              [2016-07-01T15:46:32+00:00] ERROR: Found 1 errors, they are stored in the backtrace
              [2016-07-01T15:46:34+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
              STDERR:
              ---- End output of chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/trivial/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/trivial/provision/dna.json -o acceptance-cookbook::provision --no-color ----
              Ran chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/trivial/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/trivial/provision/dna.json -o acceptance-cookbook::provision --no-color returned 1
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:289:in `invalid!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:276:in `error!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/chef_runner.rb:53:in `block in run!'
              /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:219:in `block in with_clean_env'
              /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:199:in `with_original_env'
              /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:205:in `with_clean_env'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/chef_runner.rb:42:in `run!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:149:in `run_command'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:116:in `block in run_suite'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:114:in `each'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:114:in `run_suite'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:76:in `block (2 levels) in start_worker'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:74:in `loop'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:74:in `block in start_worker'
              CHEF-ACCEPTANCE::[2016-07-01 15:46:34 +0000] --force-destroy specified so attempting to run the destroy recipe
              TRIVIAL::DESTROY::[2016-07-01 15:46:34 +0000] Initialized [/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/logs/trivial/destroy.log] logger...
            9335: |
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:19 +0000]                              * execute[install-key 58118E89F3A912897C070ADBF76221572C52609D] action run

                                             ================================================================================
                                             Error executing action `run` on resource 'execute[install-key 58118E89F3A912897C070ADBF76221572C52609D]'
                                             ================================================================================

                                             Mixlib::ShellOut::ShellCommandFailed
                                             ------------------------------------
                                             Expected process to exit with [0], but received '2'
                                             ---- Begin output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D ----
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:19 +0000]                                STDOUT: Executing: gpg --ignore-time-conflict --no-options --no-default-keyring --homedir /tmp/tmp.FgMIvkGpBQ --no-auto-check-trustdb --trust-model always --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:19 +0000]                                STDERR: gpg: requesting key 2C52609D from hkp server p80.pool.sks-keyservers.net
            9460: |2

                                       Running handlers:
                                       [2016-07-01T15:47:20+00:00] ERROR: Running exception handlers
                                       Running handlers complete
                                       [2016-07-01T15:47:20+00:00] ERROR: Exception handlers complete
                                       Chef Client failed. 5 resources updated in 02 minutes 11 seconds
                                       [2016-07-01T15:47:20+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json
                                       [2016-07-01T15:47:20+00:00] FATAL: Stacktrace dumped to /tmp/kitchen/cache/chef-stacktrace.out
                                       [2016-07-01T15:47:20+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
                                       [2016-07-01T15:47:20+00:00] ERROR: Found 1 errors, they are stored in the backtrace
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:21 +0000]                          [2016-07-01T15:47:21+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:21 +0000]                   D      Cleaning up local sandbox in /tmp/cheftest/docker-default-ubuntu-1404-sandbox-20160701-11660-y00zuf
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:21 +0000]                   D      [SSH] shutting previous connection ubuntu@10.194.12.142<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"ubuntu"}>
            9551: |2
                                D      ----End Backtrace-----
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:21 +0000]
                      ================================================================================
                      Error executing action `run` on resource 'execute[bundle exec kitchen converge  -c -l debug]'
                      ================================================================================

                      Mixlib::ShellOut::ShellCommandFailed
                      ------------------------------------
                      Expected process to exit with [0], but received '20'
                      ---- Begin output of bundle exec kitchen converge  -c -l debug ----
                      STDOUT: -----> Starting Kitchen (v1.10.2)
                      D      Berksfile found at /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/docker/Berksfile, loading Berkshelf
                      D      Berkshelf 4.3.5 library loaded
                      -----> Creating <docker-default-ubuntu-1404>...
                             If you are not using an account that qualifies under the AWS
                      free-tier, you may be charged to run these suites. The charge
                      should be minimal, but neither Test Kitchen nor its maintainers
                      are responsible for your incurred costs.

                      D      platform name ubuntu-14.04 appears to be a standard platform. Searching for ubuntu 14.04 ...
                      D      Searching for images matching {:name=>"ubuntu/images/*/ubuntu-*-14.04-*-server-*", :"owner-id"=>"099720109477", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                      D      Search returned 58 images:
                      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160627: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-29T15:13:53.000Z
                      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160620: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-21T12:07:59.000Z
                      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160602: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-03T01:17:21.000Z
                      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160516: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-17T09:54:45.000Z
                      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160509.1: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-10T11:55:52.000Z
                      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160406: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-06T22:01:48.000Z
                      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160314: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-03-15T08:30:56.000Z
                      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160222: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-02-23T13:53:30.000Z
                      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160217.1: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-02-18T01:37:46.000Z
                      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160201: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-02-02T12:11:43.000Z
                      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160119: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-01-20T12:15:17.000Z
                      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160114.5: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-01-15T22:11:35.000Z
                      D      - ubuntu/images/
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:21 +0000] hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151218: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2015-12-20T01:45:49.000Z
                      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151217: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2015-12-18T09:40:49.000Z
            10645: |2
                                 * execute[install-key 58118E89F3A912897C070ADBF76221572C52609D] action run

                                   ================================================================================
                                   Error executing action `run` on resource 'execute[install-key 58118E89F3A912897C070ADBF76221572C52609D]'
                                   ================================================================================

                                   Mixlib::ShellOut::ShellCommandFailed
                                   ------------------------------------
                                   Expected process to exit with [0], but received '2'
                                   ---- Begin output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D ----
                                   STDOUT: Executing: gpg --ignore-time-conflict --no-options --no-default-keyring --homedir /tmp/tmp.FgMIvkGpBQ --no-auto-check-trustdb --trust-model always --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg --recv --keyserver hkp://p80.pool.
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:21 +0000] sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D
                                   STDERR: gpg: requesting key 2C52609D from hkp server p80.pool.sks-keyservers.net
            10663: |2
                                   Cookbook Trace:
                                   ---------------
                                   /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in `run_action'
                                   /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in `run_action'

                                   Resource Declaration:
            10705: |2


                                 ================================================================================
                                 Error executing action `add` on resource 'apt_repository[docker]'
                                 ================================================================================

                                 Mixlib::ShellOut::ShellCommandFailed
                                 ------------------------------------
                                 execute[install-key 58118E89F3A912897C070ADBF76221572C52609D] (/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/lib/chef/provider/apt_repository.rb line 201) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '2'
                                 ---- Begin output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D ----
                                 STDOUT: Executing: gpg --ignore-time-conflict --no-options --no-default-keyring --homedir /tmp/tmp.FgMIvkGpBQ --no-auto-check-trustdb --trust-model always --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg --recv --keyserver hkp://p80.po
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:21 +0000] ol.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D
                                 STDERR: gpg: requesting key 2C52609D from hkp server p80.pool.sks-keyservers.net
            10723: |2
                                 Cookbook Trace:
                                 ---------------
                                 /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in `run_action'
                                 /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in `run_action'

                                 Resource Declaration:
            10769: |2

                             Running handlers:
                             [2016-07-01T15:47:20+00:00] ERROR: Running exception handlers
                             Running handlers complete
                             [2016-07-01T15:47:20+00:00] ERROR: Exception handlers complete
                             Chef Client failed. 5 resources updated in 02 minutes 11 seconds
                             [2016-07-01T15:47:20+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json
                             [2016-07-01T15:47:20+00:00] FATAL: Stacktrace dumped to /tmp/kitchen/cache/chef-stacktrace.out
                             [2016-07-01T15:47:20+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
                             [2016-07-01T15:47:20+00:00] ERROR: Found 1 errors, they are stored in the backtrace
                             [2016-07-01T15:47:21+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
                      D      Cleaning up local sandbox in /tmp/cheftest/docker-default-ubuntu-1404-sandbox-20160701-11660-y00zuf
                      D      [SSH] shutting previous connection ubuntu@10.194.12.142<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
            10903: |2


                    ================================================================================
                    Error executing action `run` on resource 'cookbook_kitchen[converge docker]'
                    ================================================================================

                    Mixlib::ShellOut::ShellCommandFailed
                    ------------------------------------
                    execute[bundle exec kitchen converge  -c -l debug] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 36) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '20'
                    ---- Begin output of bundle exec kitchen converge  -c -l debug ----
                    STDOUT: -----> Sta
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:21 +0000] rting Kitchen (v1.10.2)
                    D      Berksfile found at /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/docker/Berksfile, loading Berkshelf
            11997: |2
                               * execute[install-key 58118E89F3A912897C070ADBF76221572C52609D] action run

                                 ================================================================================
                                 Error executing action `run` on resource 'execute[install-key 58118E89F3A912897C070ADBF76221572C52609D]'
                                 ================================================================================

                                 Mixlib::ShellOut::ShellCommandFailed
                                 ------------------------------------
                                 Expected process to exit with [0], but received '2'
                                 ---- Begin output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D ----
                                 STDOUT: Executing: gpg --ignore-time-conflict --no-options --no-default-keyring --homedir /tmp/tmp.FgMIvkGpBQ --no-auto-check-trustdb --trust-model always --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D
                                 STDERR: gpg: requesting key 2C52609D from hkp server p80.pool.sks-keyservers.net
                                 gpg: keyserver timed out
                                 gpg: keyserver receive failed: keyserver error
                                 ---- End output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D ----
                                 Ran apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D returned 2

                                 Cookbook Trace:
                                 ---------------
                                 /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in `run_action'
                                 /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in `run_action'

                                 Resource Declaration:
                                 ---------------------
                                 # In /opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/lib/chef/provider/apt_repository.rb

                                 201:         declare_resource(:execute, "install-key #{key}") do
                                 202:           command cmd
                                 203:           sensitive new_resource.sensitive
                                 204:           not_if do
                                 205:             present = extract_fingerprints_from_cmd("apt-key finger").any? do |fp|
                                 206:               fp.end_with? key.upcase

              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:21 +0000]                  207:             end
            12057: |2


                               ================================================================================
                               Error executing action `add` on resource 'apt_repository[docker]'
                               ================================================================================

                               Mixlib::ShellOut::ShellCommandFailed
                               ------------------------------------
                               execute[install-key 58118E89F3A912897C070ADBF76221572C52609D] (/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/lib/chef/provider/apt_repository.rb line 201) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '2'
                               ---- Begin output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D ----
                               STDOUT: Executing: gpg --ignore-time-conflict --no-options --no-default-keyring --homedir /tmp/tmp.FgMIvkGpBQ --no-auto-check-trustdb --trust-model always --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D
                               STDERR: gpg: requesting key 2C52609D from hkp server p80.pool.sks-keyservers.net
                               gpg: keyserver timed out
                               gpg: keyserver receive failed: keyserver error
                               ---- End output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D ----
                               Ran apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D returned 2

                               Cookbook Trace:
                               ---------------
                               /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in `run_action'
                               /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in `run_action'

                               Resource Declaration:
                               ---------------------
                               # In /tmp/kitchen/cache/cookbooks/chef-apt-docker/recipes/default.rb

                                20: apt_repository 'docker' do
                                21:   uri 'https://apt.dockerproject.org/repo'
                                22:   distribution "#{node['platform']}-#{node['lsb']['codename']}"
                                23:   keyserver 'p80.pool.sks-keyservers.net'
                                24:   components node['chef-apt-docker']['components']
                                25:   key '58118E89F3A912897C070ADBF76221572C52609D'
                                26: end

                               Compiled Resource:
                               ------------------
                               # Declared in /tmp/kitchen/cache/cookbooks/ch
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:21 +0000] ef-apt-docker/recipes/default.rb:20:in `from_file'
            12121: |2

                           Running handlers:
                           [2016-07-01T15:47:20+00:00] ERROR: Running exception handlers
                           Running handlers complete
                           [2016-07-01T15:47:20+00:00] ERROR: Exception handlers complete
                           Chef Client failed. 5 resources updated in 02 minutes 11 seconds
                           [2016-07-01T15:47:20+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json
                           [2016-07-01T15:47:20+00:00] FATAL: Stacktrace dumped to /tmp/kitchen/cache/chef-stacktrace.out
                           [2016-07-01T15:47:20+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
                           [2016-07-01T15:47:20+00:00] ERROR: Found 1 errors, they are stored in the backtrace
                           [2016-07-01T15:47:21+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
                    D      Cleaning up local sandbox in /tmp/cheftest/docker-default-ubuntu-1404-sandbox-20160701-11660-y00zuf
                    D      [SSH] shutting previous connection ubuntu@10.194.12.142<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"ubuntu"}>
            12250: |2


                  ================================================================================
                  Error executing action `run` on resource 'top_cookbooks[converge]'
                  ================================================================================

                  Mixlib::ShellOut::ShellCommandFailed
                  ------------------------------------
                  cookbook_kitchen[converge docker] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/libraries/top_cookbooks.rb line 7) had an error: Mixlib::ShellOut::ShellCommandFailed: execute[bundle exec kitchen converge  -c -l debug] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 36) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '20'
                  ---- Begin output of bundle exec kitchen converge  -c -l debug ----
                  STDOUT: -----> Starting Kitchen (v1.10.2)
                  D      Berksfile found at /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/docker/Berksfile, loading Berkshelf
                  D      Berkshelf 4.3.5 library loaded
                  -----> Creating <docker-default-ubuntu-1404>...
                         If you are not using an account that qualifies under the AWS
                  free-tier, you may be charged to run these suites. The charge
                  should be minimal, but neither Test Kitchen nor its maintainers
                  are responsible for your incurred costs.

                  D      platform name ubuntu-14.04 appears to be a standard platform. Searching for ubuntu 14.04 ...
                  D      Searching for images matching {:name=>"ubuntu/images/*/ubuntu-*-14.04-*-server-*", :"owner-id"=>"099720109477", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                  D      Search returned 58 images:
                  D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160627: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-29T15:13:53.000Z
                  D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160620: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-21T12:07:59.000Z
                  D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160602: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-03T01:17:21.000Z
                  D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160516: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-17T09:54:45.000Z
                  D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160509.1: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-10T11:55:52.000Z
                  D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160406: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-06T22:01:48.000Z
                  D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160314: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-03-15T08:30:56.000Z
                  D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160222: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-02-23T13:53:30.000Z
                  D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160217.1: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtuali
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:21 +0000] zation: hvm, Storage: ebs gp2, Created: 2016-02-18T01:37:46.000Z
                  D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160201: Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-02-02T12:11:43.000Z
            13358: |2
                             * execute[install-key 58118E89F3A912897C070ADBF76221572C52609D] action run

                               ================================================================================
                               Error executing action `run` on resource 'execute[install-key 58118E89F3A912897C070ADBF76221572C52609D]'
                               ================================================================================

                               Mixlib::ShellOut::ShellCommandFailed
                               ------------------------------------
                               Expected process to exit with [0], but received '2'
                               ---- Begin output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D ----
                               STDOUT: Executing: gpg --ignore-time-conflict --no-options --no-default-keyring --homedir /tmp/tmp.FgMIvkGpBQ --no-auto-check-trustdb --trust-model always --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D
                               STDERR: gpg: requesting key 2C52609D from hkp server p80.pool.sks-keyservers.net
                               gpg: keyserver timed out
                               gpg: keyserver receive failed: keyserver error
                               ---- End output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D ----
                               Ran apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D returned 2

                               Cookbook Trace:
                               ---------------
                               /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in `run_action'
                               /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in `run_action'

                               Resource Declaration:
                               ---------------------
                               # In /opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/lib/chef/provider/apt_repository.rb

                               201:         declare_resource(:execute, "install-key #{key}") do
                               202:           command cmd
                               203:           sensitive new_resource.sensitive
                               204:           not_if do
                               205:             present = extract_fingerprints_from_cmd("apt
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:21 +0000] -key finger").any? do |fp|
                               206:               fp.end_with? key.upcase
            13418: |2


                             ================================================================================
                             Error executing action `add` on resource 'apt_repository[docker]'
                             ================================================================================

                             Mixlib::ShellOut::ShellCommandFailed
                             ------------------------------------
                             execute[install-key 58118E89F3A912897C070ADBF76221572C52609D] (/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/lib/chef/provider/apt_repository.rb line 201) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '2'
                             ---- Begin output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D ----
                             STDOUT: Executing: gpg --ignore-time-conflict --no-options --no-default-keyring --homedir /tmp/tmp.FgMIvkGpBQ --no-auto-check-trustdb --trust-model always --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D
                             STDERR: gpg: requesting key 2C52609D from hkp server p80.pool.sks-keyservers.net
                             gpg: keyserver timed out
                             gpg: keyserver receive failed: keyserver error
                             ---- End output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D ----
                             Ran apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D returned 2

                             Cookbook Trace:
                             ---------------
                             /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in `run_action'
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:21 +0000]
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:21 +0000]            /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in `run_action'
            13489: |2

                         Running handlers:
                         [2016-07-01T15:47:20+00:00] ERROR: Running exception handlers
                         Running handlers complete
                         [2016-07-01T15:47:20+00:00] ERROR: Exception handlers complete
                         Chef Client failed. 5 resources updated in 02 minutes 11 seconds
                         [2016-07-01T15:47:20+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json
                         [2016-07-01T15:47:20+00:00] FATAL: Stacktrace dumped to /tmp/kitchen/cache/chef-stacktrace.out
                         [2016-07-01T15:47:20+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
                         [2016-07-01T15:47:20+00:00] ERROR: Found 1 errors, they are stored in the backtrace
                         [2016-07-01T15:47:21+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
                  D      Cleaning up local sandbox in /tmp/cheftest/docker-default-ubuntu-1404-sandbox-20160701-11660-y00zuf
                  D      [SSH] shutting previous connection ubuntu@10.194.12.142<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"ubuntu"}>
            13625: |
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:22 +0000] Running handlers:
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:22 +0000]
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:22 +0000] [2016-07-01T15:47:22+00:00] ERROR: Running exception handlers
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:22 +0000] Running handlers complete
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:22 +0000] [2016-07-01T15:47:22+00:00] ERROR: Exception handlers complete
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:22 +0000] Chef Client failed. 2 resources updated in 03 minutes 39 seconds
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:22 +0000]
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:22 +0000] [2016-07-01T15:47:22+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/chef-stacktrace.out
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:22 +0000] [2016-07-01T15:47:22+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:22 +0000] [2016-07-01T15:47:22+00:00] ERROR: Found 1 errors, they are stored in the backtrace
              TOP-COOKBOOKS::PROVISION::[2016-07-01 15:47:23 +0000] [2016-07-01T15:47:23+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
              CHEF-ACCEPTANCE::[2016-07-01 15:47:23 +0000] Encountered an error running the recipe provision: Expected process to exit with [0], but received '1'
              ---- Begin output of chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/dna.json -o acceptance-cookbook::provision --no-color ----
            14726: |2
                                           * execute[install-key 58118E89F3A912897C070ADBF76221572C52609D] action run

                                             ================================================================================
                                             Error executing action `run` on resource 'execute[install-key 58118E89F3A912897C070ADBF76221572C52609D]'
                                             ================================================================================

                                             Mixlib::ShellOut::ShellCommandFailed
                                             ------------------------------------
                                             Expected process to exit with [0], but received '2'
                                             ---- Begin output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D ----
                                             STDOUT: Executing: gpg --ignore-time-conflict --no-options --no-default-keyring --homedir /tmp/tmp.FgMIvkGpBQ --no-auto-check-trustdb --trust-model always --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D
                                             STDERR: gpg: requesting key 2C52609D from hkp server p80.pool.sks-keyservers.net
                                             gpg: keyserver timed out
                                             gpg: keyserver receive failed: keyserver error
                                             ---- End output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D ----
                                             Ran apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D returned 2

                                             Cookbook Trace:
                                             ---------------
                                             /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in `run_action'
                                             /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in `run_action'

                                             Resource Declaration:
                                             ---------------------
                                             # In /opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/lib/chef/provider/apt_repository.rb

                                             201:         declare_resource(:execute, "install-key #{key}") do
                                             202:           command cmd
                                             203:           sensitive new_resource.sensitive
                                             204:           not_if do
                                             205:             present = extract_fingerprints_from_cmd("apt-key finger").any? do |fp|
                                             206:               fp.end_with? key.upcase
                                             207:             end
                                             208:             present && key_is_valid?("apt-key list", key.upcase)
                                             209:           end
                                             210:           notifies :run, "execute[apt-cache gencaches]", :immediately
                                             211:         end
                                             212:

                                             Compiled Resource:
                                             ------------------
                                             # Declared in /opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/lib/chef/provider/apt_repository.rb:201:in `install_key_from_keyserver'

                                             execute("install-key 58118E89F3A912897C070ADBF76221572C52609D") do
                                        action [:run]
                                        retries 0
            14785: |2


                                           ================================================================================
                                           Error executing action `add` on resource 'apt_repository[docker]'
                                           ================================================================================

                                           Mixlib::ShellOut::ShellCommandFailed
                                           ------------------------------------
                                           execute[install-key 58118E89F3A912897C070ADBF76221572C52609D] (/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/lib/chef/provider/apt_repository.rb line 201) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '2'
                                           ---- Begin output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D ----
                                           STDOUT: Executing: gpg --ignore-time-conflict --no-options --no-default-keyring --homedir /tmp/tmp.FgMIvkGpBQ --no-auto-check-trustdb --trust-model always --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D
                                           STDERR: gpg: requesting key 2C52609D from hkp server p80.pool.sks-keyservers.net
                                           gpg: keyserver timed out
                                           gpg: keyserver receive failed: keyserver error
                                           ---- End output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D ----
                                           Ran apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D returned 2

                                           Cookbook Trace:
                                           ---------------
                                           /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in `run_action'
                                           /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in `run_action'

                                           Resource Declaration:
                                           ---------------------
                                           # In /tmp/kitchen/cache/cookbooks/chef-apt-docker/recipes/default.rb

                                            20: apt_repository 'docker' do
                                            21:   uri 'https://apt.dockerproject.org/repo'
                                            22:   distribution "#{node['platform']}-#{node['lsb']['codename']}"
                                            23:   keyserver 'p80.pool.sks-keyservers.net'
                                            24:   components node['chef-apt-docker']['components']
                                            25:   key '58118E89F3A912897C070ADBF76221572C52609D'
                                            26: end

                                           Compiled Resource:
                                           ------------------
                                           # Declared in /tmp/kitchen/cache/cookbooks/chef-apt-docker/recipes/default.rb:20:in `from_file'

                                           apt_repository("docker") do
                                             action [:add]
                                             retries 0
                                             retry_delay 2
                                             default_guard_interpreter :default
                                             declared_type :apt_repository
                                             cookbook_name "chef-apt-docker"
                                             recipe_name "default"
                                             uri "https://apt.dockerproject.org/repo"
                                             distribution "ubuntu-trusty"
                                             keyserver "p80.pool.sks-keyservers.net"
                                             components ["main"]
                                             key "58118E89F3A912897C070ADBF76221572C52609D"
                                             cache_rebuild true
                                           end

                                           Platform:
                                           ---------
                                           x86_64-linux

                                       Starting audit phase
            14848: |2

                                       Running handlers:
                                       [2016-07-01T15:47:20+00:00] ERROR: Running exception handlers
                                       Running handlers complete
                                       [2016-07-01T15:47:20+00:00] ERROR: Exception handlers complete
                                       Chef Client failed. 5 resources updated in 02 minutes 11 seconds
                                       [2016-07-01T15:47:20+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json
                                       [2016-07-01T15:47:20+00:00] FATAL: Stacktrace dumped to /tmp/kitchen/cache/chef-stacktrace.out
                                       [2016-07-01T15:47:20+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
                                       [2016-07-01T15:47:20+00:00] ERROR: Found 1 errors, they are stored in the backtrace
                                       [2016-07-01T15:47:21+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
                                D      Cleaning up local sandbox in /tmp/cheftest/docker-default-ubuntu-1404-sandbox-20160701-11660-y00zuf
                                D      [SSH] shutting previous connection ubuntu@10.194.12.142<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"ubuntu"}>
            14938: "                  D      ----End Backtrace-----\n\n        ================================================================================\n
              \       Error executing action `run` on resource 'execute[bundle exec
              kitchen converge  -c -l debug]'\n        ================================================================================\n\n
              \       Mixlib::ShellOut::ShellCommandFailed\n        ------------------------------------\n
              \       Expected process to exit with [0], but received '20'\n        ----
              Begin output of bundle exec kitchen converge  -c -l debug ----\n        STDOUT:
              -----> Starting Kitchen (v1.10.2)\n        D      Berksfile found at
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/docker/Berksfile,
              loading Berkshelf\n        D      Berkshelf 4.3.5 library loaded\n        ----->
              Creating <docker-default-ubuntu-1404>...\n               If you are
              not using an account that qualifies under the AWS\n        free-tier,
              you may be charged to run these suites. The charge\n        should be
              minimal, but neither Test Kitchen nor its maintainers\n        are responsible
              for your incurred costs.\n\n        D      platform name ubuntu-14.04
              appears to be a standard platform. Searching for ubuntu 14.04 ...\n
              \       D      Searching for images matching {:name=>\"ubuntu/images/*/ubuntu-*-14.04-*-server-*\",
              :\"owner-id\"=>\"099720109477\", :architecture=>\"x86_64\", :\"virtualization-type\"=>\"hvm\",
              :\"block-device-mapping.volume-type\"=>\"gp2\", :\"image-type\"=>\"machine\"}
              ...\n        D      Search returned 58 images:\n        D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160627:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-06-29T15:13:53.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160620:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-06-21T12:07:59.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160602:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-06-03T01:17:21.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160516:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-05-17T09:54:45.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160509.1:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-05-10T11:55:52.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160406:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-04-06T22:01:48.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160314:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-03-15T08:30:56.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160222:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-02-23T13:53:30.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160217.1:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-02-18T01:37:46.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160201:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-02-02T12:11:43.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160119:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-01-20T12:15:17.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160114.5:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-01-15T22:11:35.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151218:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-12-20T01:45:49.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151217:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-12-18T09:40:49.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151117:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-11-18T08:17:32.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151105:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-11-06T23:03:53.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151019:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-10-20T09:04:11.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151015:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-10-15T20:43:54.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151008:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-10-09T08:48:14.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151007:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-10-08T08:57:50.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151005:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-10-06T09:26:41.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150930:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-10-01T11:24:14.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150928:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-09-29T11:13:44.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150924:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-09-25T13:37:47.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150908:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-09-09T05:59:15.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150901.1:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-09-02T05:15:07.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150814:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-08-15T08:11:39.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150813:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-08-14T07:14:42.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150812:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-08-13T08:50:05.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150810:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-08-11T11:43:49.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150805:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-08-06T19:29:13.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150731:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-08-01T09:17:08.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150727:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-07-28T07:13:51.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150724:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-07-25T05:22:13.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150629:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-06-30T09:14:39.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150609:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-06-09T17:42:29.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150608:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-06-09T03:54:29.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150603:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-06-04T08:13:50.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150528:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-05-29T10:15:24.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150506:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-05-07T08:14:11.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150417:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-04-17T12:06:11.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150408.1:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-04-09T08:52:15.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150325:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-03-25T23:56:26.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150305:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-03-05T11:02:56.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150227.2:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-02-28T07:15:31.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150225.2:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-02-26T06:03:04.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150209.1:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-02-10T05:22:56.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150123:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-01-23T10:57:13.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20141125:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2014-11-26T01:50:28.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140927:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2014-09-30T00:19:14.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140926:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2014-09-26T16:05:00.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140924:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2014-09-25T14:07:23.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140923:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2014-09-23T14:15:33.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140829:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2014-08-29T18:46:07.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140816:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2014-08-16T22:57:30.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140813:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2014-08-14T00:50:31.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140724:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2014-07-25T08:28:59.000Z\n        D
              \     - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140607.1:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2014-07-23T18:05:49.000Z\n        D
              \     Creating EC2 instance in region us-west-2 with properties:\n        D
              \     - instance_type = \"m3.large\"\n        D      - ebs_optimized
              = false\n        D      - image_id = \"ami-42569022\"\n        D      -
              key_name = \"jenkins\"\n        D      - subnet_id = \"subnet-19ac017c\"\n
              \       D      - private_ip_address = nil\n        D      - placement
              = {:availability_zone=>\"us-west-2a\"}\n        D      - security_group_ids
              = [\"sg-e401eb83\", \"sg-96274af3\"]\n               Instance <i-823ae12d>
              requested.\n               Polling AWS for existence, attempt 0...\n
              \              Attempting to tag the instance, 0 retries\n               EC2
              instance <i-823ae12d> created.\n               Waited 0/300s for instance
              <i-823ae12d> to become ready.\n               Waited 5/300s for instance
              <i-823ae12d> to become ready.\n               Waited 10/300s for instance
              <i-823ae12d> to become ready.\n               Waited 15/300s for instance
              <i-823ae12d> to become ready.\n               Waited 20/300s for instance
              <i-823ae12d> to become ready.\n               EC2 instance <i-823ae12d>
              ready.\n        D      [SSH] opening connection to ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"]}>\n
              \       D      [SSH] connection failed (#<Errno::ECONNREFUSED: Connection
              refused - connect(2) for 10.194.12.142:22>)\n               Waiting
              for SSH service on 10.194.12.142:22, retrying in 3 seconds\n        D
              \     [SSH] opening connection to ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}>\n        D      [SSH] connection failed (#<Errno::ECONNREFUSED:
              Connection refused - connect(2) for 10.194.12.142:22>)\n               Waiting
              for SSH service on 10.194.12.142:22, retrying in 3 seconds\n        D
              \     [SSH] opening connection to ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}>\n        D      [SSH] ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}> (echo '[SSH] Established')\n               [SSH]
              Established\n        D      Using sudo_command='sudo -E' for ohai hints\n
              \       D      [SSH] reusing existing connection ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}>\n        D      [SSH] ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}> (sudo -E mkdir -p /etc/chef/ohai/hints; sudo -E
              touch /etc/chef/ohai/hints/ec2.json)\n        D      ec2:create '10.194.12.142'\n
              \              Finished creating <docker-default-ubuntu-1404> (0m39.56s).\n
              \       -----> Converging <docker-default-ubuntu-1404>...\n               Preparing
              files for transfer\n        D      Creating local sandbox in /tmp/cheftest/docker-default-ubuntu-1404-sandbox-20160701-11660-y00zuf\n
              \              Preparing dna.json\n        D      Creating dna.json
              from {:chef_acceptance=>\"true\", :use_system_chef=>\"true\", :docker=>{:version=>\"1.10.0\"},
              :run_list=>[\"recipe[apt]\", \"recipe[chef-apt-docker]\"]}\n               Resolving
              cookbook dependencies with Berkshelf 4.3.5...\n        D      Using
              Berksfile from /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/docker/Berksfile\n
              \              Removing non-cookbook files before transfer\n               Preparing
              validation.pem\n        D      Using a dummy validation.pem\n               Preparing
              client.rb\n        D      Creating client.rb from {:node_name=>\"docker-default-ubuntu-1404\",
              :checksum_path=>\"/tmp/kitchen/checksums\", :file_cache_path=>\"/tmp/kitchen/cache\",
              :file_backup_path=>\"/tmp/kitchen/backup\", :cookbook_path=>[\"/tmp/kitchen/cookbooks\",
              \"/tmp/kitchen/site-cookbooks\"], :data_bag_path=>\"/tmp/kitchen/data_bags\",
              :environment_path=>\"/tmp/kitchen/environments\", :node_path=>\"/tmp/kitchen/nodes\",
              :role_path=>\"/tmp/kitchen/roles\", :client_path=>\"/tmp/kitchen/clients\",
              :user_path=>\"/tmp/kitchen/users\", :validation_key=>\"/tmp/kitchen/validation.pem\",
              :client_key=>\"/tmp/kitchen/client.pem\", :chef_server_url=>\"http://127.0.0.1:8889\",
              :encrypted_data_bag_secret=>\"/tmp/kitchen/encrypted_data_bag_secret\",
              :audit_mode=>\":enabled\", :named_run_list=>{}}\n        D      [SSH]
              reusing existing connection ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}>\n        D      [SSH] ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}> (sudo -E cat > /tmp/chef-installer.sh <<\"EOL\"\n
              \       #!/bin/bash\n        #!/bin/sh\n        # WARNING: REQUIRES
              /bin/sh\n        #\n        # - must run on /bin/sh on solaris 9\n        #
              - must run on /bin/sh on AIX 6.x\n        #\n        # Copyright:: Copyright
              (c) 2010-2015 Chef Software, Inc.\n        # License:: Apache License,
              Version 2.0\n        #\n        # Licensed under the Apache License,
              Version 2.0 (the \"License\");\n        # you may not use this file
              except in compliance with the License.\n        # You may obtain a copy
              of the License at\n        #\n        #     http://www.apache.org/licenses/LICENSE-2.0\n
              \       #\n        # Unless required by applicable law or agreed to
              in writing, software\n        # distributed under the License is distributed
              on an \"AS IS\" BASIS,\n        # WITHOUT WARRANTIES OR CONDITIONS OF
              ANY KIND, either express or implied.\n        # See the License for
              the specific language governing permissions and\n        # limitations
              under the License.\n        #\n\n        # helpers.sh\n        ############\n
              \       # This section has some helper functions to make life easier.\n
              \       #\n        # Outputs:\n        # $tmp_dir: secure-ish temp directory
              that can be used during installation.\n        ############\n\n        #
              Check whether a command exists - returns 0 if it does, 1 if it does
              not\n        exists() {\n          if command -v $1 >/dev/null 2>&1\n
              \         then\n            return 0\n          else\n            return
              1\n          fi\n        }\n\n        # Output the instructions to report
              bug about this script\n        report_bug() {\n          echo \"Version:
              $version\"\n          echo \"\"\n          echo \"Please file a Bug
              Report at https://github.com/chef/omnitruck/issues/new\"\n          echo
              \"Alternatively, feel free to open a Support Ticket at https://www.chef.io/support/tickets\"\n
              \         echo \"More Chef support resources can be found at https://www.chef.io/support\"\n
              \         echo \"\"\n          echo \"Please include as many details
              about the problem as possible i.e., how to reproduce\"\n          echo
              \"the problem (if possible), type of the Operating System and its version,
              etc.,\"\n          echo \"and any other relevant details that might
              help us with troubleshooting.\"\n          echo \"\"\n        }\n\n
              \       checksum_mismatch() {\n          echo \"Package checksum mismatch!\"\n
              \         report_bug\n          exit 1\n        }\n\n        unable_to_retrieve_package()
              {\n          echo \"Unable to retrieve a valid package!\"\n          report_bug\n
              \         echo \"Metadata URL: $metadata_url\"\n          if test \"x$download_url\"
              != \"x\"; then\n            echo \"Download URL: $download_url\"\n          fi\n
              \         if test \"x$stderr_results\" != \"x\"; then\n            echo
              \"\\nDEBUG OUTPUT FOLLOWS:\\n$stderr_results\"\n          fi\n          exit
              1\n        }\n\n        http_404_error() {\n          echo \"Omnitruck
              artifact does not exist for version $version on platform $platform\"\n
              \         echo \"\"\n          echo \"Either this means:\"\n          echo
              \"   - We do not support $platform\"\n          echo \"   - We do not
              have an artifact for $version\"\n          echo \"\"\n          echo
              \"This is often the latter case due to running a prerelease or RC version
              of chef\"\n          echo \"or a gem version which was only pushed to
              rubygems and not omnitruck.\"\n          echo \"\"\n          echo \"You
              may be able to set your knife[:bootstrap_version] to the most recent
              stable\"\n          echo \"release of Chef to fix this problem (or the
              most recent stable major version number).\"\n          echo \"\"\n          echo
              \"In order to test the version parameter, adventurous users may take
              the Metadata URL\"\n          echo \"below and modify the '&v=<number>'
              parameter until you successfully get a URL that\"\n          echo \"does
              not 404 (e.g. via curl or wget).  You should be able to use '&v=11'
              or '&v=12'\"\n          echo \"succesfully.\"\n          echo \"\"\n
              \         echo \"If you cannot fix this problem by setting the bootstrap_version,
              it probably means\"\n          echo \"that $platform is not supported.\"\n
              \         echo \"\"\n          # deliberately do not call report_bug
              to suppress bug report noise.\n          echo \"Metadata URL: $metadata_url\"\n
              \         if test \"x$download_url\" != \"x\"; then\n            echo
              \"Download URL: $download_url\"\n          fi\n          if test \"x$stderr_results\"
              != \"x\"; then\n            echo \"\\nDEBUG OUTPUT FOLLOWS:\\n$stderr_results\"\n
              \         fi\n          exit 1\n        }\n\n        capture_tmp_stderr()
              {\n          # spool up /tmp/stderr from all the commands we called\n
              \         if test -f \"$tmp_dir/stderr\"; then\n            output=`cat
              $tmp_dir/stderr`\n            stderr_results=\"${stderr_results}\\nSTDERR
              from $1:\\n\\n$output\\n\"\n            rm $tmp_dir/stderr\n          fi\n
              \       }\n\n        # do_wget URL FILENAME\n        do_wget() {\n          echo
              \"trying wget...\"\n          wget -O \"$2\" \"$1\" 2>$tmp_dir/stderr\n
              \         rc=$?\n          # check for 404\n          grep \"ERROR 404\"
              $tmp_dir/stderr 2>&1 >/dev/null\n          if test $? -eq 0; then\n
              \           echo \"ERROR 404\"\n            http_404_error\n          fi\n\n
              \         # check for bad return status or empty output\n          if
              test $rc -ne 0 || test ! -s \"$2\"; then\n            capture_tmp_stderr
              \"wget\"\n            return 1\n          fi\n\n          return 0\n
              \       }\n\n        # do_curl URL FILENAME\n        do_curl() {\n          echo
              \"trying curl...\"\n          curl --retry 5 -sL -D $tmp_dir/stderr
              \"$1\" > \"$2\"\n          rc=$?\n          # check for 404\n          grep
              \"404 Not Found\" $tmp_dir/stderr 2>&1 >/dev/null\n          if test
              $? -eq 0; then\n            echo \"ERROR 404\"\n            http_404_error\n
              \         fi\n\n          # check for bad return status or empty output\n
              \         if test $rc -ne 0 || test ! -s \"$2\"; then\n            capture_tmp_stderr
              \"curl\"\n            return 1\n          fi\n\n          return 0\n
              \       }\n\n        # do_fetch URL FILENAME\n        do_fetch() {\n
              \         echo \"trying fetch...\"\n          fetch -o \"$2\" \"$1\"
              2>$tmp_dir/stderr\n          # check for bad return status\n          test
              $? -ne 0 && return 1\n          return 0\n        }\n\n        # do_perl
              URL FILENAME\n        do_perl() {\n          echo \"trying perl...\"\n
              \         perl -e 'use LWP::Simple; getprint($ARGV[0]);' \"$1\" > \"$2\"
              2>$tmp_dir/stderr\n          rc=$?\n          # check for 404\n          grep
              \"404 Not Found\" $tmp_dir/stderr 2>&1 >/dev/null\n          if test
              $? -eq 0; then\n            echo \"ERROR 404\"\n            http_404_error\n
              \         fi\n\n          # check for bad return status or empty output\n
              \         if test $rc -ne 0 || test ! -s \"$2\"; then\n            capture_tmp_stderr
              \"perl\"\n            return 1\n          fi\n\n          return 0\n
              \       }\n\n        # do_python URL FILENAME\n        do_python() {\n
              \         echo \"trying python...\"\n          python -c \"import sys,urllib2
              ; sys.stdout.write(urllib2.urlopen(sys.argv[1]).read())\" \"$1\" > \"$2\"
              2>$tmp_dir/stderr\n          rc=$?\n          # check for 404\n          grep
              \"HTTP Error 404\" $tmp_dir/stderr 2>&1 >/dev/null\n          if test
              $? -eq 0; then\n            echo \"ERROR 404\"\n            http_404_error\n
              \         fi\n\n          # check for bad return status or empty output\n
              \         if test $rc -ne 0 || test ! -s \"$2\"; then\n            capture_tmp_stderr
              \"python\"\n            return 1\n          fi\n          return 0\n
              \       }\n\n        # returns 0 if checksums match\n        do_checksum()
              {\n          if exists sha256sum; then\n            echo \"Comparing
              checksum with sha256sum...\"\n            checksum=`sha256sum $1 | awk
              '{ print $1 }'`\n            return `test \"x$checksum\" = \"x$2\"`\n
              \         elif exists shasum; then\n            echo \"Comparing checksum
              with shasum...\"\n            checksum=`shasum -a 256 $1 | awk '{ print
              $1 }'`\n            return `test \"x$checksum\" = \"x$2\"`\n          else\n
              \           echo \"WARNING: could not find a valid checksum program,
              pre-install shasum or sha256sum in your O/S image to get valdation...\"\n
              \           return 0\n          fi\n        }\n\n        # do_download
              URL FILENAME\n        do_download() {\n          echo \"downloading
              $1\"\n          echo \"  to file $2\"\n\n          url=`echo $1`\n          if
              test \"x$platform\" = \"xsolaris2\"; then\n            if test \"x$platform_version\"
              = \"x5.9\" -o \"x$platform_version\" = \"x5.10\"; then\n              #
              solaris 9 lacks openssl, solaris 10 lacks recent enough credentials
              - your base O/S is completely insecure, please upgrade\n              url=`echo
              $url | sed -e 's/https/http/'`\n            fi\n          fi\n\n          #
              we try all of these until we get success.\n          # perl, in particular
              may be present but LWP::Simple may not be installed\n\n          if
              exists wget; then\n            do_wget $url $2 && return 0\n          fi\n\n
              \         if exists curl; then\n            do_curl $url $2 && return
              0\n          fi\n\n          if exists fetch; then\n            do_fetch
              $url $2 && return 0\n          fi\n\n          if exists perl; then\n
              \           do_perl $url $2 && return 0\n          fi\n\n          if
              exists python; then\n            do_python $url $2 && return 0\n          fi\n\n
              \         unable_to_retrieve_package\n        }\n\n        # install_file
              TYPE FILENAME\n        # TYPE is \"rpm\", \"deb\", \"solaris\", \"sh\",
              etc.\n        install_file() {\n          echo \"Installing $project
              $version\"\n          case \"$1\" in\n            \"rpm\")\n              if
              test \"x$platform\" = \"xnexus\" || test \"x$platform\" = \"xios_xr\";
              then\n                echo \"installing with yum...\"\n                yum
              install -yv \"$2\"\n              else\n                echo \"installing
              with rpm...\"\n                rpm -Uvh --oldpackage --replacepkgs \"$2\"\n
              \             fi\n              ;;\n            \"deb\")\n              echo
              \"installing with dpkg...\"\n              dpkg -i \"$2\"\n              ;;\n
              \           \"bff\")\n              echo \"installing with installp...\"\n
              \             installp -aXYgd \"$2\" all\n              ;;\n            \"solaris\")\n
              \             echo \"installing with pkgadd...\"\n              echo
              \"conflict=nocheck\" > $tmp_dir/nocheck\n              echo \"action=nocheck\"
              >> $tmp_dir/nocheck\n              echo \"mail=\" >> $tmp_dir/nocheck\n
              \             pkgrm -a $tmp_dir/nocheck -n $project >/dev/null 2>&1
              || true\n              pkgadd -G -n -d \"$2\" -a $tmp_dir/nocheck $project\n
              \             ;;\n            \"pkg\")\n              echo \"installing
              with installer...\"\n              cd / && /usr/sbin/installer -pkg
              \"$2\" -target /\n              ;;\n            \"dmg\")\n              echo
              \"installing dmg file...\"\n              hdiutil detach \"/Volumes/chef_software\"
              >/dev/null 2>&1 || true\n              hdiutil attach \"$2\" -mountpoint
              \"/Volumes/chef_software\"\n              cd / && /usr/sbin/installer
              -pkg `find \"/Volumes/chef_software\" -name \\*.pkg` -target /\n              hdiutil
              detach \"/Volumes/chef_software\"\n              ;;\n            \"sh\"
              )\n              echo \"installing with sh...\"\n              sh \"$2\"\n
              \             ;;\n            *)\n              echo \"Unknown filetype:
              $1\"\n              report_bug\n              exit 1\n              ;;\n
              \         esac\n          if test $? -ne 0; then\n            echo \"Installation
              failed\"\n            report_bug\n            exit 1\n          fi\n
              \       }\n\n        if test \"x$TMPDIR\" = \"x\"; then\n          tmp=\"/tmp\"\n
              \       else\n          tmp=$TMPDIR\n        fi\n        # secure-ish
              temp dir creation without having mktemp available (DDoS-able but not
              expliotable)\n        tmp_dir=\"$tmp/install.sh.$$\"\n        (umask
              077 && mkdir $tmp_dir) || exit 1\n\n        ############\n        #
              end of helpers.sh\n        ############\n\n\n        project=chef\n
              \       version=12.12.7+20160701150941\n        channel=unstable\n\n\n
              \       # platform_detection.sh\n        ############\n        # This
              section makes platform detection compatible with omnitruck on the system\n
              \       #   it runs.\n        #\n        # Outputs:\n        # $platform:
              Name of the platform.\n        # $platform_version: Version of the platform.\n
              \       # $machine: System's architecture.\n        ############\n\n
              \       #\n        # Platform and Platform Version detection\n        #\n
              \       # NOTE: This should now match ohai platform and platform_version
              matching.\n        # do not invented new platform and platform_version
              schemas, just make this behave\n        # like what ohai returns as
              platform and platform_version for the server.\n        #\n        #
              ALSO NOTE: Do not mangle platform or platform_version here.  It is less
              error\n        # prone and more future-proof to do that in the server,
              and then all omnitruck clients\n        # will 'inherit' the changes
              (install.sh is not the only client of the omnitruck\n        # endpoint
              out there).\n        #\n\n        machine=`uname -m`\n        os=`uname
              -s`\n\n        if test -f \"/etc/lsb-release\" && grep -q DISTRIB_ID
              /etc/lsb-release && ! grep -q wrlinux /etc/lsb-release; then\n          platform=`grep
              DISTRIB_ID /etc/lsb-release | cut -d \"=\" -f 2 | tr '[A-Z]' '[a-z]'`\n
              \         platform_version=`grep DISTRIB_RELEASE /etc/lsb-release |
              cut -d \"=\" -f 2`\n        elif test -f \"/etc/debian_version\"; then\n
              \         platform=\"debian\"\n          platform_version=`cat /etc/debian_version`\n
              \       elif test -f \"/etc/redhat-release\"; then\n          platform=`sed
              's/^\\(.\\+\\) release.*/\\1/' /etc/redhat-release | tr '[A-Z]' '[a-z]'`\n
              \         platform_version=`sed 's/^.\\+ release \\([.0-9]\\+\\).*/\\1/'
              /etc/redhat-release`\n\n          # If /etc/redhat-release exists, we
              act like RHEL by default\n          if test \"$platform\" = \"fedora\";
              then\n            # FIXME: stop remapping fedora to el\n            #
              FIXME: remove client side platform_version mangling and hard coded yolo\n
              \           # Change platform version for use below.\n            platform_version=\"6.0\"\n
              \         fi\n\n          if test \"$platform\" = \"xenserver\"; then\n
              \           # Current XenServer 6.2 is based on CentOS 5, platform is
              not reset to \"el\" server should hanlde response\n            platform=\"xenserver\"\n
              \         else\n            # FIXME: use \"redhat\"\n            platform=\"el\"\n
              \         fi\n\n        elif test -f \"/etc/system-release\"; then\n
              \         platform=`sed 's/^\\(.\\+\\) release.\\+/\\1/' /etc/system-release
              | tr '[A-Z]' '[a-z]'`\n          platform_version=`sed 's/^.\\+ release
              \\([.0-9]\\+\\).*/\\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`\n
              \         # amazon is built off of fedora, so act like RHEL\n          if
              test \"$platform\" = \"amazon linux ami\"; then\n            # FIXME:
              remove client side platform_version mangling and hard coded yolo, and
              remapping to deprecated \"el\"\n            platform=\"el\"\n            platform_version=\"6.0\"\n
              \         fi\n        # Apple OS X\n        elif test -f \"/usr/bin/sw_vers\";
              then\n          platform=\"mac_os_x\"\n          # Matching the tab-space
              with sed is error-prone\n          platform_version=`sw_vers | awk '/^ProductVersion:/
              { print $2 }' | cut -d. -f1,2`\n\n          # x86_64 Apple hardware
              often runs 32-bit kernels (see OHAI-63)\n          x86_64=`sysctl -n
              hw.optional.x86_64`\n          if test $x86_64 -eq 1; then\n            machine=\"x86_64\"\n
              \         fi\n        elif test -f \"/etc/release\"; then\n          machine=`/usr/bin/uname
              -p`\n          if grep -q SmartOS /etc/release; then\n            platform=\"smartos\"\n
              \           platform_version=`grep ^Image /etc/product | awk '{ print
              $3 }'`\n          else\n            platform=\"solaris2\"\n            platform_version=`/usr/bin/uname
              -r`\n          fi\n        elif test -f \"/etc/SuSE-release\"; then\n
              \         if grep -q 'Enterprise' /etc/SuSE-release;\n          then\n
              \             platform=\"sles\"\n              platform_version=`awk
              '/^VERSION/ {V = $3}; /^PATCHLEVEL/ {P = $3}; END {print V \".\" P}'
              /etc/SuSE-release`\n          else\n              platform=\"suse\"\n
              \             platform_version=`awk '/^VERSION =/ { print $3 }' /etc/SuSE-release`\n
              \         fi\n        elif test \"x$os\" = \"xFreeBSD\"; then\n          platform=\"freebsd\"\n
              \         platform_version=`uname -r | sed 's/-.*//'`\n        elif
              test \"x$os\" = \"xAIX\"; then\n          platform=\"aix\"\n          platform_version=\"`uname
              -v`.`uname -r`\"\n          machine=\"powerpc\"\n        elif test -f
              \"/etc/os-release\"; then\n          . /etc/os-release\n          if
              test \"x$CISCO_RELEASE_INFO\" != \"x\"; then\n            . $CISCO_RELEASE_INFO\n
              \         fi\n\n          platform=$ID\n          platform_version=$VERSION\n
              \       fi\n\n        if test \"x$platform\" = \"x\"; then\n          echo
              \"Unable to determine platform version!\"\n          report_bug\n          exit
              1\n        fi\n\n        #\n        # NOTE: platform manging in the
              install.sh is DEPRECATED\n        #\n        # - install.sh should be
              true to ohai and should not remap\n        #   platform or platform
              versions.\n        #\n        # - remapping platform and mangling platform
              version numbers is\n        #   now the complete responsibility of the
              server-side endpoints\n        #\n\n        major_version=`echo $platform_version
              | cut -d. -f1`\n        case $platform in\n          # FIXME: should
              remove this case statement completely\n          \"el\")\n            #
              FIXME:  \"el\" is deprecated, should use \"redhat\"\n            platform_version=$major_version\n
              \           ;;\n          \"debian\")\n            if test \"x$major_version\"
              = \"x5\"; then\n              # This is here for potential back-compat.\n
              \             # We do not have 5 in versions we publish for anymore
              but we\n              # might have it for earlier versions.\n              platform_version=\"6\"\n
              \           else\n              platform_version=$major_version\n            fi\n
              \           ;;\n          \"freebsd\")\n            platform_version=$major_version\n
              \           ;;\n          \"sles\")\n            platform_version=$major_version\n
              \           ;;\n          \"suse\")\n            platform_version=$major_version\n
              \           ;;\n        esac\n\n        # normalize the architecture
              we detected\n        case $machine in\n          \"x86_64\"|\"amd64\"|\"x64\")\n
              \           machine=\"x86_64\"\n            ;;\n          \"i386\"|\"i86pc\"|\"x86\"|\"i686\")\n
              \           machine=\"i386\"\n            ;;\n          \"sparc\"|\"sun4u\"|\"sun4v\")\n
              \           machine=\"sparc\"\n            ;;\n        esac\n\n        if
              test \"x$platform_version\" = \"x\"; then\n          echo \"Unable to
              determine platform version!\"\n          report_bug\n          exit
              1\n        fi\n\n        if test \"x$platform\" = \"xsolaris2\"; then\n
              \         # hack up the path on Solaris to find wget, pkgadd\n          PATH=/usr/sfw/bin:/usr/sbin:$PATH\n
              \         export PATH\n        fi\n\n        echo \"$platform $platform_version
              $machine\"\n\n        ############\n        # end of platform_detection.sh\n
              \       ############\n\n\n        # artifactory_urls.sh\n        ############\n
              \       # This section sets up the information for a build to be installed
              from artifactory\n        #  then uses $platform, $platform_version
              and $machine to select the correct\n        #  version.\n        #\n
              \       # Inputs:\n        # $platform:\n        # $platform_version:\n
              \       # $machine:\n        #\n        # Outputs:\n        # $download_url:\n
              \       # $sha256:\n        ############\n\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/14.04/ppc64le\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_ppc64el.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 89a564bafc4b22db5f5539fe1925587c6bf2334f0c344e0c13264f52ae537b0a\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.9/x86_64\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.9/chef-12.12.7+20160701150941-1.dmg\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.10/x86_64\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.10/chef-12.12.7+20160701150941-1.dmg\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.11/x86_64\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.11/chef-12.12.7+20160701150941-1.dmg\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/ios_xr/6/x86_64\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ios_xr/6/chef-12.12.7+20160701150941-1.ios_xr6.x86_64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 96689d0525260209d68e4991db7144b0aa31a6f7628c9e4e5f23c6f150025fb0\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/debian/6/i686\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_i386.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/debian/7/i686\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_i386.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/debian/8/i686\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_i386.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/nexus/7/x86_64\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/nexus/7/chef-12.12.7+20160701150941-1.nexus7.x86_64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 f5c620dc0166571903f28990240a5bbb1123bd6e8433a8d8d4aa9b2ba8587bbb\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/freebsd/10/i386\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.i386.sh\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 6d3b80e324377a5a80889d51ec5b0d0730d7503eb14c32a4ed7fd9e2ad21d615\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/12.04/i686\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_i386.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/14.04/i686\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_i386.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/freebsd/9/i386\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.i386.sh\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 8d63b437804b48672cc7b325bd3eb3a1ff525978b894c9b6e7c63db011aac295\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/solaris2/5.10/i386\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.i386.solaris\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/el/5/i686\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.i386.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 e910142a9bdc53757635db7f997f00e5415cc6dadea981aeec1e999489586ee2\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/el/7/x86_64\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.x86_64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 13296dfe3559a3cb5664a8319e57153635ba867a3a72feb4b040ce833fc22914\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/solaris2/5.11/i386\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.i386.solaris\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/el/6/i686\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.i386.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 e31a417ea73cefb3424496b07b19e188a5d079db40fc29bae0c8a24b2fb9d558\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/windows/2008r2/i386\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x86.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/12.04/x86_64\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/14.04/x86_64\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/windows/2012/i386\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x86.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/el/7/ppc64le\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64le.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 5fb71d38e54b0a6e8fc142f48e693de2dc54891edde59f65db61bf097766a3de\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/debian/6/x86_64\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/debian/7/x86_64\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/el/7/ppc64\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 bc5a1ea39782df044cd069523d6534f72222855bbf99a98961858cdaee51d7c0\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/debian/8/x86_64\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/windows/2012r2/i386\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x86.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/freebsd/10/amd64\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.amd64.sh\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 f4c5e3b437e5129e89a5ca0d69036dcf0e6e4b21a0eef61b495ab63a0be2fe94\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/el/5/x86_64\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.x86_64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 58bed7db8fe43a1e8441d9a2a5e46b9fe4ab7e932dd1f7f5e0dc53adc004704c\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/el/6/x86_64\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.x86_64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 e30aac011f866a56f3542eaaa17cf18e40df6021e997e32fd3d1ae5b8f11e274\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/windows/2008r2/x86_64\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x64.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/freebsd/9/amd64\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.amd64.sh\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 6fc165d1fbc96f5ed5ffbfedb154e7ede4d6e87fccec3c80c0de5510527bd673\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/windows/2012/x86_64\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x64.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/windows/2012r2/x86_64\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x64.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/aix/6.1/powerpc\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/6.1/chef-12.12.7+20160701150941-1.powerpc.bff\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/aix/7.1/powerpc\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/7.1/chef-12.12.7+20160701150941-1.powerpc.bff\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/solaris2/5.10/sparc\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.sparc.solaris\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817\"
              >> \"$artifact_info_dir/artifact_info\"\n\n          artifact_info_dir=\"$tmp_dir/artifact_info/solaris2/5.11/sparc\"\n
              \         mkdir -p $artifact_info_dir\n          touch \"$artifact_info_dir/artifact_info\"\n
              \         echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.sparc.solaris\"
              >> \"$artifact_info_dir/artifact_info\"\n          echo \"sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817\"
              >> \"$artifact_info_dir/artifact_info\"\n\n\n        artifact_info_for_platform=\"$tmp_dir/artifact_info/$platform/$platform_version/$machine/artifact_info\"\n\n
              \       download_url=`awk '$1 == \"url\" { print $2 }' \"$artifact_info_for_platform\"`\n
              \       sha256=`awk '$1 == \"sha256\" { print $2 }' \"$artifact_info_for_platform\"`\n\n\n
              \       # fetch_package.sh\n        ############\n        # This section
              fetchs a package from $download_url and verifies its metadata.\n        #\n
              \       # Inputs:\n        # $download_url:\n        # $tmp_dir:\n        #
              Optional Inputs:\n        # $cmdline_filename: Name of the package downloaded
              on local disk.\n        # $cmdline_dl_dir: Name of the directory downloaded
              package will be saved to on local disk.\n        #\n        # Outputs:\n
              \       # $download_filename: Name of the downloaded file on local disk.\n
              \       # $filetype: Type of the file downloaded.\n        ############\n\n
              \       filename=`echo $download_url | sed -e 's/^.*\\///'`\n        filetype=`echo
              $filename | sed -e 's/^.*\\.//'`\n\n        # use either $tmp_dir, the
              provided directory (-d) or the provided filename (-f)\n        if test
              \"x$cmdline_filename\" != \"x\"; then\n          download_filename=\"$cmdline_filename\"\n
              \       elif test \"x$cmdline_dl_dir\" != \"x\"; then\n          download_filename=\"$cmdline_dl_dir/$filename\"\n
              \       else\n          download_filename=\"$tmp_dir/$filename\"\n        fi\n\n
              \       # ensure the parent directory where to download the installer
              always exists\n        download_dir=`dirname $download_filename`\n        (umask
              077 && mkdir -p $download_dir) || exit 1\n\n        # check if we have
              that file locally available and if so verify the checksum\n        cached_file_available=\"false\"\n
              \       if test -f $download_filename; then\n          echo \"$download_filename
              already exists, verifiying checksum...\"\n          if do_checksum \"$download_filename\"
              \"$sha256\"; then\n            echo \"checksum compare succeeded, using
              existing file!\"\n            cached_file_available=\"true\"\n          else\n
              \           echo \"checksum mismatch, downloading latest version of
              the file\"\n          fi\n        fi\n\n        # download if no local
              version of the file available\n        if test \"x$cached_file_available\"
              != \"xtrue\"; then\n          do_download \"$download_url\"  \"$download_filename\"\n
              \         do_checksum \"$download_filename\" \"$sha256\" || checksum_mismatch\n
              \       fi\n\n        ############\n        # end of fetch_package.sh\n
              \       ############\n\n\n        # install_package.sh\n        ############\n
              \       # Installs a package and removed the temp directory.\n        #\n
              \       # Inputs:\n        # $download_filename: Name of the file to
              be installed.\n        # $filetype: Type of the file to be installed.\n
              \       # $version: The version requested. Used only for warning user
              if not set.\n        ############\n\n        if test \"x$version\" =
              \"x\"; then\n          echo\n          echo \"WARNING WARNING WARNING
              WARNING WARNING WARNING WARNING WARNING WARNING\"\n          echo\n
              \         echo \"You are installing an omnibus package without a version
              pin.  If you are installing\"\n          echo \"on production servers
              via an automated process this is DANGEROUS and you will\"\n          echo
              \"be upgraded without warning on new releases, even to new major releases.\"\n
              \         echo \"Letting the version float is only appropriate in desktop,
              test, development or\"\n          echo \"CI/CD environments.\"\n          echo\n
              \         echo \"WARNING WARNING WARNING WARNING WARNING WARNING WARNING
              WARNING WARNING\"\n          echo\n        fi\n\n        install_file
              $filetype \"$download_filename\"\n\n        if test \"x$tmp_dir\" !=
              \"x\"; then\n          rm -r \"$tmp_dir\"\n        fi\n\n        ############\n
              \       # end of install_package.sh\n        ############\n\n        EOL\n
              \       chmod +x /tmp/chef-installer.sh\n        sudo -E /tmp/chef-installer.sh)\n
              \              ubuntu 14.04 x86_64\n               downloading http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_amd64.deb\n
              \                to file /tmp/install.sh.1356/chef_12.12.7+20160701150941-1_amd64.deb\n
              \              trying wget...\n               Comparing checksum with
              sha256sum...\n               Installing chef 12.12.7+20160701150941\n
              \              installing with dpkg...\n               Selecting previously
              unselected package chef.\n               (Reading database ... \r(Reading
              database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading
              database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading
              database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading
              database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading
              database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading
              database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading
              database ... 95%\r(Reading database ... 100%\r(Reading database ...
              51167 files and directories currently installed.)\n               Preparing
              to unpack .../chef_12.12.7+20160701150941-1_amd64.deb ...\n               Unpacking
              chef (12.12.7+20160701150941-1) ...\n               Setting up chef
              (12.12.7+20160701150941-1) ...\n               Thank you for installing
              Chef!\n        D      [SSH] ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}> (sh -c '\n        sudo_rm=\"sudo -E rm\"\n        dirs=\"/tmp/kitchen/clients
              /tmp/kitchen/cookbooks /tmp/kitchen/data /tmp/kitchen/data_bags /tmp/kitchen/encrypted_data_bag_secret
              /tmp/kitchen/environments /tmp/kitchen/roles\"\n        root_path=\"/tmp/kitchen\"\n\n
              \       $sudo_rm -rf $dirs\n        mkdir -p $root_path\n        ')\n
              \              Transferring files to <docker-default-ubuntu-1404>\n
              \       D      TIMING: scp async upload (Kitchen::Transport::Ssh)\n
              \       D      TIMING: scp async upload (Kitchen::Transport::Ssh) took
              (0m7.23s)\n        D      Transfer complete\n        D      Attempting
              to execute command - try 1 of 1.\n        D      [SSH] ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}> (sh -c '\n        sudo -E /opt/chef/bin/chef-client
              --local-mode --config /tmp/kitchen/client.rb --log_level auto --force-formatter
              --no-color --json-attributes /tmp/kitchen/dna.json --chef-zero-port
              8889\n        ')\n               Starting Chef Client, version 12.12.7\n
              \              Creating a new client identity for docker-default-ubuntu-1404
              using the validator key.\n               resolving cookbooks for run
              list: [\"apt\", \"chef-apt-docker\"]\n               Synchronizing Cookbooks:\n
              \                - apt (4.0.1)\n                 - chef-apt-docker (1.0.0)\n
              \                - compat_resource (12.10.6)\n               Installing
              Cookbook Gems:\n               Compiling Cookbooks...\n               [2016-07-01T15:45:11+00:00]
              WARN: Chef::Provider::AptRepository already exists!  Cannot create deprecation
              class for LWRP provider apt_repository from cookbook apt\n               [2016-07-01T15:45:11+00:00]
              WARN: AptRepository already exists!  Deprecation class overwrites Custom
              resource apt_repository from cookbook apt\n               Converging
              10 resources\n               Recipe: apt::default\n                 *
              file[/var/lib/apt/periodic/update-success-stamp] action nothing (skipped
              due to action :nothing)\n                 * apt_update[periodic] action
              periodic\n                   - update new lists of packages\n                   *
              directory[/var/lib/apt/periodic] action create (up to date)\n                   *
              directory[/etc/apt/apt.conf.d] action create (up to date)\n                   *
              file[/etc/apt/apt.conf.d/15update-stamp] action create_if_missing (up
              to date)\n                   * execute[apt-get -q update] action run\n
              \                    - execute apt-get -q update\n\n                 *
              execute[apt-get update] action nothing (skipped due to action :nothing)\n
              \                * execute[apt-get autoremove] action nothing (skipped
              due to action :nothing)\n                 * execute[apt-get autoclean]
              action nothing (skipped due to action :nothing)\n                 *
              directory[/var/cache/local] action create\n                   - create
              new directory /var/cache/local\n                   - change mode from
              '' to '0755'\n                   - change owner from '' to 'root'\n
              \                  - change group from '' to 'root'\n                 *
              directory[/var/cache/local/preseeding] action create\n                   -
              create new directory /var/cache/local/preseeding\n                   -
              change mode from '' to '0755'\n                   - change owner from
              '' to 'root'\n                   - change group from '' to 'root'\n
              \                * template[/etc/apt/apt.conf.d/10recommends] action
              create\n                   - create new file /etc/apt/apt.conf.d/10recommends\n
              \                  - update content in file /etc/apt/apt.conf.d/10recommends
              from none to f41e1d\n                   --- /etc/apt/apt.conf.d/10recommends
              \ 2016-07-01 15:45:19.215704000 +0000\n                   +++ /etc/apt/apt.conf.d/.chef-10recommends20160701-1523-1o5o3pc
              \ 2016-07-01 15:45:19.215704000 +0000\n                   @@ -1 +1,4
              @@\n                   +# Managed by Chef\n                   +APT::Install-Recommends
              \"1\";\n                   +APT::Install-Suggests \"0\";\n                   -
              change mode from '' to '0644'\n                   - change owner from
              '' to 'root'\n                   - change group from '' to 'root'\n
              \                * apt_package[apt-transport-https] action install (up
              to date)\n               Recipe: chef-apt-docker::default\n                 *
              apt_repository[docker] action add\n                   * execute[install-key
              58118E89F3A912897C070ADBF76221572C52609D] action run\n\n                     ================================================================================\n
              \                    Error executing action `run` on resource 'execute[install-key
              58118E89F3A912897C070ADBF76221572C52609D]'\n                     ================================================================================\n\n
              \                    Mixlib::ShellOut::ShellCommandFailed\n                     ------------------------------------\n
              \                    Expected process to exit with [0], but received
              '2'\n                     ---- Begin output of apt-key adv --recv --keyserver
              hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D
              ----\n                     STDOUT: Executing: gpg --ignore-time-conflict
              --no-options --no-default-keyring --homedir /tmp/tmp.FgMIvkGpBQ --no-auto-check-trustdb
              --trust-model always --keyring /etc/apt/trusted.gpg --primary-keyring
              /etc/apt/trusted.gpg --recv --keyserver hkp://p80.pool.sks-keyservers.net:80
              58118E89F3A912897C070ADBF76221572C52609D\n                     STDERR:
              gpg: requesting key 2C52609D from hkp server p80.pool.sks-keyservers.net\n
              \                    gpg: keyserver timed out\n                     gpg:
              keyserver receive failed: keyserver error\n                     ----
              End output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80
              58118E89F3A912897C070ADBF76221572C52609D ----\n                     Ran
              apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80
              58118E89F3A912897C070ADBF76221572C52609D returned 2\n\n                     Cookbook
              Trace:\n                     ---------------\n                     /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in
              `run_action'\n                     /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in
              `run_action'\n\n                     Resource Declaration:\n                     ---------------------\n
              \                    # In /opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/lib/chef/provider/apt_repository.rb\n\n
              \                    201:         declare_resource(:execute, \"install-key
              #{key}\") do\n                     202:           command cmd\n                     203:
              \          sensitive new_resource.sensitive\n                     204:
              \          not_if do\n                     205:             present
              = extract_fingerprints_from_cmd(\"apt-key finger\").any? do |fp|\n                     206:
              \              fp.end_with? key.upcase\n                     207:             end\n
              \                    208:             present && key_is_valid?(\"apt-key
              list\", key.upcase)\n                     209:           end\n                     210:
              \          notifies :run, \"execute[apt-cache gencaches]\", :immediately\n
              \                    211:         end\n                     212:\n\n
              \                    Compiled Resource:\n                     ------------------\n
              \                    # Declared in /opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/lib/chef/provider/apt_repository.rb:201:in
              `install_key_from_keyserver'\n\n                     execute(\"install-key
              58118E89F3A912897C070ADBF76221572C52609D\") do\n                action
              [:run]\n                retries 0\n                retry_delay 2\n                default_guard_interpreter
              :execute\n                command \"apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80
              58118E89F3A912897C070ADBF76221572C52609D\"\n                backup 5\n
              \               returns 0\n                declared_type :execute\n
              \               cookbook_name \"chef-apt-docker\"\n                not_if
              { #code block }\n                     end\n\n                     Platform:\n
              \                    ---------\n                     x86_64-linux\n\n\n
              \                  ================================================================================\n
              \                  Error executing action `add` on resource 'apt_repository[docker]'\n
              \                  ================================================================================\n\n
              \                  Mixlib::ShellOut::ShellCommandFailed\n                   ------------------------------------\n
              \                  execute[install-key 58118E89F3A912897C070ADBF76221572C52609D]
              (/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/lib/chef/provider/apt_repository.rb
              line 201) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected
              process to exit with [0], but received '2'\n                   ----
              Begin output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80
              58118E89F3A912897C070ADBF76221572C52609D ----\n                   STDOUT:
              Executing: gpg --ignore-time-conflict --no-options --no-default-keyring
              --homedir /tmp/tmp.FgMIvkGpBQ --no-auto-check-trustdb --trust-model
              always --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg
              --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D\n
              \                  STDERR: gpg: requesting key 2C52609D from hkp server
              p80.pool.sks-keyservers.net\n                   gpg: keyserver timed
              out\n                   gpg: keyserver receive failed: keyserver error\n
              \                  ---- End output of apt-key adv --recv --keyserver
              hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D
              ----\n                   Ran apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80
              58118E89F3A912897C070ADBF76221572C52609D returned 2\n\n                   Cookbook
              Trace:\n                   ---------------\n                   /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in
              `run_action'\n                   /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in
              `run_action'\n\n                   Resource Declaration:\n                   ---------------------\n
              \                  # In /tmp/kitchen/cache/cookbooks/chef-apt-docker/recipes/default.rb\n\n
              \                   20: apt_repository 'docker' do\n                    21:
              \  uri 'https://apt.dockerproject.org/repo'\n                    22:
              \  distribution \"#{node['platform']}-#{node['lsb']['codename']}\"\n
              \                   23:   keyserver 'p80.pool.sks-keyservers.net'\n
              \                   24:   components node['chef-apt-docker']['components']\n
              \                   25:   key '58118E89F3A912897C070ADBF76221572C52609D'\n
              \                   26: end\n\n                   Compiled Resource:\n
              \                  ------------------\n                   # Declared
              in /tmp/kitchen/cache/cookbooks/chef-apt-docker/recipes/default.rb:20:in
              `from_file'\n\n                   apt_repository(\"docker\") do\n                     action
              [:add]\n                     retries 0\n                     retry_delay
              2\n                     default_guard_interpreter :default\n                     declared_type
              :apt_repository\n                     cookbook_name \"chef-apt-docker\"\n
              \                    recipe_name \"default\"\n                     uri
              \"https://apt.dockerproject.org/repo\"\n                     distribution
              \"ubuntu-trusty\"\n                     keyserver \"p80.pool.sks-keyservers.net\"\n
              \                    components [\"main\"]\n                     key
              \"58118E89F3A912897C070ADBF76221572C52609D\"\n                     cache_rebuild
              true\n                   end\n\n                   Platform:\n                   ---------\n
              \                  x86_64-linux\n\n               Starting audit phase\n\n
              \              Finished in 0.00027 seconds (files took 0.27631 seconds
              to load)\n               0 examples, 0 failures\n               Auditing
              complete\n\n               Running handlers:\n               [2016-07-01T15:47:20+00:00]
              ERROR: Running exception handlers\n               Running handlers complete\n
              \              [2016-07-01T15:47:20+00:00] ERROR: Exception handlers
              complete\n               Chef Client failed. 5 resources updated in
              02 minutes 11 seconds\n               [2016-07-01T15:47:20+00:00] ERROR:
              Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json\n
              \              [2016-07-01T15:47:20+00:00] FATAL: Stacktrace dumped
              to /tmp/kitchen/cache/chef-stacktrace.out\n               [2016-07-01T15:47:20+00:00]
              FATAL: Please provide the contents of the stacktrace.out file if you
              file a bug report\n               [2016-07-01T15:47:20+00:00] ERROR:
              Found 1 errors, they are stored in the backtrace\n               [2016-07-01T15:47:21+00:00]
              FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited
              unsuccessfully (exit code 1)\n        D      Cleaning up local sandbox
              in /tmp/cheftest/docker-default-ubuntu-1404-sandbox-20160701-11660-y00zuf\n
              \       D      [SSH] shutting previous connection ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}>\n        D      [SSH] closing connection to ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}>\n        D      ------Exception-------\n        D
              \     Class: Kitchen::ActionFailed\n        D      Message: 1 actions
              failed.\n        >>>>>>     Converge failed on instance <docker-default-ubuntu-1404>.
              \ Please see .kitchen/logs/docker-default-ubuntu-1404.log for more details\n
              \       D      ----------------------\n        D      ------Backtrace-------\n
              \       D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:187:in
              `report_errors'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:178:in
              `run_action'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command/action.rb:39:in
              `block in call'\n        D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in
              `measure'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command/action.rb:37:in
              `call'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:56:in
              `perform'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:184:in
              `block (2 levels) in <class:CLI>'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in
              `run'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in
              `invoke_command'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:325:in
              `invoke_task'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in
              `dispatch'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in
              `start'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/bin/kitchen:13:in
              `block in <top (required)>'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/errors.rb:174:in
              `with_friendly_errors'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/bin/kitchen:13:in
              `<top (required)>'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:23:in
              `load'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:23:in
              `<main>'\n        D      ----End Backtrace-----\n        D      -Composite
              Exception--\n        D      Class: Kitchen::InstanceFailure\n        D
              \     Message: Converge failed on instance <docker-default-ubuntu-1404>.
              \ Please see .kitchen/logs/docker-default-ubuntu-1404.log for more details\n
              \       D      ----------------------\n        D      ------Backtrace-------\n
              \       D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:86:in
              `rescue in call'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:89:in
              `call'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:373:in
              `block in converge_action'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in
              `call'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in
              `synchronize_or_call'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:478:in
              `block in action'\n        D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in
              `measure'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:477:in
              `action'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:369:in
              `converge_action'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:348:in
              `block in transition_to'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in
              `each'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in
              `transition_to'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:138:in
              `converge'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in
              `public_send'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in
              `run_action_in_thread'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:173:in
              `block (2 levels) in run_action'\n        D      ----End Backtrace-----\n
              \       D      ---Nested Exception---\n        D      Class: Kitchen::ActionFailed\n
              \       D      Message: SSH exited (1) for command: [sh -c '\n        sudo
              -E /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb
              --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json
              --chef-zero-port 8889\n        ']\n        D      ----------------------\n
              \       D      ------Backtrace-------\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:86:in
              `rescue in call'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:89:in
              `call'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:373:in
              `block in converge_action'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in
              `call'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in
              `synchronize_or_call'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:478:in
              `block in action'\n        D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in
              `measure'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:477:in
              `action'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:369:in
              `converge_action'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:348:in
              `block in transition_to'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in
              `each'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in
              `transition_to'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:138:in
              `converge'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in
              `public_send'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in
              `run_action_in_thread'\n        D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:173:in
              `block (2 levels) in run_action'\n        D      ----End Backtrace-----\n
              \       STDERR: >>>>>> ------Exception-------\n        >>>>>> Class:
              Kitchen::ActionFailed\n        >>>>>> Message: 1 actions failed.\n        >>>>>>
              \    Converge failed on instance <docker-default-ubuntu-1404>.  Please
              see .kitchen/logs/docker-default-ubuntu-1404.log for more details\n
              \       >>>>>> ----------------------\n        >>>>>> Please see .kitchen/logs/kitchen.log
              for more details\n        >>>>>> Also try running `kitchen diagnose
              --all` for configuration\n        ---- End output of bundle exec kitchen
              converge  -c -l debug ----\n        Ran bundle exec kitchen converge
              \ -c -l debug returned 20\n\n        Resource Declaration:\n        ---------------------\n
              \       # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb\n\n
              \        36:       execute \"bundle exec kitchen #{command}#{instances
              ? \" #{instances}\" : \"\"}#{kitchen_options ? \" #{kitchen_options}\"
              : \"\"}\" do\n         37:         cwd kitchen_dir\n         38:         env({\n
              \        39:           \"KITCHEN_DRIVER\" => driver,\n         40:           \"KITCHEN_INSTANCES\"
              => instances,\n         41:           \"KITCHEN_LOCAL_YAML\" => ::File.expand_path(\"../../.kitchen.#{driver}.yml\",
              __FILE__),\n         42:           \"KITCHEN_CHEF_PRODUCT\" => chef_product,\n
              \        43:           \"KITCHEN_CHEF_CHANNEL\" => chef_channel,\n         44:
              \          \"KITCHEN_CHEF_VERSION\" => chef_version,\n         45:           \"ARTIFACTORY_USERNAME\"
              => artifactory_username,\n         46:           \"ARTIFACTORY_PASSWORD\"
              => artifactory_password\n         47:         }.merge(new_resource.env))\n
              \        48:       end\n         49:       ruby_block \"copy_kitchen_logs_to_data_path\"
              do\n\n        Compiled Resource:\n        ------------------\n        #
              Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:36:in
              `block in <class:Kitchen>'\n\n        execute(\"bundle exec kitchen
              converge  -c -l debug\") do\n          action [:run]\n          retries
              0\n          retry_delay 2\n          default_guard_interpreter :execute\n
              \         command \"bundle exec kitchen converge  -c -l debug\"\n          backup
              5\n          cwd \"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/docker/\"\n
              \         environment {\"KITCHEN_DRIVER\"=>\"ec2\", \"KITCHEN_INSTANCES\"=>\"\",
              \"KITCHEN_LOCAL_YAML\"=>\"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/.kitchen.ec2.yml\",
              \"KITCHEN_CHEF_PRODUCT\"=>\"chef\", \"KITCHEN_CHEF_CHANNEL\"=>\"unstable\",
              \"KITCHEN_CHEF_VERSION\"=>\"12.12.7+20160701150941\", \"ARTIFACTORY_USERNAME\"=>\"chef-web-downloads\",
              \"ARTIFACTORY_PASSWORD\"=>\"fWPxYSB69EiuSpl8*3Dr^kGwf#hxUE6cmjeZRB%H!Cruit7qiKp%toH3nXKStQUg\",
              \"BUNDLE_GEMFILE\"=>\"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/Gemfile\",
              \"KITCHEN_YAML\"=>\"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/.kitchen.docker.yml\"}\n
              \         returns 0\n          declared_type :execute\n          cookbook_name
              \"acceptance-cookbook\"\n        end\n\n\n      ================================================================================\n
              \     Error executing action `run` on resource 'cookbook_kitchen[converge
              docker]'\n      ================================================================================\n\n
              \     Mixlib::ShellOut::ShellCommandFailed\n      ------------------------------------\n
              \     execute[bundle exec kitchen converge  -c -l debug] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb
              line 36) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected
              process to exit with [0], but received '20'\n      ---- Begin output
              of bundle exec kitchen converge  -c -l debug ----\n      STDOUT: ----->
              Starting Kitchen (v1.10.2)\n      D      Berksfile found at /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/docker/Berksfile,
              loading Berkshelf\n      D      Berkshelf 4.3.5 library loaded\n      ----->
              Creating <docker-default-ubuntu-1404>...\n             If you are not
              using an account that qualifies under the AWS\n      free-tier, you
              may be charged to run these suites. The charge\n      should be minimal,
              but neither Test Kitchen nor its maintainers\n      are responsible
              for your incurred costs.\n\n      D      platform name ubuntu-14.04
              appears to be a standard platform. Searching for ubuntu 14.04 ...\n
              \     D      Searching for images matching {:name=>\"ubuntu/images/*/ubuntu-*-14.04-*-server-*\",
              :\"owner-id\"=>\"099720109477\", :architecture=>\"x86_64\", :\"virtualization-type\"=>\"hvm\",
              :\"block-device-mapping.volume-type\"=>\"gp2\", :\"image-type\"=>\"machine\"}
              ...\n      D      Search returned 58 images:\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160627:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-06-29T15:13:53.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160620: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2016-06-21T12:07:59.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160602:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-06-03T01:17:21.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160516: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2016-05-17T09:54:45.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160509.1:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-05-10T11:55:52.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160406: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2016-04-06T22:01:48.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160314:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-03-15T08:30:56.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160222: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2016-02-23T13:53:30.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160217.1:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-02-18T01:37:46.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160201: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2016-02-02T12:11:43.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160119:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-01-20T12:15:17.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160114.5: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2016-01-15T22:11:35.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151218:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-12-20T01:45:49.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151217: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-12-18T09:40:49.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151117:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-11-18T08:17:32.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151105: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-11-06T23:03:53.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151019:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-10-20T09:04:11.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151015: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-10-15T20:43:54.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151008:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-10-09T08:48:14.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151007: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-10-08T08:57:50.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151005:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-10-06T09:26:41.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150930: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-10-01T11:24:14.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150928:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-09-29T11:13:44.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150924: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-09-25T13:37:47.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150908:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-09-09T05:59:15.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150901.1: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-09-02T05:15:07.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150814:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-08-15T08:11:39.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150813: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-08-14T07:14:42.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150812:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-08-13T08:50:05.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150810: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-08-11T11:43:49.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150805:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-08-06T19:29:13.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150731: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-08-01T09:17:08.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150727:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-07-28T07:13:51.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150724: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-07-25T05:22:13.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150629:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-06-30T09:14:39.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150609: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-06-09T17:42:29.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150608:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-06-09T03:54:29.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150603: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-06-04T08:13:50.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150528:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-05-29T10:15:24.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150506: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-05-07T08:14:11.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150417:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-04-17T12:06:11.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150408.1: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-04-09T08:52:15.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150325:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-03-25T23:56:26.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150305: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-03-05T11:02:56.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150227.2:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-02-28T07:15:31.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150225.2: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-02-26T06:03:04.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150209.1:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-02-10T05:22:56.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150123: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-01-23T10:57:13.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20141125:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2014-11-26T01:50:28.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140927: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2014-09-30T00:19:14.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140926:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2014-09-26T16:05:00.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140924: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2014-09-25T14:07:23.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140923:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2014-09-23T14:15:33.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140829: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2014-08-29T18:46:07.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140816:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2014-08-16T22:57:30.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140813: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2014-08-14T00:50:31.000Z\n      D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140724:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2014-07-25T08:28:59.000Z\n      D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140607.1: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2014-07-23T18:05:49.000Z\n      D      Creating EC2
              instance in region us-west-2 with properties:\n      D      - instance_type
              = \"m3.large\"\n      D      - ebs_optimized = false\n      D      -
              image_id = \"ami-42569022\"\n      D      - key_name = \"jenkins\"\n
              \     D      - subnet_id = \"subnet-19ac017c\"\n      D      - private_ip_address
              = nil\n      D      - placement = {:availability_zone=>\"us-west-2a\"}\n
              \     D      - security_group_ids = [\"sg-e401eb83\", \"sg-96274af3\"]\n
              \            Instance <i-823ae12d> requested.\n             Polling
              AWS for existence, attempt 0...\n             Attempting to tag the
              instance, 0 retries\n             EC2 instance <i-823ae12d> created.\n
              \            Waited 0/300s for instance <i-823ae12d> to become ready.\n
              \            Waited 5/300s for instance <i-823ae12d> to become ready.\n
              \            Waited 10/300s for instance <i-823ae12d> to become ready.\n
              \            Waited 15/300s for instance <i-823ae12d> to become ready.\n
              \            Waited 20/300s for instance <i-823ae12d> to become ready.\n
              \            EC2 instance <i-823ae12d> ready.\n      D      [SSH] opening
              connection to ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"]}>\n
              \     D      [SSH] connection failed (#<Errno::ECONNREFUSED: Connection
              refused - connect(2) for 10.194.12.142:22>)\n             Waiting for
              SSH service on 10.194.12.142:22, retrying in 3 seconds\n      D      [SSH]
              opening connection to ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}>\n      D      [SSH] connection failed (#<Errno::ECONNREFUSED:
              Connection refused - connect(2) for 10.194.12.142:22>)\n             Waiting
              for SSH service on 10.194.12.142:22, retrying in 3 seconds\n      D
              \     [SSH] opening connection to ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}>\n      D      [SSH] ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}> (echo '[SSH] Established')\n             [SSH] Established\n
              \     D      Using sudo_command='sudo -E' for ohai hints\n      D      [SSH]
              reusing existing connection ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}>\n      D      [SSH] ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}> (sudo -E mkdir -p /etc/chef/ohai/hints; sudo -E
              touch /etc/chef/ohai/hints/ec2.json)\n      D      ec2:create '10.194.12.142'\n
              \            Finished creating <docker-default-ubuntu-1404> (0m39.56s).\n
              \     -----> Converging <docker-default-ubuntu-1404>...\n             Preparing
              files for transfer\n      D      Creating local sandbox in /tmp/cheftest/docker-default-ubuntu-1404-sandbox-20160701-11660-y00zuf\n
              \            Preparing dna.json\n      D      Creating dna.json from
              {:chef_acceptance=>\"true\", :use_system_chef=>\"true\", :docker=>{:version=>\"1.10.0\"},
              :run_list=>[\"recipe[apt]\", \"recipe[chef-apt-docker]\"]}\n             Resolving
              cookbook dependencies with Berkshelf 4.3.5...\n      D      Using Berksfile
              from /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/docker/Berksfile\n
              \            Removing non-cookbook files before transfer\n             Preparing
              validation.pem\n      D      Using a dummy validation.pem\n             Preparing
              client.rb\n      D      Creating client.rb from {:node_name=>\"docker-default-ubuntu-1404\",
              :checksum_path=>\"/tmp/kitchen/checksums\", :file_cache_path=>\"/tmp/kitchen/cache\",
              :file_backup_path=>\"/tmp/kitchen/backup\", :cookbook_path=>[\"/tmp/kitchen/cookbooks\",
              \"/tmp/kitchen/site-cookbooks\"], :data_bag_path=>\"/tmp/kitchen/data_bags\",
              :environment_path=>\"/tmp/kitchen/environments\", :node_path=>\"/tmp/kitchen/nodes\",
              :role_path=>\"/tmp/kitchen/roles\", :client_path=>\"/tmp/kitchen/clients\",
              :user_path=>\"/tmp/kitchen/users\", :validation_key=>\"/tmp/kitchen/validation.pem\",
              :client_key=>\"/tmp/kitchen/client.pem\", :chef_server_url=>\"http://127.0.0.1:8889\",
              :encrypted_data_bag_secret=>\"/tmp/kitchen/encrypted_data_bag_secret\",
              :audit_mode=>\":enabled\", :named_run_list=>{}}\n      D      [SSH]
              reusing existing connection ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}>\n      D      [SSH] ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}> (sudo -E cat > /tmp/chef-installer.sh <<\"EOL\"\n
              \     #!/bin/bash\n      #!/bin/sh\n      # WARNING: REQUIRES /bin/sh\n
              \     #\n      # - must run on /bin/sh on solaris 9\n      # - must
              run on /bin/sh on AIX 6.x\n      #\n      # Copyright:: Copyright (c)
              2010-2015 Chef Software, Inc.\n      # License:: Apache License, Version
              2.0\n      #\n      # Licensed under the Apache License, Version 2.0
              (the \"License\");\n      # you may not use this file except in compliance
              with the License.\n      # You may obtain a copy of the License at\n
              \     #\n      #     http://www.apache.org/licenses/LICENSE-2.0\n      #\n
              \     # Unless required by applicable law or agreed to in writing, software\n
              \     # distributed under the License is distributed on an \"AS IS\"
              BASIS,\n      # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
              express or implied.\n      # See the License for the specific language
              governing permissions and\n      # limitations under the License.\n
              \     #\n\n      # helpers.sh\n      ############\n      # This section
              has some helper functions to make life easier.\n      #\n      # Outputs:\n
              \     # $tmp_dir: secure-ish temp directory that can be used during
              installation.\n      ############\n\n      # Check whether a command
              exists - returns 0 if it does, 1 if it does not\n      exists() {\n
              \       if command -v $1 >/dev/null 2>&1\n        then\n          return
              0\n        else\n          return 1\n        fi\n      }\n\n      #
              Output the instructions to report bug about this script\n      report_bug()
              {\n        echo \"Version: $version\"\n        echo \"\"\n        echo
              \"Please file a Bug Report at https://github.com/chef/omnitruck/issues/new\"\n
              \       echo \"Alternatively, feel free to open a Support Ticket at
              https://www.chef.io/support/tickets\"\n        echo \"More Chef support
              resources can be found at https://www.chef.io/support\"\n        echo
              \"\"\n        echo \"Please include as many details about the problem
              as possible i.e., how to reproduce\"\n        echo \"the problem (if
              possible), type of the Operating System and its version, etc.,\"\n        echo
              \"and any other relevant details that might help us with troubleshooting.\"\n
              \       echo \"\"\n      }\n\n      checksum_mismatch() {\n        echo
              \"Package checksum mismatch!\"\n        report_bug\n        exit 1\n
              \     }\n\n      unable_to_retrieve_package() {\n        echo \"Unable
              to retrieve a valid package!\"\n        report_bug\n        echo \"Metadata
              URL: $metadata_url\"\n        if test \"x$download_url\" != \"x\"; then\n
              \         echo \"Download URL: $download_url\"\n        fi\n        if
              test \"x$stderr_results\" != \"x\"; then\n          echo \"\\nDEBUG
              OUTPUT FOLLOWS:\\n$stderr_results\"\n        fi\n        exit 1\n      }\n\n
              \     http_404_error() {\n        echo \"Omnitruck artifact does not
              exist for version $version on platform $platform\"\n        echo \"\"\n
              \       echo \"Either this means:\"\n        echo \"   - We do not support
              $platform\"\n        echo \"   - We do not have an artifact for $version\"\n
              \       echo \"\"\n        echo \"This is often the latter case due
              to running a prerelease or RC version of chef\"\n        echo \"or a
              gem version which was only pushed to rubygems and not omnitruck.\"\n
              \       echo \"\"\n        echo \"You may be able to set your knife[:bootstrap_version]
              to the most recent stable\"\n        echo \"release of Chef to fix this
              problem (or the most recent stable major version number).\"\n        echo
              \"\"\n        echo \"In order to test the version parameter, adventurous
              users may take the Metadata URL\"\n        echo \"below and modify the
              '&v=<number>' parameter until you successfully get a URL that\"\n        echo
              \"does not 404 (e.g. via curl or wget).  You should be able to use '&v=11'
              or '&v=12'\"\n        echo \"succesfully.\"\n        echo \"\"\n        echo
              \"If you cannot fix this problem by setting the bootstrap_version, it
              probably means\"\n        echo \"that $platform is not supported.\"\n
              \       echo \"\"\n        # deliberately do not call report_bug to
              suppress bug report noise.\n        echo \"Metadata URL: $metadata_url\"\n
              \       if test \"x$download_url\" != \"x\"; then\n          echo \"Download
              URL: $download_url\"\n        fi\n        if test \"x$stderr_results\"
              != \"x\"; then\n          echo \"\\nDEBUG OUTPUT FOLLOWS:\\n$stderr_results\"\n
              \       fi\n        exit 1\n      }\n\n      capture_tmp_stderr() {\n
              \       # spool up /tmp/stderr from all the commands we called\n        if
              test -f \"$tmp_dir/stderr\"; then\n          output=`cat $tmp_dir/stderr`\n
              \         stderr_results=\"${stderr_results}\\nSTDERR from $1:\\n\\n$output\\n\"\n
              \         rm $tmp_dir/stderr\n        fi\n      }\n\n      # do_wget
              URL FILENAME\n      do_wget() {\n        echo \"trying wget...\"\n        wget
              -O \"$2\" \"$1\" 2>$tmp_dir/stderr\n        rc=$?\n        # check for
              404\n        grep \"ERROR 404\" $tmp_dir/stderr 2>&1 >/dev/null\n        if
              test $? -eq 0; then\n          echo \"ERROR 404\"\n          http_404_error\n
              \       fi\n\n        # check for bad return status or empty output\n
              \       if test $rc -ne 0 || test ! -s \"$2\"; then\n          capture_tmp_stderr
              \"wget\"\n          return 1\n        fi\n\n        return 0\n      }\n\n
              \     # do_curl URL FILENAME\n      do_curl() {\n        echo \"trying
              curl...\"\n        curl --retry 5 -sL -D $tmp_dir/stderr \"$1\" > \"$2\"\n
              \       rc=$?\n        # check for 404\n        grep \"404 Not Found\"
              $tmp_dir/stderr 2>&1 >/dev/null\n        if test $? -eq 0; then\n          echo
              \"ERROR 404\"\n          http_404_error\n        fi\n\n        # check
              for bad return status or empty output\n        if test $rc -ne 0 ||
              test ! -s \"$2\"; then\n          capture_tmp_stderr \"curl\"\n          return
              1\n        fi\n\n        return 0\n      }\n\n      # do_fetch URL FILENAME\n
              \     do_fetch() {\n        echo \"trying fetch...\"\n        fetch
              -o \"$2\" \"$1\" 2>$tmp_dir/stderr\n        # check for bad return status\n
              \       test $? -ne 0 && return 1\n        return 0\n      }\n\n      #
              do_perl URL FILENAME\n      do_perl() {\n        echo \"trying perl...\"\n
              \       perl -e 'use LWP::Simple; getprint($ARGV[0]);' \"$1\" > \"$2\"
              2>$tmp_dir/stderr\n        rc=$?\n        # check for 404\n        grep
              \"404 Not Found\" $tmp_dir/stderr 2>&1 >/dev/null\n        if test $?
              -eq 0; then\n          echo \"ERROR 404\"\n          http_404_error\n
              \       fi\n\n        # check for bad return status or empty output\n
              \       if test $rc -ne 0 || test ! -s \"$2\"; then\n          capture_tmp_stderr
              \"perl\"\n          return 1\n        fi\n\n        return 0\n      }\n\n
              \     # do_python URL FILENAME\n      do_python() {\n        echo \"trying
              python...\"\n        python -c \"import sys,urllib2 ; sys.stdout.write(urllib2.urlopen(sys.argv[1]).read())\"
              \"$1\" > \"$2\" 2>$tmp_dir/stderr\n        rc=$?\n        # check for
              404\n        grep \"HTTP Error 404\" $tmp_dir/stderr 2>&1 >/dev/null\n
              \       if test $? -eq 0; then\n          echo \"ERROR 404\"\n          http_404_error\n
              \       fi\n\n        # check for bad return status or empty output\n
              \       if test $rc -ne 0 || test ! -s \"$2\"; then\n          capture_tmp_stderr
              \"python\"\n          return 1\n        fi\n        return 0\n      }\n\n
              \     # returns 0 if checksums match\n      do_checksum() {\n        if
              exists sha256sum; then\n          echo \"Comparing checksum with sha256sum...\"\n
              \         checksum=`sha256sum $1 | awk '{ print $1 }'`\n          return
              `test \"x$checksum\" = \"x$2\"`\n        elif exists shasum; then\n
              \         echo \"Comparing checksum with shasum...\"\n          checksum=`shasum
              -a 256 $1 | awk '{ print $1 }'`\n          return `test \"x$checksum\"
              = \"x$2\"`\n        else\n          echo \"WARNING: could not find a
              valid checksum program, pre-install shasum or sha256sum in your O/S
              image to get valdation...\"\n          return 0\n        fi\n      }\n\n
              \     # do_download URL FILENAME\n      do_download() {\n        echo
              \"downloading $1\"\n        echo \"  to file $2\"\n\n        url=`echo
              $1`\n        if test \"x$platform\" = \"xsolaris2\"; then\n          if
              test \"x$platform_version\" = \"x5.9\" -o \"x$platform_version\" = \"x5.10\";
              then\n            # solaris 9 lacks openssl, solaris 10 lacks recent
              enough credentials - your base O/S is completely insecure, please upgrade\n
              \           url=`echo $url | sed -e 's/https/http/'`\n          fi\n
              \       fi\n\n        # we try all of these until we get success.\n
              \       # perl, in particular may be present but LWP::Simple may not
              be installed\n\n        if exists wget; then\n          do_wget $url
              $2 && return 0\n        fi\n\n        if exists curl; then\n          do_curl
              $url $2 && return 0\n        fi\n\n        if exists fetch; then\n          do_fetch
              $url $2 && return 0\n        fi\n\n        if exists perl; then\n          do_perl
              $url $2 && return 0\n        fi\n\n        if exists python; then\n
              \         do_python $url $2 && return 0\n        fi\n\n        unable_to_retrieve_package\n
              \     }\n\n      # install_file TYPE FILENAME\n      # TYPE is \"rpm\",
              \"deb\", \"solaris\", \"sh\", etc.\n      install_file() {\n        echo
              \"Installing $project $version\"\n        case \"$1\" in\n          \"rpm\")\n
              \           if test \"x$platform\" = \"xnexus\" || test \"x$platform\"
              = \"xios_xr\"; then\n              echo \"installing with yum...\"\n
              \             yum install -yv \"$2\"\n            else\n              echo
              \"installing with rpm...\"\n              rpm -Uvh --oldpackage --replacepkgs
              \"$2\"\n            fi\n            ;;\n          \"deb\")\n            echo
              \"installing with dpkg...\"\n            dpkg -i \"$2\"\n            ;;\n
              \         \"bff\")\n            echo \"installing with installp...\"\n
              \           installp -aXYgd \"$2\" all\n            ;;\n          \"solaris\")\n
              \           echo \"installing with pkgadd...\"\n            echo \"conflict=nocheck\"
              > $tmp_dir/nocheck\n            echo \"action=nocheck\" >> $tmp_dir/nocheck\n
              \           echo \"mail=\" >> $tmp_dir/nocheck\n            pkgrm -a
              $tmp_dir/nocheck -n $project >/dev/null 2>&1 || true\n            pkgadd
              -G -n -d \"$2\" -a $tmp_dir/nocheck $project\n            ;;\n          \"pkg\")\n
              \           echo \"installing with installer...\"\n            cd /
              && /usr/sbin/installer -pkg \"$2\" -target /\n            ;;\n          \"dmg\")\n
              \           echo \"installing dmg file...\"\n            hdiutil detach
              \"/Volumes/chef_software\" >/dev/null 2>&1 || true\n            hdiutil
              attach \"$2\" -mountpoint \"/Volumes/chef_software\"\n            cd
              / && /usr/sbin/installer -pkg `find \"/Volumes/chef_software\" -name
              \\*.pkg` -target /\n            hdiutil detach \"/Volumes/chef_software\"\n
              \           ;;\n          \"sh\" )\n            echo \"installing with
              sh...\"\n            sh \"$2\"\n            ;;\n          *)\n            echo
              \"Unknown filetype: $1\"\n            report_bug\n            exit 1\n
              \           ;;\n        esac\n        if test $? -ne 0; then\n          echo
              \"Installation failed\"\n          report_bug\n          exit 1\n        fi\n
              \     }\n\n      if test \"x$TMPDIR\" = \"x\"; then\n        tmp=\"/tmp\"\n
              \     else\n        tmp=$TMPDIR\n      fi\n      # secure-ish temp dir
              creation without having mktemp available (DDoS-able but not expliotable)\n
              \     tmp_dir=\"$tmp/install.sh.$$\"\n      (umask 077 && mkdir $tmp_dir)
              || exit 1\n\n      ############\n      # end of helpers.sh\n      ############\n\n\n
              \     project=chef\n      version=12.12.7+20160701150941\n      channel=unstable\n\n\n
              \     # platform_detection.sh\n      ############\n      # This section
              makes platform detection compatible with omnitruck on the system\n      #
              \  it runs.\n      #\n      # Outputs:\n      # $platform: Name of the
              platform.\n      # $platform_version: Version of the platform.\n      #
              $machine: System's architecture.\n      ############\n\n      #\n      #
              Platform and Platform Version detection\n      #\n      # NOTE: This
              should now match ohai platform and platform_version matching.\n      #
              do not invented new platform and platform_version schemas, just make
              this behave\n      # like what ohai returns as platform and platform_version
              for the server.\n      #\n      # ALSO NOTE: Do not mangle platform
              or platform_version here.  It is less error\n      # prone and more
              future-proof to do that in the server, and then all omnitruck clients\n
              \     # will 'inherit' the changes (install.sh is not the only client
              of the omnitruck\n      # endpoint out there).\n      #\n\n      machine=`uname
              -m`\n      os=`uname -s`\n\n      if test -f \"/etc/lsb-release\" &&
              grep -q DISTRIB_ID /etc/lsb-release && ! grep -q wrlinux /etc/lsb-release;
              then\n        platform=`grep DISTRIB_ID /etc/lsb-release | cut -d \"=\"
              -f 2 | tr '[A-Z]' '[a-z]'`\n        platform_version=`grep DISTRIB_RELEASE
              /etc/lsb-release | cut -d \"=\" -f 2`\n      elif test -f \"/etc/debian_version\";
              then\n        platform=\"debian\"\n        platform_version=`cat /etc/debian_version`\n
              \     elif test -f \"/etc/redhat-release\"; then\n        platform=`sed
              's/^\\(.\\+\\) release.*/\\1/' /etc/redhat-release | tr '[A-Z]' '[a-z]'`\n
              \       platform_version=`sed 's/^.\\+ release \\([.0-9]\\+\\).*/\\1/'
              /etc/redhat-release`\n\n        # If /etc/redhat-release exists, we
              act like RHEL by default\n        if test \"$platform\" = \"fedora\";
              then\n          # FIXME: stop remapping fedora to el\n          # FIXME:
              remove client side platform_version mangling and hard coded yolo\n          #
              Change platform version for use below.\n          platform_version=\"6.0\"\n
              \       fi\n\n        if test \"$platform\" = \"xenserver\"; then\n
              \         # Current XenServer 6.2 is based on CentOS 5, platform is
              not reset to \"el\" server should hanlde response\n          platform=\"xenserver\"\n
              \       else\n          # FIXME: use \"redhat\"\n          platform=\"el\"\n
              \       fi\n\n      elif test -f \"/etc/system-release\"; then\n        platform=`sed
              's/^\\(.\\+\\) release.\\+/\\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`\n
              \       platform_version=`sed 's/^.\\+ release \\([.0-9]\\+\\).*/\\1/'
              /etc/system-release | tr '[A-Z]' '[a-z]'`\n        # amazon is built
              off of fedora, so act like RHEL\n        if test \"$platform\" = \"amazon
              linux ami\"; then\n          # FIXME: remove client side platform_version
              mangling and hard coded yolo, and remapping to deprecated \"el\"\n          platform=\"el\"\n
              \         platform_version=\"6.0\"\n        fi\n      # Apple OS X\n
              \     elif test -f \"/usr/bin/sw_vers\"; then\n        platform=\"mac_os_x\"\n
              \       # Matching the tab-space with sed is error-prone\n        platform_version=`sw_vers
              | awk '/^ProductVersion:/ { print $2 }' | cut -d. -f1,2`\n\n        #
              x86_64 Apple hardware often runs 32-bit kernels (see OHAI-63)\n        x86_64=`sysctl
              -n hw.optional.x86_64`\n        if test $x86_64 -eq 1; then\n          machine=\"x86_64\"\n
              \       fi\n      elif test -f \"/etc/release\"; then\n        machine=`/usr/bin/uname
              -p`\n        if grep -q SmartOS /etc/release; then\n          platform=\"smartos\"\n
              \         platform_version=`grep ^Image /etc/product | awk '{ print
              $3 }'`\n        else\n          platform=\"solaris2\"\n          platform_version=`/usr/bin/uname
              -r`\n        fi\n      elif test -f \"/etc/SuSE-release\"; then\n        if
              grep -q 'Enterprise' /etc/SuSE-release;\n        then\n            platform=\"sles\"\n
              \           platform_version=`awk '/^VERSION/ {V = $3}; /^PATCHLEVEL/
              {P = $3}; END {print V \".\" P}' /etc/SuSE-release`\n        else\n
              \           platform=\"suse\"\n            platform_version=`awk '/^VERSION
              =/ { print $3 }' /etc/SuSE-release`\n        fi\n      elif test \"x$os\"
              = \"xFreeBSD\"; then\n        platform=\"freebsd\"\n        platform_version=`uname
              -r | sed 's/-.*//'`\n      elif test \"x$os\" = \"xAIX\"; then\n        platform=\"aix\"\n
              \       platform_version=\"`uname -v`.`uname -r`\"\n        machine=\"powerpc\"\n
              \     elif test -f \"/etc/os-release\"; then\n        . /etc/os-release\n
              \       if test \"x$CISCO_RELEASE_INFO\" != \"x\"; then\n          .
              $CISCO_RELEASE_INFO\n        fi\n\n        platform=$ID\n        platform_version=$VERSION\n
              \     fi\n\n      if test \"x$platform\" = \"x\"; then\n        echo
              \"Unable to determine platform version!\"\n        report_bug\n        exit
              1\n      fi\n\n      #\n      # NOTE: platform manging in the install.sh
              is DEPRECATED\n      #\n      # - install.sh should be true to ohai
              and should not remap\n      #   platform or platform versions.\n      #\n
              \     # - remapping platform and mangling platform version numbers is\n
              \     #   now the complete responsibility of the server-side endpoints\n
              \     #\n\n      major_version=`echo $platform_version | cut -d. -f1`\n
              \     case $platform in\n        # FIXME: should remove this case statement
              completely\n        \"el\")\n          # FIXME:  \"el\" is deprecated,
              should use \"redhat\"\n          platform_version=$major_version\n          ;;\n
              \       \"debian\")\n          if test \"x$major_version\" = \"x5\";
              then\n            # This is here for potential back-compat.\n            #
              We do not have 5 in versions we publish for anymore but we\n            #
              might have it for earlier versions.\n            platform_version=\"6\"\n
              \         else\n            platform_version=$major_version\n          fi\n
              \         ;;\n        \"freebsd\")\n          platform_version=$major_version\n
              \         ;;\n        \"sles\")\n          platform_version=$major_version\n
              \         ;;\n        \"suse\")\n          platform_version=$major_version\n
              \         ;;\n      esac\n\n      # normalize the architecture we detected\n
              \     case $machine in\n        \"x86_64\"|\"amd64\"|\"x64\")\n          machine=\"x86_64\"\n
              \         ;;\n        \"i386\"|\"i86pc\"|\"x86\"|\"i686\")\n          machine=\"i386\"\n
              \         ;;\n        \"sparc\"|\"sun4u\"|\"sun4v\")\n          machine=\"sparc\"\n
              \         ;;\n      esac\n\n      if test \"x$platform_version\" = \"x\";
              then\n        echo \"Unable to determine platform version!\"\n        report_bug\n
              \       exit 1\n      fi\n\n      if test \"x$platform\" = \"xsolaris2\";
              then\n        # hack up the path on Solaris to find wget, pkgadd\n        PATH=/usr/sfw/bin:/usr/sbin:$PATH\n
              \       export PATH\n      fi\n\n      echo \"$platform $platform_version
              $machine\"\n\n      ############\n      # end of platform_detection.sh\n
              \     ############\n\n\n      # artifactory_urls.sh\n      ############\n
              \     # This section sets up the information for a build to be installed
              from artifactory\n      #  then uses $platform, $platform_version and
              $machine to select the correct\n      #  version.\n      #\n      #
              Inputs:\n      # $platform:\n      # $platform_version:\n      # $machine:\n
              \     #\n      # Outputs:\n      # $download_url:\n      # $sha256:\n
              \     ############\n\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/14.04/ppc64le\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_ppc64el.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 89a564bafc4b22db5f5539fe1925587c6bf2334f0c344e0c13264f52ae537b0a\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.9/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.9/chef-12.12.7+20160701150941-1.dmg\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.10/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.10/chef-12.12.7+20160701150941-1.dmg\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.11/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.11/chef-12.12.7+20160701150941-1.dmg\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/ios_xr/6/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ios_xr/6/chef-12.12.7+20160701150941-1.ios_xr6.x86_64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 96689d0525260209d68e4991db7144b0aa31a6f7628c9e4e5f23c6f150025fb0\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/debian/6/i686\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_i386.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/debian/7/i686\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_i386.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/debian/8/i686\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_i386.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/nexus/7/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/nexus/7/chef-12.12.7+20160701150941-1.nexus7.x86_64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 f5c620dc0166571903f28990240a5bbb1123bd6e8433a8d8d4aa9b2ba8587bbb\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/freebsd/10/i386\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.i386.sh\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 6d3b80e324377a5a80889d51ec5b0d0730d7503eb14c32a4ed7fd9e2ad21d615\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/12.04/i686\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_i386.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/14.04/i686\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_i386.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/freebsd/9/i386\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.i386.sh\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 8d63b437804b48672cc7b325bd3eb3a1ff525978b894c9b6e7c63db011aac295\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/solaris2/5.10/i386\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.i386.solaris\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/el/5/i686\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.i386.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 e910142a9bdc53757635db7f997f00e5415cc6dadea981aeec1e999489586ee2\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/el/7/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.x86_64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 13296dfe3559a3cb5664a8319e57153635ba867a3a72feb4b040ce833fc22914\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/solaris2/5.11/i386\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.i386.solaris\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/el/6/i686\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.i386.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 e31a417ea73cefb3424496b07b19e188a5d079db40fc29bae0c8a24b2fb9d558\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/windows/2008r2/i386\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x86.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/12.04/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/14.04/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/windows/2012/i386\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x86.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/el/7/ppc64le\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64le.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 5fb71d38e54b0a6e8fc142f48e693de2dc54891edde59f65db61bf097766a3de\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/debian/6/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/debian/7/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/el/7/ppc64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 bc5a1ea39782df044cd069523d6534f72222855bbf99a98961858cdaee51d7c0\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/debian/8/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/windows/2012r2/i386\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x86.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/freebsd/10/amd64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.amd64.sh\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 f4c5e3b437e5129e89a5ca0d69036dcf0e6e4b21a0eef61b495ab63a0be2fe94\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/el/5/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.x86_64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 58bed7db8fe43a1e8441d9a2a5e46b9fe4ab7e932dd1f7f5e0dc53adc004704c\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/el/6/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.x86_64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 e30aac011f866a56f3542eaaa17cf18e40df6021e997e32fd3d1ae5b8f11e274\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/windows/2008r2/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x64.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/freebsd/9/amd64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.amd64.sh\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 6fc165d1fbc96f5ed5ffbfedb154e7ede4d6e87fccec3c80c0de5510527bd673\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/windows/2012/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x64.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/windows/2012r2/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x64.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/aix/6.1/powerpc\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/6.1/chef-12.12.7+20160701150941-1.powerpc.bff\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/aix/7.1/powerpc\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/7.1/chef-12.12.7+20160701150941-1.powerpc.bff\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/solaris2/5.10/sparc\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.sparc.solaris\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817\"
              >> \"$artifact_info_dir/artifact_info\"\n\n        artifact_info_dir=\"$tmp_dir/artifact_info/solaris2/5.11/sparc\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.sparc.solaris\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817\"
              >> \"$artifact_info_dir/artifact_info\"\n\n\n      artifact_info_for_platform=\"$tmp_dir/artifact_info/$platform/$platform_version/$machine/artifact_info\"\n\n
              \     download_url=`awk '$1 == \"url\" { print $2 }' \"$artifact_info_for_platform\"`\n
              \     sha256=`awk '$1 == \"sha256\" { print $2 }' \"$artifact_info_for_platform\"`\n\n\n
              \     # fetch_package.sh\n      ############\n      # This section fetchs
              a package from $download_url and verifies its metadata.\n      #\n      #
              Inputs:\n      # $download_url:\n      # $tmp_dir:\n      # Optional
              Inputs:\n      # $cmdline_filename: Name of the package downloaded on
              local disk.\n      # $cmdline_dl_dir: Name of the directory downloaded
              package will be saved to on local disk.\n      #\n      # Outputs:\n
              \     # $download_filename: Name of the downloaded file on local disk.\n
              \     # $filetype: Type of the file downloaded.\n      ############\n\n
              \     filename=`echo $download_url | sed -e 's/^.*\\///'`\n      filetype=`echo
              $filename | sed -e 's/^.*\\.//'`\n\n      # use either $tmp_dir, the
              provided directory (-d) or the provided filename (-f)\n      if test
              \"x$cmdline_filename\" != \"x\"; then\n        download_filename=\"$cmdline_filename\"\n
              \     elif test \"x$cmdline_dl_dir\" != \"x\"; then\n        download_filename=\"$cmdline_dl_dir/$filename\"\n
              \     else\n        download_filename=\"$tmp_dir/$filename\"\n      fi\n\n
              \     # ensure the parent directory where to download the installer
              always exists\n      download_dir=`dirname $download_filename`\n      (umask
              077 && mkdir -p $download_dir) || exit 1\n\n      # check if we have
              that file locally available and if so verify the checksum\n      cached_file_available=\"false\"\n
              \     if test -f $download_filename; then\n        echo \"$download_filename
              already exists, verifiying checksum...\"\n        if do_checksum \"$download_filename\"
              \"$sha256\"; then\n          echo \"checksum compare succeeded, using
              existing file!\"\n          cached_file_available=\"true\"\n        else\n
              \         echo \"checksum mismatch, downloading latest version of the
              file\"\n        fi\n      fi\n\n      # download if no local version
              of the file available\n      if test \"x$cached_file_available\" !=
              \"xtrue\"; then\n        do_download \"$download_url\"  \"$download_filename\"\n
              \       do_checksum \"$download_filename\" \"$sha256\" || checksum_mismatch\n
              \     fi\n\n      ############\n      # end of fetch_package.sh\n      ############\n\n\n
              \     # install_package.sh\n      ############\n      # Installs a package
              and removed the temp directory.\n      #\n      # Inputs:\n      # $download_filename:
              Name of the file to be installed.\n      # $filetype: Type of the file
              to be installed.\n      # $version: The version requested. Used only
              for warning user if not set.\n      ############\n\n      if test \"x$version\"
              = \"x\"; then\n        echo\n        echo \"WARNING WARNING WARNING
              WARNING WARNING WARNING WARNING WARNING WARNING\"\n        echo\n        echo
              \"You are installing an omnibus package without a version pin.  If you
              are installing\"\n        echo \"on production servers via an automated
              process this is DANGEROUS and you will\"\n        echo \"be upgraded
              without warning on new releases, even to new major releases.\"\n        echo
              \"Letting the version float is only appropriate in desktop, test, development
              or\"\n        echo \"CI/CD environments.\"\n        echo\n        echo
              \"WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING\"\n
              \       echo\n      fi\n\n      install_file $filetype \"$download_filename\"\n\n
              \     if test \"x$tmp_dir\" != \"x\"; then\n        rm -r \"$tmp_dir\"\n
              \     fi\n\n      ############\n      # end of install_package.sh\n
              \     ############\n\n      EOL\n      chmod +x /tmp/chef-installer.sh\n
              \     sudo -E /tmp/chef-installer.sh)\n             ubuntu 14.04 x86_64\n
              \            downloading http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_amd64.deb\n
              \              to file /tmp/install.sh.1356/chef_12.12.7+20160701150941-1_amd64.deb\n
              \            trying wget...\n             Comparing checksum with sha256sum...\n
              \            Installing chef 12.12.7+20160701150941\n             installing
              with dpkg...\n             Selecting previously unselected package chef.\n
              \            (Reading database ... \r(Reading database ... 5%\r(Reading
              database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading
              database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading
              database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading
              database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading
              database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading
              database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading
              database ... 100%\r(Reading database ... 51167 files and directories
              currently installed.)\n             Preparing to unpack .../chef_12.12.7+20160701150941-1_amd64.deb
              ...\n             Unpacking chef (12.12.7+20160701150941-1) ...\n             Setting
              up chef (12.12.7+20160701150941-1) ...\n             Thank you for installing
              Chef!\n      D      [SSH] ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}> (sh -c '\n      sudo_rm=\"sudo -E rm\"\n      dirs=\"/tmp/kitchen/clients
              /tmp/kitchen/cookbooks /tmp/kitchen/data /tmp/kitchen/data_bags /tmp/kitchen/encrypted_data_bag_secret
              /tmp/kitchen/environments /tmp/kitchen/roles\"\n      root_path=\"/tmp/kitchen\"\n\n
              \     $sudo_rm -rf $dirs\n      mkdir -p $root_path\n      ')\n             Transferring
              files to <docker-default-ubuntu-1404>\n      D      TIMING: scp async
              upload (Kitchen::Transport::Ssh)\n      D      TIMING: scp async upload
              (Kitchen::Transport::Ssh) took (0m7.23s)\n      D      Transfer complete\n
              \     D      Attempting to execute command - try 1 of 1.\n      D      [SSH]
              ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\", :paranoid=>false,
              :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true,
              :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"],
              :auth_methods=>[\"publickey\"], :user=>\"ubuntu\"}> (sh -c '\n      sudo
              -E /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb
              --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json
              --chef-zero-port 8889\n      ')\n             Starting Chef Client,
              version 12.12.7\n             Creating a new client identity for docker-default-ubuntu-1404
              using the validator key.\n             resolving cookbooks for run list:
              [\"apt\", \"chef-apt-docker\"]\n             Synchronizing Cookbooks:\n
              \              - apt (4.0.1)\n               - chef-apt-docker (1.0.0)\n
              \              - compat_resource (12.10.6)\n             Installing
              Cookbook Gems:\n             Compiling Cookbooks...\n             [2016-07-01T15:45:11+00:00]
              WARN: Chef::Provider::AptRepository already exists!  Cannot create deprecation
              class for LWRP provider apt_repository from cookbook apt\n             [2016-07-01T15:45:11+00:00]
              WARN: AptRepository already exists!  Deprecation class overwrites Custom
              resource apt_repository from cookbook apt\n             Converging 10
              resources\n             Recipe: apt::default\n               * file[/var/lib/apt/periodic/update-success-stamp]
              action nothing (skipped due to action :nothing)\n               * apt_update[periodic]
              action periodic\n                 - update new lists of packages\n                 *
              directory[/var/lib/apt/periodic] action create (up to date)\n                 *
              directory[/etc/apt/apt.conf.d] action create (up to date)\n                 *
              file[/etc/apt/apt.conf.d/15update-stamp] action create_if_missing (up
              to date)\n                 * execute[apt-get -q update] action run\n
              \                  - execute apt-get -q update\n\n               * execute[apt-get
              update] action nothing (skipped due to action :nothing)\n               *
              execute[apt-get autoremove] action nothing (skipped due to action :nothing)\n
              \              * execute[apt-get autoclean] action nothing (skipped
              due to action :nothing)\n               * directory[/var/cache/local]
              action create\n                 - create new directory /var/cache/local\n
              \                - change mode from '' to '0755'\n                 -
              change owner from '' to 'root'\n                 - change group from
              '' to 'root'\n               * directory[/var/cache/local/preseeding]
              action create\n                 - create new directory /var/cache/local/preseeding\n
              \                - change mode from '' to '0755'\n                 -
              change owner from '' to 'root'\n                 - change group from
              '' to 'root'\n               * template[/etc/apt/apt.conf.d/10recommends]
              action create\n                 - create new file /etc/apt/apt.conf.d/10recommends\n
              \                - update content in file /etc/apt/apt.conf.d/10recommends
              from none to f41e1d\n                 --- /etc/apt/apt.conf.d/10recommends
              \ 2016-07-01 15:45:19.215704000 +0000\n                 +++ /etc/apt/apt.conf.d/.chef-10recommends20160701-1523-1o5o3pc
              \ 2016-07-01 15:45:19.215704000 +0000\n                 @@ -1 +1,4 @@\n
              \                +# Managed by Chef\n                 +APT::Install-Recommends
              \"1\";\n                 +APT::Install-Suggests \"0\";\n                 -
              change mode from '' to '0644'\n                 - change owner from
              '' to 'root'\n                 - change group from '' to 'root'\n               *
              apt_package[apt-transport-https] action install (up to date)\n             Recipe:
              chef-apt-docker::default\n               * apt_repository[docker] action
              add\n                 * execute[install-key 58118E89F3A912897C070ADBF76221572C52609D]
              action run\n\n                   ================================================================================\n
              \                  Error executing action `run` on resource 'execute[install-key
              58118E89F3A912897C070ADBF76221572C52609D]'\n                   ================================================================================\n\n
              \                  Mixlib::ShellOut::ShellCommandFailed\n                   ------------------------------------\n
              \                  Expected process to exit with [0], but received '2'\n
              \                  ---- Begin output of apt-key adv --recv --keyserver
              hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D
              ----\n                   STDOUT: Executing: gpg --ignore-time-conflict
              --no-options --no-default-keyring --homedir /tmp/tmp.FgMIvkGpBQ --no-auto-check-trustdb
              --trust-model always --keyring /etc/apt/trusted.gpg --primary-keyring
              /etc/apt/trusted.gpg --recv --keyserver hkp://p80.pool.sks-keyservers.net:80
              58118E89F3A912897C070ADBF76221572C52609D\n                   STDERR:
              gpg: requesting key 2C52609D from hkp server p80.pool.sks-keyservers.net\n
              \                  gpg: keyserver timed out\n                   gpg:
              keyserver receive failed: keyserver error\n                   ---- End
              output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80
              58118E89F3A912897C070ADBF76221572C52609D ----\n                   Ran
              apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80
              58118E89F3A912897C070ADBF76221572C52609D returned 2\n\n                   Cookbook
              Trace:\n                   ---------------\n                   /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in
              `run_action'\n                   /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in
              `run_action'\n\n                   Resource Declaration:\n                   ---------------------\n
              \                  # In /opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/lib/chef/provider/apt_repository.rb\n\n
              \                  201:         declare_resource(:execute, \"install-key
              #{key}\") do\n                   202:           command cmd\n                   203:
              \          sensitive new_resource.sensitive\n                   204:
              \          not_if do\n                   205:             present =
              extract_fingerprints_from_cmd(\"apt-key finger\").any? do |fp|\n                   206:
              \              fp.end_with? key.upcase\n                   207:             end\n
              \                  208:             present && key_is_valid?(\"apt-key
              list\", key.upcase)\n                   209:           end\n                   210:
              \          notifies :run, \"execute[apt-cache gencaches]\", :immediately\n
              \                  211:         end\n                   212:\n\n                   Compiled
              Resource:\n                   ------------------\n                   #
              Declared in /opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/lib/chef/provider/apt_repository.rb:201:in
              `install_key_from_keyserver'\n\n                   execute(\"install-key
              58118E89F3A912897C070ADBF76221572C52609D\") do\n              action
              [:run]\n              retries 0\n              retry_delay 2\n              default_guard_interpreter
              :execute\n              command \"apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80
              58118E89F3A912897C070ADBF76221572C52609D\"\n              backup 5\n
              \             returns 0\n              declared_type :execute\n              cookbook_name
              \"chef-apt-docker\"\n              not_if { #code block }\n                   end\n\n
              \                  Platform:\n                   ---------\n                   x86_64-linux\n\n\n
              \                ================================================================================\n
              \                Error executing action `add` on resource 'apt_repository[docker]'\n
              \                ================================================================================\n\n
              \                Mixlib::ShellOut::ShellCommandFailed\n                 ------------------------------------\n
              \                execute[install-key 58118E89F3A912897C070ADBF76221572C52609D]
              (/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/lib/chef/provider/apt_repository.rb
              line 201) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected
              process to exit with [0], but received '2'\n                 ---- Begin
              output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80
              58118E89F3A912897C070ADBF76221572C52609D ----\n                 STDOUT:
              Executing: gpg --ignore-time-conflict --no-options --no-default-keyring
              --homedir /tmp/tmp.FgMIvkGpBQ --no-auto-check-trustdb --trust-model
              always --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg
              --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D\n
              \                STDERR: gpg: requesting key 2C52609D from hkp server
              p80.pool.sks-keyservers.net\n                 gpg: keyserver timed out\n
              \                gpg: keyserver receive failed: keyserver error\n                 ----
              End output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80
              58118E89F3A912897C070ADBF76221572C52609D ----\n                 Ran
              apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80
              58118E89F3A912897C070ADBF76221572C52609D returned 2\n\n                 Cookbook
              Trace:\n                 ---------------\n                 /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in
              `run_action'\n                 /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in
              `run_action'\n\n                 Resource Declaration:\n                 ---------------------\n
              \                # In /tmp/kitchen/cache/cookbooks/chef-apt-docker/recipes/default.rb\n\n
              \                 20: apt_repository 'docker' do\n                  21:
              \  uri 'https://apt.dockerproject.org/repo'\n                  22:   distribution
              \"#{node['platform']}-#{node['lsb']['codename']}\"\n                  23:
              \  keyserver 'p80.pool.sks-keyservers.net'\n                  24:   components
              node['chef-apt-docker']['components']\n                  25:   key '58118E89F3A912897C070ADBF76221572C52609D'\n
              \                 26: end\n\n                 Compiled Resource:\n                 ------------------\n
              \                # Declared in /tmp/kitchen/cache/cookbooks/chef-apt-docker/recipes/default.rb:20:in
              `from_file'\n\n                 apt_repository(\"docker\") do\n                   action
              [:add]\n                   retries 0\n                   retry_delay
              2\n                   default_guard_interpreter :default\n                   declared_type
              :apt_repository\n                   cookbook_name \"chef-apt-docker\"\n
              \                  recipe_name \"default\"\n                   uri \"https://apt.dockerproject.org/repo\"\n
              \                  distribution \"ubuntu-trusty\"\n                   keyserver
              \"p80.pool.sks-keyservers.net\"\n                   components [\"main\"]\n
              \                  key \"58118E89F3A912897C070ADBF76221572C52609D\"\n
              \                  cache_rebuild true\n                 end\n\n                 Platform:\n
              \                ---------\n                 x86_64-linux\n\n             Starting
              audit phase\n\n             Finished in 0.00027 seconds (files took
              0.27631 seconds to load)\n             0 examples, 0 failures\n             Auditing
              complete\n\n             Running handlers:\n             [2016-07-01T15:47:20+00:00]
              ERROR: Running exception handlers\n             Running handlers complete\n
              \            [2016-07-01T15:47:20+00:00] ERROR: Exception handlers complete\n
              \            Chef Client failed. 5 resources updated in 02 minutes 11
              seconds\n             [2016-07-01T15:47:20+00:00] ERROR: Failed to post
              audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json\n
              \            [2016-07-01T15:47:20+00:00] FATAL: Stacktrace dumped to
              /tmp/kitchen/cache/chef-stacktrace.out\n             [2016-07-01T15:47:20+00:00]
              FATAL: Please provide the contents of the stacktrace.out file if you
              file a bug report\n             [2016-07-01T15:47:20+00:00] ERROR: Found
              1 errors, they are stored in the backtrace\n             [2016-07-01T15:47:21+00:00]
              FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited
              unsuccessfully (exit code 1)\n      D      Cleaning up local sandbox
              in /tmp/cheftest/docker-default-ubuntu-1404-sandbox-20160701-11660-y00zuf\n
              \     D      [SSH] shutting previous connection ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}>\n      D      [SSH] closing connection to ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}>\n      D      ------Exception-------\n      D      Class:
              Kitchen::ActionFailed\n      D      Message: 1 actions failed.\n      >>>>>>
              \    Converge failed on instance <docker-default-ubuntu-1404>.  Please
              see .kitchen/logs/docker-default-ubuntu-1404.log for more details\n
              \     D      ----------------------\n      D      ------Backtrace-------\n
              \     D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:187:in
              `report_errors'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:178:in
              `run_action'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command/action.rb:39:in
              `block in call'\n      D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in
              `measure'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command/action.rb:37:in
              `call'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:56:in
              `perform'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:184:in
              `block (2 levels) in <class:CLI>'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in
              `run'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in
              `invoke_command'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:325:in
              `invoke_task'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in
              `dispatch'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in
              `start'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/bin/kitchen:13:in
              `block in <top (required)>'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/errors.rb:174:in
              `with_friendly_errors'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/bin/kitchen:13:in
              `<top (required)>'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:23:in
              `load'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:23:in
              `<main>'\n      D      ----End Backtrace-----\n      D      -Composite
              Exception--\n      D      Class: Kitchen::InstanceFailure\n      D      Message:
              Converge failed on instance <docker-default-ubuntu-1404>.  Please see
              .kitchen/logs/docker-default-ubuntu-1404.log for more details\n      D
              \     ----------------------\n      D      ------Backtrace-------\n
              \     D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:86:in
              `rescue in call'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:89:in
              `call'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:373:in
              `block in converge_action'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in
              `call'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in
              `synchronize_or_call'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:478:in
              `block in action'\n      D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in
              `measure'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:477:in
              `action'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:369:in
              `converge_action'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:348:in
              `block in transition_to'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in
              `each'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in
              `transition_to'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:138:in
              `converge'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in
              `public_send'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in
              `run_action_in_thread'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:173:in
              `block (2 levels) in run_action'\n      D      ----End Backtrace-----\n
              \     D      ---Nested Exception---\n      D      Class: Kitchen::ActionFailed\n
              \     D      Message: SSH exited (1) for command: [sh -c '\n      sudo
              -E /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb
              --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json
              --chef-zero-port 8889\n      ']\n      D      ----------------------\n
              \     D      ------Backtrace-------\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:86:in
              `rescue in call'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:89:in
              `call'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:373:in
              `block in converge_action'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in
              `call'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in
              `synchronize_or_call'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:478:in
              `block in action'\n      D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in
              `measure'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:477:in
              `action'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:369:in
              `converge_action'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:348:in
              `block in transition_to'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in
              `each'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in
              `transition_to'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:138:in
              `converge'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in
              `public_send'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in
              `run_action_in_thread'\n      D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:173:in
              `block (2 levels) in run_action'\n      D      ----End Backtrace-----\n
              \     STDERR: >>>>>> ------Exception-------\n      >>>>>> Class: Kitchen::ActionFailed\n
              \     >>>>>> Message: 1 actions failed.\n      >>>>>>     Converge failed
              on instance <docker-default-ubuntu-1404>.  Please see .kitchen/logs/docker-default-ubuntu-1404.log
              for more details\n      >>>>>> ----------------------\n      >>>>>>
              Please see .kitchen/logs/kitchen.log for more details\n      >>>>>>
              Also try running `kitchen diagnose --all` for configuration\n      ----
              End output of bundle exec kitchen converge  -c -l debug ----\n      Ran
              bundle exec kitchen converge  -c -l debug returned 20\n\n      Resource
              Declaration:\n      ---------------------\n      # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/libraries/top_cookbooks.rb\n\n
              \       7:     cookbook_kitchen \"#{command} docker\" do\n        8:
              \    end\n        9:\n\n      Compiled Resource:\n      ------------------\n
              \     # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/libraries/top_cookbooks.rb:7:in
              `block in <class:TopCookbooks>'\n\n      cookbook_kitchen(\"converge
              docker\") do\n        action [:run]\n        updated true\n        updated_by_last_action
              true\n        retries 0\n        retry_delay 2\n        default_guard_interpreter
              :default\n        declared_type :cookbook_kitchen\n        cookbook_name
              \"acceptance-cookbook\"\n        repository \"https://github.com/chef-cookbooks/docker.git\"\n
              \       test_cookbook \"docker\"\n        repository_root \"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/docker\"\n
              \       branch \"master\"\n        command \"converge\"\n        kitchen_options
              \"-c -l debug\"\n        kitchen_dir \"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/docker/\"\n
              \       chef_product \"chef\"\n        env {\"BUNDLE_GEMFILE\"=>\"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/Gemfile\",
              \"KITCHEN_YAML\"=>\"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/.kitchen.docker.yml\"}\n
              \     end\n\n\n    ================================================================================\n
              \   Error executing action `run` on resource 'top_cookbooks[converge]'\n
              \   ================================================================================\n\n
              \   Mixlib::ShellOut::ShellCommandFailed\n    ------------------------------------\n
              \   cookbook_kitchen[converge docker] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/libraries/top_cookbooks.rb
              line 7) had an error: Mixlib::ShellOut::ShellCommandFailed: execute[bundle
              exec kitchen converge  -c -l debug] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb
              line 36) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected
              process to exit with [0], but received '20'\n    ---- Begin output of
              bundle exec kitchen converge  -c -l debug ----\n    STDOUT: -----> Starting
              Kitchen (v1.10.2)\n    D      Berksfile found at /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/docker/Berksfile,
              loading Berkshelf\n    D      Berkshelf 4.3.5 library loaded\n    ----->
              Creating <docker-default-ubuntu-1404>...\n           If you are not
              using an account that qualifies under the AWS\n    free-tier, you may
              be charged to run these suites. The charge\n    should be minimal, but
              neither Test Kitchen nor its maintainers\n    are responsible for your
              incurred costs.\n\n    D      platform name ubuntu-14.04 appears to
              be a standard platform. Searching for ubuntu 14.04 ...\n    D      Searching
              for images matching {:name=>\"ubuntu/images/*/ubuntu-*-14.04-*-server-*\",
              :\"owner-id\"=>\"099720109477\", :architecture=>\"x86_64\", :\"virtualization-type\"=>\"hvm\",
              :\"block-device-mapping.volume-type\"=>\"gp2\", :\"image-type\"=>\"machine\"}
              ...\n    D      Search returned 58 images:\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160627:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-06-29T15:13:53.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160620: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2016-06-21T12:07:59.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160602:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-06-03T01:17:21.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160516: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2016-05-17T09:54:45.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160509.1:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-05-10T11:55:52.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160406: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2016-04-06T22:01:48.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160314:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-03-15T08:30:56.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160222: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2016-02-23T13:53:30.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160217.1:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-02-18T01:37:46.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160201: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2016-02-02T12:11:43.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160119:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2016-01-20T12:15:17.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160114.5: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2016-01-15T22:11:35.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151218:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-12-20T01:45:49.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151217: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-12-18T09:40:49.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151117:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-11-18T08:17:32.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151105: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-11-06T23:03:53.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151019:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-10-20T09:04:11.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151015: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-10-15T20:43:54.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151008:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-10-09T08:48:14.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151007: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-10-08T08:57:50.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20151005:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-10-06T09:26:41.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150930: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-10-01T11:24:14.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150928:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-09-29T11:13:44.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150924: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-09-25T13:37:47.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150908:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-09-09T05:59:15.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150901.1: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-09-02T05:15:07.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150814:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-08-15T08:11:39.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150813: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-08-14T07:14:42.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150812:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-08-13T08:50:05.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150810: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-08-11T11:43:49.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150805:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-08-06T19:29:13.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150731: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-08-01T09:17:08.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150727:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-07-28T07:13:51.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150724: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-07-25T05:22:13.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150629:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-06-30T09:14:39.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150609: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-06-09T17:42:29.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150608:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-06-09T03:54:29.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150603: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-06-04T08:13:50.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150528:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-05-29T10:15:24.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150506: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-05-07T08:14:11.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150417:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-04-17T12:06:11.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150408.1: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-04-09T08:52:15.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150325:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-03-25T23:56:26.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150305: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-03-05T11:02:56.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150227.2:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-02-28T07:15:31.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150225.2: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-02-26T06:03:04.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150209.1:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2015-02-10T05:22:56.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20150123: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2015-01-23T10:57:13.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20141125:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2014-11-26T01:50:28.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140927: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2014-09-30T00:19:14.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140926:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2014-09-26T16:05:00.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140924: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2014-09-25T14:07:23.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140923:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2014-09-23T14:15:33.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140829: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2014-08-29T18:46:07.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140816:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2014-08-16T22:57:30.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140813: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2014-08-14T00:50:31.000Z\n    D      - ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140724:
              Detected ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization:
              hvm, Storage: ebs gp2, Created: 2014-07-25T08:28:59.000Z\n    D      -
              ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20140607.1: Detected
              ubuntu 14.04 x86_64.  Architecture: x86_64, Virtualization: hvm, Storage:
              ebs gp2, Created: 2014-07-23T18:05:49.000Z\n    D      Creating EC2
              instance in region us-west-2 with properties:\n    D      - instance_type
              = \"m3.large\"\n    D      - ebs_optimized = false\n    D      - image_id
              = \"ami-42569022\"\n    D      - key_name = \"jenkins\"\n    D      -
              subnet_id = \"subnet-19ac017c\"\n    D      - private_ip_address = nil\n
              \   D      - placement = {:availability_zone=>\"us-west-2a\"}\n    D
              \     - security_group_ids = [\"sg-e401eb83\", \"sg-96274af3\"]\n           Instance
              <i-823ae12d> requested.\n           Polling AWS for existence, attempt
              0...\n           Attempting to tag the instance, 0 retries\n           EC2
              instance <i-823ae12d> created.\n           Waited 0/300s for instance
              <i-823ae12d> to become ready.\n           Waited 5/300s for instance
              <i-823ae12d> to become ready.\n           Waited 10/300s for instance
              <i-823ae12d> to become ready.\n           Waited 15/300s for instance
              <i-823ae12d> to become ready.\n           Waited 20/300s for instance
              <i-823ae12d> to become ready.\n           EC2 instance <i-823ae12d>
              ready.\n    D      [SSH] opening connection to ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"]}>\n
              \   D      [SSH] connection failed (#<Errno::ECONNREFUSED: Connection
              refused - connect(2) for 10.194.12.142:22>)\n           Waiting for
              SSH service on 10.194.12.142:22, retrying in 3 seconds\n    D      [SSH]
              opening connection to ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}>\n    D      [SSH] connection failed (#<Errno::ECONNREFUSED:
              Connection refused - connect(2) for 10.194.12.142:22>)\n           Waiting
              for SSH service on 10.194.12.142:22, retrying in 3 seconds\n    D      [SSH]
              opening connection to ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}>\n    D      [SSH] ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}> (echo '[SSH] Established')\n           [SSH] Established\n
              \   D      Using sudo_command='sudo -E' for ohai hints\n    D      [SSH]
              reusing existing connection ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}>\n    D      [SSH] ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}> (sudo -E mkdir -p /etc/chef/ohai/hints; sudo -E
              touch /etc/chef/ohai/hints/ec2.json)\n    D      ec2:create '10.194.12.142'\n
              \          Finished creating <docker-default-ubuntu-1404> (0m39.56s).\n
              \   -----> Converging <docker-default-ubuntu-1404>...\n           Preparing
              files for transfer\n    D      Creating local sandbox in /tmp/cheftest/docker-default-ubuntu-1404-sandbox-20160701-11660-y00zuf\n
              \          Preparing dna.json\n    D      Creating dna.json from {:chef_acceptance=>\"true\",
              :use_system_chef=>\"true\", :docker=>{:version=>\"1.10.0\"}, :run_list=>[\"recipe[apt]\",
              \"recipe[chef-apt-docker]\"]}\n           Resolving cookbook dependencies
              with Berkshelf 4.3.5...\n    D      Using Berksfile from /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/docker/Berksfile\n
              \          Removing non-cookbook files before transfer\n           Preparing
              validation.pem\n    D      Using a dummy validation.pem\n           Preparing
              client.rb\n    D      Creating client.rb from {:node_name=>\"docker-default-ubuntu-1404\",
              :checksum_path=>\"/tmp/kitchen/checksums\", :file_cache_path=>\"/tmp/kitchen/cache\",
              :file_backup_path=>\"/tmp/kitchen/backup\", :cookbook_path=>[\"/tmp/kitchen/cookbooks\",
              \"/tmp/kitchen/site-cookbooks\"], :data_bag_path=>\"/tmp/kitchen/data_bags\",
              :environment_path=>\"/tmp/kitchen/environments\", :node_path=>\"/tmp/kitchen/nodes\",
              :role_path=>\"/tmp/kitchen/roles\", :client_path=>\"/tmp/kitchen/clients\",
              :user_path=>\"/tmp/kitchen/users\", :validation_key=>\"/tmp/kitchen/validation.pem\",
              :client_key=>\"/tmp/kitchen/client.pem\", :chef_server_url=>\"http://127.0.0.1:8889\",
              :encrypted_data_bag_secret=>\"/tmp/kitchen/encrypted_data_bag_secret\",
              :audit_mode=>\":enabled\", :named_run_list=>{}}\n    D      [SSH] reusing
              existing connection ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}>\n    D      [SSH] ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}> (sudo -E cat > /tmp/chef-installer.sh <<\"EOL\"\n
              \   #!/bin/bash\n    #!/bin/sh\n    # WARNING: REQUIRES /bin/sh\n    #\n
              \   # - must run on /bin/sh on solaris 9\n    # - must run on /bin/sh
              on AIX 6.x\n    #\n    # Copyright:: Copyright (c) 2010-2015 Chef Software,
              Inc.\n    # License:: Apache License, Version 2.0\n    #\n    # Licensed
              under the Apache License, Version 2.0 (the \"License\");\n    # you
              may not use this file except in compliance with the License.\n    #
              You may obtain a copy of the License at\n    #\n    #     http://www.apache.org/licenses/LICENSE-2.0\n
              \   #\n    # Unless required by applicable law or agreed to in writing,
              software\n    # distributed under the License is distributed on an \"AS
              IS\" BASIS,\n    # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
              express or implied.\n    # See the License for the specific language
              governing permissions and\n    # limitations under the License.\n    #\n\n
              \   # helpers.sh\n    ############\n    # This section has some helper
              functions to make life easier.\n    #\n    # Outputs:\n    # $tmp_dir:
              secure-ish temp directory that can be used during installation.\n    ############\n\n
              \   # Check whether a command exists - returns 0 if it does, 1 if it
              does not\n    exists() {\n      if command -v $1 >/dev/null 2>&1\n      then\n
              \       return 0\n      else\n        return 1\n      fi\n    }\n\n
              \   # Output the instructions to report bug about this script\n    report_bug()
              {\n      echo \"Version: $version\"\n      echo \"\"\n      echo \"Please
              file a Bug Report at https://github.com/chef/omnitruck/issues/new\"\n
              \     echo \"Alternatively, feel free to open a Support Ticket at https://www.chef.io/support/tickets\"\n
              \     echo \"More Chef support resources can be found at https://www.chef.io/support\"\n
              \     echo \"\"\n      echo \"Please include as many details about the
              problem as possible i.e., how to reproduce\"\n      echo \"the problem
              (if possible), type of the Operating System and its version, etc.,\"\n
              \     echo \"and any other relevant details that might help us with
              troubleshooting.\"\n      echo \"\"\n    }\n\n    checksum_mismatch()
              {\n      echo \"Package checksum mismatch!\"\n      report_bug\n      exit
              1\n    }\n\n    unable_to_retrieve_package() {\n      echo \"Unable
              to retrieve a valid package!\"\n      report_bug\n      echo \"Metadata
              URL: $metadata_url\"\n      if test \"x$download_url\" != \"x\"; then\n
              \       echo \"Download URL: $download_url\"\n      fi\n      if test
              \"x$stderr_results\" != \"x\"; then\n        echo \"\\nDEBUG OUTPUT
              FOLLOWS:\\n$stderr_results\"\n      fi\n      exit 1\n    }\n\n    http_404_error()
              {\n      echo \"Omnitruck artifact does not exist for version $version
              on platform $platform\"\n      echo \"\"\n      echo \"Either this means:\"\n
              \     echo \"   - We do not support $platform\"\n      echo \"   - We
              do not have an artifact for $version\"\n      echo \"\"\n      echo
              \"This is often the latter case due to running a prerelease or RC version
              of chef\"\n      echo \"or a gem version which was only pushed to rubygems
              and not omnitruck.\"\n      echo \"\"\n      echo \"You may be able
              to set your knife[:bootstrap_version] to the most recent stable\"\n
              \     echo \"release of Chef to fix this problem (or the most recent
              stable major version number).\"\n      echo \"\"\n      echo \"In order
              to test the version parameter, adventurous users may take the Metadata
              URL\"\n      echo \"below and modify the '&v=<number>' parameter until
              you successfully get a URL that\"\n      echo \"does not 404 (e.g. via
              curl or wget).  You should be able to use '&v=11' or '&v=12'\"\n      echo
              \"succesfully.\"\n      echo \"\"\n      echo \"If you cannot fix this
              problem by setting the bootstrap_version, it probably means\"\n      echo
              \"that $platform is not supported.\"\n      echo \"\"\n      # deliberately
              do not call report_bug to suppress bug report noise.\n      echo \"Metadata
              URL: $metadata_url\"\n      if test \"x$download_url\" != \"x\"; then\n
              \       echo \"Download URL: $download_url\"\n      fi\n      if test
              \"x$stderr_results\" != \"x\"; then\n        echo \"\\nDEBUG OUTPUT
              FOLLOWS:\\n$stderr_results\"\n      fi\n      exit 1\n    }\n\n    capture_tmp_stderr()
              {\n      # spool up /tmp/stderr from all the commands we called\n      if
              test -f \"$tmp_dir/stderr\"; then\n        output=`cat $tmp_dir/stderr`\n
              \       stderr_results=\"${stderr_results}\\nSTDERR from $1:\\n\\n$output\\n\"\n
              \       rm $tmp_dir/stderr\n      fi\n    }\n\n    # do_wget URL FILENAME\n
              \   do_wget() {\n      echo \"trying wget...\"\n      wget -O \"$2\"
              \"$1\" 2>$tmp_dir/stderr\n      rc=$?\n      # check for 404\n      grep
              \"ERROR 404\" $tmp_dir/stderr 2>&1 >/dev/null\n      if test $? -eq
              0; then\n        echo \"ERROR 404\"\n        http_404_error\n      fi\n\n
              \     # check for bad return status or empty output\n      if test $rc
              -ne 0 || test ! -s \"$2\"; then\n        capture_tmp_stderr \"wget\"\n
              \       return 1\n      fi\n\n      return 0\n    }\n\n    # do_curl
              URL FILENAME\n    do_curl() {\n      echo \"trying curl...\"\n      curl
              --retry 5 -sL -D $tmp_dir/stderr \"$1\" > \"$2\"\n      rc=$?\n      #
              check for 404\n      grep \"404 Not Found\" $tmp_dir/stderr 2>&1 >/dev/null\n
              \     if test $? -eq 0; then\n        echo \"ERROR 404\"\n        http_404_error\n
              \     fi\n\n      # check for bad return status or empty output\n      if
              test $rc -ne 0 || test ! -s \"$2\"; then\n        capture_tmp_stderr
              \"curl\"\n        return 1\n      fi\n\n      return 0\n    }\n\n    #
              do_fetch URL FILENAME\n    do_fetch() {\n      echo \"trying fetch...\"\n
              \     fetch -o \"$2\" \"$1\" 2>$tmp_dir/stderr\n      # check for bad
              return status\n      test $? -ne 0 && return 1\n      return 0\n    }\n\n
              \   # do_perl URL FILENAME\n    do_perl() {\n      echo \"trying perl...\"\n
              \     perl -e 'use LWP::Simple; getprint($ARGV[0]);' \"$1\" > \"$2\"
              2>$tmp_dir/stderr\n      rc=$?\n      # check for 404\n      grep \"404
              Not Found\" $tmp_dir/stderr 2>&1 >/dev/null\n      if test $? -eq 0;
              then\n        echo \"ERROR 404\"\n        http_404_error\n      fi\n\n
              \     # check for bad return status or empty output\n      if test $rc
              -ne 0 || test ! -s \"$2\"; then\n        capture_tmp_stderr \"perl\"\n
              \       return 1\n      fi\n\n      return 0\n    }\n\n    # do_python
              URL FILENAME\n    do_python() {\n      echo \"trying python...\"\n      python
              -c \"import sys,urllib2 ; sys.stdout.write(urllib2.urlopen(sys.argv[1]).read())\"
              \"$1\" > \"$2\" 2>$tmp_dir/stderr\n      rc=$?\n      # check for 404\n
              \     grep \"HTTP Error 404\" $tmp_dir/stderr 2>&1 >/dev/null\n      if
              test $? -eq 0; then\n        echo \"ERROR 404\"\n        http_404_error\n
              \     fi\n\n      # check for bad return status or empty output\n      if
              test $rc -ne 0 || test ! -s \"$2\"; then\n        capture_tmp_stderr
              \"python\"\n        return 1\n      fi\n      return 0\n    }\n\n    #
              returns 0 if checksums match\n    do_checksum() {\n      if exists sha256sum;
              then\n        echo \"Comparing checksum with sha256sum...\"\n        checksum=`sha256sum
              $1 | awk '{ print $1 }'`\n        return `test \"x$checksum\" = \"x$2\"`\n
              \     elif exists shasum; then\n        echo \"Comparing checksum with
              shasum...\"\n        checksum=`shasum -a 256 $1 | awk '{ print $1 }'`\n
              \       return `test \"x$checksum\" = \"x$2\"`\n      else\n        echo
              \"WARNING: could not find a valid checksum program, pre-install shasum
              or sha256sum in your O/S image to get valdation...\"\n        return
              0\n      fi\n    }\n\n    # do_download URL FILENAME\n    do_download()
              {\n      echo \"downloading $1\"\n      echo \"  to file $2\"\n\n      url=`echo
              $1`\n      if test \"x$platform\" = \"xsolaris2\"; then\n        if
              test \"x$platform_version\" = \"x5.9\" -o \"x$platform_version\" = \"x5.10\";
              then\n          # solaris 9 lacks openssl, solaris 10 lacks recent enough
              credentials - your base O/S is completely insecure, please upgrade\n
              \         url=`echo $url | sed -e 's/https/http/'`\n        fi\n      fi\n\n
              \     # we try all of these until we get success.\n      # perl, in
              particular may be present but LWP::Simple may not be installed\n\n      if
              exists wget; then\n        do_wget $url $2 && return 0\n      fi\n\n
              \     if exists curl; then\n        do_curl $url $2 && return 0\n      fi\n\n
              \     if exists fetch; then\n        do_fetch $url $2 && return 0\n
              \     fi\n\n      if exists perl; then\n        do_perl $url $2 && return
              0\n      fi\n\n      if exists python; then\n        do_python $url
              $2 && return 0\n      fi\n\n      unable_to_retrieve_package\n    }\n\n
              \   # install_file TYPE FILENAME\n    # TYPE is \"rpm\", \"deb\", \"solaris\",
              \"sh\", etc.\n    install_file() {\n      echo \"Installing $project
              $version\"\n      case \"$1\" in\n        \"rpm\")\n          if test
              \"x$platform\" = \"xnexus\" || test \"x$platform\" = \"xios_xr\"; then\n
              \           echo \"installing with yum...\"\n            yum install
              -yv \"$2\"\n          else\n            echo \"installing with rpm...\"\n
              \           rpm -Uvh --oldpackage --replacepkgs \"$2\"\n          fi\n
              \         ;;\n        \"deb\")\n          echo \"installing with dpkg...\"\n
              \         dpkg -i \"$2\"\n          ;;\n        \"bff\")\n          echo
              \"installing with installp...\"\n          installp -aXYgd \"$2\" all\n
              \         ;;\n        \"solaris\")\n          echo \"installing with
              pkgadd...\"\n          echo \"conflict=nocheck\" > $tmp_dir/nocheck\n
              \         echo \"action=nocheck\" >> $tmp_dir/nocheck\n          echo
              \"mail=\" >> $tmp_dir/nocheck\n          pkgrm -a $tmp_dir/nocheck -n
              $project >/dev/null 2>&1 || true\n          pkgadd -G -n -d \"$2\" -a
              $tmp_dir/nocheck $project\n          ;;\n        \"pkg\")\n          echo
              \"installing with installer...\"\n          cd / && /usr/sbin/installer
              -pkg \"$2\" -target /\n          ;;\n        \"dmg\")\n          echo
              \"installing dmg file...\"\n          hdiutil detach \"/Volumes/chef_software\"
              >/dev/null 2>&1 || true\n          hdiutil attach \"$2\" -mountpoint
              \"/Volumes/chef_software\"\n          cd / && /usr/sbin/installer -pkg
              `find \"/Volumes/chef_software\" -name \\*.pkg` -target /\n          hdiutil
              detach \"/Volumes/chef_software\"\n          ;;\n        \"sh\" )\n
              \         echo \"installing with sh...\"\n          sh \"$2\"\n          ;;\n
              \       *)\n          echo \"Unknown filetype: $1\"\n          report_bug\n
              \         exit 1\n          ;;\n      esac\n      if test $? -ne 0;
              then\n        echo \"Installation failed\"\n        report_bug\n        exit
              1\n      fi\n    }\n\n    if test \"x$TMPDIR\" = \"x\"; then\n      tmp=\"/tmp\"\n
              \   else\n      tmp=$TMPDIR\n    fi\n    # secure-ish temp dir creation
              without having mktemp available (DDoS-able but not expliotable)\n    tmp_dir=\"$tmp/install.sh.$$\"\n
              \   (umask 077 && mkdir $tmp_dir) || exit 1\n\n    ############\n    #
              end of helpers.sh\n    ############\n\n\n    project=chef\n    version=12.12.7+20160701150941\n
              \   channel=unstable\n\n\n    # platform_detection.sh\n    ############\n
              \   # This section makes platform detection compatible with omnitruck
              on the system\n    #   it runs.\n    #\n    # Outputs:\n    # $platform:
              Name of the platform.\n    # $platform_version: Version of the platform.\n
              \   # $machine: System's architecture.\n    ############\n\n    #\n
              \   # Platform and Platform Version detection\n    #\n    # NOTE: This
              should now match ohai platform and platform_version matching.\n    #
              do not invented new platform and platform_version schemas, just make
              this behave\n    # like what ohai returns as platform and platform_version
              for the server.\n    #\n    # ALSO NOTE: Do not mangle platform or platform_version
              here.  It is less error\n    # prone and more future-proof to do that
              in the server, and then all omnitruck clients\n    # will 'inherit'
              the changes (install.sh is not the only client of the omnitruck\n    #
              endpoint out there).\n    #\n\n    machine=`uname -m`\n    os=`uname
              -s`\n\n    if test -f \"/etc/lsb-release\" && grep -q DISTRIB_ID /etc/lsb-release
              && ! grep -q wrlinux /etc/lsb-release; then\n      platform=`grep DISTRIB_ID
              /etc/lsb-release | cut -d \"=\" -f 2 | tr '[A-Z]' '[a-z]'`\n      platform_version=`grep
              DISTRIB_RELEASE /etc/lsb-release | cut -d \"=\" -f 2`\n    elif test
              -f \"/etc/debian_version\"; then\n      platform=\"debian\"\n      platform_version=`cat
              /etc/debian_version`\n    elif test -f \"/etc/redhat-release\"; then\n
              \     platform=`sed 's/^\\(.\\+\\) release.*/\\1/' /etc/redhat-release
              | tr '[A-Z]' '[a-z]'`\n      platform_version=`sed 's/^.\\+ release
              \\([.0-9]\\+\\).*/\\1/' /etc/redhat-release`\n\n      # If /etc/redhat-release
              exists, we act like RHEL by default\n      if test \"$platform\" = \"fedora\";
              then\n        # FIXME: stop remapping fedora to el\n        # FIXME:
              remove client side platform_version mangling and hard coded yolo\n        #
              Change platform version for use below.\n        platform_version=\"6.0\"\n
              \     fi\n\n      if test \"$platform\" = \"xenserver\"; then\n        #
              Current XenServer 6.2 is based on CentOS 5, platform is not reset to
              \"el\" server should hanlde response\n        platform=\"xenserver\"\n
              \     else\n        # FIXME: use \"redhat\"\n        platform=\"el\"\n
              \     fi\n\n    elif test -f \"/etc/system-release\"; then\n      platform=`sed
              's/^\\(.\\+\\) release.\\+/\\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`\n
              \     platform_version=`sed 's/^.\\+ release \\([.0-9]\\+\\).*/\\1/'
              /etc/system-release | tr '[A-Z]' '[a-z]'`\n      # amazon is built off
              of fedora, so act like RHEL\n      if test \"$platform\" = \"amazon
              linux ami\"; then\n        # FIXME: remove client side platform_version
              mangling and hard coded yolo, and remapping to deprecated \"el\"\n        platform=\"el\"\n
              \       platform_version=\"6.0\"\n      fi\n    # Apple OS X\n    elif
              test -f \"/usr/bin/sw_vers\"; then\n      platform=\"mac_os_x\"\n      #
              Matching the tab-space with sed is error-prone\n      platform_version=`sw_vers
              | awk '/^ProductVersion:/ { print $2 }' | cut -d. -f1,2`\n\n      #
              x86_64 Apple hardware often runs 32-bit kernels (see OHAI-63)\n      x86_64=`sysctl
              -n hw.optional.x86_64`\n      if test $x86_64 -eq 1; then\n        machine=\"x86_64\"\n
              \     fi\n    elif test -f \"/etc/release\"; then\n      machine=`/usr/bin/uname
              -p`\n      if grep -q SmartOS /etc/release; then\n        platform=\"smartos\"\n
              \       platform_version=`grep ^Image /etc/product | awk '{ print $3
              }'`\n      else\n        platform=\"solaris2\"\n        platform_version=`/usr/bin/uname
              -r`\n      fi\n    elif test -f \"/etc/SuSE-release\"; then\n      if
              grep -q 'Enterprise' /etc/SuSE-release;\n      then\n          platform=\"sles\"\n
              \         platform_version=`awk '/^VERSION/ {V = $3}; /^PATCHLEVEL/
              {P = $3}; END {print V \".\" P}' /etc/SuSE-release`\n      else\n          platform=\"suse\"\n
              \         platform_version=`awk '/^VERSION =/ { print $3 }' /etc/SuSE-release`\n
              \     fi\n    elif test \"x$os\" = \"xFreeBSD\"; then\n      platform=\"freebsd\"\n
              \     platform_version=`uname -r | sed 's/-.*//'`\n    elif test \"x$os\"
              = \"xAIX\"; then\n      platform=\"aix\"\n      platform_version=\"`uname
              -v`.`uname -r`\"\n      machine=\"powerpc\"\n    elif test -f \"/etc/os-release\";
              then\n      . /etc/os-release\n      if test \"x$CISCO_RELEASE_INFO\"
              != \"x\"; then\n        . $CISCO_RELEASE_INFO\n      fi\n\n      platform=$ID\n
              \     platform_version=$VERSION\n    fi\n\n    if test \"x$platform\"
              = \"x\"; then\n      echo \"Unable to determine platform version!\"\n
              \     report_bug\n      exit 1\n    fi\n\n    #\n    # NOTE: platform
              manging in the install.sh is DEPRECATED\n    #\n    # - install.sh should
              be true to ohai and should not remap\n    #   platform or platform versions.\n
              \   #\n    # - remapping platform and mangling platform version numbers
              is\n    #   now the complete responsibility of the server-side endpoints\n
              \   #\n\n    major_version=`echo $platform_version | cut -d. -f1`\n
              \   case $platform in\n      # FIXME: should remove this case statement
              completely\n      \"el\")\n        # FIXME:  \"el\" is deprecated, should
              use \"redhat\"\n        platform_version=$major_version\n        ;;\n
              \     \"debian\")\n        if test \"x$major_version\" = \"x5\"; then\n
              \         # This is here for potential back-compat.\n          # We
              do not have 5 in versions we publish for anymore but we\n          #
              might have it for earlier versions.\n          platform_version=\"6\"\n
              \       else\n          platform_version=$major_version\n        fi\n
              \       ;;\n      \"freebsd\")\n        platform_version=$major_version\n
              \       ;;\n      \"sles\")\n        platform_version=$major_version\n
              \       ;;\n      \"suse\")\n        platform_version=$major_version\n
              \       ;;\n    esac\n\n    # normalize the architecture we detected\n
              \   case $machine in\n      \"x86_64\"|\"amd64\"|\"x64\")\n        machine=\"x86_64\"\n
              \       ;;\n      \"i386\"|\"i86pc\"|\"x86\"|\"i686\")\n        machine=\"i386\"\n
              \       ;;\n      \"sparc\"|\"sun4u\"|\"sun4v\")\n        machine=\"sparc\"\n
              \       ;;\n    esac\n\n    if test \"x$platform_version\" = \"x\";
              then\n      echo \"Unable to determine platform version!\"\n      report_bug\n
              \     exit 1\n    fi\n\n    if test \"x$platform\" = \"xsolaris2\";
              then\n      # hack up the path on Solaris to find wget, pkgadd\n      PATH=/usr/sfw/bin:/usr/sbin:$PATH\n
              \     export PATH\n    fi\n\n    echo \"$platform $platform_version
              $machine\"\n\n    ############\n    # end of platform_detection.sh\n
              \   ############\n\n\n    # artifactory_urls.sh\n    ############\n
              \   # This section sets up the information for a build to be installed
              from artifactory\n    #  then uses $platform, $platform_version and
              $machine to select the correct\n    #  version.\n    #\n    # Inputs:\n
              \   # $platform:\n    # $platform_version:\n    # $machine:\n    #\n
              \   # Outputs:\n    # $download_url:\n    # $sha256:\n    ############\n\n\n
              \     artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/14.04/ppc64le\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_ppc64el.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 89a564bafc4b22db5f5539fe1925587c6bf2334f0c344e0c13264f52ae537b0a\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.9/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.9/chef-12.12.7+20160701150941-1.dmg\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.10/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.10/chef-12.12.7+20160701150941-1.dmg\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.11/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.11/chef-12.12.7+20160701150941-1.dmg\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/ios_xr/6/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ios_xr/6/chef-12.12.7+20160701150941-1.ios_xr6.x86_64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 96689d0525260209d68e4991db7144b0aa31a6f7628c9e4e5f23c6f150025fb0\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/debian/6/i686\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_i386.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/debian/7/i686\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_i386.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/debian/8/i686\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_i386.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/nexus/7/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/nexus/7/chef-12.12.7+20160701150941-1.nexus7.x86_64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 f5c620dc0166571903f28990240a5bbb1123bd6e8433a8d8d4aa9b2ba8587bbb\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/freebsd/10/i386\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.i386.sh\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 6d3b80e324377a5a80889d51ec5b0d0730d7503eb14c32a4ed7fd9e2ad21d615\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/12.04/i686\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_i386.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/14.04/i686\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_i386.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/freebsd/9/i386\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.i386.sh\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 8d63b437804b48672cc7b325bd3eb3a1ff525978b894c9b6e7c63db011aac295\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/solaris2/5.10/i386\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.i386.solaris\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/el/5/i686\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.i386.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 e910142a9bdc53757635db7f997f00e5415cc6dadea981aeec1e999489586ee2\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/el/7/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.x86_64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 13296dfe3559a3cb5664a8319e57153635ba867a3a72feb4b040ce833fc22914\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/solaris2/5.11/i386\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.i386.solaris\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/el/6/i686\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.i386.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 e31a417ea73cefb3424496b07b19e188a5d079db40fc29bae0c8a24b2fb9d558\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/windows/2008r2/i386\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x86.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/12.04/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/14.04/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/windows/2012/i386\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x86.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/el/7/ppc64le\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64le.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 5fb71d38e54b0a6e8fc142f48e693de2dc54891edde59f65db61bf097766a3de\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/debian/6/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/debian/7/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/el/7/ppc64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 bc5a1ea39782df044cd069523d6534f72222855bbf99a98961858cdaee51d7c0\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/debian/8/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/windows/2012r2/i386\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x86.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/freebsd/10/amd64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.amd64.sh\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 f4c5e3b437e5129e89a5ca0d69036dcf0e6e4b21a0eef61b495ab63a0be2fe94\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/el/5/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.x86_64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 58bed7db8fe43a1e8441d9a2a5e46b9fe4ab7e932dd1f7f5e0dc53adc004704c\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/el/6/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.x86_64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 e30aac011f866a56f3542eaaa17cf18e40df6021e997e32fd3d1ae5b8f11e274\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/windows/2008r2/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x64.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/freebsd/9/amd64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.amd64.sh\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 6fc165d1fbc96f5ed5ffbfedb154e7ede4d6e87fccec3c80c0de5510527bd673\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/windows/2012/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x64.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/windows/2012r2/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x64.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/aix/6.1/powerpc\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/6.1/chef-12.12.7+20160701150941-1.powerpc.bff\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/aix/7.1/powerpc\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/7.1/chef-12.12.7+20160701150941-1.powerpc.bff\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/solaris2/5.10/sparc\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.sparc.solaris\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817\"
              >> \"$artifact_info_dir/artifact_info\"\n\n      artifact_info_dir=\"$tmp_dir/artifact_info/solaris2/5.11/sparc\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.sparc.solaris\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817\"
              >> \"$artifact_info_dir/artifact_info\"\n\n\n    artifact_info_for_platform=\"$tmp_dir/artifact_info/$platform/$platform_version/$machine/artifact_info\"\n\n
              \   download_url=`awk '$1 == \"url\" { print $2 }' \"$artifact_info_for_platform\"`\n
              \   sha256=`awk '$1 == \"sha256\" { print $2 }' \"$artifact_info_for_platform\"`\n\n\n
              \   # fetch_package.sh\n    ############\n    # This section fetchs
              a package from $download_url and verifies its metadata.\n    #\n    #
              Inputs:\n    # $download_url:\n    # $tmp_dir:\n    # Optional Inputs:\n
              \   # $cmdline_filename: Name of the package downloaded on local disk.\n
              \   # $cmdline_dl_dir: Name of the directory downloaded package will
              be saved to on local disk.\n    #\n    # Outputs:\n    # $download_filename:
              Name of the downloaded file on local disk.\n    # $filetype: Type of
              the file downloaded.\n    ############\n\n    filename=`echo $download_url
              | sed -e 's/^.*\\///'`\n    filetype=`echo $filename | sed -e 's/^.*\\.//'`\n\n
              \   # use either $tmp_dir, the provided directory (-d) or the provided
              filename (-f)\n    if test \"x$cmdline_filename\" != \"x\"; then\n      download_filename=\"$cmdline_filename\"\n
              \   elif test \"x$cmdline_dl_dir\" != \"x\"; then\n      download_filename=\"$cmdline_dl_dir/$filename\"\n
              \   else\n      download_filename=\"$tmp_dir/$filename\"\n    fi\n\n
              \   # ensure the parent directory where to download the installer always
              exists\n    download_dir=`dirname $download_filename`\n    (umask 077
              && mkdir -p $download_dir) || exit 1\n\n    # check if we have that
              file locally available and if so verify the checksum\n    cached_file_available=\"false\"\n
              \   if test -f $download_filename; then\n      echo \"$download_filename
              already exists, verifiying checksum...\"\n      if do_checksum \"$download_filename\"
              \"$sha256\"; then\n        echo \"checksum compare succeeded, using
              existing file!\"\n        cached_file_available=\"true\"\n      else\n
              \       echo \"checksum mismatch, downloading latest version of the
              file\"\n      fi\n    fi\n\n    # download if no local version of the
              file available\n    if test \"x$cached_file_available\" != \"xtrue\";
              then\n      do_download \"$download_url\"  \"$download_filename\"\n
              \     do_checksum \"$download_filename\" \"$sha256\" || checksum_mismatch\n
              \   fi\n\n    ############\n    # end of fetch_package.sh\n    ############\n\n\n
              \   # install_package.sh\n    ############\n    # Installs a package
              and removed the temp directory.\n    #\n    # Inputs:\n    # $download_filename:
              Name of the file to be installed.\n    # $filetype: Type of the file
              to be installed.\n    # $version: The version requested. Used only for
              warning user if not set.\n    ############\n\n    if test \"x$version\"
              = \"x\"; then\n      echo\n      echo \"WARNING WARNING WARNING WARNING
              WARNING WARNING WARNING WARNING WARNING\"\n      echo\n      echo \"You
              are installing an omnibus package without a version pin.  If you are
              installing\"\n      echo \"on production servers via an automated process
              this is DANGEROUS and you will\"\n      echo \"be upgraded without warning
              on new releases, even to new major releases.\"\n      echo \"Letting
              the version float is only appropriate in desktop, test, development
              or\"\n      echo \"CI/CD environments.\"\n      echo\n      echo \"WARNING
              WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING\"\n
              \     echo\n    fi\n\n    install_file $filetype \"$download_filename\"\n\n
              \   if test \"x$tmp_dir\" != \"x\"; then\n      rm -r \"$tmp_dir\"\n
              \   fi\n\n    ############\n    # end of install_package.sh\n    ############\n\n
              \   EOL\n    chmod +x /tmp/chef-installer.sh\n    sudo -E /tmp/chef-installer.sh)\n
              \          ubuntu 14.04 x86_64\n           downloading http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_amd64.deb\n
              \            to file /tmp/install.sh.1356/chef_12.12.7+20160701150941-1_amd64.deb\n
              \          trying wget...\n           Comparing checksum with sha256sum...\n
              \          Installing chef 12.12.7+20160701150941\n           installing
              with dpkg...\n           Selecting previously unselected package chef.\n
              \          (Reading database ... \r(Reading database ... 5%\r(Reading
              database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading
              database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading
              database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading
              database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading
              database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading
              database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading
              database ... 100%\r(Reading database ... 51167 files and directories
              currently installed.)\n           Preparing to unpack .../chef_12.12.7+20160701150941-1_amd64.deb
              ...\n           Unpacking chef (12.12.7+20160701150941-1) ...\n           Setting
              up chef (12.12.7+20160701150941-1) ...\n           Thank you for installing
              Chef!\n    D      [SSH] ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}> (sh -c '\n    sudo_rm=\"sudo -E rm\"\n    dirs=\"/tmp/kitchen/clients
              /tmp/kitchen/cookbooks /tmp/kitchen/data /tmp/kitchen/data_bags /tmp/kitchen/encrypted_data_bag_secret
              /tmp/kitchen/environments /tmp/kitchen/roles\"\n    root_path=\"/tmp/kitchen\"\n\n
              \   $sudo_rm -rf $dirs\n    mkdir -p $root_path\n    ')\n           Transferring
              files to <docker-default-ubuntu-1404>\n    D      TIMING: scp async
              upload (Kitchen::Transport::Ssh)\n    D      TIMING: scp async upload
              (Kitchen::Transport::Ssh) took (0m7.23s)\n    D      Transfer complete\n
              \   D      Attempting to execute command - try 1 of 1.\n    D      [SSH]
              ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\", :paranoid=>false,
              :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true,
              :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"],
              :auth_methods=>[\"publickey\"], :user=>\"ubuntu\"}> (sh -c '\n    sudo
              -E /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb
              --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json
              --chef-zero-port 8889\n    ')\n           Starting Chef Client, version
              12.12.7\n           Creating a new client identity for docker-default-ubuntu-1404
              using the validator key.\n           resolving cookbooks for run list:
              [\"apt\", \"chef-apt-docker\"]\n           Synchronizing Cookbooks:\n
              \            - apt (4.0.1)\n             - chef-apt-docker (1.0.0)\n
              \            - compat_resource (12.10.6)\n           Installing Cookbook
              Gems:\n           Compiling Cookbooks...\n           [2016-07-01T15:45:11+00:00]
              WARN: Chef::Provider::AptRepository already exists!  Cannot create deprecation
              class for LWRP provider apt_repository from cookbook apt\n           [2016-07-01T15:45:11+00:00]
              WARN: AptRepository already exists!  Deprecation class overwrites Custom
              resource apt_repository from cookbook apt\n           Converging 10
              resources\n           Recipe: apt::default\n             * file[/var/lib/apt/periodic/update-success-stamp]
              action nothing (skipped due to action :nothing)\n             * apt_update[periodic]
              action periodic\n               - update new lists of packages\n               *
              directory[/var/lib/apt/periodic] action create (up to date)\n               *
              directory[/etc/apt/apt.conf.d] action create (up to date)\n               *
              file[/etc/apt/apt.conf.d/15update-stamp] action create_if_missing (up
              to date)\n               * execute[apt-get -q update] action run\n                 -
              execute apt-get -q update\n\n             * execute[apt-get update]
              action nothing (skipped due to action :nothing)\n             * execute[apt-get
              autoremove] action nothing (skipped due to action :nothing)\n             *
              execute[apt-get autoclean] action nothing (skipped due to action :nothing)\n
              \            * directory[/var/cache/local] action create\n               -
              create new directory /var/cache/local\n               - change mode
              from '' to '0755'\n               - change owner from '' to 'root'\n
              \              - change group from '' to 'root'\n             * directory[/var/cache/local/preseeding]
              action create\n               - create new directory /var/cache/local/preseeding\n
              \              - change mode from '' to '0755'\n               - change
              owner from '' to 'root'\n               - change group from '' to 'root'\n
              \            * template[/etc/apt/apt.conf.d/10recommends] action create\n
              \              - create new file /etc/apt/apt.conf.d/10recommends\n
              \              - update content in file /etc/apt/apt.conf.d/10recommends
              from none to f41e1d\n               --- /etc/apt/apt.conf.d/10recommends
              \ 2016-07-01 15:45:19.215704000 +0000\n               +++ /etc/apt/apt.conf.d/.chef-10recommends20160701-1523-1o5o3pc
              \ 2016-07-01 15:45:19.215704000 +0000\n               @@ -1 +1,4 @@\n
              \              +# Managed by Chef\n               +APT::Install-Recommends
              \"1\";\n               +APT::Install-Suggests \"0\";\n               -
              change mode from '' to '0644'\n               - change owner from ''
              to 'root'\n               - change group from '' to 'root'\n             *
              apt_package[apt-transport-https] action install (up to date)\n           Recipe:
              chef-apt-docker::default\n             * apt_repository[docker] action
              add\n               * execute[install-key 58118E89F3A912897C070ADBF76221572C52609D]
              action run\n\n                 ================================================================================\n
              \                Error executing action `run` on resource 'execute[install-key
              58118E89F3A912897C070ADBF76221572C52609D]'\n                 ================================================================================\n\n
              \                Mixlib::ShellOut::ShellCommandFailed\n                 ------------------------------------\n
              \                Expected process to exit with [0], but received '2'\n
              \                ---- Begin output of apt-key adv --recv --keyserver
              hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D
              ----\n                 STDOUT: Executing: gpg --ignore-time-conflict
              --no-options --no-default-keyring --homedir /tmp/tmp.FgMIvkGpBQ --no-auto-check-trustdb
              --trust-model always --keyring /etc/apt/trusted.gpg --primary-keyring
              /etc/apt/trusted.gpg --recv --keyserver hkp://p80.pool.sks-keyservers.net:80
              58118E89F3A912897C070ADBF76221572C52609D\n                 STDERR: gpg:
              requesting key 2C52609D from hkp server p80.pool.sks-keyservers.net\n
              \                gpg: keyserver timed out\n                 gpg: keyserver
              receive failed: keyserver error\n                 ---- End output of
              apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80
              58118E89F3A912897C070ADBF76221572C52609D ----\n                 Ran
              apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80
              58118E89F3A912897C070ADBF76221572C52609D returned 2\n\n                 Cookbook
              Trace:\n                 ---------------\n                 /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in
              `run_action'\n                 /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in
              `run_action'\n\n                 Resource Declaration:\n                 ---------------------\n
              \                # In /opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/lib/chef/provider/apt_repository.rb\n\n
              \                201:         declare_resource(:execute, \"install-key
              #{key}\") do\n                 202:           command cmd\n                 203:
              \          sensitive new_resource.sensitive\n                 204:           not_if
              do\n                 205:             present = extract_fingerprints_from_cmd(\"apt-key
              finger\").any? do |fp|\n                 206:               fp.end_with?
              key.upcase\n                 207:             end\n                 208:
              \            present && key_is_valid?(\"apt-key list\", key.upcase)\n
              \                209:           end\n                 210:           notifies
              :run, \"execute[apt-cache gencaches]\", :immediately\n                 211:
              \        end\n                 212:\n\n                 Compiled Resource:\n
              \                ------------------\n                 # Declared in
              /opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/lib/chef/provider/apt_repository.rb:201:in
              `install_key_from_keyserver'\n\n                 execute(\"install-key
              58118E89F3A912897C070ADBF76221572C52609D\") do\n            action [:run]\n
              \           retries 0\n            retry_delay 2\n            default_guard_interpreter
              :execute\n            command \"apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80
              58118E89F3A912897C070ADBF76221572C52609D\"\n            backup 5\n            returns
              0\n            declared_type :execute\n            cookbook_name \"chef-apt-docker\"\n
              \           not_if { #code block }\n                 end\n\n                 Platform:\n
              \                ---------\n                 x86_64-linux\n\n\n               ================================================================================\n
              \              Error executing action `add` on resource 'apt_repository[docker]'\n
              \              ================================================================================\n\n
              \              Mixlib::ShellOut::ShellCommandFailed\n               ------------------------------------\n
              \              execute[install-key 58118E89F3A912897C070ADBF76221572C52609D]
              (/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/lib/chef/provider/apt_repository.rb
              line 201) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected
              process to exit with [0], but received '2'\n               ---- Begin
              output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80
              58118E89F3A912897C070ADBF76221572C52609D ----\n               STDOUT:
              Executing: gpg --ignore-time-conflict --no-options --no-default-keyring
              --homedir /tmp/tmp.FgMIvkGpBQ --no-auto-check-trustdb --trust-model
              always --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg
              --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D\n
              \              STDERR: gpg: requesting key 2C52609D from hkp server
              p80.pool.sks-keyservers.net\n               gpg: keyserver timed out\n
              \              gpg: keyserver receive failed: keyserver error\n               ----
              End output of apt-key adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80
              58118E89F3A912897C070ADBF76221572C52609D ----\n               Ran apt-key
              adv --recv --keyserver hkp://p80.pool.sks-keyservers.net:80 58118E89F3A912897C070ADBF76221572C52609D
              returned 2\n\n               Cookbook Trace:\n               ---------------\n
              \              /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in
              `run_action'\n               /tmp/kitchen/cache/cookbooks/compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb:41:in
              `run_action'\n\n               Resource Declaration:\n               ---------------------\n
              \              # In /tmp/kitchen/cache/cookbooks/chef-apt-docker/recipes/default.rb\n\n
              \               20: apt_repository 'docker' do\n                21:
              \  uri 'https://apt.dockerproject.org/repo'\n                22:   distribution
              \"#{node['platform']}-#{node['lsb']['codename']}\"\n                23:
              \  keyserver 'p80.pool.sks-keyservers.net'\n                24:   components
              node['chef-apt-docker']['components']\n                25:   key '58118E89F3A912897C070ADBF76221572C52609D'\n
              \               26: end\n\n               Compiled Resource:\n               ------------------\n
              \              # Declared in /tmp/kitchen/cache/cookbooks/chef-apt-docker/recipes/default.rb:20:in
              `from_file'\n\n               apt_repository(\"docker\") do\n                 action
              [:add]\n                 retries 0\n                 retry_delay 2\n
              \                default_guard_interpreter :default\n                 declared_type
              :apt_repository\n                 cookbook_name \"chef-apt-docker\"\n
              \                recipe_name \"default\"\n                 uri \"https://apt.dockerproject.org/repo\"\n
              \                distribution \"ubuntu-trusty\"\n                 keyserver
              \"p80.pool.sks-keyservers.net\"\n                 components [\"main\"]\n
              \                key \"58118E89F3A912897C070ADBF76221572C52609D\"\n
              \                cache_rebuild true\n               end\n\n               Platform:\n
              \              ---------\n               x86_64-linux\n\n           Starting
              audit phase\n\n           Finished in 0.00027 seconds (files took 0.27631
              seconds to load)\n           0 examples, 0 failures\n           Auditing
              complete\n\n           Running handlers:\n           [2016-07-01T15:47:20+00:00]
              ERROR: Running exception handlers\n           Running handlers complete\n
              \          [2016-07-01T15:47:20+00:00] ERROR: Exception handlers complete\n
              \          Chef Client failed. 5 resources updated in 02 minutes 11
              seconds\n           [2016-07-01T15:47:20+00:00] ERROR: Failed to post
              audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json\n
              \          [2016-07-01T15:47:20+00:00] FATAL: Stacktrace dumped to /tmp/kitchen/cache/chef-stacktrace.out\n
              \          [2016-07-01T15:47:20+00:00] FATAL: Please provide the contents
              of the stacktrace.out file if you file a bug report\n           [2016-07-01T15:47:20+00:00]
              ERROR: Found 1 errors, they are stored in the backtrace\n           [2016-07-01T15:47:21+00:00]
              FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited
              unsuccessfully (exit code 1)\n    D      Cleaning up local sandbox in
              /tmp/cheftest/docker-default-ubuntu-1404-sandbox-20160701-11660-y00zuf\n
              \   D      [SSH] shutting previous connection ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}>\n    D      [SSH] closing connection to ubuntu@10.194.12.142<{:user_known_hosts_file=>\"/dev/null\",
              :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0,
              :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true,
              :keys=>[\"/home/jenkins/.ssh/jenkins.pem\"], :auth_methods=>[\"publickey\"],
              :user=>\"ubuntu\"}>\n    D      ------Exception-------\n    D      Class:
              Kitchen::ActionFailed\n    D      Message: 1 actions failed.\n    >>>>>>
              \    Converge failed on instance <docker-default-ubuntu-1404>.  Please
              see .kitchen/logs/docker-default-ubuntu-1404.log for more details\n
              \   D      ----------------------\n    D      ------Backtrace-------\n
              \   D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:187:in
              `report_errors'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:178:in
              `run_action'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command/action.rb:39:in
              `block in call'\n    D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in
              `measure'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command/action.rb:37:in
              `call'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:56:in
              `perform'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:184:in
              `block (2 levels) in <class:CLI>'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in
              `run'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in
              `invoke_command'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:325:in
              `invoke_task'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in
              `dispatch'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in
              `start'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/bin/kitchen:13:in
              `block in <top (required)>'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/errors.rb:174:in
              `with_friendly_errors'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/bin/kitchen:13:in
              `<top (required)>'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:23:in
              `load'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:23:in
              `<main>'\n    D      ----End Backtrace-----\n    D      -Composite Exception--\n
              \   D      Class: Kitchen::InstanceFailure\n    D      Message: Converge
              failed on instance <docker-default-ubuntu-1404>.  Please see .kitchen/logs/docker-default-ubuntu-1404.log
              for more details\n    D      ----------------------\n    D      ------Backtrace-------\n
              \   D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:86:in
              `rescue in call'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:89:in
              `call'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:373:in
              `block in converge_action'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in
              `call'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in
              `synchronize_or_call'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:478:in
              `block in action'\n    D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in
              `measure'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:477:in
              `action'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:369:in
              `converge_action'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:348:in
              `block in transition_to'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in
              `each'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in
              `transition_to'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:138:in
              `converge'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in
              `public_send'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in
              `run_action_in_thread'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:173:in
              `block (2 levels) in run_action'\n    D      ----End Backtrace-----\n
              \   D      ---Nested Exception---\n    D      Class: Kitchen::ActionFailed\n
              \   D      Message: SSH exited (1) for command: [sh -c '\n    sudo -E
              /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb
              --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json
              --chef-zero-port 8889\n    ']\n    D      ----------------------\n    D
              \     ------Backtrace-------\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:86:in
              `rescue in call'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:89:in
              `call'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:373:in
              `block in converge_action'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in
              `call'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in
              `synchronize_or_call'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:478:in
              `block in action'\n    D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in
              `measure'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:477:in
              `action'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:369:in
              `converge_action'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:348:in
              `block in transition_to'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in
              `each'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in
              `transition_to'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:138:in
              `converge'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in
              `public_send'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in
              `run_action_in_thread'\n    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:173:in
              `block (2 levels) in run_action'\n    D      ----End Backtrace-----\n
              \   STDERR: >>>>>> ------Exception-------\n    >>>>>> Class: Kitchen::ActionFailed\n
              \   >>>>>> Message: 1 actions failed.\n    >>>>>>     Converge failed
              on instance <docker-default-ubuntu-1404>.  Please see .kitchen/logs/docker-default-ubuntu-1404.log
              for more details\n    >>>>>> ----------------------\n    >>>>>> Please
              see .kitchen/logs/kitchen.log for more details\n    >>>>>> Also try
              running `kitchen diagnose --all` for configuration\n    ---- End output
              of bundle exec kitchen converge  -c -l debug ----\n    Ran bundle exec
              kitchen converge  -c -l debug returned 20\n\n    Resource Declaration:\n
              \   ---------------------\n    # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/recipes/provision.rb\n\n
              \     1: top_cookbooks \"converge\"\n\n    Compiled Resource:\n    ------------------\n
              \   # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/recipes/provision.rb:1:in
              `from_file'\n\n    top_cookbooks(\"converge\") do\n      action [:run]\n
              \     updated true\n      updated_by_last_action true\n      retries
              0\n      retry_delay 2\n      default_guard_interpreter :default\n      declared_type
              :top_cookbooks\n      cookbook_name \"acceptance-cookbook\"\n      recipe_name
              \"provision\"\n      command \"converge\"\n    end\n\nStarting audit
              phase\n"
            18918: |2

              Running handlers:
              [2016-07-01T15:47:22+00:00] ERROR: Running exception handlers
              Running handlers complete
              [2016-07-01T15:47:22+00:00] ERROR: Exception handlers complete
              Chef Client failed. 2 resources updated in 03 minutes 39 seconds
              [2016-07-01T15:47:22+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/chef-stacktrace.out
              [2016-07-01T15:47:22+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
              [2016-07-01T15:47:22+00:00] ERROR: Found 1 errors, they are stored in the backtrace
              [2016-07-01T15:47:23+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
              STDERR:
              ---- End output of chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/dna.json -o acceptance-cookbook::provision --no-color ----
              Ran chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/dna.json -o acceptance-cookbook::provision --no-color returned 1
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:289:in `invalid!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:276:in `error!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/chef_runner.rb:53:in `block in run!'
              /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:219:in `block in with_clean_env'
              /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:199:in `with_original_env'
              /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:205:in `with_clean_env'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/chef_runner.rb:42:in `run!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:149:in `run_command'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:116:in `block in run_suite'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:114:in `each'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:114:in `run_suite'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:76:in `block (2 levels) in start_worker'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:74:in `loop'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:74:in `block in start_worker'
              CHEF-ACCEPTANCE::[2016-07-01 15:47:23 +0000] --force-destroy specified so attempting to run the destroy recipe
              TOP-COOKBOOKS::DESTROY::[2016-07-01 15:47:23 +0000] Initialized [/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/logs/top-cookbooks/destroy.log] logger...
            25591: |
              FIPS::PROVISION::[2016-07-01 15:51:53 +0000] D      Message: 1 actions failed.
              FIPS::PROVISION::[2016-07-01 15:51:53 +0000]
              FIPS::PROVISION::[2016-07-01 15:51:53 +0000] >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
              FIPS::PROVISION::[2016-07-01 15:51:53 +0000]
              FIPS::PROVISION::[2016-07-01 15:51:53 +0000] There was an error invoking '@{
            25692: |2
                              D      -Composite Exception--
                              D      Class: Kitchen::ActionFailed
                              D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                              There was an error invoking '@{
                                "f819689a04a73f68cedca447fe8bbc14" = @{
            25799: |2
                              D      ---Nested Exception---
                              D      Class: Kitchen::ActionFailed
                              D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                              There was an error invoking '@{
                                "f819689a04a73f68cedca447fe8bbc14" = @{
            25908: |2
                              >>>>>> Class: Kitchen::ActionFailed
                              >>>>>> Message: 1 actions failed.
                              >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                              There was an error invoking '@{
                                "f819689a04a73f68cedca447fe8bbc14" = @{
            25997: |
              DATA-COLLECTOR::VERIFY::[2016-07-01 15:51:53 +0000]                        \33[32m  resets the message cache\33[0m
              FIPS::PROVISION::[2016-07-01 15:51:53 +0000]
                    ================================================================================
                    Error executing action `run` on resource 'execute[bundle exec kitchen converge  -c -l debug]'
                    ================================================================================

                    Mixlib::ShellOut::ShellCommandFailed
                    ------------------------------------
                    Expected process to exit with [0], but received '20'
                    ---- Begin output of bundle exec kitchen converge  -c -l debug ----
                    STDOUT: -----> Starting Kitchen (v1.10.2)
                    D      winrm requested, loading winrm gem (["~> 1.6"])
                    D      winrm is loaded.
                    D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
                    D      winrm-fs is loaded.
                    D      winrm requested, loading winrm gem (["~> 1.6"])
                    D      winrm was already loaded.
                    D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
                    D      winrm-fs was already loaded.
                    -----> Creating <fips-unit-functional-windows-2012r2>...
                    -----> Creating <fips-unit-functional-centos-6>...
                    D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                    D      platform name centos-6 appears to be a standard platform. Searching for centos 6 ...
                    D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                    -----> Creating <fips-integration-windows-2012r2>...
                    D      Searching for images matching {:name=>"CentOS-6.5-GA-*", :"owner-alias"=>"aws-marketplace", :architecture=>"x86_64", :"virtualization-type"=>"paravirtual", :"block-device-mapping.volume-type"=>"standard", :"image-type"=>"machine"} ...
                    D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                    D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                    -----> Creating <fips-integration-centos-6>...
                    D      platform name centos-6 appears to be a standard platform. Searching for centos 6 ...
                    D      Searching for images matching {:name=>"CentOS-6.5-GA-*", :"owner-alias"=>"aws-marketplace", :architecture=>"x86_64", :"virtualization-type"=>"paravirtual", :"block-device-mapping.volume-type"=>"standard", :"image-type"=>"machine"} ...
                    D      Search returned 1 images:
                    D      - CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2: Detected centos 6.5 x86_64.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                    D      Image for fips-unit-functional-centos-6: CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                           Detected platform: centos version 6.5 on x86_64. Instance Type: m3.large. Default username: root (default).
                    D      No SSH username specified: using default username root  for image ami-b6bdde86, which we detected as centos 6.5 x86_64.
                           If you are not using an account that qualifies under the AWS
                    free-tier, you may be charged to run these suites. The charge
                    should be minimal, but neither Test Kitchen nor its maintainers
                    are responsible for your incurred costs.

                    D      Creating EC2 instance in region us-west-2 with properties:
                    D      - instance_type = "m3.large"
                    D      - ebs_optimized = false
                    D      - image_id = "ami-b6bdde86"
                    D      - key_name = "jenkins"
                    D      - subnet_id = "subnet-19ac017c"
                    D      - private_ip_address = nil
                    D      - placement = {:availability_zone=>"us-west-2a"}
                    D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                    D      Search returned 1 images:
                    D
              FIPS::PROVISION::[2016-07-01 15:51:53 +0000]    - CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2: Detected centos 6.5 x86_64.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                    D      Image for fips-integration-centos-6: CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
            29477: |2
                    D      Class: Kitchen::ActionFailed
                    D      Message: 1 actions failed.
                    >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
            29571: |2
                    D      -Composite Exception--
                    D      Class: Kitchen::ActionFailed
                    D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
            29676: |2
                    D      ---Nested Exception---
                    D      Class: Kitchen::ActionFailed
                    D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
            29788: |2
                    >>>>>> Class: Kitchen::ActionFailed
                    >>>>>> Message: 1 actions failed.
                    >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
            29904: |2

              FIPS::PROVISION::[2016-07-01 15:51:53 +0000]
                  ================================================================================
                  Error executing action `run` on resource 'kitchen[converge]'
                  ================================================================================

                  Mixlib::ShellOut::ShellCommandFailed
                  ------------------------------------
              FIPS::PROVISION::[2016-07-01 15:51:53 +0000]     execute[bundle exec kitchen converge  -c -l debug] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 36) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '20'
                  ---- Begin output of bundle exec kitchen converge  -c -l debug ----
            33409: |2
                  D      Class: Kitchen::ActionFailed
                  D      Message: 1 actions failed.
                  >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
            33503: |2
                  D      -Composite Exception--
                  D      Class: Kitchen::ActionFailed
                  D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
            33608: |2
                  D      ---Nested Exception---
                  D      Class: Kitchen::ActionFailed
                  D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
            33720: |2
                  >>>>>> Class: Kitchen::ActionFailed
                  >>>>>> Message: 1 actions failed.
                  >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
            33830: |
              FIPS::PROVISION::[2016-07-01 15:51:54 +0000] Running handlers:
              FIPS::PROVISION::[2016-07-01 15:51:54 +0000]
              FIPS::PROVISION::[2016-07-01 15:51:54 +0000] [2016-07-01T15:51:54+00:00] ERROR: Running exception handlers
              FIPS::PROVISION::[2016-07-01 15:51:54 +0000] Running handlers complete
              FIPS::PROVISION::[2016-07-01 15:51:54 +0000] [2016-07-01T15:51:54+00:00] ERROR: Exception handlers complete
              FIPS::PROVISION::[2016-07-01 15:51:54 +0000] Chef Client failed. 0 resources updated in 05 minutes 03 seconds
              FIPS::PROVISION::[2016-07-01 15:51:54 +0000]
              [2016-07-01T15:51:54+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/chef-stacktrace.out
              [2016-07-01T15:51:54+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
              [2016-07-01T15:51:54+00:00] ERROR: Found 1 errors, they are stored in the backtrace
              FIPS::PROVISION::[2016-07-01 15:51:54 +0000] [2016-07-01T15:51:54+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
              CHEF-ACCEPTANCE::[2016-07-01 15:51:55 +0000] Encountered an error running the recipe provision: Expected process to exit with [0], but received '1'
              ---- Begin output of chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/dna.json -o acceptance-cookbook::provision --no-color ----
            37270: |2
                              D      Class: Kitchen::ActionFailed
                              D      Message: 1 actions failed.
                              >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                              There was an error invoking '@{
                                "f819689a04a73f68cedca447fe8bbc14" = @{
            37362: |2
                              D      -Composite Exception--
                              D      Class: Kitchen::ActionFailed
                              D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                              There was an error invoking '@{
                                "f819689a04a73f68cedca447fe8bbc14" = @{
            37465: |2
                              D      ---Nested Exception---
                              D      Class: Kitchen::ActionFailed
                              D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                              There was an error invoking '@{
                                "f819689a04a73f68cedca447fe8bbc14" = @{
            37570: |2
                              >>>>>> Class: Kitchen::ActionFailed
                              >>>>>> Message: 1 actions failed.
                              >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                              There was an error invoking '@{
                                "f819689a04a73f68cedca447fe8bbc14" = @{
            37649: |2
                              D      [WinRM] remote shell 8404D27A-7C12-43A6-A11F-47788FAC98A5 closed

                    ================================================================================
                    Error executing action `run` on resource 'execute[bundle exec kitchen converge  -c -l debug]'
                    ================================================================================

                    Mixlib::ShellOut::ShellCommandFailed
                    ------------------------------------
                    Expected process to exit with [0], but received '20'
                    ---- Begin output of bundle exec kitchen converge  -c -l debug ----
                    STDOUT: -----> Starting Kitchen (v1.10.2)
                    D      winrm requested, loading winrm gem (["~> 1.6"])
                    D      winrm is loaded.
                    D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
                    D      winrm-fs is loaded.
                    D      winrm requested, loading winrm gem (["~> 1.6"])
                    D      winrm was already loaded.
                    D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
                    D      winrm-fs was already loaded.
                    -----> Creating <fips-unit-functional-windows-2012r2>...
                    -----> Creating <fips-unit-functional-centos-6>...
                    D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                    D      platform name centos-6 appears to be a standard platform. Searching for centos 6 ...
                    D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                    -----> Creating <fips-integration-windows-2012r2>...
                    D      Searching for images matching {:name=>"CentOS-6.5-GA-*", :"owner-alias"=>"aws-marketplace", :architecture=>"x86_64", :"virtualization-type"=>"paravirtual", :"block-device-mapping.volume-type"=>"standard", :"image-type"=>"machine"} ...
                    D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                    D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                    -----> Creating <fips-integration-centos-6>...
                    D      platform name centos-6 appears to be a standard platform. Searching for centos 6 ...
                    D      Searching for images matching {:name=>"CentOS-6.5-GA-*", :"owner-alias"=>"aws-marketplace", :architecture=>"x86_64", :"virtualization-type"=>"paravirtual", :"block-device-mapping.volume-type"=>"standard", :"image-type"=>"machine"} ...
                    D      Search returned 1 images:
                    D      - CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2: Detected centos 6.5 x86_64.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                    D      Image for fips-unit-functional-centos-6: CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                           Detected platform: centos version 6.5 on x86_64. Instance Type: m3.large. Default username: root (default).
                    D      No SSH username specified: using default username root  for image ami-b6bdde86, which we detected as centos 6.5 x86_64.
                           If you are not using an account that qualifies under the AWS
                    free-tier, you may be charged to run these suites. The charge
                    should be minimal, but neither Test Kitchen nor its maintainers
                    are responsible for your incurred costs.

                    D      Creating EC2 instance in region us-west-2 with properties:
                    D      - instance_type = "m3.large"
                    D      - ebs_optimized = false
                    D      - image_id = "ami-b6bdde86"
                    D      - key_name = "jenkins"
                    D      - subnet_id = "subnet-19ac017c"
                    D      - private_ip_address = nil
                    D      - placement = {:availability_zone=>"us-west-2a"}
                    D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                    D      Search returned 1 images:
                    D      - CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2: Detected centos 6.5 x86_64.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                    D      Image for fips-integration-centos-6: CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                           Detected platform: centos version 6.5 on x86_64. Instance Type: m3.large. Default username: root (default).
                    D      No SSH username specified: using default username root  for image ami-b6bdde86, which we detected as centos 6.5 x86_64.
                           If you are not using an account that qualifies under the AWS
                    free-tier, you may be charged to run these suites. The charge
                    should be minimal, but neither Test Kitchen nor its maintainers
                    are responsible for your incurred costs.

                    D      Creating EC2 instance in region us-west-2 with properties:
                    D      - instance_type = "m3.large"
                    D      - ebs_optimized = false
                    D      - image_id = "ami-b6bdde86"
                    D      - key_name = "jenkins"
                    D      - subnet_id = "subnet-19ac017c"
                    D      - private_ip_address = nil
                    D      - placement = {:availability_zone=>"us-west-2a"}
                    D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                    D      Search returned 3 images:
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
                    D      Search returned 3 images:
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                    D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
                    D      Image for fips-integration-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                           Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
                    D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
                           If you are not using an account that qualifies under the AWS
                    free-tier, you may be charged to run these suites. The charge
                    should be minimal, but neither Test Kitchen nor its maintainers
                    are responsible for your incurred costs.

                    D      Creating EC2 instance in region us-west-2 with properties:
                    D      - instance_type = "m3.large"
                    D      - ebs_optimized = false
                    D      - image_id = "ami-8d0acfed"
                    D      - key_name = "jenkins"
                    D      - subnet_id = "subnet-19ac017c"
                    D      - private_ip_address = nil
                    D      - placement = {:availability_zone=>"us-west-2a"}
                    D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                    D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                    D      Image for fips-unit-functional-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                           Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
                    D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
                           If you are not using an account that qualifies under the AWS
                    free-tier, you may be charged to run these suites. The charge
                    should be minimal, but neither Test Kitchen nor its maintainers
                    are responsible for your incurred costs.

                    D      Creating EC2 instance in region us-west-2 with properties:
                    D      - instance_type = "m3.large"
                    D      - ebs_optimized = false
                    D      - image_id = "ami-8d0acfed"
                    D      - key_name = "jenkins"
                    D      - subnet_id = "subnet-19ac017c"
                    D      - private_ip_address = nil
                    D      - placement = {:availability_zone=>"us-west-2a"}
                    D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                    D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                           Instance <i-443ae1eb> requested.
                           Polling AWS for existence, attempt 0...
                           Instance <i-d638e379> requested.
                           Polling AWS for existence, attempt 0...
                           Attempting to tag the instance, 0 retries
                           Instance <i-e739e248> requested.
                           Polling AWS for existence, attempt 0...
                           Attempting to tag the instance, 0 retries
                           Instance <i-473ae1e8> requested.
                           Polling AWS for existence, attempt 0...
                           EC2 instance <i-443ae1eb> created.
                           Waited 0/300s for instance <i-443ae1eb> to become ready.
                           Attempting to tag the instance, 0 retries
                           EC2 instance <i-d638e379> created.
                           Waited 0/300s for instance <i-d638e379> to become ready.
                           Attempting to tag the instance, 0 retries
                           EC2 instance <i-473ae1e8> created.
                           Waited 0/300s for instance <i-473ae1e8> to become ready.
                           EC2 instance <i-e739e248> created.
                           Waited 0/300s for instance <i-e739e248> to become ready.
                           Waited 5/300s for instance <i-443ae1eb> to become ready.
                           Waited 5/300s for instance <i-d638e379> to become ready.
                           Waited 5/300s for instance <i-e739e248> to become ready.
                           Waited 5/300s for instance <i-473ae1e8> to become ready.
                           Waited 10/300s for instance <i-d638e379> to become ready.
                           Waited 10/300s for instance <i-443ae1eb> to become ready.
                           Waited 10/300s for instance <i-e739e248> to become ready.
                           Waited 10/300s for instance <i-473ae1e8> to become ready.
                           Waited 15/300s for instance <i-443ae1eb> to become ready.
                           Waited 15/300s for instance <i-d638e379> to become ready.
                           Waited 15/300s for instance <i-e739e248> to become ready.
                           Waited 15/300s for instance <i-473ae1e8> to become ready.
                           Waited 20/300s for instance <i-443ae1eb> to become ready.
                           Waited 20/300s for instance <i-e739e248> to become ready.
                           EC2 instance <i-443ae1eb> ready.
                    D      [SSH] opening connection to root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"]}>
                           Waited 20/300s for instance <i-473ae1e8> to become ready.
                           Waited 20/300s for instance <i-d638e379> to become ready.
                           Waited 25/300s for instance <i-e739e248> to become ready.
                           Waited 25/300s for instance <i-473ae1e8> to become ready.
                           Waited 25/300s for instance <i-d638e379> to become ready.
                           EC2 instance <i-d638e379> ready.
                    D      [SSH] opening connection to root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"]}>
                           Waited 30/300s for instance <i-e739e248> to become ready.
                           Waited 30/300s for instance <i-473ae1e8> to become ready.
                    D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                           Waiting for SSH service on 10.194.8.163:22, retrying in 3 seconds
                           Waited 35/300s for instance <i-e739e248> to become ready.
                           Waited 35/300s for instance <i-473ae1e8> to become ready.
                    D      [SSH] opening connection to root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                    D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                           Waiting for SSH service on 10.194.13.47:22, retrying in 3 seconds
                           Waited 40/300s for instance <i-e739e248> to become ready.
                           Waited 40/300s for instance <i-473ae1e8> to become ready.
                    D      [SSH] opening connection to root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                           Waited 45/300s for instance <i-e739e248> to become ready.
                           Waited 45/300s for instance <i-473ae1e8> to become ready.
                           Waited 50/300s for instance <i-e739e248> to become ready.
                           Waited 50/300s for instance <i-473ae1e8> to become ready.
                    D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                           Waiting for SSH service on 10.194.8.163:22, retrying in 3 seconds
                    D      [SSH] opening connection to root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                           Waited 55/300s for instance <i-e739e248> to become ready.
                           Waited 55/300s for instance <i-473ae1e8> to become ready.
                    D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                           Waiting for SSH service on 10.194.13.47:22, retrying in 3 seconds
                    D      [SSH] opening connection to root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                           Waited 60/300s for instance <i-e739e248> to become ready.
                           Waited 60/300s for instance <i-473ae1e8> to become ready.
                           Waited 65/300s for instance <i-e739e248> to become ready.
                           Waited 65/300s for instance <i-473ae1e8> to become ready.
                    D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                           Waiting for SSH service on 10.194.8.163:22, retrying in 3 seconds
                           Waited 70/300s for instance <i-473ae1e8> to become ready.
                           Waited 70/300s for instance <i-e739e248> to become ready.
                    D      [SSH] opening connection to root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                    D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                           Waiting for SSH service on 10.194.13.47:22, retrying in 3 seconds
                           Waited 75/300s for instance <i-e739e248> to become ready.
                           Waited 75/300s for instance <i-473ae1e8> to become ready.
                    D      [SSH] opening connection to root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                           Waited 80/300s for instance <i-e739e248> to become ready.
                           Waited 80/300s for instance <i-473ae1e8> to become ready.
                           Waited 85/300s for instance <i-e739e248> to become ready.
                           Waited 85/300s for instance <i-473ae1e8> to become ready.
                    D      [SSH] root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (echo '[SSH] Established')
                           bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           [SSH] Established
                    D      Using sudo_command='sudo -E' for ohai hints
                    D      [SSH] reusing existing connection root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                    D      [SSH] root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E mkdir -p /etc/chef/ohai/hints; sudo -E touch /etc/chef/ohai/hints/ec2.json)
                           bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                    D      ec2:create '10.194.8.163'
                           Finished creating <fips-integration-centos-6> (1m34.67s).
                    -----> Converging <fips-integration-centos-6>...
                           Preparing files for transfer
                    D      Creating local sandbox in /tmp/cheftest/fips-integration-centos-6-sandbox-20160701-12947-1s5uurn
                           Preparing dna.json
                    D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                           Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                           Removing non-cookbook files before transfer
                           Preparing validation.pem
                    D      Using a dummy validation.pem
                           Preparing client.rb
                    D      Creating client.rb from {:node_name=>"fips-integration-centos-6", :checksum_path=>"/tmp/kitchen/checksums", :file_cache_path=>"/tmp/kitchen/cache", :file_backup_path=>"/tmp/kitchen/backup", :cookbook_path=>["/tmp/kitchen/cookbooks", "/tmp/kitchen/site-cookbooks"], :data_bag_path=>"/tmp/kitchen/data_bags", :environment_path=>"/tmp/kitchen/environments", :node_path=>"/tmp/kitchen/nodes", :role_path=>"/tmp/kitchen/roles", :client_path=>"/tmp/kitchen/clients", :user_path=>"/tmp/kitchen/users", :validation_key=>"/tmp/kitchen/validation.pem", :client_key=>"/tmp/kitchen/client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"/tmp/kitchen/encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                    D      [SSH] reusing existing connection root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                    D      [SSH] root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E cat > /tmp/chef-installer.sh <<"EOL"
                    #!/bin/bash
                    #!/bin/sh
                    # WARNING: REQUIRES /bin/sh
                    #
                    # - must run on /bin/sh on solaris 9
                    # - must run on /bin/sh on AIX 6.x
                    #
                    # Copyright:: Copyright (c) 2010-2015 Chef Software, Inc.
                    # License:: Apache License, Version 2.0
                    #
                    # Licensed under the Apache License, Version 2.0 (the "License");
                    # you may not use this file except in compliance with the License.
                    # You may obtain a copy of the License at
                    #
                    #     http://www.apache.org/licenses/LICENSE-2.0
                    #
                    # Unless required by applicable law or agreed to in writing, software
                    # distributed under the License is distributed on an "AS IS" BASIS,
                    # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                    # See the License for the specific language governing permissions and
                    # limitations under the License.
                    #

                    # helpers.sh
                    ############
                    # This section has some helper functions to make life easier.
                    #
                    # Outputs:
                    # $tmp_dir: secure-ish temp directory that can be used during installation.
                    ############

                    # Check whether a command exists - returns 0 if it does, 1 if it does not
                    exists() {
                      if command -v $1 >/dev/null 2>&1
                      then
                        return 0
                      else
                        return 1
                      fi
                    }

                    # Output the instructions to report bug about this script
                    report_bug() {
                      echo "Version: $version"
                      echo ""
                      echo "Please file a Bug Report at https://github.com/chef/omnitruck/issues/new"
                      echo "Alternatively, feel free to open a Support Ticket at https://www.chef.io/support/tickets"
                      echo "More Chef support resources can be found at https://www.chef.io/support"
                      echo ""
                      echo "Please include as many details about the problem as possible i.e., how to reproduce"
                      echo "the problem (if possible), type of the Operating System and its version, etc.,"
                      echo "and any other relevant details that might help us with troubleshooting."
                      echo ""
                    }

                    checksum_mismatch() {
                      echo "Package checksum mismatch!"
                      report_bug
                      exit 1
                    }

                    unable_to_retrieve_package() {
                      echo "Unable to retrieve a valid package!"
                      report_bug
                      echo "Metadata URL: $metadata_url"
                      if test "x$download_url" != "x"; then
                        echo "Download URL: $download_url"
                      fi
                      if test "x$stderr_results" != "x"; then
                        echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
                      fi
                      exit 1
                    }

                    http_404_error() {
                      echo "Omnitruck artifact does not exist for version $version on platform $platform"
                      echo ""
                      echo "Either this means:"
                      echo "   - We do not support $platform"
                      echo "   - We do not have an artifact for $version"
                      echo ""
                      echo "This is often the latter case due to running a prerelease or RC version of chef"
                      echo "or a gem version which was only pushed to rubygems and not omnitruck."
                      echo ""
                      echo "You may be able to set your knife[:bootstrap_version] to the most recent stable"
                      echo "release of Chef to fix this problem (or the most recent stable major version number)."
                      echo ""
                      echo "In order to test the version parameter, adventurous users may take the Metadata URL"
                      echo "below and modify the '&v=<number>' parameter until you successfully get a URL that"
                      echo "does not 404 (e.g. via curl or wget).  You should be able to use '&v=11' or '&v=12'"
                      echo "succesfully."
                      echo ""
                      echo "If you cannot fix this problem by setting the bootstrap_version, it probably means"
                      echo "that $platform is not supported."
                      echo ""
                      # deliberately do not call report_bug to suppress bug report noise.
                      echo "Metadata URL: $metadata_url"
                      if test "x$download_url" != "x"; then
                        echo "Download URL: $download_url"
                      fi
                      if test "x$stderr_results" != "x"; then
                        echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
                      fi
                      exit 1
                    }

                    capture_tmp_stderr() {
                      # spool up /tmp/stderr from all the commands we called
                      if test -f "$tmp_dir/stderr"; then
                        output=`cat $tmp_dir/stderr`
                        stderr_results="${stderr_results}\nSTDERR from $1:\n\n$output\n"
                        rm $tmp_dir/stderr
                      fi
                    }

                    # do_wget URL FILENAME
                    do_wget() {
                      echo "trying wget..."
                      wget -O "$2" "$1" 2>$tmp_dir/stderr
                      rc=$?
                      # check for 404
                      grep "ERROR 404" $tmp_dir/stderr 2>&1 >/dev/null
                      if test $? -eq 0; then
                        echo "ERROR 404"
                        http_404_error
                      fi

                      # check for bad return status or empty output
                      if test $rc -ne 0 || test ! -s "$2"; then
                        capture_tmp_stderr "wget"
                        return 1
                      fi

                      return 0
                    }

                    # do_curl URL FILENAME
                    do_curl() {
                      echo "trying curl..."
                      curl --retry 5 -sL -D $tmp_dir/stderr "$1" > "$2"
                      rc=$?
                      # check for 404
                      grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                      if test $? -eq 0; then
                        echo "ERROR 404"
                        http_404_error
                      fi

                      # check for bad return status or empty output
                      if test $rc -ne 0 || test ! -s "$2"; then
                        capture_tmp_stderr "curl"
                        return 1
                      fi

                      return 0
                    }

                    # do_fetch URL FILENAME
                    do_fetch() {
                      echo "trying fetch..."
                      fetch -o "$2" "$1" 2>$tmp_dir/stderr
                      # check for bad return status
                      test $? -ne 0 && return 1
                      return 0
                    }

                    # do_perl URL FILENAME
                    do_perl() {
                      echo "trying perl..."
                      perl -e 'use LWP::Simple; getprint($ARGV[0]);' "$1" > "$2" 2>$tmp_dir/stderr
                      rc=$?
                      # check for 404
                      grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                      if test $? -eq 0; then
                        echo "ERROR 404"
                        http_404_error
                      fi

                      # check for bad return status or empty output
                      if test $rc -ne 0 || test ! -s "$2"; then
                        capture_tmp_stderr "perl"
                        return 1
                      fi

                      return 0
                    }

                    # do_python URL FILENAME
                    do_python() {
                      echo "trying python..."
                      python -c "import sys,urllib2 ; sys.stdout.write(urllib2.urlopen(sys.argv[1]).read())" "$1" > "$2" 2>$tmp_dir/stderr
                      rc=$?
                      # check for 404
                      grep "HTTP Error 404" $tmp_dir/stderr 2>&1 >/dev/null
                      if test $? -eq 0; then
                        echo "ERROR 404"
                        http_404_error
                      fi

                      # check for bad return status or empty output
                      if test $rc -ne 0 || test ! -s "$2"; then
                        capture_tmp_stderr "python"
                        return 1
                      fi
                      return 0
                    }

                    # returns 0 if checksums match
                    do_checksum() {
                      if exists sha256sum; then
                        echo "Comparing checksum with sha256sum..."
                        checksum=`sha256sum $1 | awk '{ print $1 }'`
                        return `test "x$checksum" = "x$2"`
                      elif exists shasum; then
                        echo "Comparing checksum with shasum..."
                        checksum=`shasum -a 256 $1 | awk '{ print $1 }'`
                        return `test "x$checksum" = "x$2"`
                      else
                        echo "WARNING: could not find a valid checksum program, pre-install shasum or sha256sum in your O/S image to get valdation..."
                        return 0
                      fi
                    }

                    # do_download URL FILENAME
                    do_download() {
                      echo "downloading $1"
                      echo "  to file $2"

                      url=`echo $1`
                      if test "x$platform" = "xsolaris2"; then
                        if test "x$platform_version" = "x5.9" -o "x$platform_version" = "x5.10"; then
                          # solaris 9 lacks openssl, solaris 10 lacks recent enough credentials - your base O/S is completely insecure, please upgrade
                          url=`echo $url | sed -e 's/https/http/'`
                        fi
                      fi

                      # we try all of these until we get success.
                      # perl, in particular may be present but LWP::Simple may not be installed

                      if exists wget; then
                        do_wget $url $2 && return 0
                      fi

                      if exists curl; then
                        do_curl $url $2 && return 0
                      fi

                      if exists fetch; then
                        do_fetch $url $2 && return 0
                      fi

                      if exists perl; then
                        do_perl $url $2 && return 0
                      fi

                      if exists python; then
                        do_python $url $2 && return 0
                      fi

                      unable_to_retrieve_package
                    }

                    # install_file TYPE FILENAME
                    # TYPE is "rpm", "deb", "solaris", "sh", etc.
                    install_file() {
                      echo "Installing $project $version"
                      case "$1" in
                        "rpm")
                          if test "x$platform" = "xnexus" || test "x$platform" = "xios_xr"; then
                            echo "installing with yum..."
                            yum install -yv "$2"
                          else
                            echo "installing with rpm..."
                            rpm -Uvh --oldpackage --replacepkgs "$2"
                          fi
                          ;;
                        "deb")
                          echo "installing with dpkg..."
                          dpkg -i "$2"
                          ;;
                        "bff")
                          echo "installing with installp..."
                          installp -aXYgd "$2" all
                          ;;
                        "solaris")
                          echo "installing with pkgadd..."
                          echo "conflict=nocheck" > $tmp_dir/nocheck
                          echo "action=nocheck" >> $tmp_dir/nocheck
                          echo "mail=" >> $tmp_dir/nocheck
                          pkgrm -a $tmp_dir/nocheck -n $project >/dev/null 2>&1 || true
                          pkgadd -G -n -d "$2" -a $tmp_dir/nocheck $project
                          ;;
                        "pkg")
                          echo "installing with installer..."
                          cd / && /usr/sbin/installer -pkg "$2" -target /
                          ;;
                        "dmg")
                          echo "installing dmg file..."
                          hdiutil detach "/Volumes/chef_software" >/dev/null 2>&1 || true
                          hdiutil attach "$2" -mountpoint "/Volumes/chef_software"
                          cd / && /usr/sbin/installer -pkg `find "/Volumes/chef_software" -name \*.pkg` -target /
                          hdiutil detach "/Volumes/chef_software"
                          ;;
                        "sh" )
                          echo "installing with sh..."
                          sh "$2"
                          ;;
                        *)
                          echo "Unknown filetype: $1"
                          report_bug
                          exit 1
                          ;;
                      esac
                      if test $? -ne 0; then
                        echo "Installation failed"
                        report_bug
                        exit 1
                      fi
                    }

                    if test "x$TMPDIR" = "x"; then
                      tmp="/tmp"
                    else
                      tmp=$TMPDIR
                    fi
                    # secure-ish temp dir creation without having mktemp available (DDoS-able but not expliotable)
                    tmp_dir="$tmp/install.sh.$$"
                    (umask 077 && mkdir $tmp_dir) || exit 1

                    ############
                    # end of helpers.sh
                    ############


                    project=chef
                    version=12.12.7+20160701150941
                    channel=unstable


                    # platform_detection.sh
                    ############
                    # This section makes platform detection compatible with omnitruck on the system
                    #   it runs.
                    #
                    # Outputs:
                    # $platform: Name of the platform.
                    # $platform_version: Version of the platform.
                    # $machine: System's architecture.
                    ############

                    #
                    # Platform and Platform Version detection
                    #
                    # NOTE: This should now match ohai platform and platform_version matching.
                    # do not invented new platform and platform_version schemas, just make this behave
                    # like what ohai returns as platform and platform_version for the server.
                    #
                    # ALSO NOTE: Do not mangle platform or platform_version here.  It is less error
                    # prone and more future-proof to do that in the server, and then all omnitruck clients
                    # will 'inherit' the changes (install.sh is not the only client of the omnitruck
                    # endpoint out there).
                    #

                    machine=`uname -m`
                    os=`uname -s`

                    if test -f "/etc/lsb-release" && grep -q DISTRIB_ID /etc/lsb-release && ! grep -q wrlinux /etc/lsb-release; then
                      platform=`grep DISTRIB_ID /etc/lsb-release | cut -d "=" -f 2 | tr '[A-Z]' '[a-z]'`
                      platform_version=`grep DISTRIB_RELEASE /etc/lsb-release | cut -d "=" -f 2`
                    elif test -f "/etc/debian_version"; then
                      platform="debian"
                      platform_version=`cat /etc/debian_version`
                    elif test -f "/etc/redhat-release"; then
                      platform=`sed 's/^\(.\+\) release.*/\1/' /etc/redhat-release | tr '[A-Z]' '[a-z]'`
                      platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/redhat-release`

                      # If /etc/redhat-release exists, we act like RHEL by default
                      if test "$platform" = "fedora"; then
                        # FIXME: stop remapping fedora to el
                        # FIXME: remove client side platform_version mangling and hard coded yolo
                        # Change platform version for use below.
                        platform_version="6.0"
                      fi

                      if test "$platform" = "xenserver"; then
                        # Current XenServer 6.2 is based on CentOS 5, platform is not reset to "el" server should hanlde response
                        platform="xenserver"
                      else
                        # FIXME: use "redhat"
                        platform="el"
                      fi

                    elif test -f "/etc/system-release"; then
                      platform=`sed 's/^\(.\+\) release.\+/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
                      platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
                      # amazon is built off of fedora, so act like RHEL
                      if test "$platform" = "amazon linux ami"; then
                        # FIXME: remove client side platform_version mangling and hard coded yolo, and remapping to deprecated "el"
                        platform="el"
                        platform_version="6.0"
                      fi
                    # Apple OS X
                    elif test -f "/usr/bin/sw_vers"; then
                      platform="mac_os_x"
                      # Matching the tab-space with sed is error-prone
                      platform_version=`sw_vers | awk '/^ProductVersion:/ { print $2 }' | cut -d. -f1,2`

                      # x86_64 Apple hardware often runs 32-bit kernels (see OHAI-63)
                      x86_64=`sysctl -n hw.optional.x86_64`
                      if test $x86_64 -eq 1; then
                        machine="x86_64"
                      fi
                    elif test -f "/etc/release"; then
                      machine=`/usr/bin/uname -p`
                      if grep -q SmartOS /etc/release; then
                        platform="smartos"
                        platform_version=`grep ^Image /etc/product | awk '{ print $3 }'`
                      else
                        platform="solaris2"
                        platform_version=`/usr/bin/uname -r`
                      fi
                    elif test -f "/etc/SuSE-release"; then
                      if grep -q 'Enterprise' /etc/SuSE-release;
                      then
                          platform="sles"
                          platform_version=`awk '/^VERSION/ {V = $3}; /^PATCHLEVEL/ {P = $3}; END {print V "." P}' /etc/SuSE-release`
                      else
                          platform="suse"
                          platform_version=`awk '/^VERSION =/ { print $3 }' /etc/SuSE-release`
                      fi
                    elif test "x$os" = "xFreeBSD"; then
                      platform="freebsd"
                      platform_version=`uname -r | sed 's/-.*//'`
                    elif test "x$os" = "xAIX"; then
                      platform="aix"
                      platform_version="`uname -v`.`uname -r`"
                      machine="powerpc"
                    elif test -f "/etc/os-release"; then
                      . /etc/os-release
                      if test "x$CISCO_RELEASE_INFO" != "x"; then
                        . $CISCO_RELEASE_INFO
                      fi

                      platform=$ID
                      platform_version=$VERSION
                    fi

                    if test "x$platform" = "x"; then
                      echo "Unable to determine platform version!"
                      report_bug
                      exit 1
                    fi

                    #
                    # NOTE: platform manging in the install.sh is DEPRECATED
                    #
                    # - install.sh should be true to ohai and should not remap
                    #   platform or platform versions.
                    #
                    # - remapping platform and mangling platform version numbers is
                    #   now the complete responsibility of the server-side endpoints
                    #

                    major_version=`echo $platform_version | cut -d. -f1`
                    case $platform in
                      # FIXME: should remove this case statement completely
                      "el")
                        # FIXME:  "el" is deprecated, should use "redhat"
                        platform_version=$major_version
                        ;;
                      "debian")
                        if test "x$major_version" = "x5"; then
                          # This is here for potential back-compat.
                          # We do not have 5 in versions we publish for anymore but we
                          # might have it for earlier versions.
                          platform_version="6"
                        else
                          platform_version=$major_version
                        fi
                        ;;
                      "freebsd")
                        platform_version=$major_version
                        ;;
                      "sles")
                        platform_version=$major_version
                        ;;
                      "suse")
                        platform_version=$major_version
                        ;;
                    esac

                    # normalize the architecture we detected
                    case $machine in
                      "x86_64"|"amd64"|"x64")
                        machine="x86_64"
                        ;;
                      "i386"|"i86pc"|"x86"|"i686")
                        machine="i386"
                        ;;
                      "sparc"|"sun4u"|"sun4v")
                        machine="sparc"
                        ;;
                    esac

                    if test "x$platform_version" = "x"; then
                      echo "Unable to determine platform version!"
                      report_bug
                      exit 1
                    fi

                    if test "x$platform" = "xsolaris2"; then
                      # hack up the path on Solaris to find wget, pkgadd
                      PATH=/usr/sfw/bin:/usr/sbin:$PATH
                      export PATH
                    fi

                    echo "$platform $platform_version $machine"

                    ############
                    # end of platform_detection.sh
                    ############


                    # artifactory_urls.sh
                    ############
                    # This section sets up the information for a build to be installed from artifactory
                    #  then uses $platform, $platform_version and $machine to select the correct
                    #  version.
                    #
                    # Inputs:
                    # $platform:
                    # $platform_version:
                    # $machine:
                    #
                    # Outputs:
                    # $download_url:
                    # $sha256:
                    ############


                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/ppc64le"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_ppc64el.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 89a564bafc4b22db5f5539fe1925587c6bf2334f0c344e0c13264f52ae537b0a" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.9/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.9/chef-12.12.7+20160701150941-1.dmg" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.10/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.10/chef-12.12.7+20160701150941-1.dmg" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.11/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.11/chef-12.12.7+20160701150941-1.dmg" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ios_xr/6/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ios_xr/6/chef-12.12.7+20160701150941-1.ios_xr6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 96689d0525260209d68e4991db7144b0aa31a6f7628c9e4e5f23c6f150025fb0" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/6/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/7/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/8/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/nexus/7/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/nexus/7/chef-12.12.7+20160701150941-1.nexus7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 f5c620dc0166571903f28990240a5bbb1123bd6e8433a8d8d4aa9b2ba8587bbb" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.i386.sh" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 6d3b80e324377a5a80889d51ec5b0d0730d7503eb14c32a4ed7fd9e2ad21d615" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.i386.sh" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 8d63b437804b48672cc7b325bd3eb3a1ff525978b894c9b6e7c63db011aac295" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/5/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.i386.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 e910142a9bdc53757635db7f997f00e5415cc6dadea981aeec1e999489586ee2" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/7/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 13296dfe3559a3cb5664a8319e57153635ba867a3a72feb4b040ce833fc22914" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/6/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.i386.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 e31a417ea73cefb3424496b07b19e188a5d079db40fc29bae0c8a24b2fb9d558" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2012/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/7/ppc64le"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64le.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 5fb71d38e54b0a6e8fc142f48e693de2dc54891edde59f65db61bf097766a3de" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/6/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/7/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/7/ppc64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 bc5a1ea39782df044cd069523d6534f72222855bbf99a98961858cdaee51d7c0" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/8/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/amd64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 f4c5e3b437e5129e89a5ca0d69036dcf0e6e4b21a0eef61b495ab63a0be2fe94" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/5/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 58bed7db8fe43a1e8441d9a2a5e46b9fe4ab7e932dd1f7f5e0dc53adc004704c" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/6/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 e30aac011f866a56f3542eaaa17cf18e40df6021e997e32fd3d1ae5b8f11e274" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/amd64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 6fc165d1fbc96f5ed5ffbfedb154e7ede4d6e87fccec3c80c0de5510527bd673" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2012/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/aix/6.1/powerpc"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/6.1/chef-12.12.7+20160701150941-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/aix/7.1/powerpc"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/7.1/chef-12.12.7+20160701150941-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/sparc"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/sparc"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817" >> "$artifact_info_dir/artifact_info"


                    artifact_info_for_platform="$tmp_dir/artifact_info/$platform/$platform_version/$machine/artifact_info"

                    download_url=`awk '$1 == "url" { print $2 }' "$artifact_info_for_platform"`
                    sha256=`awk '$1 == "sha256" { print $2 }' "$artifact_info_for_platform"`


                    # fetch_package.sh
                    ############
                    # This section fetchs a package from $download_url and verifies its metadata.
                    #
                    # Inputs:
                    # $download_url:
                    # $tmp_dir:
                    # Optional Inputs:
                    # $cmdline_filename: Name of the package downloaded on local disk.
                    # $cmdline_dl_dir: Name of the directory downloaded package will be saved to on local disk.
                    #
                    # Outputs:
                    # $download_filename: Name of the downloaded file on local disk.
                    # $filetype: Type of the file downloaded.
                    ############

                    filename=`echo $download_url | sed -e 's/^.*\///'`
                    filetype=`echo $filename | sed -e 's/^.*\.//'`

                    # use either $tmp_dir, the provided directory (-d) or the provided filename (-f)
                    if test "x$cmdline_filename" != "x"; then
                      download_filename="$cmdline_filename"
                    elif test "x$cmdline_dl_dir" != "x"; then
                      download_filename="$cmdline_dl_dir/$filename"
                    else
                      download_filename="$tmp_dir/$filename"
                    fi

                    # ensure the parent directory where to download the installer always exists
                    download_dir=`dirname $download_filename`
                    (umask 077 && mkdir -p $download_dir) || exit 1

                    # check if we have that file locally available and if so verify the checksum
                    cached_file_available="false"
                    if test -f $download_filename; then
                      echo "$download_filename already exists, verifiying checksum..."
                      if do_checksum "$download_filename" "$sha256"; then
                        echo "checksum compare succeeded, using existing file!"
                        cached_file_available="true"
                      else
                        echo "checksum mismatch, downloading latest version of the file"
                      fi
                    fi

                    # download if no local version of the file available
                    if test "x$cached_file_available" != "xtrue"; then
                      do_download "$download_url"  "$download_filename"
                      do_checksum "$download_filename" "$sha256" || checksum_mismatch
                    fi

                    ############
                    # end of fetch_package.sh
                    ############


                    # install_package.sh
                    ############
                    # Installs a package and removed the temp directory.
                    #
                    # Inputs:
                    # $download_filename: Name of the file to be installed.
                    # $filetype: Type of the file to be installed.
                    # $version: The version requested. Used only for warning user if not set.
                    ############

                    if test "x$version" = "x"; then
                      echo
                      echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
                      echo
                      echo "You are installing an omnibus package without a version pin.  If you are installing"
                      echo "on production servers via an automated process this is DANGEROUS and you will"
                      echo "be upgraded without warning on new releases, even to new major releases."
                      echo "Letting the version float is only appropriate in desktop, test, development or"
                      echo "CI/CD environments."
                      echo
                      echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
                      echo
                    fi

                    install_file $filetype "$download_filename"

                    if test "x$tmp_dir" != "x"; then
                      rm -r "$tmp_dir"
                    fi

                    ############
                    # end of install_package.sh
                    ############

                    EOL
                    chmod +x /tmp/chef-installer.sh
                    sudo -E /tmp/chef-installer.sh)
                           bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           /bin/bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           el 6 x86_64
                           downloading http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.x86_64.rpm
                             to file /tmp/install.sh.959/chef-12.12.7+20160701150941-1.el6.x86_64.rpm
                           trying curl...
                           Comparing checksum with sha256sum...
                           Installing chef 12.12.7+20160701150941
                           installing with rpm...
                           warning: /tmp/install.sh.959/chef-12.12.7+20160701150941-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
                           Preparing...                                                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                           Waited 90/300s for instance <i-e739e248> to become ready.
                           Waited 90/300s for instance <i-473ae1e8> to become ready.
                    D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                           Waiting for SSH service on 10.194.13.47:22, retrying in 3 seconds
                              1:chef                                                               (  1%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (  3%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (  6%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (  8%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        ( 10%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       ( 13%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      ( 15%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     ( 17%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    ( 19%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   ( 22%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  ( 24%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 ( 26%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                ( 28%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               ( 31%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              ( 33%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             ( 35%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            ( 38%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           ( 40%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          ( 42%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         ( 44%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        ( 47%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       ( 49%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      ( 51%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     ( 53%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    ( 56%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   ( 58%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  ( 60%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 ( 63%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                ( 65%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               ( 67%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              ( 69%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             ( 72%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            ( 74%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           ( 76%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          ( 78%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         ( 81%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        ( 83%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       ( 85%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      ( 88%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     ( 90%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    ( 92%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   ( 94%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  ( 97%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### ( 99%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                           /bin/sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           Thank you for installing Chef!
                    D      [SSH] root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '
                    sudo_rm="sudo -E rm"
                    dirs="/tmp/kitchen/clients /tmp/kitchen/cookbooks /tmp/kitchen/data /tmp/kitchen/data_bags /tmp/kitchen/encrypted_data_bag_secret /tmp/kitchen/environments /tmp/kitchen/roles"
                    root_path="/tmp/kitchen"

                    $sudo_rm -rf $dirs
                    mkdir -p $root_path
                    ')
                           bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           Transferring files to <fips-integration-centos-6>
                    D      TIMING: scp async upload (Kitchen::Transport::Ssh)
                    D      TIMING: scp async upload (Kitchen::Transport::Ssh) took (0m0.29s)
                    D      Transfer complete
                    D      Attempting to execute command - try 1 of 1.
                    D      [SSH] root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '
                    sudo -E /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json --chef-zero-port 8889
                    ')
                           bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                    D      [SSH] opening connection to root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                    D      [SSH] root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (echo '[SSH] Established')
                           bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           [SSH] Established
                    D      Using sudo_command='sudo -E' for ohai hints
                    D      [SSH] reusing existing connection root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                    D      [SSH] root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E mkdir -p /etc/chef/ohai/hints; sudo -E touch /etc/chef/ohai/hints/ec2.json)
                           bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                    D      ec2:create '10.194.13.47'
                           Finished creating <fips-unit-functional-centos-6> (1m43.27s).
                    -----> Converging <fips-unit-functional-centos-6>...
                           Preparing files for transfer
                    D      Creating local sandbox in /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160701-12947-1tbjgv7
                           Preparing dna.json
                    D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                           Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                           Removing non-cookbook files before transfer
                           Preparing validation.pem
                    D      Using a dummy validation.pem
                           Preparing client.rb
                    D      Creating client.rb from {:node_name=>"fips-unit-functional-centos-6", :checksum_path=>"/tmp/kitchen/checksums", :file_cache_path=>"/tmp/kitchen/cache", :file_backup_path=>"/tmp/kitchen/backup", :cookbook_path=>["/tmp/kitchen/cookbooks", "/tmp/kitchen/site-cookbooks"], :data_bag_path=>"/tmp/kitchen/data_bags", :environment_path=>"/tmp/kitchen/environments", :node_path=>"/tmp/kitchen/nodes", :role_path=>"/tmp/kitchen/roles", :client_path=>"/tmp/kitchen/clients", :user_path=>"/tmp/kitchen/users", :validation_key=>"/tmp/kitchen/validation.pem", :client_key=>"/tmp/kitchen/client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"/tmp/kitchen/encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                    D      [SSH] reusing existing connection root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                    D      [SSH] root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E cat > /tmp/chef-installer.sh <<"EOL"
                    #!/bin/bash
                    #!/bin/sh
                    # WARNING: REQUIRES /bin/sh
                    #
                    # - must run on /bin/sh on solaris 9
                    # - must run on /bin/sh on AIX 6.x
                    #
                    # Copyright:: Copyright (c) 2010-2015 Chef Software, Inc.
                    # License:: Apache License, Version 2.0
                    #
                    # Licensed under the Apache License, Version 2.0 (the "License");
                    # you may not use this file except in compliance with the License.
                    # You may obtain a copy of the License at
                    #
                    #     http://www.apache.org/licenses/LICENSE-2.0
                    #
                    # Unless required by applicable law or agreed to in writing, software
                    # distributed under the License is distributed on an "AS IS" BASIS,
                    # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                    # See the License for the specific language governing permissions and
                    # limitations under the License.
                    #

                    # helpers.sh
                    ############
                    # This section has some helper functions to make life easier.
                    #
                    # Outputs:
                    # $tmp_dir: secure-ish temp directory that can be used during installation.
                    ############

                    # Check whether a command exists - returns 0 if it does, 1 if it does not
                    exists() {
                      if command -v $1 >/dev/null 2>&1
                      then
                        return 0
                      else
                        return 1
                      fi
                    }

                    # Output the instructions to report bug about this script
                    report_bug() {
                      echo "Version: $version"
                      echo ""
                      echo "Please file a Bug Report at https://github.com/chef/omnitruck/issues/new"
                      echo "Alternatively, feel free to open a Support Ticket at https://www.chef.io/support/tickets"
                      echo "More Chef support resources can be found at https://www.chef.io/support"
                      echo ""
                      echo "Please include as many details about the problem as possible i.e., how to reproduce"
                      echo "the problem (if possible), type of the Operating System and its version, etc.,"
                      echo "and any other relevant details that might help us with troubleshooting."
                      echo ""
                    }

                    checksum_mismatch() {
                      echo "Package checksum mismatch!"
                      report_bug
                      exit 1
                    }

                    unable_to_retrieve_package() {
                      echo "Unable to retrieve a valid package!"
                      report_bug
                      echo "Metadata URL: $metadata_url"
                      if test "x$download_url" != "x"; then
                        echo "Download URL: $download_url"
                      fi
                      if test "x$stderr_results" != "x"; then
                        echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
                      fi
                      exit 1
                    }

                    http_404_error() {
                      echo "Omnitruck artifact does not exist for version $version on platform $platform"
                      echo ""
                      echo "Either this means:"
                      echo "   - We do not support $platform"
                      echo "   - We do not have an artifact for $version"
                      echo ""
                      echo "This is often the latter case due to running a prerelease or RC version of chef"
                      echo "or a gem version which was only pushed to rubygems and not omnitruck."
                      echo ""
                      echo "You may be able to set your knife[:bootstrap_version] to the most recent stable"
                      echo "release of Chef to fix this problem (or the most recent stable major version number)."
                      echo ""
                      echo "In order to test the version parameter, adventurous users may take the Metadata URL"
                      echo "below and modify the '&v=<number>' parameter until you successfully get a URL that"
                      echo "does not 404 (e.g. via curl or wget).  You should be able to use '&v=11' or '&v=12'"
                      echo "succesfully."
                      echo ""
                      echo "If you cannot fix this problem by setting the bootstrap_version, it probably means"
                      echo "that $platform is not supported."
                      echo ""
                      # deliberately do not call report_bug to suppress bug report noise.
                      echo "Metadata URL: $metadata_url"
                      if test "x$download_url" != "x"; then
                        echo "Download URL: $download_url"
                      fi
                      if test "x$stderr_results" != "x"; then
                        echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
                      fi
                      exit 1
                    }

                    capture_tmp_stderr() {
                      # spool up /tmp/stderr from all the commands we called
                      if test -f "$tmp_dir/stderr"; then
                        output=`cat $tmp_dir/stderr`
                        stderr_results="${stderr_results}\nSTDERR from $1:\n\n$output\n"
                        rm $tmp_dir/stderr
                      fi
                    }

                    # do_wget URL FILENAME
                    do_wget() {
                      echo "trying wget..."
                      wget -O "$2" "$1" 2>$tmp_dir/stderr
                      rc=$?
                      # check for 404
                      grep "ERROR 404" $tmp_dir/stderr 2>&1 >/dev/null
                      if test $? -eq 0; then
                        echo "ERROR 404"
                        http_404_error
                      fi

                      # check for bad return status or empty output
                      if test $rc -ne 0 || test ! -s "$2"; then
                        capture_tmp_stderr "wget"
                        return 1
                      fi

                      return 0
                    }

                    # do_curl URL FILENAME
                    do_curl() {
                      echo "trying curl..."
                      curl --retry 5 -sL -D $tmp_dir/stderr "$1" > "$2"
                      rc=$?
                      # check for 404
                      grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                      if test $? -eq 0; then
                        echo "ERROR 404"
                        http_404_error
                      fi

                      # check for bad return status or empty output
                      if test $rc -ne 0 || test ! -s "$2"; then
                        capture_tmp_stderr "curl"
                        return 1
                      fi

                      return 0
                    }

                    # do_fetch URL FILENAME
                    do_fetch() {
                      echo "trying fetch..."
                      fetch -o "$2" "$1" 2>$tmp_dir/stderr
                      # check for bad return status
                      test $? -ne 0 && return 1
                      return 0
                    }

                    # do_perl URL FILENAME
                    do_perl() {
                      echo "trying perl..."
                      perl -e 'use LWP::Simple; getprint($ARGV[0]);' "$1" > "$2" 2>$tmp_dir/stderr
                      rc=$?
                      # check for 404
                      grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                      if test $? -eq 0; then
                        echo "ERROR 404"
                        http_404_error
                      fi

                      # check for bad return status or empty output
                      if test $rc -ne 0 || test ! -s "$2"; then
                        capture_tmp_stderr "perl"
                        return 1
                      fi

                      return 0
                    }

                    # do_python URL FILENAME
                    do_python() {
                      echo "trying python..."
                      python -c "import sys,urllib2 ; sys.stdout.write(urllib2.urlopen(sys.argv[1]).read())" "$1" > "$2" 2>$tmp_dir/stderr
                      rc=$?
                      # check for 404
                      grep "HTTP Error 404" $tmp_dir/stderr 2>&1 >/dev/null
                      if test $? -eq 0; then
                        echo "ERROR 404"
                        http_404_error
                      fi

                      # check for bad return status or empty output
                      if test $rc -ne 0 || test ! -s "$2"; then
                        capture_tmp_stderr "python"
                        return 1
                      fi
                      return 0
                    }

                    # returns 0 if checksums match
                    do_checksum() {
                      if exists sha256sum; then
                        echo "Comparing checksum with sha256sum..."
                        checksum=`sha256sum $1 | awk '{ print $1 }'`
                        return `test "x$checksum" = "x$2"`
                      elif exists shasum; then
                        echo "Comparing checksum with shasum..."
                        checksum=`shasum -a 256 $1 | awk '{ print $1 }'`
                        return `test "x$checksum" = "x$2"`
                      else
                        echo "WARNING: could not find a valid checksum program, pre-install shasum or sha256sum in your O/S image to get valdation..."
                        return 0
                      fi
                    }

                    # do_download URL FILENAME
                    do_download() {
                      echo "downloading $1"
                      echo "  to file $2"

                      url=`echo $1`
                      if test "x$platform" = "xsolaris2"; then
                        if test "x$platform_version" = "x5.9" -o "x$platform_version" = "x5.10"; then
                          # solaris 9 lacks openssl, solaris 10 lacks recent enough credentials - your base O/S is completely insecure, please upgrade
                          url=`echo $url | sed -e 's/https/http/'`
                        fi
                      fi

                      # we try all of these until we get success.
                      # perl, in particular may be present but LWP::Simple may not be installed

                      if exists wget; then
                        do_wget $url $2 && return 0
                      fi

                      if exists curl; then
                        do_curl $url $2 && return 0
                      fi

                      if exists fetch; then
                        do_fetch $url $2 && return 0
                      fi

                      if exists perl; then
                        do_perl $url $2 && return 0
                      fi

                      if exists python; then
                        do_python $url $2 && return 0
                      fi

                      unable_to_retrieve_package
                    }

                    # install_file TYPE FILENAME
                    # TYPE is "rpm", "deb", "solaris", "sh", etc.
                    install_file() {
                      echo "Installing $project $version"
                      case "$1" in
                        "rpm")
                          if test "x$platform" = "xnexus" || test "x$platform" = "xios_xr"; then
                            echo "installing with yum..."
                            yum install -yv "$2"
                          else
                            echo "installing with rpm..."
                            rpm -Uvh --oldpackage --replacepkgs "$2"
                          fi
                          ;;
                        "deb")
                          echo "installing with dpkg..."
                          dpkg -i "$2"
                          ;;
                        "bff")
                          echo "installing with installp..."
                          installp -aXYgd "$2" all
                          ;;
                        "solaris")
                          echo "installing with pkgadd..."
                          echo "conflict=nocheck" > $tmp_dir/nocheck
                          echo "action=nocheck" >> $tmp_dir/nocheck
                          echo "mail=" >> $tmp_dir/nocheck
                          pkgrm -a $tmp_dir/nocheck -n $project >/dev/null 2>&1 || true
                          pkgadd -G -n -d "$2" -a $tmp_dir/nocheck $project
                          ;;
                        "pkg")
                          echo "installing with installer..."
                          cd / && /usr/sbin/installer -pkg "$2" -target /
                          ;;
                        "dmg")
                          echo "installing dmg file..."
                          hdiutil detach "/Volumes/chef_software" >/dev/null 2>&1 || true
                          hdiutil attach "$2" -mountpoint "/Volumes/chef_software"
                          cd / && /usr/sbin/installer -pkg `find "/Volumes/chef_software" -name \*.pkg` -target /
                          hdiutil detach "/Volumes/chef_software"
                          ;;
                        "sh" )
                          echo "installing with sh..."
                          sh "$2"
                          ;;
                        *)
                          echo "Unknown filetype: $1"
                          report_bug
                          exit 1
                          ;;
                      esac
                      if test $? -ne 0; then
                        echo "Installation failed"
                        report_bug
                        exit 1
                      fi
                    }

                    if test "x$TMPDIR" = "x"; then
                      tmp="/tmp"
                    else
                      tmp=$TMPDIR
                    fi
                    # secure-ish temp dir creation without having mktemp available (DDoS-able but not expliotable)
                    tmp_dir="$tmp/install.sh.$$"
                    (umask 077 && mkdir $tmp_dir) || exit 1

                    ############
                    # end of helpers.sh
                    ############


                    project=chef
                    version=12.12.7+20160701150941
                    channel=unstable


                    # platform_detection.sh
                    ############
                    # This section makes platform detection compatible with omnitruck on the system
                    #   it runs.
                    #
                    # Outputs:
                    # $platform: Name of the platform.
                    # $platform_version: Version of the platform.
                    # $machine: System's architecture.
                    ############

                    #
                    # Platform and Platform Version detection
                    #
                    # NOTE: This should now match ohai platform and platform_version matching.
                    # do not invented new platform and platform_version schemas, just make this behave
                    # like what ohai returns as platform and platform_version for the server.
                    #
                    # ALSO NOTE: Do not mangle platform or platform_version here.  It is less error
                    # prone and more future-proof to do that in the server, and then all omnitruck clients
                    # will 'inherit' the changes (install.sh is not the only client of the omnitruck
                    # endpoint out there).
                    #

                    machine=`uname -m`
                    os=`uname -s`

                    if test -f "/etc/lsb-release" && grep -q DISTRIB_ID /etc/lsb-release && ! grep -q wrlinux /etc/lsb-release; then
                      platform=`grep DISTRIB_ID /etc/lsb-release | cut -d "=" -f 2 | tr '[A-Z]' '[a-z]'`
                      platform_version=`grep DISTRIB_RELEASE /etc/lsb-release | cut -d "=" -f 2`
                    elif test -f "/etc/debian_version"; then
                      platform="debian"
                      platform_version=`cat /etc/debian_version`
                    elif test -f "/etc/redhat-release"; then
                      platform=`sed 's/^\(.\+\) release.*/\1/' /etc/redhat-release | tr '[A-Z]' '[a-z]'`
                      platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/redhat-release`

                      # If /etc/redhat-release exists, we act like RHEL by default
                      if test "$platform" = "fedora"; then
                        # FIXME: stop remapping fedora to el
                        # FIXME: remove client side platform_version mangling and hard coded yolo
                        # Change platform version for use below.
                        platform_version="6.0"
                      fi

                      if test "$platform" = "xenserver"; then
                        # Current XenServer 6.2 is based on CentOS 5, platform is not reset to "el" server should hanlde response
                        platform="xenserver"
                      else
                        # FIXME: use "redhat"
                        platform="el"
                      fi

                    elif test -f "/etc/system-release"; then
                      platform=`sed 's/^\(.\+\) release.\+/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
                      platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
                      # amazon is built off of fedora, so act like RHEL
                      if test "$platform" = "amazon linux ami"; then
                        # FIXME: remove client side platform_version mangling and hard coded yolo, and remapping to deprecated "el"
                        platform="el"
                        platform_version="6.0"
                      fi
                    # Apple OS X
                    elif test -f "/usr/bin/sw_vers"; then
                      platform="mac_os_x"
                      # Matching the tab-space with sed is error-prone
                      platform_version=`sw_vers | awk '/^ProductVersion:/ { print $2 }' | cut -d. -f1,2`

                      # x86_64 Apple hardware often runs 32-bit kernels (see OHAI-63)
                      x86_64=`sysctl -n hw.optional.x86_64`
                      if test $x86_64 -eq 1; then
                        machine="x86_64"
                      fi
                    elif test -f "/etc/release"; then
                      machine=`/usr/bin/uname -p`
                      if grep -q SmartOS /etc/release; then
                        platform="smartos"
                        platform_version=`grep ^Image /etc/product | awk '{ print $3 }'`
                      else
                        platform="solaris2"
                        platform_version=`/usr/bin/uname -r`
                      fi
                    elif test -f "/etc/SuSE-release"; then
                      if grep -q 'Enterprise' /etc/SuSE-release;
                      then
                          platform="sles"
                          platform_version=`awk '/^VERSION/ {V = $3}; /^PATCHLEVEL/ {P = $3}; END {print V "." P}' /etc/SuSE-release`
                      else
                          platform="suse"
                          platform_version=`awk '/^VERSION =/ { print $3 }' /etc/SuSE-release`
                      fi
                    elif test "x$os" = "xFreeBSD"; then
                      platform="freebsd"
                      platform_version=`uname -r | sed 's/-.*//'`
                    elif test "x$os" = "xAIX"; then
                      platform="aix"
                      platform_version="`uname -v`.`uname -r`"
                      machine="powerpc"
                    elif test -f "/etc/os-release"; then
                      . /etc/os-release
                      if test "x$CISCO_RELEASE_INFO" != "x"; then
                        . $CISCO_RELEASE_INFO
                      fi

                      platform=$ID
                      platform_version=$VERSION
                    fi

                    if test "x$platform" = "x"; then
                      echo "Unable to determine platform version!"
                      report_bug
                      exit 1
                    fi

                    #
                    # NOTE: platform manging in the install.sh is DEPRECATED
                    #
                    # - install.sh should be true to ohai and should not remap
                    #   platform or platform versions.
                    #
                    # - remapping platform and mangling platform version numbers is
                    #   now the complete responsibility of the server-side endpoints
                    #

                    major_version=`echo $platform_version | cut -d. -f1`
                    case $platform in
                      # FIXME: should remove this case statement completely
                      "el")
                        # FIXME:  "el" is deprecated, should use "redhat"
                        platform_version=$major_version
                        ;;
                      "debian")
                        if test "x$major_version" = "x5"; then
                          # This is here for potential back-compat.
                          # We do not have 5 in versions we publish for anymore but we
                          # might have it for earlier versions.
                          platform_version="6"
                        else
                          platform_version=$major_version
                        fi
                        ;;
                      "freebsd")
                        platform_version=$major_version
                        ;;
                      "sles")
                        platform_version=$major_version
                        ;;
                      "suse")
                        platform_version=$major_version
                        ;;
                    esac

                    # normalize the architecture we detected
                    case $machine in
                      "x86_64"|"amd64"|"x64")
                        machine="x86_64"
                        ;;
                      "i386"|"i86pc"|"x86"|"i686")
                        machine="i386"
                        ;;
                      "sparc"|"sun4u"|"sun4v")
                        machine="sparc"
                        ;;
                    esac

                    if test "x$platform_version" = "x"; then
                      echo "Unable to determine platform version!"
                      report_bug
                      exit 1
                    fi

                    if test "x$platform" = "xsolaris2"; then
                      # hack up the path on Solaris to find wget, pkgadd
                      PATH=/usr/sfw/bin:/usr/sbin:$PATH
                      export PATH
                    fi

                    echo "$platform $platform_version $machine"

                    ############
                    # end of platform_detection.sh
                    ############


                    # artifactory_urls.sh
                    ############
                    # This section sets up the information for a build to be installed from artifactory
                    #  then uses $platform, $platform_version and $machine to select the correct
                    #  version.
                    #
                    # Inputs:
                    # $platform:
                    # $platform_version:
                    # $machine:
                    #
                    # Outputs:
                    # $download_url:
                    # $sha256:
                    ############


                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/ppc64le"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_ppc64el.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 89a564bafc4b22db5f5539fe1925587c6bf2334f0c344e0c13264f52ae537b0a" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.9/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.9/chef-12.12.7+20160701150941-1.dmg" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.10/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.10/chef-12.12.7+20160701150941-1.dmg" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.11/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.11/chef-12.12.7+20160701150941-1.dmg" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ios_xr/6/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ios_xr/6/chef-12.12.7+20160701150941-1.ios_xr6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 96689d0525260209d68e4991db7144b0aa31a6f7628c9e4e5f23c6f150025fb0" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/6/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/7/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/8/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/nexus/7/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/nexus/7/chef-12.12.7+20160701150941-1.nexus7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 f5c620dc0166571903f28990240a5bbb1123bd6e8433a8d8d4aa9b2ba8587bbb" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.i386.sh" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 6d3b80e324377a5a80889d51ec5b0d0730d7503eb14c32a4ed7fd9e2ad21d615" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.i386.sh" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 8d63b437804b48672cc7b325bd3eb3a1ff525978b894c9b6e7c63db011aac295" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/5/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.i386.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 e910142a9bdc53757635db7f997f00e5415cc6dadea981aeec1e999489586ee2" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/7/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 13296dfe3559a3cb5664a8319e57153635ba867a3a72feb4b040ce833fc22914" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/6/i686"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.i386.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 e31a417ea73cefb3424496b07b19e188a5d079db40fc29bae0c8a24b2fb9d558" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2012/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/7/ppc64le"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64le.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 5fb71d38e54b0a6e8fc142f48e693de2dc54891edde59f65db61bf097766a3de" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/6/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/7/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/7/ppc64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 bc5a1ea39782df044cd069523d6534f72222855bbf99a98961858cdaee51d7c0" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/debian/8/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/i386"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/amd64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 f4c5e3b437e5129e89a5ca0d69036dcf0e6e4b21a0eef61b495ab63a0be2fe94" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/5/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 58bed7db8fe43a1e8441d9a2a5e46b9fe4ab7e932dd1f7f5e0dc53adc004704c" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/el/6/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 e30aac011f866a56f3542eaaa17cf18e40df6021e997e32fd3d1ae5b8f11e274" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/amd64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 6fc165d1fbc96f5ed5ffbfedb154e7ede4d6e87fccec3c80c0de5510527bd673" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2012/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/x86_64"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/aix/6.1/powerpc"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/6.1/chef-12.12.7+20160701150941-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/aix/7.1/powerpc"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/7.1/chef-12.12.7+20160701150941-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/sparc"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817" >> "$artifact_info_dir/artifact_info"

                      artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/sparc"
                      mkdir -p $artifact_info_dir
                      touch "$artifact_info_dir/artifact_info"
                      echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
                      echo "sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817" >> "$artifact_info_dir/artifact_info"


                    artifact_info_for_platform="$tmp_dir/artifact_info/$platform/$platform_version/$machine/artifact_info"

                    download_url=`awk '$1 == "url" { print $2 }' "$artifact_info_for_platform"`
                    sha256=`awk '$1 == "sha256" { print $2 }' "$artifact_info_for_platform"`


                    # fetch_package.sh
                    ############
                    # This section fetchs a package from $download_url and verifies its metadata.
                    #
                    # Inputs:
                    # $download_url:
                    # $tmp_dir:
                    # Optional Inputs:
                    # $cmdline_filename: Name of the package downloaded on local disk.
                    # $cmdline_dl_dir: Name of the directory downloaded package will be saved to on local disk.
                    #
                    # Outputs:
                    # $download_filename: Name of the downloaded file on local disk.
                    # $filetype: Type of the file downloaded.
                    ############

                    filename=`echo $download_url | sed -e 's/^.*\///'`
                    filetype=`echo $filename | sed -e 's/^.*\.//'`

                    # use either $tmp_dir, the provided directory (-d) or the provided filename (-f)
                    if test "x$cmdline_filename" != "x"; then
                      download_filename="$cmdline_filename"
                    elif test "x$cmdline_dl_dir" != "x"; then
                      download_filename="$cmdline_dl_dir/$filename"
                    else
                      download_filename="$tmp_dir/$filename"
                    fi

                    # ensure the parent directory where to download the installer always exists
                    download_dir=`dirname $download_filename`
                    (umask 077 && mkdir -p $download_dir) || exit 1

                    # check if we have that file locally available and if so verify the checksum
                    cached_file_available="false"
                    if test -f $download_filename; then
                      echo "$download_filename already exists, verifiying checksum..."
                      if do_checksum "$download_filename" "$sha256"; then
                        echo "checksum compare succeeded, using existing file!"
                        cached_file_available="true"
                      else
                        echo "checksum mismatch, downloading latest version of the file"
                      fi
                    fi

                    # download if no local version of the file available
                    if test "x$cached_file_available" != "xtrue"; then
                      do_download "$download_url"  "$download_filename"
                      do_checksum "$download_filename" "$sha256" || checksum_mismatch
                    fi

                    ############
                    # end of fetch_package.sh
                    ############


                    # install_package.sh
                    ############
                    # Installs a package and removed the temp directory.
                    #
                    # Inputs:
                    # $download_filename: Name of the file to be installed.
                    # $filetype: Type of the file to be installed.
                    # $version: The version requested. Used only for warning user if not set.
                    ############

                    if test "x$version" = "x"; then
                      echo
                      echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
                      echo
                      echo "You are installing an omnibus package without a version pin.  If you are installing"
                      echo "on production servers via an automated process this is DANGEROUS and you will"
                      echo "be upgraded without warning on new releases, even to new major releases."
                      echo "Letting the version float is only appropriate in desktop, test, development or"
                      echo "CI/CD environments."
                      echo
                      echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
                      echo
                    fi

                    install_file $filetype "$download_filename"

                    if test "x$tmp_dir" != "x"; then
                      rm -r "$tmp_dir"
                    fi

                    ############
                    # end of install_package.sh
                    ############

                    EOL
                    chmod +x /tmp/chef-installer.sh
                    sudo -E /tmp/chef-installer.sh)
                           bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           /bin/bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           el 6 x86_64
                           downloading http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.x86_64.rpm
                             to file /tmp/install.sh.957/chef-12.12.7+20160701150941-1.el6.x86_64.rpm
                           trying curl...
                           Comparing checksum with sha256sum...
                           Starting Chef Client, version 12.12.7
                           Installing chef 12.12.7+20160701150941
                           installing with rpm...
                           warning: /tmp/install.sh.957/chef-12.12.7+20160701150941-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
                           Waited 95/300s for instance <i-e739e248> to become ready.
                           Waited 95/300s for instance <i-473ae1e8> to become ready.
                           Preparing...                                                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                           Creating a new client identity for fips-integration-centos-6 using the validator key.
                           resolving cookbooks for run list: []
                           Synchronizing Cookbooks:
                           Installing Cookbook Gems:
                           Compiling Cookbooks...
                           [2016-07-01T15:48:42+00:00] WARN: Node fips-integration-centos-6 has an empty run list.
                           Converging 0 resources
                           Starting audit phase

                           Finished in 0.00031 seconds (files took 0.3915 seconds to load)
                           0 examples, 0 failures
                           Auditing complete

                           Running handlers:
                           Running handlers complete
                           Chef Client finished, 0/0 resources updated in 03 seconds
                           [2016-07-01T15:48:43+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json
                    D      Cleaning up local sandbox in /tmp/cheftest/fips-integration-centos-6-sandbox-20160701-12947-1s5uurn
                           Finished converging <fips-integration-centos-6> (0m13.45s).
                    D      [SSH] shutting previous connection root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                    D      [SSH] closing connection to root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                              1:chef                                                               (  1%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (  3%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (  6%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (  8%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        ( 10%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       ( 13%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      ( 15%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     ( 17%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    ( 19%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   ( 22%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  ( 24%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 ( 26%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                ( 28%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               ( 31%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              ( 33%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             ( 35%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            ( 38%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           ( 40%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          ( 42%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         ( 44%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        ( 47%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       ( 49%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      ( 51%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     ( 53%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    ( 56%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   ( 58%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  ( 60%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 ( 63%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                ( 65%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               ( 67%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              ( 69%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             ( 72%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            ( 74%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           ( 76%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          ( 78%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         ( 81%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        ( 83%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       ( 85%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      ( 88%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     ( 90%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    ( 92%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   ( 94%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  ( 97%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### ( 99%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                           Waited 100/300s for instance <i-e739e248> to become ready.
                           Waited 100/300s for instance <i-473ae1e8> to become ready.
                    D      Console output: ---
                    2016/07/01 15:48:29Z: EC2ConfigMonitorState: 0
                    2016/07/01 15:48:29Z: Windows sysprep configuration complete.
                    2016/07/01 15:48:32Z: AMI Origin Version: 2016.06.15
                    2016/07/01 15:48:32Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
                    2016/07/01 15:48:32Z: OS: Microsoft Windows NT 6.3.9600
                    2016/07/01 15:48:32Z: OsVersion: 6.3
                    2016/07/01 15:48:32Z: OsProductName: Windows Server 2012 R2 Standard
                    2016/07/01 15:48:32Z: OsBuildLabEx: 9600.18292.amd64fre.winblue_ltsb.160330-1744
                    2016/07/01 15:48:32Z: Language: en-US
                    2016/07/01 15:48:32Z: TimeZone: Coordinated Universal Time
                    2016/07/01 15:48:32Z: Offset: UTC 00:00:00
                    2016/07/01 15:48:32Z: EC2 Agent: Ec2Config service v3.17.1032
                    2016/07/01 15:48:35Z: Message: Waiting for meta-data accessibility...
                    2016/07/01 15:48:35Z: Message: Meta-data is now available.
                    2016/07/01 15:48:36Z: AMI-ID: ami-8d0acfed
                    2016/07/01 15:48:36Z: Instance-ID: i-473ae1e8
                    2016/07/01 15:48:37Z: Driver: AWS PV Network Device v7.3.2.0
                    2016/07/01 15:48:37Z: Driver: AWS PV Storage Host Adapter v7.3.2.0
                    2016/07/01 15:48:37Z: Ec2SetPassword: Enabled
                    2016/07/01 15:48:38Z: RDPCERTIFICATE-SUBJECTNAME: WIN-FP7MRPGAKVT
                    2016/07/01 15:48:38Z: RDPCERTIFICATE-THUMBPRINT: 8B8E9B58805BFC12496FD1749ECD48824BFA7F24
                    2016/07/01 15:48:41Z: Username: Administrator
                    2016/07/01 15:48:41Z: Password: <Password>
                    TJ2InLy1kVux2DEj6/kYCBLPbJcXMlXa2Y47wpO0GlB3jCzDn5fZpua5LdqPHCcmRk7JZa0v82+7t/e5JDUV42zX/2uV4jCpbNh3e4rEMipWmyr2o7FmsJIYrlIoVCc8Z/KXXL4VKLHO3NmH/Mz97CeAWeqdstOSd3bdEaLnx+BK0t3QaBWYpNbdoEK2CzqvBmBk0rsU2/ImRXT5eLrskgRzgpPWCneGe+7lTRHflfN5SKdMIvPnIKnZKtnF2aAZZphVexR/EIkFNqGPGlzjrr4IeW48kUrNzodMT6pmq5VJEj/btJBCQVNJfho8aM7B+Car4opnYHk3tetjndYfEA==
                    </Password>
                    2016/07/01 15:48:42Z: Message: Windows is Ready to use

                           Waited 0/300s for instance <i-473ae1e8> to fetch windows admin password.
                           Retrieved Windows password for instance <i-473ae1e8>.
                           EC2 instance <i-473ae1e8> ready.
                           /bin/sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                    D      [WinRM] opening remote shell on http://10.194.13.185:5985/wsman
                           Thank you for installing Chef!
                    D      [SSH] root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '
                    sudo_rm="sudo -E rm"
                    dirs="/tmp/kitchen/clients /tmp/kitchen/cookbooks /tmp/kitchen/data /tmp/kitchen/data_bags /tmp/kitchen/encrypted_data_bag_secret /tmp/kitchen/environments /tmp/kitchen/roles"
                    root_path="/tmp/kitchen"

                    $sudo_rm -rf $dirs
                    mkdir -p $root_path
                    ')
                           bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           Transferring files to <fips-unit-functional-centos-6>
                    D      TIMING: scp async upload (Kitchen::Transport::Ssh)
                    D      TIMING: scp async upload (Kitchen::Transport::Ssh) took (0m0.20s)
                    D      Transfer complete
                    D      Attempting to execute command - try 1 of 1.
                    D      [SSH] root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '
                    sudo -E /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json --chef-zero-port 8889
                    ')
                           bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                           Starting Chef Client, version 12.12.7
                           Creating a new client identity for fips-unit-functional-centos-6 using the validator key.
                           resolving cookbooks for run list: []
                           Synchronizing Cookbooks:
                           Installing Cookbook Gems:
                           Compiling Cookbooks...
                           [2016-07-01T15:48:50+00:00] WARN: Node fips-unit-functional-centos-6 has an empty run list.
                           Converging 0 resources
                           Starting audit phase
                           Waited 105/300s for instance <i-e739e248> to become ready.

                           Finished in 0.0003 seconds (files took 0.4111 seconds to load)
                           0 examples, 0 failures
                           Auditing complete

                           Running handlers:
                           Running handlers complete
                           Chef Client finished, 0/0 resources updated in 03 seconds
                           [2016-07-01T15:48:51+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json
                    D      Cleaning up local sandbox in /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160701-12947-1tbjgv7
                           Finished converging <fips-unit-functional-centos-6> (0m11.97s).
                    D      [SSH] shutting previous connection root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                    D      [SSH] closing connection to root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                           Waited 110/300s for instance <i-e739e248> to become ready.
                           Waited 115/300s for instance <i-e739e248> to become ready.
                    D      Console output: ---
                    2016/07/01 15:48:37Z: EC2ConfigMonitorState: 0
                    2016/07/01 15:48:37Z: Windows sysprep configuration complete.
                    2016/07/01 15:48:41Z: AMI Origin Version: 2016.06.15
                    2016/07/01 15:48:41Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
                    2016/07/01 15:48:41Z: OS: Microsoft Windows NT 6.3.9600
                    2016/07/01 15:48:41Z: OsVersion: 6.3
                    2016/07/01 15:48:41Z: OsProductName: Windows Server 2012 R2 Standard
                    2016/07/01 15:48:41Z: OsBuildLabEx: 9600.18292.amd64fre.winblue_ltsb.160330-1744
                    2016/07/01 15:48:41Z: Language: en-US
                    2016/07/01 15:48:41Z: TimeZone: Coordinated Universal Time
                    2016/07/01 15:48:41Z: Offset: UTC 00:00:00
                    2016/07/01 15:48:41Z: EC2 Agent: Ec2Config service v3.17.1032
                    2016/07/01 15:48:44Z: Message: Waiting for meta-data accessibility...
                    2016/07/01 15:48:44Z: Message: Meta-data is now available.
                    2016/07/01 15:48:45Z: AMI-ID: ami-8d0acfed
                    2016/07/01 15:48:45Z: Instance-ID: i-e739e248
                    2016/07/01 15:48:48Z: Driver: AWS PV Network Device v7.3.2.0
                    2016/07/01 15:48:48Z: Driver: AWS PV Storage Host Adapter v7.3.2.0
                    2016/07/01 15:48:48Z: Ec2SetPassword: Enabled
                    2016/07/01 15:48:49Z: RDPCERTIFICATE-SUBJECTNAME: WIN-KOHDF65C0IR
                    2016/07/01 15:48:49Z: RDPCERTIFICATE-THUMBPRINT: FDF1199C125F40BA56587159A63F628DADA5F29A
                    2016/07/01 15:48:52Z: Username: Administrator
                    2016/07/01 15:48:52Z: Password: <Password>
                    iLIQGOB2sfpK6zZkbtMr2ozEqMSsUHSkluv+aNg9GVkKUBwFSfEIqWs4hshNbJNBrQlDfKb7CPzQySxyDhzPpjV3K+1MXxAe80g1UQekNG+l+NJJJHPpdXCJNzoMs8j28Qg1DleXVQYaAvUDFh39oAyHIm2ZVecyW/AqhPcp2FUod890fNOUosWaWmUCOG86Eb6nD0xmWtoOVg9Obkk/Ko66uQBsfjaUYOXuZMsOvYKX4hKSxGApxXE3PqfOFGPX21xhUr5K0fPTgl3vx0mX9I04vWr2NzZ12QL5n6Qd/hmZi7085HWL77EBlAgC9perQ+Xs9vE5WsGYnN1i2q59PA==
                    </Password>
                    2016/07/01 15:48:54Z: Message: Windows is Ready to use

                           Waited 0/300s for instance <i-e739e248> to fetch windows admin password.
                           Retrieved Windows password for instance <i-e739e248>.
                           EC2 instance <i-e739e248> ready.
                    D      [WinRM] opening remote shell on http://10.194.9.174:5985/wsman
                    D      [WinRM] remote shell F4B473F6-BB8A-48F3-B6E7-30914AE072CB is open on http://10.194.13.185:5985/wsman
                    D      [WinRM] negotiate::http://10.194.13.185:5985/wsman<{:user=>"administrator", :pass=>"ZcREED2xrG", :elevated_username=>"administrator", :elevated_password=>"ZcREED2xrG", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
                    ')
                    D      [WinRM] remote shell 607C7234-6E59-49B0-9768-793CA8BB26CE is open on http://10.194.9.174:5985/wsman
                    D      [WinRM] negotiate::http://10.194.9.174:5985/wsman<{:user=>"administrator", :pass=>"TaBhhW.%e!", :elevated_username=>"administrator", :elevated_password=>"TaBhhW.%e!", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
                    ')
                           [WinRM] Established

                    D      [WinRM] reusing existing connection negotiate::http://10.194.9.174:5985/wsman<{:user=>"administrator", :pass=>"TaBhhW.%e!", :elevated_username=>"administrator", :elevated_password=>"TaBhhW.%e!", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                    D      [WinRM] negotiate::http://10.194.9.174:5985/wsman<{:user=>"administrator", :pass=>"TaBhhW.%e!", :elevated_username=>"administrator", :elevated_password=>"TaBhhW.%e!", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)


                               Directory: C:\chef\ohai\hints


                           Mode                LastWriteTime     Length Name
                           ----                -------------     ------ ----
                           -a---          7/1/2016   3:49 PM          0 ec2.json


                    D      ec2:create '10.194.9.174'
                           Finished creating <fips-integration-windows-2012r2> (2m32.38s).
                    -----> Converging <fips-integration-windows-2012r2>...
                           Preparing files for transfer
                    D      Creating local sandbox in /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160701-12947-1t0h8b1
                           Preparing dna.json
                    D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                           Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                           Removing non-cookbook files before transfer
                           Preparing validation.pem
                    D      Using a dummy validation.pem
                           Preparing client.rb
                    D      Creating client.rb from {:node_name=>"fips-integration-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                    D      [WinRM] reusing existing connection negotiate::http://10.194.9.174:5985/wsman<{:user=>"administrator", :pass=>"TaBhhW.%e!", :elevated_username=>"administrator", :elevated_password=>"TaBhhW.%e!", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                    D      [WinRM] negotiate::http://10.194.9.174:5985/wsman<{:user=>"administrator", :pass=>"TaBhhW.%e!", :elevated_username=>"administrator", :elevated_password=>"TaBhhW.%e!", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
                    function Get-PlatformVersion {
                      switch -regex ((get-wmiobject win32_operatingsystem).version) {
                        '10\.0\.\d+' {$platform_version = '2012r2'}
                        '6\.3\.\d+'  {$platform_version = '2012r2'}
                        '6\.2\.\d+'  {$platform_version = '2012'}
                        '6\.1\.\d+'  {$platform_version = '2008r2'}
                        '6\.0\.\d+'  {$platform_version = '2008'}
                      }
                      return $platform_version
                    }

                    function Get-PlatformArchitecture {
                      if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                        $architecture = 'x86_64'
                      } else {
                        $architecture = 'i386'
                      }
                      return $architecture
                    }

                    function New-Uri {
                      param ($baseuri, $newuri)

                      try {
                      new-object System.Uri $baseuri, $newuri
                      }
                      catch [System.Management.Automation.MethodInvocationException]{
                        Write-Error "$($_.exception.message)"
                        throw $_.exception
                      }
                    }

                    function Get-WebContent {
                      param ($uri, $filepath)
                      $proxy = New-Object -TypeName System.Net.WebProxy
                      $wc = new-object System.Net.WebClient
                      $proxy.Address = $env:http_proxy
                      $wc.Proxy = $proxy

                      try {
                        if ([string]::IsNullOrEmpty($filepath)) {
                          $wc.downloadstring($uri)
                        }
                        else {
                          $wc.downloadfile($uri, $filepath)
                        }
                      }
                      catch {
                        $exception = $_.Exception
                        Write-Host "There was an error: "
                        do {
                          Write-Host "`t$($exception.message)"
                          $exception = $exception.innerexception
                        } while ($exception)
                        throw "Failed to download from $uri."
                      }
                    }

                    function Test-ProjectPackage {
                      [cmdletbinding()]
                      param ($Path, $Algorithm = 'SHA256', $Hash)

                      if (-not (get-command get-filehash))   {
                        function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                        function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                        function Get-FileHash ($Path, $Algorithm) {
                          $Path = (resolve-path $path).providerpath
                          $hash = @{Algorithm = $Algorithm; Path = $Path}
                          use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                            use ($in = (gi $path).OpenRead()) {
                              $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                            }
                          }
                          new-object PSObject -Property $hash
                        }
                      }
                      Write-Verbose "Testing the $Algorithm hash for $path."
                      $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
                      Write-Verbose "`tDesired Hash - '$hash'"
                      Write-Verbose "`tActual Hash  - '$ActualHash'"
                      $Valid = $ActualHash -eq $Hash
                      if (-not $Valid) {
                        Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
                      }
                      return $Valid
                    }

                    function Get-ProjectMetadata {
                      <#
                        .SYNOPSIS
                        Get metadata for a Chef Software, Inc. project
                        .DESCRIPTION
                        Get metadata for project
                        .EXAMPLE
                        iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                        Gets the download url and SHA256 checksum for the latest stable release of Chef.
                        .EXAMPLE
                        iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                        Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
                      #>
                      [cmdletbinding()]
                      param (
                        # Base url to retrieve metadata from.
                        [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                        [string]
                        # Project to install
                        [string]
                        $project = 'chef',
                        # Version of the application to install
                        # This parameter is optional, if not supplied it will provide the latest version,
                        # and if an iteration number is not specified, it will grab the latest available iteration.
                        # Partial version numbers are also acceptable (using v=11
                        # will grab the latest 11.x client which matches the other flags).
                        [string]
                        $version,
                        # Release channel to install from
                        $channel = 'unstable',
                        # The following legacy switches are just aliases for the current channel
                        [switch]
                        $prerelease,
                        [switch]
                        $nightlies,
                        [validateset('auto', 'i386', 'x86_64')]
                        [string]
                        $architecture = 'auto'
                      )

                      # PowerShell is only on Windows ATM
                      $platform = 'windows'
                      Write-Verbose "Platform: $platform"

                      $platform_version = Get-PlatformVersion
                      Write-Verbose "Platform Version: $platform_version"

                      if ($architecture -eq 'auto') {
                        $architecture = Get-PlatformArchitecture
                      }

                      Write-Verbose "Architecture: $architecture"
                      Write-Verbose "Project: $project"


                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 89a564bafc4b22db5f5539fe1925587c6bf2334f0c344e0c13264f52ae537b0a" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.9/chef-12.12.7+20160701150941-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.10/chef-12.12.7+20160701150941-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.11/chef-12.12.7+20160701150941-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ios_xr/6/chef-12.12.7+20160701150941-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 96689d0525260209d68e4991db7144b0aa31a6f7628c9e4e5f23c6f150025fb0" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/nexus/7/chef-12.12.7+20160701150941-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 f5c620dc0166571903f28990240a5bbb1123bd6e8433a8d8d4aa9b2ba8587bbb" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 6d3b80e324377a5a80889d51ec5b0d0730d7503eb14c32a4ed7fd9e2ad21d615" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 8d63b437804b48672cc7b325bd3eb3a1ff525978b894c9b6e7c63db011aac295" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 e910142a9bdc53757635db7f997f00e5415cc6dadea981aeec1e999489586ee2" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 13296dfe3559a3cb5664a8319e57153635ba867a3a72feb4b040ce833fc22914" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 e31a417ea73cefb3424496b07b19e188a5d079db40fc29bae0c8a24b2fb9d558" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 5fb71d38e54b0a6e8fc142f48e693de2dc54891edde59f65db61bf097766a3de" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 bc5a1ea39782df044cd069523d6534f72222855bbf99a98961858cdaee51d7c0" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 f4c5e3b437e5129e89a5ca0d69036dcf0e6e4b21a0eef61b495ab63a0be2fe94" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 58bed7db8fe43a1e8441d9a2a5e46b9fe4ab7e932dd1f7f5e0dc53adc004704c" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 e30aac011f866a56f3542eaaa17cf18e40df6021e997e32fd3d1ae5b8f11e274" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 6fc165d1fbc96f5ed5ffbfedb154e7ede4d6e87fccec3c80c0de5510527bd673" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/6.1/chef-12.12.7+20160701150941-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/7.1/chef-12.12.7+20160701150941-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817" | out-file "$artifact_info_dir/artifact_info" -Append


                      $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

                      $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                        foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

                      Write-Verbose "Project details: "
                      foreach ($key in $package_metadata.keys) {
                        Write-Verbose "`t$key = $($package_metadata[$key])"
                      }
                      $package_metadata
                    }

                    function Install-Project {
                      <#
                        .SYNOPSIS
                        Install a Chef Software, Inc. product
                        .DESCRIPTION
                        Install a Chef Software, Inc. product
                        .EXAMPLE
                        iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                        Installs the latest stable version of Chef.
                        .EXAMPLE
                        iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                        Installs the latest integration build of the Chef Development Kit
                      #>
                      [cmdletbinding(SupportsShouldProcess=$true)]
                      param (
                        # Project to install
                        [string]
                        $project = 'chef',
                        # Release channel to install from
                        [validateset('current', 'stable', 'unstable')]
                        [string]
                        $channel = 'stable',
                        # Version of the application to install
                        # This parameter is optional, if not supplied it will provide the latest version,
                        # and if an iteration number is not specified, it will grab the latest available iteration.
                        # Partial version numbers are also acceptable (using v=11
                        # will grab the latest 11.x client which matches the other flags).
                        [string]
                        $version,
                        # Full path for the downloaded installer.
                        [string]
                        $filename,
                        # Full path to the location to download the installer
                        [string]
                        $download_directory = $env:temp,
                        # The following legacy switches are just aliases for the current channel
                        [switch]
                        $prerelease,
                        [switch]
                        $nightlies,
                        [validateset('auto', 'i386', 'x86_64')]
                        [string]
                        $architecture = 'auto'
                      )

                      $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

                      if (-not [string]::IsNullOrEmpty($filename)) {
                        $download_directory = split-path $filename
                        $filename = split-path $filename -leaf
                        if ([string]::IsNullOrEmpty($download_directory)) {
                          $download_directory = $pwd
                        }
                      }
                      else {
                        $filename = ($package_metadata.url -split '/')[-1]
                      }
                      Write-Verbose "Download directory: $download_directory"
                      Write-Verbose "Filename: $filename"

                      if (-not (test-path $download_directory)) {
                        mkdir $download_directory
                      }
                      $download_directory = (resolve-path $download_directory).providerpath
                      $download_destination = join-path $download_directory $filename

                      if ((test-path $download_destination) -and
                        (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                        Write-Verbose "Found existing valid installer at $download_destination."
                      }
                      else {
                        if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                          Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                          Get-WebContent $package_metadata.url -filepath $download_destination
                        }
                      }

                      if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                        if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                          Write-Host "Installing $project from $download_destination"
                          $installingProject = $True
                          $installAttempts = 0
                          while ($installingProject) {
                            $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                            $p.WaitForExit()
                            if ($p.ExitCode -eq 1618) {
                              Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                              continue
                            } elseif ($p.ExitCode -ne 0) {
                              throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                            }
                            $installingProject = $False
                          }
                        }
                        else {
                          throw "Failed to validate the downloaded installer for $project."
                        }
                      }
                    }
                    set-alias install -value Install-Project
                    export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

                    }

                    install -project chef -version 12.12.7+20160701150941 -channel unstable
                    )
                    D      creating hash for file $env:TEMP/fips-integration-windows-2012r2-long_script.ps1
                    D      Running check_files.ps1
                    D      @{
                    D        "f819689a04a73f68cedca447fe8bbc14" = @{
                    D          "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1";
                    D          "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                    D          "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                    D        }
                    D      }
                           [WinRM] Established

                    D      [WinRM] reusing existing connection negotiate::http://10.194.13.185:5985/wsman<{:user=>"administrator", :pass=>"ZcREED2xrG", :elevated_username=>"administrator", :elevated_password=>"ZcREED2xrG", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                    D      [WinRM] negotiate::http://10.194.13.185:5985/wsman<{:user=>"administrator", :pass=>"ZcREED2xrG", :elevated_username=>"administrator", :elevated_password=>"ZcREED2xrG", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)


                               Directory: C:\chef\ohai\hints


                           Mode                LastWriteTime     Length Name
                           ----                -------------     ------ ----
                           -a---          7/1/2016   3:49 PM          0 ec2.json


                    D      ec2:create '10.194.13.185'
                           Finished creating <fips-unit-functional-windows-2012r2> (2m33.39s).
                    -----> Converging <fips-unit-functional-windows-2012r2>...
                           Preparing files for transfer
                    D      Creating local sandbox in /tmp/cheftest/fips-unit-functional-windows-2012r2-sandbox-20160701-12947-1uk9hkk
                           Preparing dna.json
                    D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                           Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                           Removing non-cookbook files before transfer
                           Preparing validation.pem
                    D      Using a dummy validation.pem
                           Preparing client.rb
                    D      Creating client.rb from {:node_name=>"fips-unit-functional-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                    D      [WinRM] reusing existing connection negotiate::http://10.194.13.185:5985/wsman<{:user=>"administrator", :pass=>"ZcREED2xrG", :elevated_username=>"administrator", :elevated_password=>"ZcREED2xrG", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                    D      [WinRM] negotiate::http://10.194.13.185:5985/wsman<{:user=>"administrator", :pass=>"ZcREED2xrG", :elevated_username=>"administrator", :elevated_password=>"ZcREED2xrG", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
                    function Get-PlatformVersion {
                      switch -regex ((get-wmiobject win32_operatingsystem).version) {
                        '10\.0\.\d+' {$platform_version = '2012r2'}
                        '6\.3\.\d+'  {$platform_version = '2012r2'}
                        '6\.2\.\d+'  {$platform_version = '2012'}
                        '6\.1\.\d+'  {$platform_version = '2008r2'}
                        '6\.0\.\d+'  {$platform_version = '2008'}
                      }
                      return $platform_version
                    }

                    function Get-PlatformArchitecture {
                      if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                        $architecture = 'x86_64'
                      } else {
                        $architecture = 'i386'
                      }
                      return $architecture
                    }

                    function New-Uri {
                      param ($baseuri, $newuri)

                      try {
                      new-object System.Uri $baseuri, $newuri
                      }
                      catch [System.Management.Automation.MethodInvocationException]{
                        Write-Error "$($_.exception.message)"
                        throw $_.exception
                      }
                    }

                    function Get-WebContent {
                      param ($uri, $filepath)
                      $proxy = New-Object -TypeName System.Net.WebProxy
                      $wc = new-object System.Net.WebClient
                      $proxy.Address = $env:http_proxy
                      $wc.Proxy = $proxy

                      try {
                        if ([string]::IsNullOrEmpty($filepath)) {
                          $wc.downloadstring($uri)
                        }
                        else {
                          $wc.downloadfile($uri, $filepath)
                        }
                      }
                      catch {
                        $exception = $_.Exception
                        Write-Host "There was an error: "
                        do {
                          Write-Host "`t$($exception.message)"
                          $exception = $exception.innerexception
                        } while ($exception)
                        throw "Failed to download from $uri."
                      }
                    }

                    function Test-ProjectPackage {
                      [cmdletbinding()]
                      param ($Path, $Algorithm = 'SHA256', $Hash)

                      if (-not (get-command get-filehash))   {
                        function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                        function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                        function Get-FileHash ($Path, $Algorithm) {
                          $Path = (resolve-path $path).providerpath
                          $hash = @{Algorithm = $Algorithm; Path = $Path}
                          use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                            use ($in = (gi $path).OpenRead()) {
                              $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                            }
                          }
                          new-object PSObject -Property $hash
                        }
                      }
                      Write-Verbose "Testing the $Algorithm hash for $path."
                      $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
                      Write-Verbose "`tDesired Hash - '$hash'"
                      Write-Verbose "`tActual Hash  - '$ActualHash'"
                      $Valid = $ActualHash -eq $Hash
                      if (-not $Valid) {
                        Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
                      }
                      return $Valid
                    }

                    function Get-ProjectMetadata {
                      <#
                        .SYNOPSIS
                        Get metadata for a Chef Software, Inc. project
                        .DESCRIPTION
                        Get metadata for project
                        .EXAMPLE
                        iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                        Gets the download url and SHA256 checksum for the latest stable release of Chef.
                        .EXAMPLE
                        iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                        Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
                      #>
                      [cmdletbinding()]
                      param (
                        # Base url to retrieve metadata from.
                        [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                        [string]
                        # Project to install
                        [string]
                        $project = 'chef',
                        # Version of the application to install
                        # This parameter is optional, if not supplied it will provide the latest version,
                        # and if an iteration number is not specified, it will grab the latest available iteration.
                        # Partial version numbers are also acceptable (using v=11
                        # will grab the latest 11.x client which matches the other flags).
                        [string]
                        $version,
                        # Release channel to install from
                        $channel = 'unstable',
                        # The following legacy switches are just aliases for the current channel
                        [switch]
                        $prerelease,
                        [switch]
                        $nightlies,
                        [validateset('auto', 'i386', 'x86_64')]
                        [string]
                        $architecture = 'auto'
                      )

                      # PowerShell is only on Windows ATM
                      $platform = 'windows'
                      Write-Verbose "Platform: $platform"

                      $platform_version = Get-PlatformVersion
                      Write-Verbose "Platform Version: $platform_version"

                      if ($architecture -eq 'auto') {
                        $architecture = Get-PlatformArchitecture
                      }

                      Write-Verbose "Architecture: $architecture"
                      Write-Verbose "Project: $project"


                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 89a564bafc4b22db5f5539fe1925587c6bf2334f0c344e0c13264f52ae537b0a" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.9/chef-12.12.7+20160701150941-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.10/chef-12.12.7+20160701150941-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.11/chef-12.12.7+20160701150941-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ios_xr/6/chef-12.12.7+20160701150941-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 96689d0525260209d68e4991db7144b0aa31a6f7628c9e4e5f23c6f150025fb0" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/nexus/7/chef-12.12.7+20160701150941-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 f5c620dc0166571903f28990240a5bbb1123bd6e8433a8d8d4aa9b2ba8587bbb" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 6d3b80e324377a5a80889d51ec5b0d0730d7503eb14c32a4ed7fd9e2ad21d615" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 8d63b437804b48672cc7b325bd3eb3a1ff525978b894c9b6e7c63db011aac295" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 e910142a9bdc53757635db7f997f00e5415cc6dadea981aeec1e999489586ee2" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 13296dfe3559a3cb5664a8319e57153635ba867a3a72feb4b040ce833fc22914" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 e31a417ea73cefb3424496b07b19e188a5d079db40fc29bae0c8a24b2fb9d558" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 5fb71d38e54b0a6e8fc142f48e693de2dc54891edde59f65db61bf097766a3de" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 bc5a1ea39782df044cd069523d6534f72222855bbf99a98961858cdaee51d7c0" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 f4c5e3b437e5129e89a5ca0d69036dcf0e6e4b21a0eef61b495ab63a0be2fe94" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 58bed7db8fe43a1e8441d9a2a5e46b9fe4ab7e932dd1f7f5e0dc53adc004704c" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 e30aac011f866a56f3542eaaa17cf18e40df6021e997e32fd3d1ae5b8f11e274" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 6fc165d1fbc96f5ed5ffbfedb154e7ede4d6e87fccec3c80c0de5510527bd673" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/6.1/chef-12.12.7+20160701150941-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/7.1/chef-12.12.7+20160701150941-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817" | out-file "$artifact_info_dir/artifact_info" -Append

                        $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                        New-Item -ItemType directory -Path $artifact_info_dir -force
                        New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                        "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                        "sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817" | out-file "$artifact_info_dir/artifact_info" -Append


                      $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

                      $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                        foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

                      Write-Verbose "Project details: "
                      foreach ($key in $package_metadata.keys) {
                        Write-Verbose "`t$key = $($package_metadata[$key])"
                      }
                      $package_metadata
                    }

                    function Install-Project {
                      <#
                        .SYNOPSIS
                        Install a Chef Software, Inc. product
                        .DESCRIPTION
                        Install a Chef Software, Inc. product
                        .EXAMPLE
                        iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                        Installs the latest stable version of Chef.
                        .EXAMPLE
                        iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                        Installs the latest integration build of the Chef Development Kit
                      #>
                      [cmdletbinding(SupportsShouldProcess=$true)]
                      param (
                        # Project to install
                        [string]
                        $project = 'chef',
                        # Release channel to install from
                        [validateset('current', 'stable', 'unstable')]
                        [string]
                        $channel = 'stable',
                        # Version of the application to install
                        # This parameter is optional, if not supplied it will provide the latest version,
                        # and if an iteration number is not specified, it will grab the latest available iteration.
                        # Partial version numbers are also acceptable (using v=11
                        # will grab the latest 11.x client which matches the other flags).
                        [string]
                        $version,
                        # Full path for the downloaded installer.
                        [string]
                        $filename,
                        # Full path to the location to download the installer
                        [string]
                        $download_directory = $env:temp,
                        # The following legacy switches are just aliases for the current channel
                        [switch]
                        $prerelease,
                        [switch]
                        $nightlies,
                        [validateset('auto', 'i386', 'x86_64')]
                        [string]
                        $architecture = 'auto'
                      )

                      $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

                      if (-not [string]::IsNullOrEmpty($filename)) {
                        $download_directory = split-path $filename
                        $filename = split-path $filename -leaf
                        if ([string]::IsNullOrEmpty($download_directory)) {
                          $download_directory = $pwd
                        }
                      }
                      else {
                        $filename = ($package_metadata.url -split '/')[-1]
                      }
                      Write-Verbose "Download directory: $download_directory"
                      Write-Verbose "Filename: $filename"

                      if (-not (test-path $download_directory)) {
                        mkdir $download_directory
                      }
                      $download_directory = (resolve-path $download_directory).providerpath
                      $download_destination = join-path $download_directory $filename

                      if ((test-path $download_destination) -and
                        (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                        Write-Verbose "Found existing valid installer at $download_destination."
                      }
                      else {
                        if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                          Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                          Get-WebContent $package_metadata.url -filepath $download_destination
                        }
                      }

                      if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                        if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                          Write-Host "Installing $project from $download_destination"
                          $installingProject = $True
                          $installAttempts = 0
                          while ($installingProject) {
                            $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                            $p.WaitForExit()
                            if ($p.ExitCode -eq 1618) {
                              Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                              continue
                            } elseif ($p.ExitCode -ne 0) {
                              throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                            }
                            $installingProject = $False
                          }
                        }
                        else {
                          throw "Failed to validate the downloaded installer for $project."
                        }
                      }
                    }
                    set-alias install -value Install-Project
                    export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

                    }

                    install -project chef -version 12.12.7+20160701150941 -channel unstable
                    )
                    D      creating hash for file $env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
                    D      Running check_files.ps1
                    D      @{
                    D        "f819689a04a73f68cedca447fe8bbc14" = @{
                    D          "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                    D          "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                    D          "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
                    D        }
                    D      }
                    D      [WinRM] opening new shell since the current one failed
                    D      [WinRM] opening remote shell on http://10.194.9.174:5985/wsman
                    D      [WinRM] remote shell 535E04F8-6DEE-47AB-A56F-BD1B59E9E2D4 is open on http://10.194.9.174:5985/wsman
                    D      [WinRM] opening new shell since the current one failed
                    D      [WinRM] opening remote shell on http://10.194.13.185:5985/wsman
                    D      [WinRM] remote shell 8404D27A-7C12-43A6-A11F-47788FAC98A5 is open on http://10.194.13.185:5985/wsman
                    D      Parsing CSV Response
                    D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
                    "False","f819689a04a73f68cedca447fe8bbc14",,"True","False","False"

                    D      Uploading /tmp/cheftest/kitchen-long-script20160701-12947-1vdoz5l/fips-integration-windows-2012r2-long_script.ps1 to encoded tmpfile $env:TEMP\b64-f819689a04a73f68cedca447fe8bbc14.txt
                    D      Finished uploading /tmp/cheftest/kitchen-long-script20160701-12947-1vdoz5l/fips-integration-windows-2012r2-long_script.ps1 to encoded tmpfile $env:TEMP\b64-f819689a04a73f68cedca447fe8bbc14.txt (40.316 KB over 6 chunks) in (0m0.78s)
                    D      Running decode_files.ps1
                    D      @{
                    D        "$env:TEMP\b64-f819689a04a73f68cedca447fe8bbc14.txt" = @{
                    D          "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                    D        }
                    D      }
                    D      Cleaning up local sandbox in /tmp/cheftest/fips-unit-functional-windows-2012r2-sandbox-20160701-12947-1uk9hkk
                    D      Parsing CSV Response
                    D      "src_md5","tmpzip","verifies","tmpfile","dst_md5","dst"
                    "f819689a04a73f68cedca447fe8bbc14",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-f819689a04a73f68cedca447fe8bbc14.txt","f819689a04a73f68cedca447fe8bbc14","C:\Users\ADMINI~1\AppData\Local\Temp/fips-integration-windows-2012r2-long_script.ps1"

                    D      Uploaded 1 items dirty_check: (0m2.50s) stream_files: (0m0.78s) decode: (0m1.33s)

                           ModuleType Version    Name                                ExportedCommands
                           ---------- -------    ----                                ----------------
                           Script     0.0        Omnitruck                           {Get-ProjectMetada...
                           Installing chef from C:\Users\ADMINI~1\AppData\Local\Temp\chef-client-12.12.7+20160701150941-1-x64.msi
                    D      [WinRM] retrying receive request after timeout


                    D      [WinRM] negotiate::http://10.194.9.174:5985/wsman<{:user=>"administrator", :pass=>"TaBhhW.%e!", :elevated_username=>"administrator", :elevated_password=>"TaBhhW.%e!", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($dirs = @("$env:TEMP\kitchen\clients", "$env:TEMP\kitchen\cookbooks", "$env:TEMP\kitchen\data", "$env:TEMP\kitchen\data_bags", "$env:TEMP\kitchen\encrypted_data_bag_secret", "$env:TEMP\kitchen\environments", "$env:TEMP\kitchen\roles")
                    $root_path = "$env:TEMP\kitchen"

                    Function Delete-AllDirs($dirs) {
                      $dirs | ForEach-Object {
                        if (Test-Path ($path = Unresolve-Path $_)) { Remove-Item $path -Recurse -Force }
                      }
                    }

                    Function Unresolve-Path($p) {
                      if ($p -eq $null) { return $null }
                      else { return $ExecutionContext.SessionState.Path.GetUnresolvedProviderPathFromPSPath($p) }
                    }

                    Function Make-RootPath($p) {
                      $p = Unresolve-Path $p
                      if (-Not (Test-Path $p)) { New-Item $p -ItemType directory | Out-Null }
                    }

                    Delete-AllDirs $dirs
                    Make-RootPath $root_path
                    )
                           Transferring files to <fips-integration-windows-2012r2>
                    D      creating hash for file $env:TEMP\kitchen
                    D      creating hash for file $env:TEMP\kitchen
                    D      creating hash for directory $env:TEMP\kitchen
                    D      Populating files
                    D      === All files added.
                    D      creating hash for file $env:TEMP\kitchen
                    D      creating hash for directory $env:TEMP\kitchen
                    D      Populating files
                    D      +++ Adding fips/metadata.rb
                    D      === All files added.
                    D      Running check_files.ps1
                    D      @{
                    D        "f36538b1f10bf80532dc432fbec25a65" = @{
                    D          "target" = "$env:TEMP\kitchen";
                    D          "src_basename" = "dna.json";
                    D          "dst" = "$env:TEMP\kitchen"
                    D        };
                    D        "608ae6e6474ca88bdec913156a101881" = @{
                    D          "target" = "$env:TEMP\kitchen";
                    D          "src_basename" = "client.rb";
                    D          "dst" = "$env:TEMP\kitchen"
                    D        };
                    D        "76cdb2bad9582d23c1f6f4d868218d6c" = @{
                    D          "target" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip";
                    D          "src_basename" = "cache";
                    D          "dst" = "$env:TEMP\kitchen\cache"
                    D        };
                    D        "49abb94825cb80b9a9cd59e5f76daf4a" = @{
                    D          "target" = "$env:TEMP\kitchen";
                    D          "src_basename" = "validation.pem";
                    D          "dst" = "$env:TEMP\kitchen"
                    D        };
                    D        "33968442c0ef69a92763825b33850e28" = @{
                    D          "target" = "$env:TEMP\winrm-upload\tmpzip-33968442c0ef69a92763825b33850e28.zip";
                    D          "src_basename" = "cookbooks";
                    D          "dst" = "$env:TEMP\kitchen\cookbooks"
                    D        }
                    D      }
                    D      Parsing CSV Response
                    D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
                    "False","33968442c0ef69a92763825b33850e28",,"True","False","False"
                    "False","76cdb2bad9582d23c1f6f4d868218d6c",,"True","False","False"
                    "False","f36538b1f10bf80532dc432fbec25a65",,"True","False","True"
                    "False","608ae6e6474ca88bdec913156a101881",,"True","False","True"
                    "False","49abb94825cb80b9a9cd59e5f76daf4a",,"True","False","True"

                    D      Uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160701-12947-1t0h8b1/dna.json to encoded tmpfile $env:TEMP\b64-f36538b1f10bf80532dc432fbec25a65.txt
                    D      Finished uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160701-12947-1t0h8b1/dna.json to encoded tmpfile $env:TEMP\b64-f36538b1f10bf80532dc432fbec25a65.txt (0.084 KB over 1 chunks) in (0m0.07s)
                    D      Uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160701-12947-1t0h8b1/client.rb to encoded tmpfile $env:TEMP\b64-608ae6e6474ca88bdec913156a101881.txt
                    D      Finished uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160701-12947-1t0h8b1/client.rb to encoded tmpfile $env:TEMP\b64-608ae6e6474ca88bdec913156a101881.txt (1.116 KB over 1 chunks) in (0m0.06s)
                    D      Uploading /tmp/cheftest/tmpzip-20160701-12947-12dxsy5.zip to encoded tmpfile $env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt
                    D      Finished uploading /tmp/cheftest/tmpzip-20160701-12947-12dxsy5.zip to encoded tmpfile $env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt (0.028 KB over 1 chunks) in (0m0.07s)
                    D      Uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160701-12947-1t0h8b1/validation.pem to encoded tmpfile $env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt
                    D      Finished uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160701-12947-1t0h8b1/validation.pem to encoded tmpfile $env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt (2.236 KB over 1 chunks) in (0m0.17s)
                    D      Uploading /tmp/cheftest/tmpzip-20160701-12947-smxcvg.zip to encoded tmpfile $env:TEMP\b64-33968442c0ef69a92763825b33850e28.txt
                    D      Finished uploading /tmp/cheftest/tmpzip-20160701-12947-smxcvg.zip to encoded tmpfile $env:TEMP\b64-33968442c0ef69a92763825b33850e28.txt (0.192 KB over 1 chunks) in (0m0.06s)
                    D      Running decode_files.ps1
                    D      @{
                    D        "$env:TEMP\b64-f36538b1f10bf80532dc432fbec25a65.txt" = @{
                    D          "dst" = "$env:TEMP\kitchen/dna.json"
                    D        };
                    D        "$env:TEMP\b64-608ae6e6474ca88bdec913156a101881.txt" = @{
                    D          "dst" = "$env:TEMP\kitchen/client.rb"
                    D        };
                    D        "$env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt" = @{
                    D          "dst" = "$env:TEMP\kitchen\cache";
                    D          "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip"
                    D        };
                    D        "$env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt" = @{
                    D          "dst" = "$env:TEMP\kitchen/validation.pem"
                    D        };
                    D        "$env:TEMP\b64-33968442c0ef69a92763825b33850e28.txt" = @{
                    D          "dst" = "$env:TEMP\kitchen\cookbooks";
                    D          "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-33968442c0ef69a92763825b33850e28.zip"
                    D        }
                    D      }
                    D      Parsing CSV Response
                    D      "src_md5","tmpzip","verifies","tmpfile","dst_md5","dst"
                    "608ae6e6474ca88bdec913156a101881",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-608ae6e6474ca88bdec913156a101881.txt","608ae6e6474ca88bdec913156a101881","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/client.rb"
                    "76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip","True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt","76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache"
                    "f36538b1f10bf80532dc432fbec25a65",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-f36538b1f10bf80532dc432fbec25a65.txt","f36538b1f10bf80532dc432fbec25a65","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/dna.json"
                    "33968442c0ef69a92763825b33850e28","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-33968442c0ef69a92763825b33850e28.zip","True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-33968442c0ef69a92763825b33850e28.txt","33968442c0ef69a92763825b33850e28","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cookbooks"
                    "49abb94825cb80b9a9cd59e5f76daf4a",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt","49abb94825cb80b9a9cd59e5f76daf4a","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/validation.pem"

                    D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160701-12947-12dxsy5.zip
                    D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160701-12947-smxcvg.zip
                    D      Uploaded 5 items dirty_check: (0m1.00s) stream_files: (0m0.44s) decode: (0m1.92s)
                    D      Transfer complete
                    D      Attempting to execute command - try 1 of 1.
                    D      [WinRM] negotiate::http://10.194.9.174:5985/wsman<{:user=>"administrator", :pass=>"TaBhhW.%e!", :elevated_username=>"administrator", :elevated_password=>"TaBhhW.%e!", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($env:PATH = [System.Environment]::GetEnvironmentVariable("PATH","Machine")

                    & $env:systemdrive\opscode\chef\bin\chef-client.bat --local-mode --config $env:TEMP\kitchen\client.rb --log_level auto --force-formatter --no-color --json-attributes $env:TEMP\kitchen\dna.json --chef-zero-port 8889 ; exit $LastExitCode)
                           Starting Chef Client, version 12.12.7
                           Creating a new client identity for fips-integration-windows-2012r2 using the validator key.
                           resolving cookbooks for run list: []
                           Synchronizing Cookbooks:
                           Installing Cookbook Gems:
                           Compiling Cookbooks...
                           [2016-07-01T15:51:51+00:00] WARN: Node fips-integration-windows-2012r2 has an empty run list.
                           Converging 0 resources
                           Starting audit phase

                           Finished in 0 seconds (files took 0.625 seconds to load)
                           0 examples, 0 failures
                           Auditing complete

                           Running handlers:
                           Running handlers complete
                           Chef Client finished, 0/0 resources updated in 32 seconds
                           [2016-07-01T15:51:52+00:00] ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json
                    D      Cleaning up local sandbox in /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160701-12947-1t0h8b1
                           Finished converging <fips-integration-windows-2012r2> (2m24.20s).
                    D      ------Exception-------
                    D      Class: Kitchen::ActionFailed
                    D      Message: 1 actions failed.
                    >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                        "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                        "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
                      }
                    }@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                        "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                        "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                       tion
                        + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                       vokeExpressionCommand

                    At line:54 char:5
                    +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                    +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                    :String) [], RuntimeException
                        + FullyQualifiedErrorId : There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                            "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
                       ps1";
                            "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
                       ;
                            "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
                       "
                      }
                    }@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                            "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
                       ps1";
                            "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
                       ;
                            "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
                       "
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                            + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                       xcep
                       tion
                            + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                       s.In
                       vokeExpressionCommand


                    ] on fips-unit-functional-windows-2012r2
                    D      ----------------------
                    D      ------Backtrace-------
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:187:in `report_errors'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:178:in `run_action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command/action.rb:39:in `block in call'
                    D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command/action.rb:37:in `call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:56:in `perform'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:184:in `block (2 levels) in <class:CLI>'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:325:in `invoke_task'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/bin/kitchen:13:in `block in <top (required)>'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/errors.rb:174:in `with_friendly_errors'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/bin/kitchen:13:in `<top (required)>'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:23:in `load'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:23:in `<main>'
                    D      ----End Backtrace-----
                    D      -Composite Exception--
                    D      Class: Kitchen::ActionFailed
                    D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                        "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                        "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
                      }
                    }@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                        "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                        "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                       tion
                        + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                       vokeExpressionCommand

                    At line:54 char:5
                    +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                    +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                    :String) [], RuntimeException
                        + FullyQualifiedErrorId : There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                            "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
                       ps1";
                            "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
                       ;
                            "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
                       "
                      }
                    }@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                            "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
                       ps1";
                            "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
                       ;
                            "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
                       "
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                            + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                       xcep
                       tion
                            + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                       s.In
                       vokeExpressionCommand


                    ] on fips-unit-functional-windows-2012r2
                    D      ----------------------
                    D      ------Backtrace-------
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:394:in `parse_response'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:203:in `check_files'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:80:in `block in upload'
                    D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:78:in `upload'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:134:in `upload'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:394:in `run_from_file_command'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:102:in `execute'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:72:in `block in call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:526:in `reuse_connection'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:72:in `connection'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:71:in `call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:373:in `block in converge_action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in `call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in `synchronize_or_call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:478:in `block in action'
                    D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:477:in `action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:369:in `converge_action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:348:in `block in transition_to'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in `each'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in `transition_to'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:138:in `converge'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in `public_send'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in `run_action_in_thread'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
                    D      ----End Backtrace-----
                    D      ---Nested Exception---
                    D      Class: Kitchen::ActionFailed
                    D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                        "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                        "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
                      }
                    }@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                        "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                        "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                       tion
                        + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                       vokeExpressionCommand

                    At line:54 char:5
                    +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                    +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                    :String) [], RuntimeException
                        + FullyQualifiedErrorId : There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                            "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
                       ps1";
                            "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
                       ;
                            "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
                       "
                      }
                    }@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                            "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
                       ps1";
                            "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
                       ;
                            "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
                       "
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                            + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                       xcep
                       tion
                            + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                       s.In
                       vokeExpressionCommand


                    ]
                    D      ----------------------
                    D      ------Backtrace-------
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:394:in `parse_response'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:203:in `check_files'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:80:in `block in upload'
                    D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:78:in `upload'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:134:in `upload'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:394:in `run_from_file_command'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:102:in `execute'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:72:in `block in call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:526:in `reuse_connection'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:72:in `connection'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:71:in `call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:373:in `block in converge_action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in `call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in `synchronize_or_call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:478:in `block in action'
                    D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:477:in `action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:369:in `converge_action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:348:in `block in transition_to'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in `each'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in `transition_to'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:138:in `converge'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in `public_send'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in `run_action_in_thread'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
                    D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
                    D      ----End Backtrace-----
                    D      [WinRM] closing remote shell 607C7234-6E59-49B0-9768-793CA8BB26CE on http://10.194.9.174:5985/wsman
                    D      [WinRM] closing remote shell 535E04F8-6DEE-47AB-A56F-BD1B59E9E2D4 on http://10.194.9.174:5985/wsman
                    D      [WinRM] remote shell 535E04F8-6DEE-47AB-A56F-BD1B59E9E2D4 closed
                    D      [WinRM] closing remote shell F4B473F6-BB8A-48F3-B6E7-30914AE072CB on http://10.194.13.185:5985/wsman
                    D      [WinRM] closing remote shell 8404D27A-7C12-43A6-A11F-47788FAC98A5 on http://10.194.13.185:5985/wsman
                    D      [WinRM] remote shell 8404D27A-7C12-43A6-A11F-47788FAC98A5 closed
                    STDERR: >>>>>> ------Exception-------
                    >>>>>> Class: Kitchen::ActionFailed
                    >>>>>> Message: 1 actions failed.
                    >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                    There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                        "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                        "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
                      }
                    }@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                        "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                        "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                        "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                       tion
                        + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                       vokeExpressionCommand

                    At line:54 char:5
                    +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                    +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                        + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                    :String) [], RuntimeException
                        + FullyQualifiedErrorId : There was an error invoking '@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                            "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
                       ps1";
                            "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
                       ;
                            "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
                       "
                      }
                    }@{
                      "f819689a04a73f68cedca447fe8bbc14" = @{
                            "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
                       ps1";
                            "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
                       ;
                            "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
                       "
                      }
                    }
                    ':
                    Invoke-Expression : At line:7 char:2
                    + }@{
                    +  ~~
                    Unexpected token '@{' in expression or statement.
                    At line:51 char:12
                    +     return Invoke-Expression "$expr"
                    +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                            + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                       xcep
                       tion
                            + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                       s.In
                       vokeExpressionCommand


                    ] on fips-unit-functional-windows-2012r2
                    >>>>>> ----------------------
                    >>>>>> Please see .kitchen/logs/kitchen.log for more details
                    >>>>>> Also try running `kitchen diagnose --all` for configuration
                    ---- End output of bundle exec kitchen converge  -c -l debug ----
                    Ran bundle exec kitchen converge  -c -l debug returned 20

                    Resource Declaration:
                    ---------------------
                    # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb

                     36:       execute "bundle exec kitchen #{command}#{instances ? " #{instances}" : ""}#{kitchen_options ? " #{kitchen_options}" : ""}" do
                     37:         cwd kitchen_dir
                     38:         env({
                     39:           "KITCHEN_DRIVER" => driver,
                     40:           "KITCHEN_INSTANCES" => instances,
                     41:           "KITCHEN_LOCAL_YAML" => ::File.expand_path("../../.kitchen.#{driver}.yml", __FILE__),
                     42:           "KITCHEN_CHEF_PRODUCT" => chef_product,
                     43:           "KITCHEN_CHEF_CHANNEL" => chef_channel,
                     44:           "KITCHEN_CHEF_VERSION" => chef_version,
                     45:           "ARTIFACTORY_USERNAME" => artifactory_username,
                     46:           "ARTIFACTORY_PASSWORD" => artifactory_password
                     47:         }.merge(new_resource.env))
                     48:       end
                     49:       ruby_block "copy_kitchen_logs_to_data_path" do

                    Compiled Resource:
                    ------------------
                    # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:36:in `block in <class:Kitchen>'

                    execute("bundle exec kitchen converge  -c -l debug") do
                      action [:run]
                      retries 0
                      retry_delay 2
                      default_guard_interpreter :execute
                      command "bundle exec kitchen converge  -c -l debug"
                      backup 5
                      cwd "/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/fips"
                      environment {"KITCHEN_DRIVER"=>"ec2", "KITCHEN_INSTANCES"=>"", "KITCHEN_LOCAL_YAML"=>"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/.kitchen.ec2.yml", "KITCHEN_CHEF_PRODUCT"=>"chef", "KITCHEN_CHEF_CHANNEL"=>"unstable", "KITCHEN_CHEF_VERSION"=>"12.12.7+20160701150941", "ARTIFACTORY_USERNAME"=>"chef-web-downloads", "ARTIFACTORY_PASSWORD"=>"fWPxYSB69EiuSpl8*3Dr^kGwf#hxUE6cmjeZRB%H!Cruit7qiKp%toH3nXKStQUg"}
                      returns 0
                      declared_type :execute
                      cookbook_name "acceptance-cookbook"
                    end


                  ================================================================================
                  Error executing action `run` on resource 'kitchen[converge]'
                  ================================================================================

                  Mixlib::ShellOut::ShellCommandFailed
                  ------------------------------------
                  execute[bundle exec kitchen converge  -c -l debug] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 36) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '20'
                  ---- Begin output of bundle exec kitchen converge  -c -l debug ----
                  STDOUT: -----> Starting Kitchen (v1.10.2)
                  D      winrm requested, loading winrm gem (["~> 1.6"])
                  D      winrm is loaded.
                  D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
                  D      winrm-fs is loaded.
                  D      winrm requested, loading winrm gem (["~> 1.6"])
                  D      winrm was already loaded.
                  D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
                  D      winrm-fs was already loaded.
                  -----> Creating <fips-unit-functional-windows-2012r2>...
                  -----> Creating <fips-unit-functional-centos-6>...
                  D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                  D      platform name centos-6 appears to be a standard platform. Searching for centos 6 ...
                  D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                  -----> Creating <fips-integration-windows-2012r2>...
                  D      Searching for images matching {:name=>"CentOS-6.5-GA-*", :"owner-alias"=>"aws-marketplace", :architecture=>"x86_64", :"virtualization-type"=>"paravirtual", :"block-device-mapping.volume-type"=>"standard", :"image-type"=>"machine"} ...
                  D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                  D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                  -----> Creating <fips-integration-centos-6>...
                  D      platform name centos-6 appears to be a standard platform. Searching for centos 6 ...
                  D      Searching for images matching {:name=>"CentOS-6.5-GA-*", :"owner-alias"=>"aws-marketplace", :architecture=>"x86_64", :"virtualization-type"=>"paravirtual", :"block-device-mapping.volume-type"=>"standard", :"image-type"=>"machine"} ...
                  D      Search returned 1 images:
                  D      - CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2: Detected centos 6.5 x86_64.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                  D      Image for fips-unit-functional-centos-6: CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                         Detected platform: centos version 6.5 on x86_64. Instance Type: m3.large. Default username: root (default).
                  D      No SSH username specified: using default username root  for image ami-b6bdde86, which we detected as centos 6.5 x86_64.
                         If you are not using an account that qualifies under the AWS
                  free-tier, you may be charged to run these suites. The charge
                  should be minimal, but neither Test Kitchen nor its maintainers
                  are responsible for your incurred costs.

                  D      Creating EC2 instance in region us-west-2 with properties:
                  D      - instance_type = "m3.large"
                  D      - ebs_optimized = false
                  D      - image_id = "ami-b6bdde86"
                  D      - key_name = "jenkins"
                  D      - subnet_id = "subnet-19ac017c"
                  D      - private_ip_address = nil
                  D      - placement = {:availability_zone=>"us-west-2a"}
                  D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                  D      Search returned 1 images:
                  D      - CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2: Detected centos 6.5 x86_64.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                  D      Image for fips-integration-centos-6: CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                         Detected platform: centos version 6.5 on x86_64. Instance Type: m3.large. Default username: root (default).
                  D      No SSH username specified: using default username root  for image ami-b6bdde86, which we detected as centos 6.5 x86_64.
                         If you are not using an account that qualifies under the AWS
                  free-tier, you may be charged to run these suites. The charge
                  should be minimal, but neither Test Kitchen nor its maintainers
                  are responsible for your incurred costs.

                  D      Creating EC2 instance in region us-west-2 with properties:
                  D      - instance_type = "m3.large"
                  D      - ebs_optimized = false
                  D      - image_id = "ami-b6bdde86"
                  D      - key_name = "jenkins"
                  D      - subnet_id = "subnet-19ac017c"
                  D      - private_ip_address = nil
                  D      - placement = {:availability_zone=>"us-west-2a"}
                  D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                  D      Search returned 3 images:
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
                  D      Search returned 3 images:
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
                  D      Image for fips-integration-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                         Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
                  D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
                         If you are not using an account that qualifies under the AWS
                  free-tier, you may be charged to run these suites. The charge
                  should be minimal, but neither Test Kitchen nor its maintainers
                  are responsible for your incurred costs.

                  D      Creating EC2 instance in region us-west-2 with properties:
                  D      - instance_type = "m3.large"
                  D      - ebs_optimized = false
                  D      - image_id = "ami-8d0acfed"
                  D      - key_name = "jenkins"
                  D      - subnet_id = "subnet-19ac017c"
                  D      - private_ip_address = nil
                  D      - placement = {:availability_zone=>"us-west-2a"}
                  D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                  D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                  D      Image for fips-unit-functional-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                         Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
                  D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
                         If you are not using an account that qualifies under the AWS
                  free-tier, you may be charged to run these suites. The charge
                  should be minimal, but neither Test Kitchen nor its maintainers
                  are responsible for your incurred costs.

                  D      Creating EC2 instance in region us-west-2 with properties:
                  D      - instance_type = "m3.large"
                  D      - ebs_optimized = false
                  D      - image_id = "ami-8d0acfed"
                  D      - key_name = "jenkins"
                  D      - subnet_id = "subnet-19ac017c"
                  D      - private_ip_address = nil
                  D      - placement = {:availability_zone=>"us-west-2a"}
                  D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                  D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                         Instance <i-443ae1eb> requested.
                         Polling AWS for existence, attempt 0...
                         Instance <i-d638e379> requested.
                         Polling AWS for existence, attempt 0...
                         Attempting to tag the instance, 0 retries
                         Instance <i-e739e248> requested.
                         Polling AWS for existence, attempt 0...
                         Attempting to tag the instance, 0 retries
                         Instance <i-473ae1e8> requested.
                         Polling AWS for existence, attempt 0...
                         EC2 instance <i-443ae1eb> created.
                         Waited 0/300s for instance <i-443ae1eb> to become ready.
                         Attempting to tag the instance, 0 retries
                         EC2 instance <i-d638e379> created.
                         Waited 0/300s for instance <i-d638e379> to become ready.
                         Attempting to tag the instance, 0 retries
                         EC2 instance <i-473ae1e8> created.
                         Waited 0/300s for instance <i-473ae1e8> to become ready.
                         EC2 instance <i-e739e248> created.
                         Waited 0/300s for instance <i-e739e248> to become ready.
                         Waited 5/300s for instance <i-443ae1eb> to become ready.
                         Waited 5/300s for instance <i-d638e379> to become ready.
                         Waited 5/300s for instance <i-e739e248> to become ready.
                         Waited 5/300s for instance <i-473ae1e8> to become ready.
                         Waited 10/300s for instance <i-d638e379> to become ready.
                         Waited 10/300s for instance <i-443ae1eb> to become ready.
                         Waited 10/300s for instance <i-e739e248> to become ready.
                         Waited 10/300s for instance <i-473ae1e8> to become ready.
                         Waited 15/300s for instance <i-443ae1eb> to become ready.
                         Waited 15/300s for instance <i-d638e379> to become ready.
                         Waited 15/300s for instance <i-e739e248> to become ready.
                         Waited 15/300s for instance <i-473ae1e8> to become ready.
                         Waited 20/300s for instance <i-443ae1eb> to become ready.
                         Waited 20/300s for instance <i-e739e248> to become ready.
                         EC2 instance <i-443ae1eb> ready.
                  D      [SSH] opening connection to root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"]}>
                         Waited 20/300s for instance <i-473ae1e8> to become ready.
                         Waited 20/300s for instance <i-d638e379> to become ready.
                         Waited 25/300s for instance <i-e739e248> to become ready.
                         Waited 25/300s for instance <i-473ae1e8> to become ready.
                         Waited 25/300s for instance <i-d638e379> to become ready.
                         EC2 instance <i-d638e379> ready.
                  D      [SSH] opening connection to root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"]}>
                         Waited 30/300s for instance <i-e739e248> to become ready.
                         Waited 30/300s for instance <i-473ae1e8> to become ready.
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.8.163:22, retrying in 3 seconds
                         Waited 35/300s for instance <i-e739e248> to become ready.
                         Waited 35/300s for instance <i-473ae1e8> to become ready.
                  D      [SSH] opening connection to root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.13.47:22, retrying in 3 seconds
                         Waited 40/300s for instance <i-e739e248> to become ready.
                         Waited 40/300s for instance <i-473ae1e8> to become ready.
                  D      [SSH] opening connection to root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                         Waited 45/300s for instance <i-e739e248> to become ready.
                         Waited 45/300s for instance <i-473ae1e8> to become ready.
                         Waited 50/300s for instance <i-e739e248> to become ready.
                         Waited 50/300s for instance <i-473ae1e8> to become ready.
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.8.163:22, retrying in 3 seconds
                  D      [SSH] opening connection to root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                         Waited 55/300s for instance <i-e739e248> to become ready.
                         Waited 55/300s for instance <i-473ae1e8> to become ready.
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.13.47:22, retrying in 3 seconds
                  D      [SSH] opening connection to root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                         Waited 60/300s for instance <i-e739e248> to become ready.
                         Waited 60/300s for instance <i-473ae1e8> to become ready.
                         Waited 65/300s for instance <i-e739e248> to become ready.
                         Waited 65/300s for instance <i-473ae1e8> to become ready.
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.8.163:22, retrying in 3 seconds
                         Waited 70/300s for instance <i-473ae1e8> to become ready.
                         Waited 70/300s for instance <i-e739e248> to become ready.
                  D      [SSH] opening connection to root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.13.47:22, retrying in 3 seconds
                         Waited 75/300s for instance <i-e739e248> to become ready.
                         Waited 75/300s for instance <i-473ae1e8> to become ready.
                  D      [SSH] opening connection to root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                         Waited 80/300s for instance <i-e739e248> to become ready.
                         Waited 80/300s for instance <i-473ae1e8> to become ready.
                         Waited 85/300s for instance <i-e739e248> to become ready.
                         Waited 85/300s for instance <i-473ae1e8> to become ready.
                  D      [SSH] root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (echo '[SSH] Established')
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         [SSH] Established
                  D      Using sudo_command='sudo -E' for ohai hints
                  D      [SSH] reusing existing connection root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E mkdir -p /etc/chef/ohai/hints; sudo -E touch /etc/chef/ohai/hints/ec2.json)
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                  D      ec2:create '10.194.8.163'
                         Finished creating <fips-integration-centos-6> (1m34.67s).
                  -----> Converging <fips-integration-centos-6>...
                         Preparing files for transfer
                  D      Creating local sandbox in /tmp/cheftest/fips-integration-centos-6-sandbox-20160701-12947-1s5uurn
                         Preparing dna.json
                  D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                         Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                         Removing non-cookbook files before transfer
                         Preparing validation.pem
                  D      Using a dummy validation.pem
                         Preparing client.rb
                  D      Creating client.rb from {:node_name=>"fips-integration-centos-6", :checksum_path=>"/tmp/kitchen/checksums", :file_cache_path=>"/tmp/kitchen/cache", :file_backup_path=>"/tmp/kitchen/backup", :cookbook_path=>["/tmp/kitchen/cookbooks", "/tmp/kitchen/site-cookbooks"], :data_bag_path=>"/tmp/kitchen/data_bags", :environment_path=>"/tmp/kitchen/environments", :node_path=>"/tmp/kitchen/nodes", :role_path=>"/tmp/kitchen/roles", :client_path=>"/tmp/kitchen/clients", :user_path=>"/tmp/kitchen/users", :validation_key=>"/tmp/kitchen/validation.pem", :client_key=>"/tmp/kitchen/client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"/tmp/kitchen/encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                  D      [SSH] reusing existing connection root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E cat > /tmp/chef-installer.sh <<"EOL"
                  #!/bin/bash
                  #!/bin/sh
                  # WARNING: REQUIRES /bin/sh
                  #
                  # - must run on /bin/sh on solaris 9
                  # - must run on /bin/sh on AIX 6.x
                  #
                  # Copyright:: Copyright (c) 2010-2015 Chef Software, Inc.
                  # License:: Apache License, Version 2.0
                  #
                  # Licensed under the Apache License, Version 2.0 (the "License");
                  # you may not use this file except in compliance with the License.
                  # You may obtain a copy of the License at
                  #
                  #     http://www.apache.org/licenses/LICENSE-2.0
                  #
                  # Unless required by applicable law or agreed to in writing, software
                  # distributed under the License is distributed on an "AS IS" BASIS,
                  # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                  # See the License for the specific language governing permissions and
                  # limitations under the License.
                  #

                  # helpers.sh
                  ############
                  # This section has some helper functions to make life easier.
                  #
                  # Outputs:
                  # $tmp_dir: secure-ish temp directory that can be used during installation.
                  ############

                  # Check whether a command exists - returns 0 if it does, 1 if it does not
                  exists() {
                    if command -v $1 >/dev/null 2>&1
                    then
                      return 0
                    else
                      return 1
                    fi
                  }

                  # Output the instructions to report bug about this script
                  report_bug() {
                    echo "Version: $version"
                    echo ""
                    echo "Please file a Bug Report at https://github.com/chef/omnitruck/issues/new"
                    echo "Alternatively, feel free to open a Support Ticket at https://www.chef.io/support/tickets"
                    echo "More Chef support resources can be found at https://www.chef.io/support"
                    echo ""
                    echo "Please include as many details about the problem as possible i.e., how to reproduce"
                    echo "the problem (if possible), type of the Operating System and its version, etc.,"
                    echo "and any other relevant details that might help us with troubleshooting."
                    echo ""
                  }

                  checksum_mismatch() {
                    echo "Package checksum mismatch!"
                    report_bug
                    exit 1
                  }

                  unable_to_retrieve_package() {
                    echo "Unable to retrieve a valid package!"
                    report_bug
                    echo "Metadata URL: $metadata_url"
                    if test "x$download_url" != "x"; then
                      echo "Download URL: $download_url"
                    fi
                    if test "x$stderr_results" != "x"; then
                      echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
                    fi
                    exit 1
                  }

                  http_404_error() {
                    echo "Omnitruck artifact does not exist for version $version on platform $platform"
                    echo ""
                    echo "Either this means:"
                    echo "   - We do not support $platform"
                    echo "   - We do not have an artifact for $version"
                    echo ""
                    echo "This is often the latter case due to running a prerelease or RC version of chef"
                    echo "or a gem version which was only pushed to rubygems and not omnitruck."
                    echo ""
                    echo "You may be able to set your knife[:bootstrap_version] to the most recent stable"
                    echo "release of Chef to fix this problem (or the most recent stable major version number)."
                    echo ""
                    echo "In order to test the version parameter, adventurous users may take the Metadata URL"
                    echo "below and modify the '&v=<number>' parameter until you successfully get a URL that"
                    echo "does not 404 (e.g. via curl or wget).  You should be able to use '&v=11' or '&v=12'"
                    echo "succesfully."
                    echo ""
                    echo "If you cannot fix this problem by setting the bootstrap_version, it probably means"
                    echo "that $platform is not supported."
                    echo ""
                    # deliberately do not call report_bug to suppress bug report noise.
                    echo "Metadata URL: $metadata_url"
                    if test "x$download_url" != "x"; then
                      echo "Download URL: $download_url"
                    fi
                    if test "x$stderr_results" != "x"; then
                      echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
                    fi
                    exit 1
                  }

                  capture_tmp_stderr() {
                    # spool up /tmp/stderr from all the commands we called
                    if test -f "$tmp_dir/stderr"; then
                      output=`cat $tmp_dir/stderr`
                      stderr_results="${stderr_results}\nSTDERR from $1:\n\n$output\n"
                      rm $tmp_dir/stderr
                    fi
                  }

                  # do_wget URL FILENAME
                  do_wget() {
                    echo "trying wget..."
                    wget -O "$2" "$1" 2>$tmp_dir/stderr
                    rc=$?
                    # check for 404
                    grep "ERROR 404" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "wget"
                      return 1
                    fi

                    return 0
                  }

                  # do_curl URL FILENAME
                  do_curl() {
                    echo "trying curl..."
                    curl --retry 5 -sL -D $tmp_dir/stderr "$1" > "$2"
                    rc=$?
                    # check for 404
                    grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "curl"
                      return 1
                    fi

                    return 0
                  }

                  # do_fetch URL FILENAME
                  do_fetch() {
                    echo "trying fetch..."
                    fetch -o "$2" "$1" 2>$tmp_dir/stderr
                    # check for bad return status
                    test $? -ne 0 && return 1
                    return 0
                  }

                  # do_perl URL FILENAME
                  do_perl() {
                    echo "trying perl..."
                    perl -e 'use LWP::Simple; getprint($ARGV[0]);' "$1" > "$2" 2>$tmp_dir/stderr
                    rc=$?
                    # check for 404
                    grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "perl"
                      return 1
                    fi

                    return 0
                  }

                  # do_python URL FILENAME
                  do_python() {
                    echo "trying python..."
                    python -c "import sys,urllib2 ; sys.stdout.write(urllib2.urlopen(sys.argv[1]).read())" "$1" > "$2" 2>$tmp_dir/stderr
                    rc=$?
                    # check for 404
                    grep "HTTP Error 404" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "python"
                      return 1
                    fi
                    return 0
                  }

                  # returns 0 if checksums match
                  do_checksum() {
                    if exists sha256sum; then
                      echo "Comparing checksum with sha256sum..."
                      checksum=`sha256sum $1 | awk '{ print $1 }'`
                      return `test "x$checksum" = "x$2"`
                    elif exists shasum; then
                      echo "Comparing checksum with shasum..."
                      checksum=`shasum -a 256 $1 | awk '{ print $1 }'`
                      return `test "x$checksum" = "x$2"`
                    else
                      echo "WARNING: could not find a valid checksum program, pre-install shasum or sha256sum in your O/S image to get valdation..."
                      return 0
                    fi
                  }

                  # do_download URL FILENAME
                  do_download() {
                    echo "downloading $1"
                    echo "  to file $2"

                    url=`echo $1`
                    if test "x$platform" = "xsolaris2"; then
                      if test "x$platform_version" = "x5.9" -o "x$platform_version" = "x5.10"; then
                        # solaris 9 lacks openssl, solaris 10 lacks recent enough credentials - your base O/S is completely insecure, please upgrade
                        url=`echo $url | sed -e 's/https/http/'`
                      fi
                    fi

                    # we try all of these until we get success.
                    # perl, in particular may be present but LWP::Simple may not be installed

                    if exists wget; then
                      do_wget $url $2 && return 0
                    fi

                    if exists curl; then
                      do_curl $url $2 && return 0
                    fi

                    if exists fetch; then
                      do_fetch $url $2 && return 0
                    fi

                    if exists perl; then
                      do_perl $url $2 && return 0
                    fi

                    if exists python; then
                      do_python $url $2 && return 0
                    fi

                    unable_to_retrieve_package
                  }

                  # install_file TYPE FILENAME
                  # TYPE is "rpm", "deb", "solaris", "sh", etc.
                  install_file() {
                    echo "Installing $project $version"
                    case "$1" in
                      "rpm")
                        if test "x$platform" = "xnexus" || test "x$platform" = "xios_xr"; then
                          echo "installing with yum..."
                          yum install -yv "$2"
                        else
                          echo "installing with rpm..."
                          rpm -Uvh --oldpackage --replacepkgs "$2"
                        fi
                        ;;
                      "deb")
                        echo "installing with dpkg..."
                        dpkg -i "$2"
                        ;;
                      "bff")
                        echo "installing with installp..."
                        installp -aXYgd "$2" all
                        ;;
                      "solaris")
                        echo "installing with pkgadd..."
                        echo "conflict=nocheck" > $tmp_dir/nocheck
                        echo "action=nocheck" >> $tmp_dir/nocheck
                        echo "mail=" >> $tmp_dir/nocheck
                        pkgrm -a $tmp_dir/nocheck -n $project >/dev/null 2>&1 || true
                        pkgadd -G -n -d "$2" -a $tmp_dir/nocheck $project
                        ;;
                      "pkg")
                        echo "installing with installer..."
                        cd / && /usr/sbin/installer -pkg "$2" -target /
                        ;;
                      "dmg")
                        echo "installing dmg file..."
                        hdiutil detach "/Volumes/chef_software" >/dev/null 2>&1 || true
                        hdiutil attach "$2" -mountpoint "/Volumes/chef_software"
                        cd / && /usr/sbin/installer -pkg `find "/Volumes/chef_software" -name \*.pkg` -target /
                        hdiutil detach "/Volumes/chef_software"
                        ;;
                      "sh" )
                        echo "installing with sh..."
                        sh "$2"
                        ;;
                      *)
                        echo "Unknown filetype: $1"
                        report_bug
                        exit 1
                        ;;
                    esac
                    if test $? -ne 0; then
                      echo "Installation failed"
                      report_bug
                      exit 1
                    fi
                  }

                  if test "x$TMPDIR" = "x"; then
                    tmp="/tmp"
                  else
                    tmp=$TMPDIR
                  fi
                  # secure-ish temp dir creation without having mktemp available (DDoS-able but not expliotable)
                  tmp_dir="$tmp/install.sh.$$"
                  (umask 077 && mkdir $tmp_dir) || exit 1

                  ############
                  # end of helpers.sh
                  ############


                  project=chef
                  version=12.12.7+20160701150941
                  channel=unstable


                  # platform_detection.sh
                  ############
                  # This section makes platform detection compatible with omnitruck on the system
                  #   it runs.
                  #
                  # Outputs:
                  # $platform: Name of the platform.
                  # $platform_version: Version of the platform.
                  # $machine: System's architecture.
                  ############

                  #
                  # Platform and Platform Version detection
                  #
                  # NOTE: This should now match ohai platform and platform_version matching.
                  # do not invented new platform and platform_version schemas, just make this behave
                  # like what ohai returns as platform and platform_version for the server.
                  #
                  # ALSO NOTE: Do not mangle platform or platform_version here.  It is less error
                  # prone and more future-proof to do that in the server, and then all omnitruck clients
                  # will 'inherit' the changes (install.sh is not the only client of the omnitruck
                  # endpoint out there).
                  #

                  machine=`uname -m`
                  os=`uname -s`

                  if test -f "/etc/lsb-release" && grep -q DISTRIB_ID /etc/lsb-release && ! grep -q wrlinux /etc/lsb-release; then
                    platform=`grep DISTRIB_ID /etc/lsb-release | cut -d "=" -f 2 | tr '[A-Z]' '[a-z]'`
                    platform_version=`grep DISTRIB_RELEASE /etc/lsb-release | cut -d "=" -f 2`
                  elif test -f "/etc/debian_version"; then
                    platform="debian"
                    platform_version=`cat /etc/debian_version`
                  elif test -f "/etc/redhat-release"; then
                    platform=`sed 's/^\(.\+\) release.*/\1/' /etc/redhat-release | tr '[A-Z]' '[a-z]'`
                    platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/redhat-release`

                    # If /etc/redhat-release exists, we act like RHEL by default
                    if test "$platform" = "fedora"; then
                      # FIXME: stop remapping fedora to el
                      # FIXME: remove client side platform_version mangling and hard coded yolo
                      # Change platform version for use below.
                      platform_version="6.0"
                    fi

                    if test "$platform" = "xenserver"; then
                      # Current XenServer 6.2 is based on CentOS 5, platform is not reset to "el" server should hanlde response
                      platform="xenserver"
                    else
                      # FIXME: use "redhat"
                      platform="el"
                    fi

                  elif test -f "/etc/system-release"; then
                    platform=`sed 's/^\(.\+\) release.\+/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
                    platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
                    # amazon is built off of fedora, so act like RHEL
                    if test "$platform" = "amazon linux ami"; then
                      # FIXME: remove client side platform_version mangling and hard coded yolo, and remapping to deprecated "el"
                      platform="el"
                      platform_version="6.0"
                    fi
                  # Apple OS X
                  elif test -f "/usr/bin/sw_vers"; then
                    platform="mac_os_x"
                    # Matching the tab-space with sed is error-prone
                    platform_version=`sw_vers | awk '/^ProductVersion:/ { print $2 }' | cut -d. -f1,2`

                    # x86_64 Apple hardware often runs 32-bit kernels (see OHAI-63)
                    x86_64=`sysctl -n hw.optional.x86_64`
                    if test $x86_64 -eq 1; then
                      machine="x86_64"
                    fi
                  elif test -f "/etc/release"; then
                    machine=`/usr/bin/uname -p`
                    if grep -q SmartOS /etc/release; then
                      platform="smartos"
                      platform_version=`grep ^Image /etc/product | awk '{ print $3 }'`
                    else
                      platform="solaris2"
                      platform_version=`/usr/bin/uname -r`
                    fi
                  elif test -f "/etc/SuSE-release"; then
                    if grep -q 'Enterprise' /etc/SuSE-release;
                    then
                        platform="sles"
                        platform_version=`awk '/^VERSION/ {V = $3}; /^PATCHLEVEL/ {P = $3}; END {print V "." P}' /etc/SuSE-release`
                    else
                        platform="suse"
                        platform_version=`awk '/^VERSION =/ { print $3 }' /etc/SuSE-release`
                    fi
                  elif test "x$os" = "xFreeBSD"; then
                    platform="freebsd"
                    platform_version=`uname -r | sed 's/-.*//'`
                  elif test "x$os" = "xAIX"; then
                    platform="aix"
                    platform_version="`uname -v`.`uname -r`"
                    machine="powerpc"
                  elif test -f "/etc/os-release"; then
                    . /etc/os-release
                    if test "x$CISCO_RELEASE_INFO" != "x"; then
                      . $CISCO_RELEASE_INFO
                    fi

                    platform=$ID
                    platform_version=$VERSION
                  fi

                  if test "x$platform" = "x"; then
                    echo "Unable to determine platform version!"
                    report_bug
                    exit 1
                  fi

                  #
                  # NOTE: platform manging in the install.sh is DEPRECATED
                  #
                  # - install.sh should be true to ohai and should not remap
                  #   platform or platform versions.
                  #
                  # - remapping platform and mangling platform version numbers is
                  #   now the complete responsibility of the server-side endpoints
                  #

                  major_version=`echo $platform_version | cut -d. -f1`
                  case $platform in
                    # FIXME: should remove this case statement completely
                    "el")
                      # FIXME:  "el" is deprecated, should use "redhat"
                      platform_version=$major_version
                      ;;
                    "debian")
                      if test "x$major_version" = "x5"; then
                        # This is here for potential back-compat.
                        # We do not have 5 in versions we publish for anymore but we
                        # might have it for earlier versions.
                        platform_version="6"
                      else
                        platform_version=$major_version
                      fi
                      ;;
                    "freebsd")
                      platform_version=$major_version
                      ;;
                    "sles")
                      platform_version=$major_version
                      ;;
                    "suse")
                      platform_version=$major_version
                      ;;
                  esac

                  # normalize the architecture we detected
                  case $machine in
                    "x86_64"|"amd64"|"x64")
                      machine="x86_64"
                      ;;
                    "i386"|"i86pc"|"x86"|"i686")
                      machine="i386"
                      ;;
                    "sparc"|"sun4u"|"sun4v")
                      machine="sparc"
                      ;;
                  esac

                  if test "x$platform_version" = "x"; then
                    echo "Unable to determine platform version!"
                    report_bug
                    exit 1
                  fi

                  if test "x$platform" = "xsolaris2"; then
                    # hack up the path on Solaris to find wget, pkgadd
                    PATH=/usr/sfw/bin:/usr/sbin:$PATH
                    export PATH
                  fi

                  echo "$platform $platform_version $machine"

                  ############
                  # end of platform_detection.sh
                  ############


                  # artifactory_urls.sh
                  ############
                  # This section sets up the information for a build to be installed from artifactory
                  #  then uses $platform, $platform_version and $machine to select the correct
                  #  version.
                  #
                  # Inputs:
                  # $platform:
                  # $platform_version:
                  # $machine:
                  #
                  # Outputs:
                  # $download_url:
                  # $sha256:
                  ############


                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/ppc64le"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_ppc64el.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 89a564bafc4b22db5f5539fe1925587c6bf2334f0c344e0c13264f52ae537b0a" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.9/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.9/chef-12.12.7+20160701150941-1.dmg" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.10/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.10/chef-12.12.7+20160701150941-1.dmg" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.11/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.11/chef-12.12.7+20160701150941-1.dmg" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ios_xr/6/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ios_xr/6/chef-12.12.7+20160701150941-1.ios_xr6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 96689d0525260209d68e4991db7144b0aa31a6f7628c9e4e5f23c6f150025fb0" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/6/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/7/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/8/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/nexus/7/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/nexus/7/chef-12.12.7+20160701150941-1.nexus7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 f5c620dc0166571903f28990240a5bbb1123bd6e8433a8d8d4aa9b2ba8587bbb" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.i386.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 6d3b80e324377a5a80889d51ec5b0d0730d7503eb14c32a4ed7fd9e2ad21d615" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.i386.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 8d63b437804b48672cc7b325bd3eb3a1ff525978b894c9b6e7c63db011aac295" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/5/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.i386.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 e910142a9bdc53757635db7f997f00e5415cc6dadea981aeec1e999489586ee2" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/7/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 13296dfe3559a3cb5664a8319e57153635ba867a3a72feb4b040ce833fc22914" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/6/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.i386.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 e31a417ea73cefb3424496b07b19e188a5d079db40fc29bae0c8a24b2fb9d558" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/7/ppc64le"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64le.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 5fb71d38e54b0a6e8fc142f48e693de2dc54891edde59f65db61bf097766a3de" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/6/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/7/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/7/ppc64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 bc5a1ea39782df044cd069523d6534f72222855bbf99a98961858cdaee51d7c0" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/8/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/amd64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 f4c5e3b437e5129e89a5ca0d69036dcf0e6e4b21a0eef61b495ab63a0be2fe94" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/5/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 58bed7db8fe43a1e8441d9a2a5e46b9fe4ab7e932dd1f7f5e0dc53adc004704c" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/6/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 e30aac011f866a56f3542eaaa17cf18e40df6021e997e32fd3d1ae5b8f11e274" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/amd64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 6fc165d1fbc96f5ed5ffbfedb154e7ede4d6e87fccec3c80c0de5510527bd673" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/aix/6.1/powerpc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/6.1/chef-12.12.7+20160701150941-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/aix/7.1/powerpc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/7.1/chef-12.12.7+20160701150941-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/sparc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/sparc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817" >> "$artifact_info_dir/artifact_info"


                  artifact_info_for_platform="$tmp_dir/artifact_info/$platform/$platform_version/$machine/artifact_info"

                  download_url=`awk '$1 == "url" { print $2 }' "$artifact_info_for_platform"`
                  sha256=`awk '$1 == "sha256" { print $2 }' "$artifact_info_for_platform"`


                  # fetch_package.sh
                  ############
                  # This section fetchs a package from $download_url and verifies its metadata.
                  #
                  # Inputs:
                  # $download_url:
                  # $tmp_dir:
                  # Optional Inputs:
                  # $cmdline_filename: Name of the package downloaded on local disk.
                  # $cmdline_dl_dir: Name of the directory downloaded package will be saved to on local disk.
                  #
                  # Outputs:
                  # $download_filename: Name of the downloaded file on local disk.
                  # $filetype: Type of the file downloaded.
                  ############

                  filename=`echo $download_url | sed -e 's/^.*\///'`
                  filetype=`echo $filename | sed -e 's/^.*\.//'`

                  # use either $tmp_dir, the provided directory (-d) or the provided filename (-f)
                  if test "x$cmdline_filename" != "x"; then
                    download_filename="$cmdline_filename"
                  elif test "x$cmdline_dl_dir" != "x"; then
                    download_filename="$cmdline_dl_dir/$filename"
                  else
                    download_filename="$tmp_dir/$filename"
                  fi

                  # ensure the parent directory where to download the installer always exists
                  download_dir=`dirname $download_filename`
                  (umask 077 && mkdir -p $download_dir) || exit 1

                  # check if we have that file locally available and if so verify the checksum
                  cached_file_available="false"
                  if test -f $download_filename; then
                    echo "$download_filename already exists, verifiying checksum..."
                    if do_checksum "$download_filename" "$sha256"; then
                      echo "checksum compare succeeded, using existing file!"
                      cached_file_available="true"
                    else
                      echo "checksum mismatch, downloading latest version of the file"
                    fi
                  fi

                  # download if no local version of the file available
                  if test "x$cached_file_available" != "xtrue"; then
                    do_download "$download_url"  "$download_filename"
                    do_checksum "$download_filename" "$sha256" || checksum_mismatch
                  fi

                  ############
                  # end of fetch_package.sh
                  ############


                  # install_package.sh
                  ############
                  # Installs a package and removed the temp directory.
                  #
                  # Inputs:
                  # $download_filename: Name of the file to be installed.
                  # $filetype: Type of the file to be installed.
                  # $version: The version requested. Used only for warning user if not set.
                  ############

                  if test "x$version" = "x"; then
                    echo
                    echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
                    echo
                    echo "You are installing an omnibus package without a version pin.  If you are installing"
                    echo "on production servers via an automated process this is DANGEROUS and you will"
                    echo "be upgraded without warning on new releases, even to new major releases."
                    echo "Letting the version float is only appropriate in desktop, test, development or"
                    echo "CI/CD environments."
                    echo
                    echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
                    echo
                  fi

                  install_file $filetype "$download_filename"

                  if test "x$tmp_dir" != "x"; then
                    rm -r "$tmp_dir"
                  fi

                  ############
                  # end of install_package.sh
                  ############

                  EOL
                  chmod +x /tmp/chef-installer.sh
                  sudo -E /tmp/chef-installer.sh)
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         /bin/bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         el 6 x86_64
                         downloading http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.x86_64.rpm
                           to file /tmp/install.sh.959/chef-12.12.7+20160701150941-1.el6.x86_64.rpm
                         trying curl...
                         Comparing checksum with sha256sum...
                         Installing chef 12.12.7+20160701150941
                         installing with rpm...
                         warning: /tmp/install.sh.959/chef-12.12.7+20160701150941-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
                         Preparing...                                                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                         Waited 90/300s for instance <i-e739e248> to become ready.
                         Waited 90/300s for instance <i-473ae1e8> to become ready.
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.13.47:22, retrying in 3 seconds
                            1:chef                                                               (  1%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (  3%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (  6%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (  8%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        ( 10%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       ( 13%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      ( 15%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     ( 17%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    ( 19%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   ( 22%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  ( 24%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 ( 26%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                ( 28%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               ( 31%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              ( 33%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             ( 35%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            ( 38%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           ( 40%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          ( 42%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         ( 44%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        ( 47%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       ( 49%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      ( 51%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     ( 53%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    ( 56%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   ( 58%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  ( 60%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 ( 63%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                ( 65%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               ( 67%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              ( 69%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             ( 72%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            ( 74%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           ( 76%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          ( 78%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         ( 81%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        ( 83%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       ( 85%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      ( 88%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     ( 90%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    ( 92%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   ( 94%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  ( 97%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### ( 99%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                         /bin/sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         Thank you for installing Chef!
                  D      [SSH] root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '
                  sudo_rm="sudo -E rm"
                  dirs="/tmp/kitchen/clients /tmp/kitchen/cookbooks /tmp/kitchen/data /tmp/kitchen/data_bags /tmp/kitchen/encrypted_data_bag_secret /tmp/kitchen/environments /tmp/kitchen/roles"
                  root_path="/tmp/kitchen"

                  $sudo_rm -rf $dirs
                  mkdir -p $root_path
                  ')
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         Transferring files to <fips-integration-centos-6>
                  D      TIMING: scp async upload (Kitchen::Transport::Ssh)
                  D      TIMING: scp async upload (Kitchen::Transport::Ssh) took (0m0.29s)
                  D      Transfer complete
                  D      Attempting to execute command - try 1 of 1.
                  D      [SSH] root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '
                  sudo -E /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json --chef-zero-port 8889
                  ')
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                  D      [SSH] opening connection to root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (echo '[SSH] Established')
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         [SSH] Established
                  D      Using sudo_command='sudo -E' for ohai hints
                  D      [SSH] reusing existing connection root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E mkdir -p /etc/chef/ohai/hints; sudo -E touch /etc/chef/ohai/hints/ec2.json)
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                  D      ec2:create '10.194.13.47'
                         Finished creating <fips-unit-functional-centos-6> (1m43.27s).
                  -----> Converging <fips-unit-functional-centos-6>...
                         Preparing files for transfer
                  D      Creating local sandbox in /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160701-12947-1tbjgv7
                         Preparing dna.json
                  D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                         Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                         Removing non-cookbook files before transfer
                         Preparing validation.pem
                  D      Using a dummy validation.pem
                         Preparing client.rb
                  D      Creating client.rb from {:node_name=>"fips-unit-functional-centos-6", :checksum_path=>"/tmp/kitchen/checksums", :file_cache_path=>"/tmp/kitchen/cache", :file_backup_path=>"/tmp/kitchen/backup", :cookbook_path=>["/tmp/kitchen/cookbooks", "/tmp/kitchen/site-cookbooks"], :data_bag_path=>"/tmp/kitchen/data_bags", :environment_path=>"/tmp/kitchen/environments", :node_path=>"/tmp/kitchen/nodes", :role_path=>"/tmp/kitchen/roles", :client_path=>"/tmp/kitchen/clients", :user_path=>"/tmp/kitchen/users", :validation_key=>"/tmp/kitchen/validation.pem", :client_key=>"/tmp/kitchen/client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"/tmp/kitchen/encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                  D      [SSH] reusing existing connection root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E cat > /tmp/chef-installer.sh <<"EOL"
                  #!/bin/bash
                  #!/bin/sh
                  # WARNING: REQUIRES /bin/sh
                  #
                  # - must run on /bin/sh on solaris 9
                  # - must run on /bin/sh on AIX 6.x
                  #
                  # Copyright:: Copyright (c) 2010-2015 Chef Software, Inc.
                  # License:: Apache License, Version 2.0
                  #
                  # Licensed under the Apache License, Version 2.0 (the "License");
                  # you may not use this file except in compliance with the License.
                  # You may obtain a copy of the License at
                  #
                  #     http://www.apache.org/licenses/LICENSE-2.0
                  #
                  # Unless required by applicable law or agreed to in writing, software
                  # distributed under the License is distributed on an "AS IS" BASIS,
                  # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                  # See the License for the specific language governing permissions and
                  # limitations under the License.
                  #

                  # helpers.sh
                  ############
                  # This section has some helper functions to make life easier.
                  #
                  # Outputs:
                  # $tmp_dir: secure-ish temp directory that can be used during installation.
                  ############

                  # Check whether a command exists - returns 0 if it does, 1 if it does not
                  exists() {
                    if command -v $1 >/dev/null 2>&1
                    then
                      return 0
                    else
                      return 1
                    fi
                  }

                  # Output the instructions to report bug about this script
                  report_bug() {
                    echo "Version: $version"
                    echo ""
                    echo "Please file a Bug Report at https://github.com/chef/omnitruck/issues/new"
                    echo "Alternatively, feel free to open a Support Ticket at https://www.chef.io/support/tickets"
                    echo "More Chef support resources can be found at https://www.chef.io/support"
                    echo ""
                    echo "Please include as many details about the problem as possible i.e., how to reproduce"
                    echo "the problem (if possible), type of the Operating System and its version, etc.,"
                    echo "and any other relevant details that might help us with troubleshooting."
                    echo ""
                  }

                  checksum_mismatch() {
                    echo "Package checksum mismatch!"
                    report_bug
                    exit 1
                  }

                  unable_to_retrieve_package() {
                    echo "Unable to retrieve a valid package!"
                    report_bug
                    echo "Metadata URL: $metadata_url"
                    if test "x$download_url" != "x"; then
                      echo "Download URL: $download_url"
                    fi
                    if test "x$stderr_results" != "x"; then
                      echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
                    fi
                    exit 1
                  }

                  http_404_error() {
                    echo "Omnitruck artifact does not exist for version $version on platform $platform"
                    echo ""
                    echo "Either this means:"
                    echo "   - We do not support $platform"
                    echo "   - We do not have an artifact for $version"
                    echo ""
                    echo "This is often the latter case due to running a prerelease or RC version of chef"
                    echo "or a gem version which was only pushed to rubygems and not omnitruck."
                    echo ""
                    echo "You may be able to set your knife[:bootstrap_version] to the most recent stable"
                    echo "release of Chef to fix this problem (or the most recent stable major version number)."
                    echo ""
                    echo "In order to test the version parameter, adventurous users may take the Metadata URL"
                    echo "below and modify the '&v=<number>' parameter until you successfully get a URL that"
                    echo "does not 404 (e.g. via curl or wget).  You should be able to use '&v=11' or '&v=12'"
                    echo "succesfully."
                    echo ""
                    echo "If you cannot fix this problem by setting the bootstrap_version, it probably means"
                    echo "that $platform is not supported."
                    echo ""
                    # deliberately do not call report_bug to suppress bug report noise.
                    echo "Metadata URL: $metadata_url"
                    if test "x$download_url" != "x"; then
                      echo "Download URL: $download_url"
                    fi
                    if test "x$stderr_results" != "x"; then
                      echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
                    fi
                    exit 1
                  }

                  capture_tmp_stderr() {
                    # spool up /tmp/stderr from all the commands we called
                    if test -f "$tmp_dir/stderr"; then
                      output=`cat $tmp_dir/stderr`
                      stderr_results="${stderr_results}\nSTDERR from $1:\n\n$output\n"
                      rm $tmp_dir/stderr
                    fi
                  }

                  # do_wget URL FILENAME
                  do_wget() {
                    echo "trying wget..."
                    wget -O "$2" "$1" 2>$tmp_dir/stderr
                    rc=$?
                    # check for 404
                    grep "ERROR 404" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "wget"
                      return 1
                    fi

                    return 0
                  }

                  # do_curl URL FILENAME
                  do_curl() {
                    echo "trying curl..."
                    curl --retry 5 -sL -D $tmp_dir/stderr "$1" > "$2"
                    rc=$?
                    # check for 404
                    grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "curl"
                      return 1
                    fi

                    return 0
                  }

                  # do_fetch URL FILENAME
                  do_fetch() {
                    echo "trying fetch..."
                    fetch -o "$2" "$1" 2>$tmp_dir/stderr
                    # check for bad return status
                    test $? -ne 0 && return 1
                    return 0
                  }

                  # do_perl URL FILENAME
                  do_perl() {
                    echo "trying perl..."
                    perl -e 'use LWP::Simple; getprint($ARGV[0]);' "$1" > "$2" 2>$tmp_dir/stderr
                    rc=$?
                    # check for 404
                    grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "perl"
                      return 1
                    fi

                    return 0
                  }

                  # do_python URL FILENAME
                  do_python() {
                    echo "trying python..."
                    python -c "import sys,urllib2 ; sys.stdout.write(urllib2.urlopen(sys.argv[1]).read())" "$1" > "$2" 2>$tmp_dir/stderr
                    rc=$?
                    # check for 404
                    grep "HTTP Error 404" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "python"
                      return 1
                    fi
                    return 0
                  }

                  # returns 0 if checksums match
                  do_checksum() {
                    if exists sha256sum; then
                      echo "Comparing checksum with sha256sum..."
                      checksum=`sha256sum $1 | awk '{ print $1 }'`
                      return `test "x$checksum" = "x$2"`
                    elif exists shasum; then
                      echo "Comparing checksum with shasum..."
                      checksum=`shasum -a 256 $1 | awk '{ print $1 }'`
                      return `test "x$checksum" = "x$2"`
                    else
                      echo "WARNING: could not find a valid checksum program, pre-install shasum or sha256sum in your O/S image to get valdation..."
                      return 0
                    fi
                  }

                  # do_download URL FILENAME
                  do_download() {
                    echo "downloading $1"
                    echo "  to file $2"

                    url=`echo $1`
                    if test "x$platform" = "xsolaris2"; then
                      if test "x$platform_version" = "x5.9" -o "x$platform_version" = "x5.10"; then
                        # solaris 9 lacks openssl, solaris 10 lacks recent enough credentials - your base O/S is completely insecure, please upgrade
                        url=`echo $url | sed -e 's/https/http/'`
                      fi
                    fi

                    # we try all of these until we get success.
                    # perl, in particular may be present but LWP::Simple may not be installed

                    if exists wget; then
                      do_wget $url $2 && return 0
                    fi

                    if exists curl; then
                      do_curl $url $2 && return 0
                    fi

                    if exists fetch; then
                      do_fetch $url $2 && return 0
                    fi

                    if exists perl; then
                      do_perl $url $2 && return 0
                    fi

                    if exists python; then
                      do_python $url $2 && return 0
                    fi

                    unable_to_retrieve_package
                  }

                  # install_file TYPE FILENAME
                  # TYPE is "rpm", "deb", "solaris", "sh", etc.
                  install_file() {
                    echo "Installing $project $version"
                    case "$1" in
                      "rpm")
                        if test "x$platform" = "xnexus" || test "x$platform" = "xios_xr"; then
                          echo "installing with yum..."
                          yum install -yv "$2"
                        else
                          echo "installing with rpm..."
                          rpm -Uvh --oldpackage --replacepkgs "$2"
                        fi
                        ;;
                      "deb")
                        echo "installing with dpkg..."
                        dpkg -i "$2"
                        ;;
                      "bff")
                        echo "installing with installp..."
                        installp -aXYgd "$2" all
                        ;;
                      "solaris")
                        echo "installing with pkgadd..."
                        echo "conflict=nocheck" > $tmp_dir/nocheck
                        echo "action=nocheck" >> $tmp_dir/nocheck
                        echo "mail=" >> $tmp_dir/nocheck
                        pkgrm -a $tmp_dir/nocheck -n $project >/dev/null 2>&1 || true
                        pkgadd -G -n -d "$2" -a $tmp_dir/nocheck $project
                        ;;
                      "pkg")
                        echo "installing with installer..."
                        cd / && /usr/sbin/installer -pkg "$2" -target /
                        ;;
                      "dmg")
                        echo "installing dmg file..."
                        hdiutil detach "/Volumes/chef_software" >/dev/null 2>&1 || true
                        hdiutil attach "$2" -mountpoint "/Volumes/chef_software"
                        cd / && /usr/sbin/installer -pkg `find "/Volumes/chef_software" -name \*.pkg` -target /
                        hdiutil detach "/Volumes/chef_software"
                        ;;
                      "sh" )
                        echo "installing with sh..."
                        sh "$2"
                        ;;
                      *)
                        echo "Unknown filetype: $1"
                        report_bug
                        exit 1
                        ;;
                    esac
                    if test $? -ne 0; then
                      echo "Installation failed"
                      report_bug
                      exit 1
                    fi
                  }

                  if test "x$TMPDIR" = "x"; then
                    tmp="/tmp"
                  else
                    tmp=$TMPDIR
                  fi
                  # secure-ish temp dir creation without having mktemp available (DDoS-able but not expliotable)
                  tmp_dir="$tmp/install.sh.$$"
                  (umask 077 && mkdir $tmp_dir) || exit 1

                  ############
                  # end of helpers.sh
                  ############


                  project=chef
                  version=12.12.7+20160701150941
                  channel=unstable


                  # platform_detection.sh
                  ############
                  # This section makes platform detection compatible with omnitruck on the system
                  #   it runs.
                  #
                  # Outputs:
                  # $platform: Name of the platform.
                  # $platform_version: Version of the platform.
                  # $machine: System's architecture.
                  ############

                  #
                  # Platform and Platform Version detection
                  #
                  # NOTE: This should now match ohai platform and platform_version matching.
                  # do not invented new platform and platform_version schemas, just make this behave
                  # like what ohai returns as platform and platform_version for the server.
                  #
                  # ALSO NOTE: Do not mangle platform or platform_version here.  It is less error
                  # prone and more future-proof to do that in the server, and then all omnitruck clients
                  # will 'inherit' the changes (install.sh is not the only client of the omnitruck
                  # endpoint out there).
                  #

                  machine=`uname -m`
                  os=`uname -s`

                  if test -f "/etc/lsb-release" && grep -q DISTRIB_ID /etc/lsb-release && ! grep -q wrlinux /etc/lsb-release; then
                    platform=`grep DISTRIB_ID /etc/lsb-release | cut -d "=" -f 2 | tr '[A-Z]' '[a-z]'`
                    platform_version=`grep DISTRIB_RELEASE /etc/lsb-release | cut -d "=" -f 2`
                  elif test -f "/etc/debian_version"; then
                    platform="debian"
                    platform_version=`cat /etc/debian_version`
                  elif test -f "/etc/redhat-release"; then
                    platform=`sed 's/^\(.\+\) release.*/\1/' /etc/redhat-release | tr '[A-Z]' '[a-z]'`
                    platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/redhat-release`

                    # If /etc/redhat-release exists, we act like RHEL by default
                    if test "$platform" = "fedora"; then
                      # FIXME: stop remapping fedora to el
                      # FIXME: remove client side platform_version mangling and hard coded yolo
                      # Change platform version for use below.
                      platform_version="6.0"
                    fi

                    if test "$platform" = "xenserver"; then
                      # Current XenServer 6.2 is based on CentOS 5, platform is not reset to "el" server should hanlde response
                      platform="xenserver"
                    else
                      # FIXME: use "redhat"
                      platform="el"
                    fi

                  elif test -f "/etc/system-release"; then
                    platform=`sed 's/^\(.\+\) release.\+/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
                    platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
                    # amazon is built off of fedora, so act like RHEL
                    if test "$platform" = "amazon linux ami"; then
                      # FIXME: remove client side platform_version mangling and hard coded yolo, and remapping to deprecated "el"
                      platform="el"
                      platform_version="6.0"
                    fi
                  # Apple OS X
                  elif test -f "/usr/bin/sw_vers"; then
                    platform="mac_os_x"
                    # Matching the tab-space with sed is error-prone
                    platform_version=`sw_vers | awk '/^ProductVersion:/ { print $2 }' | cut -d. -f1,2`

                    # x86_64 Apple hardware often runs 32-bit kernels (see OHAI-63)
                    x86_64=`sysctl -n hw.optional.x86_64`
                    if test $x86_64 -eq 1; then
                      machine="x86_64"
                    fi
                  elif test -f "/etc/release"; then
                    machine=`/usr/bin/uname -p`
                    if grep -q SmartOS /etc/release; then
                      platform="smartos"
                      platform_version=`grep ^Image /etc/product | awk '{ print $3 }'`
                    else
                      platform="solaris2"
                      platform_version=`/usr/bin/uname -r`
                    fi
                  elif test -f "/etc/SuSE-release"; then
                    if grep -q 'Enterprise' /etc/SuSE-release;
                    then
                        platform="sles"
                        platform_version=`awk '/^VERSION/ {V = $3}; /^PATCHLEVEL/ {P = $3}; END {print V "." P}' /etc/SuSE-release`
                    else
                        platform="suse"
                        platform_version=`awk '/^VERSION =/ { print $3 }' /etc/SuSE-release`
                    fi
                  elif test "x$os" = "xFreeBSD"; then
                    platform="freebsd"
                    platform_version=`uname -r | sed 's/-.*//'`
                  elif test "x$os" = "xAIX"; then
                    platform="aix"
                    platform_version="`uname -v`.`uname -r`"
                    machine="powerpc"
                  elif test -f "/etc/os-release"; then
                    . /etc/os-release
                    if test "x$CISCO_RELEASE_INFO" != "x"; then
                      . $CISCO_RELEASE_INFO
                    fi

                    platform=$ID
                    platform_version=$VERSION
                  fi

                  if test "x$platform" = "x"; then
                    echo "Unable to determine platform version!"
                    report_bug
                    exit 1
                  fi

                  #
                  # NOTE: platform manging in the install.sh is DEPRECATED
                  #
                  # - install.sh should be true to ohai and should not remap
                  #   platform or platform versions.
                  #
                  # - remapping platform and mangling platform version numbers is
                  #   now the complete responsibility of the server-side endpoints
                  #

                  major_version=`echo $platform_version | cut -d. -f1`
                  case $platform in
                    # FIXME: should remove this case statement completely
                    "el")
                      # FIXME:  "el" is deprecated, should use "redhat"
                      platform_version=$major_version
                      ;;
                    "debian")
                      if test "x$major_version" = "x5"; then
                        # This is here for potential back-compat.
                        # We do not have 5 in versions we publish for anymore but we
                        # might have it for earlier versions.
                        platform_version="6"
                      else
                        platform_version=$major_version
                      fi
                      ;;
                    "freebsd")
                      platform_version=$major_version
                      ;;
                    "sles")
                      platform_version=$major_version
                      ;;
                    "suse")
                      platform_version=$major_version
                      ;;
                  esac

                  # normalize the architecture we detected
                  case $machine in
                    "x86_64"|"amd64"|"x64")
                      machine="x86_64"
                      ;;
                    "i386"|"i86pc"|"x86"|"i686")
                      machine="i386"
                      ;;
                    "sparc"|"sun4u"|"sun4v")
                      machine="sparc"
                      ;;
                  esac

                  if test "x$platform_version" = "x"; then
                    echo "Unable to determine platform version!"
                    report_bug
                    exit 1
                  fi

                  if test "x$platform" = "xsolaris2"; then
                    # hack up the path on Solaris to find wget, pkgadd
                    PATH=/usr/sfw/bin:/usr/sbin:$PATH
                    export PATH
                  fi

                  echo "$platform $platform_version $machine"

                  ############
                  # end of platform_detection.sh
                  ############


                  # artifactory_urls.sh
                  ############
                  # This section sets up the information for a build to be installed from artifactory
                  #  then uses $platform, $platform_version and $machine to select the correct
                  #  version.
                  #
                  # Inputs:
                  # $platform:
                  # $platform_version:
                  # $machine:
                  #
                  # Outputs:
                  # $download_url:
                  # $sha256:
                  ############


                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/ppc64le"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_ppc64el.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 89a564bafc4b22db5f5539fe1925587c6bf2334f0c344e0c13264f52ae537b0a" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.9/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.9/chef-12.12.7+20160701150941-1.dmg" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.10/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.10/chef-12.12.7+20160701150941-1.dmg" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.11/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.11/chef-12.12.7+20160701150941-1.dmg" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ios_xr/6/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ios_xr/6/chef-12.12.7+20160701150941-1.ios_xr6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 96689d0525260209d68e4991db7144b0aa31a6f7628c9e4e5f23c6f150025fb0" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/6/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/7/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/8/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/nexus/7/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/nexus/7/chef-12.12.7+20160701150941-1.nexus7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 f5c620dc0166571903f28990240a5bbb1123bd6e8433a8d8d4aa9b2ba8587bbb" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.i386.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 6d3b80e324377a5a80889d51ec5b0d0730d7503eb14c32a4ed7fd9e2ad21d615" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.i386.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 8d63b437804b48672cc7b325bd3eb3a1ff525978b894c9b6e7c63db011aac295" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/5/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.i386.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 e910142a9bdc53757635db7f997f00e5415cc6dadea981aeec1e999489586ee2" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/7/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 13296dfe3559a3cb5664a8319e57153635ba867a3a72feb4b040ce833fc22914" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/6/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.i386.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 e31a417ea73cefb3424496b07b19e188a5d079db40fc29bae0c8a24b2fb9d558" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/7/ppc64le"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64le.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 5fb71d38e54b0a6e8fc142f48e693de2dc54891edde59f65db61bf097766a3de" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/6/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/7/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/7/ppc64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 bc5a1ea39782df044cd069523d6534f72222855bbf99a98961858cdaee51d7c0" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/8/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/amd64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 f4c5e3b437e5129e89a5ca0d69036dcf0e6e4b21a0eef61b495ab63a0be2fe94" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/5/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 58bed7db8fe43a1e8441d9a2a5e46b9fe4ab7e932dd1f7f5e0dc53adc004704c" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/6/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 e30aac011f866a56f3542eaaa17cf18e40df6021e997e32fd3d1ae5b8f11e274" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/amd64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 6fc165d1fbc96f5ed5ffbfedb154e7ede4d6e87fccec3c80c0de5510527bd673" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/aix/6.1/powerpc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/6.1/chef-12.12.7+20160701150941-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/aix/7.1/powerpc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/7.1/chef-12.12.7+20160701150941-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/sparc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/sparc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817" >> "$artifact_info_dir/artifact_info"


                  artifact_info_for_platform="$tmp_dir/artifact_info/$platform/$platform_version/$machine/artifact_info"

                  download_url=`awk '$1 == "url" { print $2 }' "$artifact_info_for_platform"`
                  sha256=`awk '$1 == "sha256" { print $2 }' "$artifact_info_for_platform"`


                  # fetch_package.sh
                  ############
                  # This section fetchs a package from $download_url and verifies its metadata.
                  #
                  # Inputs:
                  # $download_url:
                  # $tmp_dir:
                  # Optional Inputs:
                  # $cmdline_filename: Name of the package downloaded on local disk.
                  # $cmdline_dl_dir: Name of the directory downloaded package will be saved to on local disk.
                  #
                  # Outputs:
                  # $download_filename: Name of the downloaded file on local disk.
                  # $filetype: Type of the file downloaded.
                  ############

                  filename=`echo $download_url | sed -e 's/^.*\///'`
                  filetype=`echo $filename | sed -e 's/^.*\.//'`

                  # use either $tmp_dir, the provided directory (-d) or the provided filename (-f)
                  if test "x$cmdline_filename" != "x"; then
                    download_filename="$cmdline_filename"
                  elif test "x$cmdline_dl_dir" != "x"; then
                    download_filename="$cmdline_dl_dir/$filename"
                  else
                    download_filename="$tmp_dir/$filename"
                  fi

                  # ensure the parent directory where to download the installer always exists
                  download_dir=`dirname $download_filename`
                  (umask 077 && mkdir -p $download_dir) || exit 1

                  # check if we have that file locally available and if so verify the checksum
                  cached_file_available="false"
                  if test -f $download_filename; then
                    echo "$download_filename already exists, verifiying checksum..."
                    if do_checksum "$download_filename" "$sha256"; then
                      echo "checksum compare succeeded, using existing file!"
                      cached_file_available="true"
                    else
                      echo "checksum mismatch, downloading latest version of the file"
                    fi
                  fi

                  # download if no local version of the file available
                  if test "x$cached_file_available" != "xtrue"; then
                    do_download "$download_url"  "$download_filename"
                    do_checksum "$download_filename" "$sha256" || checksum_mismatch
                  fi

                  ############
                  # end of fetch_package.sh
                  ############


                  # install_package.sh
                  ############
                  # Installs a package and removed the temp directory.
                  #
                  # Inputs:
                  # $download_filename: Name of the file to be installed.
                  # $filetype: Type of the file to be installed.
                  # $version: The version requested. Used only for warning user if not set.
                  ############

                  if test "x$version" = "x"; then
                    echo
                    echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
                    echo
                    echo "You are installing an omnibus package without a version pin.  If you are installing"
                    echo "on production servers via an automated process this is DANGEROUS and you will"
                    echo "be upgraded without warning on new releases, even to new major releases."
                    echo "Letting the version float is only appropriate in desktop, test, development or"
                    echo "CI/CD environments."
                    echo
                    echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
                    echo
                  fi

                  install_file $filetype "$download_filename"

                  if test "x$tmp_dir" != "x"; then
                    rm -r "$tmp_dir"
                  fi

                  ############
                  # end of install_package.sh
                  ############

                  EOL
                  chmod +x /tmp/chef-installer.sh
                  sudo -E /tmp/chef-installer.sh)
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         /bin/bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         el 6 x86_64
                         downloading http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.x86_64.rpm
                           to file /tmp/install.sh.957/chef-12.12.7+20160701150941-1.el6.x86_64.rpm
                         trying curl...
                         Comparing checksum with sha256sum...
                         Starting Chef Client, version 12.12.7
                         Installing chef 12.12.7+20160701150941
                         installing with rpm...
                         warning: /tmp/install.sh.957/chef-12.12.7+20160701150941-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
                         Waited 95/300s for instance <i-e739e248> to become ready.
                         Waited 95/300s for instance <i-473ae1e8> to become ready.
                         Preparing...                                                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                         Creating a new client identity for fips-integration-centos-6 using the validator key.
                         resolving cookbooks for run list: []
                         Synchronizing Cookbooks:
                         Installing Cookbook Gems:
                         Compiling Cookbooks...
                         [2016-07-01T15:48:42+00:00] WARN: Node fips-integration-centos-6 has an empty run list.
                         Converging 0 resources
                         Starting audit phase

                         Finished in 0.00031 seconds (files took 0.3915 seconds to load)
                         0 examples, 0 failures
                         Auditing complete

                         Running handlers:
                         Running handlers complete
                         Chef Client finished, 0/0 resources updated in 03 seconds
                         [2016-07-01T15:48:43+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json
                  D      Cleaning up local sandbox in /tmp/cheftest/fips-integration-centos-6-sandbox-20160701-12947-1s5uurn
                         Finished converging <fips-integration-centos-6> (0m13.45s).
                  D      [SSH] shutting previous connection root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] closing connection to root@10.194.8.163<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                            1:chef                                                               (  1%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (  3%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (  6%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (  8%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        ( 10%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       ( 13%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      ( 15%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     ( 17%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    ( 19%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   ( 22%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  ( 24%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 ( 26%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                ( 28%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               ( 31%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              ( 33%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             ( 35%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            ( 38%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           ( 40%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          ( 42%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         ( 44%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        ( 47%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       ( 49%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      ( 51%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     ( 53%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    ( 56%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   ( 58%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  ( 60%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 ( 63%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                ( 65%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               ( 67%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              ( 69%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             ( 72%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            ( 74%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           ( 76%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          ( 78%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         ( 81%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        ( 83%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       ( 85%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      ( 88%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     ( 90%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    ( 92%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   ( 94%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  ( 97%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### ( 99%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                         Waited 100/300s for instance <i-e739e248> to become ready.
                         Waited 100/300s for instance <i-473ae1e8> to become ready.
                  D      Console output: ---
                  2016/07/01 15:48:29Z: EC2ConfigMonitorState: 0
                  2016/07/01 15:48:29Z: Windows sysprep configuration complete.
                  2016/07/01 15:48:32Z: AMI Origin Version: 2016.06.15
                  2016/07/01 15:48:32Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
                  2016/07/01 15:48:32Z: OS: Microsoft Windows NT 6.3.9600
                  2016/07/01 15:48:32Z: OsVersion: 6.3
                  2016/07/01 15:48:32Z: OsProductName: Windows Server 2012 R2 Standard
                  2016/07/01 15:48:32Z: OsBuildLabEx: 9600.18292.amd64fre.winblue_ltsb.160330-1744
                  2016/07/01 15:48:32Z: Language: en-US
                  2016/07/01 15:48:32Z: TimeZone: Coordinated Universal Time
                  2016/07/01 15:48:32Z: Offset: UTC 00:00:00
                  2016/07/01 15:48:32Z: EC2 Agent: Ec2Config service v3.17.1032
                  2016/07/01 15:48:35Z: Message: Waiting for meta-data accessibility...
                  2016/07/01 15:48:35Z: Message: Meta-data is now available.
                  2016/07/01 15:48:36Z: AMI-ID: ami-8d0acfed
                  2016/07/01 15:48:36Z: Instance-ID: i-473ae1e8
                  2016/07/01 15:48:37Z: Driver: AWS PV Network Device v7.3.2.0
                  2016/07/01 15:48:37Z: Driver: AWS PV Storage Host Adapter v7.3.2.0
                  2016/07/01 15:48:37Z: Ec2SetPassword: Enabled
                  2016/07/01 15:48:38Z: RDPCERTIFICATE-SUBJECTNAME: WIN-FP7MRPGAKVT
                  2016/07/01 15:48:38Z: RDPCERTIFICATE-THUMBPRINT: 8B8E9B58805BFC12496FD1749ECD48824BFA7F24
                  2016/07/01 15:48:41Z: Username: Administrator
                  2016/07/01 15:48:41Z: Password: <Password>
                  TJ2InLy1kVux2DEj6/kYCBLPbJcXMlXa2Y47wpO0GlB3jCzDn5fZpua5LdqPHCcmRk7JZa0v82+7t/e5JDUV42zX/2uV4jCpbNh3e4rEMipWmyr2o7FmsJIYrlIoVCc8Z/KXXL4VKLHO3NmH/Mz97CeAWeqdstOSd3bdEaLnx+BK0t3QaBWYpNbdoEK2CzqvBmBk0rsU2/ImRXT5eLrskgRzgpPWCneGe+7lTRHflfN5SKdMIvPnIKnZKtnF2aAZZphVexR/EIkFNqGPGlzjrr4IeW48kUrNzodMT6pmq5VJEj/btJBCQVNJfho8aM7B+Car4opnYHk3tetjndYfEA==
                  </Password>
                  2016/07/01 15:48:42Z: Message: Windows is Ready to use

                         Waited 0/300s for instance <i-473ae1e8> to fetch windows admin password.
                         Retrieved Windows password for instance <i-473ae1e8>.
                         EC2 instance <i-473ae1e8> ready.
                         /bin/sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                  D      [WinRM] opening remote shell on http://10.194.13.185:5985/wsman
                         Thank you for installing Chef!
                  D      [SSH] root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '
                  sudo_rm="sudo -E rm"
                  dirs="/tmp/kitchen/clients /tmp/kitchen/cookbooks /tmp/kitchen/data /tmp/kitchen/data_bags /tmp/kitchen/encrypted_data_bag_secret /tmp/kitchen/environments /tmp/kitchen/roles"
                  root_path="/tmp/kitchen"

                  $sudo_rm -rf $dirs
                  mkdir -p $root_path
                  ')
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         Transferring files to <fips-unit-functional-centos-6>
                  D      TIMING: scp async upload (Kitchen::Transport::Ssh)
                  D      TIMING: scp async upload (Kitchen::Transport::Ssh) took (0m0.20s)
                  D      Transfer complete
                  D      Attempting to execute command - try 1 of 1.
                  D      [SSH] root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '
                  sudo -E /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json --chef-zero-port 8889
                  ')
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         Starting Chef Client, version 12.12.7
                         Creating a new client identity for fips-unit-functional-centos-6 using the validator key.
                         resolving cookbooks for run list: []
                         Synchronizing Cookbooks:
                         Installing Cookbook Gems:
                         Compiling Cookbooks...
                         [2016-07-01T15:48:50+00:00] WARN: Node fips-unit-functional-centos-6 has an empty run list.
                         Converging 0 resources
                         Starting audit phase
                         Waited 105/300s for instance <i-e739e248> to become ready.

                         Finished in 0.0003 seconds (files took 0.4111 seconds to load)
                         0 examples, 0 failures
                         Auditing complete

                         Running handlers:
                         Running handlers complete
                         Chef Client finished, 0/0 resources updated in 03 seconds
                         [2016-07-01T15:48:51+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json
                  D      Cleaning up local sandbox in /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160701-12947-1tbjgv7
                         Finished converging <fips-unit-functional-centos-6> (0m11.97s).
                  D      [SSH] shutting previous connection root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] closing connection to root@10.194.13.47<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                         Waited 110/300s for instance <i-e739e248> to become ready.
                         Waited 115/300s for instance <i-e739e248> to become ready.
                  D      Console output: ---
                  2016/07/01 15:48:37Z: EC2ConfigMonitorState: 0
                  2016/07/01 15:48:37Z: Windows sysprep configuration complete.
                  2016/07/01 15:48:41Z: AMI Origin Version: 2016.06.15
                  2016/07/01 15:48:41Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
                  2016/07/01 15:48:41Z: OS: Microsoft Windows NT 6.3.9600
                  2016/07/01 15:48:41Z: OsVersion: 6.3
                  2016/07/01 15:48:41Z: OsProductName: Windows Server 2012 R2 Standard
                  2016/07/01 15:48:41Z: OsBuildLabEx: 9600.18292.amd64fre.winblue_ltsb.160330-1744
                  2016/07/01 15:48:41Z: Language: en-US
                  2016/07/01 15:48:41Z: TimeZone: Coordinated Universal Time
                  2016/07/01 15:48:41Z: Offset: UTC 00:00:00
                  2016/07/01 15:48:41Z: EC2 Agent: Ec2Config service v3.17.1032
                  2016/07/01 15:48:44Z: Message: Waiting for meta-data accessibility...
                  2016/07/01 15:48:44Z: Message: Meta-data is now available.
                  2016/07/01 15:48:45Z: AMI-ID: ami-8d0acfed
                  2016/07/01 15:48:45Z: Instance-ID: i-e739e248
                  2016/07/01 15:48:48Z: Driver: AWS PV Network Device v7.3.2.0
                  2016/07/01 15:48:48Z: Driver: AWS PV Storage Host Adapter v7.3.2.0
                  2016/07/01 15:48:48Z: Ec2SetPassword: Enabled
                  2016/07/01 15:48:49Z: RDPCERTIFICATE-SUBJECTNAME: WIN-KOHDF65C0IR
                  2016/07/01 15:48:49Z: RDPCERTIFICATE-THUMBPRINT: FDF1199C125F40BA56587159A63F628DADA5F29A
                  2016/07/01 15:48:52Z: Username: Administrator
                  2016/07/01 15:48:52Z: Password: <Password>
                  iLIQGOB2sfpK6zZkbtMr2ozEqMSsUHSkluv+aNg9GVkKUBwFSfEIqWs4hshNbJNBrQlDfKb7CPzQySxyDhzPpjV3K+1MXxAe80g1UQekNG+l+NJJJHPpdXCJNzoMs8j28Qg1DleXVQYaAvUDFh39oAyHIm2ZVecyW/AqhPcp2FUod890fNOUosWaWmUCOG86Eb6nD0xmWtoOVg9Obkk/Ko66uQBsfjaUYOXuZMsOvYKX4hKSxGApxXE3PqfOFGPX21xhUr5K0fPTgl3vx0mX9I04vWr2NzZ12QL5n6Qd/hmZi7085HWL77EBlAgC9perQ+Xs9vE5WsGYnN1i2q59PA==
                  </Password>
                  2016/07/01 15:48:54Z: Message: Windows is Ready to use

                         Waited 0/300s for instance <i-e739e248> to fetch windows admin password.
                         Retrieved Windows password for instance <i-e739e248>.
                         EC2 instance <i-e739e248> ready.
                  D      [WinRM] opening remote shell on http://10.194.9.174:5985/wsman
                  D      [WinRM] remote shell F4B473F6-BB8A-48F3-B6E7-30914AE072CB is open on http://10.194.13.185:5985/wsman
                  D      [WinRM] negotiate::http://10.194.13.185:5985/wsman<{:user=>"administrator", :pass=>"ZcREED2xrG", :elevated_username=>"administrator", :elevated_password=>"ZcREED2xrG", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
                  ')
                  D      [WinRM] remote shell 607C7234-6E59-49B0-9768-793CA8BB26CE is open on http://10.194.9.174:5985/wsman
                  D      [WinRM] negotiate::http://10.194.9.174:5985/wsman<{:user=>"administrator", :pass=>"TaBhhW.%e!", :elevated_username=>"administrator", :elevated_password=>"TaBhhW.%e!", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
                  ')
                         [WinRM] Established

                  D      [WinRM] reusing existing connection negotiate::http://10.194.9.174:5985/wsman<{:user=>"administrator", :pass=>"TaBhhW.%e!", :elevated_username=>"administrator", :elevated_password=>"TaBhhW.%e!", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                  D      [WinRM] negotiate::http://10.194.9.174:5985/wsman<{:user=>"administrator", :pass=>"TaBhhW.%e!", :elevated_username=>"administrator", :elevated_password=>"TaBhhW.%e!", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)


                             Directory: C:\chef\ohai\hints


                         Mode                LastWriteTime     Length Name
                         ----                -------------     ------ ----
                         -a---          7/1/2016   3:49 PM          0 ec2.json


                  D      ec2:create '10.194.9.174'
                         Finished creating <fips-integration-windows-2012r2> (2m32.38s).
                  -----> Converging <fips-integration-windows-2012r2>...
                         Preparing files for transfer
                  D      Creating local sandbox in /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160701-12947-1t0h8b1
                         Preparing dna.json
                  D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                         Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                         Removing non-cookbook files before transfer
                         Preparing validation.pem
                  D      Using a dummy validation.pem
                         Preparing client.rb
                  D      Creating client.rb from {:node_name=>"fips-integration-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                  D      [WinRM] reusing existing connection negotiate::http://10.194.9.174:5985/wsman<{:user=>"administrator", :pass=>"TaBhhW.%e!", :elevated_username=>"administrator", :elevated_password=>"TaBhhW.%e!", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                  D      [WinRM] negotiate::http://10.194.9.174:5985/wsman<{:user=>"administrator", :pass=>"TaBhhW.%e!", :elevated_username=>"administrator", :elevated_password=>"TaBhhW.%e!", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
                  function Get-PlatformVersion {
                    switch -regex ((get-wmiobject win32_operatingsystem).version) {
                      '10\.0\.\d+' {$platform_version = '2012r2'}
                      '6\.3\.\d+'  {$platform_version = '2012r2'}
                      '6\.2\.\d+'  {$platform_version = '2012'}
                      '6\.1\.\d+'  {$platform_version = '2008r2'}
                      '6\.0\.\d+'  {$platform_version = '2008'}
                    }
                    return $platform_version
                  }

                  function Get-PlatformArchitecture {
                    if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                      $architecture = 'x86_64'
                    } else {
                      $architecture = 'i386'
                    }
                    return $architecture
                  }

                  function New-Uri {
                    param ($baseuri, $newuri)

                    try {
                    new-object System.Uri $baseuri, $newuri
                    }
                    catch [System.Management.Automation.MethodInvocationException]{
                      Write-Error "$($_.exception.message)"
                      throw $_.exception
                    }
                  }

                  function Get-WebContent {
                    param ($uri, $filepath)
                    $proxy = New-Object -TypeName System.Net.WebProxy
                    $wc = new-object System.Net.WebClient
                    $proxy.Address = $env:http_proxy
                    $wc.Proxy = $proxy

                    try {
                      if ([string]::IsNullOrEmpty($filepath)) {
                        $wc.downloadstring($uri)
                      }
                      else {
                        $wc.downloadfile($uri, $filepath)
                      }
                    }
                    catch {
                      $exception = $_.Exception
                      Write-Host "There was an error: "
                      do {
                        Write-Host "`t$($exception.message)"
                        $exception = $exception.innerexception
                      } while ($exception)
                      throw "Failed to download from $uri."
                    }
                  }

                  function Test-ProjectPackage {
                    [cmdletbinding()]
                    param ($Path, $Algorithm = 'SHA256', $Hash)

                    if (-not (get-command get-filehash))   {
                      function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                      function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                      function Get-FileHash ($Path, $Algorithm) {
                        $Path = (resolve-path $path).providerpath
                        $hash = @{Algorithm = $Algorithm; Path = $Path}
                        use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                          use ($in = (gi $path).OpenRead()) {
                            $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                          }
                        }
                        new-object PSObject -Property $hash
                      }
                    }
                    Write-Verbose "Testing the $Algorithm hash for $path."
                    $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
                    Write-Verbose "`tDesired Hash - '$hash'"
                    Write-Verbose "`tActual Hash  - '$ActualHash'"
                    $Valid = $ActualHash -eq $Hash
                    if (-not $Valid) {
                      Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
                    }
                    return $Valid
                  }

                  function Get-ProjectMetadata {
                    <#
                      .SYNOPSIS
                      Get metadata for a Chef Software, Inc. project
                      .DESCRIPTION
                      Get metadata for project
                      .EXAMPLE
                      iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                      Gets the download url and SHA256 checksum for the latest stable release of Chef.
                      .EXAMPLE
                      iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                      Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
                    #>
                    [cmdletbinding()]
                    param (
                      # Base url to retrieve metadata from.
                      [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                      [string]
                      # Project to install
                      [string]
                      $project = 'chef',
                      # Version of the application to install
                      # This parameter is optional, if not supplied it will provide the latest version,
                      # and if an iteration number is not specified, it will grab the latest available iteration.
                      # Partial version numbers are also acceptable (using v=11
                      # will grab the latest 11.x client which matches the other flags).
                      [string]
                      $version,
                      # Release channel to install from
                      $channel = 'unstable',
                      # The following legacy switches are just aliases for the current channel
                      [switch]
                      $prerelease,
                      [switch]
                      $nightlies,
                      [validateset('auto', 'i386', 'x86_64')]
                      [string]
                      $architecture = 'auto'
                    )

                    # PowerShell is only on Windows ATM
                    $platform = 'windows'
                    Write-Verbose "Platform: $platform"

                    $platform_version = Get-PlatformVersion
                    Write-Verbose "Platform Version: $platform_version"

                    if ($architecture -eq 'auto') {
                      $architecture = Get-PlatformArchitecture
                    }

                    Write-Verbose "Architecture: $architecture"
                    Write-Verbose "Project: $project"


                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 89a564bafc4b22db5f5539fe1925587c6bf2334f0c344e0c13264f52ae537b0a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.9/chef-12.12.7+20160701150941-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.10/chef-12.12.7+20160701150941-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.11/chef-12.12.7+20160701150941-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ios_xr/6/chef-12.12.7+20160701150941-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 96689d0525260209d68e4991db7144b0aa31a6f7628c9e4e5f23c6f150025fb0" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/nexus/7/chef-12.12.7+20160701150941-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 f5c620dc0166571903f28990240a5bbb1123bd6e8433a8d8d4aa9b2ba8587bbb" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 6d3b80e324377a5a80889d51ec5b0d0730d7503eb14c32a4ed7fd9e2ad21d615" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 8d63b437804b48672cc7b325bd3eb3a1ff525978b894c9b6e7c63db011aac295" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e910142a9bdc53757635db7f997f00e5415cc6dadea981aeec1e999489586ee2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 13296dfe3559a3cb5664a8319e57153635ba867a3a72feb4b040ce833fc22914" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e31a417ea73cefb3424496b07b19e188a5d079db40fc29bae0c8a24b2fb9d558" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 5fb71d38e54b0a6e8fc142f48e693de2dc54891edde59f65db61bf097766a3de" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 bc5a1ea39782df044cd069523d6534f72222855bbf99a98961858cdaee51d7c0" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 f4c5e3b437e5129e89a5ca0d69036dcf0e6e4b21a0eef61b495ab63a0be2fe94" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 58bed7db8fe43a1e8441d9a2a5e46b9fe4ab7e932dd1f7f5e0dc53adc004704c" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e30aac011f866a56f3542eaaa17cf18e40df6021e997e32fd3d1ae5b8f11e274" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 6fc165d1fbc96f5ed5ffbfedb154e7ede4d6e87fccec3c80c0de5510527bd673" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/6.1/chef-12.12.7+20160701150941-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/7.1/chef-12.12.7+20160701150941-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817" | out-file "$artifact_info_dir/artifact_info" -Append


                    $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

                    $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                      foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

                    Write-Verbose "Project details: "
                    foreach ($key in $package_metadata.keys) {
                      Write-Verbose "`t$key = $($package_metadata[$key])"
                    }
                    $package_metadata
                  }

                  function Install-Project {
                    <#
                      .SYNOPSIS
                      Install a Chef Software, Inc. product
                      .DESCRIPTION
                      Install a Chef Software, Inc. product
                      .EXAMPLE
                      iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                      Installs the latest stable version of Chef.
                      .EXAMPLE
                      iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                      Installs the latest integration build of the Chef Development Kit
                    #>
                    [cmdletbinding(SupportsShouldProcess=$true)]
                    param (
                      # Project to install
                      [string]
                      $project = 'chef',
                      # Release channel to install from
                      [validateset('current', 'stable', 'unstable')]
                      [string]
                      $channel = 'stable',
                      # Version of the application to install
                      # This parameter is optional, if not supplied it will provide the latest version,
                      # and if an iteration number is not specified, it will grab the latest available iteration.
                      # Partial version numbers are also acceptable (using v=11
                      # will grab the latest 11.x client which matches the other flags).
                      [string]
                      $version,
                      # Full path for the downloaded installer.
                      [string]
                      $filename,
                      # Full path to the location to download the installer
                      [string]
                      $download_directory = $env:temp,
                      # The following legacy switches are just aliases for the current channel
                      [switch]
                      $prerelease,
                      [switch]
                      $nightlies,
                      [validateset('auto', 'i386', 'x86_64')]
                      [string]
                      $architecture = 'auto'
                    )

                    $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

                    if (-not [string]::IsNullOrEmpty($filename)) {
                      $download_directory = split-path $filename
                      $filename = split-path $filename -leaf
                      if ([string]::IsNullOrEmpty($download_directory)) {
                        $download_directory = $pwd
                      }
                    }
                    else {
                      $filename = ($package_metadata.url -split '/')[-1]
                    }
                    Write-Verbose "Download directory: $download_directory"
                    Write-Verbose "Filename: $filename"

                    if (-not (test-path $download_directory)) {
                      mkdir $download_directory
                    }
                    $download_directory = (resolve-path $download_directory).providerpath
                    $download_destination = join-path $download_directory $filename

                    if ((test-path $download_destination) -and
                      (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                      Write-Verbose "Found existing valid installer at $download_destination."
                    }
                    else {
                      if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                        Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                        Get-WebContent $package_metadata.url -filepath $download_destination
                      }
                    }

                    if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                      if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                        Write-Host "Installing $project from $download_destination"
                        $installingProject = $True
                        $installAttempts = 0
                        while ($installingProject) {
                          $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                          $p.WaitForExit()
                          if ($p.ExitCode -eq 1618) {
                            Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                            continue
                          } elseif ($p.ExitCode -ne 0) {
                            throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                          }
                          $installingProject = $False
                        }
                      }
                      else {
                        throw "Failed to validate the downloaded installer for $project."
                      }
                    }
                  }
                  set-alias install -value Install-Project
                  export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

                  }

                  install -project chef -version 12.12.7+20160701150941 -channel unstable
                  )
                  D      creating hash for file $env:TEMP/fips-integration-windows-2012r2-long_script.ps1
                  D      Running check_files.ps1
                  D      @{
                  D        "f819689a04a73f68cedca447fe8bbc14" = @{
                  D          "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1";
                  D          "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
                  D          "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                  D        }
                  D      }
                         [WinRM] Established

                  D      [WinRM] reusing existing connection negotiate::http://10.194.13.185:5985/wsman<{:user=>"administrator", :pass=>"ZcREED2xrG", :elevated_username=>"administrator", :elevated_password=>"ZcREED2xrG", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                  D      [WinRM] negotiate::http://10.194.13.185:5985/wsman<{:user=>"administrator", :pass=>"ZcREED2xrG", :elevated_username=>"administrator", :elevated_password=>"ZcREED2xrG", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)


                             Directory: C:\chef\ohai\hints


                         Mode                LastWriteTime     Length Name
                         ----                -------------     ------ ----
                         -a---          7/1/2016   3:49 PM          0 ec2.json


                  D      ec2:create '10.194.13.185'
                         Finished creating <fips-unit-functional-windows-2012r2> (2m33.39s).
                  -----> Converging <fips-unit-functional-windows-2012r2>...
                         Preparing files for transfer
                  D      Creating local sandbox in /tmp/cheftest/fips-unit-functional-windows-2012r2-sandbox-20160701-12947-1uk9hkk
                         Preparing dna.json
                  D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                         Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                         Removing non-cookbook files before transfer
                         Preparing validation.pem
                  D      Using a dummy validation.pem
                         Preparing client.rb
                  D      Creating client.rb from {:node_name=>"fips-unit-functional-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                  D      [WinRM] reusing existing connection negotiate::http://10.194.13.185:5985/wsman<{:user=>"administrator", :pass=>"ZcREED2xrG", :elevated_username=>"administrator", :elevated_password=>"ZcREED2xrG", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                  D      [WinRM] negotiate::http://10.194.13.185:5985/wsman<{:user=>"administrator", :pass=>"ZcREED2xrG", :elevated_username=>"administrator", :elevated_password=>"ZcREED2xrG", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
                  function Get-PlatformVersion {
                    switch -regex ((get-wmiobject win32_operatingsystem).version) {
                      '10\.0\.\d+' {$platform_version = '2012r2'}
                      '6\.3\.\d+'  {$platform_version = '2012r2'}
                      '6\.2\.\d+'  {$platform_version = '2012'}
                      '6\.1\.\d+'  {$platform_version = '2008r2'}
                      '6\.0\.\d+'  {$platform_version = '2008'}
                    }
                    return $platform_version
                  }

                  function Get-PlatformArchitecture {
                    if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                      $architecture = 'x86_64'
                    } else {
                      $architecture = 'i386'
                    }
                    return $architecture
                  }

                  function New-Uri {
                    param ($baseuri, $newuri)

                    try {
                    new-object System.Uri $baseuri, $newuri
                    }
                    catch [System.Management.Automation.MethodInvocationException]{
                      Write-Error "$($_.exception.message)"
                      throw $_.exception
                    }
                  }

                  function Get-WebContent {
                    param ($uri, $filepath)
                    $proxy = New-Object -TypeName System.Net.WebProxy
                    $wc = new-object System.Net.WebClient
                    $proxy.Address = $env:http_proxy
                    $wc.Proxy = $proxy

                    try {
                      if ([string]::IsNullOrEmpty($filepath)) {
                        $wc.downloadstring($uri)
                      }
                      else {
                        $wc.downloadfile($uri, $filepath)
                      }
                    }
                    catch {
                      $exception = $_.Exception
                      Write-Host "There was an error: "
                      do {
                        Write-Host "`t$($exception.message)"
                        $exception = $exception.innerexception
                      } while ($exception)
                      throw "Failed to download from $uri."
                    }
                  }

                  function Test-ProjectPackage {
                    [cmdletbinding()]
                    param ($Path, $Algorithm = 'SHA256', $Hash)

                    if (-not (get-command get-filehash))   {
                      function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                      function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                      function Get-FileHash ($Path, $Algorithm) {
                        $Path = (resolve-path $path).providerpath
                        $hash = @{Algorithm = $Algorithm; Path = $Path}
                        use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                          use ($in = (gi $path).OpenRead()) {
                            $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                          }
                        }
                        new-object PSObject -Property $hash
                      }
                    }
                    Write-Verbose "Testing the $Algorithm hash for $path."
                    $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
                    Write-Verbose "`tDesired Hash - '$hash'"
                    Write-Verbose "`tActual Hash  - '$ActualHash'"
                    $Valid = $ActualHash -eq $Hash
                    if (-not $Valid) {
                      Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
                    }
                    return $Valid
                  }

                  function Get-ProjectMetadata {
                    <#
                      .SYNOPSIS
                      Get metadata for a Chef Software, Inc. project
                      .DESCRIPTION
                      Get metadata for project
                      .EXAMPLE
                      iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                      Gets the download url and SHA256 checksum for the latest stable release of Chef.
                      .EXAMPLE
                      iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                      Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
                    #>
                    [cmdletbinding()]
                    param (
                      # Base url to retrieve metadata from.
                      [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                      [string]
                      # Project to install
                      [string]
                      $project = 'chef',
                      # Version of the application to install
                      # This parameter is optional, if not supplied it will provide the latest version,
                      # and if an iteration number is not specified, it will grab the latest available iteration.
                      # Partial version numbers are also acceptable (using v=11
                      # will grab the latest 11.x client which matches the other flags).
                      [string]
                      $version,
                      # Release channel to install from
                      $channel = 'unstable',
                      # The following legacy switches are just aliases for the current channel
                      [switch]
                      $prerelease,
                      [switch]
                      $nightlies,
                      [validateset('auto', 'i386', 'x86_64')]
                      [string]
                      $architecture = 'auto'
                    )

                    # PowerShell is only on Windows ATM
                    $platform = 'windows'
                    Write-Verbose "Platform: $platform"

                    $platform_version = Get-PlatformVersion
                    Write-Verbose "Platform Version: $platform_version"

                    if ($architecture -eq 'auto') {
                      $architecture = Get-PlatformArchitecture
                    }

                    Write-Verbose "Architecture: $architecture"
                    Write-Verbose "Project: $project"


                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 89a564bafc4b22db5f5539fe1925587c6bf2334f0c344e0c13264f52ae537b0a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.9/chef-12.12.7+20160701150941-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.10/chef-12.12.7+20160701150941-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/mac_os_x/10.11/chef-12.12.7+20160701150941-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c30fc4d76bc94ea50eb638a87fec2ce6517fc897a7a8b380ae79dd40ee696fef" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ios_xr/6/chef-12.12.7+20160701150941-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 96689d0525260209d68e4991db7144b0aa31a6f7628c9e4e5f23c6f150025fb0" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e185e5d5ac0062e15272bed4d902f46608e5339e883ba0840382ed6354959021" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/nexus/7/chef-12.12.7+20160701150941-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 f5c620dc0166571903f28990240a5bbb1123bd6e8433a8d8d4aa9b2ba8587bbb" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 6d3b80e324377a5a80889d51ec5b0d0730d7503eb14c32a4ed7fd9e2ad21d615" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7553fa5346055ac54811bce5c49673a604ecb1e5140cb1b332860d41c3f4ae42" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 8d63b437804b48672cc7b325bd3eb3a1ff525978b894c9b6e7c63db011aac295" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e910142a9bdc53757635db7f997f00e5415cc6dadea981aeec1e999489586ee2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 13296dfe3559a3cb5664a8319e57153635ba867a3a72feb4b040ce833fc22914" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 039d869bdbefd64907f005e203fda9948dab1f9525879932bd3930683fc2cc3e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e31a417ea73cefb3424496b07b19e188a5d079db40fc29bae0c8a24b2fb9d558" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/12.04/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/ubuntu/14.04/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 fb91006daf4bdc73a83f597f96bb5163621d06865f9670d86a182f4abae0f8bb" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 5fb71d38e54b0a6e8fc142f48e693de2dc54891edde59f65db61bf097766a3de" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/6/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/7/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/7/chef-12.12.7+20160701150941-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 bc5a1ea39782df044cd069523d6534f72222855bbf99a98961858cdaee51d7c0" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/debian/8/chef_12.12.7+20160701150941-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 709cc7a66cf1aaf47a9a8e4382ebcc1af2fc06b496a50be21f6ac5f097a9819b" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 d07b78fb31bdfc89503fd835453834883c6ac2ca109587cec0129ca1e33d888d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/10/chef-12.12.7+20160701150941_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 f4c5e3b437e5129e89a5ca0d69036dcf0e6e4b21a0eef61b495ab63a0be2fe94" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/5/chef-12.12.7+20160701150941-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 58bed7db8fe43a1e8441d9a2a5e46b9fe4ab7e932dd1f7f5e0dc53adc004704c" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/el/6/chef-12.12.7+20160701150941-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e30aac011f866a56f3542eaaa17cf18e40df6021e997e32fd3d1ae5b8f11e274" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2008r2/chef-client-12.12.7+20160701150941-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/freebsd/9/chef-12.12.7+20160701150941_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 6fc165d1fbc96f5ed5ffbfedb154e7ede4d6e87fccec3c80c0de5510527bd673" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012/chef-client-12.12.7+20160701150941-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/windows/2012r2/chef-client-12.12.7+20160701150941-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7a61185b19435d6ffaa43fd0760d59d81b8762703cd607174c7e56d3f28220a9" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/6.1/chef-12.12.7+20160701150941-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/aix/7.1/chef-12.12.7+20160701150941-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 9a5137366491ab5adac781896aba9e3b1a09ae966d881550ed28c75b980ef6d5" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.10/chef-12.12.7+20160701150941-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.7+20160701150941/solaris2/5.11/chef-12.12.7+20160701150941-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7fda9d53f8f73ab5b20ea5f7c9b28bbc9e244613e054e75c5a05e0b022966817" | out-file "$artifact_info_dir/artifact_info" -Append


                    $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

                    $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                      foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

                    Write-Verbose "Project details: "
                    foreach ($key in $package_metadata.keys) {
                      Write-Verbose "`t$key = $($package_metadata[$key])"
                    }
                    $package_metadata
                  }

                  function Install-Project {
                    <#
                      .SYNOPSIS
                      Install a Chef Software, Inc. product
                      .DESCRIPTION
                      Install a Chef Software, Inc. product
                      .EXAMPLE
                      iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                      Installs the latest stable version of Chef.
                      .EXAMPLE
                      iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                      Installs the latest integration build of the Chef Development Kit
                    #>
                    [cmdletbinding(SupportsShouldProcess=$true)]
                    param (
                      # Project to install
                      [string]
                      $project = 'chef',
                      # Release channel to install from
                      [validateset('current', 'stable', 'unstable')]
                      [string]
                      $channel = 'stable',
                      # Version of the application to install
                      # This parameter is optional, if not supplied it will provide the latest version,
                      # and if an iteration number is not specified, it will grab the latest available iteration.
                      # Partial version numbers are also acceptable (using v=11
                      # will grab the latest 11.x client which matches the other flags).
                      [string]
                      $version,
                      # Full path for the downloaded installer.
                      [string]
                      $filename,
                      # Full path to the location to download the installer
                      [string]
                      $download_directory = $env:temp,
                      # The following legacy switches are just aliases for the current channel
                      [switch]
                      $prerelease,
                      [switch]
                      $nightlies,
                      [validateset('auto', 'i386', 'x86_64')]
                      [string]
                      $architecture = 'auto'
                    )

                    $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

                    if (-not [string]::IsNullOrEmpty($filename)) {
                      $download_directory = split-path $filename
                      $filename = split-path $filename -leaf
                      if ([string]::IsNullOrEmpty($download_directory)) {
                        $download_directory = $pwd
                      }
                    }
                    else {
                      $filename = ($package_metadata.url -split '/')[-1]
                    }
                    Write-Verbose "Download directory: $download_directory"
                    Write-Verbose "Filename: $filename"

                    if (-not (test-path $download_directory)) {
                      mkdir $download_directory
                    }
                    $download_directory = (resolve-path $download_directory).providerpath
                    $download_destination = join-path $download_directory $filename

                    if ((test-path $download_destination) -and
                      (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                      Write-Verbose "Found existing valid installer at $download_destination."
                    }
                    else {
                      if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                        Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                        Get-WebContent $package_metadata.url -filepath $download_destination
                      }
                    }

                    if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                      if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                        Write-Host "Installing $project from $download_destination"
                        $installingProject = $True
                        $installAttempts = 0
                        while ($installingProject) {
                          $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                          $p.WaitForExit()
                          if ($p.ExitCode -eq 1618) {
                            Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                            continue
                          } elseif ($p.ExitCode -ne 0) {
                            throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                          }
                          $installingProject = $False
                        }
                      }
                      else {
                        throw "Failed to validate the downloaded installer for $project."
                      }
                    }
                  }
                  set-alias install -value Install-Project
                  export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

                  }

                  install -project chef -version 12.12.7+20160701150941 -channel unstable
                  )
                  D      creating hash for file $env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
                  D      Running check_files.ps1
                  D      @{
                  D        "f819689a04a73f68cedca447fe8bbc14" = @{
                  D          "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                  D          "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                  D          "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
                  D        }
                  D      }
                  D      [WinRM] opening new shell since the current one failed
                  D      [WinRM] opening remote shell on http://10.194.9.174:5985/wsman
                  D      [WinRM] remote shell 535E04F8-6DEE-47AB-A56F-BD1B59E9E2D4 is open on http://10.194.9.174:5985/wsman
                  D      [WinRM] opening new shell since the current one failed
                  D      [WinRM] opening remote shell on http://10.194.13.185:5985/wsman
                  D      [WinRM] remote shell 8404D27A-7C12-43A6-A11F-47788FAC98A5 is open on http://10.194.13.185:5985/wsman
                  D      Parsing CSV Response
                  D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
                  "False","f819689a04a73f68cedca447fe8bbc14",,"True","False","False"

                  D      Uploading /tmp/cheftest/kitchen-long-script20160701-12947-1vdoz5l/fips-integration-windows-2012r2-long_script.ps1 to encoded tmpfile $env:TEMP\b64-f819689a04a73f68cedca447fe8bbc14.txt
                  D      Finished uploading /tmp/cheftest/kitchen-long-script20160701-12947-1vdoz5l/fips-integration-windows-2012r2-long_script.ps1 to encoded tmpfile $env:TEMP\b64-f819689a04a73f68cedca447fe8bbc14.txt (40.316 KB over 6 chunks) in (0m0.78s)
                  D      Running decode_files.ps1
                  D      @{
                  D        "$env:TEMP\b64-f819689a04a73f68cedca447fe8bbc14.txt" = @{
                  D          "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
                  D        }
                  D      }
                  D      Cleaning up local sandbox in /tmp/cheftest/fips-unit-functional-windows-2012r2-sandbox-20160701-12947-1uk9hkk
                  D      Parsing CSV Response
                  D      "src_md5","tmpzip","verifies","tmpfile","dst_md5","dst"
                  "f819689a04a73f68cedca447fe8bbc14",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-f819689a04a73f68cedca447fe8bbc14.txt","f819689a04a73f68cedca447fe8bbc14","C:\Users\ADMINI~1\AppData\Local\Temp/fips-integration-windows-2012r2-long_script.ps1"

                  D      Uploaded 1 items dirty_check: (0m2.50s) stream_files: (0m0.78s) decode: (0m1.33s)

                         ModuleType Version    Name                                ExportedCommands
                         ---------- -------    ----                                ----------------
                         Script     0.0        Omnitruck                           {Get-ProjectMetada...
                         Installing chef from C:\Users\ADMINI~1\AppData\Local\Temp\chef-client-12.12.7+20160701150941-1-x64.msi
                  D      [WinRM] retrying receive request after timeout


                  D      [WinRM] negotiate::http://10.194.9.174:5985/wsman<{:user=>"administrator", :pass=>"TaBhhW.%e!", :elevated_username=>"administrator", :elevated_password=>"TaBhhW.%e!", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($dirs = @("$env:TEMP\kitchen\clients", "$env:TEMP\kitchen\cookbooks", "$env:TEMP\kitchen\data", "$env:TEMP\kitchen\data_bags", "$env:TEMP\kitchen\encrypted_data_bag_secret", "$env:TEMP\kitchen\environments", "$env:TEMP\kitchen\roles")
                  $root_path = "$env:TEMP\kitchen"

                  Function Delete-AllDirs($dirs) {
                    $dirs | ForEach-Object {
                      if (Test-Path ($path = Unresolve-Path $_)) { Remove-Item $path -Recurse -Force }
                    }
                  }

                  Function Unresolve-Path($p) {
                    if ($p -eq $null) { return $null }
                    else { return $ExecutionContext.SessionState.Path.GetUnresolvedProviderPathFromPSPath($p) }
                  }

                  Function Make-RootPath($p) {
                    $p = Unresolve-Path $p
                    if (-Not (Test-Path $p)) { New-Item $p -ItemType directory | Out-Null }
                  }

                  Delete-AllDirs $dirs
                  Make-RootPath $root_path
                  )
                         Transferring files to <fips-integration-windows-2012r2>
                  D      creating hash for file $env:TEMP\kitchen
                  D      creating hash for file $env:TEMP\kitchen
                  D      creating hash for directory $env:TEMP\kitchen
                  D      Populating files
                  D      === All files added.
                  D      creating hash for file $env:TEMP\kitchen
                  D      creating hash for directory $env:TEMP\kitchen
                  D      Populating files
                  D      +++ Adding fips/metadata.rb
                  D      === All files added.
                  D      Running check_files.ps1
                  D      @{
                  D        "f36538b1f10bf80532dc432fbec25a65" = @{
                  D          "target" = "$env:TEMP\kitchen";
                  D          "src_basename" = "dna.json";
                  D          "dst" = "$env:TEMP\kitchen"
                  D        };
                  D        "608ae6e6474ca88bdec913156a101881" = @{
                  D          "target" = "$env:TEMP\kitchen";
                  D          "src_basename" = "client.rb";
                  D          "dst" = "$env:TEMP\kitchen"
                  D        };
                  D        "76cdb2bad9582d23c1f6f4d868218d6c" = @{
                  D          "target" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip";
                  D          "src_basename" = "cache";
                  D          "dst" = "$env:TEMP\kitchen\cache"
                  D        };
                  D        "49abb94825cb80b9a9cd59e5f76daf4a" = @{
                  D          "target" = "$env:TEMP\kitchen";
                  D          "src_basename" = "validation.pem";
                  D          "dst" = "$env:TEMP\kitchen"
                  D        };
                  D        "33968442c0ef69a92763825b33850e28" = @{
                  D          "target" = "$env:TEMP\winrm-upload\tmpzip-33968442c0ef69a92763825b33850e28.zip";
                  D          "src_basename" = "cookbooks";
                  D          "dst" = "$env:TEMP\kitchen\cookbooks"
                  D        }
                  D      }
                  D      Parsing CSV Response
                  D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
                  "False","33968442c0ef69a92763825b33850e28",,"True","False","False"
                  "False","76cdb2bad9582d23c1f6f4d868218d6c",,"True","False","False"
                  "False","f36538b1f10bf80532dc432fbec25a65",,"True","False","True"
                  "False","608ae6e6474ca88bdec913156a101881",,"True","False","True"
                  "False","49abb94825cb80b9a9cd59e5f76daf4a",,"True","False","True"

                  D      Uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160701-12947-1t0h8b1/dna.json to encoded tmpfile $env:TEMP\b64-f36538b1f10bf80532dc432fbec25a65.txt
                  D      Finished uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160701-12947-1t0h8b1/dna.json to encoded tmpfile $env:TEMP\b64-f36538b1f10bf80532dc432fbec25a65.txt (0.084 KB over 1 chunks) in (0m0.07s)
                  D      Uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160701-12947-1t0h8b1/client.rb to encoded tmpfile $env:TEMP\b64-608ae6e6474ca88bdec913156a101881.txt
                  D      Finished uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160701-12947-1t0h8b1/client.rb to encoded tmpfile $env:TEMP\b64-608ae6e6474ca88bdec913156a101881.txt (1.116 KB over 1 chunks) in (0m0.06s)
                  D      Uploading /tmp/cheftest/tmpzip-20160701-12947-12dxsy5.zip to encoded tmpfile $env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt
                  D      Finished uploading /tmp/cheftest/tmpzip-20160701-12947-12dxsy5.zip to encoded tmpfile $env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt (0.028 KB over 1 chunks) in (0m0.07s)
                  D      Uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160701-12947-1t0h8b1/validation.pem to encoded tmpfile $env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt
                  D      Finished uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160701-12947-1t0h8b1/validation.pem to encoded tmpfile $env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt (2.236 KB over 1 chunks) in (0m0.17s)
                  D      Uploading /tmp/cheftest/tmpzip-20160701-12947-smxcvg.zip to encoded tmpfile $env:TEMP\b64-33968442c0ef69a92763825b33850e28.txt
                  D      Finished uploading /tmp/cheftest/tmpzip-20160701-12947-smxcvg.zip to encoded tmpfile $env:TEMP\b64-33968442c0ef69a92763825b33850e28.txt (0.192 KB over 1 chunks) in (0m0.06s)
                  D      Running decode_files.ps1
                  D      @{
                  D        "$env:TEMP\b64-f36538b1f10bf80532dc432fbec25a65.txt" = @{
                  D          "dst" = "$env:TEMP\kitchen/dna.json"
                  D        };
                  D        "$env:TEMP\b64-608ae6e6474ca88bdec913156a101881.txt" = @{
                  D          "dst" = "$env:TEMP\kitchen/client.rb"
                  D        };
                  D        "$env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt" = @{
                  D          "dst" = "$env:TEMP\kitchen\cache";
                  D          "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip"
                  D        };
                  D        "$env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt" = @{
                  D          "dst" = "$env:TEMP\kitchen/validation.pem"
                  D        };
                  D        "$env:TEMP\b64-33968442c0ef69a92763825b33850e28.txt" = @{
                  D          "dst" = "$env:TEMP\kitchen\cookbooks";
                  D          "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-33968442c0ef69a92763825b33850e28.zip"
                  D        }
                  D      }
                  D      Parsing CSV Response
                  D      "src_md5","tmpzip","verifies","tmpfile","dst_md5","dst"
                  "608ae6e6474ca88bdec913156a101881",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-608ae6e6474ca88bdec913156a101881.txt","608ae6e6474ca88bdec913156a101881","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/client.rb"
                  "76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip","True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt","76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache"
                  "f36538b1f10bf80532dc432fbec25a65",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-f36538b1f10bf80532dc432fbec25a65.txt","f36538b1f10bf80532dc432fbec25a65","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/dna.json"
                  "33968442c0ef69a92763825b33850e28","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-33968442c0ef69a92763825b33850e28.zip","True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-33968442c0ef69a92763825b33850e28.txt","33968442c0ef69a92763825b33850e28","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cookbooks"
                  "49abb94825cb80b9a9cd59e5f76daf4a",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt","49abb94825cb80b9a9cd59e5f76daf4a","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/validation.pem"

                  D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160701-12947-12dxsy5.zip
                  D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160701-12947-smxcvg.zip
                  D      Uploaded 5 items dirty_check: (0m1.00s) stream_files: (0m0.44s) decode: (0m1.92s)
                  D      Transfer complete
                  D      Attempting to execute command - try 1 of 1.
                  D      [WinRM] negotiate::http://10.194.9.174:5985/wsman<{:user=>"administrator", :pass=>"TaBhhW.%e!", :elevated_username=>"administrator", :elevated_password=>"TaBhhW.%e!", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($env:PATH = [System.Environment]::GetEnvironmentVariable("PATH","Machine")

                  & $env:systemdrive\opscode\chef\bin\chef-client.bat --local-mode --config $env:TEMP\kitchen\client.rb --log_level auto --force-formatter --no-color --json-attributes $env:TEMP\kitchen\dna.json --chef-zero-port 8889 ; exit $LastExitCode)
                         Starting Chef Client, version 12.12.7
                         Creating a new client identity for fips-integration-windows-2012r2 using the validator key.
                         resolving cookbooks for run list: []
                         Synchronizing Cookbooks:
                         Installing Cookbook Gems:
                         Compiling Cookbooks...
                         [2016-07-01T15:51:51+00:00] WARN: Node fips-integration-windows-2012r2 has an empty run list.
                         Converging 0 resources
                         Starting audit phase

                         Finished in 0 seconds (files took 0.625 seconds to load)
                         0 examples, 0 failures
                         Auditing complete

                         Running handlers:
                         Running handlers complete
                         Chef Client finished, 0/0 resources updated in 32 seconds
                         [2016-07-01T15:51:52+00:00] ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json
                  D      Cleaning up local sandbox in /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160701-12947-1t0h8b1
                         Finished converging <fips-integration-windows-2012r2> (2m24.20s).
                  D      ------Exception-------
                  D      Class: Kitchen::ActionFailed
                  D      Message: 1 actions failed.
                  >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                      "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                      "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
                    }
                  }@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                      "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                      "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                     tion
                      + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                     vokeExpressionCommand

                  At line:54 char:5
                  +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                  +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                  :String) [], RuntimeException
                      + FullyQualifiedErrorId : There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                          "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
                     ps1";
                          "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
                     ;
                          "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
                     "
                    }
                  }@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                          "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
                     ps1";
                          "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
                     ;
                          "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
                     "
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                          + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                     xcep
                     tion
                          + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                     s.In
                     vokeExpressionCommand


                  ] on fips-unit-functional-windows-2012r2
                  D      ----------------------
                  D      ------Backtrace-------
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:187:in `report_errors'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:178:in `run_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command/action.rb:39:in `block in call'
                  D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command/action.rb:37:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:56:in `perform'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:184:in `block (2 levels) in <class:CLI>'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/cli.rb:325:in `invoke_task'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/bin/kitchen:13:in `block in <top (required)>'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/errors.rb:174:in `with_friendly_errors'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/bin/kitchen:13:in `<top (required)>'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:23:in `load'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:23:in `<main>'
                  D      ----End Backtrace-----
                  D      -Composite Exception--
                  D      Class: Kitchen::ActionFailed
                  D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                      "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                      "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
                    }
                  }@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                      "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                      "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                     tion
                      + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                     vokeExpressionCommand

                  At line:54 char:5
                  +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                  +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                  :String) [], RuntimeException
                      + FullyQualifiedErrorId : There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                          "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
                     ps1";
                          "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
                     ;
                          "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
                     "
                    }
                  }@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                          "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
                     ps1";
                          "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
                     ;
                          "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
                     "
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                          + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                     xcep
                     tion
                          + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                     s.In
                     vokeExpressionCommand


                  ] on fips-unit-functional-windows-2012r2
                  D      ----------------------
                  D      ------Backtrace-------
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:394:in `parse_response'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:203:in `check_files'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:80:in `block in upload'
                  D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:78:in `upload'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:134:in `upload'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:394:in `run_from_file_command'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:102:in `execute'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:72:in `block in call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:526:in `reuse_connection'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:72:in `connection'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:71:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:373:in `block in converge_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in `synchronize_or_call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:478:in `block in action'
                  D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:477:in `action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:369:in `converge_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:348:in `block in transition_to'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in `each'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in `transition_to'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:138:in `converge'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in `public_send'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in `run_action_in_thread'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
                  D      ----End Backtrace-----
                  D      ---Nested Exception---
                  D      Class: Kitchen::ActionFailed
                  D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                      "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                      "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
                    }
                  }@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                      "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                      "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                     tion
                      + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                     vokeExpressionCommand

                  At line:54 char:5
                  +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                  +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                  :String) [], RuntimeException
                      + FullyQualifiedErrorId : There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                          "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
                     ps1";
                          "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
                     ;
                          "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
                     "
                    }
                  }@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                          "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
                     ps1";
                          "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
                     ;
                          "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
                     "
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                          + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                     xcep
                     tion
                          + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                     s.In
                     vokeExpressionCommand


                  ]
                  D      ----------------------
                  D      ------Backtrace-------
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:394:in `parse_response'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:203:in `check_files'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:80:in `block in upload'
                  D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.3/lib/winrm-fs/core/file_transporter.rb:78:in `upload'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:134:in `upload'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:394:in `run_from_file_command'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:102:in `execute'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:72:in `block in call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:526:in `reuse_connection'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/transport/winrm.rb:72:in `connection'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/provisioner/base.rb:71:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:373:in `block in converge_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:513:in `synchronize_or_call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:478:in `block in action'
                  D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:477:in `action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:369:in `converge_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:348:in `block in transition_to'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in `each'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:347:in `transition_to'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/instance.rb:138:in `converge'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in `public_send'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:201:in `run_action_in_thread'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.10.2/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
                  D      ----End Backtrace-----
                  D      [WinRM] closing remote shell 607C7234-6E59-49B0-9768-793CA8BB26CE on http://10.194.9.174:5985/wsman
                  D      [WinRM] closing remote shell 535E04F8-6DEE-47AB-A56F-BD1B59E9E2D4 on http://10.194.9.174:5985/wsman
                  D      [WinRM] remote shell 535E04F8-6DEE-47AB-A56F-BD1B59E9E2D4 closed
                  D      [WinRM] closing remote shell F4B473F6-BB8A-48F3-B6E7-30914AE072CB on http://10.194.13.185:5985/wsman
                  D      [WinRM] closing remote shell 8404D27A-7C12-43A6-A11F-47788FAC98A5 on http://10.194.13.185:5985/wsman
                  D      [WinRM] remote shell 8404D27A-7C12-43A6-A11F-47788FAC98A5 closed
                  STDERR: >>>>>> ------Exception-------
                  >>>>>> Class: Kitchen::ActionFailed
                  >>>>>> Message: 1 actions failed.
                  >>>>>>     Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                  There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                      "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                      "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
                    }
                  }@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                      "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                      "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                      "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
                     tion
                      + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
                     vokeExpressionCommand

                  At line:54 char:5
                  +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
                  +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                      + CategoryInfo          : OperationStopped: (There was an er...ionCommand


                  :String) [], RuntimeException
                      + FullyQualifiedErrorId : There was an error invoking '@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                          "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
                     ps1";
                          "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
                     ;
                          "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
                     "
                    }
                  }@{
                    "f819689a04a73f68cedca447fe8bbc14" = @{
                          "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
                     ps1";
                          "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
                     ;
                          "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
                     "
                    }
                  }
                  ':
                  Invoke-Expression : At line:7 char:2
                  + }@{
                  +  ~~
                  Unexpected token '@{' in expression or statement.
                  At line:51 char:12
                  +     return Invoke-Expression "$expr"
                  +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                          + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
                     xcep
                     tion
                          + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
                     s.In
                     vokeExpressionCommand


                  ] on fips-unit-functional-windows-2012r2
                  >>>>>> ----------------------
                  >>>>>> Please see .kitchen/logs/kitchen.log for more details
                  >>>>>> Also try running `kitchen diagnose --all` for configuration
                  ---- End output of bundle exec kitchen converge  -c -l debug ----
                  Ran bundle exec kitchen converge  -c -l debug returned 20

                  Resource Declaration:
                  ---------------------
                  # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/acceptance-cookbook/recipes/provision.rb

                    1: kitchen "converge"

                  Compiled Resource:
                  ------------------
                  # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/acceptance-cookbook/recipes/provision.rb:1:in `from_file'

                  kitchen("converge") do
                    action [:run]
                    retries 0
                    retry_delay 2
                    default_guard_interpreter :default
                    declared_type :kitchen
                    cookbook_name "acceptance-cookbook"
                    recipe_name "provision"
                    command "converge"
                    kitchen_options "-c -l debug"
                    kitchen_dir "/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/fips"
                    chef_product "chef"
                  end

              Starting audit phase
            45328: |2

              Running handlers:
              [2016-07-01T15:51:54+00:00] ERROR: Running exception handlers
              Running handlers complete
              [2016-07-01T15:51:54+00:00] ERROR: Exception handlers complete
              Chef Client failed. 0 resources updated in 05 minutes 03 seconds
              [2016-07-01T15:51:54+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/chef-stacktrace.out
              [2016-07-01T15:51:54+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
              [2016-07-01T15:51:54+00:00] ERROR: Found 1 errors, they are stored in the backtrace
              [2016-07-01T15:51:54+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
              STDERR:
              ---- End output of chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/dna.json -o acceptance-cookbook::provision --no-color ----
              Ran chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/dna.json -o acceptance-cookbook::provision --no-color returned 1
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:289:in `invalid!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:276:in `error!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/chef_runner.rb:53:in `block in run!'
              /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:219:in `block in with_clean_env'
              /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:199:in `with_original_env'
              /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:205:in `with_clean_env'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/chef_runner.rb:42:in `run!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:149:in `run_command'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:116:in `block in run_suite'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:114:in `each'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:114:in `run_suite'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:76:in `block (2 levels) in start_worker'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:74:in `loop'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:74:in `block in start_worker'
              CHEF-ACCEPTANCE::[2016-07-01 15:51:55 +0000] --force-destroy specified so attempting to run the destroy recipe
              FIPS::DESTROY::[2016-07-01 15:51:55 +0000] Initialized [/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/logs/fips/destroy.log] logger...
            45572: |
              CHEF-ACCEPTANCE::[2016-07-01 15:52:20 +0000] | data-collector  | Total         | 00:02:20 | N     |
              CHEF-ACCEPTANCE::[2016-07-01 15:52:20 +0000] | Run             | Total         | 00:08:45 | Y     |
              Build step 'Invoke XShell command' marked build as failure
              Archiving artifacts
              Recording fingerprints
        steps:
          total: 10m6s
          before (setup time): 1m21s
          CHEF-ACCEPTANCE:
            total: 8m46s
            OMNITRUCK::PROVISION: 20s
            TRIVIAL::PROVISION: 3m
            TOP-COOKBOOKS::PROVISION: 3m49s
            OMNITRUCK::VERIFY: 18s
            WINDOWS-SERVICE::PROVISION: 4m50s
            TRIVIAL::DESTROY: 13s
            FIPS::PROVISION: 5m8s
            TOP-COOKBOOKS::DESTROY: 54s
            BASICS::PROVISION: 1m3s
            WINDOWS-SERVICE::VERIFY: 50s
            BASICS::VERIFY: 24s
            BASICS::DESTROY: 11s
            WINDOWS-SERVICE::DESTROY: 23s
            DATA-COLLECTOR::PROVISION: 1m24s
            DATA-COLLECTOR::VERIFY: 41s
            FIPS::DESTROY: 15s
            DATA-COLLECTOR::DESTROY: 14s
        chef_acceptance_timing:
        - omnitruck:
            provision: 11s
            verify: 10s
            destroy: 4s
            Total: 44s
          trivial:
            provision: 2m28s
            force-destroy: 9s
            Total: 3m12s
          top-cookbooks:
            provision: 3m9s
            force-destroy: 41s
            Total: 4m44s
          windows-service:
            provision: 4m7s
            verify: 36s
            destroy: 13s
            Total: 6m
          basics:
            provision: 53s
            verify: 18s
            destroy: 8s
            Total: 1m40s
          data-collector:
            provision: 1m12s
            verify: 32s
            destroy: 9s
            Total: 2m20s
          fips:
            provision: 4m10s
            force-destroy: 9s
            Total: 5m23s
          Run:
            Total: 8m45s
      el-5:
        result: ABORTED
        failure_category: aborted
        failure_cause: aborted
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=el-5,project=chef,role=tester/62/
        duration: 21m24s
        logs:
          consoleText:
            687: |2
                /opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/spec/support/shared/integration/integration_helper.rb:111
              The new definition will overwrite the original one.
              /opt/chef/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- win32/daemon (LoadError)
                from /opt/chef/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'
              Run options:
      el-6:
        result: ABORTED
        failure_category: aborted
        failure_cause: aborted
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=el-6,project=chef,role=tester/62/
        duration: 21m24s
        logs:
          consoleText:
            682: |2
                /opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.12.7/spec/support/shared/integration/integration_helper.rb:111
              The new definition will overwrite the original one.
              /opt/chef/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- win32/daemon (LoadError)
                from /opt/chef/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'
              Run options:
      debian-6-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=debian-6,project=chef,role=tester/62/
        duration: 10m18s
      debian-7-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=debian-7,project=chef,role=tester/62/
        duration: 10m38s
      freebsd-10-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=freebsd-10,project=chef,role=tester/62/
        duration: 8m50s
      freebsd-9-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=freebsd-9,project=chef,role=tester/62/
        duration: 9m30s
      ubuntu-12.04-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=ubuntu-12.04,project=chef,role=tester/62/
        duration: 10m23s
      ubuntu-14.04-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=ubuntu-14.04,project=chef,role=tester/62/
        duration: 10m21s
      windows-2008r2-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=windows-2008r2,project=chef,role=tester/62/
        duration: 16m12s
      solaris-10-i86pc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i86pc,platform=solaris-10,project=chef,role=tester/62/
        duration: 7m5s
      solaris-11-i86pc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i86pc,platform=solaris-11,project=chef,role=tester/62/
        duration: 7m50s
      aix-7.1-powerpc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=powerpc,platform=aix-7.1,project=chef,role=tester/62/
        duration: 20m8s
      el-7-ppc64:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=ppc64,platform=el-7,project=chef,role=tester/62/
        duration: 9m3s
      el-7-ppc64le:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=ppc64le,platform=el-7,project=chef,role=tester/62/
        duration: 9m37s
      ubuntu-14.04-ppc64le:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=ppc64le,platform=ubuntu-14.04,project=chef,role=tester/62/
        duration: 6m52s
      debian-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=debian-6,project=chef,role=tester/62/
        duration: 19m35s
      debian-7:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=debian-7,project=chef,role=tester/62/
        duration: 13m48s
      debian-8:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=debian-8,project=chef,role=tester/62/
        duration: 13m45s
      el-7:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=el-7,project=chef,role=tester/62/
        duration: 13m21s
      freebsd-10:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=freebsd-10,project=chef,role=tester/62/
        duration: 14m35s
      freebsd-9:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=freebsd-9,project=chef,role=tester/62/
        duration: 16m10s
      ios_xr-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=ios_xr-6,project=chef,role=tester/62/
        duration: 7m56s
      mac_os_x-10.10:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=mac_os_x-10.10,project=chef,role=tester/62/
        duration: 10m34s
      mac_os_x-10.11:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=mac_os_x-10.11,project=chef,role=tester/62/
        duration: 8m30s
      mac_os_x-10.9:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=mac_os_x-10.9,project=chef,role=tester/62/
        duration: 9m45s
      nexus-7:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=nexus-7,project=chef,role=tester/62/
        duration: 10m36s
      ubuntu-12.04:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=ubuntu-12.04,project=chef,role=tester/62/
        duration: 16m4s
      ubuntu-14.04:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=ubuntu-14.04,project=chef,role=tester/62/
        duration: 13m24s
      windows-2008r2:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=windows-2008r2,project=chef,role=tester/62/
        duration: 17m15s
      windows-2012:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=windows-2012,project=chef,role=tester/62/
        duration: 16m9s
      windows-2012r2:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=windows-2012r2,project=chef,role=tester/62/
        duration: 17m41s
  chef-build:
    result: SUCCESS
    url: http://manhattan.ci.chef.co/job/chef-build/113/
    duration: 32m21s
    runs:
      debian-6-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=debian-6,project=chef,role=builder/113/
        duration: 5m38s
      el-5-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=el-5,project=chef,role=builder/113/
        duration: 6m32s
      el-6-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=el-6,project=chef,role=builder/113/
        duration: 6m57s
      freebsd-10-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=freebsd-10,project=chef,role=builder/113/
        duration: 6m5s
      freebsd-9-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=freebsd-9,project=chef,role=builder/113/
        duration: 6m21s
      ubuntu-12.04-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=ubuntu-12.04,project=chef,role=builder/113/
        duration: 6m12s
      windows-2008r2-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=windows-2008r2,project=chef,role=builder/113/
        duration: 7m59s
      solaris-10-i86pc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i86pc,platform=solaris-10,project=chef,role=builder/113/
        duration: 6m44s
      aix-6.1-powerpc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=powerpc,platform=aix-6.1,project=chef,role=builder/113/
        duration: 15m40s
      el-7-ppc64:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=ppc64,platform=el-7,project=chef,role=builder/113/
        duration: 7m54s
      el-7-ppc64le:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=ppc64le,platform=el-7,project=chef,role=builder/113/
        duration: 7m49s
      ubuntu-14.04-ppc64le:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=ppc64le,platform=ubuntu-14.04,project=chef,role=builder/113/
        duration: 3m13s
      solaris-10-sun4v:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=sun4v,platform=solaris-10,project=chef,role=builder/113/
        duration: 31m49s
      debian-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=debian-6,project=chef,role=builder/113/
        duration: 7m55s
      el-5:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=el-5,project=chef,role=builder/113/
        duration: 8m29s
      el-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=el-6,project=chef,role=builder/113/
        duration: 9m6s
      el-7:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=el-7,project=chef,role=builder/113/
        duration: 6m42s
      freebsd-10:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=freebsd-10,project=chef,role=builder/113/
        duration: 8m23s
      freebsd-9:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=freebsd-9,project=chef,role=builder/113/
        duration: 9m53s
      ios_xr-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=ios_xr-6,project=chef,role=builder/113/
        duration: 5m14s
      mac_os_x-10.9:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=mac_os_x-10.9,project=chef,role=builder/113/
        duration: 3m53s
      nexus-7:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=nexus-7,project=chef,role=builder/113/
        duration: 5m44s
      ubuntu-12.04:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=ubuntu-12.04,project=chef,role=builder/113/
        duration: 7m29s
      windows-2008r2:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=windows-2008r2,project=chef,role=builder/113/
        duration: 11m31s
  chef-trigger-ad_hoc:
    result: SUCCESS
    url: http://manhattan.ci.chef.co/job/chef-trigger-ad_hoc/65/
    duration: 26s
successful_logs_analyzed: false
