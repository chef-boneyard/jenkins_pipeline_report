---
result: FAILURE
url: http://manhattan.ci.chef.co/job/chef-trigger-ad_hoc/90/
failure_category: code
failure_cause: 'chef_acceptance[top-cookbooks::provision,top-cookbooks::force-destroy,fips::provision]:
  acceptance: chef-test'
timestamp: 2016-07-23 17:01:56 UTC
duration: 2h25m41s
triggered_by: mwrock
active_duration: 1h51m20s
queue_delays: 10s
retry_delays: 34m5s
parameters:
  GIT_REF: winrm-v2
  EXPIRE_CACHE: false
change:
  git_remote: https://github.com/chef/chef.git
  git_commit: db73d15ad97dd199ef68e8769a9f7b08af2b203f
  project: chef
  version: 12.13.12+20160723173635
stages:
  chef-test:
    result: FAILURE
    failure_category: code
    failure_cause: 'chef_acceptance[top-cookbooks::provision,top-cookbooks::force-destroy,fips::provision]:
      acceptance'
    url: http://manhattan.ci.chef.co/job/chef-test/90/
    duration: 1h18m21s
    runs:
      acceptance:
        result: FAILURE
        failure_category: code
        failure_cause: chef_acceptance[top-cookbooks::provision,top-cookbooks::force-destroy,fips::provision]
        failed_in:
          chef_acceptance:
          - top-cookbooks::provision
          - top-cookbooks::force-destroy
          - fips::provision
          step: CHEF-ACCEPTANCE
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=acceptance,project=chef,role=tester/90/
        duration: 8m34s
        logs:
          consoleText:
            863: |2
                    Cookbook Trace:
                    ---------------
                    /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:58:in `ensure in block in <class:Kitchen>'
                    /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:58:in `block in <class:Kitchen>'
                    /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/libraries/cookbook_kitchen.rb:41:in `block in <class:CookbookKitchen>'

                    Resource Declaration:
            922: |2
                  Cookbook Trace:
                  ---------------
                  /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:58:in `ensure in block in <class:Kitchen>'
                  /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:58:in `block in <class:Kitchen>'
                  /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/libraries/cookbook_kitchen.rb:41:in `block in <class:CookbookKitchen>'

                  Resource Declaration:
            968: |2

              Running handlers:
              [2016-07-23T18:12:32+00:00] ERROR: Running exception handlers
              Running handlers complete
              [2016-07-23T18:12:32+00:00] ERROR: Exception handlers complete
              Chef Client failed. 0 resources updated in 09 seconds
              [2016-07-23T18:12:32+00:00] ERROR: Failed to post audit report to server. Saving report to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/failed-audit-data.json
              [2016-07-23T18:12:32+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/chef-stacktrace.out
              [2016-07-23T18:12:32+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
              [2016-07-23T18:12:32+00:00] ERROR: Found 1 errors, they are stored in the backtrace
              TOP-COOKBOOKS::PROVISION::[2016-07-23 18:12:32 +0000] [2016-07-23T18:12:32+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
              CHEF-ACCEPTANCE::[2016-07-23 18:12:32 +0000] Encountered an error running the recipe provision: Expected process to exit with [0], but received '1'
              ---- Begin output of chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/dna.json -o acceptance-cookbook::provision --no-color ----
            994: |2
                  * cookbook_kitchen[converge docker] action run

                    ================================================================================
                    Error executing action `run` on resource 'cookbook_kitchen[converge docker]'
                    ================================================================================

                    RuntimeError
                    ------------
                    unknown file type: /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/docker//.kitchen/logs/.

                    Cookbook Trace:
                    ---------------
                    /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:58:in `ensure in block in <class:Kitchen>'
                    /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:58:in `block in <class:Kitchen>'
                    /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/libraries/cookbook_kitchen.rb:41:in `block in <class:CookbookKitchen>'

                    Resource Declaration:
                    ---------------------
                    # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/libraries/top_cookbooks.rb

                      9:     cookbook_kitchen "#{command} docker" do
                     10:     end
                     11:

                    Compiled Resource:
                    ------------------
                    # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/libraries/top_cookbooks.rb:9:in `block in <class:TopCookbooks>'

                    cookbook_kitchen("converge docker") do
                      action [:run]
                      retries 0
                      retry_delay 2
                      default_guard_interpreter :default
                      declared_type :cookbook_kitchen
                      cookbook_name "acceptance-cookbook"
                      repository "https://github.com/chef-cookbooks/docker.git"
                      test_cookbook "docker"
                      repository_root "/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/docker"
                      branch "master"
                      chef_product "chef"
                      env {"BUNDLE_GEMFILE"=>"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/Gemfile", "KITCHEN_YAML"=>"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/.kitchen.docker.yml"}
                      kitchen_dir "/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/docker/"
                      command "converge"
                      kitchen_options "-c -l debug"
                    end

                    Platform:
                    ---------
                    x86_64-linux


                  ================================================================================
                  Error executing action `run` on resource 'top_cookbooks[converge]'
                  ================================================================================

                  RuntimeError
                  ------------
                  cookbook_kitchen[converge docker] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/libraries/top_cookbooks.rb line 9) had an error: RuntimeError: unknown file type: /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/docker//.kitchen/logs/.

                  Cookbook Trace:
                  ---------------
                  /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:58:in `ensure in block in <class:Kitchen>'
                  /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:58:in `block in <class:Kitchen>'
                  /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/libraries/cookbook_kitchen.rb:41:in `block in <class:CookbookKitchen>'

                  Resource Declaration:
                  ---------------------
                  # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/recipes/provision.rb

                    1: top_cookbooks "converge"

                  Compiled Resource:
                  ------------------
                  # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/recipes/provision.rb:1:in `from_file'

                  top_cookbooks("converge") do
                    action [:run]
                    retries 0
                    retry_delay 2
                    default_guard_interpreter :default
                    declared_type :top_cookbooks
                    cookbook_name "acceptance-cookbook"
                    recipe_name "provision"
                    command "converge"
                  end

                  Platform:
                  ---------
                  x86_64-linux

              Starting audit phase
            1089: |2

              Running handlers:
              [2016-07-23T18:12:32+00:00] ERROR: Running exception handlers
              Running handlers complete
              [2016-07-23T18:12:32+00:00] ERROR: Exception handlers complete
              Chef Client failed. 0 resources updated in 09 seconds
              [2016-07-23T18:12:32+00:00] ERROR: Failed to post audit report to server. Saving report to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/failed-audit-data.json
              [2016-07-23T18:12:32+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/chef-stacktrace.out
              [2016-07-23T18:12:32+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
              [2016-07-23T18:12:32+00:00] ERROR: Found 1 errors, they are stored in the backtrace
              [2016-07-23T18:12:32+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
              STDERR:
              ---- End output of chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/dna.json -o acceptance-cookbook::provision --no-color ----
              Ran chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/dna.json -o acceptance-cookbook::provision --no-color returned 1
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:289:in `invalid!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:276:in `error!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/chef_runner.rb:53:in `block in run!'
              /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler.rb:237:in `block in with_clean_env'
              /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler.rb:447:in `with_env'
              /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler.rb:237:in `with_clean_env'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/chef_runner.rb:42:in `run!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:149:in `run_command'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:116:in `block in run_suite'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:114:in `each'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:114:in `run_suite'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:76:in `block (2 levels) in start_worker'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:74:in `loop'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:74:in `block in start_worker'
              CHEF-ACCEPTANCE::[2016-07-23 18:12:32 +0000] --force-destroy specified so attempting to run the destroy recipe
              TOP-COOKBOOKS::DESTROY::[2016-07-23 18:12:32 +0000] Initialized [/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/logs/top-cookbooks/destroy.log] logger...
            1164: |
              TOP-COOKBOOKS::DESTROY::[2016-07-23 18:12:45 +0000]

                    ================================================================================
                    Error executing action `run` on resource 'cookbook_kitchen[destroy docker]'
                    ================================================================================

                    RuntimeError
                    ------------
                    unknown file type: /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/docker//.kitchen/logs/.

                    Cookbook Trace:
                    ---------------
                    /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/destroy/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:58:in `ensure in block in <class:Kitchen>'
                    /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/destroy/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:58:in `block in <class:Kitchen>'
                    /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/destroy/cache/cookbooks/acceptance-cookbook/libraries/cookbook_kitchen.rb:41:in `block in <class:CookbookKitchen>'
              TOP-COOKBOOKS::DESTROY::[2016-07-23 18:12:45 +0000]
              TOP-COOKBOOKS::DESTROY::[2016-07-23 18:12:45 +0000]
            1238: |2
                  Cookbook Trace:
                  ---------------
                  /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/destroy/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:58:in `ensure in block in <class:Kitchen>'
                  /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/destroy/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:58:in `block in <class:Kitchen>'
                  /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/destroy/cache/cookbooks/acceptance-cookbook/libraries/cookbook_kitchen.rb:41:in `block in <class:CookbookKitchen>'

                  Resource Declaration:
            1274: |2

              Running handlers:
              [2016-07-23T18:12:46+00:00] ERROR: Running exception handlers
              Running handlers complete
              [2016-07-23T18:12:46+00:00] ERROR: Exception handlers complete
              Chef Client failed. 0 resources updated in 06 seconds
              TOP-COOKBOOKS::DESTROY::[2016-07-23 18:12:46 +0000] [2016-07-23T18:12:46+00:00] ERROR: Failed to post audit report to server. Saving report to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/destroy/cache/failed-audit-data.json
              TOP-COOKBOOKS::DESTROY::[2016-07-23 18:12:46 +0000] [2016-07-23T18:12:46+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/destroy/cache/chef-stacktrace.out
              [2016-07-23T18:12:46+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
              [2016-07-23T18:12:46+00:00] ERROR: Found 1 errors, they are stored in the backtrace
              TOP-COOKBOOKS::DESTROY::[2016-07-23 18:12:48 +0000] [2016-07-23T18:12:48+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
              WINDOWS-SERVICE::PROVISION::[2016-07-23 18:12:48 +0000] Initialized [/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/logs/windows-service/provision.log] logger...
              OMNITRUCK::VERIFY::[2016-07-23 18:12:49 +0000]
            6655: |2
                  D      Class: Kitchen::ActionFailed
                  D      Message: 1 actions failed.
                  >>>>>>     Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.8.224' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-unit-functional-windows-2012r2
                  D      ----------------------
                  D      ------Backtrace-------
            6694: |2
                  D      -Composite Exception--
                  D      Class: Kitchen::ActionFailed
                  D      Message: Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.8.224' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-unit-functional-windows-2012r2
                  D      ----------------------
                  D      ------Backtrace-------
            6737: |2
                  D      ---Nested Exception---
                  D      Class: Kitchen::ActionFailed
                  D      Message: Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.8.224' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>]
                  D      ----------------------
                  D      ------Backtrace-------
            6781: |2
                  >>>>>> Class: Kitchen::ActionFailed
                  >>>>>> Message: 1 actions failed.
                  >>>>>>     Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.8.224' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-unit-functional-windows-2012r2
                  >>>>>> ----------------------
                  >>>>>> Please see .kitchen/logs/kitchen.log for more details
            6790: |2
                  Cookbook Trace:
                  ---------------
                  /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:52:in `block in <class:Kitchen>'

                  Resource Declaration:
            6829: |
              FIPS::PROVISION::[2016-07-23 18:17:42 +0000] Running handlers:
              FIPS::PROVISION::[2016-07-23 18:17:42 +0000]
              FIPS::PROVISION::[2016-07-23 18:17:42 +0000] [2016-07-23T18:17:42+00:00] ERROR: Running exception handlers
              FIPS::PROVISION::[2016-07-23 18:17:42 +0000] Running handlers complete
              FIPS::PROVISION::[2016-07-23 18:17:42 +0000] [2016-07-23T18:17:42+00:00] ERROR: Exception handlers complete
              FIPS::PROVISION::[2016-07-23 18:17:42 +0000] Chef Client failed. 0 resources updated in 04 minutes 34 seconds
              FIPS::PROVISION::[2016-07-23 18:17:42 +0000]
              FIPS::PROVISION::[2016-07-23 18:17:42 +0000] [2016-07-23T18:17:42+00:00] ERROR: Failed to post audit report to server. Saving report to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/failed-audit-data.json
              FIPS::PROVISION::[2016-07-23 18:17:42 +0000] [2016-07-23T18:17:42+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/chef-stacktrace.out
              FIPS::PROVISION::[2016-07-23 18:17:42 +0000] [2016-07-23T18:17:42+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
              FIPS::PROVISION::[2016-07-23 18:17:42 +0000] [2016-07-23T18:17:42+00:00] ERROR: Found 1 errors, they are stored in the backtrace
              FIPS::PROVISION::[2016-07-23 18:17:42 +0000] [2016-07-23T18:17:42+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
              CHEF-ACCEPTANCE::[2016-07-23 18:17:42 +0000] Encountered an error running the recipe provision: Expected process to exit with [0], but received '1'
              ---- Begin output of chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/dna.json -o acceptance-cookbook::provision --no-color ----
            6856: |2
                * kitchen[converge] action run

                  ================================================================================
                  Error executing action `run` on resource 'kitchen[converge]'
                  ================================================================================

                  Mixlib::ShellOut::ShellCommandFailed
                  ------------------------------------
                  Expected process to exit with [0], but received '20'
                  ---- Begin output of bundle exec kitchen converge  -c -l debug ----
                  STDOUT: -----> Starting Kitchen (v1.10.2)
                  D      winrm requested, loading winrm gem (["~> 2.0"])
                  D      winrm is loaded.
                  D      winrm-fs requested, loading winrm-fs gem (["~> 1.0"])
                  D      winrm-fs is loaded.
                  D      winrm requested, loading winrm gem (["~> 2.0"])
                  D      winrm was already loaded.
                  D      winrm-fs requested, loading winrm-fs gem (["~> 1.0"])
                  D      winrm-fs was already loaded.
                  -----> Creating <fips-unit-functional-windows-2012r2>...
                  -----> Creating <fips-unit-functional-centos-6>...
                  D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                  -----> Creating <fips-integration-windows-2012r2>...
                  D      platform name centos-6 appears to be a standard platform. Searching for centos 6 ...
                  D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                  D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
                  D      Searching for images matching {:name=>"CentOS-6.5-GA-*", :"owner-alias"=>"aws-marketplace", :architecture=>"x86_64", :"virtualization-type"=>"paravirtual", :"block-device-mapping.volume-type"=>"standard", :"image-type"=>"machine"} ...
                  D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
                  -----> Creating <fips-integration-centos-6>...
                  D      platform name centos-6 appears to be a standard platform. Searching for centos 6 ...
                  D      Searching for images matching {:name=>"CentOS-6.5-GA-*", :"owner-alias"=>"aws-marketplace", :architecture=>"x86_64", :"virtualization-type"=>"paravirtual", :"block-device-mapping.volume-type"=>"standard", :"image-type"=>"machine"} ...
                  D      Search returned 1 images:
                  D      Search returned 1 images:
                  D      - CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2: Detected centos 6.5 x86_64.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                  D      - CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2: Detected centos 6.5 x86_64.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                  D      Image for fips-integration-centos-6: CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                  D      Image for fips-unit-functional-centos-6: CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                         Detected platform: centos version 6.5 on x86_64. Instance Type: m3.large. Default username: root (default).
                         Detected platform: centos version 6.5 on x86_64. Instance Type: m3.large. Default username: root (default).
                  D      Search returned 3 images:
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.07.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-07-14T09:59:33.000Z
                  D      No SSH username specified: using default username root  for image ami-b6bdde86, which we detected as centos 6.5 x86_64.
                  D      No SSH username specified: using default username root  for image ami-b6bdde86, which we detected as centos 6.5 x86_64.
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                         If you are not using an account that qualifies under the AWS
                  free-tier, you may be charged to run these suites. The charge
                  should be minimal, but neither Test Kitchen nor its maintainers
                  are responsible for your incurred costs.

                         If you are not using an account that qualifies under the AWS
                  free-tier, you may be charged to run these suites. The charge
                  should be minimal, but neither Test Kitchen nor its maintainers
                  are responsible for your incurred costs.

                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                  D      Creating EC2 instance in region us-west-2 with properties:
                  D      Creating EC2 instance in region us-west-2 with properties:
                  D      - instance_type = "m3.large"
                  D      - instance_type = "m3.large"
                  D      Search returned 3 images:
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.07.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-07-14T09:59:33.000Z
                  D      - ebs_optimized = false
                  D      - ebs_optimized = false
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                  D      - image_id = "ami-b6bdde86"
                  D      - image_id = "ami-b6bdde86"
                  D      - key_name = "jenkins"
                  D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
                  D      - key_name = "jenkins"
                  D      - subnet_id = "subnet-19ac017c"
                  D      - subnet_id = "subnet-19ac017c"
                  D      - private_ip_address = nil
                  D      - private_ip_address = nil
                  D      - placement = {:availability_zone=>"us-west-2a"}
                  D      - placement = {:availability_zone=>"us-west-2a"}
                  D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                  D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                  D      Image for fips-unit-functional-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.07.13.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-07-14T09:59:33.000Z
                         Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
                  D      No SSH username specified: using default username administrator  for image ami-26e72546, which we detected as windows 2012r2rtm x86_64.
                         If you are not using an account that qualifies under the AWS
                  free-tier, you may be charged to run these suites. The charge
                  should be minimal, but neither Test Kitchen nor its maintainers
                  are responsible for your incurred costs.

                  D      Creating EC2 instance in region us-west-2 with properties:
                  D      - instance_type = "m3.large"
                  D      - ebs_optimized = false
                  D      - image_id = "ami-26e72546"
                  D      - key_name = "jenkins"
                  D      - subnet_id = "subnet-19ac017c"
                  D      - private_ip_address = nil
                  D      - placement = {:availability_zone=>"us-west-2a"}
                  D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                  D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                  D      Image for fips-integration-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.07.13.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-07-14T09:59:33.000Z
                         Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
                  D      No SSH username specified: using default username administrator  for image ami-26e72546, which we detected as windows 2012r2rtm x86_64.
                         If you are not using an account that qualifies under the AWS
                  free-tier, you may be charged to run these suites. The charge
                  should be minimal, but neither Test Kitchen nor its maintainers
                  are responsible for your incurred costs.

                  D      Creating EC2 instance in region us-west-2 with properties:
                  D      - instance_type = "m3.large"
                  D      - ebs_optimized = false
                  D      - image_id = "ami-26e72546"
                  D      - key_name = "jenkins"
                  D      - subnet_id = "subnet-19ac017c"
                  D      - private_ip_address = nil
                  D      - placement = {:availability_zone=>"us-west-2a"}
                  D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                  D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                         Instance <i-55db59fa> requested.
                         Instance <i-17d85ab8> requested.
                         Instance <i-23d95b8c> requested.
                         Polling AWS for existence, attempt 0...
                         Polling AWS for existence, attempt 0...
                         Polling AWS for existence, attempt 0...
                         Instance <i-56db59f9> requested.
                         Polling AWS for existence, attempt 0...
                         Attempting to tag the instance, 0 retries
                         Attempting to tag the instance, 0 retries
                         Attempting to tag the instance, 0 retries
                         Attempting to tag the instance, 0 retries
                         EC2 instance <i-17d85ab8> created.
                         EC2 instance <i-56db59f9> created.
                         Waited 0/300s for instance <i-56db59f9> to become ready.
                         Waited 0/300s for instance <i-17d85ab8> to become ready.
                         EC2 instance <i-55db59fa> created.
                         Waited 0/300s for instance <i-55db59fa> to become ready.
                         EC2 instance <i-23d95b8c> created.
                         Waited 0/300s for instance <i-23d95b8c> to become ready.
                         Waited 5/300s for instance <i-17d85ab8> to become ready.
                         Waited 5/300s for instance <i-56db59f9> to become ready.
                         Waited 5/300s for instance <i-55db59fa> to become ready.
                         Waited 5/300s for instance <i-23d95b8c> to become ready.
                         Waited 10/300s for instance <i-17d85ab8> to become ready.
                         Waited 10/300s for instance <i-23d95b8c> to become ready.
                         Waited 10/300s for instance <i-55db59fa> to become ready.
                         Waited 10/300s for instance <i-56db59f9> to become ready.
                         Waited 15/300s for instance <i-17d85ab8> to become ready.
                         Waited 15/300s for instance <i-55db59fa> to become ready.
                         Waited 15/300s for instance <i-23d95b8c> to become ready.
                         Waited 15/300s for instance <i-56db59f9> to become ready.
                         Waited 20/300s for instance <i-17d85ab8> to become ready.
                         Waited 20/300s for instance <i-55db59fa> to become ready.
                         Waited 20/300s for instance <i-23d95b8c> to become ready.
                         Waited 20/300s for instance <i-56db59f9> to become ready.
                         Waited 25/300s for instance <i-17d85ab8> to become ready.
                         Waited 25/300s for instance <i-55db59fa> to become ready.
                         EC2 instance <i-55db59fa> ready.
                  D      [SSH] opening connection to root@10.194.12.127<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"]}>
                         Waited 25/300s for instance <i-23d95b8c> to become ready.
                         Waited 25/300s for instance <i-56db59f9> to become ready.
                         EC2 instance <i-23d95b8c> ready.
                  D      [SSH] opening connection to root@10.194.14.124<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"]}>
                         Waited 30/300s for instance <i-17d85ab8> to become ready.
                         Waited 30/300s for instance <i-56db59f9> to become ready.
                         Waited 35/300s for instance <i-17d85ab8> to become ready.
                         Waited 35/300s for instance <i-56db59f9> to become ready.
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.12.127:22, retrying in 3 seconds
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.14.124:22, retrying in 3 seconds
                         Waited 40/300s for instance <i-17d85ab8> to become ready.
                         Waited 40/300s for instance <i-56db59f9> to become ready.
                  D      [SSH] opening connection to root@10.194.12.127<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] opening connection to root@10.194.14.124<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                         Waited 45/300s for instance <i-17d85ab8> to become ready.
                         Waited 45/300s for instance <i-56db59f9> to become ready.
                         Waited 50/300s for instance <i-17d85ab8> to become ready.
                         Waited 50/300s for instance <i-56db59f9> to become ready.
                         Waited 55/300s for instance <i-56db59f9> to become ready.
                         Waited 55/300s for instance <i-17d85ab8> to become ready.
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.12.127:22, retrying in 3 seconds
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.14.124:22, retrying in 3 seconds
                  D      [SSH] opening connection to root@10.194.12.127<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] opening connection to root@10.194.14.124<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                         Waited 60/300s for instance <i-56db59f9> to become ready.
                         Waited 60/300s for instance <i-17d85ab8> to become ready.
                         Waited 65/300s for instance <i-56db59f9> to become ready.
                         Waited 65/300s for instance <i-17d85ab8> to become ready.
                         Waited 70/300s for instance <i-56db59f9> to become ready.
                         Waited 70/300s for instance <i-17d85ab8> to become ready.
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.12.127:22, retrying in 3 seconds
                  D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                         Waiting for SSH service on 10.194.14.124:22, retrying in 3 seconds
                         Waited 75/300s for instance <i-17d85ab8> to become ready.
                         Waited 75/300s for instance <i-56db59f9> to become ready.
                  D      Console output: ---
                  2016/07/23 18:14:25Z: EC2ConfigMonitorState: 0
                  2016/07/23 18:14:25Z: Windows sysprep configuration complete.
                  2016/07/23 18:14:28Z: AMI Origin Version: 2016.07.13
                  2016/07/23 18:14:28Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
                  2016/07/23 18:14:28Z: OS: Microsoft Windows NT 6.3.9600
                  2016/07/23 18:14:28Z: OsVersion: 6.3
                  2016/07/23 18:14:28Z: OsProductName: Windows Server 2012 R2 Standard
                  2016/07/23 18:14:28Z: OsBuildLabEx: 9600.18289.amd64fre.winblue_ltsb.160328-1315
                  2016/07/23 18:14:28Z: Language: en-US
                  2016/07/23 18:14:28Z: TimeZone: Coordinated Universal Time
                  2016/07/23 18:14:28Z: Offset: UTC 00:00:00
                  2016/07/23 18:14:28Z: EC2 Agent: Ec2Config service v3.17.1032
                  2016/07/23 18:14:29Z: Message: Waiting for meta-data accessibility...
                  2016/07/23 18:14:29Z: Message: Meta-data is now available.
                  2016/07/23 18:14:30Z: AMI-ID: ami-26e72546
                  2016/07/23 18:14:30Z: Instance-ID: i-56db59f9
                  2016/07/23 18:14:31Z: Driver: AWS PV Network Device v7.4.2.0
                  2016/07/23 18:14:31Z: Driver: AWS PV Storage Host Adapter v7.4.2.0
                  2016/07/23 18:14:31Z: Ec2SetPassword: Enabled
                  2016/07/23 18:14:31Z: RDPCERTIFICATE-SUBJECTNAME: WIN-G37BSHMBPU2
                  2016/07/23 18:14:31Z: RDPCERTIFICATE-THUMBPRINT: E34EE7B078D1691DC2394B649BD2234E1DB1A8AC
                  2016/07/23 18:14:34Z: Username: Administrator
                  2016/07/23 18:14:34Z: Password: <Password>
                  PapBjYZ9m/z9mI580YeneBlo9E7J8U7Pr8yDG/zVOw8FkH8C1VKKX6eSTFUYNWnHQStRAv1QwUudY7+PBysdLSfEBLeqtyfOk+Y6urArU5hvdPQIcldary/J2EO7eRiBuayGO5o+A/2O5XslWW6LQtXlxIw17/BJ4wOTpkqIZrXvNkpW2AHNSgfJ5o/EhFzYkhQd4hPJBgGD022n5t3fg4Frv7f5vSR4+G/wbbECautaXL+fIgQUZzbIAnP4K+EhynoYdo7xXbWMNRstEI7NIa4zsh5F4D1+pP25s35dwSL6BfbJ4U/JjAIVBSVEh3ZeLDO6hHJP/cmcdXA8Saojiw==
                  </Password>
                  2016/07/23 18:14:34Z: Message: Windows is Ready to use

                         Waited 0/300s for instance <i-56db59f9> to fetch windows admin password.
                         Retrieved Windows password for instance <i-56db59f9>.
                         EC2 instance <i-56db59f9> ready.
                  D      [WinRM] <{:endpoint=>"http://10.194.11.17:5985/wsman", :user=>"administrator", :password=>"Ggj69PRWX35", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"Ggj69PRWX35", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
                  ')
                  D      [WinRM] opening remote shell on http://10.194.11.17:5985/wsman
                  D      [SSH] opening connection to root@10.194.12.127<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] opening connection to root@10.194.14.124<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                         Waited 80/300s for instance <i-17d85ab8> to become ready.
                  D      [SSH] connection failed (#<Net::SSH::AuthenticationFailed: Authentication failed for user root@10.194.12.127>)
                         Waiting for SSH service on 10.194.12.127:22, retrying in 3 seconds
                  D      [SSH] connection failed (#<Errno::ECONNREFUSED: Connection refused - connect(2) for 10.194.14.124:22>)
                         Waiting for SSH service on 10.194.14.124:22, retrying in 3 seconds
                         Waited 85/300s for instance <i-17d85ab8> to become ready.
                  D      [SSH] opening connection to root@10.194.12.127<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] root@10.194.12.127<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (echo '[SSH] Established')
                  D      [SSH] opening connection to root@10.194.14.124<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] connection failed (#<Net::SSH::AuthenticationFailed: Authentication failed for user root@10.194.14.124>)
                         Waiting for SSH service on 10.194.14.124:22, retrying in 3 seconds
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         [SSH] Established
                  D      Using sudo_command='sudo -E' for ohai hints
                  D      [SSH] reusing existing connection root@10.194.12.127<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] root@10.194.12.127<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E mkdir -p /etc/chef/ohai/hints; sudo -E touch /etc/chef/ohai/hints/ec2.json)
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                  D      ec2:create '10.194.12.127'
                         Finished creating <fips-unit-functional-centos-6> (1m34.12s).
                  -----> Converging <fips-unit-functional-centos-6>...
                         Preparing files for transfer
                  D      Creating local sandbox in /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160723-20479-izu0wt
                         Preparing dna.json
                  D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                         Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                         Removing non-cookbook files before transfer
                         Preparing validation.pem
                  D      Using a dummy validation.pem
                         Preparing client.rb
                  D      Creating client.rb from {:node_name=>"fips-unit-functional-centos-6", :checksum_path=>"/tmp/kitchen/checksums", :file_cache_path=>"/tmp/kitchen/cache", :file_backup_path=>"/tmp/kitchen/backup", :cookbook_path=>["/tmp/kitchen/cookbooks", "/tmp/kitchen/site-cookbooks"], :data_bag_path=>"/tmp/kitchen/data_bags", :environment_path=>"/tmp/kitchen/environments", :node_path=>"/tmp/kitchen/nodes", :role_path=>"/tmp/kitchen/roles", :client_path=>"/tmp/kitchen/clients", :user_path=>"/tmp/kitchen/users", :validation_key=>"/tmp/kitchen/validation.pem", :client_key=>"/tmp/kitchen/client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"/tmp/kitchen/encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                  D      [SSH] reusing existing connection root@10.194.12.127<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] root@10.194.12.127<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E cat > /tmp/chef-installer.sh <<"EOL"
                  #!/bin/bash
                  #!/bin/sh
                  # WARNING: REQUIRES /bin/sh
                  #
                  # - must run on /bin/sh on solaris 9
                  # - must run on /bin/sh on AIX 6.x
                  #
                  # Copyright:: Copyright (c) 2010-2015 Chef Software, Inc.
                  # License:: Apache License, Version 2.0
                  #
                  # Licensed under the Apache License, Version 2.0 (the "License");
                  # you may not use this file except in compliance with the License.
                  # You may obtain a copy of the License at
                  #
                  #     http://www.apache.org/licenses/LICENSE-2.0
                  #
                  # Unless required by applicable law or agreed to in writing, software
                  # distributed under the License is distributed on an "AS IS" BASIS,
                  # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                  # See the License for the specific language governing permissions and
                  # limitations under the License.
                  #

                  # helpers.sh
                  ############
                  # This section has some helper functions to make life easier.
                  #
                  # Outputs:
                  # $tmp_dir: secure-ish temp directory that can be used during installation.
                  ############

                  # Check whether a command exists - returns 0 if it does, 1 if it does not
                  exists() {
                    if command -v $1 >/dev/null 2>&1
                    then
                      return 0
                    else
                      return 1
                    fi
                  }

                  # Output the instructions to report bug about this script
                  report_bug() {
                    echo "Version: $version"
                    echo ""
                    echo "Please file a Bug Report at https://github.com/chef/omnitruck/issues/new"
                    echo "Alternatively, feel free to open a Support Ticket at https://www.chef.io/support/tickets"
                    echo "More Chef support resources can be found at https://www.chef.io/support"
                    echo ""
                    echo "Please include as many details about the problem as possible i.e., how to reproduce"
                    echo "the problem (if possible), type of the Operating System and its version, etc.,"
                    echo "and any other relevant details that might help us with troubleshooting."
                    echo ""
                  }

                  checksum_mismatch() {
                    echo "Package checksum mismatch!"
                    report_bug
                    exit 1
                  }

                  unable_to_retrieve_package() {
                    echo "Unable to retrieve a valid package!"
                    report_bug
                    echo "Metadata URL: $metadata_url"
                    if test "x$download_url" != "x"; then
                      echo "Download URL: $download_url"
                    fi
                    if test "x$stderr_results" != "x"; then
                      echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
                    fi
                    exit 1
                  }

                  http_404_error() {
                    echo "Omnitruck artifact does not exist for version $version on platform $platform"
                    echo ""
                    echo "Either this means:"
                    echo "   - We do not support $platform"
                    echo "   - We do not have an artifact for $version"
                    echo ""
                    echo "This is often the latter case due to running a prerelease or RC version of chef"
                    echo "or a gem version which was only pushed to rubygems and not omnitruck."
                    echo ""
                    echo "You may be able to set your knife[:bootstrap_version] to the most recent stable"
                    echo "release of Chef to fix this problem (or the most recent stable major version number)."
                    echo ""
                    echo "In order to test the version parameter, adventurous users may take the Metadata URL"
                    echo "below and modify the '&v=<number>' parameter until you successfully get a URL that"
                    echo "does not 404 (e.g. via curl or wget).  You should be able to use '&v=11' or '&v=12'"
                    echo "succesfully."
                    echo ""
                    echo "If you cannot fix this problem by setting the bootstrap_version, it probably means"
                    echo "that $platform is not supported."
                    echo ""
                    # deliberately do not call report_bug to suppress bug report noise.
                    echo "Metadata URL: $metadata_url"
                    if test "x$download_url" != "x"; then
                      echo "Download URL: $download_url"
                    fi
                    if test "x$stderr_results" != "x"; then
                      echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
                    fi
                    exit 1
                  }

                  capture_tmp_stderr() {
                    # spool up /tmp/stderr from all the commands we called
                    if test -f "$tmp_dir/stderr"; then
                      output=`cat $tmp_dir/stderr`
                      stderr_results="${stderr_results}\nSTDERR from $1:\n\n$output\n"
                      rm $tmp_dir/stderr
                    fi
                  }

                  # do_wget URL FILENAME
                  do_wget() {
                    echo "trying wget..."
                    wget -O "$2" "$1" 2>$tmp_dir/stderr
                    rc=$?
                    # check for 404
                    grep "ERROR 404" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "wget"
                      return 1
                    fi

                    return 0
                  }

                  # do_curl URL FILENAME
                  do_curl() {
                    echo "trying curl..."
                    curl --retry 5 -sL -D $tmp_dir/stderr "$1" > "$2"
                    rc=$?
                    # check for 404
                    grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "curl"
                      return 1
                    fi

                    return 0
                  }

                  # do_fetch URL FILENAME
                  do_fetch() {
                    echo "trying fetch..."
                    fetch -o "$2" "$1" 2>$tmp_dir/stderr
                    # check for bad return status
                    test $? -ne 0 && return 1
                    return 0
                  }

                  # do_perl URL FILENAME
                  do_perl() {
                    echo "trying perl..."
                    perl -e 'use LWP::Simple; getprint($ARGV[0]);' "$1" > "$2" 2>$tmp_dir/stderr
                    rc=$?
                    # check for 404
                    grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "perl"
                      return 1
                    fi

                    return 0
                  }

                  # do_python URL FILENAME
                  do_python() {
                    echo "trying python..."
                    python -c "import sys,urllib2 ; sys.stdout.write(urllib2.urlopen(sys.argv[1]).read())" "$1" > "$2" 2>$tmp_dir/stderr
                    rc=$?
                    # check for 404
                    grep "HTTP Error 404" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "python"
                      return 1
                    fi
                    return 0
                  }

                  # returns 0 if checksums match
                  do_checksum() {
                    if exists sha256sum; then
                      echo "Comparing checksum with sha256sum..."
                      checksum=`sha256sum $1 | awk '{ print $1 }'`
                      return `test "x$checksum" = "x$2"`
                    elif exists shasum; then
                      echo "Comparing checksum with shasum..."
                      checksum=`shasum -a 256 $1 | awk '{ print $1 }'`
                      return `test "x$checksum" = "x$2"`
                    else
                      echo "WARNING: could not find a valid checksum program, pre-install shasum or sha256sum in your O/S image to get valdation..."
                      return 0
                    fi
                  }

                  # do_download URL FILENAME
                  do_download() {
                    echo "downloading $1"
                    echo "  to file $2"

                    url=`echo $1`
                    if test "x$platform" = "xsolaris2"; then
                      if test "x$platform_version" = "x5.9" -o "x$platform_version" = "x5.10"; then
                        # solaris 9 lacks openssl, solaris 10 lacks recent enough credentials - your base O/S is completely insecure, please upgrade
                        url=`echo $url | sed -e 's/https/http/'`
                      fi
                    fi

                    # we try all of these until we get success.
                    # perl, in particular may be present but LWP::Simple may not be installed

                    if exists wget; then
                      do_wget $url $2 && return 0
                    fi

                    if exists curl; then
                      do_curl $url $2 && return 0
                    fi

                    if exists fetch; then
                      do_fetch $url $2 && return 0
                    fi

                    if exists perl; then
                      do_perl $url $2 && return 0
                    fi

                    if exists python; then
                      do_python $url $2 && return 0
                    fi

                    unable_to_retrieve_package
                  }

                  # install_file TYPE FILENAME
                  # TYPE is "rpm", "deb", "solaris", "sh", etc.
                  install_file() {
                    echo "Installing $project $version"
                    case "$1" in
                      "rpm")
                        if test "x$platform" = "xnexus" || test "x$platform" = "xios_xr"; then
                          echo "installing with yum..."
                          yum install -yv "$2"
                        else
                          echo "installing with rpm..."
                          rpm -Uvh --oldpackage --replacepkgs "$2"
                        fi
                        ;;
                      "deb")
                        echo "installing with dpkg..."
                        dpkg -i "$2"
                        ;;
                      "bff")
                        echo "installing with installp..."
                        installp -aXYgd "$2" all
                        ;;
                      "solaris")
                        echo "installing with pkgadd..."
                        echo "conflict=nocheck" > $tmp_dir/nocheck
                        echo "action=nocheck" >> $tmp_dir/nocheck
                        echo "mail=" >> $tmp_dir/nocheck
                        pkgrm -a $tmp_dir/nocheck -n $project >/dev/null 2>&1 || true
                        pkgadd -G -n -d "$2" -a $tmp_dir/nocheck $project
                        ;;
                      "pkg")
                        echo "installing with installer..."
                        cd / && /usr/sbin/installer -pkg "$2" -target /
                        ;;
                      "dmg")
                        echo "installing dmg file..."
                        hdiutil detach "/Volumes/chef_software" >/dev/null 2>&1 || true
                        hdiutil attach "$2" -mountpoint "/Volumes/chef_software"
                        cd / && /usr/sbin/installer -pkg `find "/Volumes/chef_software" -name \*.pkg` -target /
                        hdiutil detach "/Volumes/chef_software"
                        ;;
                      "sh" )
                        echo "installing with sh..."
                        sh "$2"
                        ;;
                      *)
                        echo "Unknown filetype: $1"
                        report_bug
                        exit 1
                        ;;
                    esac
                    if test $? -ne 0; then
                      echo "Installation failed"
                      report_bug
                      exit 1
                    fi
                  }

                  if test "x$TMPDIR" = "x"; then
                    tmp="/tmp"
                  else
                    tmp=$TMPDIR
                  fi
                  # secure-ish temp dir creation without having mktemp available (DDoS-able but not expliotable)
                  tmp_dir="$tmp/install.sh.$$"
                  (umask 077 && mkdir $tmp_dir) || exit 1

                  ############
                  # end of helpers.sh
                  ############


                  project=chef
                  version=12.13.12+20160723173635
                  channel=unstable


                  # platform_detection.sh
                  ############
                  # This section makes platform detection compatible with omnitruck on the system
                  #   it runs.
                  #
                  # Outputs:
                  # $platform: Name of the platform.
                  # $platform_version: Version of the platform.
                  # $machine: System's architecture.
                  ############

                  #
                  # Platform and Platform Version detection
                  #
                  # NOTE: This should now match ohai platform and platform_version matching.
                  # do not invented new platform and platform_version schemas, just make this behave
                  # like what ohai returns as platform and platform_version for the server.
                  #
                  # ALSO NOTE: Do not mangle platform or platform_version here.  It is less error
                  # prone and more future-proof to do that in the server, and then all omnitruck clients
                  # will 'inherit' the changes (install.sh is not the only client of the omnitruck
                  # endpoint out there).
                  #

                  machine=`uname -m`
                  os=`uname -s`

                  if test -f "/etc/lsb-release" && grep -q DISTRIB_ID /etc/lsb-release && ! grep -q wrlinux /etc/lsb-release; then
                    platform=`grep DISTRIB_ID /etc/lsb-release | cut -d "=" -f 2 | tr '[A-Z]' '[a-z]'`
                    platform_version=`grep DISTRIB_RELEASE /etc/lsb-release | cut -d "=" -f 2`
                  elif test -f "/etc/debian_version"; then
                    platform="debian"
                    platform_version=`cat /etc/debian_version`
                  elif test -f "/etc/redhat-release"; then
                    platform=`sed 's/^\(.\+\) release.*/\1/' /etc/redhat-release | tr '[A-Z]' '[a-z]'`
                    platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/redhat-release`

                    # If /etc/redhat-release exists, we act like RHEL by default
                    if test "$platform" = "fedora"; then
                      # FIXME: stop remapping fedora to el
                      # FIXME: remove client side platform_version mangling and hard coded yolo
                      # Change platform version for use below.
                      platform_version="6.0"
                    fi

                    if test "$platform" = "xenserver"; then
                      # Current XenServer 6.2 is based on CentOS 5, platform is not reset to "el" server should hanlde response
                      platform="xenserver"
                    else
                      # FIXME: use "redhat"
                      platform="el"
                    fi

                  elif test -f "/etc/system-release"; then
                    platform=`sed 's/^\(.\+\) release.\+/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
                    platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
                    # amazon is built off of fedora, so act like RHEL
                    if test "$platform" = "amazon linux ami"; then
                      # FIXME: remove client side platform_version mangling and hard coded yolo, and remapping to deprecated "el"
                      platform="el"
                      platform_version="6.0"
                    fi
                  # Apple OS X
                  elif test -f "/usr/bin/sw_vers"; then
                    platform="mac_os_x"
                    # Matching the tab-space with sed is error-prone
                    platform_version=`sw_vers | awk '/^ProductVersion:/ { print $2 }' | cut -d. -f1,2`

                    # x86_64 Apple hardware often runs 32-bit kernels (see OHAI-63)
                    x86_64=`sysctl -n hw.optional.x86_64`
                    if test $x86_64 -eq 1; then
                      machine="x86_64"
                    fi
                  elif test -f "/etc/release"; then
                    machine=`/usr/bin/uname -p`
                    if grep -q SmartOS /etc/release; then
                      platform="smartos"
                      platform_version=`grep ^Image /etc/product | awk '{ print $3 }'`
                    else
                      platform="solaris2"
                      platform_version=`/usr/bin/uname -r`
                    fi
                  elif test -f "/etc/SuSE-release"; then
                    if grep -q 'Enterprise' /etc/SuSE-release;
                    then
                        platform="sles"
                        platform_version=`awk '/^VERSION/ {V = $3}; /^PATCHLEVEL/ {P = $3}; END {print V "." P}' /etc/SuSE-release`
                    else
                        platform="suse"
                        platform_version=`awk '/^VERSION =/ { print $3 }' /etc/SuSE-release`
                    fi
                  elif test "x$os" = "xFreeBSD"; then
                    platform="freebsd"
                    platform_version=`uname -r | sed 's/-.*//'`
                  elif test "x$os" = "xAIX"; then
                    platform="aix"
                    platform_version="`uname -v`.`uname -r`"
                    machine="powerpc"
                  elif test -f "/etc/os-release"; then
                    . /etc/os-release
                    if test "x$CISCO_RELEASE_INFO" != "x"; then
                      . $CISCO_RELEASE_INFO
                    fi

                    platform=$ID
                    platform_version=$VERSION
                  fi

                  if test "x$platform" = "x"; then
                    echo "Unable to determine platform version!"
                    report_bug
                    exit 1
                  fi

                  #
                  # NOTE: platform manging in the install.sh is DEPRECATED
                  #
                  # - install.sh should be true to ohai and should not remap
                  #   platform or platform versions.
                  #
                  # - remapping platform and mangling platform version numbers is
                  #   now the complete responsibility of the server-side endpoints
                  #

                  major_version=`echo $platform_version | cut -d. -f1`
                  case $platform in
                    # FIXME: should remove this case statement completely
                    "el")
                      # FIXME:  "el" is deprecated, should use "redhat"
                      platform_version=$major_version
                      ;;
                    "debian")
                      if test "x$major_version" = "x5"; then
                        # This is here for potential back-compat.
                        # We do not have 5 in versions we publish for anymore but we
                        # might have it for earlier versions.
                        platform_version="6"
                      else
                        platform_version=$major_version
                      fi
                      ;;
                    "freebsd")
                      platform_version=$major_version
                      ;;
                    "sles")
                      platform_version=$major_version
                      ;;
                    "suse")
                      platform_version=$major_version
                      ;;
                  esac

                  # normalize the architecture we detected
                  case $machine in
                    "x86_64"|"amd64"|"x64")
                      machine="x86_64"
                      ;;
                    "i386"|"i86pc"|"x86"|"i686")
                      machine="i386"
                      ;;
                    "sparc"|"sun4u"|"sun4v")
                      machine="sparc"
                      ;;
                  esac

                  if test "x$platform_version" = "x"; then
                    echo "Unable to determine platform version!"
                    report_bug
                    exit 1
                  fi

                  if test "x$platform" = "xsolaris2"; then
                    # hack up the path on Solaris to find wget, pkgadd
                    PATH=/usr/sfw/bin:/usr/sbin:$PATH
                    export PATH
                  fi

                  echo "$platform $platform_version $machine"

                  ############
                  # end of platform_detection.sh
                  ############


                  # artifactory_urls.sh
                  ############
                  # This section sets up the information for a build to be installed from artifactory
                  #  then uses $platform, $platform_version and $machine to select the correct
                  #  version.
                  #
                  # Inputs:
                  # $platform:
                  # $platform_version:
                  # $machine:
                  #
                  # Outputs:
                  # $download_url:
                  # $sha256:
                  ############


                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/ppc64le"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/14.04/chef_12.13.12+20160723173635-1_ppc64el.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 d70de23a48796d18a7759835d645f7d6a0c3004839b8fc453751bed4dbb8822a" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.9/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/mac_os_x/10.9/chef-12.13.12+20160723173635-1.dmg" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 776d4213b5e5cf3925af217362d277246b70f28129d4795636bb0d61138d3aa2" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.10/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/mac_os_x/10.10/chef-12.13.12+20160723173635-1.dmg" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 776d4213b5e5cf3925af217362d277246b70f28129d4795636bb0d61138d3aa2" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.11/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/mac_os_x/10.11/chef-12.13.12+20160723173635-1.dmg" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 776d4213b5e5cf3925af217362d277246b70f28129d4795636bb0d61138d3aa2" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ios_xr/6/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ios_xr/6/chef-12.13.12+20160723173635-1.ios_xr6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 a84b1a57a289e0cb3db727cfe9d9c5da50a321b468f6c437a9f71dd2b968067b" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/10/chef-12.13.12+20160723173635_1.i386.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 165df1f118d2145d849420c38819fd460935c66eefabb9aa5681c755a1e13258" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/nexus/7/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/nexus/7/chef-12.13.12+20160723173635-1.nexus7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 e77a7aaff7190b2e646e8a2dc0bf897bb31121004380288932ee4f9dff87f266" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/6/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/6/chef_12.13.12+20160723173635-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 80eb2b907c0af1b2ccd55ab348b69550445830b087d4df79055521605b707c3e" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/7/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/7/chef_12.13.12+20160723173635-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 80eb2b907c0af1b2ccd55ab348b69550445830b087d4df79055521605b707c3e" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/8/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/8/chef_12.13.12+20160723173635-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 80eb2b907c0af1b2ccd55ab348b69550445830b087d4df79055521605b707c3e" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/9/chef-12.13.12+20160723173635_1.i386.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 99c3ee1bb08e5f2446586dc1d7497615b265595f683df7b10ac9503cb65f1596" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/12.04/chef_12.13.12+20160723173635-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 c2d701155718263fa252dd149379321cb14767967ac9efc1a59e13c4efe91da5" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/14.04/chef_12.13.12+20160723173635-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 c2d701155718263fa252dd149379321cb14767967ac9efc1a59e13c4efe91da5" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.10/chef-12.13.12+20160723173635-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 86e734b3951d75fa6cecbfc85a01f0775e537f151661fef5ed2ed37df50b5ca4" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/7/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/7/chef-12.13.12+20160723173635-1.el7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 2dcaf9871f4391c5b7be20482c3fc0d5047bd85e346ba0a8602eda3b991c606c" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/5/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/5/chef-12.13.12+20160723173635-1.el5.i386.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7dbbef15a30d47fb3bc4633a239775634e8103ab0973b86468af02fd36ceb41d" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.11/chef-12.13.12+20160723173635-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 86e734b3951d75fa6cecbfc85a01f0775e537f151661fef5ed2ed37df50b5ca4" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/6/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/6/chef-12.13.12+20160723173635-1.el6.i386.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 4bd08c4a3dd4d1dbcf9b17f4d25f9de1a9a3515c35bfe21c008a7299dab2c0b2" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/12.04/chef_12.13.12+20160723173635-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 fb18add4d8465d59f26b42222657c16ce91305d3938c6f28bc256b6572d47a27" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/14.04/chef_12.13.12+20160723173635-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 fb18add4d8465d59f26b42222657c16ce91305d3938c6f28bc256b6572d47a27" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/7/ppc64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/7/chef-12.13.12+20160723173635-1.el7.ppc64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 ab50a1f40ba1c7218e18503d03906b50f50c54d36218c9c2fd3ce2f146001aa6" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/7/ppc64le"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/7/chef-12.13.12+20160723173635-1.el7.ppc64le.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 686a92c35869ebf3c6278d88c710c5bd633d1b8b8335726273a01082edb2ea60" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2008r2/chef-client-12.13.12+20160723173635-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 44275de361a54c64470100bbf293fed06cb61cda15e06a3875f36f569682d7f4" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/amd64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/10/chef-12.13.12+20160723173635_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 870cdb950db39758bdfa60c7d6f6d922471a60d5c1cc48063a1d5a648ef15798" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/5/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/5/chef-12.13.12+20160723173635-1.el5.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 04183ff8f23deec12d36dcda314db67cb4b92e269f0814a88b6ea5fe9a4293aa" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012/chef-client-12.13.12+20160723173635-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 44275de361a54c64470100bbf293fed06cb61cda15e06a3875f36f569682d7f4" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/amd64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/9/chef-12.13.12+20160723173635_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7039b4febebd03a3dff25dbd5a997404d07a36bc0a2658b1b5bff84dcea6103c" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012r2/chef-client-12.13.12+20160723173635-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 44275de361a54c64470100bbf293fed06cb61cda15e06a3875f36f569682d7f4" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/6/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/6/chef-12.13.12+20160723173635-1.el6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 31d3d3a259113909f3ddf503e36c85d32804463238b93c723fa6f95c982e0d86" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/6/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/6/chef_12.13.12+20160723173635-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 4d98ccafaae9185041f342a7a0bb1227eb00b8749c9a98ff83ece4142b6a12c7" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/7/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/7/chef_12.13.12+20160723173635-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 4d98ccafaae9185041f342a7a0bb1227eb00b8749c9a98ff83ece4142b6a12c7" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/8/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/8/chef_12.13.12+20160723173635-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 4d98ccafaae9185041f342a7a0bb1227eb00b8749c9a98ff83ece4142b6a12c7" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2008r2/chef-client-12.13.12+20160723173635-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 305e914d328bff4f1cf8aaf132f90e3eed9eac167f7137e0edffff4420bf8a86" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012/chef-client-12.13.12+20160723173635-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 305e914d328bff4f1cf8aaf132f90e3eed9eac167f7137e0edffff4420bf8a86" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012r2/chef-client-12.13.12+20160723173635-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 305e914d328bff4f1cf8aaf132f90e3eed9eac167f7137e0edffff4420bf8a86" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/aix/6.1/powerpc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/aix/6.1/chef-12.13.12+20160723173635-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 2aded63c39bc18df6a59a6124449c794f205ea7ba4c03a2d5f581ceba1dc02e1" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/aix/7.1/powerpc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/aix/7.1/chef-12.13.12+20160723173635-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 2aded63c39bc18df6a59a6124449c794f205ea7ba4c03a2d5f581ceba1dc02e1" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/sparc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.10/chef-12.13.12+20160723173635-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7a80c015c76fb1d577f837f31397d8438e2cc8d19adec73a548492bed383609d" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/sparc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.11/chef-12.13.12+20160723173635-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7a80c015c76fb1d577f837f31397d8438e2cc8d19adec73a548492bed383609d" >> "$artifact_info_dir/artifact_info"


                  artifact_info_for_platform="$tmp_dir/artifact_info/$platform/$platform_version/$machine/artifact_info"

                  download_url=`awk '$1 == "url" { print $2 }' "$artifact_info_for_platform"`
                  sha256=`awk '$1 == "sha256" { print $2 }' "$artifact_info_for_platform"`


                  # fetch_package.sh
                  ############
                  # This section fetchs a package from $download_url and verifies its metadata.
                  #
                  # Inputs:
                  # $download_url:
                  # $tmp_dir:
                  # Optional Inputs:
                  # $cmdline_filename: Name of the package downloaded on local disk.
                  # $cmdline_dl_dir: Name of the directory downloaded package will be saved to on local disk.
                  #
                  # Outputs:
                  # $download_filename: Name of the downloaded file on local disk.
                  # $filetype: Type of the file downloaded.
                  ############

                  filename=`echo $download_url | sed -e 's/^.*\///'`
                  filetype=`echo $filename | sed -e 's/^.*\.//'`

                  # use either $tmp_dir, the provided directory (-d) or the provided filename (-f)
                  if test "x$cmdline_filename" != "x"; then
                    download_filename="$cmdline_filename"
                  elif test "x$cmdline_dl_dir" != "x"; then
                    download_filename="$cmdline_dl_dir/$filename"
                  else
                    download_filename="$tmp_dir/$filename"
                  fi

                  # ensure the parent directory where to download the installer always exists
                  download_dir=`dirname $download_filename`
                  (umask 077 && mkdir -p $download_dir) || exit 1

                  # check if we have that file locally available and if so verify the checksum
                  cached_file_available="false"
                  if test -f $download_filename; then
                    echo "$download_filename already exists, verifiying checksum..."
                    if do_checksum "$download_filename" "$sha256"; then
                      echo "checksum compare succeeded, using existing file!"
                      cached_file_available="true"
                    else
                      echo "checksum mismatch, downloading latest version of the file"
                    fi
                  fi

                  # download if no local version of the file available
                  if test "x$cached_file_available" != "xtrue"; then
                    do_download "$download_url"  "$download_filename"
                    do_checksum "$download_filename" "$sha256" || checksum_mismatch
                  fi

                  ############
                  # end of fetch_package.sh
                  ############


                  # install_package.sh
                  ############
                  # Installs a package and removed the temp directory.
                  #
                  # Inputs:
                  # $download_filename: Name of the file to be installed.
                  # $filetype: Type of the file to be installed.
                  # $version: The version requested. Used only for warning user if not set.
                  ############

                  if test "x$version" = "x"; then
                    echo
                    echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
                    echo
                    echo "You are installing an omnibus package without a version pin.  If you are installing"
                    echo "on production servers via an automated process this is DANGEROUS and you will"
                    echo "be upgraded without warning on new releases, even to new major releases."
                    echo "Letting the version float is only appropriate in desktop, test, development or"
                    echo "CI/CD environments."
                    echo
                    echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
                    echo
                  fi

                  install_file $filetype "$download_filename"

                  if test "x$tmp_dir" != "x"; then
                    rm -r "$tmp_dir"
                  fi

                  ############
                  # end of install_package.sh
                  ############

                  EOL
                  chmod +x /tmp/chef-installer.sh
                  sudo -E /tmp/chef-installer.sh)
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         /bin/bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         el 6 x86_64
                         downloading http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/6/chef-12.13.12+20160723173635-1.el6.x86_64.rpm
                           to file /tmp/install.sh.959/chef-12.13.12+20160723173635-1.el6.x86_64.rpm
                         trying curl...
                         Comparing checksum with sha256sum...
                         Installing chef 12.13.12+20160723173635
                         installing with rpm...
                         warning: /tmp/install.sh.959/chef-12.13.12+20160723173635-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
                         Preparing...                                                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                  D      [SSH] opening connection to root@10.194.14.124<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] root@10.194.14.124<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (echo '[SSH] Established')
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         [SSH] Established
                  D      Using sudo_command='sudo -E' for ohai hints
                  D      [SSH] reusing existing connection root@10.194.14.124<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] root@10.194.14.124<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E mkdir -p /etc/chef/ohai/hints; sudo -E touch /etc/chef/ohai/hints/ec2.json)
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                  D      ec2:create '10.194.14.124'
                         Finished creating <fips-integration-centos-6> (1m37.26s).
                  -----> Converging <fips-integration-centos-6>...
                         Preparing files for transfer
                  D      Creating local sandbox in /tmp/cheftest/fips-integration-centos-6-sandbox-20160723-20479-1hdxgra
                         Preparing dna.json
                  D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                         Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                         Removing non-cookbook files before transfer
                         Preparing validation.pem
                  D      Using a dummy validation.pem
                         Preparing client.rb
                  D      Creating client.rb from {:node_name=>"fips-integration-centos-6", :checksum_path=>"/tmp/kitchen/checksums", :file_cache_path=>"/tmp/kitchen/cache", :file_backup_path=>"/tmp/kitchen/backup", :cookbook_path=>["/tmp/kitchen/cookbooks", "/tmp/kitchen/site-cookbooks"], :data_bag_path=>"/tmp/kitchen/data_bags", :environment_path=>"/tmp/kitchen/environments", :node_path=>"/tmp/kitchen/nodes", :role_path=>"/tmp/kitchen/roles", :client_path=>"/tmp/kitchen/clients", :user_path=>"/tmp/kitchen/users", :validation_key=>"/tmp/kitchen/validation.pem", :client_key=>"/tmp/kitchen/client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"/tmp/kitchen/encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                  D      [SSH] reusing existing connection root@10.194.14.124<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] root@10.194.14.124<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E cat > /tmp/chef-installer.sh <<"EOL"
                  #!/bin/bash
                  #!/bin/sh
                  # WARNING: REQUIRES /bin/sh
                  #
                  # - must run on /bin/sh on solaris 9
                  # - must run on /bin/sh on AIX 6.x
                  #
                  # Copyright:: Copyright (c) 2010-2015 Chef Software, Inc.
                  # License:: Apache License, Version 2.0
                  #
                  # Licensed under the Apache License, Version 2.0 (the "License");
                  # you may not use this file except in compliance with the License.
                  # You may obtain a copy of the License at
                  #
                  #     http://www.apache.org/licenses/LICENSE-2.0
                  #
                  # Unless required by applicable law or agreed to in writing, software
                  # distributed under the License is distributed on an "AS IS" BASIS,
                  # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                  # See the License for the specific language governing permissions and
                  # limitations under the License.
                  #

                  # helpers.sh
                  ############
                  # This section has some helper functions to make life easier.
                  #
                  # Outputs:
                  # $tmp_dir: secure-ish temp directory that can be used during installation.
                  ############

                  # Check whether a command exists - returns 0 if it does, 1 if it does not
                  exists() {
                    if command -v $1 >/dev/null 2>&1
                    then
                      return 0
                    else
                      return 1
                    fi
                  }

                  # Output the instructions to report bug about this script
                  report_bug() {
                    echo "Version: $version"
                    echo ""
                    echo "Please file a Bug Report at https://github.com/chef/omnitruck/issues/new"
                    echo "Alternatively, feel free to open a Support Ticket at https://www.chef.io/support/tickets"
                    echo "More Chef support resources can be found at https://www.chef.io/support"
                    echo ""
                    echo "Please include as many details about the problem as possible i.e., how to reproduce"
                    echo "the problem (if possible), type of the Operating System and its version, etc.,"
                    echo "and any other relevant details that might help us with troubleshooting."
                    echo ""
                  }

                  checksum_mismatch() {
                    echo "Package checksum mismatch!"
                    report_bug
                    exit 1
                  }

                  unable_to_retrieve_package() {
                    echo "Unable to retrieve a valid package!"
                    report_bug
                    echo "Metadata URL: $metadata_url"
                    if test "x$download_url" != "x"; then
                      echo "Download URL: $download_url"
                    fi
                    if test "x$stderr_results" != "x"; then
                      echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
                    fi
                    exit 1
                  }

                  http_404_error() {
                    echo "Omnitruck artifact does not exist for version $version on platform $platform"
                    echo ""
                    echo "Either this means:"
                    echo "   - We do not support $platform"
                    echo "   - We do not have an artifact for $version"
                    echo ""
                    echo "This is often the latter case due to running a prerelease or RC version of chef"
                    echo "or a gem version which was only pushed to rubygems and not omnitruck."
                    echo ""
                    echo "You may be able to set your knife[:bootstrap_version] to the most recent stable"
                    echo "release of Chef to fix this problem (or the most recent stable major version number)."
                    echo ""
                    echo "In order to test the version parameter, adventurous users may take the Metadata URL"
                    echo "below and modify the '&v=<number>' parameter until you successfully get a URL that"
                    echo "does not 404 (e.g. via curl or wget).  You should be able to use '&v=11' or '&v=12'"
                    echo "succesfully."
                    echo ""
                    echo "If you cannot fix this problem by setting the bootstrap_version, it probably means"
                    echo "that $platform is not supported."
                    echo ""
                    # deliberately do not call report_bug to suppress bug report noise.
                    echo "Metadata URL: $metadata_url"
                    if test "x$download_url" != "x"; then
                      echo "Download URL: $download_url"
                    fi
                    if test "x$stderr_results" != "x"; then
                      echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
                    fi
                    exit 1
                  }

                  capture_tmp_stderr() {
                    # spool up /tmp/stderr from all the commands we called
                    if test -f "$tmp_dir/stderr"; then
                      output=`cat $tmp_dir/stderr`
                      stderr_results="${stderr_results}\nSTDERR from $1:\n\n$output\n"
                      rm $tmp_dir/stderr
                    fi
                  }

                  # do_wget URL FILENAME
                  do_wget() {
                    echo "trying wget..."
                    wget -O "$2" "$1" 2>$tmp_dir/stderr
                    rc=$?
                    # check for 404
                    grep "ERROR 404" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "wget"
                      return 1
                    fi

                    return 0
                  }

                  # do_curl URL FILENAME
                  do_curl() {
                    echo "trying curl..."
                    curl --retry 5 -sL -D $tmp_dir/stderr "$1" > "$2"
                    rc=$?
                    # check for 404
                    grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "curl"
                      return 1
                    fi

                    return 0
                  }

                  # do_fetch URL FILENAME
                  do_fetch() {
                    echo "trying fetch..."
                    fetch -o "$2" "$1" 2>$tmp_dir/stderr
                    # check for bad return status
                    test $? -ne 0 && return 1
                    return 0
                  }

                  # do_perl URL FILENAME
                  do_perl() {
                    echo "trying perl..."
                    perl -e 'use LWP::Simple; getprint($ARGV[0]);' "$1" > "$2" 2>$tmp_dir/stderr
                    rc=$?
                    # check for 404
                    grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "perl"
                      return 1
                    fi

                    return 0
                  }

                  # do_python URL FILENAME
                  do_python() {
                    echo "trying python..."
                    python -c "import sys,urllib2 ; sys.stdout.write(urllib2.urlopen(sys.argv[1]).read())" "$1" > "$2" 2>$tmp_dir/stderr
                    rc=$?
                    # check for 404
                    grep "HTTP Error 404" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi

                    # check for bad return status or empty output
                    if test $rc -ne 0 || test ! -s "$2"; then
                      capture_tmp_stderr "python"
                      return 1
                    fi
                    return 0
                  }

                  # returns 0 if checksums match
                  do_checksum() {
                    if exists sha256sum; then
                      echo "Comparing checksum with sha256sum..."
                      checksum=`sha256sum $1 | awk '{ print $1 }'`
                      return `test "x$checksum" = "x$2"`
                    elif exists shasum; then
                      echo "Comparing checksum with shasum..."
                      checksum=`shasum -a 256 $1 | awk '{ print $1 }'`
                      return `test "x$checksum" = "x$2"`
                    else
                      echo "WARNING: could not find a valid checksum program, pre-install shasum or sha256sum in your O/S image to get valdation..."
                      return 0
                    fi
                  }

                  # do_download URL FILENAME
                  do_download() {
                    echo "downloading $1"
                    echo "  to file $2"

                    url=`echo $1`
                    if test "x$platform" = "xsolaris2"; then
                      if test "x$platform_version" = "x5.9" -o "x$platform_version" = "x5.10"; then
                        # solaris 9 lacks openssl, solaris 10 lacks recent enough credentials - your base O/S is completely insecure, please upgrade
                        url=`echo $url | sed -e 's/https/http/'`
                      fi
                    fi

                    # we try all of these until we get success.
                    # perl, in particular may be present but LWP::Simple may not be installed

                    if exists wget; then
                      do_wget $url $2 && return 0
                    fi

                    if exists curl; then
                      do_curl $url $2 && return 0
                    fi

                    if exists fetch; then
                      do_fetch $url $2 && return 0
                    fi

                    if exists perl; then
                      do_perl $url $2 && return 0
                    fi

                    if exists python; then
                      do_python $url $2 && return 0
                    fi

                    unable_to_retrieve_package
                  }

                  # install_file TYPE FILENAME
                  # TYPE is "rpm", "deb", "solaris", "sh", etc.
                  install_file() {
                    echo "Installing $project $version"
                    case "$1" in
                      "rpm")
                        if test "x$platform" = "xnexus" || test "x$platform" = "xios_xr"; then
                          echo "installing with yum..."
                          yum install -yv "$2"
                        else
                          echo "installing with rpm..."
                          rpm -Uvh --oldpackage --replacepkgs "$2"
                        fi
                        ;;
                      "deb")
                        echo "installing with dpkg..."
                        dpkg -i "$2"
                        ;;
                      "bff")
                        echo "installing with installp..."
                        installp -aXYgd "$2" all
                        ;;
                      "solaris")
                        echo "installing with pkgadd..."
                        echo "conflict=nocheck" > $tmp_dir/nocheck
                        echo "action=nocheck" >> $tmp_dir/nocheck
                        echo "mail=" >> $tmp_dir/nocheck
                        pkgrm -a $tmp_dir/nocheck -n $project >/dev/null 2>&1 || true
                        pkgadd -G -n -d "$2" -a $tmp_dir/nocheck $project
                        ;;
                      "pkg")
                        echo "installing with installer..."
                        cd / && /usr/sbin/installer -pkg "$2" -target /
                        ;;
                      "dmg")
                        echo "installing dmg file..."
                        hdiutil detach "/Volumes/chef_software" >/dev/null 2>&1 || true
                        hdiutil attach "$2" -mountpoint "/Volumes/chef_software"
                        cd / && /usr/sbin/installer -pkg `find "/Volumes/chef_software" -name \*.pkg` -target /
                        hdiutil detach "/Volumes/chef_software"
                        ;;
                      "sh" )
                        echo "installing with sh..."
                        sh "$2"
                        ;;
                      *)
                        echo "Unknown filetype: $1"
                        report_bug
                        exit 1
                        ;;
                    esac
                    if test $? -ne 0; then
                      echo "Installation failed"
                      report_bug
                      exit 1
                    fi
                  }

                  if test "x$TMPDIR" = "x"; then
                    tmp="/tmp"
                  else
                    tmp=$TMPDIR
                  fi
                  # secure-ish temp dir creation without having mktemp available (DDoS-able but not expliotable)
                  tmp_dir="$tmp/install.sh.$$"
                  (umask 077 && mkdir $tmp_dir) || exit 1

                  ############
                  # end of helpers.sh
                  ############


                  project=chef
                  version=12.13.12+20160723173635
                  channel=unstable


                  # platform_detection.sh
                  ############
                  # This section makes platform detection compatible with omnitruck on the system
                  #   it runs.
                  #
                  # Outputs:
                  # $platform: Name of the platform.
                  # $platform_version: Version of the platform.
                  # $machine: System's architecture.
                  ############

                  #
                  # Platform and Platform Version detection
                  #
                  # NOTE: This should now match ohai platform and platform_version matching.
                  # do not invented new platform and platform_version schemas, just make this behave
                  # like what ohai returns as platform and platform_version for the server.
                  #
                  # ALSO NOTE: Do not mangle platform or platform_version here.  It is less error
                  # prone and more future-proof to do that in the server, and then all omnitruck clients
                  # will 'inherit' the changes (install.sh is not the only client of the omnitruck
                  # endpoint out there).
                  #

                  machine=`uname -m`
                  os=`uname -s`

                  if test -f "/etc/lsb-release" && grep -q DISTRIB_ID /etc/lsb-release && ! grep -q wrlinux /etc/lsb-release; then
                    platform=`grep DISTRIB_ID /etc/lsb-release | cut -d "=" -f 2 | tr '[A-Z]' '[a-z]'`
                    platform_version=`grep DISTRIB_RELEASE /etc/lsb-release | cut -d "=" -f 2`
                  elif test -f "/etc/debian_version"; then
                    platform="debian"
                    platform_version=`cat /etc/debian_version`
                  elif test -f "/etc/redhat-release"; then
                    platform=`sed 's/^\(.\+\) release.*/\1/' /etc/redhat-release | tr '[A-Z]' '[a-z]'`
                    platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/redhat-release`

                    # If /etc/redhat-release exists, we act like RHEL by default
                    if test "$platform" = "fedora"; then
                      # FIXME: stop remapping fedora to el
                      # FIXME: remove client side platform_version mangling and hard coded yolo
                      # Change platform version for use below.
                      platform_version="6.0"
                    fi

                    if test "$platform" = "xenserver"; then
                      # Current XenServer 6.2 is based on CentOS 5, platform is not reset to "el" server should hanlde response
                      platform="xenserver"
                    else
                      # FIXME: use "redhat"
                      platform="el"
                    fi

                  elif test -f "/etc/system-release"; then
                    platform=`sed 's/^\(.\+\) release.\+/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
                    platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
                    # amazon is built off of fedora, so act like RHEL
                    if test "$platform" = "amazon linux ami"; then
                      # FIXME: remove client side platform_version mangling and hard coded yolo, and remapping to deprecated "el"
                      platform="el"
                      platform_version="6.0"
                    fi
                  # Apple OS X
                  elif test -f "/usr/bin/sw_vers"; then
                    platform="mac_os_x"
                    # Matching the tab-space with sed is error-prone
                    platform_version=`sw_vers | awk '/^ProductVersion:/ { print $2 }' | cut -d. -f1,2`

                    # x86_64 Apple hardware often runs 32-bit kernels (see OHAI-63)
                    x86_64=`sysctl -n hw.optional.x86_64`
                    if test $x86_64 -eq 1; then
                      machine="x86_64"
                    fi
                  elif test -f "/etc/release"; then
                    machine=`/usr/bin/uname -p`
                    if grep -q SmartOS /etc/release; then
                      platform="smartos"
                      platform_version=`grep ^Image /etc/product | awk '{ print $3 }'`
                    else
                      platform="solaris2"
                      platform_version=`/usr/bin/uname -r`
                    fi
                  elif test -f "/etc/SuSE-release"; then
                    if grep -q 'Enterprise' /etc/SuSE-release;
                    then
                        platform="sles"
                        platform_version=`awk '/^VERSION/ {V = $3}; /^PATCHLEVEL/ {P = $3}; END {print V "." P}' /etc/SuSE-release`
                    else
                        platform="suse"
                        platform_version=`awk '/^VERSION =/ { print $3 }' /etc/SuSE-release`
                    fi
                  elif test "x$os" = "xFreeBSD"; then
                    platform="freebsd"
                    platform_version=`uname -r | sed 's/-.*//'`
                  elif test "x$os" = "xAIX"; then
                    platform="aix"
                    platform_version="`uname -v`.`uname -r`"
                    machine="powerpc"
                  elif test -f "/etc/os-release"; then
                    . /etc/os-release
                    if test "x$CISCO_RELEASE_INFO" != "x"; then
                      . $CISCO_RELEASE_INFO
                    fi

                    platform=$ID
                    platform_version=$VERSION
                  fi

                  if test "x$platform" = "x"; then
                    echo "Unable to determine platform version!"
                    report_bug
                    exit 1
                  fi

                  #
                  # NOTE: platform manging in the install.sh is DEPRECATED
                  #
                  # - install.sh should be true to ohai and should not remap
                  #   platform or platform versions.
                  #
                  # - remapping platform and mangling platform version numbers is
                  #   now the complete responsibility of the server-side endpoints
                  #

                  major_version=`echo $platform_version | cut -d. -f1`
                  case $platform in
                    # FIXME: should remove this case statement completely
                    "el")
                      # FIXME:  "el" is deprecated, should use "redhat"
                      platform_version=$major_version
                      ;;
                    "debian")
                      if test "x$major_version" = "x5"; then
                        # This is here for potential back-compat.
                        # We do not have 5 in versions we publish for anymore but we
                        # might have it for earlier versions.
                        platform_version="6"
                      else
                        platform_version=$major_version
                      fi
                      ;;
                    "freebsd")
                      platform_version=$major_version
                      ;;
                    "sles")
                      platform_version=$major_version
                      ;;
                    "suse")
                      platform_version=$major_version
                      ;;
                  esac

                  # normalize the architecture we detected
                  case $machine in
                    "x86_64"|"amd64"|"x64")
                      machine="x86_64"
                      ;;
                    "i386"|"i86pc"|"x86"|"i686")
                      machine="i386"
                      ;;
                    "sparc"|"sun4u"|"sun4v")
                      machine="sparc"
                      ;;
                  esac

                  if test "x$platform_version" = "x"; then
                    echo "Unable to determine platform version!"
                    report_bug
                    exit 1
                  fi

                  if test "x$platform" = "xsolaris2"; then
                    # hack up the path on Solaris to find wget, pkgadd
                    PATH=/usr/sfw/bin:/usr/sbin:$PATH
                    export PATH
                  fi

                  echo "$platform $platform_version $machine"

                  ############
                  # end of platform_detection.sh
                  ############


                  # artifactory_urls.sh
                  ############
                  # This section sets up the information for a build to be installed from artifactory
                  #  then uses $platform, $platform_version and $machine to select the correct
                  #  version.
                  #
                  # Inputs:
                  # $platform:
                  # $platform_version:
                  # $machine:
                  #
                  # Outputs:
                  # $download_url:
                  # $sha256:
                  ############


                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/ppc64le"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/14.04/chef_12.13.12+20160723173635-1_ppc64el.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 d70de23a48796d18a7759835d645f7d6a0c3004839b8fc453751bed4dbb8822a" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.9/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/mac_os_x/10.9/chef-12.13.12+20160723173635-1.dmg" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 776d4213b5e5cf3925af217362d277246b70f28129d4795636bb0d61138d3aa2" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.10/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/mac_os_x/10.10/chef-12.13.12+20160723173635-1.dmg" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 776d4213b5e5cf3925af217362d277246b70f28129d4795636bb0d61138d3aa2" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.11/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/mac_os_x/10.11/chef-12.13.12+20160723173635-1.dmg" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 776d4213b5e5cf3925af217362d277246b70f28129d4795636bb0d61138d3aa2" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ios_xr/6/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ios_xr/6/chef-12.13.12+20160723173635-1.ios_xr6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 a84b1a57a289e0cb3db727cfe9d9c5da50a321b468f6c437a9f71dd2b968067b" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/10/chef-12.13.12+20160723173635_1.i386.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 165df1f118d2145d849420c38819fd460935c66eefabb9aa5681c755a1e13258" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/nexus/7/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/nexus/7/chef-12.13.12+20160723173635-1.nexus7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 e77a7aaff7190b2e646e8a2dc0bf897bb31121004380288932ee4f9dff87f266" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/6/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/6/chef_12.13.12+20160723173635-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 80eb2b907c0af1b2ccd55ab348b69550445830b087d4df79055521605b707c3e" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/7/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/7/chef_12.13.12+20160723173635-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 80eb2b907c0af1b2ccd55ab348b69550445830b087d4df79055521605b707c3e" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/8/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/8/chef_12.13.12+20160723173635-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 80eb2b907c0af1b2ccd55ab348b69550445830b087d4df79055521605b707c3e" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/9/chef-12.13.12+20160723173635_1.i386.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 99c3ee1bb08e5f2446586dc1d7497615b265595f683df7b10ac9503cb65f1596" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/12.04/chef_12.13.12+20160723173635-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 c2d701155718263fa252dd149379321cb14767967ac9efc1a59e13c4efe91da5" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/14.04/chef_12.13.12+20160723173635-1_i386.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 c2d701155718263fa252dd149379321cb14767967ac9efc1a59e13c4efe91da5" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.10/chef-12.13.12+20160723173635-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 86e734b3951d75fa6cecbfc85a01f0775e537f151661fef5ed2ed37df50b5ca4" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/7/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/7/chef-12.13.12+20160723173635-1.el7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 2dcaf9871f4391c5b7be20482c3fc0d5047bd85e346ba0a8602eda3b991c606c" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/5/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/5/chef-12.13.12+20160723173635-1.el5.i386.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7dbbef15a30d47fb3bc4633a239775634e8103ab0973b86468af02fd36ceb41d" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.11/chef-12.13.12+20160723173635-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 86e734b3951d75fa6cecbfc85a01f0775e537f151661fef5ed2ed37df50b5ca4" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/6/i686"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/6/chef-12.13.12+20160723173635-1.el6.i386.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 4bd08c4a3dd4d1dbcf9b17f4d25f9de1a9a3515c35bfe21c008a7299dab2c0b2" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/12.04/chef_12.13.12+20160723173635-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 fb18add4d8465d59f26b42222657c16ce91305d3938c6f28bc256b6572d47a27" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/14.04/chef_12.13.12+20160723173635-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 fb18add4d8465d59f26b42222657c16ce91305d3938c6f28bc256b6572d47a27" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/7/ppc64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/7/chef-12.13.12+20160723173635-1.el7.ppc64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 ab50a1f40ba1c7218e18503d03906b50f50c54d36218c9c2fd3ce2f146001aa6" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/7/ppc64le"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/7/chef-12.13.12+20160723173635-1.el7.ppc64le.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 686a92c35869ebf3c6278d88c710c5bd633d1b8b8335726273a01082edb2ea60" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2008r2/chef-client-12.13.12+20160723173635-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 44275de361a54c64470100bbf293fed06cb61cda15e06a3875f36f569682d7f4" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/amd64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/10/chef-12.13.12+20160723173635_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 870cdb950db39758bdfa60c7d6f6d922471a60d5c1cc48063a1d5a648ef15798" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/5/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/5/chef-12.13.12+20160723173635-1.el5.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 04183ff8f23deec12d36dcda314db67cb4b92e269f0814a88b6ea5fe9a4293aa" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012/chef-client-12.13.12+20160723173635-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 44275de361a54c64470100bbf293fed06cb61cda15e06a3875f36f569682d7f4" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/amd64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/9/chef-12.13.12+20160723173635_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7039b4febebd03a3dff25dbd5a997404d07a36bc0a2658b1b5bff84dcea6103c" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/i386"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012r2/chef-client-12.13.12+20160723173635-1-x86.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 44275de361a54c64470100bbf293fed06cb61cda15e06a3875f36f569682d7f4" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/el/6/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/6/chef-12.13.12+20160723173635-1.el6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 31d3d3a259113909f3ddf503e36c85d32804463238b93c723fa6f95c982e0d86" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/6/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/6/chef_12.13.12+20160723173635-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 4d98ccafaae9185041f342a7a0bb1227eb00b8749c9a98ff83ece4142b6a12c7" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/7/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/7/chef_12.13.12+20160723173635-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 4d98ccafaae9185041f342a7a0bb1227eb00b8749c9a98ff83ece4142b6a12c7" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/debian/8/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/8/chef_12.13.12+20160723173635-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 4d98ccafaae9185041f342a7a0bb1227eb00b8749c9a98ff83ece4142b6a12c7" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2008r2/chef-client-12.13.12+20160723173635-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 305e914d328bff4f1cf8aaf132f90e3eed9eac167f7137e0edffff4420bf8a86" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012/chef-client-12.13.12+20160723173635-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 305e914d328bff4f1cf8aaf132f90e3eed9eac167f7137e0edffff4420bf8a86" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/x86_64"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012r2/chef-client-12.13.12+20160723173635-1-x64.msi" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 305e914d328bff4f1cf8aaf132f90e3eed9eac167f7137e0edffff4420bf8a86" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/aix/6.1/powerpc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/aix/6.1/chef-12.13.12+20160723173635-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 2aded63c39bc18df6a59a6124449c794f205ea7ba4c03a2d5f581ceba1dc02e1" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/aix/7.1/powerpc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/aix/7.1/chef-12.13.12+20160723173635-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 2aded63c39bc18df6a59a6124449c794f205ea7ba4c03a2d5f581ceba1dc02e1" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/sparc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.10/chef-12.13.12+20160723173635-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7a80c015c76fb1d577f837f31397d8438e2cc8d19adec73a548492bed383609d" >> "$artifact_info_dir/artifact_info"

                    artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/sparc"
                    mkdir -p $artifact_info_dir
                    touch "$artifact_info_dir/artifact_info"
                    echo "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.11/chef-12.13.12+20160723173635-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
                    echo "sha256 7a80c015c76fb1d577f837f31397d8438e2cc8d19adec73a548492bed383609d" >> "$artifact_info_dir/artifact_info"


                  artifact_info_for_platform="$tmp_dir/artifact_info/$platform/$platform_version/$machine/artifact_info"

                  download_url=`awk '$1 == "url" { print $2 }' "$artifact_info_for_platform"`
                  sha256=`awk '$1 == "sha256" { print $2 }' "$artifact_info_for_platform"`


                  # fetch_package.sh
                  ############
                  # This section fetchs a package from $download_url and verifies its metadata.
                  #
                  # Inputs:
                  # $download_url:
                  # $tmp_dir:
                  # Optional Inputs:
                  # $cmdline_filename: Name of the package downloaded on local disk.
                  # $cmdline_dl_dir: Name of the directory downloaded package will be saved to on local disk.
                  #
                  # Outputs:
                  # $download_filename: Name of the downloaded file on local disk.
                  # $filetype: Type of the file downloaded.
                  ############

                  filename=`echo $download_url | sed -e 's/^.*\///'`
                  filetype=`echo $filename | sed -e 's/^.*\.//'`

                  # use either $tmp_dir, the provided directory (-d) or the provided filename (-f)
                  if test "x$cmdline_filename" != "x"; then
                    download_filename="$cmdline_filename"
                  elif test "x$cmdline_dl_dir" != "x"; then
                    download_filename="$cmdline_dl_dir/$filename"
                  else
                    download_filename="$tmp_dir/$filename"
                  fi

                  # ensure the parent directory where to download the installer always exists
                  download_dir=`dirname $download_filename`
                  (umask 077 && mkdir -p $download_dir) || exit 1

                  # check if we have that file locally available and if so verify the checksum
                  cached_file_available="false"
                  if test -f $download_filename; then
                    echo "$download_filename already exists, verifiying checksum..."
                    if do_checksum "$download_filename" "$sha256"; then
                      echo "checksum compare succeeded, using existing file!"
                      cached_file_available="true"
                    else
                      echo "checksum mismatch, downloading latest version of the file"
                    fi
                  fi

                  # download if no local version of the file available
                  if test "x$cached_file_available" != "xtrue"; then
                    do_download "$download_url"  "$download_filename"
                    do_checksum "$download_filename" "$sha256" || checksum_mismatch
                  fi

                  ############
                  # end of fetch_package.sh
                  ############


                  # install_package.sh
                  ############
                  # Installs a package and removed the temp directory.
                  #
                  # Inputs:
                  # $download_filename: Name of the file to be installed.
                  # $filetype: Type of the file to be installed.
                  # $version: The version requested. Used only for warning user if not set.
                  ############

                  if test "x$version" = "x"; then
                    echo
                    echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
                    echo
                    echo "You are installing an omnibus package without a version pin.  If you are installing"
                    echo "on production servers via an automated process this is DANGEROUS and you will"
                    echo "be upgraded without warning on new releases, even to new major releases."
                    echo "Letting the version float is only appropriate in desktop, test, development or"
                    echo "CI/CD environments."
                    echo
                    echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
                    echo
                  fi

                  install_file $filetype "$download_filename"

                  if test "x$tmp_dir" != "x"; then
                    rm -r "$tmp_dir"
                  fi

                  ############
                  # end of install_package.sh
                  ############

                  EOL
                  chmod +x /tmp/chef-installer.sh
                  sudo -E /tmp/chef-installer.sh)
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         /bin/bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         el 6 x86_64
                         downloading http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/6/chef-12.13.12+20160723173635-1.el6.x86_64.rpm
                           to file /tmp/install.sh.961/chef-12.13.12+20160723173635-1.el6.x86_64.rpm
                         trying curl...
                         Comparing checksum with sha256sum...
                         Installing chef 12.13.12+20160723173635
                         installing with rpm...
                         warning: /tmp/install.sh.961/chef-12.13.12+20160723173635-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
                         Preparing...                                                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                         Waited 90/300s for instance <i-17d85ab8> to become ready.
                  D      Console output: ---
                  2016/07/23 18:14:35Z: EC2ConfigMonitorState: 0
                  2016/07/23 18:14:35Z: Windows sysprep configuration complete.
                  2016/07/23 18:14:39Z: AMI Origin Version: 2016.07.13
                  2016/07/23 18:14:39Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
                  2016/07/23 18:14:39Z: OS: Microsoft Windows NT 6.3.9600
                  2016/07/23 18:14:39Z: OsVersion: 6.3
                  2016/07/23 18:14:39Z: OsProductName: Windows Server 2012 R2 Standard
                  2016/07/23 18:14:39Z: OsBuildLabEx: 9600.18289.amd64fre.winblue_ltsb.160328-1315
                  2016/07/23 18:14:39Z: Language: en-US
                  2016/07/23 18:14:39Z: TimeZone: Coordinated Universal Time
                  2016/07/23 18:14:39Z: Offset: UTC 00:00:00
                  2016/07/23 18:14:39Z: EC2 Agent: Ec2Config service v3.17.1032
                  2016/07/23 18:14:41Z: Message: Waiting for meta-data accessibility...
                  2016/07/23 18:14:42Z: Message: Meta-data is now available.
                  2016/07/23 18:14:43Z: AMI-ID: ami-26e72546
                  2016/07/23 18:14:43Z: Instance-ID: i-17d85ab8
                  2016/07/23 18:14:45Z: Driver: AWS PV Network Device v7.4.2.0
                  2016/07/23 18:14:45Z: Driver: AWS PV Storage Host Adapter v7.4.2.0
                  2016/07/23 18:14:45Z: Ec2SetPassword: Enabled
                  2016/07/23 18:14:45Z: RDPCERTIFICATE-SUBJECTNAME: WIN-G9MD7A8J0S8
                  2016/07/23 18:14:45Z: RDPCERTIFICATE-THUMBPRINT: 98F74419F2B5240DF675D50F8553E36A2B3B64ED
                  2016/07/23 18:14:48Z: Username: Administrator
                  2016/07/23 18:14:48Z: Password: <Password>
                  s4xkwm1tUKBKKupkHX8d2wzHjQ6Bc12FV06ed7a8k9s+/XhHroJ8ni45Xe3bw1v5LTQa8m7m3YEnc96MYVqQEM8Ibp21pmWvgopMMdaZfIxjNhGPstFn92903JMwBjwA9p5flpdVX8Kec5NfvVuWc0aQYbCUSNEf8YvxZ9QlqIM/qXj3iohJyB3QZQZYF6W99qKb5Y1aXcIr2jDQJQCj5g+V52SZ3I5kPBOE3ZQ1u7QPPTGc2nOJAXiSs4F/CIqNBu8otAdnQj3Og3fo4LzOfrpIf8YIMS7YBMZzz71pM3jGy64daMziZrOq1+fof2CSZXpFy6axpphB4dLK/0Oo5g==
                  </Password>
                  2016/07/23 18:14:50Z: Message: Windows is Ready to use

                         Waited 0/300s for instance <i-17d85ab8> to fetch windows admin password.
                         Retrieved Windows password for instance <i-17d85ab8>.
                         EC2 instance <i-17d85ab8> ready.
                  D      [WinRM] <{:endpoint=>"http://10.194.8.224:5985/wsman", :user=>"administrator", :password=>"ZD;xFhs.SE", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"ZD;xFhs.SE", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
                  ')
                  D      [WinRM] opening remote shell on http://10.194.8.224:5985/wsman
                            1:chef                                                               (  1%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (  3%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (  6%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (  8%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        ( 10%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       ( 13%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      ( 15%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     ( 17%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    ( 19%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   ( 22%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  ( 24%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 ( 26%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                ( 28%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               ( 31%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              ( 33%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             ( 35%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            ( 38%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           ( 40%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          ( 42%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         ( 44%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        ( 47%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       ( 49%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      ( 51%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     ( 53%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    ( 56%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   ( 58%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  ( 60%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 ( 63%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                ( 65%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               ( 67%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              ( 69%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             ( 72%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            ( 74%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           ( 76%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          ( 78%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         ( 81%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        ( 83%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       ( 85%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      ( 88%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     ( 90%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    ( 92%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   ( 94%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  ( 97%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### ( 99%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                         /bin/sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         Thank you for installing Chef!
                  D      [SSH] root@10.194.12.127<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '
                  sudo_rm="sudo -E rm"
                  dirs="/tmp/kitchen/clients /tmp/kitchen/cookbooks /tmp/kitchen/data /tmp/kitchen/data_bags /tmp/kitchen/encrypted_data_bag_secret /tmp/kitchen/environments /tmp/kitchen/roles"
                  root_path="/tmp/kitchen"

                  $sudo_rm -rf $dirs
                  mkdir -p $root_path
                  ')
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         Transferring files to <fips-unit-functional-centos-6>
                  D      TIMING: scp async upload (Kitchen::Transport::Ssh)
                  D      TIMING: scp async upload (Kitchen::Transport::Ssh) took (0m0.09s)
                  D      Transfer complete
                  D      Attempting to execute command - try 1 of 1.
                  D      [SSH] root@10.194.12.127<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '
                  sudo -E /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json --chef-zero-port 8889
                  ')
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         Starting Chef Client, version 12.13.12
                            1:chef                                                               (  1%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (  3%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (  6%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (  8%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        ( 10%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       ( 13%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      ( 15%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     ( 17%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    ( 19%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   ( 22%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  ( 24%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 ( 26%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                ( 28%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               ( 31%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              ( 33%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             ( 35%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            ( 38%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           ( 40%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          ( 42%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         ( 44%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        ( 47%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       ( 49%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      ( 51%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     ( 53%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    ( 56%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   ( 58%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  ( 60%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 ( 63%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                ( 65%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               ( 67%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              ( 69%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             ( 72%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            ( 74%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           ( 76%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          ( 78%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         ( 81%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        ( 83%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       ( 85%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      ( 88%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     ( 90%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    ( 92%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   ( 94%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  ( 97%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### ( 99%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                         /bin/sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         Thank you for installing Chef!
                  D      [SSH] root@10.194.14.124<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '
                  sudo_rm="sudo -E rm"
                  dirs="/tmp/kitchen/clients /tmp/kitchen/cookbooks /tmp/kitchen/data /tmp/kitchen/data_bags /tmp/kitchen/encrypted_data_bag_secret /tmp/kitchen/environments /tmp/kitchen/roles"
                  root_path="/tmp/kitchen"

                  $sudo_rm -rf $dirs
                  mkdir -p $root_path
                  ')
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         Transferring files to <fips-integration-centos-6>
                  D      TIMING: scp async upload (Kitchen::Transport::Ssh)
                  D      TIMING: scp async upload (Kitchen::Transport::Ssh) took (0m0.06s)
                  D      Transfer complete
                  D      Attempting to execute command - try 1 of 1.
                  D      [SSH] root@10.194.14.124<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '
                  sudo -E /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json --chef-zero-port 8889
                  ')
                         bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                         Creating a new client identity for fips-unit-functional-centos-6 using the validator key.
                         resolving cookbooks for run list: []
                         Synchronizing Cookbooks:
                         Installing Cookbook Gems:
                         Compiling Cookbooks...
                         [2016-07-23T18:15:00+00:00] WARN: Node fips-unit-functional-centos-6 has an empty run list.
                         Converging 0 resources
                         Starting Chef Client, version 12.13.12
                         Starting audit phase

                         Finished in 0.00037 seconds (files took 0.3932 seconds to load)
                         0 examples, 0 failures
                         Auditing complete

                         Running handlers:
                         Running handlers complete
                         Chef Client finished, 0/0 resources updated in 03 seconds
                         [2016-07-23T18:15:00+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json
                  D      Cleaning up local sandbox in /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160723-20479-izu0wt
                         Finished converging <fips-unit-functional-centos-6> (0m12.32s).
                  D      [SSH] shutting previous connection root@10.194.12.127<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] closing connection to root@10.194.12.127<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                         Creating a new client identity for fips-integration-centos-6 using the validator key.
                         resolving cookbooks for run list: []
                         Synchronizing Cookbooks:
                         Installing Cookbook Gems:
                         Compiling Cookbooks...
                         [2016-07-23T18:15:02+00:00] WARN: Node fips-integration-centos-6 has an empty run list.
                         Converging 0 resources
                         Starting audit phase

                         Finished in 0.0003 seconds (files took 0.37678 seconds to load)
                         0 examples, 0 failures
                         Auditing complete

                         Running handlers:
                         Running handlers complete
                         Chef Client finished, 0/0 resources updated in 03 seconds
                         [2016-07-23T18:15:03+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json
                  D      Cleaning up local sandbox in /tmp/cheftest/fips-integration-centos-6-sandbox-20160723-20479-1hdxgra
                         Finished converging <fips-integration-centos-6> (0m12.02s).
                  D      [SSH] shutting previous connection root@10.194.14.124<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [SSH] closing connection to root@10.194.14.124<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] polling for pipeline state. message: #<WinRM::PSRP::Message:0x00000004753358 @data="\xEF\xBB\xBF<Obj RefId=\"0\"><MS><Version N=\"protocolversion\">2.2</Version><Version N=\"PSVersion\">2.0</Version><Version N=\"SerializationVersion\">1.1.0.1</Version></MS></Obj>", @destination=1, @type=65538, @pipeline_id="00000000-0000-0000-0000-000000000000", @runspace_pool_id="00000000-0000-0000-0000-000000000000">
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] polling for pipeline state. message: #<WinRM::PSRP::Message:0x0000000462fe68 @data="\xEF\xBB\xBF<Obj RefId=\"0\"><MS><Obj N=\"ApplicationPrivateData\" RefId=\"1\"><TN RefId=\"0\"><T>System.Management.Automation.PSPrimitiveDictionary</T><T>System.Collections.Hashtable</T><T>System.Object</T></TN><DCT><En><S N=\"Key\">DebugMode</S><I32 N=\"Value\">1</I32></En><En><S N=\"Key\">DebugStop</S><B N=\"Value\">false</B></En><En><S N=\"Key\">PSVersionTable</S><Obj N=\"Value\" RefId=\"2\"><TNRef RefId=\"0\" /><DCT><En><S N=\"Key\">PSVersion</S><Version N=\"Value\">2.0</Version></En><En><S N=\"Key\">PSCompatibleVersions</S><Obj N=\"Value\" RefId=\"3\"><TN RefId=\"1\"><T>System.Version[]</T><T>System.Array</T><T>System.Object</T></TN><LST><Version>1.0</Version><Version>2.0</Version><Version>3.0</Version><Version>4.0</Version></LST></Obj></En><En><S N=\"Key\">BuildVersion</S><Version N=\"Value\">6.3.9600.17400</Version></En><En><S N=\"Key\">CLRVersion</S><Version N=\"Value\">4.0.30319.42000</Version></En><En><S N=\"Key\">WSManStackVersion</S><Version N=\"Value\">3.0</Version></En><En><S N=\"Key\">PSRemotingProtocolVersion</S><Version N=\"Value\">2.2</Version></En><En><S N=\"Key\">SerializationVersion</S><Version N=\"Value\">1.1.0.1</Version></En></DCT></Obj></En><En><S N=\"Key\">DebugBreakpointCount</S><I32 N=\"Value\">0</I32></En></DCT></Obj></MS></Obj>", @destination=1, @type=135177, @pipeline_id="00000000-0000-0000-0000-000000000000", @runspace_pool_id="00000000-0000-0000-0000-000000000000">
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] polling for pipeline state. message: #<WinRM::PSRP::Message:0x00000004507950 @data="\xEF\xBB\xBF<Obj RefId=\"0\"><MS><I32 N=\"RunspaceState\">2</I32></MS></Obj>", @destination=1, @type=135173, @pipeline_id="00000000-0000-0000-0000-000000000000", @runspace_pool_id="00000000-0000-0000-0000-000000000000">
                  D      [WinRM] remote shell created with shell_id: 78E10902-6595-4DA3-B896-FF4B72C4D116
                  D      [WinRM] Command created for Write-Host '[WinRM] Established
                  ' with id: F3A0A4CA-AEC4-4941-9A4F-975B66DFBC01
                  D      [WinRM] creating command_id: F3A0A4CA-AEC4-4941-9A4F-975B66DFBC01 on shell_id 78E10902-6595-4DA3-B896-FF4B72C4D116
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                         [WinRM] Established

                  D      [WinRM] cleaning up command_id: F3A0A4CA-AEC4-4941-9A4F-975B66DFBC01 on shell_id 78E10902-6595-4DA3-B896-FF4B72C4D116
                  D      [WinRM] reusing existing connection <{:endpoint=>"http://10.194.8.224:5985/wsman", :user=>"administrator", :password=>"ZD;xFhs.SE", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"ZD;xFhs.SE", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                  D      [WinRM] <{:endpoint=>"http://10.194.8.224:5985/wsman", :user=>"administrator", :password=>"ZD;xFhs.SE", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"ZD;xFhs.SE", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)
                  D      [WinRM] Command created for New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File with id: 752BCDE7-6F8B-4E76-9A5B-043F2AF9BDD1
                  D      [WinRM] creating command_id: 752BCDE7-6F8B-4E76-9A5B-043F2AF9BDD1 on shell_id 78E10902-6595-4DA3-B896-FF4B72C4D116
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output


                             Directory: C:\chef\ohai\hints


                         Mode                LastWriteTime     Length Name
                         ----                -------------     ------ ----
                         -a---         7/23/2016   6:15 PM          0 ec2.json


                  D      [WinRM] cleaning up command_id: 752BCDE7-6F8B-4E76-9A5B-043F2AF9BDD1 on shell_id 78E10902-6595-4DA3-B896-FF4B72C4D116
                  D      ec2:create '10.194.8.224'
                         Finished creating <fips-unit-functional-windows-2012r2> (2m11.19s).
                  -----> Converging <fips-unit-functional-windows-2012r2>...
                         Preparing files for transfer
                  D      Creating local sandbox in /tmp/cheftest/fips-unit-functional-windows-2012r2-sandbox-20160723-20479-12pyj0g
                         Preparing dna.json
                  D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                         Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                         Removing non-cookbook files before transfer
                         Preparing validation.pem
                  D      Using a dummy validation.pem
                         Preparing client.rb
                  D      Creating client.rb from {:node_name=>"fips-unit-functional-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                  D      [WinRM] reusing existing connection <{:endpoint=>"http://10.194.8.224:5985/wsman", :user=>"administrator", :password=>"ZD;xFhs.SE", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"ZD;xFhs.SE", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                  D      [WinRM] <{:endpoint=>"http://10.194.8.224:5985/wsman", :user=>"administrator", :password=>"ZD;xFhs.SE", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"ZD;xFhs.SE", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
                  function Get-PlatformVersion {
                    switch -regex ((get-wmiobject win32_operatingsystem).version) {
                      '10\.0\.\d+' {$platform_version = '2012r2'}
                      '6\.3\.\d+'  {$platform_version = '2012r2'}
                      '6\.2\.\d+'  {$platform_version = '2012'}
                      '6\.1\.\d+'  {$platform_version = '2008r2'}
                      '6\.0\.\d+'  {$platform_version = '2008'}
                    }
                    return $platform_version
                  }

                  function Get-PlatformArchitecture {
                    if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                      $architecture = 'x86_64'
                    } else {
                      $architecture = 'i386'
                    }
                    return $architecture
                  }

                  function New-Uri {
                    param ($baseuri, $newuri)

                    try {
                    new-object System.Uri $baseuri, $newuri
                    }
                    catch [System.Management.Automation.MethodInvocationException]{
                      Write-Error "$($_.exception.message)"
                      throw $_.exception
                    }
                  }

                  function Get-WebContent {
                    param ($uri, $filepath)
                    $proxy = New-Object -TypeName System.Net.WebProxy
                    $wc = new-object System.Net.WebClient
                    $proxy.Address = $env:http_proxy
                    $wc.Proxy = $proxy

                    try {
                      if ([string]::IsNullOrEmpty($filepath)) {
                        $wc.downloadstring($uri)
                      }
                      else {
                        $wc.downloadfile($uri, $filepath)
                      }
                    }
                    catch {
                      $exception = $_.Exception
                      Write-Host "There was an error: "
                      do {
                        Write-Host "`t$($exception.message)"
                        $exception = $exception.innerexception
                      } while ($exception)
                      throw "Failed to download from $uri."
                    }
                  }

                  function Test-ProjectPackage {
                    [cmdletbinding()]
                    param ($Path, $Algorithm = 'SHA256', $Hash)

                    if (-not (get-command get-filehash))   {
                      function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                      function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                      function Get-FileHash ($Path, $Algorithm) {
                        $Path = (resolve-path $path).providerpath
                        $hash = @{Algorithm = $Algorithm; Path = $Path}
                        use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                          use ($in = (gi $path).OpenRead()) {
                            $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                          }
                        }
                        new-object PSObject -Property $hash
                      }
                    }
                    Write-Verbose "Testing the $Algorithm hash for $path."
                    $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
                    Write-Verbose "`tDesired Hash - '$hash'"
                    Write-Verbose "`tActual Hash  - '$ActualHash'"
                    $Valid = $ActualHash -eq $Hash
                    if (-not $Valid) {
                      Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
                    }
                    return $Valid
                  }

                  function Get-ProjectMetadata {
                    <#
                      .SYNOPSIS
                      Get metadata for a Chef Software, Inc. project
                      .DESCRIPTION
                      Get metadata for project
                      .EXAMPLE
                      iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                      Gets the download url and SHA256 checksum for the latest stable release of Chef.
                      .EXAMPLE
                      iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                      Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
                    #>
                    [cmdletbinding()]
                    param (
                      # Base url to retrieve metadata from.
                      [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                      [string]
                      # Project to install
                      [string]
                      $project = 'chef',
                      # Version of the application to install
                      # This parameter is optional, if not supplied it will provide the latest version,
                      # and if an iteration number is not specified, it will grab the latest available iteration.
                      # Partial version numbers are also acceptable (using v=11
                      # will grab the latest 11.x client which matches the other flags).
                      [string]
                      $version,
                      # Release channel to install from
                      $channel = 'unstable',
                      # The following legacy switches are just aliases for the current channel
                      [switch]
                      $prerelease,
                      [switch]
                      $nightlies,
                      [validateset('auto', 'i386', 'x86_64')]
                      [string]
                      $architecture = 'auto'
                    )

                    # PowerShell is only on Windows ATM
                    $platform = 'windows'
                    Write-Verbose "Platform: $platform"

                    $platform_version = Get-PlatformVersion
                    Write-Verbose "Platform Version: $platform_version"

                    if ($architecture -eq 'auto') {
                      $architecture = Get-PlatformArchitecture
                    }

                    Write-Verbose "Architecture: $architecture"
                    Write-Verbose "Project: $project"


                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/14.04/chef_12.13.12+20160723173635-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 d70de23a48796d18a7759835d645f7d6a0c3004839b8fc453751bed4dbb8822a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/mac_os_x/10.9/chef-12.13.12+20160723173635-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 776d4213b5e5cf3925af217362d277246b70f28129d4795636bb0d61138d3aa2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/mac_os_x/10.10/chef-12.13.12+20160723173635-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 776d4213b5e5cf3925af217362d277246b70f28129d4795636bb0d61138d3aa2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/mac_os_x/10.11/chef-12.13.12+20160723173635-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 776d4213b5e5cf3925af217362d277246b70f28129d4795636bb0d61138d3aa2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ios_xr/6/chef-12.13.12+20160723173635-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 a84b1a57a289e0cb3db727cfe9d9c5da50a321b468f6c437a9f71dd2b968067b" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/10/chef-12.13.12+20160723173635_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 165df1f118d2145d849420c38819fd460935c66eefabb9aa5681c755a1e13258" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/nexus/7/chef-12.13.12+20160723173635-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e77a7aaff7190b2e646e8a2dc0bf897bb31121004380288932ee4f9dff87f266" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/6/chef_12.13.12+20160723173635-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 80eb2b907c0af1b2ccd55ab348b69550445830b087d4df79055521605b707c3e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/7/chef_12.13.12+20160723173635-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 80eb2b907c0af1b2ccd55ab348b69550445830b087d4df79055521605b707c3e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/8/chef_12.13.12+20160723173635-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 80eb2b907c0af1b2ccd55ab348b69550445830b087d4df79055521605b707c3e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/9/chef-12.13.12+20160723173635_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 99c3ee1bb08e5f2446586dc1d7497615b265595f683df7b10ac9503cb65f1596" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/12.04/chef_12.13.12+20160723173635-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c2d701155718263fa252dd149379321cb14767967ac9efc1a59e13c4efe91da5" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/14.04/chef_12.13.12+20160723173635-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c2d701155718263fa252dd149379321cb14767967ac9efc1a59e13c4efe91da5" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.10/chef-12.13.12+20160723173635-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 86e734b3951d75fa6cecbfc85a01f0775e537f151661fef5ed2ed37df50b5ca4" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/7/chef-12.13.12+20160723173635-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 2dcaf9871f4391c5b7be20482c3fc0d5047bd85e346ba0a8602eda3b991c606c" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/5/chef-12.13.12+20160723173635-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7dbbef15a30d47fb3bc4633a239775634e8103ab0973b86468af02fd36ceb41d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.11/chef-12.13.12+20160723173635-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 86e734b3951d75fa6cecbfc85a01f0775e537f151661fef5ed2ed37df50b5ca4" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/6/chef-12.13.12+20160723173635-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4bd08c4a3dd4d1dbcf9b17f4d25f9de1a9a3515c35bfe21c008a7299dab2c0b2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/12.04/chef_12.13.12+20160723173635-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 fb18add4d8465d59f26b42222657c16ce91305d3938c6f28bc256b6572d47a27" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/14.04/chef_12.13.12+20160723173635-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 fb18add4d8465d59f26b42222657c16ce91305d3938c6f28bc256b6572d47a27" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/7/chef-12.13.12+20160723173635-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 ab50a1f40ba1c7218e18503d03906b50f50c54d36218c9c2fd3ce2f146001aa6" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/7/chef-12.13.12+20160723173635-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 686a92c35869ebf3c6278d88c710c5bd633d1b8b8335726273a01082edb2ea60" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2008r2/chef-client-12.13.12+20160723173635-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 44275de361a54c64470100bbf293fed06cb61cda15e06a3875f36f569682d7f4" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/10/chef-12.13.12+20160723173635_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 870cdb950db39758bdfa60c7d6f6d922471a60d5c1cc48063a1d5a648ef15798" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/5/chef-12.13.12+20160723173635-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 04183ff8f23deec12d36dcda314db67cb4b92e269f0814a88b6ea5fe9a4293aa" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012/chef-client-12.13.12+20160723173635-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 44275de361a54c64470100bbf293fed06cb61cda15e06a3875f36f569682d7f4" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/9/chef-12.13.12+20160723173635_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7039b4febebd03a3dff25dbd5a997404d07a36bc0a2658b1b5bff84dcea6103c" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012r2/chef-client-12.13.12+20160723173635-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 44275de361a54c64470100bbf293fed06cb61cda15e06a3875f36f569682d7f4" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/6/chef-12.13.12+20160723173635-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 31d3d3a259113909f3ddf503e36c85d32804463238b93c723fa6f95c982e0d86" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/6/chef_12.13.12+20160723173635-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4d98ccafaae9185041f342a7a0bb1227eb00b8749c9a98ff83ece4142b6a12c7" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/7/chef_12.13.12+20160723173635-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4d98ccafaae9185041f342a7a0bb1227eb00b8749c9a98ff83ece4142b6a12c7" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/8/chef_12.13.12+20160723173635-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4d98ccafaae9185041f342a7a0bb1227eb00b8749c9a98ff83ece4142b6a12c7" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2008r2/chef-client-12.13.12+20160723173635-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 305e914d328bff4f1cf8aaf132f90e3eed9eac167f7137e0edffff4420bf8a86" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012/chef-client-12.13.12+20160723173635-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 305e914d328bff4f1cf8aaf132f90e3eed9eac167f7137e0edffff4420bf8a86" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012r2/chef-client-12.13.12+20160723173635-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 305e914d328bff4f1cf8aaf132f90e3eed9eac167f7137e0edffff4420bf8a86" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/aix/6.1/chef-12.13.12+20160723173635-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 2aded63c39bc18df6a59a6124449c794f205ea7ba4c03a2d5f581ceba1dc02e1" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/aix/7.1/chef-12.13.12+20160723173635-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 2aded63c39bc18df6a59a6124449c794f205ea7ba4c03a2d5f581ceba1dc02e1" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.10/chef-12.13.12+20160723173635-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7a80c015c76fb1d577f837f31397d8438e2cc8d19adec73a548492bed383609d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.11/chef-12.13.12+20160723173635-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7a80c015c76fb1d577f837f31397d8438e2cc8d19adec73a548492bed383609d" | out-file "$artifact_info_dir/artifact_info" -Append


                    $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

                    $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                      foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

                    Write-Verbose "Project details: "
                    foreach ($key in $package_metadata.keys) {
                      Write-Verbose "`t$key = $($package_metadata[$key])"
                    }
                    $package_metadata
                  }

                  function Install-Project {
                    <#
                      .SYNOPSIS
                      Install a Chef Software, Inc. product
                      .DESCRIPTION
                      Install a Chef Software, Inc. product
                      .EXAMPLE
                      iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                      Installs the latest stable version of Chef.
                      .EXAMPLE
                      iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                      Installs the latest integration build of the Chef Development Kit
                    #>
                    [cmdletbinding(SupportsShouldProcess=$true)]
                    param (
                      # Project to install
                      [string]
                      $project = 'chef',
                      # Release channel to install from
                      [validateset('current', 'stable', 'unstable')]
                      [string]
                      $channel = 'stable',
                      # Version of the application to install
                      # This parameter is optional, if not supplied it will provide the latest version,
                      # and if an iteration number is not specified, it will grab the latest available iteration.
                      # Partial version numbers are also acceptable (using v=11
                      # will grab the latest 11.x client which matches the other flags).
                      [string]
                      $version,
                      # Full path for the downloaded installer.
                      [string]
                      $filename,
                      # Full path to the location to download the installer
                      [string]
                      $download_directory = $env:temp,
                      # The following legacy switches are just aliases for the current channel
                      [switch]
                      $prerelease,
                      [switch]
                      $nightlies,
                      [validateset('auto', 'i386', 'x86_64')]
                      [string]
                      $architecture = 'auto'
                    )

                    $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

                    if (-not [string]::IsNullOrEmpty($filename)) {
                      $download_directory = split-path $filename
                      $filename = split-path $filename -leaf
                      if ([string]::IsNullOrEmpty($download_directory)) {
                        $download_directory = $pwd
                      }
                    }
                    else {
                      $filename = ($package_metadata.url -split '/')[-1]
                    }
                    Write-Verbose "Download directory: $download_directory"
                    Write-Verbose "Filename: $filename"

                    if (-not (test-path $download_directory)) {
                      mkdir $download_directory
                    }
                    $download_directory = (resolve-path $download_directory).providerpath
                    $download_destination = join-path $download_directory $filename

                    if ((test-path $download_destination) -and
                      (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                      Write-Verbose "Found existing valid installer at $download_destination."
                    }
                    else {
                      if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                        Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                        Get-WebContent $package_metadata.url -filepath $download_destination
                      }
                    }

                    if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                      if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                        Write-Host "Installing $project from $download_destination"
                        $installingProject = $True
                        $installAttempts = 0
                        while ($installingProject) {
                          $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                          $p.WaitForExit()
                          if ($p.ExitCode -eq 1618) {
                            Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                            continue
                          } elseif ($p.ExitCode -ne 0) {
                            throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                          }
                          $installingProject = $False
                        }
                      }
                      else {
                        throw "Failed to validate the downloaded installer for $project."
                      }
                    }
                  }
                  set-alias install -value Install-Project
                  export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

                  }

                  install -project chef -version 12.13.12+20160723173635 -channel unstable
                  )
                  D      [WinRM] Command created for new-module -name Omnitruck -scriptblock {
                  function Get-PlatformVersion {
                    switch -regex ((get-wmiobject win32_operatingsystem).version) {
                      '10\.0\.\d+' {$platform_version = '2012r2'}
                      '6\.3\.\d+'  {$platform_version = '2012r2'}
                      '6\.2\.\d+'  {$platform_version = '2012'}
                      '6\.1\.\d+'  {$platform_version = '2008r2'}
                      '6\.0\.\d+'  {$platform_version = '2008'}
                    }
                    return $platform_version
                  }

                  function Get-PlatformArchitecture {
                    if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                      $architecture = 'x86_64'
                    } else {
                      $architecture = 'i386'
                    }
                    return $architecture
                  }

                  function New-Uri {
                    param ($baseuri, $newuri)

                    try {
                    new-object System.Uri $baseuri, $newuri
                    }
                    catch [System.Management.Automation.MethodInvocationException]{
                      Write-Error "$($_.exception.message)"
                      throw $_.exception
                    }
                  }

                  function Get-WebContent {
                    param ($uri, $filepath)
                    $proxy = New-Object -TypeName System.Net.WebProxy
                    $wc = new-object System.Net.WebClient
                    $proxy.Address = $env:http_proxy
                    $wc.Proxy = $proxy

                    try {
                      if ([string]::IsNullOrEmpty($filepath)) {
                        $wc.downloadstring($uri)
                      }
                      else {
                        $wc.downloadfile($uri, $filepath)
                      }
                    }
                    catch {
                      $exception = $_.Exception
                      Write-Host "There was an error: "
                      do {
                        Write-Host "`t$($exception.message)"
                        $exception = $exception.innerexception
                      } while ($exception)
                      throw "Failed to download from $uri."
                    }
                  }

                  function Test-ProjectPackage {
                    [cmdletbinding()]
                    param ($Path, $Algorithm = 'SHA256', $Hash)

                    if (-not (get-command get-filehash))   {
                      function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                      function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                      function Get-FileHash ($Path, $Algorithm) {
                        $Path = (resolve-path $path).providerpath
                        $hash = @{Algorithm = $Algorithm; Path = $Path}
                        use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                          use ($in = (gi $path).OpenRead()) {
                            $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                          }
                        }
                        new-object PSObject -Property $hash
                      }
                    }
                    Write-Verbose "Testing the $Algorithm hash for $path."
                    $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
                    Write-Verbose "`tDesired Hash - '$hash'"
                    Write-Verbose "`tActual Hash  - '$ActualHash'"
                    $Valid = $ActualHash -eq $Hash
                    if (-not $Valid) {
                      Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
                    }
                    return $Valid
                  }

                  function Get-ProjectMetadata {
                    <#
                      .SYNOPSIS
                      Get metadata for a Chef Software, Inc. project
                      .DESCRIPTION
                      Get metadata for project
                      .EXAMPLE
                      iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                      Gets the download url and SHA256 checksum for the latest stable release of Chef.
                      .EXAMPLE
                      iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                      Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
                    #>
                    [cmdletbinding()]
                    param (
                      # Base url to retrieve metadata from.
                      [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                      [string]
                      # Project to install
                      [string]
                      $project = 'chef',
                      # Version of the application to install
                      # This parameter is optional, if not supplied it will provide the latest version,
                      # and if an iteration number is not specified, it will grab the latest available iteration.
                      # Partial version numbers are also acceptable (using v=11
                      # will grab the latest 11.x client which matches the other flags).
                      [string]
                      $version,
                      # Release channel to install from
                      $channel = 'unstable',
                      # The following legacy switches are just aliases for the current channel
                      [switch]
                      $prerelease,
                      [switch]
                      $nightlies,
                      [validateset('auto', 'i386', 'x86_64')]
                      [string]
                      $architecture = 'auto'
                    )

                    # PowerShell is only on Windows ATM
                    $platform = 'windows'
                    Write-Verbose "Platform: $platform"

                    $platform_version = Get-PlatformVersion
                    Write-Verbose "Platform Version: $platform_version"

                    if ($architecture -eq 'auto') {
                      $architecture = Get-PlatformArchitecture
                    }

                    Write-Verbose "Architecture: $architecture"
                    Write-Verbose "Project: $project"


                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/14.04/chef_12.13.12+20160723173635-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 d70de23a48796d18a7759835d645f7d6a0c3004839b8fc453751bed4dbb8822a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/mac_os_x/10.9/chef-12.13.12+20160723173635-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 776d4213b5e5cf3925af217362d277246b70f28129d4795636bb0d61138d3aa2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/mac_os_x/10.10/chef-12.13.12+20160723173635-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 776d4213b5e5cf3925af217362d277246b70f28129d4795636bb0d61138d3aa2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/mac_os_x/10.11/chef-12.13.12+20160723173635-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 776d4213b5e5cf3925af217362d277246b70f28129d4795636bb0d61138d3aa2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ios_xr/6/chef-12.13.12+20160723173635-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 a84b1a57a289e0cb3db727cfe9d9c5da50a321b468f6c437a9f71dd2b968067b" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/10/chef-12.13.12+20160723173635_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 165df1f118d2145d849420c38819fd460935c66eefabb9aa5681c755a1e13258" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/nexus/7/chef-12.13.12+20160723173635-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e77a7aaff7190b2e646e8a2dc0bf897bb31121004380288932ee4f9dff87f266" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/6/chef_12.13.12+20160723173635-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 80eb2b907c0af1b2ccd55ab348b69550445830b087d4df79055521605b707c3e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/7/chef_12.13.12+20160723173635-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 80eb2b907c0af1b2ccd55ab348b69550445830b087d4df79055521605b707c3e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/8/chef_12.13.12+20160723173635-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 80eb2b907c0af1b2ccd55ab348b69550445830b087d4df79055521605b707c3e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/9/chef-12.13.12+20160723173635_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 99c3ee1bb08e5f2446586dc1d7497615b265595f683df7b10ac9503cb65f1596" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/12.04/chef_12.13.12+20160723173635-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c2d701155718263fa252dd149379321cb14767967ac9efc1a59e13c4efe91da5" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/14.04/chef_12.13.12+20160723173635-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c2d701155718263fa252dd149379321cb14767967ac9efc1a59e13c4efe91da5" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.10/chef-12.13.12+20160723173635-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 86e734b3951d75fa6cecbfc85a01f0775e537f151661fef5ed2ed37df50b5ca4" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/7/chef-12.13.12+20160723173635-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 2dcaf9871f4391c5b7be20482c3fc0d5047bd85e346ba0a8602eda3b991c606c" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/5/chef-12.13.12+20160723173635-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7dbbef15a30d47fb3bc4633a239775634e8103ab0973b86468af02fd36ceb41d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.11/chef-12.13.12+20160723173635-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 86e734b3951d75fa6cecbfc85a01f0775e537f151661fef5ed2ed37df50b5ca4" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/6/chef-12.13.12+20160723173635-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4bd08c4a3dd4d1dbcf9b17f4d25f9de1a9a3515c35bfe21c008a7299dab2c0b2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/12.04/chef_12.13.12+20160723173635-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 fb18add4d8465d59f26b42222657c16ce91305d3938c6f28bc256b6572d47a27" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/14.04/chef_12.13.12+20160723173635-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 fb18add4d8465d59f26b42222657c16ce91305d3938c6f28bc256b6572d47a27" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/7/chef-12.13.12+20160723173635-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 ab50a1f40ba1c7218e18503d03906b50f50c54d36218c9c2fd3ce2f146001aa6" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/7/chef-12.13.12+20160723173635-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 686a92c35869ebf3c6278d88c710c5bd633d1b8b8335726273a01082edb2ea60" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2008r2/chef-client-12.13.12+20160723173635-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 44275de361a54c64470100bbf293fed06cb61cda15e06a3875f36f569682d7f4" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/10/chef-12.13.12+20160723173635_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 870cdb950db39758bdfa60c7d6f6d922471a60d5c1cc48063a1d5a648ef15798" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/5/chef-12.13.12+20160723173635-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 04183ff8f23deec12d36dcda314db67cb4b92e269f0814a88b6ea5fe9a4293aa" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012/chef-client-12.13.12+20160723173635-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 44275de361a54c64470100bbf293fed06cb61cda15e06a3875f36f569682d7f4" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/9/chef-12.13.12+20160723173635_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7039b4febebd03a3dff25dbd5a997404d07a36bc0a2658b1b5bff84dcea6103c" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012r2/chef-client-12.13.12+20160723173635-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 44275de361a54c64470100bbf293fed06cb61cda15e06a3875f36f569682d7f4" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/6/chef-12.13.12+20160723173635-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 31d3d3a259113909f3ddf503e36c85d32804463238b93c723fa6f95c982e0d86" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/6/chef_12.13.12+20160723173635-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4d98ccafaae9185041f342a7a0bb1227eb00b8749c9a98ff83ece4142b6a12c7" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/7/chef_12.13.12+20160723173635-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4d98ccafaae9185041f342a7a0bb1227eb00b8749c9a98ff83ece4142b6a12c7" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/8/chef_12.13.12+20160723173635-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4d98ccafaae9185041f342a7a0bb1227eb00b8749c9a98ff83ece4142b6a12c7" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2008r2/chef-client-12.13.12+20160723173635-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 305e914d328bff4f1cf8aaf132f90e3eed9eac167f7137e0edffff4420bf8a86" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012/chef-client-12.13.12+20160723173635-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 305e914d328bff4f1cf8aaf132f90e3eed9eac167f7137e0edffff4420bf8a86" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012r2/chef-client-12.13.12+20160723173635-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 305e914d328bff4f1cf8aaf132f90e3eed9eac167f7137e0edffff4420bf8a86" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/aix/6.1/chef-12.13.12+20160723173635-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 2aded63c39bc18df6a59a6124449c794f205ea7ba4c03a2d5f581ceba1dc02e1" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/aix/7.1/chef-12.13.12+20160723173635-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 2aded63c39bc18df6a59a6124449c794f205ea7ba4c03a2d5f581ceba1dc02e1" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.10/chef-12.13.12+20160723173635-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7a80c015c76fb1d577f837f31397d8438e2cc8d19adec73a548492bed383609d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.11/chef-12.13.12+20160723173635-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7a80c015c76fb1d577f837f31397d8438e2cc8d19adec73a548492bed383609d" | out-file "$artifact_info_dir/artifact_info" -Append


                    $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

                    $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                      foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

                    Write-Verbose "Project details: "
                    foreach ($key in $package_metadata.keys) {
                      Write-Verbose "`t$key = $($package_metadata[$key])"
                    }
                    $package_metadata
                  }

                  function Install-Project {
                    <#
                      .SYNOPSIS
                      Install a Chef Software, Inc. product
                      .DESCRIPTION
                      Install a Chef Software, Inc. product
                      .EXAMPLE
                      iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                      Installs the latest stable version of Chef.
                      .EXAMPLE
                      iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                      Installs the latest integration build of the Chef Development Kit
                    #>
                    [cmdletbinding(SupportsShouldProcess=$true)]
                    param (
                      # Project to install
                      [string]
                      $project = 'chef',
                      # Release channel to install from
                      [validateset('current', 'stable', 'unstable')]
                      [string]
                      $channel = 'stable',
                      # Version of the application to install
                      # This parameter is optional, if not supplied it will provide the latest version,
                      # and if an iteration number is not specified, it will grab the latest available iteration.
                      # Partial version numbers are also acceptable (using v=11
                      # will grab the latest 11.x client which matches the other flags).
                      [string]
                      $version,
                      # Full path for the downloaded installer.
                      [string]
                      $filename,
                      # Full path to the location to download the installer
                      [string]
                      $download_directory = $env:temp,
                      # The following legacy switches are just aliases for the current channel
                      [switch]
                      $prerelease,
                      [switch]
                      $nightlies,
                      [validateset('auto', 'i386', 'x86_64')]
                      [string]
                      $architecture = 'auto'
                    )

                    $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

                    if (-not [string]::IsNullOrEmpty($filename)) {
                      $download_directory = split-path $filename
                      $filename = split-path $filename -leaf
                      if ([string]::IsNullOrEmpty($download_directory)) {
                        $download_directory = $pwd
                      }
                    }
                    else {
                      $filename = ($package_metadata.url -split '/')[-1]
                    }
                    Write-Verbose "Download directory: $download_directory"
                    Write-Verbose "Filename: $filename"

                    if (-not (test-path $download_directory)) {
                      mkdir $download_directory
                    }
                    $download_directory = (resolve-path $download_directory).providerpath
                    $download_destination = join-path $download_directory $filename

                    if ((test-path $download_destination) -and
                      (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                      Write-Verbose "Found existing valid installer at $download_destination."
                    }
                    else {
                      if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                        Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                        Get-WebContent $package_metadata.url -filepath $download_destination
                      }
                    }

                    if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                      if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                        Write-Host "Installing $project from $download_destination"
                        $installingProject = $True
                        $installAttempts = 0
                        while ($installingProject) {
                          $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                          $p.WaitForExit()
                          if ($p.ExitCode -eq 1618) {
                            Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                            continue
                          } elseif ($p.ExitCode -ne 0) {
                            throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                          }
                          $installingProject = $False
                        }
                      }
                      else {
                        throw "Failed to validate the downloaded installer for $project."
                      }
                    }
                  }
                  set-alias install -value Install-Project
                  export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

                  }

                  install -project chef -version 12.13.12+20160723173635 -channel unstable
                   with id: 153190F3-DA5F-4E33-A489-7758D2A40916
                  D      [WinRM] creating command_id: 153190F3-DA5F-4E33-A489-7758D2A40916 on shell_id 78E10902-6595-4DA3-B896-FF4B72C4D116
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output

                         ModuleType Version    Name                                ExportedCommands
                         ---------- -------    ----                                ----------------
                         Script     0.0        Omnitruck                           {Get-ProjectMetada...
                  D      [WinRM] Waiting for output...
                  D      [WinRM] cleaning up command_id: 153190F3-DA5F-4E33-A489-7758D2A40916 on shell_id 78E10902-6595-4DA3-B896-FF4B72C4D116
                         [WinRM] 500 returned in cleanup with error: Bad HTTP response returned from server. Body(if present): (500).
                  D      Cleaning up local sandbox in /tmp/cheftest/fips-unit-functional-windows-2012r2-sandbox-20160723-20479-12pyj0g
                  D      [WinRM] opening remote shell on http://10.194.11.17:5985/wsman
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] polling for pipeline state. message: #<WinRM::PSRP::Message:0x000000049c3c28 @data="\xEF\xBB\xBF<Obj RefId=\"0\"><MS><Version N=\"protocolversion\">2.2</Version><Version N=\"PSVersion\">2.0</Version><Version N=\"SerializationVersion\">1.1.0.1</Version></MS></Obj>", @destination=1, @type=65538, @pipeline_id="00000000-0000-0000-0000-000000000000", @runspace_pool_id="00000000-0000-0000-0000-000000000000">
                  D      [WinRM] polling for pipeline state. message: #<WinRM::PSRP::Message:0x000000049c1ae0 @data="\xEF\xBB\xBF<Obj RefId=\"0\"><MS><Obj N=\"ApplicationPrivateData\" RefId=\"1\"><TN RefId=\"0\"><T>System.Management.Automation.PSPrimitiveDictionary</T><T>System.Collections.Hashtable</T><T>System.Object</T></TN><DCT><En><S N=\"Key\">DebugMode</S><I32 N=\"Value\">1</I32></En><En><S N=\"Key\">DebugStop</S><B N=\"Value\">false</B></En><En><S N=\"Key\">PSVersionTable</S><Obj N=\"Value\" RefId=\"2\"><TNRef RefId=\"0\" /><DCT><En><S N=\"Key\">PSVersion</S><Version N=\"Value\">2.0</Version></En><En><S N=\"Key\">PSCompatibleVersions</S><Obj N=\"Value\" RefId=\"3\"><TN RefId=\"1\"><T>System.Version[]</T><T>System.Array</T><T>System.Object</T></TN><LST><Version>1.0</Version><Version>2.0</Version><Version>3.0</Version><Version>4.0</Version></LST></Obj></En><En><S N=\"Key\">BuildVersion</S><Version N=\"Value\">6.3.9600.17400</Version></En><En><S N=\"Key\">CLRVersion</S><Version N=\"Value\">4.0.30319.42000</Version></En><En><S N=\"Key\">WSManStackVersion</S><Version N=\"Value\">3.0</Version></En><En><S N=\"Key\">PSRemotingProtocolVersion</S><Version N=\"Value\">2.2</Version></En><En><S N=\"Key\">SerializationVersion</S><Version N=\"Value\">1.1.0.1</Version></En></DCT></Obj></En><En><S N=\"Key\">DebugBreakpointCount</S><I32 N=\"Value\">0</I32></En></DCT></Obj></MS></Obj>", @destination=1, @type=135177, @pipeline_id="00000000-0000-0000-0000-000000000000", @runspace_pool_id="00000000-0000-0000-0000-000000000000">
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] polling for pipeline state. message: #<WinRM::PSRP::Message:0x00000004750720 @data="\xEF\xBB\xBF<Obj RefId=\"0\"><MS><I32 N=\"RunspaceState\">2</I32></MS></Obj>", @destination=1, @type=135173, @pipeline_id="00000000-0000-0000-0000-000000000000", @runspace_pool_id="00000000-0000-0000-0000-000000000000">
                  D      [WinRM] remote shell created with shell_id: D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Command created for Write-Host '[WinRM] Established
                  ' with id: 6C2AAEF0-507F-4261-A6B2-989A8383CC1E
                  D      [WinRM] creating command_id: 6C2AAEF0-507F-4261-A6B2-989A8383CC1E on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                         [WinRM] Established

                  D      [WinRM] cleaning up command_id: 6C2AAEF0-507F-4261-A6B2-989A8383CC1E on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] reusing existing connection <{:endpoint=>"http://10.194.11.17:5985/wsman", :user=>"administrator", :password=>"Ggj69PRWX35", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"Ggj69PRWX35", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                  D      [WinRM] <{:endpoint=>"http://10.194.11.17:5985/wsman", :user=>"administrator", :password=>"Ggj69PRWX35", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"Ggj69PRWX35", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)
                  D      [WinRM] Command created for New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File with id: CF6F2942-2A3E-420E-8DBD-5EA183D80DAE
                  D      [WinRM] creating command_id: CF6F2942-2A3E-420E-8DBD-5EA183D80DAE on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output


                             Directory: C:\chef\ohai\hints


                         Mode                LastWriteTime     Length Name
                         ----                -------------     ------ ----
                         -a---         7/23/2016   6:15 PM          0 ec2.json


                  D      [WinRM] cleaning up command_id: CF6F2942-2A3E-420E-8DBD-5EA183D80DAE on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      ec2:create '10.194.11.17'
                         Finished creating <fips-integration-windows-2012r2> (2m28.03s).
                  -----> Converging <fips-integration-windows-2012r2>...
                         Preparing files for transfer
                  D      Creating local sandbox in /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160723-20479-1k475kp
                         Preparing dna.json
                  D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                         Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                         Removing non-cookbook files before transfer
                         Preparing validation.pem
                  D      Using a dummy validation.pem
                         Preparing client.rb
                  D      Creating client.rb from {:node_name=>"fips-integration-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
                  D      [WinRM] reusing existing connection <{:endpoint=>"http://10.194.11.17:5985/wsman", :user=>"administrator", :password=>"Ggj69PRWX35", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"Ggj69PRWX35", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
                  D      [WinRM] <{:endpoint=>"http://10.194.11.17:5985/wsman", :user=>"administrator", :password=>"Ggj69PRWX35", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"Ggj69PRWX35", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
                  function Get-PlatformVersion {
                    switch -regex ((get-wmiobject win32_operatingsystem).version) {
                      '10\.0\.\d+' {$platform_version = '2012r2'}
                      '6\.3\.\d+'  {$platform_version = '2012r2'}
                      '6\.2\.\d+'  {$platform_version = '2012'}
                      '6\.1\.\d+'  {$platform_version = '2008r2'}
                      '6\.0\.\d+'  {$platform_version = '2008'}
                    }
                    return $platform_version
                  }

                  function Get-PlatformArchitecture {
                    if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                      $architecture = 'x86_64'
                    } else {
                      $architecture = 'i386'
                    }
                    return $architecture
                  }

                  function New-Uri {
                    param ($baseuri, $newuri)

                    try {
                    new-object System.Uri $baseuri, $newuri
                    }
                    catch [System.Management.Automation.MethodInvocationException]{
                      Write-Error "$($_.exception.message)"
                      throw $_.exception
                    }
                  }

                  function Get-WebContent {
                    param ($uri, $filepath)
                    $proxy = New-Object -TypeName System.Net.WebProxy
                    $wc = new-object System.Net.WebClient
                    $proxy.Address = $env:http_proxy
                    $wc.Proxy = $proxy

                    try {
                      if ([string]::IsNullOrEmpty($filepath)) {
                        $wc.downloadstring($uri)
                      }
                      else {
                        $wc.downloadfile($uri, $filepath)
                      }
                    }
                    catch {
                      $exception = $_.Exception
                      Write-Host "There was an error: "
                      do {
                        Write-Host "`t$($exception.message)"
                        $exception = $exception.innerexception
                      } while ($exception)
                      throw "Failed to download from $uri."
                    }
                  }

                  function Test-ProjectPackage {
                    [cmdletbinding()]
                    param ($Path, $Algorithm = 'SHA256', $Hash)

                    if (-not (get-command get-filehash))   {
                      function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                      function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                      function Get-FileHash ($Path, $Algorithm) {
                        $Path = (resolve-path $path).providerpath
                        $hash = @{Algorithm = $Algorithm; Path = $Path}
                        use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                          use ($in = (gi $path).OpenRead()) {
                            $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                          }
                        }
                        new-object PSObject -Property $hash
                      }
                    }
                    Write-Verbose "Testing the $Algorithm hash for $path."
                    $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
                    Write-Verbose "`tDesired Hash - '$hash'"
                    Write-Verbose "`tActual Hash  - '$ActualHash'"
                    $Valid = $ActualHash -eq $Hash
                    if (-not $Valid) {
                      Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
                    }
                    return $Valid
                  }

                  function Get-ProjectMetadata {
                    <#
                      .SYNOPSIS
                      Get metadata for a Chef Software, Inc. project
                      .DESCRIPTION
                      Get metadata for project
                      .EXAMPLE
                      iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                      Gets the download url and SHA256 checksum for the latest stable release of Chef.
                      .EXAMPLE
                      iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                      Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
                    #>
                    [cmdletbinding()]
                    param (
                      # Base url to retrieve metadata from.
                      [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                      [string]
                      # Project to install
                      [string]
                      $project = 'chef',
                      # Version of the application to install
                      # This parameter is optional, if not supplied it will provide the latest version,
                      # and if an iteration number is not specified, it will grab the latest available iteration.
                      # Partial version numbers are also acceptable (using v=11
                      # will grab the latest 11.x client which matches the other flags).
                      [string]
                      $version,
                      # Release channel to install from
                      $channel = 'unstable',
                      # The following legacy switches are just aliases for the current channel
                      [switch]
                      $prerelease,
                      [switch]
                      $nightlies,
                      [validateset('auto', 'i386', 'x86_64')]
                      [string]
                      $architecture = 'auto'
                    )

                    # PowerShell is only on Windows ATM
                    $platform = 'windows'
                    Write-Verbose "Platform: $platform"

                    $platform_version = Get-PlatformVersion
                    Write-Verbose "Platform Version: $platform_version"

                    if ($architecture -eq 'auto') {
                      $architecture = Get-PlatformArchitecture
                    }

                    Write-Verbose "Architecture: $architecture"
                    Write-Verbose "Project: $project"


                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/14.04/chef_12.13.12+20160723173635-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 d70de23a48796d18a7759835d645f7d6a0c3004839b8fc453751bed4dbb8822a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/mac_os_x/10.9/chef-12.13.12+20160723173635-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 776d4213b5e5cf3925af217362d277246b70f28129d4795636bb0d61138d3aa2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/mac_os_x/10.10/chef-12.13.12+20160723173635-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 776d4213b5e5cf3925af217362d277246b70f28129d4795636bb0d61138d3aa2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/mac_os_x/10.11/chef-12.13.12+20160723173635-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 776d4213b5e5cf3925af217362d277246b70f28129d4795636bb0d61138d3aa2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ios_xr/6/chef-12.13.12+20160723173635-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 a84b1a57a289e0cb3db727cfe9d9c5da50a321b468f6c437a9f71dd2b968067b" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/10/chef-12.13.12+20160723173635_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 165df1f118d2145d849420c38819fd460935c66eefabb9aa5681c755a1e13258" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/nexus/7/chef-12.13.12+20160723173635-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e77a7aaff7190b2e646e8a2dc0bf897bb31121004380288932ee4f9dff87f266" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/6/chef_12.13.12+20160723173635-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 80eb2b907c0af1b2ccd55ab348b69550445830b087d4df79055521605b707c3e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/7/chef_12.13.12+20160723173635-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 80eb2b907c0af1b2ccd55ab348b69550445830b087d4df79055521605b707c3e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/8/chef_12.13.12+20160723173635-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 80eb2b907c0af1b2ccd55ab348b69550445830b087d4df79055521605b707c3e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/9/chef-12.13.12+20160723173635_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 99c3ee1bb08e5f2446586dc1d7497615b265595f683df7b10ac9503cb65f1596" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/12.04/chef_12.13.12+20160723173635-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c2d701155718263fa252dd149379321cb14767967ac9efc1a59e13c4efe91da5" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/14.04/chef_12.13.12+20160723173635-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c2d701155718263fa252dd149379321cb14767967ac9efc1a59e13c4efe91da5" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.10/chef-12.13.12+20160723173635-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 86e734b3951d75fa6cecbfc85a01f0775e537f151661fef5ed2ed37df50b5ca4" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/7/chef-12.13.12+20160723173635-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 2dcaf9871f4391c5b7be20482c3fc0d5047bd85e346ba0a8602eda3b991c606c" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/5/chef-12.13.12+20160723173635-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7dbbef15a30d47fb3bc4633a239775634e8103ab0973b86468af02fd36ceb41d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.11/chef-12.13.12+20160723173635-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 86e734b3951d75fa6cecbfc85a01f0775e537f151661fef5ed2ed37df50b5ca4" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/6/chef-12.13.12+20160723173635-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4bd08c4a3dd4d1dbcf9b17f4d25f9de1a9a3515c35bfe21c008a7299dab2c0b2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/12.04/chef_12.13.12+20160723173635-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 fb18add4d8465d59f26b42222657c16ce91305d3938c6f28bc256b6572d47a27" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/14.04/chef_12.13.12+20160723173635-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 fb18add4d8465d59f26b42222657c16ce91305d3938c6f28bc256b6572d47a27" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/7/chef-12.13.12+20160723173635-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 ab50a1f40ba1c7218e18503d03906b50f50c54d36218c9c2fd3ce2f146001aa6" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/7/chef-12.13.12+20160723173635-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 686a92c35869ebf3c6278d88c710c5bd633d1b8b8335726273a01082edb2ea60" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2008r2/chef-client-12.13.12+20160723173635-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 44275de361a54c64470100bbf293fed06cb61cda15e06a3875f36f569682d7f4" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/10/chef-12.13.12+20160723173635_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 870cdb950db39758bdfa60c7d6f6d922471a60d5c1cc48063a1d5a648ef15798" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/5/chef-12.13.12+20160723173635-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 04183ff8f23deec12d36dcda314db67cb4b92e269f0814a88b6ea5fe9a4293aa" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012/chef-client-12.13.12+20160723173635-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 44275de361a54c64470100bbf293fed06cb61cda15e06a3875f36f569682d7f4" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/9/chef-12.13.12+20160723173635_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7039b4febebd03a3dff25dbd5a997404d07a36bc0a2658b1b5bff84dcea6103c" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012r2/chef-client-12.13.12+20160723173635-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 44275de361a54c64470100bbf293fed06cb61cda15e06a3875f36f569682d7f4" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/6/chef-12.13.12+20160723173635-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 31d3d3a259113909f3ddf503e36c85d32804463238b93c723fa6f95c982e0d86" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/6/chef_12.13.12+20160723173635-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4d98ccafaae9185041f342a7a0bb1227eb00b8749c9a98ff83ece4142b6a12c7" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/7/chef_12.13.12+20160723173635-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4d98ccafaae9185041f342a7a0bb1227eb00b8749c9a98ff83ece4142b6a12c7" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/8/chef_12.13.12+20160723173635-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4d98ccafaae9185041f342a7a0bb1227eb00b8749c9a98ff83ece4142b6a12c7" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2008r2/chef-client-12.13.12+20160723173635-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 305e914d328bff4f1cf8aaf132f90e3eed9eac167f7137e0edffff4420bf8a86" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012/chef-client-12.13.12+20160723173635-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 305e914d328bff4f1cf8aaf132f90e3eed9eac167f7137e0edffff4420bf8a86" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012r2/chef-client-12.13.12+20160723173635-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 305e914d328bff4f1cf8aaf132f90e3eed9eac167f7137e0edffff4420bf8a86" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/aix/6.1/chef-12.13.12+20160723173635-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 2aded63c39bc18df6a59a6124449c794f205ea7ba4c03a2d5f581ceba1dc02e1" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/aix/7.1/chef-12.13.12+20160723173635-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 2aded63c39bc18df6a59a6124449c794f205ea7ba4c03a2d5f581ceba1dc02e1" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.10/chef-12.13.12+20160723173635-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7a80c015c76fb1d577f837f31397d8438e2cc8d19adec73a548492bed383609d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.11/chef-12.13.12+20160723173635-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7a80c015c76fb1d577f837f31397d8438e2cc8d19adec73a548492bed383609d" | out-file "$artifact_info_dir/artifact_info" -Append


                    $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

                    $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                      foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

                    Write-Verbose "Project details: "
                    foreach ($key in $package_metadata.keys) {
                      Write-Verbose "`t$key = $($package_metadata[$key])"
                    }
                    $package_metadata
                  }

                  function Install-Project {
                    <#
                      .SYNOPSIS
                      Install a Chef Software, Inc. product
                      .DESCRIPTION
                      Install a Chef Software, Inc. product
                      .EXAMPLE
                      iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                      Installs the latest stable version of Chef.
                      .EXAMPLE
                      iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                      Installs the latest integration build of the Chef Development Kit
                    #>
                    [cmdletbinding(SupportsShouldProcess=$true)]
                    param (
                      # Project to install
                      [string]
                      $project = 'chef',
                      # Release channel to install from
                      [validateset('current', 'stable', 'unstable')]
                      [string]
                      $channel = 'stable',
                      # Version of the application to install
                      # This parameter is optional, if not supplied it will provide the latest version,
                      # and if an iteration number is not specified, it will grab the latest available iteration.
                      # Partial version numbers are also acceptable (using v=11
                      # will grab the latest 11.x client which matches the other flags).
                      [string]
                      $version,
                      # Full path for the downloaded installer.
                      [string]
                      $filename,
                      # Full path to the location to download the installer
                      [string]
                      $download_directory = $env:temp,
                      # The following legacy switches are just aliases for the current channel
                      [switch]
                      $prerelease,
                      [switch]
                      $nightlies,
                      [validateset('auto', 'i386', 'x86_64')]
                      [string]
                      $architecture = 'auto'
                    )

                    $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

                    if (-not [string]::IsNullOrEmpty($filename)) {
                      $download_directory = split-path $filename
                      $filename = split-path $filename -leaf
                      if ([string]::IsNullOrEmpty($download_directory)) {
                        $download_directory = $pwd
                      }
                    }
                    else {
                      $filename = ($package_metadata.url -split '/')[-1]
                    }
                    Write-Verbose "Download directory: $download_directory"
                    Write-Verbose "Filename: $filename"

                    if (-not (test-path $download_directory)) {
                      mkdir $download_directory
                    }
                    $download_directory = (resolve-path $download_directory).providerpath
                    $download_destination = join-path $download_directory $filename

                    if ((test-path $download_destination) -and
                      (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                      Write-Verbose "Found existing valid installer at $download_destination."
                    }
                    else {
                      if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                        Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                        Get-WebContent $package_metadata.url -filepath $download_destination
                      }
                    }

                    if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                      if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                        Write-Host "Installing $project from $download_destination"
                        $installingProject = $True
                        $installAttempts = 0
                        while ($installingProject) {
                          $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                          $p.WaitForExit()
                          if ($p.ExitCode -eq 1618) {
                            Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                            continue
                          } elseif ($p.ExitCode -ne 0) {
                            throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                          }
                          $installingProject = $False
                        }
                      }
                      else {
                        throw "Failed to validate the downloaded installer for $project."
                      }
                    }
                  }
                  set-alias install -value Install-Project
                  export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

                  }

                  install -project chef -version 12.13.12+20160723173635 -channel unstable
                  )
                  D      [WinRM] Command created for new-module -name Omnitruck -scriptblock {
                  function Get-PlatformVersion {
                    switch -regex ((get-wmiobject win32_operatingsystem).version) {
                      '10\.0\.\d+' {$platform_version = '2012r2'}
                      '6\.3\.\d+'  {$platform_version = '2012r2'}
                      '6\.2\.\d+'  {$platform_version = '2012'}
                      '6\.1\.\d+'  {$platform_version = '2008r2'}
                      '6\.0\.\d+'  {$platform_version = '2008'}
                    }
                    return $platform_version
                  }

                  function Get-PlatformArchitecture {
                    if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                      $architecture = 'x86_64'
                    } else {
                      $architecture = 'i386'
                    }
                    return $architecture
                  }

                  function New-Uri {
                    param ($baseuri, $newuri)

                    try {
                    new-object System.Uri $baseuri, $newuri
                    }
                    catch [System.Management.Automation.MethodInvocationException]{
                      Write-Error "$($_.exception.message)"
                      throw $_.exception
                    }
                  }

                  function Get-WebContent {
                    param ($uri, $filepath)
                    $proxy = New-Object -TypeName System.Net.WebProxy
                    $wc = new-object System.Net.WebClient
                    $proxy.Address = $env:http_proxy
                    $wc.Proxy = $proxy

                    try {
                      if ([string]::IsNullOrEmpty($filepath)) {
                        $wc.downloadstring($uri)
                      }
                      else {
                        $wc.downloadfile($uri, $filepath)
                      }
                    }
                    catch {
                      $exception = $_.Exception
                      Write-Host "There was an error: "
                      do {
                        Write-Host "`t$($exception.message)"
                        $exception = $exception.innerexception
                      } while ($exception)
                      throw "Failed to download from $uri."
                    }
                  }

                  function Test-ProjectPackage {
                    [cmdletbinding()]
                    param ($Path, $Algorithm = 'SHA256', $Hash)

                    if (-not (get-command get-filehash))   {
                      function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                      function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                      function Get-FileHash ($Path, $Algorithm) {
                        $Path = (resolve-path $path).providerpath
                        $hash = @{Algorithm = $Algorithm; Path = $Path}
                        use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                          use ($in = (gi $path).OpenRead()) {
                            $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                          }
                        }
                        new-object PSObject -Property $hash
                      }
                    }
                    Write-Verbose "Testing the $Algorithm hash for $path."
                    $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
                    Write-Verbose "`tDesired Hash - '$hash'"
                    Write-Verbose "`tActual Hash  - '$ActualHash'"
                    $Valid = $ActualHash -eq $Hash
                    if (-not $Valid) {
                      Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
                    }
                    return $Valid
                  }

                  function Get-ProjectMetadata {
                    <#
                      .SYNOPSIS
                      Get metadata for a Chef Software, Inc. project
                      .DESCRIPTION
                      Get metadata for project
                      .EXAMPLE
                      iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                      Gets the download url and SHA256 checksum for the latest stable release of Chef.
                      .EXAMPLE
                      iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                      Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
                    #>
                    [cmdletbinding()]
                    param (
                      # Base url to retrieve metadata from.
                      [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                      [string]
                      # Project to install
                      [string]
                      $project = 'chef',
                      # Version of the application to install
                      # This parameter is optional, if not supplied it will provide the latest version,
                      # and if an iteration number is not specified, it will grab the latest available iteration.
                      # Partial version numbers are also acceptable (using v=11
                      # will grab the latest 11.x client which matches the other flags).
                      [string]
                      $version,
                      # Release channel to install from
                      $channel = 'unstable',
                      # The following legacy switches are just aliases for the current channel
                      [switch]
                      $prerelease,
                      [switch]
                      $nightlies,
                      [validateset('auto', 'i386', 'x86_64')]
                      [string]
                      $architecture = 'auto'
                    )

                    # PowerShell is only on Windows ATM
                    $platform = 'windows'
                    Write-Verbose "Platform: $platform"

                    $platform_version = Get-PlatformVersion
                    Write-Verbose "Platform Version: $platform_version"

                    if ($architecture -eq 'auto') {
                      $architecture = Get-PlatformArchitecture
                    }

                    Write-Verbose "Architecture: $architecture"
                    Write-Verbose "Project: $project"


                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/14.04/chef_12.13.12+20160723173635-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 d70de23a48796d18a7759835d645f7d6a0c3004839b8fc453751bed4dbb8822a" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/mac_os_x/10.9/chef-12.13.12+20160723173635-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 776d4213b5e5cf3925af217362d277246b70f28129d4795636bb0d61138d3aa2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/mac_os_x/10.10/chef-12.13.12+20160723173635-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 776d4213b5e5cf3925af217362d277246b70f28129d4795636bb0d61138d3aa2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/mac_os_x/10.11/chef-12.13.12+20160723173635-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 776d4213b5e5cf3925af217362d277246b70f28129d4795636bb0d61138d3aa2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ios_xr/6/chef-12.13.12+20160723173635-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 a84b1a57a289e0cb3db727cfe9d9c5da50a321b468f6c437a9f71dd2b968067b" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/10/chef-12.13.12+20160723173635_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 165df1f118d2145d849420c38819fd460935c66eefabb9aa5681c755a1e13258" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/nexus/7/chef-12.13.12+20160723173635-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 e77a7aaff7190b2e646e8a2dc0bf897bb31121004380288932ee4f9dff87f266" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/6/chef_12.13.12+20160723173635-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 80eb2b907c0af1b2ccd55ab348b69550445830b087d4df79055521605b707c3e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/7/chef_12.13.12+20160723173635-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 80eb2b907c0af1b2ccd55ab348b69550445830b087d4df79055521605b707c3e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/8/chef_12.13.12+20160723173635-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 80eb2b907c0af1b2ccd55ab348b69550445830b087d4df79055521605b707c3e" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/9/chef-12.13.12+20160723173635_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 99c3ee1bb08e5f2446586dc1d7497615b265595f683df7b10ac9503cb65f1596" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/12.04/chef_12.13.12+20160723173635-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c2d701155718263fa252dd149379321cb14767967ac9efc1a59e13c4efe91da5" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/14.04/chef_12.13.12+20160723173635-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 c2d701155718263fa252dd149379321cb14767967ac9efc1a59e13c4efe91da5" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.10/chef-12.13.12+20160723173635-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 86e734b3951d75fa6cecbfc85a01f0775e537f151661fef5ed2ed37df50b5ca4" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/7/chef-12.13.12+20160723173635-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 2dcaf9871f4391c5b7be20482c3fc0d5047bd85e346ba0a8602eda3b991c606c" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/5/chef-12.13.12+20160723173635-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7dbbef15a30d47fb3bc4633a239775634e8103ab0973b86468af02fd36ceb41d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.11/chef-12.13.12+20160723173635-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 86e734b3951d75fa6cecbfc85a01f0775e537f151661fef5ed2ed37df50b5ca4" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/6/chef-12.13.12+20160723173635-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4bd08c4a3dd4d1dbcf9b17f4d25f9de1a9a3515c35bfe21c008a7299dab2c0b2" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/12.04/chef_12.13.12+20160723173635-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 fb18add4d8465d59f26b42222657c16ce91305d3938c6f28bc256b6572d47a27" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/ubuntu/14.04/chef_12.13.12+20160723173635-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 fb18add4d8465d59f26b42222657c16ce91305d3938c6f28bc256b6572d47a27" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/7/chef-12.13.12+20160723173635-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 ab50a1f40ba1c7218e18503d03906b50f50c54d36218c9c2fd3ce2f146001aa6" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/7/chef-12.13.12+20160723173635-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 686a92c35869ebf3c6278d88c710c5bd633d1b8b8335726273a01082edb2ea60" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2008r2/chef-client-12.13.12+20160723173635-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 44275de361a54c64470100bbf293fed06cb61cda15e06a3875f36f569682d7f4" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/10/chef-12.13.12+20160723173635_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 870cdb950db39758bdfa60c7d6f6d922471a60d5c1cc48063a1d5a648ef15798" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/5/chef-12.13.12+20160723173635-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 04183ff8f23deec12d36dcda314db67cb4b92e269f0814a88b6ea5fe9a4293aa" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012/chef-client-12.13.12+20160723173635-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 44275de361a54c64470100bbf293fed06cb61cda15e06a3875f36f569682d7f4" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/freebsd/9/chef-12.13.12+20160723173635_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7039b4febebd03a3dff25dbd5a997404d07a36bc0a2658b1b5bff84dcea6103c" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012r2/chef-client-12.13.12+20160723173635-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 44275de361a54c64470100bbf293fed06cb61cda15e06a3875f36f569682d7f4" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/el/6/chef-12.13.12+20160723173635-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 31d3d3a259113909f3ddf503e36c85d32804463238b93c723fa6f95c982e0d86" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/6/chef_12.13.12+20160723173635-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4d98ccafaae9185041f342a7a0bb1227eb00b8749c9a98ff83ece4142b6a12c7" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/7/chef_12.13.12+20160723173635-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4d98ccafaae9185041f342a7a0bb1227eb00b8749c9a98ff83ece4142b6a12c7" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/debian/8/chef_12.13.12+20160723173635-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 4d98ccafaae9185041f342a7a0bb1227eb00b8749c9a98ff83ece4142b6a12c7" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2008r2/chef-client-12.13.12+20160723173635-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 305e914d328bff4f1cf8aaf132f90e3eed9eac167f7137e0edffff4420bf8a86" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012/chef-client-12.13.12+20160723173635-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 305e914d328bff4f1cf8aaf132f90e3eed9eac167f7137e0edffff4420bf8a86" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/windows/2012r2/chef-client-12.13.12+20160723173635-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 305e914d328bff4f1cf8aaf132f90e3eed9eac167f7137e0edffff4420bf8a86" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/aix/6.1/chef-12.13.12+20160723173635-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 2aded63c39bc18df6a59a6124449c794f205ea7ba4c03a2d5f581ceba1dc02e1" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/aix/7.1/chef-12.13.12+20160723173635-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 2aded63c39bc18df6a59a6124449c794f205ea7ba4c03a2d5f581ceba1dc02e1" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.10/chef-12.13.12+20160723173635-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7a80c015c76fb1d577f837f31397d8438e2cc8d19adec73a548492bed383609d" | out-file "$artifact_info_dir/artifact_info" -Append

                      $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                      New-Item -ItemType directory -Path $artifact_info_dir -force
                      New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                      "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160723173635/solaris2/5.11/chef-12.13.12+20160723173635-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                      "sha256 7a80c015c76fb1d577f837f31397d8438e2cc8d19adec73a548492bed383609d" | out-file "$artifact_info_dir/artifact_info" -Append


                    $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

                    $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                      foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

                    Write-Verbose "Project details: "
                    foreach ($key in $package_metadata.keys) {
                      Write-Verbose "`t$key = $($package_metadata[$key])"
                    }
                    $package_metadata
                  }

                  function Install-Project {
                    <#
                      .SYNOPSIS
                      Install a Chef Software, Inc. product
                      .DESCRIPTION
                      Install a Chef Software, Inc. product
                      .EXAMPLE
                      iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                      Installs the latest stable version of Chef.
                      .EXAMPLE
                      iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                      Installs the latest integration build of the Chef Development Kit
                    #>
                    [cmdletbinding(SupportsShouldProcess=$true)]
                    param (
                      # Project to install
                      [string]
                      $project = 'chef',
                      # Release channel to install from
                      [validateset('current', 'stable', 'unstable')]
                      [string]
                      $channel = 'stable',
                      # Version of the application to install
                      # This parameter is optional, if not supplied it will provide the latest version,
                      # and if an iteration number is not specified, it will grab the latest available iteration.
                      # Partial version numbers are also acceptable (using v=11
                      # will grab the latest 11.x client which matches the other flags).
                      [string]
                      $version,
                      # Full path for the downloaded installer.
                      [string]
                      $filename,
                      # Full path to the location to download the installer
                      [string]
                      $download_directory = $env:temp,
                      # The following legacy switches are just aliases for the current channel
                      [switch]
                      $prerelease,
                      [switch]
                      $nightlies,
                      [validateset('auto', 'i386', 'x86_64')]
                      [string]
                      $architecture = 'auto'
                    )

                    $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

                    if (-not [string]::IsNullOrEmpty($filename)) {
                      $download_directory = split-path $filename
                      $filename = split-path $filename -leaf
                      if ([string]::IsNullOrEmpty($download_directory)) {
                        $download_directory = $pwd
                      }
                    }
                    else {
                      $filename = ($package_metadata.url -split '/')[-1]
                    }
                    Write-Verbose "Download directory: $download_directory"
                    Write-Verbose "Filename: $filename"

                    if (-not (test-path $download_directory)) {
                      mkdir $download_directory
                    }
                    $download_directory = (resolve-path $download_directory).providerpath
                    $download_destination = join-path $download_directory $filename

                    if ((test-path $download_destination) -and
                      (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                      Write-Verbose "Found existing valid installer at $download_destination."
                    }
                    else {
                      if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                        Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                        Get-WebContent $package_metadata.url -filepath $download_destination
                      }
                    }

                    if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                      if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                        Write-Host "Installing $project from $download_destination"
                        $installingProject = $True
                        $installAttempts = 0
                        while ($installingProject) {
                          $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                          $p.WaitForExit()
                          if ($p.ExitCode -eq 1618) {
                            Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                            continue
                          } elseif ($p.ExitCode -ne 0) {
                            throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                          }
                          $installingProject = $False
                        }
                      }
                      else {
                        throw "Failed to validate the downloaded installer for $project."
                      }
                    }
                  }
                  set-alias install -value Install-Project
                  export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

                  }

                  install -project chef -version 12.13.12+20160723173635 -channel unstable
                   with id: 235BA7D5-EF4E-485B-B246-BF4628F920E3
                  D      [WinRM] creating command_id: 235BA7D5-EF4E-485B-B246-BF4628F920E3 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output

                         ModuleType Version    Name                                ExportedCommands
                         ---------- -------    ----                                ----------------
                         Script     0.0        Omnitruck                           {Get-ProjectMetada...
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                         Installing chef from C:\Users\ADMINI~1\AppData\Local\Temp\chef-client-12.13.12+20160723173635-1-x64.msi
                  D      [WinRM] Waiting for output...
                  D      [WinRM] retrying receive request after timeout
                  D      [WinRM] Processing output


                  D      [WinRM] cleaning up command_id: 235BA7D5-EF4E-485B-B246-BF4628F920E3 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] <{:endpoint=>"http://10.194.11.17:5985/wsman", :user=>"administrator", :password=>"Ggj69PRWX35", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"Ggj69PRWX35", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($dirs = @("$env:TEMP\kitchen\clients", "$env:TEMP\kitchen\cookbooks", "$env:TEMP\kitchen\data", "$env:TEMP\kitchen\data_bags", "$env:TEMP\kitchen\encrypted_data_bag_secret", "$env:TEMP\kitchen\environments", "$env:TEMP\kitchen\roles")
                  $root_path = "$env:TEMP\kitchen"

                  Function Delete-AllDirs($dirs) {
                    $dirs | ForEach-Object {
                      if (Test-Path ($path = Unresolve-Path $_)) { Remove-Item $path -Recurse -Force }
                    }
                  }

                  Function Unresolve-Path($p) {
                    if ($p -eq $null) { return $null }
                    else { return $ExecutionContext.SessionState.Path.GetUnresolvedProviderPathFromPSPath($p) }
                  }

                  Function Make-RootPath($p) {
                    $p = Unresolve-Path $p
                    if (-Not (Test-Path $p)) { New-Item $p -ItemType directory | Out-Null }
                  }

                  Delete-AllDirs $dirs
                  Make-RootPath $root_path
                  )
                  D      [WinRM] Command created for $dirs = @("$env:TEMP\kitchen\clients", "$env:TEMP\kitchen\cookbooks", "$env:TEMP\kitchen\data", "$env:TEMP\kitchen\data_bags", "$env:TEMP\kitchen\encrypted_data_bag_secret", "$env:TEMP\kitchen\environments", "$env:TEMP\kitchen\roles")
                  $root_path = "$env:TEMP\kitchen"

                  Function Delete-AllDirs($dirs) {
                    $dirs | ForEach-Object {
                      if (Test-Path ($path = Unresolve-Path $_)) { Remove-Item $path -Recurse -Force }
                    }
                  }

                  Function Unresolve-Path($p) {
                    if ($p -eq $null) { return $null }
                    else { return $ExecutionContext.SessionState.Path.GetUnresolvedProviderPathFromPSPath($p) }
                  }

                  Function Make-RootPath($p) {
                    $p = Unresolve-Path $p
                    if (-Not (Test-Path $p)) { New-Item $p -ItemType directory | Out-Null }
                  }

                  Delete-AllDirs $dirs
                  Make-RootPath $root_path
                   with id: B31141D0-26E7-42A9-B588-95F284AEC63A
                  D      [WinRM] creating command_id: B31141D0-26E7-42A9-B588-95F284AEC63A on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] cleaning up command_id: B31141D0-26E7-42A9-B588-95F284AEC63A on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                         Transferring files to <fips-integration-windows-2012r2>
                  D      creating hash for file $env:TEMP\kitchen
                  D      creating hash for file $env:TEMP\kitchen
                  D      creating hash for directory $env:TEMP\kitchen
                  D      Populating files
                  D      === All files added.
                  D      creating hash for file $env:TEMP\kitchen
                  D      creating hash for directory $env:TEMP\kitchen
                  D      Populating files
                  D      +++ Adding fips/metadata.rb
                  D      === All files added.
                  D      Running check_files.ps1
                  D      [WinRM] Command created for $hash_file = @{
                    "f36538b1f10bf80532dc432fbec25a65" = @{
                      "target" = "$env:TEMP\kitchen";
                      "src_basename" = "dna.json";
                      "dst" = "$env:TEMP\kitchen"
                    };
                    "608ae6e6474ca88bdec913156a101881" = @{
                      "target" = "$env:TEMP\kitchen";
                      "src_basename" = "client.rb";
                      "dst" = "$env:TEMP\kitchen"
                    };
                    "76cdb2bad9582d23c1f6f4d868218d6c" = @{
                      "target" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip";
                      "src_basename" = "cache";
                      "dst" = "$env:TEMP\kitchen\cache"
                    };
                    "49abb94825cb80b9a9cd59e5f76daf4a" = @{
                      "target" = "$env:TEMP\kitchen";
                      "src_basename" = "validation.pem";
                      "dst" = "$env:TEMP\kitchen"
                    };
                    "33968442c0ef69a92763825b33850e28" = @{
                      "target" = "$env:TEMP\winrm-upload\tmpzip-33968442c0ef69a92763825b33850e28.zip";
                      "src_basename" = "cookbooks";
                      "dst" = "$env:TEMP\kitchen\cookbooks"
                    }
                  }

                  Function Cleanup($disposable) {
                    if (($disposable -ne $null) -and ($disposable.GetType().GetMethod("Dispose") -ne $null)) {
                      $disposable.Dispose()
                    }
                  }

                  Function Check-Files($h) {
                    return $h.GetEnumerator() | ForEach-Object {
                      $dst = Unresolve-Path $_.Value.target
                      $dst_changed = $false
                      if(Test-Path $dst -PathType Container) {
                        $dst_changed = $true
                        $dst = Join-Path $dst $_.Value.src_basename
                      }
                      New-Object psobject -Property @{
                        chk_exists = ($exists = Test-Path $dst -PathType Leaf)
                        src_md5 = ($sMd5 = $_.Key)
                        dst_md5 = ($dMd5 = if ($exists) { Get-MD5Sum $dst } else { $null })
                        chk_dirty = ($dirty = if ($sMd5 -ne $dMd5) { $true } else { $false })
                        verifies = if ($dirty -eq $false) { $true } else { $false }
                        target_is_folder = $dst_changed
                      }
                    } | Select-Object -Property chk_exists,src_md5,dst_md5,chk_dirty,verifies,target_is_folder
                  }

                  Function Get-MD5Sum($src) {
                    Try {
                      $c = [System.Security.Cryptography.MD5]::Create()
                      $bytes = $c.ComputeHash(($in = (Get-Item $src).OpenRead()))
                      return ([System.BitConverter]::ToString($bytes)).Replace("-", "").ToLower()
                    }
                    Finally {
                      Cleanup $c
                      Cleanup $in
                    }
                  }

                  Function Unresolve-Path($path) {
                    if ($path -eq $null) {
                      return $null
                    }
                    else {
                      return $ExecutionContext.SessionState.Path.GetUnresolvedProviderPathFromPSPath($path)
                    }
                  }

                  Check-Files $hash_file | ConvertTo-Csv -NoTypeInformation
                   with id: ADF5CB71-2AD7-4522-ACA8-824E6D682A46
                  D      [WinRM] creating command_id: ADF5CB71-2AD7-4522-ACA8-824E6D682A46 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] cleaning up command_id: ADF5CB71-2AD7-4522-ACA8-824E6D682A46 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      Parsing CSV Response
                  D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
                  "False","33968442c0ef69a92763825b33850e28",,"True","False","False"
                  "False","76cdb2bad9582d23c1f6f4d868218d6c",,"True","False","False"
                  "False","f36538b1f10bf80532dc432fbec25a65",,"True","False","True"
                  "False","608ae6e6474ca88bdec913156a101881",,"True","False","True"
                  "False","49abb94825cb80b9a9cd59e5f76daf4a",,"True","False","True"

                  D      Uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160723-20479-1k475kp/dna.json to $env:TEMP\kitchen/dna.json
                  D      [WinRM] Command created for             $parent = Split-Path "$env:TEMP\kitchen/dna.json"
                              if(!(Test-path $parent)) { mkdir $parent | Out-Null}
                              $fileStream = New-Object -TypeName System.IO.FileStream -ArgumentList @(
                                  "$env:TEMP\kitchen/dna.json",
                                  [system.io.filemode]::Create,
                                  [System.io.FileAccess]::Write,
                                  [System.IO.FileShare]::ReadWrite
                              )
                   with id: 1EA18C5C-F214-4D43-85B4-13A950429386
                  D      [WinRM] creating command_id: 1EA18C5C-F214-4D43-85B4-13A950429386 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] cleaning up command_id: 1EA18C5C-F214-4D43-85B4-13A950429386 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Command created for             $bytes=[Convert]::FromBase64String('eyJjaGVmX2FjY2VwdGFuY2UiOiJ0cnVlIiwidXNlX3N5c3RlbV9jaGVmIjoidHJ1ZSIsInJ1bl9saXN0IjpbXX0=')
                              $fileStream.Write($bytes, 0, $bytes.length)
                   with id: F9FF022E-6540-4DC5-8813-0D94EE0DC302
                  D      [WinRM] creating command_id: F9FF022E-6540-4DC5-8813-0D94EE0DC302 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] cleaning up command_id: F9FF022E-6540-4DC5-8813-0D94EE0DC302 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Command created for $fileStream.Dispose() with id: A82D6BC1-63C6-4438-BA94-5A36782F28D8
                  D      [WinRM] creating command_id: A82D6BC1-63C6-4438-BA94-5A36782F28D8 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] cleaning up command_id: A82D6BC1-63C6-4438-BA94-5A36782F28D8 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      Finished uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160723-20479-1k475kp/dna.json to $env:TEMP\kitchen/dna.json (0.084 KB over 1 chunks) in (0m0.56s)
                  D      Uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160723-20479-1k475kp/client.rb to $env:TEMP\kitchen/client.rb
                  D      [WinRM] Command created for             $parent = Split-Path "$env:TEMP\kitchen/client.rb"
                              if(!(Test-path $parent)) { mkdir $parent | Out-Null}
                              $fileStream = New-Object -TypeName System.IO.FileStream -ArgumentList @(
                                  "$env:TEMP\kitchen/client.rb",
                                  [system.io.filemode]::Create,
                                  [System.io.FileAccess]::Write,
                                  [System.IO.FileShare]::ReadWrite
                              )
                   with id: B0204EE2-B5E5-4891-877F-70EBDBD62149
                  D      [WinRM] creating command_id: B0204EE2-B5E5-4891-877F-70EBDBD62149 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] cleaning up command_id: B0204EE2-B5E5-4891-877F-70EBDBD62149 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Command created for             $bytes=[Convert]::FromBase64String('bm9kZV9uYW1lICJmaXBzLWludGVncmF0aW9uLXdpbmRvd3MtMjAxMnIyIgpjaGVja3N1bV9wYXRoICIje0VOVlsnVEVNUCddfVxca2l0Y2hlblxcY2hlY2tzdW1zIgpmaWxlX2NhY2hlX3BhdGggIiN7RU5WWydURU1QJ119XFxraXRjaGVuXFxjYWNoZSIKZmlsZV9iYWNrdXBfcGF0aCAiI3tFTlZbJ1RFTVAnXX1cXGtpdGNoZW5cXGJhY2t1cCIKY29va2Jvb2tfcGF0aCBbIiN7RU5WWydURU1QJ119XFxraXRjaGVuXFxjb29rYm9va3MiLCAiI3tFTlZbJ1RFTVAnXX1cXGtpdGNoZW5cXHNpdGUtY29va2Jvb2tzIl0KZGF0YV9iYWdfcGF0aCAiI3tFTlZbJ1RFTVAnXX1cXGtpdGNoZW5cXGRhdGFfYmFncyIKZW52aXJvbm1lbnRfcGF0aCAiI3tFTlZbJ1RFTVAnXX1cXGtpdGNoZW5cXGVudmlyb25tZW50cyIKbm9kZV9wYXRoICIje0VOVlsnVEVNUCddfVxca2l0Y2hlblxcbm9kZXMiCnJvbGVfcGF0aCAiI3tFTlZbJ1RFTVAnXX1cXGtpdGNoZW5cXHJvbGVzIgpjbGllbnRfcGF0aCAiI3tFTlZbJ1RFTVAnXX1cXGtpdGNoZW5cXGNsaWVudHMiCnVzZXJfcGF0aCAiI3tFTlZbJ1RFTVAnXX1cXGtpdGNoZW5cXHVzZXJzIgp2YWxpZGF0aW9uX2tleSAiI3tFTlZbJ1RFTVAnXX1cXGtpdGNoZW5cXHZhbGlkYXRpb24ucGVtIgpjbGllbnRfa2V5ICIje0VOVlsnVEVNUCddfVxca2l0Y2hlblxcY2xpZW50LnBlbSIKY2hlZl9zZXJ2ZXJfdXJsICJodHRwOi8vMTI3LjAuMC4xOjg4ODkiCmVuY3J5cHRlZF9kYXRhX2JhZ19zZWNyZXQgIiN7RU5WWydURU1QJ119XFxraXRjaGVuXFxlbmNyeXB0ZWRfZGF0YV9iYWdfc2VjcmV0IgphdWRpdF9tb2RlIDplbmFibGVkCm5hbWVkX3J1bl9saXN0IHt9')
                              $fileStream.Write($bytes, 0, $bytes.length)
                   with id: 5F9C1557-AFE7-437A-A7A4-4FACFC09792D
                  D      [WinRM] creating command_id: 5F9C1557-AFE7-437A-A7A4-4FACFC09792D on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] cleaning up command_id: 5F9C1557-AFE7-437A-A7A4-4FACFC09792D on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Command created for $fileStream.Dispose() with id: CEFD1663-03AA-4775-8B32-01D38BE45127
                  D      [WinRM] creating command_id: CEFD1663-03AA-4775-8B32-01D38BE45127 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] cleaning up command_id: CEFD1663-03AA-4775-8B32-01D38BE45127 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      Finished uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160723-20479-1k475kp/client.rb to $env:TEMP\kitchen/client.rb (1.116 KB over 1 chunks) in (0m0.36s)
                  D      Uploading /tmp/cheftest/tmpzip-20160723-20479-qp9yoy.zip to $env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip
                  D      [WinRM] Command created for             $parent = Split-Path "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip"
                              if(!(Test-path $parent)) { mkdir $parent | Out-Null}
                              $fileStream = New-Object -TypeName System.IO.FileStream -ArgumentList @(
                                  "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip",
                                  [system.io.filemode]::Create,
                                  [System.io.FileAccess]::Write,
                                  [System.IO.FileShare]::ReadWrite
                              )
                   with id: 51236095-81C7-4430-BA36-55B277CF61E0
                  D      [WinRM] creating command_id: 51236095-81C7-4430-BA36-55B277CF61E0 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] cleaning up command_id: 51236095-81C7-4430-BA36-55B277CF61E0 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Command created for             $bytes=[Convert]::FromBase64String('UEsFBgAAAAAAAAAAAAAAAAAAAAAAAA==')
                              $fileStream.Write($bytes, 0, $bytes.length)
                   with id: 89D9D819-1395-4933-9046-0998857FBF12
                  D      [WinRM] creating command_id: 89D9D819-1395-4933-9046-0998857FBF12 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] cleaning up command_id: 89D9D819-1395-4933-9046-0998857FBF12 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Command created for $fileStream.Dispose() with id: FBD68D68-BD17-4CD6-9D75-AFBD66CFEDF9
                  D      [WinRM] creating command_id: FBD68D68-BD17-4CD6-9D75-AFBD66CFEDF9 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] cleaning up command_id: FBD68D68-BD17-4CD6-9D75-AFBD66CFEDF9 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      Finished uploading /tmp/cheftest/tmpzip-20160723-20479-qp9yoy.zip to $env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip (0.028 KB over 1 chunks) in (0m0.49s)
                  D      Uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160723-20479-1k475kp/validation.pem to $env:TEMP\kitchen/validation.pem
                  D      [WinRM] Command created for             $parent = Split-Path "$env:TEMP\kitchen/validation.pem"
                              if(!(Test-path $parent)) { mkdir $parent | Out-Null}
                              $fileStream = New-Object -TypeName System.IO.FileStream -ArgumentList @(
                                  "$env:TEMP\kitchen/validation.pem",
                                  [system.io.filemode]::Create,
                                  [System.io.FileAccess]::Write,
                                  [System.IO.FileShare]::ReadWrite
                              )
                   with id: 1240C448-46CB-415C-8B9A-6E880B8AB3D4
                  D      [WinRM] creating command_id: 1240C448-46CB-415C-8B9A-6E880B8AB3D4 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] cleaning up command_id: 1240C448-46CB-415C-8B9A-6E880B8AB3D4 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Command created for             $bytes=[Convert]::FromBase64String('LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBMHNPWTl0SHZWdExaNnhtVm1IOGQ4THJSck5jV09YYnJ2dkNyYWkrVDNHdFJ2UlNMCmhrc0xycE9wRDBMOUVITTZOZFRoTkYvZUdBOU9xK1VLQWU2eVhSMGh3c0t1eEtYcVE4U0VtbGhaWjlHaXVnZ0QKQi96WUQzSXRCNlNHcGRrUmU3a1FxVENoUXlySVhxYlJrSnF4b1RYTHllSkRGMHNDeVRkcDNMOElaQ1VXb2RNOApvVjlUbFFCSkhZdEcxZ0xVd0lpOGtjTVZFb0NuMlE4bHRDajAvZnRud2hUdHdPNTJSa1dBMHVZT0xHVmF5SHNMClNDRmZ4K0FDV1BVL29XQ3dXNS9LQnFiM3ZlVHYwYUVnL25oMFFzRnpSTG9UeDZTUkZJNWRUMk5mOGlpSmU0V0MKVUc4V0tFQjJHOFFQbnhzeGZPUFlEQmRUSjRDWEVpMmUrejQxVlFJREFRQUJBb0lCQUFMaHFiVzJLUStHMG5QawpaYWN3RmJpMDFTa0h4OFlCV2pmQ0VwWGhFS1J5MHl0Q25LVzVZTytDRlUyZ0hOV2N2YTcrdWhWOU9nd2FLWGt3CktITGVVSkgxVkFEVnFJNEh0cXcyZzVtWW02QlB2V25Oc2p6cHVBcCtCUitWb0VHa05oajY3cjloYXRNQVFyMEkKaXRUdlNINXJ2ZDJFdW1ZWElIS2Z6MUsxU2VnVWsxdTFFTDFSY016Um1aZTRnRGI2ZU5CczlTZzRpbTR5YlRHNgpwUEl5dEE4dkJRVldoanVBUjJUbSt3WkhpeTBBejZWdTdjMm1TMDdGU1g2Rk80RThTeFdmOGlkYUs5aWpNR1NxCkZ2SVMwNG1yWTZYQ1BVUFVDNHFtMXFObmhEUHBPcjdDcEkyT085OFNxR2FuU3RTNU5GbFNGWGVYUHBNMjgwL3UKZlpVQTBBRUNnWUVBK3g3UVVuZmZEcnQ3TEsyY1g2d2J2bjRtUm5GeGV0N2JKanJmV0lIZitSbTBVUmlrYU5tYQpoMC93TktwS0J3SUgrZUhLL0xzbGd6Y3BscnFQeXRHR0hMT0c5N0d5bzV0R0F6eUxIVVdCbXNOa1Jrc1kyc1BMCnVIcTZwWVdKTmtxaG5XR25JYm1xQ3IwRVdpaDgyeC95NHF4YkpZcFlxWE1yaXQwd1ZmN3lBZ2tDZ1lFQTF0d0kKZ0ZhWHFlc2V0VFBvRUhTUVNnQzhTNEQ1L05rZHJpVVhDWWIwNlJFY3ZvOUlwRk11aU9rVlVZTk41ZDNNRE5UUApJZEJpY2ZtdmZORUx2QnRYRG9tRVVEOGxzMVV1b1RJWFJOR1owVnNaWHU3T0VyWENLMEpLTk55cVJtT3djdllMCkpScUxmbmxlaTVOZG8xbHUyODZ5TDc0YzVyZFRMcy9uSTJwNGUrMENnWUIwNzlabWNMZUlMcm1mQm9GSTgrWS8KZ0pMbVByRnZYQk9FNitsUlY3a3FVRlB0WjZJM3lRenljY0VUWlREdnJueDBXamFpRmF2VVBIMjdXTWpZMDFTMgpUTXRPMElxMU1Qc2JTcmdsTzFhczhNdmpCOWxkRmN2cDdneTRRMFN2NlhUMHlxSi9TK3ZvOERmMG0rSDRVQnBVCmY1bzZFd0JTZC9VUXh3dFpJRTBsc1FLQmdRQ3N3ZmpYOEVnOEtML2xKTnBJT09FM2o0WFhFOXB0a3NtSmwyc0IKanhEblFZb2lNcVZPODA4c2FIVnF1Qy92VHJwZDZ0S3ROcGVoV3dqZVRGdXFJVFdMaThqbW1RK2dOVEtzQzlHbgoxUHhmMkdiNjdQcW5FcHdRR2xuK1RSdGdRNUhCcmRIaVFJaSs1YW0rZ253ODlwRHJqak81clp3aGFuQW82S1BKCjF6Y1BOUUtCZ1FEeEZ1OHY0ZnJEbVJOQ1ZhWlM0ZjFCNndUcmNNcm5pYklEbG56cks5R0c2SHoxVTdkRHY4czgKTmY0VW1lTXpEWGpsUFdaVk92UzUrOUhLSlBkUGo3L29udjhCMm0xOCtsY2dUVERKQmt6YTdSMW1qTDFDamUvWgpLY1ZHc3J5S042Y2pFN3lDRGFzbkE3UjJyVkJWLzdOV2VKVjc3Ym16VDVPLy9yVzR5SWZVSWc9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=')
                              $fileStream.Write($bytes, 0, $bytes.length)
                   with id: 80A36898-D8A9-4FB4-88B0-AB99B5BC678B
                  D      [WinRM] creating command_id: 80A36898-D8A9-4FB4-88B0-AB99B5BC678B on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] cleaning up command_id: 80A36898-D8A9-4FB4-88B0-AB99B5BC678B on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Command created for $fileStream.Dispose() with id: 19744866-2311-4E79-BBE4-BFB54E424487
                  D      [WinRM] creating command_id: 19744866-2311-4E79-BBE4-BFB54E424487 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] cleaning up command_id: 19744866-2311-4E79-BBE4-BFB54E424487 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      Finished uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160723-20479-1k475kp/validation.pem to $env:TEMP\kitchen/validation.pem (2.236 KB over 1 chunks) in (0m0.32s)
                  D      Uploading /tmp/cheftest/tmpzip-20160723-20479-1d0f174.zip to $env:TEMP\winrm-upload\tmpzip-33968442c0ef69a92763825b33850e28.zip
                  D      [WinRM] Command created for             $parent = Split-Path "$env:TEMP\winrm-upload\tmpzip-33968442c0ef69a92763825b33850e28.zip"
                              if(!(Test-path $parent)) { mkdir $parent | Out-Null}
                              $fileStream = New-Object -TypeName System.IO.FileStream -ArgumentList @(
                                  "$env:TEMP\winrm-upload\tmpzip-33968442c0ef69a92763825b33850e28.zip",
                                  [system.io.filemode]::Create,
                                  [System.io.FileAccess]::Write,
                                  [System.IO.FileShare]::ReadWrite
                              )
                   with id: B664CD0F-2746-4444-A6FE-C4C205DFE7AC
                  D      [WinRM] creating command_id: B664CD0F-2746-4444-A6FE-C4C205DFE7AC on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] cleaning up command_id: B664CD0F-2746-4444-A6FE-C4C205DFE7AC on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Command created for             $bytes=[Convert]::FromBase64String('UEsDBBQAAAAIAAAAISiZETWIDgAAAAwAAAAQAAAAZmlwcy9tZXRhZGF0YS5yYstLzE1VUErLLChW4gIAUEsBAjQDFAAAAAgAAAAhKJkRNYgOAAAADAAAABAAAAAAAAAAAQAAAKSBAAAAAGZpcHMvbWV0YWRhdGEucmJQSwUGAAAAAAEAAQA+AAAAPAAAAAAA')
                              $fileStream.Write($bytes, 0, $bytes.length)
                   with id: 41CDEF21-6451-4A0F-83EB-27821888F3A3
                  D      [WinRM] creating command_id: 41CDEF21-6451-4A0F-83EB-27821888F3A3 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] cleaning up command_id: 41CDEF21-6451-4A0F-83EB-27821888F3A3 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Command created for $fileStream.Dispose() with id: DE95DA5E-72E9-4B92-9967-C6737561E600
                  D      [WinRM] creating command_id: DE95DA5E-72E9-4B92-9967-C6737561E600 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] cleaning up command_id: DE95DA5E-72E9-4B92-9967-C6737561E600 on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      Finished uploading /tmp/cheftest/tmpzip-20160723-20479-1d0f174.zip to $env:TEMP\winrm-upload\tmpzip-33968442c0ef69a92763825b33850e28.zip (0.192 KB over 1 chunks) in (0m0.47s)
                  D      Running extract_files.ps1
                  D      [WinRM] Command created for trap {
                    $e = $_.Exception
                    $e.InvocationInfo.ScriptName
                    do {
                      $e.Message
                      $e = $e.InnerException
                    } while ($e)
                    break
                  }

                  function folder($path){
                    $path | ? {-not (test-path $_)} | % {$null = mkdir $_}
                  }

                  Function Decode-Files($hash) {
                    foreach ($key in $hash.keys) {
                      $value = $hash[$key]
                      $tzip, $dst = $Value["tmpzip"], $Value["dst"]
                      if ($tzip) {Unzip-File $tzip $dst}
                      New-Object psobject -Property @{dst=$dst;src_md5=$key;tmpzip=$tzip}
                    }
                  }

                  Function Unzip-File($src, $dst) {
                    $unpack = $src -replace '\.zip'
                    $dst_parent = Split-Path -Path $dst -Parent
                    if(!(Test-Path $dst_parent)) { $dst = $dst_parent }
                    folder $unpack, $dst
                    try {
                      try{
                        [IO.Compression.ZipFile]::ExtractToDirectory($src, $unpack)
                      }
                      catch {
                        Add-Type -AssemblyName System.IO.Compression.FileSystem -ErrorAction Stop
                        [IO.Compression.ZipFile]::ExtractToDirectory($src, $unpack)
                      }
                    }
                    catch {
                      Try {
                        $s = New-Object -ComObject Shell.Application
                        ($s.NameSpace($unpack)).CopyHere(($s.NameSpace($src)).Items(), 0x610)
                      }
                      Finally {
                        [void][Runtime.Interopservices.Marshal]::ReleaseComObject($s)
                      }
                    }
                    dir $unpack | cp -dest "$dst/" -force -recurse
                    rm $unpack -recurse -force
                  }

                  $hash_file = @{
                    "76cdb2bad9582d23c1f6f4d868218d6c" = @{
                      "dst" = "$env:TEMP\kitchen\cache";
                      "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip"
                    };
                    "33968442c0ef69a92763825b33850e28" = @{
                      "dst" = "$env:TEMP\kitchen\cookbooks";
                      "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-33968442c0ef69a92763825b33850e28.zip"
                    }
                  }
                  Decode-Files $hash_file | ConvertTo-Csv -NoTypeInformation
                   with id: 7544FCC8-2306-4D4F-A934-EAFE61C88E2A
                  D      [WinRM] creating command_id: 7544FCC8-2306-4D4F-A934-EAFE61C88E2A on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                  D      [WinRM] cleaning up command_id: 7544FCC8-2306-4D4F-A934-EAFE61C88E2A on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      Parsing CSV Response
                  D      "src_md5","tmpzip","dst"
                  "33968442c0ef69a92763825b33850e28","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-33968442c0ef69a92763825b33850e28.zip","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cookbooks"
                  "76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache"

                  D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160723-20479-qp9yoy.zip
                  D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160723-20479-1d0f174.zip
                  D      Uploaded 5 items dirty_check: (0m0.21s) stream_files: (0m2.21s) extract: (0m0.29s)
                  D      Transfer complete
                  D      Attempting to execute command - try 1 of 1.
                  D      [WinRM] <{:endpoint=>"http://10.194.11.17:5985/wsman", :user=>"administrator", :password=>"Ggj69PRWX35", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"Ggj69PRWX35", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($env:PATH = [System.Environment]::GetEnvironmentVariable("PATH","Machine")

                  & $env:systemdrive\opscode\chef\bin\chef-client.bat --local-mode --config $env:TEMP\kitchen\client.rb --log_level auto --force-formatter --no-color --json-attributes $env:TEMP\kitchen\dna.json --chef-zero-port 8889 ; exit $LastExitCode)
                  D      [WinRM] Command created for $env:PATH = [System.Environment]::GetEnvironmentVariable("PATH","Machine")

                  & $env:systemdrive\opscode\chef\bin\chef-client.bat --local-mode --config $env:TEMP\kitchen\client.rb --log_level auto --force-formatter --no-color --json-attributes $env:TEMP\kitchen\dna.json --chef-zero-port 8889 ; exit $LastExitCode with id: 0C154C34-C0EC-4C03-96A1-8B283A3622AA
                  D      [WinRM] creating command_id: 0C154C34-C0EC-4C03-96A1-8B283A3622AA on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                         Starting Chef Client, version 12.13.12
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output
                         Creating a new client identity for fips-integration-windows-2012r2 using the validator key.
                         resolving cookbooks for run list: []
                         Synchronizing Cookbooks:
                         Installing Cookbook Gems:
                         Compiling Cookbooks...
                         [2016-07-23T18:17:39+00:00] WARN: Node fips-integration-windows-2012r2 has an empty run list.
                         Converging 0 resources
                         Starting audit phase
                  D      [WinRM] Waiting for output...
                  D      [WinRM] Processing output

                         Finished in 0 seconds (files took 0.65625 seconds to load)
                         0 examples, 0 failures
                         Auditing complete

                         Running handlers:
                         Running handlers complete
                         Chef Client finished, 0/0 resources updated in 31 seconds
                         [2016-07-23T18:17:40+00:00] ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json
                  D      [WinRM] cleaning up command_id: 0C154C34-C0EC-4C03-96A1-8B283A3622AA on shell_id D2FF358B-0C08-4C9E-B90C-2D75848BABFD
                  D      Cleaning up local sandbox in /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160723-20479-1k475kp
                         Finished converging <fips-integration-windows-2012r2> (1m57.47s).
                  D      ------Exception-------
                  D      Class: Kitchen::ActionFailed
                  D      Message: 1 actions failed.
                  >>>>>>     Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.8.224' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-unit-functional-windows-2012r2
                  D      ----------------------
                  D      ------Backtrace-------
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:187:in `report_errors'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:178:in `run_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command/action.rb:39:in `block in call'
                  D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command/action.rb:37:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/cli.rb:56:in `perform'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/cli.rb:184:in `block (2 levels) in <class:CLI>'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/cli.rb:325:in `invoke_task'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/bin/kitchen:13:in `block in <top (required)>'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/errors.rb:174:in `with_friendly_errors'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/bin/kitchen:13:in `<top (required)>'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:22:in `load'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:22:in `<top (required)>'
                  D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/cli/exec.rb:63:in `load'
                  D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/cli/exec.rb:63:in `kernel_load'
                  D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/cli/exec.rb:24:in `run'
                  D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/cli.rb:304:in `exec'
                  D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
                  D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
                  D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/vendor/thor/lib/thor.rb:359:in `dispatch'
                  D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/vendor/thor/lib/thor/base.rb:440:in `start'
                  D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/cli.rb:11:in `start'
                  D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/exe/bundle:27:in `block in <top (required)>'
                  D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/friendly_errors.rb:98:in `with_friendly_errors'
                  D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/exe/bundle:19:in `<top (required)>'
                  D      /opt/chefdk/embedded/bin/bundle:22:in `load'
                  D      /opt/chefdk/embedded/bin/bundle:22:in `<main>'
                  D      ----End Backtrace-----
                  D      -Composite Exception--
                  D      Class: Kitchen::ActionFailed
                  D      Message: Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.8.224' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-unit-functional-windows-2012r2
                  D      ----------------------
                  D      ------Backtrace-------
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:69:in `raise_if_wsman_fault'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:52:in `raise_if_error'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:36:in `parse_to_xml'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/transport.rb:186:in `send_request'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:93:in `send_get_output_message'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:63:in `read_response'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:41:in `read_message'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:60:in `block in read_output'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:75:in `with_output'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:59:in `read_output'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:76:in `block in run'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:122:in `with_command_shell'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:75:in `run'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:218:in `execute_with_exit_code'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:100:in `execute'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/provisioner/base.rb:72:in `block in call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:478:in `reuse_connection'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:72:in `connection'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/provisioner/base.rb:71:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:373:in `block in converge_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:513:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:513:in `synchronize_or_call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:478:in `block in action'
                  D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:477:in `action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:369:in `converge_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:348:in `block in transition_to'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:347:in `each'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:347:in `transition_to'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:138:in `converge'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:201:in `public_send'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:201:in `run_action_in_thread'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
                  D      ----End Backtrace-----
                  D      ---Nested Exception---
                  D      Class: Kitchen::ActionFailed
                  D      Message: Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.8.224' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>]
                  D      ----------------------
                  D      ------Backtrace-------
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:69:in `raise_if_wsman_fault'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:52:in `raise_if_error'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:36:in `parse_to_xml'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/transport.rb:186:in `send_request'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:93:in `send_get_output_message'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:63:in `read_response'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:41:in `read_message'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:60:in `block in read_output'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:75:in `with_output'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:59:in `read_output'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:76:in `block in run'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:122:in `with_command_shell'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:75:in `run'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:218:in `execute_with_exit_code'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:100:in `execute'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/provisioner/base.rb:72:in `block in call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:478:in `reuse_connection'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:72:in `connection'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/provisioner/base.rb:71:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:373:in `block in converge_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:513:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:513:in `synchronize_or_call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:478:in `block in action'
                  D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:477:in `action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:369:in `converge_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:348:in `block in transition_to'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:347:in `each'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:347:in `transition_to'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:138:in `converge'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:201:in `public_send'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:201:in `run_action_in_thread'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
                  D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
                  D      ----End Backtrace-----
                  STDERR: >>>>>> ------Exception-------
                  >>>>>> Class: Kitchen::ActionFailed
                  >>>>>> Message: 1 actions failed.
                  >>>>>>     Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.8.224' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-unit-functional-windows-2012r2
                  >>>>>> ----------------------
                  >>>>>> Please see .kitchen/logs/kitchen.log for more details
                  >>>>>> Also try running `kitchen diagnose --all` for configuration
                  ---- End output of bundle exec kitchen converge  -c -l debug ----
                  Ran bundle exec kitchen converge  -c -l debug returned 20

                  Cookbook Trace:
                  ---------------
                  /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:52:in `block in <class:Kitchen>'

                  Resource Declaration:
                  ---------------------
                  # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/acceptance-cookbook/recipes/provision.rb

                    1: kitchen "converge"

                  Compiled Resource:
                  ------------------
                  # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/acceptance-cookbook/recipes/provision.rb:1:in `from_file'

                  kitchen("converge") do
                    action [:run]
                    retries 0
                    retry_delay 2
                    default_guard_interpreter :default
                    declared_type :kitchen
                    cookbook_name "acceptance-cookbook"
                    recipe_name "provision"
                    chef_product "chef"
                    kitchen_dir "/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/fips"
                    command "converge"
                    kitchen_options "-c -l debug"
                  end

                  Platform:
                  ---------
                  x86_64-linux

              Starting audit phase
            11720: |2

              Running handlers:
              [2016-07-23T18:17:42+00:00] ERROR: Running exception handlers
              Running handlers complete
              [2016-07-23T18:17:42+00:00] ERROR: Exception handlers complete
              Chef Client failed. 0 resources updated in 04 minutes 34 seconds
              [2016-07-23T18:17:42+00:00] ERROR: Failed to post audit report to server. Saving report to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/failed-audit-data.json
              [2016-07-23T18:17:42+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/chef-stacktrace.out
              [2016-07-23T18:17:42+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
              [2016-07-23T18:17:42+00:00] ERROR: Found 1 errors, they are stored in the backtrace
              [2016-07-23T18:17:42+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
              STDERR:
              ---- End output of chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/dna.json -o acceptance-cookbook::provision --no-color ----
              Ran chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/dna.json -o acceptance-cookbook::provision --no-color returned 1
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:289:in `invalid!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:276:in `error!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/chef_runner.rb:53:in `block in run!'
              /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler.rb:237:in `block in with_clean_env'
              /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler.rb:447:in `with_env'
              /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler.rb:237:in `with_clean_env'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/chef_runner.rb:42:in `run!'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:149:in `run_command'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:116:in `block in run_suite'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:114:in `each'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:114:in `run_suite'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:76:in `block (2 levels) in start_worker'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:74:in `loop'
              /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:74:in `block in start_worker'
              CHEF-ACCEPTANCE::[2016-07-23 18:17:42 +0000] --force-destroy specified so attempting to run the destroy recipe
              FIPS::DESTROY::[2016-07-23 18:17:42 +0000] Initialized [/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/logs/fips/destroy.log] logger...
            11809: |
              CHEF-ACCEPTANCE::[2016-07-23 18:17:53 +0000] | fips            | Total         | 00:04:51 | Y     |
              CHEF-ACCEPTANCE::[2016-07-23 18:17:53 +0000] | Run             | Total         | 00:05:38 | Y     |
              Build step 'Invoke XShell command' marked build as failure
              Archiving artifacts
              Recording fingerprints
        steps:
          total: 8m34s
          before (setup time): 2m57s
          CHEF-ACCEPTANCE:
            total: 5m39s
            OMNITRUCK::PROVISION: 18s
            TRIVIAL::PROVISION: 1m25s
            TOP-COOKBOOKS::PROVISION: 18s
            TOP-COOKBOOKS::DESTROY: 16s
            OMNITRUCK::VERIFY: 17s
            WINDOWS-SERVICE::PROVISION: 11s
            OMNITRUCK::DESTROY: 11s
            WINDOWS-SERVICE::VERIFY: 13s
            FIPS::PROVISION: 4m41s
            BASICS::PROVISION: 52s
            TRIVIAL::VERIFY: 13s
            TRIVIAL::DESTROY: 11s
            DATA-COLLECTOR::PROVISION: 55s
            BASICS::VERIFY: 17s
            BASICS::DESTROY: 26s
            DATA-COLLECTOR::VERIFY: 35s
            DATA-COLLECTOR::DESTROY: 2m8s
            FIPS::DESTROY: 11s
        chef_acceptance_timing:
        - top-cookbooks:
            provision: 10s
            force-destroy: 10s
            Total: 33s
          omnitruck:
            provision: 10s
            verify: 10s
            destroy: 7s
            Total: 46s
          windows-service:
            provision: 7s
            verify: 8s
            destroy: 5s
            Total: 34s
          trivial:
            provision: 56s
            verify: 9s
            destroy: 7s
            Total: 1m48s
          basics:
            provision: 37s
            verify: 13s
            destroy: 7s
            Total: 1m19s
          data-collector:
            provision: 43s
            verify: 30s
            destroy: 9s
            Total: 1m42s
          fips:
            provision: 3m57s
            force-destroy: 7s
            Total: 4m51s
          Run:
            Total: 5m38s
      debian-6-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=debian-6,project=chef,role=tester/90/
        duration: 10m13s
      debian-7-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=debian-7,project=chef,role=tester/90/
        duration: 11m22s
      el-5-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=el-5,project=chef,role=tester/90/
        duration: 22m46s
      el-6-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=el-6,project=chef,role=tester/90/
        duration: 30m14s
      freebsd-10-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=freebsd-10,project=chef,role=tester/90/
        duration: 8m41s
      freebsd-9-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=freebsd-9,project=chef,role=tester/90/
        duration: 9m23s
      ubuntu-12.04-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=ubuntu-12.04,project=chef,role=tester/90/
        duration: 10m17s
      ubuntu-14.04-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=ubuntu-14.04,project=chef,role=tester/90/
        duration: 10m21s
      windows-2008r2-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i386,platform=windows-2008r2,project=chef,role=tester/90/
        duration: 17m15s
      solaris-10-i86pc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i86pc,platform=solaris-10,project=chef,role=tester/90/
        duration: 7m26s
      solaris-11-i86pc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=i86pc,platform=solaris-11,project=chef,role=tester/90/
        duration: 8m11s
      aix-6.1-powerpc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=powerpc,platform=aix-6.1,project=chef,role=tester/90/
        duration: 21m50s
      aix-7.1-powerpc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=powerpc,platform=aix-7.1,project=chef,role=tester/90/
        duration: 20m52s
      el-7-ppc64:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=ppc64,platform=el-7,project=chef,role=tester/90/
        duration: 9m11s
      el-7-ppc64le:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=ppc64le,platform=el-7,project=chef,role=tester/90/
        duration: 9m22s
      ubuntu-14.04-ppc64le:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=ppc64le,platform=ubuntu-14.04,project=chef,role=tester/90/
        duration: 6m41s
      solaris-10-sun4v:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=sun4v,platform=solaris-10,project=chef,role=tester/90/
        duration: 1h13m56s
      solaris-11-sun4v:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=sun4v,platform=solaris-11,project=chef,role=tester/90/
        duration: 1h18m18s
      debian-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=debian-6,project=chef,role=tester/90/
        duration: 19m19s
      debian-7:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=debian-7,project=chef,role=tester/90/
        duration: 13m40s
      debian-8:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=debian-8,project=chef,role=tester/90/
        duration: 13m41s
      el-5:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=el-5,project=chef,role=tester/90/
        duration: 32m52s
      el-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=el-6,project=chef,role=tester/90/
        duration: 49m27s
      el-7:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=el-7,project=chef,role=tester/90/
        duration: 12m45s
      freebsd-10:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=freebsd-10,project=chef,role=tester/90/
        duration: 14m9s
      freebsd-9:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=freebsd-9,project=chef,role=tester/90/
        duration: 15m58s
      ios_xr-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=ios_xr-6,project=chef,role=tester/90/
        duration: 8m3s
      mac_os_x-10.10:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=mac_os_x-10.10,project=chef,role=tester/90/
        duration: 10m18s
      mac_os_x-10.11:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=mac_os_x-10.11,project=chef,role=tester/90/
        duration: 11m10s
      mac_os_x-10.9:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=mac_os_x-10.9,project=chef,role=tester/90/
        duration: 9m27s
      nexus-7:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=nexus-7,project=chef,role=tester/90/
        duration: 10m13s
      ubuntu-12.04:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=ubuntu-12.04,project=chef,role=tester/90/
        duration: 15m37s
      ubuntu-14.04:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=ubuntu-14.04,project=chef,role=tester/90/
        duration: 13m16s
      windows-2008r2:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=windows-2008r2,project=chef,role=tester/90/
        duration: 17m11s
      windows-2012:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=windows-2012,project=chef,role=tester/90/
        duration: 16m39s
      windows-2012r2:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=windows-2012r2,project=chef,role=tester/90/
        duration: 18m35s
  chef-build:
    result: SUCCESS
    url: http://manhattan.ci.chef.co/job/chef-build/194/
    duration: 1h6m40s
    active_duration: 32m35s
    retries: 1
    retry_delay: 34m5s
    queue_delay: 10s
    runs:
      debian-6-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=debian-6,project=chef,role=builder/194/
        duration: 5m57s
        steps:
          total: 5m57s
          before (setup time): 2m33s
          omnibus:
            total: 3m50s
            fetch:
              PathFetcher:
                chef: 37s
            build:
              total: 3m6s
              GitCache: 1m39s
              Software: 1m39s
              Builder:
                total: 1m27s
                chef: 49s
                chef-appbundle: 31s
              Project:
                chef: 1m27s
              Licensing: 11s
              HealthCheck: 12s
              Packager::DEB: 1m4s
          after (cleanup time): "-26s"
      el-5-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=el-5,project=chef,role=builder/194/
        duration: 6m44s
        steps:
          total: 6m44s
          before (setup time): 2m26s
          omnibus:
            total: 4m43s
            fetch:
              PathFetcher:
                chef: 33s
            build:
              total: 4m3s
              GitCache: 1m55s
              Software: 1m55s
              Builder:
                total: 1m43s
                chef: 59s
                chef-appbundle: 35s
              Project:
                chef: 2m8s
              Licensing: 14s
              HealthCheck: 16s
              Packager::RPM: 1m38s
          after (cleanup time): "-24s"
      el-6-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=el-6,project=chef,role=builder/194/
        duration: 6m55s
        steps:
          total: 6m55s
          before (setup time): "-1m47s"
          omnibus:
            total: 4m42s
            fetch:
              PathFetcher:
                chef: 36s
            build:
              total: 4m
              GitCache: 1m58s
              Software: 1m57s
              Builder:
                total: 1m42s
                chef: 57s
                chef-appbundle: 33s
              Project:
                chef: 2m2s
              Licensing: 13s
              HealthCheck: 22s
              Packager::RPM: 1m27s
          after (cleanup time): 4m1s
      freebsd-10-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=freebsd-10,project=chef,role=builder/194/
        duration: 5m49s
        steps:
          total: 5m49s
          before (setup time): 1m19s
          omnibus:
            total: 3m45s
            fetch:
              PathFetcher:
                chef: 37s
            build:
              total: 3m2s
              GitCache: 1m47s
              Software: 1m47s
              Builder:
                total: 1m35s
                chef: 52s
                chef-appbundle: 30s
              Project:
                chef: 1m15s
              Licensing: 12s
              Packager::Makeself: 1m3s
          after (cleanup time): 45s
      freebsd-9-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=freebsd-9,project=chef,role=builder/194/
        duration: 6m15s
        steps:
          total: 6m15s
          before (setup time): 6m
          omnibus:
            total: 4m4s
            fetch:
              PathFetcher:
                chef: 39s
            build:
              total: 3m18s
              GitCache: 1m50s
              Software: 1m50s
              Builder:
                total: 1m37s
                chef: 53s
                chef-appbundle: 31s
              Project:
                chef: 1m28s
              Licensing: 13s
              Packager::Makeself: 1m15s
          after (cleanup time): "-3m48s"
      ubuntu-12.04-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=ubuntu-12.04,project=chef,role=builder/194/
        duration: 6m24s
        steps:
          total: 6m24s
          before (setup time): 2m49s
          omnibus:
            total: 4m2s
            fetch:
              PathFetcher:
                chef: 37s
            build:
              total: 3m19s
              GitCache: 1m40s
              Software: 1m40s
              Builder:
                total: 1m29s
                chef: 50s
                chef-appbundle: 30s
              Project:
                chef: 1m38s
              Licensing: 13s
              HealthCheck: 13s
              Packager::DEB: 1m12s
          after (cleanup time): "-26s"
      windows-2008r2-i386:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i386,platform=windows-2008r2,project=chef,role=builder/194/
        duration: 9m27s
        steps:
          total: 9m27s
          before (setup time): "-4m58s"
          omnibus:
            total: 6m48s
            fetch:
              PathFetcher:
                chef: 31s
            build:
              total: 6m9s
              GitCache:
                total: 3m47s
                chef 2: 13s
                ruby-windows-devkit: 10s
              Software: 3m46s
              Builder:
                total: 3m16s
                chef: 1m52s
                chef-appbundle: 39s
                ruby-windows-devkit: 11s
              GitFetcher: 33s
              NetFetcher: 21s
              Project:
                chef: 2m22s
              Licensing: 16s
              Packager::MSI: 2m6s
          after (cleanup time): 7m37s
      solaris-10-i86pc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=i86pc,platform=solaris-10,project=chef,role=builder/194/
        duration: 6m55s
        steps:
          total: 6m55s
          before (setup time): 4m48s
          omnibus:
            total: 2m11s
            fetch:
              PathFetcher:
                chef: 23s
            build:
              total: 1m44s
              GitCache: 1m21s
              Software: 1m21s
              Builder:
                total: 1m13s
                chef: 37s
                chef-appbundle: 20s
              Project:
                chef: 23s
              Licensing: 10s
              Packager::Solaris: 13s
      aix-6.1-powerpc:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=powerpc,platform=aix-6.1,project=chef,role=builder/194/
        duration: 16m56s
        steps:
          total: 16m56s
          before (setup time): 2m13s
          omnibus:
            total: 10m3s
            fetch:
              PathFetcher:
                total: 51s
                chef: 51s
                chef-appbundle: 13s
            build:
              total: 9m2s
              GitCache: 2m25s
              Software: 2m25s
              Builder:
                total: 2m15s
                chef: 1m11s
                chef-appbundle: 49s
              Project:
                chef: 6m37s
              Licensing: 10s
              Packager::BFF: 6m26s
          after (cleanup time): 4m40s
      el-7-ppc64:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=ppc64,platform=el-7,project=chef,role=builder/194/
        duration: 7m34s
        steps:
          total: 7m34s
          before (setup time): 5m12s
          omnibus:
            total: 2m48s
            fetch:
              PathFetcher:
                chef: 17s
            build:
              total: 2m28s
              GitCache: 57s
              Software: 57s
              Builder:
                total: 48s
                chef: 25s
                chef-appbundle: 18s
              Project:
                chef: 1m31s
              Licensing: 11s
              Packager::RPM: 1m15s
          after (cleanup time): "-25s"
      el-7-ppc64le:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=ppc64le,platform=el-7,project=chef,role=builder/194/
        duration: 8m5s
        steps:
          total: 8m5s
          before (setup time): 5m45s
          omnibus:
            total: 2m45s
            fetch:
              PathFetcher:
                chef: 18s
            build:
              total: 2m22s
              GitCache: 58s
              Software: 58s
              Builder:
                total: 49s
                chef: 27s
                chef-appbundle: 18s
              Project:
                chef: 1m24s
              Licensing: 13s
              Packager::RPM: 1m7s
          after (cleanup time): "-25s"
      ubuntu-14.04-ppc64le:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=ppc64le,platform=ubuntu-14.04,project=chef,role=builder/194/
        duration: 3m20s
        steps:
          total: 3m20s
          before (setup time): 1m15s
          omnibus:
            total: 2m33s
            fetch:
              PathFetcher:
                chef: 19s
            build:
              total: 2m11s
              GitCache: 56s
              Software: 55s
              Builder:
                total: 49s
                chef: 27s
                chef-appbundle: 18s
              Project:
                chef: 1m15s
              Licensing: 10s
              Packager::DEB: 59s
          after (cleanup time): "-27s"
      solaris-10-sun4v:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=sun4v,platform=solaris-10,project=chef,role=builder/194/
        duration: 32m1s
        steps:
          total: 32m1s
          before (setup time): 5m45s
          omnibus:
            total: 24m34s
            fetch:
              total: 6m41s
              Software:
                total: 27s
                chef: 19s
                config_guess: 18s
                cacerts: 18s
                pkg-config-lite: 17s
                chef-appbundle: 15s
                chef-gem-ffi: 15s
                chef-gem-ruby-shadow: 17s
                clean-static-libs: 10s
                after (cleanup time): "-10s"
              NullFetcher: 19s
              PathFetcher:
                total: 6m16s
                chef: 6m16s
                chef-appbundle: 1m17s
            build:
              total: 17m14s
              GitCache: 15m4s
              Software: 15m4s
              Builder:
                total: 14m19s
                chef: 7m32s
                chef-appbundle: 5m44s
                gem-permissions: 11s
              GitFetcher: 24s
              Project:
                chef: 2m10s
              Licensing: 15s
              Packager::Solaris: 1m55s
          after (cleanup time): 1m42s
      debian-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=debian-6,project=chef,role=builder/194/
        duration: 10m13s
        steps:
          total: 10m13s
          before (setup time): 4m30s
          omnibus:
            total: 6m8s
            fetch:
              PathFetcher:
                chef: 42s
            build:
              total: 5m17s
              GitCache: 2m34s
              Software: 2m33s
              Builder:
                total: 2m14s
                chef: 1m16s
                chef-appbundle: 43s
              Project:
                chef: 2m43s
              Licensing: 11s
              HealthCheck: 20s
              Packager::DEB: 2m12s
          after (cleanup time): "-24s"
      el-5:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=el-5,project=chef,role=builder/194/
        duration: 8m46s
        steps:
          total: 8m46s
          before (setup time): 2m30s
          omnibus:
            total: 6m38s
            fetch:
              total: 47s
              NullFetcher:
                chef-complete: 11s
                after (cleanup time): "-11s"
              PathFetcher:
                chef: 44s
            build:
              total: 5m45s
              GitCache: 2m28s
              Software: 2m27s
              Builder:
                total: 2m11s
                chef: 1m14s
                chef-appbundle: 40s
              Project:
                chef: 3m17s
              Licensing: 12s
              HealthCheck: 22s
              Packager::RPM: 2m43s
          after (cleanup time): "-21s"
      el-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=el-6,project=chef,role=builder/194/
        duration: 9m29s
        steps:
          total: 9m29s
          before (setup time): 12m8s
          omnibus:
            total: 7m4s
            fetch:
              total: 48s
              NullFetcher:
                chef-complete: 11s
                after (cleanup time): "-11s"
              PathFetcher:
                chef: 44s
            build:
              total: 6m11s
              GitCache: 2m51s
              Software: 2m51s
              Builder:
                total: 2m28s
                chef: 1m22s
                chef-appbundle: 46s
              Project:
                chef: 3m19s
              Licensing: 18s
              HealthCheck: 22s
              Packager::RPM: 2m39s
          after (cleanup time): "-9m42s"
      el-7:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=el-7,project=chef,role=builder/194/
        duration: 6m43s
        steps:
          total: 6m43s
          before (setup time): 2m22s
          omnibus:
            total: 4m47s
            fetch:
              PathFetcher:
                chef: 32s
            build:
              total: 4m9s
              GitCache: 1m36s
              Software: 1m36s
              Builder:
                total: 1m26s
                chef: 48s
                chef-appbundle: 30s
              Project:
                chef: 2m33s
              Licensing: 12s
              Packager::RPM: 2m13s
          after (cleanup time): "-26s"
      freebsd-10:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=freebsd-10,project=chef,role=builder/194/
        duration: 8m28s
        steps:
          total: 8m28s
          before (setup time): 2m23s
          omnibus:
            total: 5m50s
            fetch:
              PathFetcher:
                total: 51s
                chef: 51s
                chef-appbundle: 11s
            build:
              total: 4m50s
              GitCache: 2m49s
              Software: 2m49s
              Builder:
                total: 2m32s
                chef: 1m27s
                chef-appbundle: 46s
              Project:
                chef: 2m1s
              Licensing: 12s
              Packager::Makeself: 1m49s
          after (cleanup time): 15s
      freebsd-9:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=freebsd-9,project=chef,role=builder/194/
        duration: 9m24s
        steps:
          total: 9m24s
          before (setup time): 9m48s
          omnibus:
            total: 6m48s
            fetch:
              PathFetcher:
                chef: 1m
            build:
              total: 5m37s
              GitCache: 3m6s
              Software: 3m5s
              Builder:
                total: 2m47s
                chef: 1m38s
                chef-appbundle: 49s
              Project:
                chef: 2m31s
              Licensing: 13s
              Packager::Makeself: 2m18s
          after (cleanup time): "-7m11s"
      ios_xr-6:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=ios_xr-6,project=chef,role=builder/194/
        duration: 5m13s
        steps:
          total: 5m13s
          before (setup time): "-10m43s"
          omnibus:
            total: 3m54s
            fetch:
              PathFetcher:
                chef: 21s
            build:
              total: 3m28s
              GitCache: 2m
              Software: 2m
              Builder:
                total: 1m51s
                chef: 52s
                chef-appbundle: 54s
              Project:
                chef: 1m28s
              Packager::RPM: 1m13s
          after (cleanup time): 12m2s
      mac_os_x-10.9:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=mac_os_x-10.9,project=chef,role=builder/194/
        duration: 3m44s
        steps:
          total: 3m44s
          before (setup time): 4m9s
          omnibus:
            total: 2m18s
            fetch:
              PathFetcher:
                chef: 15s
            build:
              total: 2m
              GitCache: 1m6s
              Software: 1m6s
              Builder:
                total: 56s
                chef: 35s
                chef-appbundle: 15s
              Project:
                chef: 54s
              Licensing: 11s
              Packager::PKG: 16s
              Compressor::DMG: 27s
          after (cleanup time): "-2m42s"
      nexus-7:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=nexus-7,project=chef,role=builder/194/
        duration: 5m53s
        steps:
          total: 5m53s
          before (setup time): "-12m18s"
          omnibus:
            total: 4m23s
            fetch:
              PathFetcher:
                chef: 21s
            build:
              total: 3m57s
              GitCache: 2m14s
              Software: 2m14s
              Builder:
                total: 2m5s
                chef: 1m41s
                chef-appbundle: 18s
              Project:
                chef: 1m43s
              Licensing: 10s
              Packager::RPM: 1m28s
          after (cleanup time): 13m49s
      ubuntu-12.04:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=ubuntu-12.04,project=chef,role=builder/194/
        duration: 7m27s
        steps:
          total: 7m27s
          before (setup time): 2m35s
          omnibus:
            total: 5m19s
            fetch:
              PathFetcher:
                chef: 45s
            build:
              total: 4m26s
              GitCache: 1m52s
              Software: 1m52s
              Builder:
                total: 1m43s
                chef: 1m1s
                chef-appbundle: 35s
              Project:
                chef: 2m34s
              Licensing: 11s
              Packager::DEB: 2m14s
          after (cleanup time): "-27s"
      windows-2008r2:
        result: SUCCESS
        url: http://manhattan.ci.chef.co/job/chef-build/architecture=x86_64,platform=windows-2008r2,project=chef,role=builder/194/
        duration: 12m14s
        steps:
          total: 12m14s
          before (setup time): "-4m54s"
          omnibus:
            total: 8m16s
            fetch:
              PathFetcher:
                chef: 29s
            build:
              total: 7m40s
              GitCache:
                total: 3m52s
                chef 2: 12s
                ruby-windows-devkit: 17s
              Software: 3m50s
              Builder:
                total: 3m25s
                chef: 1m47s
                chef-appbundle: 38s
                ruby-windows-devkit: 17s
              GitFetcher: 42s
              NetFetcher: 34s
              Project:
                chef: 3m48s
              Licensing: 16s
              Packager::MSI: 3m31s
          after (cleanup time): 8m53s
  chef-trigger-ad_hoc:
    result: SUCCESS
    url: http://manhattan.ci.chef.co/job/chef-trigger-ad_hoc/90/
    duration: 23s
