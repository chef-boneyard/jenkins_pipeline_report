---
result: FAILURE
timestamp: '2016-04-21T15:40:09-07:00'
duration: 11536.36
url: http://wilson.ci.chef.co/job/chef-server-12-trigger-git_poll/93/
version: 12.5.0+20160421224034
git_ref: 
git_commit: 6af17101f5536b48b3689abacc2539600ead0879
failures:
  chef-server-12-test unknown - unknown: el-5
stages:
  chef-server-12-test:
    result: FAILURE
    failures:
      unknown - unknown: el-5
    timestamp: '2016-04-21T16:12:21-07:00'
    duration: 9619.189
    url: http://wilson.ci.chef.co/job/chef-server-12-test/198/
    parameters:
      OMNIBUS_BUILD_VERSION: 12.5.0+20160421224034
      DELIVERY_CHANGE: ''
      DELIVERY_SHA: ''
      GIT_REF: origin/master
      APPEND_TIMESTAMP: true
      EXPIRE_CACHE: 'false'
      RELEASE_BUILD: 'false'
      PIPELINE_NAME: chef-server-12
      GIT_COMMIT: 6af17101f5536b48b3689abacc2539600ead0879
      PROJECT: chef-server
      PROMOTE: 'true'
      PIPELINE_TRIGGER_BUILD_NUMBER: '93'
      GIT_BRANCH: origin/master
      PIPELINE_TRIGGER_JOB_NAME: chef-server-12-trigger-git_poll
      BUILD_USER: SCMTrigger
      PLATFORM_MAPPINGS_JSON: |-
        {
          "build_to_test": {
            "ubuntu-10.04": [
              "ubuntu-10.04",
              "ubuntu-12.04",
              "ubuntu-14.04"
            ],
            "el-5": [
              "el-5"
            ],
            "el-6": [
              "el-6"
            ],
            "el-7": [
              "el-7"
            ]
          },
          "test_to_build": {
            "ubuntu-10.04": "ubuntu-10.04",
            "ubuntu-12.04": "ubuntu-10.04",
            "ubuntu-14.04": "ubuntu-10.04",
            "el-5": "el-5",
            "el-6": "el-6",
            "el-7": "el-7"
          }
        }
      PIPELINE_BUILD_JOB_NUMBER: '236'
      PIPELINE_BUILD_JOB_NAME: chef-server-12-build
      PIPELINE_RUN_FINGERPRINT: jenkins-chef-server-12-trigger-git_poll-93/93/2016-04-21_22-40-09
    runs:
      el-5:
        result: FAILURE
        timestamp: '2016-04-21T16:12:21-07:00'
        duration: 3285.551
        builtOn: chef-server-rhel-5-tester-4e6602
        url: http://wilson.ci.chef.co/job/chef-server-12-test/architecture=x86_64,platform=el-5,project=chef-server,role=tester/198/
        failureCause:
          jenkinsBuildStep: Invoke XShell command
          suspiciousBlocks:
            388: "[2016-04-21T21:03:23-04:00] INFO: GET /organizations/chef/nodes/ip-10-194-15-112.us-west-2.compute.internal\n[2016-04-21T21:03:23-04:00]
              INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-15-112.us-west-2.compute.internal>\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in
              `rescue in get_data'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in
              `get_data'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in
              `get'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in
              `call'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in
              `call'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in
              `block in app'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in
              `call'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in
              `handle_socketless_request'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in
              `request'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in
              `request'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http/socketless_chef_zero_client.rb:154:in
              `request'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:305:in
              `block in send_http_request'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:336:in
              `block in retrying_http_errors'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in
              `loop'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in
              `retrying_http_errors'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:299:in
              `send_http_request'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:144:in
              `request'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:111:in
              `get'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:604:in
              `load'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:588:in
              `find_or_create'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/policy_builder/dynamic.rb:72:in
              `load_node'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:465:in
              `load_node'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:267:in
              `run'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:267:in
              `run_with_graceful_exit_option'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:243:in
              `block in run_chef_client'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/local_mode.rb:44:in
              `with_server_connectivity'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:226:in
              `run_chef_client'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application/client.rb:419:in
              `run_application'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:58:in
              `run'\n/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/bin/chef-client:26:in
              `<top (required)>'\n/opt/opscode/embedded/bin/chef-client:23:in `load'\n/opt/opscode/embedded/bin/chef-client:23:in
              `<main>'\n[2016-04-21T21:03:23-04:00] INFO: \n--- RESPONSE (404) ---\n"
            4097: |2

                        if attempt == 120
                            raise 'ERROR: Timeout waiting for DRBD mount to return'
                        end
                        print '.'
            4756: |2+
                  rescue Exception => e
                    message = <<-EOF
              ERROR:
              The /var/opt/opscode/upgrades/migration-level file is missing or corrupt!  Please read http://docs.chef.io/install_server_pre.html and correct this file before proceeding

            4916: |
              if File.exists?("/etc/opscode/chef-server.json") &&
                  !(File.exist?("/etc/opscode/private-chef.rb") || File.exist?("/etc/opscode/chef-server.rb"))
                Chef::Log.fatal("Configuration via /etc/opscode/chef-server.json is not supported. Please use /etc/opscode/chef-server.rb")
                exit!(1)
              else
            7068: |2
                      `echo 'SELECT * FROM pg_database;' | su - #{node['private_chef']['postgresql']['username']} -c '/opt/opscode/embedded/bin/psql -p #{node['private_chef']['postgresql']['port']} -U #{node['private_chef']['postgresql']['db_superuser']} postgres -t -A'`
                if $?.exitstatus != 0
                        Chef::Log.fatal("Could not connect to database, retrying in 10 seconds.")
                        sleep 10
                      else
            7077: |2

                    unless connectable
                      Chef::Log.fatal <<-ERR

              Could not connect to the postgresql database.
            7422: |2
                      elsif PrivateChef['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            7435: |2
                  def generate_hex_if_bootstrap(chars, ha_guard)
                    if ha_guard
                      Chef::Log.fatal("Attempt to create secrets on non-bootstrap node in an H/A topology, please copy /etc/opscode/* around instead.")
                      exit 44
                    end
            7824: |2
                  def assert_server_config(node_name)
                    unless PrivateChef["servers"].key?(node_name)
                      Chef::Log.fatal <<-EOF
              No server configuration found for "#{node_name}" in /etc/opscode/chef-server.rb.
              Server configuration exists for the following hostnames:
            7851: |2
                        gen_api_fqdn
                      else
                        Chef::Log.fatal("I do not understand topology #{PrivateChef.topology} - try standalone, manual, ha, or tier.")
                        exit 55
                      end
            8576: |2
                    # use of exit! prevents exit handlers from running, ensuring the last thing
                    # the customer sees is the descriptive error we've provided.
                    Chef::Log.fatal("\n\n#{LINE_SEP}\n#{e.message}#{LINE_SEP}")
                    exit! 128
                  end
            9441: |2

                  if !connected
                    Chef::Log.fatal("HAProxy status socket never appeared properly!")
                    Chef::Log.fatal("See /var/log/opscode/haproxy/current for more information")
                    Kernel.exit! 1
                  end
            9492: |2

                  if !stable
                    Chef::Log.fatal("HAProxy still showing multiple active backends")
                    Chef::Log.fatal("Please check /var/log/opscode/haproxy/current locally for problems.")
                    Chef::Log.fatal("Please check your backend cluster's status for problems.")
                    Kernel.exit! 1
                  end
            17339: |2+

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------

            17410: |2+
                        #   error
                        #   log
                        #   fatal
                        #   panic

            17424: |2+
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)

            17613: |2+

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------

            19825: |2

                if [ ! -d "$OCF_ROOT" ]; then
                  ha_log "ERROR: OCF_ROOT points to non-directory $OCF_ROOT."
                  exit $OCF_ERR_GENERIC
                fi
            19845: |2

                if [ -z "$OCF_RESOURCE_INSTANCE" ]; then
                  ha_log "ERROR: Need to tell us our resource instance name."
                  exit $OCF_ERR_ARGS
                fi
            19882: |2
                        loglevel=notice
                        case "${*}" in
                          *ERROR*)    loglevel=err;;
                          *WARN*)   loglevel=warning;;
                          *INFO*|info)  loglevel=info;;
            19981: |2
                      case "${__OCF_PRIO}" in
                        crit) __OCF_PRIO="CRIT";;
                        err)  __OCF_PRIO="ERROR";;
                        warn) __OCF_PRIO="WARNING";;
                        info) __OCF_PRIO="INFO";;
            30075: |2

                if node['fqdn'].nil?
                  Chef::Log.fatal("This node's fqdn is set to nil, so a read token cannot be issued!" \
                                  "Please change your fqdn settings.")
                end
            46841: |
              rspec ./spec/api/clients/complete_endpoint_spec.rb[1:4:2:3:5:1] # Client API endpoint PUT /clients/<name> as an admin requestor with another normal client when updating public_key should respond with 200 OK and update the public key

              Build step 'Invoke XShell command' marked build as failure
              Performing Post build task...
              Match found for : : True
        failureReason:
          jenkinsBuildStep: Invoke XShell command
          stacktrace:
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in
            `rescue in get_data'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in
            `get_data'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in
            `get'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in
            `call'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in
            `call'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in
            `block in app'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in
            `call'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in
            `handle_socketless_request'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in
            `request'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in
            `request'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http/socketless_chef_zero_client.rb:154:in
            `request'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:305:in
            `block in send_http_request'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:336:in
            `block in retrying_http_errors'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in
            `loop'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in
            `retrying_http_errors'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:299:in
            `send_http_request'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:144:in
            `request'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:111:in
            `get'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:604:in
            `load'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:588:in
            `find_or_create'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/policy_builder/dynamic.rb:72:in
            `load_node'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:465:in
            `load_node'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:267:in
            `run'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:267:in
            `run_with_graceful_exit_option'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:243:in
            `block in run_chef_client'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/local_mode.rb:44:in
            `with_server_connectivity'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:226:in
            `run_chef_client'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application/client.rb:419:in
            `run_application'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:58:in
            `run'"
          - "/opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/bin/chef-client:26:in
            `<top (required)>'"
          - "/opt/opscode/embedded/bin/chef-client:23:in `load'"
          - "/opt/opscode/embedded/bin/chef-client:23:in `<main>'"
        omnibusTiming: {}
      el-6:
        result: SUCCESS
        timestamp: '2016-04-21T16:12:21-07:00'
        duration: 3152.817
        builtOn: chef-server-rhel-6-tester-8151c8
        url: http://wilson.ci.chef.co/job/chef-server-12-test/architecture=x86_64,platform=el-6,project=chef-server,role=tester/198/
        omnibusTiming: {}
      el-7:
        result: SUCCESS
        timestamp: '2016-04-21T16:12:21-07:00'
        duration: 2439.275
        builtOn: chef-server-rhel-7-tester-d586ce
        url: http://wilson.ci.chef.co/job/chef-server-12-test/architecture=x86_64,platform=el-7,project=chef-server,role=tester/198/
        omnibusTiming: {}
      ubuntu-10.04:
        result: SUCCESS
        timestamp: '2016-04-21T16:12:21-07:00'
        duration: 2795.309
        builtOn: chef-server-ubuntu-10.04-tester-f80d1f
        url: http://wilson.ci.chef.co/job/chef-server-12-test/architecture=x86_64,platform=ubuntu-10.04,project=chef-server,role=tester/198/
        omnibusTiming: {}
      ubuntu-12.04:
        result: SUCCESS
        timestamp: '2016-04-21T16:12:21-07:00'
        duration: 2817.515
        builtOn: chef-server-ubuntu-12.04-tester-28c735
        url: http://wilson.ci.chef.co/job/chef-server-12-test/architecture=x86_64,platform=ubuntu-12.04,project=chef-server,role=tester/198/
        omnibusTiming: {}
      ubuntu-14.04:
        result: SUCCESS
        timestamp: '2016-04-21T16:12:21-07:00'
        duration: 2731.268
        builtOn: chef-server-ubuntu-14.04-tester-69fc04
        url: http://wilson.ci.chef.co/job/chef-server-12-test/architecture=x86_64,platform=ubuntu-14.04,project=chef-server,role=tester/198/
        omnibusTiming: {}
  chef-server-12-build:
    result: SUCCESS
    timestamp: '2016-04-21T15:40:34-07:00'
    duration: 1900.316
    url: http://wilson.ci.chef.co/job/chef-server-12-build/236/
    parameters:
      GIT_REF: origin/master
      APPEND_TIMESTAMP: true
      DELIVERY_CHANGE: ''
      DELIVERY_SHA: ''
      EXPIRE_CACHE: 'false'
      RELEASE_BUILD: 'false'
      PIPELINE_NAME: chef-server-12
      GIT_COMMIT: 6af17101f5536b48b3689abacc2539600ead0879
      PROJECT: chef-server
      PROMOTE: 'true'
      PIPELINE_TRIGGER_BUILD_NUMBER: '93'
      GIT_BRANCH: origin/master
      PIPELINE_TRIGGER_JOB_NAME: chef-server-12-trigger-git_poll
      BUILD_USER: SCMTrigger
    runs:
      el-5:
        result: SUCCESS
        timestamp: '2016-04-21T15:40:34-07:00'
        duration: 1526.887
        builtOn: chef-server-rhel-5-builder-dd11b6
        url: http://wilson.ci.chef.co/job/chef-server-12-build/architecture=x86_64,platform=el-5,project=chef-server,role=builder/236/
        omnibusTiming: {}
      el-6:
        result: SUCCESS
        timestamp: '2016-04-21T15:40:34-07:00'
        duration: 1423.171
        builtOn: chef-server-rhel-6-builder-f4b641
        url: http://wilson.ci.chef.co/job/chef-server-12-build/architecture=x86_64,platform=el-6,project=chef-server,role=builder/236/
        omnibusTiming: {}
      el-7:
        result: SUCCESS
        timestamp: '2016-04-21T15:40:34-07:00'
        duration: 1393.05
        builtOn: chef-server-rhel-7-builder-1d11c3
        url: http://wilson.ci.chef.co/job/chef-server-12-build/architecture=x86_64,platform=el-7,project=chef-server,role=builder/236/
        omnibusTiming: {}
      ubuntu-10.04:
        result: SUCCESS
        timestamp: '2016-04-21T15:40:34-07:00'
        duration: 1236.638
        builtOn: chef-server-ubuntu-10.04-builder-6f743f
        url: http://wilson.ci.chef.co/job/chef-server-12-build/architecture=x86_64,platform=ubuntu-10.04,project=chef-server,role=builder/236/
        omnibusTiming: {}
  chef-server-12-trigger-git_poll:
    result: SUCCESS
    timestamp: '2016-04-21T15:40:09-07:00'
    duration: 16.855
    url: http://wilson.ci.chef.co/job/chef-server-12-trigger-git_poll/93/
    causes:
    - shortDescription: Started by an SCM change
    parameters: {}
    runs: {}
