---
result: FAILURE
timestamp: '2016-04-13T10:22:28-07:00'
duration: 5424.393
triggeredBy: mwrock
url: http://manhattan.ci.chef.co/job/chefdk-trigger-ad_hoc/151/
version: 0.13.19+20160413172241
git_ref: master
git_commit: 577815f788a384c051fff7bb5c7cc703882f9669
failures:
  chefdk-test code - chef-acceptance[trivial (provision)]: acceptance
stages:
  chefdk-test:
    result: FAILURE
    failures:
      code - chef-acceptance[trivial (provision)]: acceptance
    timestamp: '2016-04-13T10:54:47-07:00'
    duration: 3500.07
    url: http://manhattan.ci.chef.co/job/chefdk-test/102/
    parameters:
      OMNIBUS_BUILD_VERSION: 0.13.19+20160413172241
      DELIVERY_CHANGE: ''
      DELIVERY_SHA: ''
      GIT_REF: master
      APPEND_TIMESTAMP: true
      EXPIRE_CACHE: false
      RELEASE_BUILD: 'false'
      PIPELINE_NAME: chefdk
      GIT_COMMIT: 577815f788a384c051fff7bb5c7cc703882f9669
      PROJECT: chefdk
      PROMOTE: 'false'
      PIPELINE_TRIGGER_BUILD_NUMBER: '151'
      ADHOC_BUILD: 'true'
      GIT_BRANCH: origin/master
      PIPELINE_TRIGGER_JOB_NAME: chefdk-trigger-ad_hoc
      PLATFORM_MAPPINGS_JSON: |-
        {
          "build_to_test": {
            "debian-6": [
              "debian-6",
              "debian-7",
              "debian-8"
            ],
            "ubuntu-12.04": [
              "ubuntu-12.04",
              "ubuntu-14.04",
              "acceptance"
            ],
            "el-6": [
              "el-6"
            ],
            "el-7": [
              "el-7"
            ],
            "mac_os_x-10.9": [
              "mac_os_x-10.9",
              "mac_os_x-10.10",
              "mac_os_x-10.11"
            ],
            "windows-2008r2": [
              "windows-2008r2",
              "windows-2012",
              "windows-2012r2"
            ]
          },
          "test_to_build": {
            "debian-6": "debian-6",
            "debian-7": "debian-6",
            "debian-8": "debian-6",
            "ubuntu-12.04": "ubuntu-12.04",
            "ubuntu-14.04": "ubuntu-12.04",
            "acceptance": "ubuntu-12.04",
            "el-6": "el-6",
            "el-7": "el-7",
            "mac_os_x-10.9": "mac_os_x-10.9",
            "mac_os_x-10.10": "mac_os_x-10.9",
            "mac_os_x-10.11": "mac_os_x-10.9",
            "windows-2008r2": "windows-2008r2",
            "windows-2012": "windows-2008r2",
            "windows-2012r2": "windows-2008r2"
          }
        }
      PIPELINE_BUILD_JOB_NUMBER: '245'
      PIPELINE_BUILD_JOB_NAME: chefdk-build
      PIPELINE_RUN_FINGERPRINT: jenkins-chefdk-trigger-ad_hoc-151/151/2016-04-13_17-22-28
    runs:
      acceptance:
        result: FAILURE
        timestamp: '2016-04-13T10:54:47-07:00'
        duration: 3499.794
        builtOn: chefdk-ubuntu-14.04-acceptance-6eb047
        url: http://manhattan.ci.chef.co/job/chefdk-test/architecture=x86_64,platform=acceptance,project=chefdk,role=tester/102/
        failureCause:
          cause: chef-acceptance[trivial (provision)]
          jenkinsBuildStep: Invoke XShell command
          category: code
          suspiciousBlocks:
            911: |2
                                       Running handlers complete
                                       Chef Client finished, 23/54 resources updated in 37 seconds
              TOP-COOKBOOKS::PROVISION::[2016-04-13 17:58:24 +0000]                          [2016-04-13T17:58:24+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json
              TOP-COOKBOOKS::PROVISION::[2016-04-13 17:58:25 +0000]                          Finished converging <docker-default-ubuntu-1404> (1m13.46s).
              TOP-COOKBOOKS::PROVISION::[2016-04-13 17:58:25 +0000]                   -----> Kitchen is finished. (2m9.69s)
            1075: |2
                                       Running handlers complete
                                       Chef Client finished, 7/14 resources updated in 17 seconds
              TOP-COOKBOOKS::PROVISION::[2016-04-13 18:00:30 +0000]                          [2016-04-13T18:00:30+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json
              TOP-COOKBOOKS::PROVISION::[2016-04-13 18:00:30 +0000]                          Finished converging <git-default-ubuntu-1404> (0m52.78s).
              TOP-COOKBOOKS::PROVISION::[2016-04-13 18:00:33 +0000]                          Waited 105/300s for instance <i-4abdb38d> to become ready.
            1166: |
              TOP-COOKBOOKS::PROVISION::[2016-04-13 18:05:40 +0000]                          Running handlers complete
                                       Chef Client finished, 7/9 resources updated in 01 minutes 19 seconds
                                       [2016-04-13T18:05:40+00:00] ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json
              TOP-COOKBOOKS::PROVISION::[2016-04-13 18:05:40 +0000]                          Finished converging <git-default-windows-windows-2012r2> (3m21.60s).
              TOP-COOKBOOKS::PROVISION::[2016-04-13 18:05:40 +0000]                   -----> Kitchen is finished. (7m10.71s)
            2551: |2
                                       Chef Client finished, 94/112 resources updated in 47 seconds
                                         43/43 controls succeeded
                                       [2016-04-13T18:07:56+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json
              TOP-COOKBOOKS::PROVISION::[2016-04-13 18:07:57 +0000]                          Finished converging <learn-the-basics-ubuntu-default-ubuntu-1404> (1m14.25s).
                                -----> Kitchen is finished. (2m12.53s)
            3500: "                         Chef Client finished, 94/111 resources
              updated in 08 minutes 37 seconds\n                           43/43 controls
              succeeded\n                         [2016-04-13T18:22:30+00:00] ERROR:
              Failed \nTOP-COOKBOOKS::PROVISION::[2016-04-13 18:22:31 +0000] to post
              audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json\nTOP-COOKBOOKS::PROVISION::[2016-04-13
              18:22:31 +0000]                          Finished converging <learn-the-basics-windows-default-windows-2012r2>
              (10m52.81s).\n"
            3629: "TOP-COOKBOOKS::PROVISION::[2016-04-13 18:28:18 +0000]                          \n
              \                        Chef Client finished, 2/8 resources updated
              in 51 seconds\n                         [2016-04-13T18:28:17+00:00]
              ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json\nTOP-COOKBOOKS::PROVISION::[2016-04-13
              18:28:18 +0000]                          Finished converging <powershell-windows-2012r2>
              (2m42.62s).\n                  -----> Kitchen is finished. (5m42.70s)\n"
            3751: "TOP-COOKBOOKS::PROVISION::[2016-04-13 18:34:37 +0000]                          \nTOP-COOKBOOKS::PROVISION::[2016-04-13
              18:34:37 +0000]                          Chef Client finished, 1/3 resources
              updated in 01 minutes 36 seconds\nTOP-COOKBOOKS::PROVISION::[2016-04-13
              18:34:37 +0000]                          [2016-04-13T18:34:37+00:00]
              ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json\nTOP-COOKBOOKS::PROVISION::[2016-04-13
              18:34:37 +0000]                          Finished converging <iis-windows-2012r2>
              (3m22.34s).\nTOP-COOKBOOKS::PROVISION::[2016-04-13 18:34:37 +0000]                   ----->
              Kitchen is finished. (6m13.79s)\n"
            3936: |
              TOP-COOKBOOKS::PROVISION::[2016-04-13 18:41:26 +0000]                          Running handlers complete
              TOP-COOKBOOKS::PROVISION::[2016-04-13 18:41:26 +0000]                          Chef Client finished, 13/14 resources updated in 01 minutes 30 seconds
              TOP-COOKBOOKS::PROVISION::[2016-04-13 18:41:26 +0000]                          [2016-04-13T18:41:26+00:00] ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json
              TOP-COOKBOOKS::PROVISION::[2016-04-13 18:41:26 +0000]                          Finished converging <sql-server-windows-2012r2> (3m39.87s).
                                -----> Kitchen is finished. (6m44.27s)
            4436: |
              TOP-COOKBOOKS::PROVISION::[2016-04-13 18:49:53 +0000]                          Running handlers complete
              TOP-COOKBOOKS::PROVISION::[2016-04-13 18:49:53 +0000]                          Chef Client finished, 31/41 resources updated in 03 minutes 02 seconds
              TOP-COOKBOOKS::PROVISION::[2016-04-13 18:49:53 +0000]                          [2016-04-13T18:49:52+00:00] ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json
              TOP-COOKBOOKS::PROVISION::[2016-04-13 18:49:53 +0000]                          Finished converging <default-windows-2012r2> (5m2.72s).
              TOP-COOKBOOKS::PROVISION::[2016-04-13 18:49:53 +0000]                   -----> Kitchen is finished. (8m21.78s)
            4455: "TOP-COOKBOOKS::PROVISION::[2016-04-13 18:49:54 +0000] Chef Client
              finished, 26/33 resources updated in 53 minutes 55 seconds\nTOP-COOKBOOKS::PROVISION::[2016-04-13
              18:49:54 +0000] \nTOP-COOKBOOKS::PROVISION::[2016-04-13 18:49:54 +0000]
              [2016-04-13T18:49:54+00:00] ERROR: Failed to post audit report to server.
              Saving report to /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.9.38/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/failed-audit-data.json\nTOP-COOKBOOKS::VERIFY::[2016-04-13
              18:49:54 +0000] Initialized [.acceptance_logs/top-cookbooks/verify.log]
              logger...\nTOP-COOKBOOKS::VERIFY::[2016-04-13 18:49:57 +0000] Starting
              Chef Client, version 12.9.38\n"
            4669: "TOP-COOKBOOKS::VERIFY::[2016-04-13 18:50:39 +0000] Chef Client
              finished, 17/33 resources updated in 42 seconds\nTOP-COOKBOOKS::VERIFY::[2016-04-13
              18:50:39 +0000] \nTOP-COOKBOOKS::VERIFY::[2016-04-13 18:50:39 +0000]
              [2016-04-13T18:50:39+00:00] ERROR: Failed to post audit report to server.
              Saving report to /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.9.38/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/failed-audit-data.json\nTOP-COOKBOOKS::DESTROY::[2016-04-13
              18:50:41 +0000] Initialized [.acceptance_logs/top-cookbooks/destroy.log]
              logger...\nTOP-COOKBOOKS::DESTROY::[2016-04-13 18:50:44 +0000] Starting
              Chef Client, version 12.9.38\n"
            4846: "Running handlers complete\nChef Client finished, 17/33 resources
              updated in 43 seconds\n[2016-04-13T18:51:27+00:00] ERROR: Failed to
              post audit report to server. Saving report to /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.9.38/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/failed-audit-data.json\nCHEF-ACCEPTANCE::[2016-04-13
              18:51:28 +0000] \nCHEF-ACCEPTANCE::[2016-04-13 18:51:28 +0000] chef-acceptance
              run succeeded\n"
            5166: |2
                                rc=$?
                                # check for 404
                                grep "ERROR 404" $tmp_dir/stderr 2>&1 >/dev/null
                                if test $? -eq 0; then
                                  echo "ERROR 404"
                                  http_404_error
                                fi
            5190: |2
                                grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                                if test $? -eq 0; then
                                  echo "ERROR 404"
                                  http_404_error
                                fi
            5220: |2
                                grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                                if test $? -eq 0; then
                                  echo "ERROR 404"
                                  http_404_error
                                fi
            5241: |2
                                grep "HTTP Error 404" $tmp_dir/stderr 2>&1 >/dev/null
                                if test $? -eq 0; then
                                  echo "ERROR 404"
                                  http_404_error
                                fi
            5835: "                sudo -E /tmp/chef-installer.sh]\n                >>>>>>
              ----------------------\nTRIVIAL::PROVISION::[2016-04-13 18:52:53 +0000]
              \                zlib(finalizer): the stream was freed prematurely.\nTRIVIAL::PROVISION::[2016-04-13
              18:52:53 +0000]       \n      ================================================================================\n
              \     Error executing action `run` on resource 'execute[bundle exec
              kitchen setup  -c]'\n      ================================================================================\n
              \     \n      Mixlib::ShellOut::ShellCommandFailed\n      ------------------------------------\n
              \     Expected process to exit with [0], but received '10'\n      ----
              Begin output of bundle exec kitchen setup  -c ----\n      STDOUT: ----->
              Starting Kitchen (v1.7.2)\n      -----> Creating <chefdk-current-install-ubuntu-1404>...\n
              \            If you are not using an account that qualifies under the
              AWS\n      free-tier, you may be charged to run these suites. The charge\n
              \     should be minimal, but neither Test Kitchen nor its maintainers\n
              \     are responsible for your incurred costs.\n      \n             Instance
              <i-114148d6> requested.\n             Polling AWS for existence, attempt
              0...\n             Attempting to tag the instance, 0 retries\n             EC2
              instance <i-114148d6> created.\n             Waited 0/300s for instance
              <i-114148d6> to become ready.\n             Waited 5/300s for instance
              <i-114148d6> to become ready.\n             Waited 10/300s for instance
              <i-114148d6> to become ready.\n             Waited 15/300s for instance
              <i-114148d6> to become ready.\n             Waited 20/300s for instance
              <i-114148d6> to become ready.\n             Waited 25/300s for instance
              <i-114148d6> to become ready.\n             EC2 instance <i-114148d6>
              ready.\n             Waiting for SSH service on 10.194.14.126:22, retrying
              in 3 seconds\n             Waiting for SSH service on 10.194.14.126:22,
              retrying in 3 seconds\n             Waiting for SSH service on 10.194.14.126:22,
              retrying in 3 seconds\n             Waiting for SSH service on 10.194.14.126:22,
              retrying in 3 seconds\n             [SSH] Established\n             Finished
              creating <chefdk-current-install-ubuntu-1404> (0m59.68s).\n      ----->
              Converging <chefdk-current-install-ubuntu-1404>...\n             Preparing
              files for transfer\n             Preparing dna.json\n             Berksfile,
              Cheffile, cookbooks/, or metadata.rb not found so Chef will run with
              effectively no cookbooks. Is this intended?\n             Removing non-cookbook
              files before transfer\n             Preparing validation.pem\n             Preparing
              client.rb\n             ubuntu 14.04 x86_64\n             downloading
              http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb\n
              \            http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json\n
              \              to file /tmp/install.sh.1321/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json\n
              \            trying wget...\n             trying curl...\n             /tmp/chef-installer.sh:
              line 140: http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json:
              No such file or directory\n             grep: /tmp/install.sh.1321/stderr:
              No such file or directory\n             trying perl...\n             /tmp/chef-installer.sh:
              line 170: http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json:
              No such file or directory\n             grep: /tmp/install.sh.1321/stderr:
              No such file or directory\n             trying python...\n             /tmp/chef-installer.sh:
              line 191: http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json:
              No such file or directory\n             grep: /tmp/install.sh.1321/stderr:
              No such file or directory\n             Unable to retrieve a valid package!\n
              \            Version: latest\n             \n             Please file
              a Bug Report at https://github.com/chef/omnitruck/issues/new\n             Alternatively,
              feel f\nTRIVIAL::PROVISION::[2016-04-13 18:52:53 +0000] ree to open
              a Support Ticket at https://www.chef.io/support/tickets\n             More
              Chef support resources can be found at https://www.chef.io/support\n"
            6033: |2
                      rc=$?
                      # check for 404
                      grep "ERROR 404" $tmp_dir/stderr 2>&1 >/dev/null
                      if test $? -eq 0; then
                        echo "ERROR 404"
                        http_404_error
                      fi
            6056: |2
                      grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                      if test $? -eq 0; then
                        echo "ERROR 404"
                        http_404_error
                      fi
            6086: |2
                      grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                      if test $? -eq 0; then
                        echo "ERROR 404"
                        http_404_error
                      fi
            6107: "        grep \"HTTP Error 404\" $tmp_dir/stderr 2>&1 >/dev/null\n
              \       if test $? -eq 0; then\n          echo \"ERROR 404\"\n          \nTRIVIAL::PROVISION::[2016-04-13
              18:52:53 +0000] http_404_error\n"
            6700: |2
                    sudo -E /tmp/chef-installer.sh]
                    >>>>>> ----------------------
                    zlib(finalizer): the stream was freed prematurely.
                    ---- End output of bundle exec kitchen setup  -c ----
                    Ran bundle exec kitchen setup  -c returned 10
            6950: |2
                    rc=$?
                    # check for 404
                    grep "ERROR 404" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi
            6973: |2
                    grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi
            7003: |2
                    grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi
            7025: |2
                    grep "HTTP Error 404" $tmp_dir/stderr 2>&1 >/dev/null
                    if test $? -eq 0; then
                      echo "ERROR 404"
                      http_404_error
                    fi
            7617: |2
                  sudo -E /tmp/chef-installer.sh]
                  >>>>>> ----------------------
                  zlib(finalizer): the stream was freed prematurely.
                  ---- End output of bundle exec kitchen setup  -c ----
                  Ran bundle exec kitchen setup  -c returned 10
            7659: "TRIVIAL::PROVISION::[2016-04-13 18:52:54 +0000] Running handlers:\nTRIVIAL::PROVISION::[2016-04-13
              18:52:54 +0000] \nTRIVIAL::PROVISION::[2016-04-13 18:52:54 +0000] [2016-04-13T18:52:54+00:00]
              ERROR: Running exception handlers\nTRIVIAL::PROVISION::[2016-04-13 18:52:54
              +0000] Running handlers complete\nTRIVIAL::PROVISION::[2016-04-13 18:52:54
              +0000] [2016-04-13T18:52:54+00:00] ERROR: Exception handlers complete\nTRIVIAL::PROVISION::[2016-04-13
              18:52:54 +0000] Chef Client failed. 0 resources updated in 01 minutes
              06 seconds\nTRIVIAL::PROVISION::[2016-04-13 18:52:54 +0000] \nTRIVIAL::PROVISION::[2016-04-13
              18:52:54 +0000] [2016-04-13T18:52:54+00:00] ERROR: Failed to post audit
              report to server. Saving report to /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-dk-0.13.19/acceptance/trivial/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/failed-audit-data.json\nTRIVIAL::PROVISION::[2016-04-13
              18:52:54 +0000] [2016-04-13T18:52:54+00:00] FATAL: Stacktrace dumped
              to /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-dk-0.13.19/acceptance/trivial/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/chef-stacktrace.out\nTRIVIAL::PROVISION::[2016-04-13
              18:52:54 +0000] [2016-04-13T18:52:54+00:00] FATAL: Please provide the
              contents of the stacktrace.out file if you file a bug report\nTRIVIAL::PROVISION::[2016-04-13
              18:52:54 +0000] [2016-04-13T18:52:54+00:00] ERROR: Found 1 errors, they
              are stored in the backtrace\nTRIVIAL::PROVISION::[2016-04-13 18:52:56
              +0000] [2016-04-13T18:52:56+00:00] FATAL: Chef::Exceptions::ChildConvergeError:
              Chef run process exited unsuccessfully (exit code 1)\nCHEF-ACCEPTANCE::[2016-04-13
              18:52:56 +0000] Encountered an error running the recipe provision: Expected
              process to exit with [0], but received '1'\n---- Begin output of chef-client
              -z -c /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-dk-0.13.19/acceptance/trivial/.acceptance/acceptance-cookbook/tmp/.chef/config.rb
              --force-formatter -j /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-dk-0.13.19/acceptance/trivial/.acceptance/acceptance-cookbook/tmp/dna.json
              -o acceptance-cookbook::provision --no-color ----\n"
            7871: |2
                                rc=$?
                                # check for 404
                                grep "ERROR 404" $tmp_dir/stderr 2>&1 >/dev/null
                                if test $? -eq 0; then
                                  echo "ERROR 404"
                                  http_404_error
                                fi
            7894: |2
                                grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                                if test $? -eq 0; then
                                  echo "ERROR 404"
                                  http_404_error
                                fi
            7924: |2
                                grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
                                if test $? -eq 0; then
                                  echo "ERROR 404"
                                  http_404_error
                                fi
            7945: |2
                                grep "HTTP Error 404" $tmp_dir/stderr 2>&1 >/dev/null
                                if test $? -eq 0; then
                                  echo "ERROR 404"
                                  http_404_error
                                fi
            8531: "                sudo -E /tmp/chef-installer.sh]\n                >>>>>>
              ----------------------\n                zlib(finalizer): the stream
              was freed prematurely.\n      \n      ================================================================================\n
              \     Error executing action `run` on resource 'execute[bundle exec
              kitchen setup  -c]'\n      ================================================================================\n
              \     \n      Mixlib::ShellOut::ShellCommandFailed\n      ------------------------------------\n
              \     Expected process to exit with [0], but received '10'\n      ----
              Begin output of bundle exec kitchen setup  -c ----\n      STDOUT: ----->
              Starting Kitchen (v1.7.2)\n      -----> Creating <chefdk-current-install-ubuntu-1404>...\n
              \            If you are not using an account that qualifies under the
              AWS\n      free-tier, you may be charged to run these suites. The charge\n
              \     should be minimal, but neither Test Kitchen nor its maintainers\n
              \     are responsible for your incurred costs.\n      \n             Instance
              <i-114148d6> requested.\n             Polling AWS for existence, attempt
              0...\n             Attempting to tag the instance, 0 retries\n             EC2
              instance <i-114148d6> created.\n             Waited 0/300s for instance
              <i-114148d6> to become ready.\n             Waited 5/300s for instance
              <i-114148d6> to become ready.\n             Waited 10/300s for instance
              <i-114148d6> to become ready.\n             Waited 15/300s for instance
              <i-114148d6> to become ready.\n             Waited 20/300s for instance
              <i-114148d6> to become ready.\n             Waited 25/300s for instance
              <i-114148d6> to become ready.\n             EC2 instance <i-114148d6>
              ready.\n             Waiting for SSH service on 10.194.14.126:22, retrying
              in 3 seconds\n             Waiting for SSH service on 10.194.14.126:22,
              retrying in 3 seconds\n             Waiting for SSH service on 10.194.14.126:22,
              retrying in 3 seconds\n             Waiting for SSH service on 10.194.14.126:22,
              retrying in 3 seconds\n             [SSH] Established\n             Finished
              creating <chefdk-current-install-ubuntu-1404> (0m59.68s).\n      ----->
              Converging <chefdk-current-install-ubuntu-1404>...\n             Preparing
              files for transfer\n             Preparing dna.json\n             Berksfile,
              Cheffile, cookbooks/, or metadata.rb not found so Chef will run with
              effectively no cookbooks. Is this intended?\n             Removing non-cookbook
              files before transfer\n             Preparing validation.pem\n             Preparing
              client.rb\n             ubuntu 14.04 x86_64\n             downloading
              http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb\n
              \            http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json\n
              \              to file /tmp/install.sh.1321/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json\n
              \            trying wget...\n             trying curl...\n             /tmp/chef-installer.sh:
              line 140: http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json:
              No such file or directory\n             grep: /tmp/install.sh.1321/stderr:
              No such file or directory\n             trying perl...\n             /tmp/chef-installer.sh:
              line 170: http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json:
              No such file or directory\n             grep: /tmp/install.sh.1321/stderr:
              No such file or directory\n             trying python...\n             /tmp/chef-installer.sh:
              line 191: http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json:
              No such file or directory\n             grep: /tmp/install.sh.1321/stderr:
              No such file or directory\n             Unable to retrieve a valid package!\n
              \            Version: latest\n             \n             Please file
              a Bug Report at https://github.com/chef/omnitruck/issues/new\n             Alternatively,
              feel free to open a Support Ticket at https://www.chef.io/support/tickets\n
              \            More Chef support resources can be found at https://www.chef.io/support\n
              \            \n             Please include as many details about the
              problem as possible i.e., how to reproduce\n             the problem
              (if possible), type of the Operating System and its version, etc.,\n
              \            and any other relevant details that might help us with
              troubleshooting.\n             \n             Metadata URL: \n             Download
              URL: http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb\n
              \            http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json\n
              \            \\nDEBUG OUTPUT FOLLOWS:\\n\\nSTDERR from wget:\\n\\nhttp://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json:
              No such file or directory\\n\n      STDERR: >>>>>> Converge failed on
              instance <chefdk-current-install-ubuntu-1404>.\n      >>>>>> Please
              see .kitchen/logs/chefdk-current-install-ubuntu-1404.log for more details\n
              \     >>>>>> ------Exception-------\n      >>>>>> Class: Kitchen::ActionFailed\n
              \     >>>>>> Message: SSH exited (1) for command: [sudo -E cat > /tmp/chef-installer.sh
              <<\"EOL\"\n      #!/bin/bash\n      #!/bin/sh\n      # WARNING: REQUIRES
              /bin/sh\n      #\n      # - must run on /bin/sh on solaris 9\n      #
              - must run on /bin/sh on AIX 6.x\n      #\n      # Copyright:: Copyright
              (c) 2010-2015 Chef Software, Inc.\n      # License:: Apache License,
              Version 2.0\n      #\n      # Licensed under the Apache License, Version
              2.0 (the \"License\");\n      # you may not use this file except in
              compliance with the License.\n      # You may obtain a copy of the License
              at\n      #\n      #     http://www.apache.org/licenses/LICENSE-2.0\n
              \     #\n      # Unless required by applicable law or agreed to in writing,
              software\n      # distributed under the License is distributed on an
              \"AS IS\" BASIS,\n      # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
              either express or implied.\n      # See the License for the specific
              language governing permissions and\n      # limitations under the License.\n
              \     #\n      \n      # helpers.sh\n      ############\n      # This
              section has some helper functions to make life easier.\n      #\n      #
              Outputs:\n      # $tmp_dir: secure-ish temp directory that can be used
              during installation.\n      ############\n      \n      # Check whether
              a command exists - returns 0 if it does, 1 if it does not\n      exists()
              {\n        if command -v $1 >/dev/null 2>&1\n        then\n          return
              0\n        else\n          return 1\n        fi\n      }\n      \n      #
              Output the instructions to report bug about this script\n      report_bug()
              {\n        echo \"Version: $version\"\n        echo \"\"\n        echo
              \"Please file a Bug Report at https://github.com/chef/omnitruck/issues/new\"\n
              \       echo \"Alternatively, feel free to open a Support Ticket at
              https://www.chef.io/support/tickets\"\n        echo \"More Chef support
              resources can be found at https://www.chef.io/support\"\n        echo
              \"\"\n        echo \"Please include as many details about the problem
              as possible i.e., how to reproduce\"\n        echo \"the problem (if
              possible), type of the Operating System and its version, etc.,\"\n        echo
              \"and any other relevant details that might help us with troubleshooting.\"\n
              \       echo \"\"\n      }\n      \n      checksum_mismatch() {\n        echo
              \"Package checksum mismatch!\"\n        report_bug\n        exit 1\n
              \     }\n      \n      unable_to_retrieve_package() {\n        echo
              \"Unable to retrieve a valid package!\"\n        report_bug\n        echo
              \"Metadata URL: $metadata_url\"\n        if test \"x$download_url\"
              != \"x\"; then\n          echo \"Download URL: $download_url\"\n        fi\n
              \       if test \"x$stderr_results\" != \"x\"; then\n          echo
              \"\\nDEBUG OUTPUT FOLLOWS:\\n$stderr_results\"\n        fi\n        exit
              1\n      }\n      \n      http_404_error() {\n        echo \"Omnitruck
              artifact does not exist for version $version on platform $platform\"\n
              \       echo \"\"\n        echo \"Either this means:\"\n        echo
              \"   - We do not support $platform\"\n        echo \"   - We do not
              have an artifact for $version\"\n        echo \"\"\n        echo \"This
              is often the latter case due to running a prerelease or RC version of
              chef\"\n        echo \"or a gem version which was only pushed to rubygems
              and not omnitruck.\"\n        echo \"\"\n        echo \"You may be able
              to set your knife[:bootstrap_version] to the most recent stable\"\n
              \       echo \"release of Chef to fix this problem (or the most recent
              stable major version number).\"\n        echo \"\"\n        echo \"In
              order to test the version parameter, adventurous users may take the
              Metadata URL\"\n        echo \"below and modify the '&v=<number>' parameter
              until you successfully get a URL that\"\n        echo \"does not 404
              (e.g. via curl or wget).  You should be able to use '&v=11' or '&v=12'\"\n
              \       echo \"succesfully.\"\n        echo \"\"\n        echo \"If
              you cannot fix this problem by setting the bootstrap_version, it probably
              means\"\n        echo \"that $platform is not supported.\"\n        echo
              \"\"\n        # deliberately do not call report_bug to suppress bug
              report noise.\n        echo \"Metadata URL: $metadata_url\"\n        if
              test \"x$download_url\" != \"x\"; then\n          echo \"Download URL:
              $download_url\"\n        fi\n        if test \"x$stderr_results\" !=
              \"x\"; then\n          echo \"\\nDEBUG OUTPUT FOLLOWS:\\n$stderr_results\"\n
              \       fi\n        exit 1\n      }\n      \n      capture_tmp_stderr()
              {\n        # spool up /tmp/stderr from all the commands we called\n
              \       if test -f \"$tmp_dir/stderr\"; then\n          output=`cat
              $tmp_dir/stderr`\n          stderr_results=\"${stderr_results}\\nSTDERR
              from $1:\\n\\n$output\\n\"\n          rm $tmp_dir/stderr\n        fi\n
              \     }\n      \n      # do_wget URL FILENAME\n      do_wget() {\n        echo
              \"trying wget...\"\n        wget -O \"$2\" \"$1\" 2>$tmp_dir/stderr\n
              \       rc=$?\n        # check for 404\n        grep \"ERROR 404\" $tmp_dir/stderr
              2>&1 >/dev/null\n        if test $? -eq 0; then\n          echo \"ERROR
              404\"\n          http_404_error\n        fi\n      \n        # check
              for bad return status or empty output\n        if test $rc -ne 0 ||
              test ! -s \"$2\"; then\n          capture_tmp_stderr \"wget\"\n          return
              1\n        fi\n      \n        return 0\n      }\n      \n      # do_curl
              URL FILENAME\n      do_curl() {\n        echo \"trying curl...\"\n        curl
              --retry 5 -sL -D $tmp_dir/stderr \"$1\" > \"$2\"\n        rc=$?\n        #
              check for 404\n        grep \"404 Not Found\" $tmp_dir/stderr 2>&1 >/dev/null\n
              \       if test $? -eq 0; then\n          echo \"ERROR 404\"\n          http_404_error\n
              \       fi\n      \n        # check for bad return status or empty output\n
              \       if test $rc -ne 0 || test ! -s \"$2\"; then\n          capture_tmp_stderr
              \"curl\"\n          return 1\n        fi\n      \n        return 0\n
              \     }\n      \n      # do_fetch URL FILENAME\n      do_fetch() {\n
              \       echo \"trying fetch...\"\n        fetch -o \"$2\" \"$1\" 2>$tmp_dir/stderr\n
              \       # check for bad return status\n        test $? -ne 0 && return
              1\n        return 0\n      }\n      \n      # do_perl URL FILENAME\n
              \     do_perl() {\n        echo \"trying perl...\"\n        perl -e
              'use LWP::Simple; getprint($ARGV[0]);' \"$1\" > \"$2\" 2>$tmp_dir/stderr\n
              \       rc=$?\n        # check for 404\n        grep \"404 Not Found\"
              $tmp_dir/stderr 2>&1 >/dev/null\n        if test $? -eq 0; then\n          echo
              \"ERROR 404\"\n          http_404_error\n        fi\n      \n        #
              check for bad return status or empty output\n        if test $rc -ne
              0 || test ! -s \"$2\"; then\n          capture_tmp_stderr \"perl\"\n
              \         return 1\n        fi\n      \n        return 0\n      }\n
              \     \n      # do_python URL FILENAME\n      do_python() {\n        echo
              \"trying python...\"\n        python -c \"import sys,urllib2 ; sys.stdout.write(urllib2.urlopen(sys.argv[1]).read())\"
              \"$1\" > \"$2\" 2>$tmp_dir/stderr\n        rc=$?\n        # check for
              404\n        grep \"HTTP Error 404\" $tmp_dir/stderr 2>&1 >/dev/null\n
              \       if test $? -eq 0; then\n          echo \"ERROR 404\"\n          http_404_error\n
              \       fi\n      \n        # check for bad return status or empty output\n
              \       if test $rc -ne 0 || test ! -s \"$2\"; then\n          capture_tmp_stderr
              \"python\"\n          return 1\n        fi\n        return 0\n      }\n
              \     \n      # returns 0 if checksums match\n      do_checksum() {\n
              \       if exists sha256sum; then\n          echo \"Comparing checksum
              with sha256sum...\"\n          checksum=`sha256sum $1 | awk '{ print
              $1 }'`\n          return `test \"x$checksum\" = \"x$2\"`\n        elif
              exists shasum; then\n          echo \"Comparing checksum with shasum...\"\n
              \         checksum=`shasum -a 256 $1 | awk '{ print $1 }'`\n          return
              `test \"x$checksum\" = \"x$2\"`\n        else\n          echo \"WARNING:
              could not find a valid checksum program, pre-install shasum or sha256sum
              in your O/S image to get valdation...\"\n          return 0\n        fi\n
              \     }\n      \n      # do_download URL FILENAME\n      do_download()
              {\n        echo \"downloading $1\"\n        echo \"  to file $2\"\n
              \     \n        url=`echo $1`\n        if test \"x$platform\" = \"xsolaris2\";
              then\n          if test \"x$platform_version\" = \"x5.9\" -o \"x$platform_version\"
              = \"x5.10\"; then\n            # solaris 9 lacks openssl, solaris 10
              lacks recent enough credentials - your base O/S is completely insecure,
              please upgrade\n            url=`echo $url | sed -e 's/https/http/'`\n
              \         fi\n        fi\n      \n        # we try all of these until
              we get success.\n        # perl, in particular may be present but LWP::Simple
              may not be installed\n      \n        if exists wget; then\n          do_wget
              $url $2 && return 0\n        fi\n      \n        if exists curl; then\n
              \         do_curl $url $2 && return 0\n        fi\n      \n        if
              exists fetch; then\n          do_fetch $url $2 && return 0\n        fi\n
              \     \n        if exists perl; then\n          do_perl $url $2 && return
              0\n        fi\n      \n        if exists python; then\n          do_python
              $url $2 && return 0\n        fi\n      \n        unable_to_retrieve_package\n
              \     }\n      \n      # install_file TYPE FILENAME\n      # TYPE is
              \"rpm\", \"deb\", \"solaris\", \"sh\", etc.\n      install_file() {\n
              \       echo \"Installing $project $version\"\n        case \"$1\" in\n
              \         \"rpm\")\n            if test \"x$platform\" = \"xnexus\"
              || test \"x$platform\" = \"xios_xr\"; then\n              echo \"installing
              with yum...\"\n              yum install -yv \"$2\"\n            else\n
              \             echo \"installing with rpm...\"\n              rpm -Uvh
              --oldpackage --replacepkgs \"$2\"\n            fi\n            ;;\n
              \         \"deb\")\n            echo \"installing with dpkg...\"\n            dpkg
              -i \"$2\"\n            ;;\n          \"bff\")\n            echo \"installing
              with installp...\"\n            installp -aXYgd \"$2\" all\n            ;;\n
              \         \"solaris\")\n            echo \"installing with pkgadd...\"\n
              \           echo \"conflict=nocheck\" > $tmp_dir/nocheck\n            echo
              \"action=nocheck\" >> $tmp_dir/nocheck\n            echo \"mail=\" >>
              $tmp_dir/nocheck\n            pkgrm -a $tmp_dir/nocheck -n $project
              >/dev/null 2>&1 || true\n            pkgadd -G -n -d \"$2\" -a $tmp_dir/nocheck
              $project\n            ;;\n          \"pkg\")\n            echo \"installing
              with installer...\"\n            cd / && /usr/sbin/installer -pkg \"$2\"
              -target /\n            ;;\n          \"dmg\")\n            echo \"installing
              dmg file...\"\n            hdiutil detach \"/Volumes/chef_software\"
              >/dev/null 2>&1 || true\n            hdiutil attach \"$2\" -mountpoint
              \"/Volumes/chef_software\"\n            cd / && /usr/sbin/installer
              -pkg `find \"/Volumes/chef_software\" -name \\*.pkg` -target /\n            hdiutil
              detach \"/Volumes/chef_software\"\n            ;;\n          \"sh\"
              )\n            echo \"installing with sh...\"\n            sh \"$2\"\n
              \           ;;\n          *)\n            echo \"Unknown filetype: $1\"\n
              \           report_bug\n            exit 1\n            ;;\n        esac\n
              \       if test $? -ne 0; then\n          echo \"Installation failed\"\n
              \         report_bug\n          exit 1\n        fi\n      }\n      \n
              \     if test \"x$TMPDIR\" = \"x\"; then\n        tmp=\"/tmp\"\n      else\n
              \       tmp=$TMPDIR\n      fi\n      # secure-ish temp dir creation
              without having mktemp available (DDoS-able but not expliotable)\n      tmp_dir=\"$tmp/install.sh.$$\"\n
              \     (umask 077 && mkdir $tmp_dir) || exit 1\n      \n      ############\n
              \     # end of helpers.sh\n      ############\n      \n      \n      project=chefdk\n
              \     version=latest\n      channel=unstable\n      \n      \n      #
              platform_detection.sh\n      ############\n      # This section makes
              platform detection compatible with omnitruck on the system\n      #
              \  it runs.\n      #\n      # Outputs:\n      # $platform: Name of the
              platform.\n      # $platform_version: Version of the platform.\n      #
              $machine: System's architecture.\n      ############\n      \n      #\n
              \     # Platform and Platform Version detection\n      #\n      # NOTE:
              This should now match ohai platform and platform_version matching.\n
              \     # do not invented new platform and platform_version schemas, just
              make this behave\n      # like what ohai returns as platform and platform_version
              for the server.\n      #\n      # ALSO NOTE: Do not mangle platform
              or platform_version here.  It is less error\n      # prone and more
              future-proof to do that in the server, and then all omnitruck clients\n
              \     # will 'inherit' the changes (install.sh is not the only client
              of the omnitruck\n      # endpoint out there).\n      #\n      \n      machine=`uname
              -m`\n      os=`uname -s`\n      \n      if test -f \"/etc/lsb-release\"
              && grep -q DISTRIB_ID /etc/lsb-release && ! grep -q wrlinux /etc/lsb-release;
              then\n        platform=`grep DISTRIB_ID /etc/lsb-release | cut -d \"=\"
              -f 2 | tr '[A-Z]' '[a-z]'`\n        platform_version=`grep DISTRIB_RELEASE
              /etc/lsb-release | cut -d \"=\" -f 2`\n      elif test -f \"/etc/debian_version\";
              then\n        platform=\"debian\"\n        platform_version=`cat /etc/debian_version`\n
              \     elif test -f \"/etc/redhat-release\"; then\n        platform=`sed
              's/^\\(.\\+\\) release.*/\\1/' /etc/redhat-release | tr '[A-Z]' '[a-z]'`\n
              \       platform_version=`sed 's/^.\\+ release \\([.0-9]\\+\\).*/\\1/'
              /etc/redhat-release`\n      \n        # If /etc/redhat-release exists,
              we act like RHEL by default\n        if test \"$platform\" = \"fedora\";
              then\n          # FIXME: stop remapping fedora to el\n          # FIXME:
              remove client side platform_version mangling and hard coded yolo\n          #
              Change platform version for use below.\n          platform_version=\"6.0\"\n
              \       fi\n      \n        if test \"$platform\" = \"xenserver\"; then\n
              \         # Current XenServer 6.2 is based on CentOS 5, platform is
              not reset to \"el\" server should hanlde response\n          platform=\"xenserver\"\n
              \       else\n          # FIXME: use \"redhat\"\n          platform=\"el\"\n
              \       fi\n      \n      elif test -f \"/etc/system-release\"; then\n
              \       platform=`sed 's/^\\(.\\+\\) release.\\+/\\1/' /etc/system-release
              | tr '[A-Z]' '[a-z]'`\n        platform_version=`sed 's/^.\\+ release
              \\([.0-9]\\+\\).*/\\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`\n
              \       # amazon is built off of fedora, so act like RHEL\n        if
              test \"$platform\" = \"amazon linux ami\"; then\n          # FIXME:
              remove client side platform_version mangling and hard coded yolo, and
              remapping to deprecated \"el\"\n          platform=\"el\"\n          platform_version=\"6.0\"\n
              \       fi\n      # Apple OS X\n      elif test -f \"/usr/bin/sw_vers\";
              then\n        platform=\"mac_os_x\"\n        # Matching the tab-space
              with sed is error-prone\n        platform_version=`sw_vers | awk '/^ProductVersion:/
              { print $2 }' | cut -d. -f1,2`\n      \n        # x86_64 Apple hardware
              often runs 32-bit kernels (see OHAI-63)\n        x86_64=`sysctl -n hw.optional.x86_64`\n
              \       if test $x86_64 -eq 1; then\n          machine=\"x86_64\"\n
              \       fi\n      elif test -f \"/etc/release\"; then\n        machine=`/usr/bin/uname
              -p`\n        if grep -q SmartOS /etc/release; then\n          platform=\"smartos\"\n
              \         platform_version=`grep ^Image /etc/product | awk '{ print
              $3 }'`\n        else\n          platform=\"solaris2\"\n          platform_version=`/usr/bin/uname
              -r`\n        fi\n      elif test -f \"/etc/SuSE-release\"; then\n        if
              grep -q 'Enterprise' /etc/SuSE-release;\n        then\n            platform=\"sles\"\n
              \           platform_version=`awk '/^VERSION/ {V = $3}; /^PATCHLEVEL/
              {P = $3}; END {print V \".\" P}' /etc/SuSE-release`\n        else\n
              \           platform=\"suse\"\n            platform_version=`awk '/^VERSION
              =/ { print $3 }' /etc/SuSE-release`\n        fi\n      elif test \"x$os\"
              = \"xFreeBSD\"; then\n        platform=\"freebsd\"\n        platform_version=`uname
              -r | sed 's/-.*//'`\n      elif test \"x$os\" = \"xAIX\"; then\n        platform=\"aix\"\n
              \       platform_version=\"`uname -v`.`uname -r`\"\n        machine=\"powerpc\"\n
              \     elif test -f \"/etc/os-release\"; then\n        . /etc/os-release\n
              \       if test \"x$CISCO_RELEASE_INFO\" != \"x\"; then\n          .
              $CISCO_RELEASE_INFO\n        fi\n      \n        platform=$ID\n        platform_version=$VERSION\n
              \     fi\n      \n      if test \"x$platform\" = \"x\"; then\n        echo
              \"Unable to determine platform version!\"\n        report_bug\n        exit
              1\n      fi\n      \n      #\n      # NOTE: platform manging in the
              install.sh is DEPRECATED\n      #\n      # - install.sh should be true
              to ohai and should not remap\n      #   platform or platform versions.\n
              \     #\n      # - remapping platform and mangling platform version
              numbers is\n      #   now the complete responsibility of the server-side
              endpoints\n      #\n      \n      major_version=`echo $platform_version
              | cut -d. -f1`\n      case $platform in\n        # FIXME: should remove
              this case statement completely\n        \"el\")\n          # FIXME:
              \ \"el\" is deprecated, should use \"redhat\"\n          platform_version=$major_version\n
              \         ;;\n        \"debian\")\n          # FIXME: remove client-side
              yolo here\n          case $major_version in\n            \"5\") platform_version=\"6\";;
              \ # FIXME: need to port this \"reverse-yolo\" into platform.rb\n            \"6\")
              platform_version=\"6\";;\n            \"7\") platform_version=\"6\";;\n
              \         esac\n          ;;\n        \"freebsd\")\n          platform_version=$major_version\n
              \         ;;\n        \"sles\")\n          platform_version=$major_version\n
              \         ;;\n        \"suse\")\n          platform_version=$major_version\n
              \         ;;\n      esac\n      \n      if test \"x$platform_version\"
              = \"x\"; then\n        echo \"Unable to determine platform version!\"\n
              \       report_bug\n        exit 1\n      fi\n      \n      if test
              \"x$platform\" = \"xsolaris2\"; then\n        # hack up the path on
              Solaris to find wget, pkgadd\n        PATH=/usr/sfw/bin:/usr/sbin:$PATH\n
              \       export PATH\n      fi\n      \n      echo \"$platform $platform_version
              $machine\"\n      \n      ############\n      # end of platform_detection.sh\n
              \     ############\n      \n      \n      # artifactory_urls.sh\n      ############\n
              \     # This section sets up the information for a build to be installed
              from artifactory\n      #  then uses $platform, $platform_version and
              $machine to select the correct\n      #  version.\n      #\n      #
              Inputs:\n      # $platform:\n      # $platform_version:\n      # $machine:\n
              \     #\n      # Outputs:\n      # $download_url:\n      # $sha256:\n
              \     ############\n      \n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.11/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/mac_os_x/10.11/chefdk-0.13.19+20160413172241-1.dmg.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 \" >>
              \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.10/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/mac_os_x/10.10/chefdk-0.13.19+20160413172241-1.dmg.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 \" >>
              \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/debian/6/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/debian/6/chefdk_0.13.19+20160413172241-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 f2b3182544dcc7b1d9167f10457c5da68328058ea326e01b4e122ee7f6eacca2\"
              >> \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/debian/7/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/debian/7/chefdk_0.13.19+20160413172241-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 f2b3182544dcc7b1d9167f10457c5da68328058ea326e01b4e122ee7f6eacca2\"
              >> \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/14.04/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 132447365fd49d1948f6f1feaf5f4c16748f0f83852232a679ac2dcebe18a8b4\"
              >> \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.10/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/mac_os_x/10.10/chefdk-0.13.19+20160413172241-1.dmg\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 0820e1dbe8ad6a3ce151cfe6ee904c3b3b486a4f4190b695dbc4103c920d42a0\"
              >> \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/debian/8/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/debian/8/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 \" >>
              \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/14.04/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 \" >>
              \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/el/7/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/el/7/chefdk-0.13.19+20160413172241-1.el7.x86_64.rpm.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 \" >>
              \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/debian/8/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/debian/8/chefdk_0.13.19+20160413172241-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 f2b3182544dcc7b1d9167f10457c5da68328058ea326e01b4e122ee7f6eacca2\"
              >> \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/el/6/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/el/6/chefdk-0.13.19+20160413172241-1.el6.x86_64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 b2d0223f90ad06dd9174055203e18c2ff116401000b9bf89cf51ba44dfa86ed8\"
              >> \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/el/7/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/el/7/chefdk-0.13.19+20160413172241-1.el7.x86_64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 8d65087c6d4292888b93d1581f4608490b2a3615b0b3e92d595f7b8778bf54fa\"
              >> \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/12.04/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/12.04/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 \" >>
              \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/windows/2008r2/i386\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/windows/2008r2/chefdk-0.13.19+20160413172241-1-x86.msi.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 \" >>
              \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/windows/2012r2/i386\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/windows/2012r2/chefdk-0.13.19+20160413172241-1-x86.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 4bdd0ceedc393e21328a904ddc2f543ed87890debe321b0ae3cc2dfe204bd066\"
              >> \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/windows/2012/i386\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/windows/2012/chefdk-0.13.19+20160413172241-1-x86.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 4bdd0ceedc393e21328a904ddc2f543ed87890debe321b0ae3cc2dfe204bd066\"
              >> \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.9/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/mac_os_x/10.9/chefdk-0.13.19+20160413172241-1.dmg\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 0820e1dbe8ad6a3ce151cfe6ee904c3b3b486a4f4190b695dbc4103c920d42a0\"
              >> \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.9/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/mac_os_x/10.9/chefdk-0.13.19+20160413172241-1.dmg.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 \" >>
              \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/windows/2012/i386\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/windows/2012/chefdk-0.13.19+20160413172241-1-x86.msi.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 \" >>
              \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/debian/6/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/debian/6/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 \" >>
              \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/el/6/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/el/6/chefdk-0.13.19+20160413172241-1.el6.x86_64.rpm.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 \" >>
              \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.11/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/mac_os_x/10.11/chefdk-0.13.19+20160413172241-1.dmg\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 0820e1dbe8ad6a3ce151cfe6ee904c3b3b486a4f4190b695dbc4103c920d42a0\"
              >> \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/windows/2008r2/i386\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/windows/2008r2/chefdk-0.13.19+20160413172241-1-x86.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 4bdd0ceedc393e21328a904ddc2f543ed87890debe321b0ae3cc2dfe204bd066\"
              >> \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/debian/7/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/debian/7/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 \" >>
              \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/12.04/x86_64\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/12.04/chefdk_0.13.19+20160413172241-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 132447365fd49d1948f6f1feaf5f4c16748f0f83852232a679ac2dcebe18a8b4\"
              >> \"$artifact_info_dir/artifact_info\"\n      \n        artifact_info_dir=\"$tmp_dir/artifact_info/windows/2012r2/i386\"\n
              \       mkdir -p $artifact_info_dir\n        touch \"$artifact_info_dir/artifact_info\"\n
              \       echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/windows/2012r2/chefdk-0.13.19+20160413172241-1-x86.msi.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n        echo \"sha256 \" >>
              \"$artifact_info_dir/artifact_info\"\n      \n      \n      artifact_info_for_platform=\"$tmp_dir/artifact_info/$platform/$platform_version/$machine/artifact_info\"\n
              \     \n      download_url=`awk '$1 == \"url\" { print $2 }' \"$artifact_info_for_platform\"`\n
              \     sha256=`awk '$1 == \"sha256\" { print $2 }' \"$artifact_info_for_platform\"`\n
              \     \n      \n      # fetch_package.sh\n      ############\n      #
              This section fetchs a package from $download_url and verifies its metadata.\n
              \     #\n      # Inputs:\n      # $download_url:\n      # $tmp_dir:\n
              \     # Optional Inputs:\n      # $cmdline_filename: Name of the package
              downloaded on local disk.\n      # $cmdline_dl_dir: Name of the directory
              downloaded package will be saved to on local disk.\n      #\n      #
              Outputs:\n      # $download_filename: Name of the downloaded file on
              local disk.\n      # $filetype: Type of the file downloaded.\n      ############\n
              \     \n      filename=`echo $download_url | sed -e 's/^.*\\///'`\n
              \     filetype=`echo $filename | sed -e 's/^.*\\.//'`\n      \n      #
              use either $tmp_dir, the provided directory (-d) or the provided filename
              (-f)\n      if test \"x$cmdline_filename\" != \"x\"; then\n        download_filename=\"$cmdline_filename\"\n
              \     elif test \"x$cmdline_dl_dir\" != \"x\"; then\n        download_filename=\"$cmdline_dl_dir/$filename\"\n
              \     else\n        download_filename=\"$tmp_dir/$filename\"\n      fi\n
              \     \n      # ensure the parent directory where to download the installer
              always exists\n      download_dir=`dirname $download_filename`\n      (umask
              077 && mkdir -p $download_dir) || exit 1\n      \n      # check if we
              have that file locally available and if so verify the checksum\n      cached_file_available=\"false\"\n
              \     if test -f $download_filename; then\n        echo \"$download_filename
              already exists, verifiying checksum...\"\n        if do_checksum \"$download_filename\"
              \"$sha256\"; then\n          echo \"checksum compare succeeded, using
              existing file!\"\n          cached_file_available=\"true\"\n        else\n
              \         echo \"checksum mismatch, downloading latest version of the
              file\"\n        fi\n      fi\n      \n      # download if no local version
              of the file available\n      if test \"x$cached_file_available\" !=
              \"xtrue\"; then\n        do_download \"$download_url\"  \"$download_filename\"\n
              \       do_checksum \"$download_filename\" \"$sha256\" || checksum_mismatch\n
              \     fi\n      \n      ############\n      # end of fetch_package.sh\n
              \     ############\n      \n      \n      # install_package.sh\n      ############\n
              \     # Installs a package and removed the temp directory.\n      #\n
              \     # Inputs:\n      # $download_filename: Name of the file to be
              installed.\n      # $filetype: Type of the file to be installed.\n      #
              $version: The version requested. Used only for warning user if not set.\n
              \     ############\n      \n      if test \"x$version\" = \"x\"; then\n
              \       echo\n        echo \"WARNING WARNING WARNING WARNING WARNING
              WARNING WARNING WARNING WARNING\"\n        echo\n        echo \"You
              are installing an omnibus package without a version pin.  If you are
              installing\"\n        echo \"on production servers via an automated
              process this is DANGEROUS and you will\"\n        echo \"be upgraded
              without warning on new releases, even to new major releases.\"\n        echo
              \"Letting the version float is only appropriate in desktop, test, development
              or\"\n        echo \"CI/CD environments.\"\n        echo\n        echo
              \"WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING\"\n
              \       echo\n      fi\n      \n      install_file $filetype \"$download_filename\"\n
              \     \n      if test \"x$tmp_dir\" != \"x\"; then\n        rm -r \"$tmp_dir\"\n
              \     fi\n      \n      ############\n      # end of install_package.sh\n
              \     ############\n      \n      EOL\n      chmod +x /tmp/chef-installer.sh\n
              \     sudo -E /tmp/chef-installer.sh]\n      >>>>>> ----------------------\n
              \     zlib(finalizer): the stream was freed prematurely.\n      ----
              End output of bundle exec kitchen setup  -c ----\n      Ran bundle exec
              kitchen setup  -c returned 10\n      \n      Resource Declaration:\n
              \     ---------------------\n      # In /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-dk-0.13.19/acceptance/trivial/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb\n
              \     \n       36:       execute \"bundle exec kitchen #{command}#{instances
              ? \" #{instances}\" : \"\"}#{kitchen_options ? \" #{kitchen_options}\"
              : \"\"}\" do\n       37:         cwd kitchen_dir\n       38:         env({\n
              \      39:           \"KITCHEN_DRIVER\" => driver,\n       40:           \"KITCHEN_INSTANCES\"
              => instances,\n       41:           \"KITCHEN_LOCAL_YAML\" => ::File.expand_path(\"../../.kitchen.#{driver}.yml\",
              __FILE__),\n       42:           \"KITCHEN_CHEF_PRODUCT\" => chef_product,\n
              \      43:           \"KITCHEN_CHEF_CHANNEL\" => chef_channel,\n       44:
              \          \"KITCHEN_CHEF_VERSION\" => chef_version,\n       45:           \"ARTIFACTORY_USERNAME\"
              => artifactory_username,\n       46:           \"ARTIFACTORY_PASSWORD\"
              => artifactory_password\n       47:         }.merge(new_resource.env))\n
              \      48:       end\n       49:     end\n      \n      Compiled Resource:\n
              \     ------------------\n      # Declared in /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-dk-0.13.19/acceptance/trivial/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:36:in
              `block in <class:Kitchen>'\n      \n      execute(\"bundle exec kitchen
              setup  -c\") do\n        action [:run]\n        retries 0\n        retry_delay
              2\n        default_guard_interpreter :execute\n        command \"bundle
              exec kitchen setup  -c\"\n        backup 5\n        cwd \"/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-dk-0.13.19/acceptance/trivial\"\n
              \       environment {\"KITCHEN_DRIVER\"=>\"ec2\", \"KITCHEN_INSTANCES\"=>\"\",
              \"KITCHEN_LOCAL_YAML\"=>\"/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-dk-0.13.19/acceptance/trivial/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/cookbooks/kitchen_acceptance/.kitchen.ec2.yml\",
              \"KITCHEN_CHEF_PRODUCT\"=>\"chefdk\", \"KITCHEN_CHEF_CHANNEL\"=>\"unstable\",
              \"KITCHEN_CHEF_VERSION\"=>\"latest\", \"ARTIFACTORY_USERNAME\"=>\"chef-web-downloads\",
              \"ARTIFACTORY_PASSWORD\"=>\"fWPxYSB69EiuSpl8*3Dr^kGwf#hxUE6cmjeZRB%H!Cruit7qiKp%toH3nXKStQUg\"}\n
              \       returns 0\n        declared_type :execute\n        cookbook_name
              \"acceptance-cookbook\"\n      end\n      \n      Platform:\n      ---------\n
              \     x86_64-linux\n      \n    \n    ================================================================================\n
              \   Error executing action `run` on resource 'kitchen[setup]'\n    ================================================================================\n
              \   \n    Mixlib::ShellOut::ShellCommandFailed\n    ------------------------------------\n
              \   execute[bundle exec kitchen setup  -c] (/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-dk-0.13.19/acceptance/trivial/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb
              line 36) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected
              process to exit with [0], but received '10'\n    ---- Begin output of
              bundle exec kitchen setup  -c ----\n    STDOUT: -----> Starting Kitchen
              (v1.7.2)\n    -----> Creating <chefdk-current-install-ubuntu-1404>...\n
              \          If you are not using an account that qualifies under the
              AWS\n    free-tier, you may be charged to run these suites. The charge\n
              \   should be minimal, but neither Test Kitchen nor its maintainers\n
              \   are responsible for your incurred costs.\n    \n           Instance
              <i-114148d6> requested.\n           Polling AWS for existence, attempt
              0...\n           Attempting to tag the instance, 0 retries\n           EC2
              instance <i-114148d6> created.\n           Waited 0/300s for instance
              <i-114148d6> to become ready.\n           Waited 5/300s for instance
              <i-114148d6> to become ready.\n           Waited 10/300s for instance
              <i-114148d6> to become ready.\n           Waited 15/300s for instance
              <i-114148d6> to become ready.\n           Waited 20/300s for instance
              <i-114148d6> to become ready.\n           Waited 25/300s for instance
              <i-114148d6> to become ready.\n           EC2 instance <i-114148d6>
              ready.\n           Waiting for SSH service on 10.194.14.126:22, retrying
              in 3 seconds\n           Waiting for SSH service on 10.194.14.126:22,
              retrying in 3 seconds\n           Waiting for SSH service on 10.194.14.126:22,
              retrying in 3 seconds\n           Waiting for SSH service on 10.194.14.126:22,
              retrying in 3 seconds\n           [SSH] Established\n           Finished
              creating <chefdk-current-install-ubuntu-1404> (0m59.68s).\n    ----->
              Converging <chefdk-current-install-ubuntu-1404>...\n           Preparing
              files for transfer\n           Preparing dna.json\n           Berksfile,
              Cheffile, cookbooks/, or metadata.rb not found so Chef will run with
              effectively no cookbooks. Is this intended?\n           Removing non-cookbook
              files before transfer\n           Preparing validation.pem\n           Preparing
              client.rb\n           ubuntu 14.04 x86_64\n           downloading http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb\n
              \          http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json\n
              \            to file /tmp/install.sh.1321/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json\n
              \          trying wget...\n           trying curl...\n           /tmp/chef-installer.sh:
              line 140: http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json:
              No such file or directory\n           grep: /tmp/install.sh.1321/stderr:
              No such file or directory\n           trying perl...\n           /tmp/chef-installer.sh:
              line 170: http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json:
              No such file or directory\n           grep: /tmp/install.sh.1321/stderr:
              No such file or directory\n           trying python...\n           /tmp/chef-installer.sh:
              line 191: http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json:
              No such file or directory\n           grep: /tmp/install.sh.1321/stderr:
              No such file or directory\n           Unable to retrieve a valid package!\n
              \          Version: latest\n           \n           Please file a Bug
              Report at https://github.com/chef/omnitruck/issues/new\n           Alternatively,
              feel free to open a Support Ticket at https://www.chef.io/support/tickets\n
              \          More Chef support resources can be found at https://www.chef.io/support\n
              \          \n           Please include as many details about the problem
              as possible i.e., how to reproduce\n           the problem (if possible),
              type of the Operating System and its version, etc.,\n           and
              any other relevant details that might help us with troubleshooting.\n
              \          \n           Metadata URL: \n           Download URL: http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb\n
              \          http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json\n
              \          \\nDEBUG OUTPUT FOLLOWS:\\n\\nSTDERR from wget:\\n\\nhttp://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json:
              No such file or directory\\n\n    STDERR: >>>>>> Converge failed on
              instance <chefdk-current-install-ubuntu-1404>.\n    >>>>>> Please see
              .kitchen/logs/chefdk-current-install-ubuntu-1404.log for more details\n
              \   >>>>>> ------Exception-------\n    >>>>>> Class: Kitchen::ActionFailed\n
              \   >>>>>> Message: SSH exited (1) for command: [sudo -E cat > /tmp/chef-installer.sh
              <<\"EOL\"\n    #!/bin/bash\n    #!/bin/sh\n    # WARNING: REQUIRES /bin/sh\n
              \   #\n    # - must run on /bin/sh on solaris 9\n    # - must run on
              /bin/sh on AIX 6.x\n    #\n    # Copyright:: Copyright (c) 2010-2015
              Chef Software, Inc.\n    # License:: Apache License, Version 2.0\n    #\n
              \   # Licensed under the Apache License, Version 2.0 (the \"License\");\n
              \   # you may not use this file except in compliance with the License.\n
              \   # You may obtain a copy of the License at\n    #\n    #     http://www.apache.org/licenses/LICENSE-2.0\n
              \   #\n    # Unless required by applicable law or agreed to in writing,
              software\n    # distributed under the License is distributed on an \"AS
              IS\" BASIS,\n    # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
              express or implied.\n    # See the License for the specific language
              governing permissions and\n    # limitations under the License.\n    #\n
              \   \n    # helpers.sh\n    ############\n    # This section has some
              helper functions to make life easier.\n    #\n    # Outputs:\n    #
              $tmp_dir: secure-ish temp directory that can be used during installation.\n
              \   ############\n    \n    # Check whether a command exists - returns
              0 if it does, 1 if it does not\n    exists() {\n      if command -v
              $1 >/dev/null 2>&1\n      then\n        return 0\n      else\n        return
              1\n      fi\n    }\n    \n    # Output the instructions to report bug
              about this script\n    report_bug() {\n      echo \"Version: $version\"\n
              \     echo \"\"\n      echo \"Please file a Bug Report at https://github.com/chef/omnitruck/issues/new\"\n
              \     echo \"Alternatively, feel free to open a Support Ticket at https://www.chef.io/support/tickets\"\n
              \     echo \"More Chef support resources can be found at https://www.chef.io/support\"\n
              \     echo \"\"\n      echo \"Please include as many details about the
              problem as possible i.e., how to reproduce\"\n      echo \"the problem
              (if possible), type of the Operating System and its version, etc.,\"\n
              \     echo \"and any other relevant details that might help us with
              troubleshooting.\"\n      echo \"\"\n    }\n    \n    checksum_mismatch()
              {\n      echo \"Package checksum mismatch!\"\n      report_bug\n      exit
              1\n    }\n    \n    unable_to_retrieve_package() {\n      echo \"Unable
              to retrieve a valid package!\"\n      report_bug\n      echo \"Metadata
              URL: $metadata_url\"\n      if test \"x$download_url\" != \"x\"; then\n
              \       echo \"Download URL: $download_url\"\n      fi\n      if test
              \"x$stderr_results\" != \"x\"; then\n        echo \"\\nDEBUG OUTPUT
              FOLLOWS:\\n$stderr_results\"\n      fi\n      exit 1\n    }\n    \n
              \   http_404_error() {\n      echo \"Omnitruck artifact does not exist
              for version $version on platform $platform\"\n      echo \"\"\n      echo
              \"Either this means:\"\n      echo \"   - We do not support $platform\"\n
              \     echo \"   - We do not have an artifact for $version\"\n      echo
              \"\"\n      echo \"This is often the latter case due to running a prerelease
              or RC version of chef\"\n      echo \"or a gem version which was only
              pushed to rubygems and not omnitruck.\"\n      echo \"\"\n      echo
              \"You may be able to set your knife[:bootstrap_version] to the most
              recent stable\"\n      echo \"release of Chef to fix this problem (or
              the most recent stable major version number).\"\n      echo \"\"\n      echo
              \"In order to test the version parameter, adventurous users may take
              the Metadata URL\"\n      echo \"below and modify the '&v=<number>'
              parameter until you successfully get a URL that\"\n      echo \"does
              not 404 (e.g. via curl or wget).  You should be able to use '&v=11'
              or '&v=12'\"\n      echo \"succesfully.\"\n      echo \"\"\n      echo
              \"If you cannot fix this problem by setting the bootstrap_version, it
              probably means\"\n      echo \"that $platform is not supported.\"\n
              \     echo \"\"\n      # deliberately do not call report_bug to suppress
              bug report noise.\n      echo \"Metadata URL: $metadata_url\"\n      if
              test \"x$download_url\" != \"x\"; then\n        echo \"Download URL:
              $download_url\"\n      fi\n      if test \"x$stderr_results\" != \"x\";
              then\n        echo \"\\nDEBUG OUTPUT FOLLOWS:\\n$stderr_results\"\n
              \     fi\n      exit 1\n    }\n    \n    capture_tmp_stderr() {\n      #
              spool up /tmp/stderr from all the commands we called\n      if test
              -f \"$tmp_dir/stderr\"; then\n        output=`cat $tmp_dir/stderr`\n
              \       stderr_results=\"${stderr_results}\\nSTDERR from $1:\\n\\n$output\\n\"\n
              \       rm $tmp_dir/stderr\n      fi\n    }\n    \n    # do_wget URL
              FILENAME\n    do_wget() {\n      echo \"trying wget...\"\n      wget
              -O \"$2\" \"$1\" 2>$tmp_dir/stderr\n      rc=$?\n      # check for 404\n
              \     grep \"ERROR 404\" $tmp_dir/stderr 2>&1 >/dev/null\n      if test
              $? -eq 0; then\n        echo \"ERROR 404\"\n        http_404_error\n
              \     fi\n    \n      # check for bad return status or empty output\n
              \     if test $rc -ne 0 || test ! -s \"$2\"; then\n        capture_tmp_stderr
              \"wget\"\n        return 1\n      fi\n    \n      return 0\n    }\n
              \   \n    # do_curl URL FILENAME\n    do_curl() {\n      echo \"trying
              curl...\"\n      curl --retry 5 -sL -D $tmp_dir/stderr \"$1\" > \"$2\"\n
              \     rc=$?\n      # check for 404\n      grep \"404 Not Found\" $tmp_dir/stderr
              2>&1 >/dev/null\n      if test $? -eq 0; then\n        echo \"ERROR
              404\"\n        http_404_error\n      fi\n    \n      # check for bad
              return status or empty output\n      if test $rc -ne 0 || test ! -s
              \"$2\"; then\n        capture_tmp_stderr \"curl\"\n        return 1\n
              \     fi\n    \n      return 0\n    }\n    \n    # do_fetch URL FILENAME\n
              \   do_fetch() {\n      echo \"trying fetch...\"\n      fetch -o \"$2\"
              \"$1\" 2>$tmp_dir/stderr\n      # check for bad return status\n      test
              $? -ne 0 && return 1\n      return 0\n    }\n    \n    # do_perl URL
              FILENAME\n    do_perl() {\n      echo \"trying perl...\"\n      perl
              -e 'use LWP::Simple; getprint($ARGV[0]);' \"$1\" > \"$2\" 2>$tmp_dir/stderr\n
              \     rc=$?\n      # check for 404\n      grep \"404 Not Found\" $tmp_dir/stderr
              2>&1 >/dev/null\n      if test $? -eq 0; then\n        echo \"ERROR
              404\"\n        http_404_error\n      fi\n    \n      # check for bad
              return status or empty output\n      if test $rc -ne 0 || test ! -s
              \"$2\"; then\n        capture_tmp_stderr \"perl\"\n        return 1\n
              \     fi\n    \n      return 0\n    }\n    \n    # do_python URL FILENAME\n
              \   do_python() {\n      echo \"trying python...\"\n      python -c
              \"import sys,urllib2 ; sys.stdout.write(urllib2.urlopen(sys.argv[1]).read())\"
              \"$1\" > \"$2\" 2>$tmp_dir/stderr\n      rc=$?\n      # check for 404\n
              \     grep \"HTTP Error 404\" $tmp_dir/stderr 2>&1 >/dev/null\n      if
              test $? -eq 0; then\n        echo \"ERROR 404\"\n        http_404_error\n
              \     fi\n    \n      # check for bad return status or empty output\n
              \     if test $rc -ne 0 || test ! -s \"$2\"; then\n        capture_tmp_stderr
              \"python\"\n        return 1\n      fi\n      return 0\n    }\n    \n
              \   # returns 0 if checksums match\n    do_checksum() {\n      if exists
              sha256sum; then\n        echo \"Comparing checksum with sha256sum...\"\n
              \       checksum=`sha256sum $1 | awk '{ print $1 }'`\n        return
              `test \"x$checksum\" = \"x$2\"`\n      elif exists shasum; then\n        echo
              \"Comparing checksum with shasum...\"\n        checksum=`shasum -a 256
              $1 | awk '{ print $1 }'`\n        return `test \"x$checksum\" = \"x$2\"`\n
              \     else\n        echo \"WARNING: could not find a valid checksum
              program, pre-install shasum or sha256sum in your O/S image to get valdation...\"\n
              \       return 0\n      fi\n    }\n    \n    # do_download URL FILENAME\n
              \   do_download() {\n      echo \"downloading $1\"\n      echo \"  to
              file $2\"\n    \n      url=`echo $1`\n      if test \"x$platform\" =
              \"xsolaris2\"; then\n        if test \"x$platform_version\" = \"x5.9\"
              -o \"x$platform_version\" = \"x5.10\"; then\n          # solaris 9 lacks
              openssl, solaris 10 lacks recent enough credentials - your base O/S
              is completely insecure, please upgrade\n          url=`echo $url | sed
              -e 's/https/http/'`\n        fi\n      fi\n    \n      # we try all
              of these until we get success.\n      # perl, in particular may be present
              but LWP::Simple may not be installed\n    \n      if exists wget; then\n
              \       do_wget $url $2 && return 0\n      fi\n    \n      if exists
              curl; then\n        do_curl $url $2 && return 0\n      fi\n    \n      if
              exists fetch; then\n        do_fetch $url $2 && return 0\n      fi\n
              \   \n      if exists perl; then\n        do_perl $url $2 && return
              0\n      fi\n    \n      if exists python; then\n        do_python $url
              $2 && return 0\n      fi\n    \n      unable_to_retrieve_package\n    }\n
              \   \n    # install_file TYPE FILENAME\n    # TYPE is \"rpm\", \"deb\",
              \"solaris\", \"sh\", etc.\n    install_file() {\n      echo \"Installing
              $project $version\"\n      case \"$1\" in\n        \"rpm\")\n          if
              test \"x$platform\" = \"xnexus\" || test \"x$platform\" = \"xios_xr\";
              then\n            echo \"installing with yum...\"\n            yum install
              -yv \"$2\"\n          else\n            echo \"installing with rpm...\"\n
              \           rpm -Uvh --oldpackage --replacepkgs \"$2\"\n          fi\n
              \         ;;\n        \"deb\")\n          echo \"installing with dpkg...\"\n
              \         dpkg -i \"$2\"\n          ;;\n        \"bff\")\n          echo
              \"installing with installp...\"\n          installp -aXYgd \"$2\" all\n
              \         ;;\n        \"solaris\")\n          echo \"installing with
              pkgadd...\"\n          echo \"conflict=nocheck\" > $tmp_dir/nocheck\n
              \         echo \"action=nocheck\" >> $tmp_dir/nocheck\n          echo
              \"mail=\" >> $tmp_dir/nocheck\n          pkgrm -a $tmp_dir/nocheck -n
              $project >/dev/null 2>&1 || true\n          pkgadd -G -n -d \"$2\" -a
              $tmp_dir/nocheck $project\n          ;;\n        \"pkg\")\n          echo
              \"installing with installer...\"\n          cd / && /usr/sbin/installer
              -pkg \"$2\" -target /\n          ;;\n        \"dmg\")\n          echo
              \"installing dmg file...\"\n          hdiutil detach \"/Volumes/chef_software\"
              >/dev/null 2>&1 || true\n          hdiutil attach \"$2\" -mountpoint
              \"/Volumes/chef_software\"\n          cd / && /usr/sbin/installer -pkg
              `find \"/Volumes/chef_software\" -name \\*.pkg` -target /\n          hdiutil
              detach \"/Volumes/chef_software\"\n          ;;\n        \"sh\" )\n
              \         echo \"installing with sh...\"\n          sh \"$2\"\n          ;;\n
              \       *)\n          echo \"Unknown filetype: $1\"\n          report_bug\n
              \         exit 1\n          ;;\n      esac\n      if test $? -ne 0;
              then\n        echo \"Installation failed\"\n        report_bug\n        exit
              1\n      fi\n    }\n    \n    if test \"x$TMPDIR\" = \"x\"; then\n      tmp=\"/tmp\"\n
              \   else\n      tmp=$TMPDIR\n    fi\n    # secure-ish temp dir creation
              without having mktemp available (DDoS-able but not expliotable)\n    tmp_dir=\"$tmp/install.sh.$$\"\n
              \   (umask 077 && mkdir $tmp_dir) || exit 1\n    \n    ############\n
              \   # end of helpers.sh\n    ############\n    \n    \n    project=chefdk\n
              \   version=latest\n    channel=unstable\n    \n    \n    # platform_detection.sh\n
              \   ############\n    # This section makes platform detection compatible
              with omnitruck on the system\n    #   it runs.\n    #\n    # Outputs:\n
              \   # $platform: Name of the platform.\n    # $platform_version: Version
              of the platform.\n    # $machine: System's architecture.\n    ############\n
              \   \n    #\n    # Platform and Platform Version detection\n    #\n
              \   # NOTE: This should now match ohai platform and platform_version
              matching.\n    # do not invented new platform and platform_version schemas,
              just make this behave\n    # like what ohai returns as platform and
              platform_version for the server.\n    #\n    # ALSO NOTE: Do not mangle
              platform or platform_version here.  It is less error\n    # prone and
              more future-proof to do that in the server, and then all omnitruck clients\n
              \   # will 'inherit' the changes (install.sh is not the only client
              of the omnitruck\n    # endpoint out there).\n    #\n    \n    machine=`uname
              -m`\n    os=`uname -s`\n    \n    if test -f \"/etc/lsb-release\" &&
              grep -q DISTRIB_ID /etc/lsb-release && ! grep -q wrlinux /etc/lsb-release;
              then\n      platform=`grep DISTRIB_ID /etc/lsb-release | cut -d \"=\"
              -f 2 | tr '[A-Z]' '[a-z]'`\n      platform_version=`grep DISTRIB_RELEASE
              /etc/lsb-release | cut -d \"=\" -f 2`\n    elif test -f \"/etc/debian_version\";
              then\n      platform=\"debian\"\n      platform_version=`cat /etc/debian_version`\n
              \   elif test -f \"/etc/redhat-release\"; then\n      platform=`sed
              's/^\\(.\\+\\) release.*/\\1/' /etc/redhat-release | tr '[A-Z]' '[a-z]'`\n
              \     platform_version=`sed 's/^.\\+ release \\([.0-9]\\+\\).*/\\1/'
              /etc/redhat-release`\n    \n      # If /etc/redhat-release exists, we
              act like RHEL by default\n      if test \"$platform\" = \"fedora\";
              then\n        # FIXME: stop remapping fedora to el\n        # FIXME:
              remove client side platform_version mangling and hard coded yolo\n        #
              Change platform version for use below.\n        platform_version=\"6.0\"\n
              \     fi\n    \n      if test \"$platform\" = \"xenserver\"; then\n
              \       # Current XenServer 6.2 is based on CentOS 5, platform is not
              reset to \"el\" server should hanlde response\n        platform=\"xenserver\"\n
              \     else\n        # FIXME: use \"redhat\"\n        platform=\"el\"\n
              \     fi\n    \n    elif test -f \"/etc/system-release\"; then\n      platform=`sed
              's/^\\(.\\+\\) release.\\+/\\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`\n
              \     platform_version=`sed 's/^.\\+ release \\([.0-9]\\+\\).*/\\1/'
              /etc/system-release | tr '[A-Z]' '[a-z]'`\n      # amazon is built off
              of fedora, so act like RHEL\n      if test \"$platform\" = \"amazon
              linux ami\"; then\n        # FIXME: remove client side platform_version
              mangling and hard coded yolo, and remapping to deprecated \"el\"\n        platform=\"el\"\n
              \       platform_version=\"6.0\"\n      fi\n    # Apple OS X\n    elif
              test -f \"/usr/bin/sw_vers\"; then\n      platform=\"mac_os_x\"\n      #
              Matching the tab-space with sed is error-prone\n      platform_version=`sw_vers
              | awk '/^ProductVersion:/ { print $2 }' | cut -d. -f1,2`\n    \n      #
              x86_64 Apple hardware often runs 32-bit kernels (see OHAI-63)\n      x86_64=`sysctl
              -n hw.optional.x86_64`\n      if test $x86_64 -eq 1; then\n        machine=\"x86_64\"\n
              \     fi\n    elif test -f \"/etc/release\"; then\n      machine=`/usr/bin/uname
              -p`\n      if grep -q SmartOS /etc/release; then\n        platform=\"smartos\"\n
              \       platform_version=`grep ^Image /etc/product | awk '{ print $3
              }'`\n      else\n        platform=\"solaris2\"\n        platform_version=`/usr/bin/uname
              -r`\n      fi\n    elif test -f \"/etc/SuSE-release\"; then\n      if
              grep -q 'Enterprise' /etc/SuSE-release;\n      then\n          platform=\"sles\"\n
              \         platform_version=`awk '/^VERSION/ {V = $3}; /^PATCHLEVEL/
              {P = $3}; END {print V \".\" P}' /etc/SuSE-release`\n      else\n          platform=\"suse\"\n
              \         platform_version=`awk '/^VERSION =/ { print $3 }' /etc/SuSE-release`\n
              \     fi\n    elif test \"x$os\" = \"xFreeBSD\"; then\n      platform=\"freebsd\"\n
              \     platform_version=`uname -r | sed 's/-.*//'`\n    elif test \"x$os\"
              = \"xAIX\"; then\n      platform=\"aix\"\n      platform_version=\"`uname
              -v`.`uname -r`\"\n      machine=\"powerpc\"\n    elif test -f \"/etc/os-release\";
              then\n      . /etc/os-release\n      if test \"x$CISCO_RELEASE_INFO\"
              != \"x\"; then\n        . $CISCO_RELEASE_INFO\n      fi\n    \n      platform=$ID\n
              \     platform_version=$VERSION\n    fi\n    \n    if test \"x$platform\"
              = \"x\"; then\n      echo \"Unable to determine platform version!\"\n
              \     report_bug\n      exit 1\n    fi\n    \n    #\n    # NOTE: platform
              manging in the install.sh is DEPRECATED\n    #\n    # - install.sh should
              be true to ohai and should not remap\n    #   platform or platform versions.\n
              \   #\n    # - remapping platform and mangling platform version numbers
              is\n    #   now the complete responsibility of the server-side endpoints\n
              \   #\n    \n    major_version=`echo $platform_version | cut -d. -f1`\n
              \   case $platform in\n      # FIXME: should remove this case statement
              completely\n      \"el\")\n        # FIXME:  \"el\" is deprecated, should
              use \"redhat\"\n        platform_version=$major_version\n        ;;\n
              \     \"debian\")\n        # FIXME: remove client-side yolo here\n        case
              $major_version in\n          \"5\") platform_version=\"6\";;  # FIXME:
              need to port this \"reverse-yolo\" into platform.rb\n          \"6\")
              platform_version=\"6\";;\n          \"7\") platform_version=\"6\";;\n
              \       esac\n        ;;\n      \"freebsd\")\n        platform_version=$major_version\n
              \       ;;\n      \"sles\")\n        platform_version=$major_version\n
              \       ;;\n      \"suse\")\n        platform_version=$major_version\n
              \       ;;\n    esac\n    \n    if test \"x$platform_version\" = \"x\";
              then\n      echo \"Unable to determine platform version!\"\n      report_bug\n
              \     exit 1\n    fi\n    \n    if test \"x$platform\" = \"xsolaris2\";
              then\n      # hack up the path on Solaris to find wget, pkgadd\n      PATH=/usr/sfw/bin:/usr/sbin:$PATH\n
              \     export PATH\n    fi\n    \n    echo \"$platform $platform_version
              $machine\"\n    \n    ############\n    # end of platform_detection.sh\n
              \   ############\n    \n    \n    # artifactory_urls.sh\n    ############\n
              \   # This section sets up the information for a build to be installed
              from artifactory\n    #  then uses $platform, $platform_version and
              $machine to select the correct\n    #  version.\n    #\n    # Inputs:\n
              \   # $platform:\n    # $platform_version:\n    # $machine:\n    #\n
              \   # Outputs:\n    # $download_url:\n    # $sha256:\n    ############\n
              \   \n    \n      artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.11/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/mac_os_x/10.11/chefdk-0.13.19+20160413172241-1.dmg.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 \" >> \"$artifact_info_dir/artifact_info\"\n
              \   \n      artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.10/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/mac_os_x/10.10/chefdk-0.13.19+20160413172241-1.dmg.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 \" >> \"$artifact_info_dir/artifact_info\"\n
              \   \n      artifact_info_dir=\"$tmp_dir/artifact_info/debian/6/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/debian/6/chefdk_0.13.19+20160413172241-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 f2b3182544dcc7b1d9167f10457c5da68328058ea326e01b4e122ee7f6eacca2\"
              >> \"$artifact_info_dir/artifact_info\"\n    \n      artifact_info_dir=\"$tmp_dir/artifact_info/debian/7/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/debian/7/chefdk_0.13.19+20160413172241-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 f2b3182544dcc7b1d9167f10457c5da68328058ea326e01b4e122ee7f6eacca2\"
              >> \"$artifact_info_dir/artifact_info\"\n    \n      artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/14.04/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 132447365fd49d1948f6f1feaf5f4c16748f0f83852232a679ac2dcebe18a8b4\"
              >> \"$artifact_info_dir/artifact_info\"\n    \n      artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.10/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/mac_os_x/10.10/chefdk-0.13.19+20160413172241-1.dmg\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 0820e1dbe8ad6a3ce151cfe6ee904c3b3b486a4f4190b695dbc4103c920d42a0\"
              >> \"$artifact_info_dir/artifact_info\"\n    \n      artifact_info_dir=\"$tmp_dir/artifact_info/debian/8/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/debian/8/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 \" >> \"$artifact_info_dir/artifact_info\"\n
              \   \n      artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/14.04/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/14.04/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 \" >> \"$artifact_info_dir/artifact_info\"\n
              \   \n      artifact_info_dir=\"$tmp_dir/artifact_info/el/7/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/el/7/chefdk-0.13.19+20160413172241-1.el7.x86_64.rpm.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 \" >> \"$artifact_info_dir/artifact_info\"\n
              \   \n      artifact_info_dir=\"$tmp_dir/artifact_info/debian/8/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/debian/8/chefdk_0.13.19+20160413172241-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 f2b3182544dcc7b1d9167f10457c5da68328058ea326e01b4e122ee7f6eacca2\"
              >> \"$artifact_info_dir/artifact_info\"\n    \n      artifact_info_dir=\"$tmp_dir/artifact_info/el/6/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/el/6/chefdk-0.13.19+20160413172241-1.el6.x86_64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 b2d0223f90ad06dd9174055203e18c2ff116401000b9bf89cf51ba44dfa86ed8\"
              >> \"$artifact_info_dir/artifact_info\"\n    \n      artifact_info_dir=\"$tmp_dir/artifact_info/el/7/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/el/7/chefdk-0.13.19+20160413172241-1.el7.x86_64.rpm\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 8d65087c6d4292888b93d1581f4608490b2a3615b0b3e92d595f7b8778bf54fa\"
              >> \"$artifact_info_dir/artifact_info\"\n    \n      artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/12.04/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/12.04/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 \" >> \"$artifact_info_dir/artifact_info\"\n
              \   \n      artifact_info_dir=\"$tmp_dir/artifact_info/windows/2008r2/i386\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/windows/2008r2/chefdk-0.13.19+20160413172241-1-x86.msi.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 \" >> \"$artifact_info_dir/artifact_info\"\n
              \   \n      artifact_info_dir=\"$tmp_dir/artifact_info/windows/2012r2/i386\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/windows/2012r2/chefdk-0.13.19+20160413172241-1-x86.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 4bdd0ceedc393e21328a904ddc2f543ed87890debe321b0ae3cc2dfe204bd066\"
              >> \"$artifact_info_dir/artifact_info\"\n    \n      artifact_info_dir=\"$tmp_dir/artifact_info/windows/2012/i386\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/windows/2012/chefdk-0.13.19+20160413172241-1-x86.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 4bdd0ceedc393e21328a904ddc2f543ed87890debe321b0ae3cc2dfe204bd066\"
              >> \"$artifact_info_dir/artifact_info\"\n    \n      artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.9/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/mac_os_x/10.9/chefdk-0.13.19+20160413172241-1.dmg\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 0820e1dbe8ad6a3ce151cfe6ee904c3b3b486a4f4190b695dbc4103c920d42a0\"
              >> \"$artifact_info_dir/artifact_info\"\n    \n      artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.9/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/mac_os_x/10.9/chefdk-0.13.19+20160413172241-1.dmg.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 \" >> \"$artifact_info_dir/artifact_info\"\n
              \   \n      artifact_info_dir=\"$tmp_dir/artifact_info/windows/2012/i386\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/windows/2012/chefdk-0.13.19+20160413172241-1-x86.msi.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 \" >> \"$artifact_info_dir/artifact_info\"\n
              \   \n      artifact_info_dir=\"$tmp_dir/artifact_info/debian/6/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/debian/6/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 \" >> \"$artifact_info_dir/artifact_info\"\n
              \   \n      artifact_info_dir=\"$tmp_dir/artifact_info/el/6/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/el/6/chefdk-0.13.19+20160413172241-1.el6.x86_64.rpm.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 \" >> \"$artifact_info_dir/artifact_info\"\n
              \   \n      artifact_info_dir=\"$tmp_dir/artifact_info/mac_os_x/10.11/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/mac_os_x/10.11/chefdk-0.13.19+20160413172241-1.dmg\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 0820e1dbe8ad6a3ce151cfe6ee904c3b3b486a4f4190b695dbc4103c920d42a0\"
              >> \"$artifact_info_dir/artifact_info\"\n    \n      artifact_info_dir=\"$tmp_dir/artifact_info/windows/2008r2/i386\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/windows/2008r2/chefdk-0.13.19+20160413172241-1-x86.msi\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 4bdd0ceedc393e21328a904ddc2f543ed87890debe321b0ae3cc2dfe204bd066\"
              >> \"$artifact_info_dir/artifact_info\"\n    \n      artifact_info_dir=\"$tmp_dir/artifact_info/debian/7/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/debian/7/chefdk_0.13.19+20160413172241-1_amd64.deb.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 \" >> \"$artifact_info_dir/artifact_info\"\n
              \   \n      artifact_info_dir=\"$tmp_dir/artifact_info/ubuntu/12.04/x86_64\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/ubuntu/12.04/chefdk_0.13.19+20160413172241-1_amd64.deb\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 132447365fd49d1948f6f1feaf5f4c16748f0f83852232a679ac2dcebe18a8b4\"
              >> \"$artifact_info_dir/artifact_info\"\n    \n      artifact_info_dir=\"$tmp_dir/artifact_info/windows/2012r2/i386\"\n
              \     mkdir -p $artifact_info_dir\n      touch \"$artifact_info_dir/artifact_info\"\n
              \     echo \"url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chefdk/0.13.19+20160413172241/windows/2012r2/chefdk-0.13.19+20160413172241-1-x86.msi.metadata.json\"
              >> \"$artifact_info_dir/artifact_info\"\n      echo \"sha256 \" >> \"$artifact_info_dir/artifact_info\"\n
              \   \n    \n    artifact_info_for_platform=\"$tmp_dir/artifact_info/$platform/$platform_version/$machine/artifact_info\"\n
              \   \n    download_url=`awk '$1 == \"url\" { print $2 }' \"$artifact_info_for_platform\"`\n
              \   sha256=`awk '$1 == \"sha256\" { print $2 }' \"$artifact_info_for_platform\"`\n
              \   \n    \n    # fetch_package.sh\n    ############\n    # This section
              fetchs a package from $download_url and verifies its metadata.\n    #\n
              \   # Inputs:\n    # $download_url:\n    # $tmp_dir:\n    # Optional
              Inputs:\n    # $cmdline_filename: Name of the package downloaded on
              local disk.\n    # $cmdline_dl_dir: Name of the directory downloaded
              package will be saved to on local disk.\n    #\n    # Outputs:\n    #
              $download_filename: Name of the downloaded file on local disk.\n    #
              $filetype: Type of the file downloaded.\n    ############\n    \n    filename=`echo
              $download_url | sed -e 's/^.*\\///'`\n    filetype=`echo $filename |
              sed -e 's/^.*\\.//'`\n    \n    # use either $tmp_dir, the provided
              directory (-d) or the provided filename (-f)\n    if test \"x$cmdline_filename\"
              != \"x\"; then\n      download_filename=\"$cmdline_filename\"\n    elif
              test \"x$cmdline_dl_dir\" != \"x\"; then\n      download_filename=\"$cmdline_dl_dir/$filename\"\n
              \   else\n      download_filename=\"$tmp_dir/$filename\"\n    fi\n    \n
              \   # ensure the parent directory where to download the installer always
              exists\n    download_dir=`dirname $download_filename`\n    (umask 077
              && mkdir -p $download_dir) || exit 1\n    \n    # check if we have that
              file locally available and if so verify the checksum\n    cached_file_available=\"false\"\n
              \   if test -f $download_filename; then\n      echo \"$download_filename
              already exists, verifiying checksum...\"\n      if do_checksum \"$download_filename\"
              \"$sha256\"; then\n        echo \"checksum compare succeeded, using
              existing file!\"\n        cached_file_available=\"true\"\n      else\n
              \       echo \"checksum mismatch, downloading latest version of the
              file\"\n      fi\n    fi\n    \n    # download if no local version of
              the file available\n    if test \"x$cached_file_available\" != \"xtrue\";
              then\n      do_download \"$download_url\"  \"$download_filename\"\n
              \     do_checksum \"$download_filename\" \"$sha256\" || checksum_mismatch\n
              \   fi\n    \n    ############\n    # end of fetch_package.sh\n    ############\n
              \   \n    \n    # install_package.sh\n    ############\n    # Installs
              a package and removed the temp directory.\n    #\n    # Inputs:\n    #
              $download_filename: Name of the file to be installed.\n    # $filetype:
              Type of the file to be installed.\n    # $version: The version requested.
              Used only for warning user if not set.\n    ############\n    \n    if
              test \"x$version\" = \"x\"; then\n      echo\n      echo \"WARNING WARNING
              WARNING WARNING WARNING WARNING WARNING WARNING WARNING\"\n      echo\n
              \     echo \"You are installing an omnibus package without a version
              pin.  If you are installing\"\n      echo \"on production servers via
              an automated process this is DANGEROUS and you will\"\n      echo \"be
              upgraded without warning on new releases, even to new major releases.\"\n
              \     echo \"Letting the version float is only appropriate in desktop,
              test, development or\"\n      echo \"CI/CD environments.\"\n      echo\n
              \     echo \"WARNING WARNING WARNING WARNING WARNING WARNING WARNING
              WARNING WARNING\"\n      echo\n    fi\n    \n    install_file $filetype
              \"$download_filename\"\n    \n    if test \"x$tmp_dir\" != \"x\"; then\n
              \     rm -r \"$tmp_dir\"\n    fi\n    \n    ############\n    # end
              of install_package.sh\n    ############\n    \n    EOL\n    chmod +x
              /tmp/chef-installer.sh\n    sudo -E /tmp/chef-installer.sh]\n    >>>>>>
              ----------------------\n    zlib(finalizer): the stream was freed prematurely.\n
              \   ---- End output of bundle exec kitchen setup  -c ----\n    Ran bundle
              exec kitchen setup  -c returned 10\n    \n    Resource Declaration:\n
              \   ---------------------\n    # In /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-dk-0.13.19/acceptance/trivial/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/cookbooks/acceptance-cookbook/recipes/provision.rb\n
              \   \n      1: kitchen \"setup\"\n    \n    Compiled Resource:\n    ------------------\n
              \   # Declared in /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-dk-0.13.19/acceptance/trivial/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/cookbooks/acceptance-cookbook/recipes/provision.rb:1:in
              `from_file'\n    \n    kitchen(\"setup\") do\n      action [:run]\n
              \     retries 0\n      retry_delay 2\n      default_guard_interpreter
              :default\n      declared_type :kitchen\n      cookbook_name \"acceptance-cookbook\"\n
              \     recipe_name \"provision\"\n      command \"setup\"\n      kitchen_options
              \"-c\"\n      kitchen_dir \"/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-dk-0.13.19/acceptance/trivial\"\n
              \     chef_channel \"unstable\"\n      chef_version \"latest\"\n    end\n
              \   \n    Platform:\n    ---------\n    x86_64-linux\n    \nStarting
              audit phase\n\n"
            10327: "\nRunning handlers:\n[2016-04-13T18:52:54+00:00] ERROR: Running
              exception handlers\nRunning handlers complete\n[2016-04-13T18:52:54+00:00]
              ERROR: Exception handlers complete\nChef Client failed. 0 resources
              updated in 01 minutes 06 seconds\n[2016-04-13T18:52:54+00:00] ERROR:
              Failed to post audit report to server. Saving report to /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-dk-0.13.19/acceptance/trivial/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/failed-audit-data.json\n[2016-04-13T18:52:54+00:00]
              FATAL: Stacktrace dumped to /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-dk-0.13.19/acceptance/trivial/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/chef-stacktrace.out\n[2016-04-13T18:52:54+00:00]
              FATAL: Please provide the contents of the stacktrace.out file if you
              file a bug report\n[2016-04-13T18:52:54+00:00] ERROR: Found 1 errors,
              they are stored in the backtrace\n[2016-04-13T18:52:56+00:00] FATAL:
              Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully
              (exit code 1)\nSTDERR: \n---- End output of chef-client -z -c /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-dk-0.13.19/acceptance/trivial/.acceptance/acceptance-cookbook/tmp/.chef/config.rb
              --force-formatter -j /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-dk-0.13.19/acceptance/trivial/.acceptance/acceptance-cookbook/tmp/dna.json
              -o acceptance-cookbook::provision --no-color ----\nRan chef-client -z
              -c /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-dk-0.13.19/acceptance/trivial/.acceptance/acceptance-cookbook/tmp/.chef/config.rb
              --force-formatter -j /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-dk-0.13.19/acceptance/trivial/.acceptance/acceptance-cookbook/tmp/dna.json
              -o acceptance-cookbook::provision --no-color returned 1\n/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:289:in
              `invalid!'\n/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:276:in
              `error!'\n/opt/chefdk/embedded/lib/ruby/gems/2.1.0/bundler/gems/chef-acceptance-49458ec493db/lib/chef-acceptance/chef_runner.rb:40:in
              `block in run!'\n/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:219:in
              `block in with_clean_env'\n/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:199:in
              `with_original_env'\n/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:205:in
              `with_clean_env'\n/opt/chefdk/embedded/lib/ruby/gems/2.1.0/bundler/gems/chef-acceptance-49458ec493db/lib/chef-acceptance/chef_runner.rb:35:in
              `run!'\n/opt/chefdk/embedded/lib/ruby/gems/2.1.0/bundler/gems/chef-acceptance-49458ec493db/lib/chef-acceptance/application.rb:144:in
              `run_command'\n/opt/chefdk/embedded/lib/ruby/gems/2.1.0/bundler/gems/chef-acceptance-49458ec493db/lib/chef-acceptance/application.rb:111:in
              `block in run_suite'\n/opt/chefdk/embedded/lib/ruby/gems/2.1.0/bundler/gems/chef-acceptance-49458ec493db/lib/chef-acceptance/application.rb:109:in
              `each'\n/opt/chefdk/embedded/lib/ruby/gems/2.1.0/bundler/gems/chef-acceptance-49458ec493db/lib/chef-acceptance/application.rb:109:in
              `run_suite'\n/opt/chefdk/embedded/lib/ruby/gems/2.1.0/bundler/gems/chef-acceptance-49458ec493db/lib/chef-acceptance/application.rb:75:in
              `block (2 levels) in start_worker'\n/opt/chefdk/embedded/lib/ruby/gems/2.1.0/bundler/gems/chef-acceptance-49458ec493db/lib/chef-acceptance/application.rb:73:in
              `loop'\n/opt/chefdk/embedded/lib/ruby/gems/2.1.0/bundler/gems/chef-acceptance-49458ec493db/lib/chef-acceptance/application.rb:73:in
              `block in start_worker'\nCHEF-ACCEPTANCE::[2016-04-13 18:52:56 +0000]
              --force-destroy specified so attempting to run the destroy recipe\nTRIVIAL::DESTROY::[2016-04-13
              18:52:56 +0000] Initialized [.acceptance_logs/trivial/destroy.log] logger...\n"
            10404: "TRIVIAL::DESTROY::[2016-04-13 18:53:06 +0000] Chef Client finished,
              2/2 resources updated in 06 seconds\nTRIVIAL::DESTROY::[2016-04-13 18:53:06
              +0000] \nTRIVIAL::DESTROY::[2016-04-13 18:53:06 +0000] [2016-04-13T18:53:06+00:00]
              ERROR: Failed to post audit report to server. Saving report to /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-dk-0.13.19/acceptance/trivial/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/failed-audit-data.json\nCHEF-ACCEPTANCE::[2016-04-13
              18:53:07 +0000] \nCHEF-ACCEPTANCE::[2016-04-13 18:53:07 +0000] chef-acceptance
              run failed\n"
            10412: |
              CHEF-ACCEPTANCE::[2016-04-13 18:53:07 +0000] | trivial | Total         | 00:01:21 | Y     |
              CHEF-ACCEPTANCE::[2016-04-13 18:53:07 +0000] | Run     | Total         | 00:01:21 | Y     |
              Build step 'Invoke XShell command' marked build as failure
              Archiving artifacts
              Recording fingerprints
          tests:
            chef-acceptance:
            - trivial (provision)
        acceptanceTiming:
        - trivial:
            provision: '00:01:04'
            force-destroy: '00:00:07'
            Total: '00:01:21'
          Run:
            Total: '00:01:21'
        - top-cookbooks:
            provision: '00:50:55'
            verify: '00:00:34'
            destroy: '00:00:33'
            Total: '00:55:32'
          Run:
            Total: '00:55:32'
        omnibusTiming: {}
      debian-6:
        result: SUCCESS
        timestamp: '2016-04-13T10:54:47-07:00'
        duration: 1167.393
        builtOn: chefdk-debian-6-tester-31349b
        url: http://manhattan.ci.chef.co/job/chefdk-test/architecture=x86_64,platform=debian-6,project=chefdk,role=tester/102/
        omnibusTiming: {}
      debian-7:
        result: SUCCESS
        timestamp: '2016-04-13T10:54:47-07:00'
        duration: 908.038
        builtOn: chefdk-debian-7-tester-6585d4
        url: http://manhattan.ci.chef.co/job/chefdk-test/architecture=x86_64,platform=debian-7,project=chefdk,role=tester/102/
        omnibusTiming: {}
      debian-8:
        result: SUCCESS
        timestamp: '2016-04-13T10:54:47-07:00'
        duration: 988.763
        builtOn: chefdk-debian-8-tester-b7ac3b
        url: http://manhattan.ci.chef.co/job/chefdk-test/architecture=x86_64,platform=debian-8,project=chefdk,role=tester/102/
        omnibusTiming: {}
      el-6:
        result: SUCCESS
        timestamp: '2016-04-13T10:54:47-07:00'
        duration: 1731.685
        builtOn: chefdk-rhel-6-tester-42bd5e
        url: http://manhattan.ci.chef.co/job/chefdk-test/architecture=x86_64,platform=el-6,project=chefdk,role=tester/102/
        omnibusTiming: {}
      el-7:
        result: SUCCESS
        timestamp: '2016-04-13T10:54:47-07:00'
        duration: 848.408
        builtOn: chefdk-rhel-7-tester-ce15ff
        url: http://manhattan.ci.chef.co/job/chefdk-test/architecture=x86_64,platform=el-7,project=chefdk,role=tester/102/
        omnibusTiming: {}
      mac_os_x-10.10:
        result: SUCCESS
        timestamp: '2016-04-13T10:54:47-07:00'
        duration: 518.321
        builtOn: chefdk-mac_os_x-10.10-tester-f8e0cd
        url: http://manhattan.ci.chef.co/job/chefdk-test/architecture=x86_64,platform=mac_os_x-10.10,project=chefdk,role=tester/102/
        omnibusTiming: {}
      mac_os_x-10.11:
        result: SUCCESS
        timestamp: '2016-04-13T10:54:47-07:00'
        duration: 436.017
        builtOn: chefdk-mac_os_x-10.11-tester-fb35b7
        url: http://manhattan.ci.chef.co/job/chefdk-test/architecture=x86_64,platform=mac_os_x-10.11,project=chefdk,role=tester/102/
        omnibusTiming: {}
      mac_os_x-10.9:
        result: SUCCESS
        timestamp: '2016-04-13T10:54:47-07:00'
        duration: 529.373
        builtOn: chefdk-mac_os_x-10.9-tester-8a14ce
        url: http://manhattan.ci.chef.co/job/chefdk-test/architecture=x86_64,platform=mac_os_x-10.9,project=chefdk,role=tester/102/
        omnibusTiming: {}
      ubuntu-12.04:
        result: SUCCESS
        timestamp: '2016-04-13T10:54:47-07:00'
        duration: 857.643
        builtOn: chefdk-ubuntu-12.04-tester-d64e0a
        url: http://manhattan.ci.chef.co/job/chefdk-test/architecture=x86_64,platform=ubuntu-12.04,project=chefdk,role=tester/102/
        omnibusTiming: {}
      ubuntu-14.04:
        result: SUCCESS
        timestamp: '2016-04-13T10:54:47-07:00'
        duration: 1092.483
        builtOn: chefdk-ubuntu-14.04-tester-48c4bf
        url: http://manhattan.ci.chef.co/job/chefdk-test/architecture=x86_64,platform=ubuntu-14.04,project=chefdk,role=tester/102/
        omnibusTiming: {}
      windows-2008r2-i386:
        result: SUCCESS
        timestamp: '2016-04-13T10:54:47-07:00'
        duration: 509.095
        builtOn: chefdk-windows-2008r2-i386-tester-e50cbf
        url: http://manhattan.ci.chef.co/job/chefdk-test/architecture=i386,platform=windows-2008r2,project=chefdk,role=tester/102/
        omnibusTiming: {}
  chefdk-build:
    result: SUCCESS
    timestamp: '2016-04-13T10:22:41-07:00'
    duration: 1916.324
    url: http://manhattan.ci.chef.co/job/chefdk-build/245/
    parameters:
      GIT_REF: master
      APPEND_TIMESTAMP: true
      DELIVERY_CHANGE: ''
      DELIVERY_SHA: ''
      EXPIRE_CACHE: false
      RELEASE_BUILD: 'false'
      PIPELINE_NAME: chefdk
      GIT_COMMIT: 577815f788a384c051fff7bb5c7cc703882f9669
      PROJECT: chefdk
      PROMOTE: 'false'
      PIPELINE_TRIGGER_BUILD_NUMBER: '151'
      ADHOC_BUILD: 'true'
      GIT_BRANCH: origin/master
      PIPELINE_TRIGGER_JOB_NAME: chefdk-trigger-ad_hoc
    runs:
      debian-6:
        result: SUCCESS
        timestamp: '2016-04-13T10:22:41-07:00'
        duration: 1405.9
        builtOn: chefdk-debian-6-builder-2ccc58
        url: http://manhattan.ci.chef.co/job/chefdk-build/architecture=x86_64,platform=debian-6,project=chefdk,role=builder/245/
        omnibusTiming: {}
      el-6:
        result: SUCCESS
        timestamp: '2016-04-13T10:22:41-07:00'
        duration: 1607.915
        builtOn: chefdk-rhel-6-builder-02167c
        url: http://manhattan.ci.chef.co/job/chefdk-build/architecture=x86_64,platform=el-6,project=chefdk,role=builder/245/
        omnibusTiming: {}
      el-7:
        result: SUCCESS
        timestamp: '2016-04-13T10:22:41-07:00'
        duration: 1246.721
        builtOn: chefdk-rhel-7-builder-b67c93
        url: http://manhattan.ci.chef.co/job/chefdk-build/architecture=x86_64,platform=el-7,project=chefdk,role=builder/245/
        omnibusTiming: {}
      mac_os_x-10.9:
        result: SUCCESS
        timestamp: '2016-04-13T10:22:41-07:00'
        duration: 637.448
        builtOn: chefdk-mac_os_x-10.9-builder-d736d1
        url: http://manhattan.ci.chef.co/job/chefdk-build/architecture=x86_64,platform=mac_os_x-10.9,project=chefdk,role=builder/245/
        omnibusTiming: {}
      ubuntu-12.04:
        result: SUCCESS
        timestamp: '2016-04-13T10:22:41-07:00'
        duration: 1343.664
        builtOn: chefdk-ubuntu-12.04-builder-efc2e0
        url: http://manhattan.ci.chef.co/job/chefdk-build/architecture=x86_64,platform=ubuntu-12.04,project=chefdk,role=builder/245/
        omnibusTiming: {}
      windows-2008r2-i386:
        result: SUCCESS
        timestamp: '2016-04-13T10:22:41-07:00'
        duration: 1909.039
        builtOn: chefdk-windows-2008r2-i386-builder-dcb6f4
        url: http://manhattan.ci.chef.co/job/chefdk-build/architecture=i386,platform=windows-2008r2,project=chefdk,role=builder/245/
        omnibusTiming: {}
  chefdk-trigger-ad_hoc:
    result: SUCCESS
    timestamp: '2016-04-13T10:22:28-07:00'
    duration: 7.999
    url: http://manhattan.ci.chef.co/job/chefdk-trigger-ad_hoc/151/
    causes:
    - shortDescription: Started by user Matt Wrock
      userId: mwrock
      userName: Matt Wrock
    parameters:
      GIT_REF: master
      EXPIRE_CACHE: false
    runs: {}
