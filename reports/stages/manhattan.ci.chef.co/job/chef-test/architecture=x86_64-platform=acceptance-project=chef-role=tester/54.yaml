---
result: FAILURE
failure_category: code
failure_cause: chef_acceptance[fips::provision,top-cookbooks::provision]
failed_in:
  chef_acceptance:
  - fips::provision
  - top-cookbooks::provision
  step: CHEF-ACCEPTANCE
timestamp: 2016-06-30 18:26:25 UTC
url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=acceptance,project=chef,role=tester/54/
trigger_url: http://manhattan.ci.chef.co/job/chef-trigger-release/40/
duration: 50m14s
logs:
  consoleText:
    15074: |
      FIPS::PROVISION::[2016-06-30 18:38:31 +0000]                 D      -Composite Exception--
      FIPS::PROVISION::[2016-06-30 18:38:31 +0000]                 D      Class: Kitchen::ActionFailed
      FIPS::PROVISION::[2016-06-30 18:38:31 +0000]                 D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                      There was an error invoking '@{
                        "ee541b042a0f0ef2da5f8f2861cc4131" = @{
    15178: |2
                      D      ---Nested Exception---
                      D      Class: Kitchen::ActionFailed
                      D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                      There was an error invoking '@{
                        "ee541b042a0f0ef2da5f8f2861cc4131" = @{
    15296: |
      Starting audit phase
      FIPS::PROVISION::[2016-06-30 18:38:31 +0000]
            ================================================================================
            Error executing action `run` on resource 'execute[bundle exec kitchen converge  -c -l debug]'
            ================================================================================

            Mixlib::ShellOut::ShellCommandFailed
            ------------------------------------
            Expected process to exit with [0], but received '20'
            ---- Begin output of bundle exec kitchen converge  -c -l debug ----
            STDOUT: -----> Starting Kitchen (v1.9.2)
            D      winrm requested, loading winrm gem (["~> 1.6"])
            D      winrm is loaded.
            D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
            D      winrm-fs is loaded.
            D      winrm requested, loading winrm gem (["~> 1.6"])
            D      winrm was already loaded.
            D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
            D      winrm-fs was already loaded.
            -----> Creating <fips-unit-functional-windows-2012r2>...
            D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
            -----> Creating <fips-unit-functional-centos-6>...
            D      platform name centos-6 appears to be a standard platform. Searching for centos 6 ...
            D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
            D      Searching for images matching {:name=>"CentOS-6.5-GA-*", :"owner-alias"=>"aws-marketplace", :architecture=>"x86_64", :"virtualization-type"=>"paravirtual", :"block-device-mapping.volume-type"=>"standard", :"image-type"=>"machine"} ...
            -----> Creating <fips-integration-centos-6>...
            D      platform name centos-6 appears to be a standard platform. Searching for centos 6 ...
            D      Searching for images matching {:name=>"CentOS-6.5-GA-*", :"owner-alias"=>"aws-marketplace", :architecture=>"x86_64", :"virtualization-type"=>"paravirtual", :"block-device-mapping.volume-type"=>"standard", :"image-type"=>"machine"} ...
            -----> Creating <fips-integration-windows-2012r2>...
            D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
            D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
            D      Search returned 3 images:
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
            D      Search returned 3 images:
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
            D      Image for fips-unit-functional-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2
      FIPS::PROVISION::[2016-06-30 18:38:31 +0000] 016-06-16T16:58:39.000Z
                   Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
    18815: |2
            D      -Composite Exception--
            D      Class: Kitchen::ActionFailed
            D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
            There was an error invoking '@{
              "ee541b042a0f0ef2da5f8f2861cc4131" = @{
    18920: |2
            D      ---Nested Exception---
            D      Class: Kitchen::ActionFailed
            D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
            There was an error invoking '@{
              "ee541b042a0f0ef2da5f8f2861cc4131" = @{
    19076: |2


          ================================================================================
          Error executing action `run` on resource 'kitchen[converge]'
          ================================================================================

          Mixlib::ShellOut::ShellCommandFailed
          ------------------------------------
          execute[bundle exec kitchen converge  -c -l debug] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 36) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '20'
          ---- Begin output of bundle exec kitchen converge  -c -l debug ----
          STDOUT: -----> Starting Kitchen (v1.9.2)
          D      winrm requested, loading winrm gem (["~> 1.6"])
          D      winrm is loaded.
          D      winrm-fs request
      FIPS::PROVISION::[2016-06-30 18:38:32 +0000] ed, loading winrm-fs gem (["~> 0.4.1"])
          D      winrm-fs is loaded.
    22597: |2
          D      -Composite Exception--
          D      Class: Kitchen::ActionFailed
          D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
          There was an error invoking '@{
            "ee541b042a0f0ef2da5f8f2861cc4131" = @{
    22702: |2
          D      ---Nested Exception---
          D      Class: Kitchen::ActionFailed
          D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
          There was an error invoking '@{
            "ee541b042a0f0ef2da5f8f2861cc4131" = @{
    22861: |
      FIPS::PROVISION::[2016-06-30 18:38:34 +0000] Running handlers:
      FIPS::PROVISION::[2016-06-30 18:38:34 +0000]
      FIPS::PROVISION::[2016-06-30 18:38:34 +0000] [2016-06-30T18:38:34+00:00] ERROR: Running exception handlers
      FIPS::PROVISION::[2016-06-30 18:38:34 +0000] Running handlers complete
      FIPS::PROVISION::[2016-06-30 18:38:34 +0000] [2016-06-30T18:38:34+00:00] ERROR: Exception handlers complete
      FIPS::PROVISION::[2016-06-30 18:38:34 +0000] Chef Client failed. 0 resources updated in 05 minutes 36 seconds
      FIPS::PROVISION::[2016-06-30 18:38:34 +0000]
      FIPS::PROVISION::[2016-06-30 18:38:34 +0000] [2016-06-30T18:38:34+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/chef-stacktrace.out
      FIPS::PROVISION::[2016-06-30 18:38:34 +0000] [2016-06-30T18:38:34+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
      FIPS::PROVISION::[2016-06-30 18:38:34 +0000] [2016-06-30T18:38:34+00:00] ERROR: Found 1 errors, they are stored in the backtrace
      TOP-COOKBOOKS::PROVISION::[2016-06-30 18:38:35 +0000]                   D      [WinRM] opening remote shell on http://10.194.11.85:5985/wsman
      FIPS::PROVISION::[2016-06-30 18:38:35 +0000] [2016-06-30T18:38:35+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
      CHEF-ACCEPTANCE::[2016-06-30 18:38:35 +0000] Encountered an error running the recipe provision: Expected process to exit with [0], but received '1'
      ---- Begin output of chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/dna.json -o acceptance-cookbook::provision --no-color ----
    26332: |2
                      D      -Composite Exception--
                      D      Class: Kitchen::ActionFailed
                      D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                      There was an error invoking '@{
                        "ee541b042a0f0ef2da5f8f2861cc4131" = @{
    26435: |2
                      D      ---Nested Exception---
                      D      Class: Kitchen::ActionFailed
                      D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
                      There was an error invoking '@{
                        "ee541b042a0f0ef2da5f8f2861cc4131" = @{
    26542: |2
                      D      [WinRM] remote shell AE1D79B9-C96C-4F04-BB8F-CE5ED3CCECCC closed

            ================================================================================
            Error executing action `run` on resource 'execute[bundle exec kitchen converge  -c -l debug]'
            ================================================================================

            Mixlib::ShellOut::ShellCommandFailed
            ------------------------------------
            Expected process to exit with [0], but received '20'
            ---- Begin output of bundle exec kitchen converge  -c -l debug ----
            STDOUT: -----> Starting Kitchen (v1.9.2)
            D      winrm requested, loading winrm gem (["~> 1.6"])
            D      winrm is loaded.
            D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
            D      winrm-fs is loaded.
            D      winrm requested, loading winrm gem (["~> 1.6"])
            D      winrm was already loaded.
            D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
            D      winrm-fs was already loaded.
            -----> Creating <fips-unit-functional-windows-2012r2>...
            D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
            -----> Creating <fips-unit-functional-centos-6>...
            D      platform name centos-6 appears to be a standard platform. Searching for centos 6 ...
            D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
            D      Searching for images matching {:name=>"CentOS-6.5-GA-*", :"owner-alias"=>"aws-marketplace", :architecture=>"x86_64", :"virtualization-type"=>"paravirtual", :"block-device-mapping.volume-type"=>"standard", :"image-type"=>"machine"} ...
            -----> Creating <fips-integration-centos-6>...
            D      platform name centos-6 appears to be a standard platform. Searching for centos 6 ...
            D      Searching for images matching {:name=>"CentOS-6.5-GA-*", :"owner-alias"=>"aws-marketplace", :architecture=>"x86_64", :"virtualization-type"=>"paravirtual", :"block-device-mapping.volume-type"=>"standard", :"image-type"=>"machine"} ...
            -----> Creating <fips-integration-windows-2012r2>...
            D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
            D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
            D      Search returned 3 images:
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
            D      Search returned 3 images:
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
            D      Image for fips-unit-functional-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                   Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
            D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
                   If you are not using an account that qualifies under the AWS
            free-tier, you may be charged to run these suites. The charge
            should be minimal, but neither Test Kitchen nor its maintainers
            are responsible for your incurred costs.

            D      Creating EC2 instance in region us-west-2 with properties:
            D      - instance_type = "m3.large"
            D      - ebs_optimized = false
            D      - image_id = "ami-8d0acfed"
            D      - key_name = "jenkins"
            D      - subnet_id = "subnet-19ac017c"
            D      - private_ip_address = nil
            D      - placement = {:availability_zone=>"us-west-2a"}
            D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
            D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
            D      Image for fips-integration-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                   Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
            D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
                   If you are not using an account that qualifies under the AWS
            free-tier, you may be charged to run these suites. The charge
            should be minimal, but neither Test Kitchen nor its maintainers
            are responsible for your incurred costs.

            D      Creating EC2 instance in region us-west-2 with properties:
            D      - instance_type = "m3.large"
            D      - ebs_optimized = false
            D      - image_id = "ami-8d0acfed"
            D      - key_name = "jenkins"
            D      - subnet_id = "subnet-19ac017c"
            D      - private_ip_address = nil
            D      - placement = {:availability_zone=>"us-west-2a"}
            D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
            D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
            D      Search returned 1 images:
            D      - CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2: Detected centos 6.5 x86_64.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
            D      Search returned 1 images:
            D      - CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2: Detected centos 6.5 x86_64.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
            D      Image for fips-unit-functional-centos-6: CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                   Detected platform: centos version 6.5 on x86_64. Instance Type: m3.large. Default username: root (default).
            D      No SSH username specified: using default username root  for image ami-b6bdde86, which we detected as centos 6.5 x86_64.
                   If you are not using an account that qualifies under the AWS
            free-tier, you may be charged to run these suites. The charge
            should be minimal, but neither Test Kitchen nor its maintainers
            are responsible for your incurred costs.

            D      Creating EC2 instance in region us-west-2 with properties:
            D      - instance_type = "m3.large"
            D      - ebs_optimized = false
            D      - image_id = "ami-b6bdde86"
            D      - key_name = "jenkins"
            D      - subnet_id = "subnet-19ac017c"
            D      - private_ip_address = nil
            D      Image for fips-integration-centos-6: CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                   Detected platform: centos version 6.5 on x86_64. Instance Type: m3.large. Default username: root (default).
            D      No SSH username specified: using default username root  for image ami-b6bdde86, which we detected as centos 6.5 x86_64.
                   If you are not using an account that qualifies under the AWS
            free-tier, you may be charged to run these suites. The charge
            should be minimal, but neither Test Kitchen nor its maintainers
            are responsible for your incurred costs.

            D      Creating EC2 instance in region us-west-2 with properties:
            D      - instance_type = "m3.large"
            D      - placement = {:availability_zone=>"us-west-2a"}
            D      - ebs_optimized = false
            D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
            D      - image_id = "ami-b6bdde86"
            D      - key_name = "jenkins"
            D      - subnet_id = "subnet-19ac017c"
            D      - private_ip_address = nil
            D      - placement = {:availability_zone=>"us-west-2a"}
            D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                   Instance <i-a4548d0b> requested.
                   Polling AWS for existence, attempt 0...
                   Instance <i-39558c96> requested.
                   Polling AWS for existence, attempt 0...
                   Attempting to tag the instance, 0 retries
                   Attempting to tag the instance, 0 retries
                   EC2 instance <i-a4548d0b> created.
                   Waited 0/300s for instance <i-a4548d0b> to become ready.
                   EC2 instance <i-39558c96> created.
                   Waited 0/300s for instance <i-39558c96> to become ready.
                   Instance <i-fa548d55> requested.
                   Polling AWS for existence, attempt 0...
                   Instance <i-38558c97> requested.
                   Polling AWS for existence, attempt 0...
                   Attempting to tag the instance, 0 retries
                   Attempting to tag the instance, 0 retries
                   EC2 instance <i-38558c97> created.
                   Waited 0/300s for instance <i-38558c97> to become ready.
                   EC2 instance <i-fa548d55> created.
                   Waited 0/300s for instance <i-fa548d55> to become ready.
                   Waited 5/300s for instance <i-a4548d0b> to become ready.
                   Waited 5/300s for instance <i-39558c96> to become ready.
                   Waited 5/300s for instance <i-38558c97> to become ready.
                   Waited 5/300s for instance <i-fa548d55> to become ready.
                   Waited 10/300s for instance <i-39558c96> to become ready.
                   Waited 10/300s for instance <i-a4548d0b> to become ready.
                   Waited 10/300s for instance <i-38558c97> to become ready.
                   Waited 10/300s for instance <i-fa548d55> to become ready.
                   Waited 15/300s for instance <i-39558c96> to become ready.
                   Waited 15/300s for instance <i-a4548d0b> to become ready.
                   Waited 15/300s for instance <i-38558c97> to become ready.
                   Waited 15/300s for instance <i-fa548d55> to become ready.
                   Waited 20/300s for instance <i-39558c96> to become ready.
                   Waited 20/300s for instance <i-a4548d0b> to become ready.
                   Waited 20/300s for instance <i-38558c97> to become ready.
                   Waited 20/300s for instance <i-fa548d55> to become ready.
                   EC2 instance <i-fa548d55> ready.
            D      [SSH] opening connection to root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"]}>
                   Waited 25/300s for instance <i-39558c96> to become ready.
                   Waited 25/300s for instance <i-a4548d0b> to become ready.
                   Waited 25/300s for instance <i-38558c97> to become ready.
                   Waited 30/300s for instance <i-39558c96> to become ready.
                   Waited 30/300s for instance <i-a4548d0b> to become ready.
                   Waited 30/300s for instance <i-38558c97> to become ready.
                   EC2 instance <i-38558c97> ready.
            D      [SSH] opening connection to root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"]}>
            D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                   Waiting for SSH service on 10.194.13.49:22, retrying in 3 seconds
                   Waited 35/300s for instance <i-39558c96> to become ready.
                   Waited 35/300s for instance <i-a4548d0b> to become ready.
            D      [SSH] opening connection to root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                   Waited 40/300s for instance <i-39558c96> to become ready.
                   Waited 40/300s for instance <i-a4548d0b> to become ready.
            D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                   Waiting for SSH service on 10.194.11.20:22, retrying in 3 seconds
                   Waited 45/300s for instance <i-a4548d0b> to become ready.
                   Waited 45/300s for instance <i-39558c96> to become ready.
            D      [SSH] opening connection to root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                   Waited 50/300s for instance <i-a4548d0b> to become ready.
                   Waited 50/300s for instance <i-39558c96> to become ready.
            D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                   Waiting for SSH service on 10.194.13.49:22, retrying in 3 seconds
            D      [SSH] opening connection to root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                   Waited 55/300s for instance <i-a4548d0b> to become ready.
                   Waited 55/300s for instance <i-39558c96> to become ready.
                   Waited 60/300s for instance <i-a4548d0b> to become ready.
                   Waited 60/300s for instance <i-39558c96> to become ready.
            D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                   Waiting for SSH service on 10.194.11.20:22, retrying in 3 seconds
            D      [SSH] opening connection to root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                   Waited 65/300s for instance <i-a4548d0b> to become ready.
                   Waited 65/300s for instance <i-39558c96> to become ready.
            D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                   Waiting for SSH service on 10.194.13.49:22, retrying in 3 seconds
                   Waited 70/300s for instance <i-a4548d0b> to become ready.
                   Waited 70/300s for instance <i-39558c96> to become ready.
            D      [SSH] opening connection to root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                   Waited 75/300s for instance <i-a4548d0b> to become ready.
                   Waited 75/300s for instance <i-39558c96> to become ready.
            D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                   Waiting for SSH service on 10.194.11.20:22, retrying in 3 seconds
                   Waited 80/300s for instance <i-a4548d0b> to become ready.
                   Waited 80/300s for instance <i-39558c96> to become ready.
            D      [SSH] opening connection to root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                   Waited 85/300s for instance <i-a4548d0b> to become ready.
                   Waited 85/300s for instance <i-39558c96> to become ready.
            D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                   Waiting for SSH service on 10.194.13.49:22, retrying in 3 seconds
            D      [SSH] opening connection to root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                   Waited 90/300s for instance <i-a4548d0b> to become ready.
                   Waited 90/300s for instance <i-39558c96> to become ready.
                   Waited 95/300s for instance <i-a4548d0b> to become ready.
                   Waited 95/300s for instance <i-39558c96> to become ready.
            D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                   Waiting for SSH service on 10.194.11.20:22, retrying in 3 seconds
            D      [SSH] connection failed (#<Net::SSH::AuthenticationFailed: Authentication failed for user root@10.194.13.49>)
                   Waiting for SSH service on 10.194.13.49:22, retrying in 3 seconds
            D      [SSH] opening connection to root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
            D      [SSH] root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (echo '[SSH] Established')
            D      [SSH] opening connection to root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
            D      [SSH] root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (echo '[SSH] Established')
                   bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                   [SSH] Established
            D      Using sudo_command='sudo -E' for ohai hints
            D      [SSH] reusing existing connection root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
            D      [SSH] root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E mkdir -p /etc/chef/ohai/hints; sudo -E touch /etc/chef/ohai/hints/ec2.json)
                   bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                   bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                   [SSH] Established
            D      Using sudo_command='sudo -E' for ohai hints
            D      [SSH] reusing existing connection root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
            D      [SSH] root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E mkdir -p /etc/chef/ohai/hints; sudo -E touch /etc/chef/ohai/hints/ec2.json)
                   bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
            D      ec2:create '10.194.11.20'
                   Finished creating <fips-integration-centos-6> (1m48.73s).
            -----> Converging <fips-integration-centos-6>...
                   Preparing files for transfer
            D      Creating local sandbox in /tmp/cheftest/fips-integration-centos-6-sandbox-20160630-30892-1ya4oq6
                   Preparing dna.json
            D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                   Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                   Removing non-cookbook files before transfer
                   Preparing validation.pem
            D      Using a dummy validation.pem
                   Preparing client.rb
            D      Creating client.rb from {:node_name=>"fips-integration-centos-6", :checksum_path=>"/tmp/kitchen/checksums", :file_cache_path=>"/tmp/kitchen/cache", :file_backup_path=>"/tmp/kitchen/backup", :cookbook_path=>["/tmp/kitchen/cookbooks", "/tmp/kitchen/site-cookbooks"], :data_bag_path=>"/tmp/kitchen/data_bags", :environment_path=>"/tmp/kitchen/environments", :node_path=>"/tmp/kitchen/nodes", :role_path=>"/tmp/kitchen/roles", :client_path=>"/tmp/kitchen/clients", :user_path=>"/tmp/kitchen/users", :validation_key=>"/tmp/kitchen/validation.pem", :client_key=>"/tmp/kitchen/client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"/tmp/kitchen/encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
            D      [SSH] reusing existing connection root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
            D      ec2:create '10.194.13.49'
                   Finished creating <fips-unit-functional-centos-6> (1m48.79s).
            -----> Converging <fips-unit-functional-centos-6>...
                   Preparing files for transfer
            D      Creating local sandbox in /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160630-30892-hwedvi
                   Preparing dna.json
            D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                   Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                   Removing non-cookbook files before transfer
                   Preparing validation.pem
            D      Using a dummy validation.pem
                   Preparing client.rb
            D      Creating client.rb from {:node_name=>"fips-unit-functional-centos-6", :checksum_path=>"/tmp/kitchen/checksums", :file_cache_path=>"/tmp/kitchen/cache", :file_backup_path=>"/tmp/kitchen/backup", :cookbook_path=>["/tmp/kitchen/cookbooks", "/tmp/kitchen/site-cookbooks"], :data_bag_path=>"/tmp/kitchen/data_bags", :environment_path=>"/tmp/kitchen/environments", :node_path=>"/tmp/kitchen/nodes", :role_path=>"/tmp/kitchen/roles", :client_path=>"/tmp/kitchen/clients", :user_path=>"/tmp/kitchen/users", :validation_key=>"/tmp/kitchen/validation.pem", :client_key=>"/tmp/kitchen/client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"/tmp/kitchen/encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
            D      [SSH] reusing existing connection root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
            D      [SSH] root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E cat > /tmp/chef-installer.sh <<"EOL"
            #!/bin/bash
            #!/bin/sh
            # WARNING: REQUIRES /bin/sh
            #
            # - must run on /bin/sh on solaris 9
            # - must run on /bin/sh on AIX 6.x
            #
            # Copyright:: Copyright (c) 2010-2015 Chef Software, Inc.
            # License:: Apache License, Version 2.0
            #
            # Licensed under the Apache License, Version 2.0 (the "License");
            # you may not use this file except in compliance with the License.
            # You may obtain a copy of the License at
            #
            #     http://www.apache.org/licenses/LICENSE-2.0
            #
            # Unless required by applicable law or agreed to in writing, software
            # distributed under the License is distributed on an "AS IS" BASIS,
            # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
            # See the License for the specific language governing permissions and
            # limitations under the License.
            #

            # helpers.sh
            ############
            # This section has some helper functions to make life easier.
            #
            # Outputs:
            # $tmp_dir: secure-ish temp directory that can be used during installation.
            ############

            # Check whether a command exists - returns 0 if it does, 1 if it does not
            exists() {
              if command -v $1 >/dev/null 2>&1
              then
                return 0
              else
                return 1
              fi
            }

            # Output the instructions to report bug about this script
            report_bug() {
              echo "Version: $version"
              echo ""
              echo "Please file a Bug Report at https://github.com/chef/omnitruck/issues/new"
              echo "Alternatively, feel free to open a Support Ticket at https://www.chef.io/support/tickets"
              echo "More Chef support resources can be found at https://www.chef.io/support"
              echo ""
              echo "Please include as many details about the problem as possible i.e., how to reproduce"
              echo "the problem (if possible), type of the Operating System and its version, etc.,"
              echo "and any other relevant details that might help us with troubleshooting."
              echo ""
            }

            checksum_mismatch() {
              echo "Package checksum mismatch!"
              report_bug
              exit 1
            }

            unable_to_retrieve_package() {
              echo "Unable to retrieve a valid package!"
              report_bug
              echo "Metadata URL: $metadata_url"
              if test "x$download_url" != "x"; then
                echo "Download URL: $download_url"
              fi
              if test "x$stderr_results" != "x"; then
                echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
              fi
              exit 1
            }

            http_404_error() {
              echo "Omnitruck artifact does not exist for version $version on platform $platform"
              echo ""
              echo "Either this means:"
              echo "   - We do not support $platform"
              echo "   - We do not have an artifact for $version"
              echo ""
              echo "This is often the latter case due to running a prerelease or RC version of chef"
              echo "or a gem version which was only pushed to rubygems and not omnitruck."
              echo ""
              echo "You may be able to set your knife[:bootstrap_version] to the most recent stable"
              echo "release of Chef to fix this problem (or the most recent stable major version number)."
              echo ""
              echo "In order to test the version parameter, adventurous users may take the Metadata URL"
              echo "below and modify the '&v=<number>' parameter until you successfully get a URL that"
              echo "does not 404 (e.g. via curl or wget).  You should be able to use '&v=11' or '&v=12'"
              echo "succesfully."
              echo ""
              echo "If you cannot fix this problem by setting the bootstrap_version, it probably means"
              echo "that $platform is not supported."
              echo ""
              # deliberately do not call report_bug to suppress bug report noise.
              echo "Metadata URL: $metadata_url"
              if test "x$download_url" != "x"; then
                echo "Download URL: $download_url"
              fi
              if test "x$stderr_results" != "x"; then
                echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
              fi
              exit 1
            }

            capture_tmp_stderr() {
              # spool up /tmp/stderr from all the commands we called
              if test -f "$tmp_dir/stderr"; then
                output=`cat $tmp_dir/stderr`
                stderr_results="${stderr_results}\nSTDERR from $1:\n\n$output\n"
                rm $tmp_dir/stderr
              fi
            }

            # do_wget URL FILENAME
            do_wget() {
              echo "trying wget..."
              wget -O "$2" "$1" 2>$tmp_dir/stderr
              rc=$?
              # check for 404
              grep "ERROR 404" $tmp_dir/stderr 2>&1 >/dev/null
              if test $? -eq 0; then
                echo "ERROR 404"
                http_404_error
              fi

              # check for bad return status or empty output
              if test $rc -ne 0 || test ! -s "$2"; then
                capture_tmp_stderr "wget"
                return 1
              fi

              return 0
            }

            # do_curl URL FILENAME
            do_curl() {
              echo "trying curl..."
              curl --retry 5 -sL -D $tmp_dir/stderr "$1" > "$2"
              rc=$?
              # check for 404
              grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
              if test $? -eq 0; then
                echo "ERROR 404"
                http_404_error
              fi

              # check for bad return status or empty output
              if test $rc -ne 0 || test ! -s "$2"; then
                capture_tmp_stderr "curl"
                return 1
              fi

              return 0
            }

            # do_fetch URL FILENAME
            do_fetch() {
              echo "trying fetch..."
              fetch -o "$2" "$1" 2>$tmp_dir/stderr
              # check for bad return status
              test $? -ne 0 && return 1
              return 0
            }

            # do_perl URL FILENAME
            do_perl() {
              echo "trying perl..."
              perl -e 'use LWP::Simple; getprint($ARGV[0]);' "$1" > "$2" 2>$tmp_dir/stderr
              rc=$?
              # check for 404
              grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
              if test $? -eq 0; then
                echo "ERROR 404"
                http_404_error
              fi

              # check for bad return status or empty output
              if test $rc -ne 0 || test ! -s "$2"; then
                capture_tmp_stderr "perl"
                return 1
              fi

              return 0
            }

            # do_python URL FILENAME
            do_python() {
              echo "trying python..."
              python -c "import sys,urllib2 ; sys.stdout.write(urllib2.urlopen(sys.argv[1]).read())" "$1" > "$2" 2>$tmp_dir/stderr
              rc=$?
              # check for 404
              grep "HTTP Error 404" $tmp_dir/stderr 2>&1 >/dev/null
              if test $? -eq 0; then
                echo "ERROR 404"
                http_404_error
              fi

              # check for bad return status or empty output
              if test $rc -ne 0 || test ! -s "$2"; then
                capture_tmp_stderr "python"
                return 1
              fi
              return 0
            }

            # returns 0 if checksums match
            do_checksum() {
              if exists sha256sum; then
                echo "Comparing checksum with sha256sum..."
                checksum=`sha256sum $1 | awk '{ print $1 }'`
                return `test "x$checksum" = "x$2"`
              elif exists shasum; then
                echo "Comparing checksum with shasum..."
                checksum=`shasum -a 256 $1 | awk '{ print $1 }'`
                return `test "x$checksum" = "x$2"`
              else
                echo "WARNING: could not find a valid checksum program, pre-install shasum or sha256sum in your O/S image to get valdation..."
                return 0
              fi
            }

            # do_download URL FILENAME
            do_download() {
              echo "downloading $1"
              echo "  to file $2"

              url=`echo $1`
              if test "x$platform" = "xsolaris2"; then
                if test "x$platform_version" = "x5.9" -o "x$platform_version" = "x5.10"; then
                  # solaris 9 lacks openssl, solaris 10 lacks recent enough credentials - your base O/S is completely insecure, please upgrade
                  url=`echo $url | sed -e 's/https/http/'`
                fi
              fi

              # we try all of these until we get success.
              # perl, in particular may be present but LWP::Simple may not be installed

              if exists wget; then
                do_wget $url $2 && return 0
              fi

              if exists curl; then
                do_curl $url $2 && return 0
              fi

              if exists fetch; then
                do_fetch $url $2 && return 0
              fi

              if exists perl; then
                do_perl $url $2 && return 0
              fi

              if exists python; then
                do_python $url $2 && return 0
              fi

              unable_to_retrieve_package
            }

            # install_file TYPE FILENAME
            # TYPE is "rpm", "deb", "solaris", "sh", etc.
            install_file() {
              echo "Installing $project $version"
              case "$1" in
                "rpm")
                  if test "x$platform" = "xnexus" || test "x$platform" = "xios_xr"; then
                    echo "installing with yum..."
                    yum install -yv "$2"
                  else
                    echo "installing with rpm..."
                    rpm -Uvh --oldpackage --replacepkgs "$2"
                  fi
                  ;;
                "deb")
                  echo "installing with dpkg..."
                  dpkg -i "$2"
                  ;;
                "bff")
                  echo "installing with installp..."
                  installp -aXYgd "$2" all
                  ;;
                "solaris")
                  echo "installing with pkgadd..."
                  echo "conflict=nocheck" > $tmp_dir/nocheck
                  echo "action=nocheck" >> $tmp_dir/nocheck
                  echo "mail=" >> $tmp_dir/nocheck
                  pkgrm -a $tmp_dir/nocheck -n $project >/dev/null 2>&1 || true
                  pkgadd -G -n -d "$2" -a $tmp_dir/nocheck $project
                  ;;
                "pkg")
                  echo "installing with installer..."
                  cd / && /usr/sbin/installer -pkg "$2" -target /
                  ;;
                "dmg")
                  echo "installing dmg file..."
                  hdiutil detach "/Volumes/chef_software" >/dev/null 2>&1 || true
                  hdiutil attach "$2" -mountpoint "/Volumes/chef_software"
                  cd / && /usr/sbin/installer -pkg `find "/Volumes/chef_software" -name \*.pkg` -target /
                  hdiutil detach "/Volumes/chef_software"
                  ;;
                "sh" )
                  echo "installing with sh..."
                  sh "$2"
                  ;;
                *)
                  echo "Unknown filetype: $1"
                  report_bug
                  exit 1
                  ;;
              esac
              if test $? -ne 0; then
                echo "Installation failed"
                report_bug
                exit 1
              fi
            }

            if test "x$TMPDIR" = "x"; then
              tmp="/tmp"
            else
              tmp=$TMPDIR
            fi
            # secure-ish temp dir creation without having mktemp available (DDoS-able but not expliotable)
            tmp_dir="$tmp/install.sh.$$"
            (umask 077 && mkdir $tmp_dir) || exit 1

            ############
            # end of helpers.sh
            ############


            project=chef
            version=12.12.10
            channel=unstable


            # platform_detection.sh
            ############
            # This section makes platform detection compatible with omnitruck on the system
            #   it runs.
            #
            # Outputs:
            # $platform: Name of the platform.
            # $platform_version: Version of the platform.
            # $machine: System's architecture.
            ############

            #
            # Platform and Platform Version detection
            #
            # NOTE: This should now match ohai platform and platform_version matching.
            # do not invented new platform and platform_version schemas, just make this behave
            # like what ohai returns as platform and platform_version for the server.
            #
            # ALSO NOTE: Do not mangle platform or platform_version here.  It is less error
            # prone and more future-proof to do that in the server, and then all omnitruck clients
            # will 'inherit' the changes (install.sh is not the only client of the omnitruck
            # endpoint out there).
            #

            machine=`uname -m`
            os=`uname -s`

            if test -f "/etc/lsb-release" && grep -q DISTRIB_ID /etc/lsb-release && ! grep -q wrlinux /etc/lsb-release; then
              platform=`grep DISTRIB_ID /etc/lsb-release | cut -d "=" -f 2 | tr '[A-Z]' '[a-z]'`
              platform_version=`grep DISTRIB_RELEASE /etc/lsb-release | cut -d "=" -f 2`
            elif test -f "/etc/debian_version"; then
              platform="debian"
              platform_version=`cat /etc/debian_version`
            elif test -f "/etc/redhat-release"; then
              platform=`sed 's/^\(.\+\) release.*/\1/' /etc/redhat-release | tr '[A-Z]' '[a-z]'`
              platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/redhat-release`

              # If /etc/redhat-release exists, we act like RHEL by default
              if test "$platform" = "fedora"; then
                # FIXME: stop remapping fedora to el
                # FIXME: remove client side platform_version mangling and hard coded yolo
                # Change platform version for use below.
                platform_version="6.0"
              fi

              if test "$platform" = "xenserver"; then
                # Current XenServer 6.2 is based on CentOS 5, platform is not reset to "el" server should hanlde response
                platform="xenserver"
              else
                # FIXME: use "redhat"
                platform="el"
              fi

            elif test -f "/etc/system-release"; then
              platform=`sed 's/^\(.\+\) release.\+/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
              platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
              # amazon is built off of fedora, so act like RHEL
              if test "$platform" = "amazon linux ami"; then
                # FIXME: remove client side platform_version mangling and hard coded yolo, and remapping to deprecated "el"
                platform="el"
                platform_version="6.0"
              fi
            # Apple OS X
            elif test -f "/usr/bin/sw_vers"; then
              platform="mac_os_x"
              # Matching the tab-space with sed is error-prone
              platform_version=`sw_vers | awk '/^ProductVersion:/ { print $2 }' | cut -d. -f1,2`

              # x86_64 Apple hardware often runs 32-bit kernels (see OHAI-63)
              x86_64=`sysctl -n hw.optional.x86_64`
              if test $x86_64 -eq 1; then
                machine="x86_64"
              fi
            elif test -f "/etc/release"; then
              machine=`/usr/bin/uname -p`
              if grep -q SmartOS /etc/release; then
                platform="smartos"
                platform_version=`grep ^Image /etc/product | awk '{ print $3 }'`
              else
                platform="solaris2"
                platform_version=`/usr/bin/uname -r`
              fi
            elif test -f "/etc/SuSE-release"; then
              if grep -q 'Enterprise' /etc/SuSE-release;
              then
                  platform="sles"
                  platform_version=`awk '/^VERSION/ {V = $3}; /^PATCHLEVEL/ {P = $3}; END {print V "." P}' /etc/SuSE-release`
              else
                  platform="suse"
                  platform_version=`awk '/^VERSION =/ { print $3 }' /etc/SuSE-release`
              fi
            elif test "x$os" = "xFreeBSD"; then
              platform="freebsd"
              platform_version=`uname -r | sed 's/-.*//'`
            elif test "x$os" = "xAIX"; then
              platform="aix"
              platform_version="`uname -v`.`uname -r`"
              machine="powerpc"
            elif test -f "/etc/os-release"; then
              . /etc/os-release
              if test "x$CISCO_RELEASE_INFO" != "x"; then
                . $CISCO_RELEASE_INFO
              fi

              platform=$ID
              platform_version=$VERSION
            fi

            if test "x$platform" = "x"; then
              echo "Unable to determine platform version!"
              report_bug
              exit 1
            fi

            #
            # NOTE: platform manging in the install.sh is DEPRECATED
            #
            # - install.sh should be true to ohai and should not remap
            #   platform or platform versions.
            #
            # - remapping platform and mangling platform version numbers is
            #   now the complete responsibility of the server-side endpoints
            #

            major_version=`echo $platform_version | cut -d. -f1`
            case $platform in
              # FIXME: should remove this case statement completely
              "el")
                # FIXME:  "el" is deprecated, should use "redhat"
                platform_version=$major_version
                ;;
              "debian")
                if test "x$major_version" = "x5"; then
                  # This is here for potential back-compat.
                  # We do not have 5 in versions we publish for anymore but we
                  # might have it for earlier versions.
                  platform_version="6"
                else
                  platform_version=$major_version
                fi
                ;;
              "freebsd")
                platform_version=$major_version
                ;;
              "sles")
                platform_version=$major_version
                ;;
              "suse")
                platform_version=$major_version
                ;;
            esac

            # normalize the architecture we detected
            case $machine in
              "x86_64"|"amd64"|"x64")
                machine="x86_64"
                ;;
              "i386"|"i86pc"|"x86"|"i686")
                machine="i386"
                ;;
              "sparc"|"sun4u"|"sun4v")
                machine="sparc"
                ;;
            esac

            if test "x$platform_version" = "x"; then
              echo "Unable to determine platform version!"
              report_bug
              exit 1
            fi

            if test "x$platform" = "xsolaris2"; then
              # hack up the path on Solaris to find wget, pkgadd
              PATH=/usr/sfw/bin:/usr/sbin:$PATH
              export PATH
            fi

            echo "$platform $platform_version $machine"

            ############
            # end of platform_detection.sh
            ############


            # artifactory_urls.sh
            ############
            # This section sets up the information for a build to be installed from artifactory
            #  then uses $platform, $platform_version and $machine to select the correct
            #  version.
            #
            # Inputs:
            # $platform:
            # $platform_version:
            # $machine:
            #
            # Outputs:
            # $download_url:
            # $sha256:
            ############


              artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/ppc64le"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_ppc64el.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 16b55cbf511b3989b006c98c940f8230858cf6eba81b6ec9793912d686b66885" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.9/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.9/chef-12.12.10-1.dmg" >> "$artifact_info_dir/artifact_info"
              echo "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.10/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.10/chef-12.12.10-1.dmg" >> "$artifact_info_dir/artifact_info"
              echo "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.11/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.11/chef-12.12.10-1.dmg" >> "$artifact_info_dir/artifact_info"
              echo "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/ios_xr/6/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ios_xr/6/chef-12.12.10-1.ios_xr6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
              echo "sha256 f8f5e1bc424c103f9423aa7b4ed1d2dfc7bd7e1132c0af9c34c78caaf7631a9b" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/nexus/7/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/nexus/7/chef-12.12.10-1.nexus7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
              echo "sha256 e03a7b07f699d96ce4f2093f8dd4be61fc8547860fa52d19ad0f0394fa488e66" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/debian/6/i686"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_i386.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/debian/7/i686"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_i386.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/debian/8/i686"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_i386.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/i386"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.i386.sh" >> "$artifact_info_dir/artifact_info"
              echo "sha256 76ea4ba096b432e6544be0dd8ab04c201aeaf6343965b0f5cd2cc1fd3bb957e1" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/i686"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_i386.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/i686"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_i386.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/i386"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.i386.sh" >> "$artifact_info_dir/artifact_info"
              echo "sha256 746a2030bb5e078a525051508253dd70ae70d8999c89b2f95de3f368b98d64d9" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/el/5/i686"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.i386.rpm" >> "$artifact_info_dir/artifact_info"
              echo "sha256 eb0627c6f828cd08d95d4822874412ab6a4fe8fd6e8f29721ce0953def3fb0ed" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/el/7/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
              echo "sha256 41676f26ce135282cbc09cb3f9de6c04dfdec964547fdb995318fe659f3166f9" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/i386"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
              echo "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/el/6/i686"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.i386.rpm" >> "$artifact_info_dir/artifact_info"
              echo "sha256 b291ce4b5c01fb87dd98033e06c27e313c740b3139ebc30d33dd25154d0edd73" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/i386"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
              echo "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/i386"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x86.msi" >> "$artifact_info_dir/artifact_info"
              echo "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/el/7/ppc64le"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64le.rpm" >> "$artifact_info_dir/artifact_info"
              echo "sha256 fedff09be8b6b3bad5f33bb0f675cd240a3b653ce7ce7e9236f888b28b1cea92" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/windows/2012/i386"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x86.msi" >> "$artifact_info_dir/artifact_info"
              echo "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/el/7/ppc64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64.rpm" >> "$artifact_info_dir/artifact_info"
              echo "sha256 83a6de2ac1484959c90b830d70cf6cef8528ec89a1f416d95d314b23b82efe21" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/debian/6/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/debian/7/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/debian/8/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/amd64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
              echo "sha256 a72febfdba2d28ff67f9540c554c6f94b60f9781f31c791355e0e0f55cdbc86a" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/i386"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x86.msi" >> "$artifact_info_dir/artifact_info"
              echo "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/el/5/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
              echo "sha256 96af6e90f6ff3876d357859544bea71c24c6dc4d92eb098a3ae3f36b45b3dac6" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/el/6/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
              echo "sha256 bf531b332f24a1f4d5cc5d43597443714aef3a801cd4b4edf45644132a26a276" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x64.msi" >> "$artifact_info_dir/artifact_info"
              echo "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/amd64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
              echo "sha256 d3a5206694949575e519354f8e121703de2e75940446a2d7f58013affe96c656" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/windows/2012/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x64.msi" >> "$artifact_info_dir/artifact_info"
              echo "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x64.msi" >> "$artifact_info_dir/artifact_info"
              echo "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/aix/6.1/powerpc"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/6.1/chef-12.12.10-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
              echo "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/aix/7.1/powerpc"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/7.1/chef-12.12.10-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
              echo "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/sparc"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
              echo "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/sparc"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
              echo "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" >> "$artifact_info_dir/artifact_info"


            artifact_info_for_platform="$tmp_dir/artifact_info/$platform/$platform_version/$machine/artifact_info"

            download_url=`awk '$1 == "url" { print $2 }' "$artifact_info_for_platform"`
            sha256=`awk '$1 == "sha256" { print $2 }' "$artifact_info_for_platform"`


            # fetch_package.sh
            ############
            # This section fetchs a package from $download_url and verifies its metadata.
            #
            # Inputs:
            # $download_url:
            # $tmp_dir:
            # Optional Inputs:
            # $cmdline_filename: Name of the package downloaded on local disk.
            # $cmdline_dl_dir: Name of the directory downloaded package will be saved to on local disk.
            #
            # Outputs:
            # $download_filename: Name of the downloaded file on local disk.
            # $filetype: Type of the file downloaded.
            ############

            filename=`echo $download_url | sed -e 's/^.*\///'`
            filetype=`echo $filename | sed -e 's/^.*\.//'`

            # use either $tmp_dir, the provided directory (-d) or the provided filename (-f)
            if test "x$cmdline_filename" != "x"; then
              download_filename="$cmdline_filename"
            elif test "x$cmdline_dl_dir" != "x"; then
              download_filename="$cmdline_dl_dir/$filename"
            else
              download_filename="$tmp_dir/$filename"
            fi

            # ensure the parent directory where to download the installer always exists
            download_dir=`dirname $download_filename`
            (umask 077 && mkdir -p $download_dir) || exit 1

            # check if we have that file locally available and if so verify the checksum
            cached_file_available="false"
            if test -f $download_filename; then
              echo "$download_filename already exists, verifiying checksum..."
              if do_checksum "$download_filename" "$sha256"; then
                echo "checksum compare succeeded, using existing file!"
                cached_file_available="true"
              else
                echo "checksum mismatch, downloading latest version of the file"
              fi
            fi

            # download if no local version of the file available
            if test "x$cached_file_available" != "xtrue"; then
              do_download "$download_url"  "$download_filename"
              do_checksum "$download_filename" "$sha256" || checksum_mismatch
            fi

            ############
            # end of fetch_package.sh
            ############


            # install_package.sh
            ############
            # Installs a package and removed the temp directory.
            #
            # Inputs:
            # $download_filename: Name of the file to be installed.
            # $filetype: Type of the file to be installed.
            # $version: The version requested. Used only for warning user if not set.
            ############

            if test "x$version" = "x"; then
              echo
              echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
              echo
              echo "You are installing an omnibus package without a version pin.  If you are installing"
              echo "on production servers via an automated process this is DANGEROUS and you will"
              echo "be upgraded without warning on new releases, even to new major releases."
              echo "Letting the version float is only appropriate in desktop, test, development or"
              echo "CI/CD environments."
              echo
              echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
              echo
            fi

            install_file $filetype "$download_filename"

            if test "x$tmp_dir" != "x"; then
              rm -r "$tmp_dir"
            fi

            ############
            # end of install_package.sh
            ############

            EOL
            chmod +x /tmp/chef-installer.sh
            sudo -E /tmp/chef-installer.sh)
                   bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
            D      [SSH] root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E cat > /tmp/chef-installer.sh <<"EOL"
            #!/bin/bash
            #!/bin/sh
            # WARNING: REQUIRES /bin/sh
            #
            # - must run on /bin/sh on solaris 9
            # - must run on /bin/sh on AIX 6.x
            #
            # Copyright:: Copyright (c) 2010-2015 Chef Software, Inc.
            # License:: Apache License, Version 2.0
            #
            # Licensed under the Apache License, Version 2.0 (the "License");
            # you may not use this file except in compliance with the License.
            # You may obtain a copy of the License at
            #
            #     http://www.apache.org/licenses/LICENSE-2.0
            #
            # Unless required by applicable law or agreed to in writing, software
            # distributed under the License is distributed on an "AS IS" BASIS,
            # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
            # See the License for the specific language governing permissions and
            # limitations under the License.
            #

            # helpers.sh
            ############
            # This section has some helper functions to make life easier.
            #
            # Outputs:
            # $tmp_dir: secure-ish temp directory that can be used during installation.
            ############

            # Check whether a command exists - returns 0 if it does, 1 if it does not
            exists() {
              if command -v $1 >/dev/null 2>&1
              then
                return 0
              else
                return 1
              fi
            }

            # Output the instructions to report bug about this script
            report_bug() {
              echo "Version: $version"
              echo ""
              echo "Please file a Bug Report at https://github.com/chef/omnitruck/issues/new"
              echo "Alternatively, feel free to open a Support Ticket at https://www.chef.io/support/tickets"
              echo "More Chef support resources can be found at https://www.chef.io/support"
              echo ""
              echo "Please include as many details about the problem as possible i.e., how to reproduce"
              echo "the problem (if possible), type of the Operating System and its version, etc.,"
              echo "and any other relevant details that might help us with troubleshooting."
              echo ""
            }

            checksum_mismatch() {
              echo "Package checksum mismatch!"
              report_bug
              exit 1
            }

            unable_to_retrieve_package() {
              echo "Unable to retrieve a valid package!"
              report_bug
              echo "Metadata URL: $metadata_url"
              if test "x$download_url" != "x"; then
                echo "Download URL: $download_url"
              fi
              if test "x$stderr_results" != "x"; then
                echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
              fi
              exit 1
            }

            http_404_error() {
              echo "Omnitruck artifact does not exist for version $version on platform $platform"
              echo ""
              echo "Either this means:"
              echo "   - We do not support $platform"
              echo "   - We do not have an artifact for $version"
              echo ""
              echo "This is often the latter case due to running a prerelease or RC version of chef"
              echo "or a gem version which was only pushed to rubygems and not omnitruck."
              echo ""
              echo "You may be able to set your knife[:bootstrap_version] to the most recent stable"
              echo "release of Chef to fix this problem (or the most recent stable major version number)."
              echo ""
              echo "In order to test the version parameter, adventurous users may take the Metadata URL"
              echo "below and modify the '&v=<number>' parameter until you successfully get a URL that"
              echo "does not 404 (e.g. via curl or wget).  You should be able to use '&v=11' or '&v=12'"
              echo "succesfully."
              echo ""
              echo "If you cannot fix this problem by setting the bootstrap_version, it probably means"
              echo "that $platform is not supported."
              echo ""
              # deliberately do not call report_bug to suppress bug report noise.
              echo "Metadata URL: $metadata_url"
              if test "x$download_url" != "x"; then
                echo "Download URL: $download_url"
              fi
              if test "x$stderr_results" != "x"; then
                echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
              fi
              exit 1
            }

            capture_tmp_stderr() {
              # spool up /tmp/stderr from all the commands we called
              if test -f "$tmp_dir/stderr"; then
                output=`cat $tmp_dir/stderr`
                stderr_results="${stderr_results}\nSTDERR from $1:\n\n$output\n"
                rm $tmp_dir/stderr
              fi
            }

            # do_wget URL FILENAME
            do_wget() {
              echo "trying wget..."
              wget -O "$2" "$1" 2>$tmp_dir/stderr
              rc=$?
              # check for 404
              grep "ERROR 404" $tmp_dir/stderr 2>&1 >/dev/null
              if test $? -eq 0; then
                echo "ERROR 404"
                http_404_error
              fi

              # check for bad return status or empty output
              if test $rc -ne 0 || test ! -s "$2"; then
                capture_tmp_stderr "wget"
                return 1
              fi

              return 0
            }

            # do_curl URL FILENAME
            do_curl() {
              echo "trying curl..."
              curl --retry 5 -sL -D $tmp_dir/stderr "$1" > "$2"
              rc=$?
              # check for 404
              grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
              if test $? -eq 0; then
                echo "ERROR 404"
                http_404_error
              fi

              # check for bad return status or empty output
              if test $rc -ne 0 || test ! -s "$2"; then
                capture_tmp_stderr "curl"
                return 1
              fi

              return 0
            }

            # do_fetch URL FILENAME
            do_fetch() {
              echo "trying fetch..."
              fetch -o "$2" "$1" 2>$tmp_dir/stderr
              # check for bad return status
              test $? -ne 0 && return 1
              return 0
            }

            # do_perl URL FILENAME
            do_perl() {
              echo "trying perl..."
              perl -e 'use LWP::Simple; getprint($ARGV[0]);' "$1" > "$2" 2>$tmp_dir/stderr
              rc=$?
              # check for 404
              grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
              if test $? -eq 0; then
                echo "ERROR 404"
                http_404_error
              fi

              # check for bad return status or empty output
              if test $rc -ne 0 || test ! -s "$2"; then
                capture_tmp_stderr "perl"
                return 1
              fi

              return 0
            }

            # do_python URL FILENAME
            do_python() {
              echo "trying python..."
              python -c "import sys,urllib2 ; sys.stdout.write(urllib2.urlopen(sys.argv[1]).read())" "$1" > "$2" 2>$tmp_dir/stderr
              rc=$?
              # check for 404
              grep "HTTP Error 404" $tmp_dir/stderr 2>&1 >/dev/null
              if test $? -eq 0; then
                echo "ERROR 404"
                http_404_error
              fi

              # check for bad return status or empty output
              if test $rc -ne 0 || test ! -s "$2"; then
                capture_tmp_stderr "python"
                return 1
              fi
              return 0
            }

            # returns 0 if checksums match
            do_checksum() {
              if exists sha256sum; then
                echo "Comparing checksum with sha256sum..."
                checksum=`sha256sum $1 | awk '{ print $1 }'`
                return `test "x$checksum" = "x$2"`
              elif exists shasum; then
                echo "Comparing checksum with shasum..."
                checksum=`shasum -a 256 $1 | awk '{ print $1 }'`
                return `test "x$checksum" = "x$2"`
              else
                echo "WARNING: could not find a valid checksum program, pre-install shasum or sha256sum in your O/S image to get valdation..."
                return 0
              fi
            }

            # do_download URL FILENAME
            do_download() {
              echo "downloading $1"
              echo "  to file $2"

              url=`echo $1`
              if test "x$platform" = "xsolaris2"; then
                if test "x$platform_version" = "x5.9" -o "x$platform_version" = "x5.10"; then
                  # solaris 9 lacks openssl, solaris 10 lacks recent enough credentials - your base O/S is completely insecure, please upgrade
                  url=`echo $url | sed -e 's/https/http/'`
                fi
              fi

              # we try all of these until we get success.
              # perl, in particular may be present but LWP::Simple may not be installed

              if exists wget; then
                do_wget $url $2 && return 0
              fi

              if exists curl; then
                do_curl $url $2 && return 0
              fi

              if exists fetch; then
                do_fetch $url $2 && return 0
              fi

              if exists perl; then
                do_perl $url $2 && return 0
              fi

              if exists python; then
                do_python $url $2 && return 0
              fi

              unable_to_retrieve_package
            }

            # install_file TYPE FILENAME
            # TYPE is "rpm", "deb", "solaris", "sh", etc.
            install_file() {
              echo "Installing $project $version"
              case "$1" in
                "rpm")
                  if test "x$platform" = "xnexus" || test "x$platform" = "xios_xr"; then
                    echo "installing with yum..."
                    yum install -yv "$2"
                  else
                    echo "installing with rpm..."
                    rpm -Uvh --oldpackage --replacepkgs "$2"
                  fi
                  ;;
                "deb")
                  echo "installing with dpkg..."
                  dpkg -i "$2"
                  ;;
                "bff")
                  echo "installing with installp..."
                  installp -aXYgd "$2" all
                  ;;
                "solaris")
                  echo "installing with pkgadd..."
                  echo "conflict=nocheck" > $tmp_dir/nocheck
                  echo "action=nocheck" >> $tmp_dir/nocheck
                  echo "mail=" >> $tmp_dir/nocheck
                  pkgrm -a $tmp_dir/nocheck -n $project >/dev/null 2>&1 || true
                  pkgadd -G -n -d "$2" -a $tmp_dir/nocheck $project
                  ;;
                "pkg")
                  echo "installing with installer..."
                  cd / && /usr/sbin/installer -pkg "$2" -target /
                  ;;
                "dmg")
                  echo "installing dmg file..."
                  hdiutil detach "/Volumes/chef_software" >/dev/null 2>&1 || true
                  hdiutil attach "$2" -mountpoint "/Volumes/chef_software"
                  cd / && /usr/sbin/installer -pkg `find "/Volumes/chef_software" -name \*.pkg` -target /
                  hdiutil detach "/Volumes/chef_software"
                  ;;
                "sh" )
                  echo "installing with sh..."
                  sh "$2"
                  ;;
                *)
                  echo "Unknown filetype: $1"
                  report_bug
                  exit 1
                  ;;
              esac
              if test $? -ne 0; then
                echo "Installation failed"
                report_bug
                exit 1
              fi
            }

            if test "x$TMPDIR" = "x"; then
              tmp="/tmp"
            else
              tmp=$TMPDIR
            fi
            # secure-ish temp dir creation without having mktemp available (DDoS-able but not expliotable)
            tmp_dir="$tmp/install.sh.$$"
            (umask 077 && mkdir $tmp_dir) || exit 1

            ############
            # end of helpers.sh
            ############


            project=chef
            version=12.12.10
            channel=unstable


            # platform_detection.sh
            ############
            # This section makes platform detection compatible with omnitruck on the system
            #   it runs.
            #
            # Outputs:
            # $platform: Name of the platform.
            # $platform_version: Version of the platform.
            # $machine: System's architecture.
            ############

            #
            # Platform and Platform Version detection
            #
            # NOTE: This should now match ohai platform and platform_version matching.
            # do not invented new platform and platform_version schemas, just make this behave
            # like what ohai returns as platform and platform_version for the server.
            #
            # ALSO NOTE: Do not mangle platform or platform_version here.  It is less error
            # prone and more future-proof to do that in the server, and then all omnitruck clients
            # will 'inherit' the changes (install.sh is not the only client of the omnitruck
            # endpoint out there).
            #

            machine=`uname -m`
            os=`uname -s`

            if test -f "/etc/lsb-release" && grep -q DISTRIB_ID /etc/lsb-release && ! grep -q wrlinux /etc/lsb-release; then
              platform=`grep DISTRIB_ID /etc/lsb-release | cut -d "=" -f 2 | tr '[A-Z]' '[a-z]'`
              platform_version=`grep DISTRIB_RELEASE /etc/lsb-release | cut -d "=" -f 2`
            elif test -f "/etc/debian_version"; then
              platform="debian"
              platform_version=`cat /etc/debian_version`
            elif test -f "/etc/redhat-release"; then
              platform=`sed 's/^\(.\+\) release.*/\1/' /etc/redhat-release | tr '[A-Z]' '[a-z]'`
              platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/redhat-release`

              # If /etc/redhat-release exists, we act like RHEL by default
              if test "$platform" = "fedora"; then
                # FIXME: stop remapping fedora to el
                # FIXME: remove client side platform_version mangling and hard coded yolo
                # Change platform version for use below.
                platform_version="6.0"
              fi

              if test "$platform" = "xenserver"; then
                # Current XenServer 6.2 is based on CentOS 5, platform is not reset to "el" server should hanlde response
                platform="xenserver"
              else
                # FIXME: use "redhat"
                platform="el"
              fi

            elif test -f "/etc/system-release"; then
              platform=`sed 's/^\(.\+\) release.\+/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
              platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
              # amazon is built off of fedora, so act like RHEL
              if test "$platform" = "amazon linux ami"; then
                # FIXME: remove client side platform_version mangling and hard coded yolo, and remapping to deprecated "el"
                platform="el"
                platform_version="6.0"
              fi
            # Apple OS X
            elif test -f "/usr/bin/sw_vers"; then
              platform="mac_os_x"
              # Matching the tab-space with sed is error-prone
              platform_version=`sw_vers | awk '/^ProductVersion:/ { print $2 }' | cut -d. -f1,2`

              # x86_64 Apple hardware often runs 32-bit kernels (see OHAI-63)
              x86_64=`sysctl -n hw.optional.x86_64`
              if test $x86_64 -eq 1; then
                machine="x86_64"
              fi
            elif test -f "/etc/release"; then
              machine=`/usr/bin/uname -p`
              if grep -q SmartOS /etc/release; then
                platform="smartos"
                platform_version=`grep ^Image /etc/product | awk '{ print $3 }'`
              else
                platform="solaris2"
                platform_version=`/usr/bin/uname -r`
              fi
            elif test -f "/etc/SuSE-release"; then
              if grep -q 'Enterprise' /etc/SuSE-release;
              then
                  platform="sles"
                  platform_version=`awk '/^VERSION/ {V = $3}; /^PATCHLEVEL/ {P = $3}; END {print V "." P}' /etc/SuSE-release`
              else
                  platform="suse"
                  platform_version=`awk '/^VERSION =/ { print $3 }' /etc/SuSE-release`
              fi
            elif test "x$os" = "xFreeBSD"; then
              platform="freebsd"
              platform_version=`uname -r | sed 's/-.*//'`
            elif test "x$os" = "xAIX"; then
              platform="aix"
              platform_version="`uname -v`.`uname -r`"
              machine="powerpc"
            elif test -f "/etc/os-release"; then
              . /etc/os-release
              if test "x$CISCO_RELEASE_INFO" != "x"; then
                . $CISCO_RELEASE_INFO
              fi

              platform=$ID
              platform_version=$VERSION
            fi

            if test "x$platform" = "x"; then
              echo "Unable to determine platform version!"
              report_bug
              exit 1
            fi

            #
            # NOTE: platform manging in the install.sh is DEPRECATED
            #
            # - install.sh should be true to ohai and should not remap
            #   platform or platform versions.
            #
            # - remapping platform and mangling platform version numbers is
            #   now the complete responsibility of the server-side endpoints
            #

            major_version=`echo $platform_version | cut -d. -f1`
            case $platform in
              # FIXME: should remove this case statement completely
              "el")
                # FIXME:  "el" is deprecated, should use "redhat"
                platform_version=$major_version
                ;;
              "debian")
                if test "x$major_version" = "x5"; then
                  # This is here for potential back-compat.
                  # We do not have 5 in versions we publish for anymore but we
                  # might have it for earlier versions.
                  platform_version="6"
                else
                  platform_version=$major_version
                fi
                ;;
              "freebsd")
                platform_version=$major_version
                ;;
              "sles")
                platform_version=$major_version
                ;;
              "suse")
                platform_version=$major_version
                ;;
            esac

            # normalize the architecture we detected
            case $machine in
              "x86_64"|"amd64"|"x64")
                machine="x86_64"
                ;;
              "i386"|"i86pc"|"x86"|"i686")
                machine="i386"
                ;;
              "sparc"|"sun4u"|"sun4v")
                machine="sparc"
                ;;
            esac

            if test "x$platform_version" = "x"; then
              echo "Unable to determine platform version!"
              report_bug
              exit 1
            fi

            if test "x$platform" = "xsolaris2"; then
              # hack up the path on Solaris to find wget, pkgadd
              PATH=/usr/sfw/bin:/usr/sbin:$PATH
              export PATH
            fi

            echo "$platform $platform_version $machine"

            ############
            # end of platform_detection.sh
            ############


            # artifactory_urls.sh
            ############
            # This section sets up the information for a build to be installed from artifactory
            #  then uses $platform, $platform_version and $machine to select the correct
            #  version.
            #
            # Inputs:
            # $platform:
            # $platform_version:
            # $machine:
            #
            # Outputs:
            # $download_url:
            # $sha256:
            ############


              artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/ppc64le"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_ppc64el.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 16b55cbf511b3989b006c98c940f8230858cf6eba81b6ec9793912d686b66885" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.9/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.9/chef-12.12.10-1.dmg" >> "$artifact_info_dir/artifact_info"
              echo "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.10/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.10/chef-12.12.10-1.dmg" >> "$artifact_info_dir/artifact_info"
              echo "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.11/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.11/chef-12.12.10-1.dmg" >> "$artifact_info_dir/artifact_info"
              echo "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/ios_xr/6/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ios_xr/6/chef-12.12.10-1.ios_xr6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
              echo "sha256 f8f5e1bc424c103f9423aa7b4ed1d2dfc7bd7e1132c0af9c34c78caaf7631a9b" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/nexus/7/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/nexus/7/chef-12.12.10-1.nexus7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
              echo "sha256 e03a7b07f699d96ce4f2093f8dd4be61fc8547860fa52d19ad0f0394fa488e66" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/debian/6/i686"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_i386.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/debian/7/i686"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_i386.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/debian/8/i686"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_i386.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/i386"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.i386.sh" >> "$artifact_info_dir/artifact_info"
              echo "sha256 76ea4ba096b432e6544be0dd8ab04c201aeaf6343965b0f5cd2cc1fd3bb957e1" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/i686"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_i386.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/i686"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_i386.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/i386"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.i386.sh" >> "$artifact_info_dir/artifact_info"
              echo "sha256 746a2030bb5e078a525051508253dd70ae70d8999c89b2f95de3f368b98d64d9" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/el/5/i686"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.i386.rpm" >> "$artifact_info_dir/artifact_info"
              echo "sha256 eb0627c6f828cd08d95d4822874412ab6a4fe8fd6e8f29721ce0953def3fb0ed" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/el/7/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
              echo "sha256 41676f26ce135282cbc09cb3f9de6c04dfdec964547fdb995318fe659f3166f9" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/i386"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
              echo "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/el/6/i686"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.i386.rpm" >> "$artifact_info_dir/artifact_info"
              echo "sha256 b291ce4b5c01fb87dd98033e06c27e313c740b3139ebc30d33dd25154d0edd73" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/i386"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
              echo "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/i386"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x86.msi" >> "$artifact_info_dir/artifact_info"
              echo "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/el/7/ppc64le"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64le.rpm" >> "$artifact_info_dir/artifact_info"
              echo "sha256 fedff09be8b6b3bad5f33bb0f675cd240a3b653ce7ce7e9236f888b28b1cea92" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/windows/2012/i386"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x86.msi" >> "$artifact_info_dir/artifact_info"
              echo "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/el/7/ppc64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64.rpm" >> "$artifact_info_dir/artifact_info"
              echo "sha256 83a6de2ac1484959c90b830d70cf6cef8528ec89a1f416d95d314b23b82efe21" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/debian/6/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/debian/7/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/debian/8/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
              echo "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/amd64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
              echo "sha256 a72febfdba2d28ff67f9540c554c6f94b60f9781f31c791355e0e0f55cdbc86a" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/i386"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x86.msi" >> "$artifact_info_dir/artifact_info"
              echo "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/el/5/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
              echo "sha256 96af6e90f6ff3876d357859544bea71c24c6dc4d92eb098a3ae3f36b45b3dac6" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/el/6/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
              echo "sha256 bf531b332f24a1f4d5cc5d43597443714aef3a801cd4b4edf45644132a26a276" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x64.msi" >> "$artifact_info_dir/artifact_info"
              echo "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/amd64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
              echo "sha256 d3a5206694949575e519354f8e121703de2e75940446a2d7f58013affe96c656" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/windows/2012/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x64.msi" >> "$artifact_info_dir/artifact_info"
              echo "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/x86_64"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x64.msi" >> "$artifact_info_dir/artifact_info"
              echo "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/aix/6.1/powerpc"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/6.1/chef-12.12.10-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
              echo "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/aix/7.1/powerpc"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/7.1/chef-12.12.10-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
              echo "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/sparc"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
              echo "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" >> "$artifact_info_dir/artifact_info"

              artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/sparc"
              mkdir -p $artifact_info_dir
              touch "$artifact_info_dir/artifact_info"
              echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
              echo "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" >> "$artifact_info_dir/artifact_info"


            artifact_info_for_platform="$tmp_dir/artifact_info/$platform/$platform_version/$machine/artifact_info"

            download_url=`awk '$1 == "url" { print $2 }' "$artifact_info_for_platform"`
            sha256=`awk '$1 == "sha256" { print $2 }' "$artifact_info_for_platform"`


            # fetch_package.sh
            ############
            # This section fetchs a package from $download_url and verifies its metadata.
            #
            # Inputs:
            # $download_url:
            # $tmp_dir:
            # Optional Inputs:
            # $cmdline_filename: Name of the package downloaded on local disk.
            # $cmdline_dl_dir: Name of the directory downloaded package will be saved to on local disk.
            #
            # Outputs:
            # $download_filename: Name of the downloaded file on local disk.
            # $filetype: Type of the file downloaded.
            ############

            filename=`echo $download_url | sed -e 's/^.*\///'`
            filetype=`echo $filename | sed -e 's/^.*\.//'`

            # use either $tmp_dir, the provided directory (-d) or the provided filename (-f)
            if test "x$cmdline_filename" != "x"; then
              download_filename="$cmdline_filename"
            elif test "x$cmdline_dl_dir" != "x"; then
              download_filename="$cmdline_dl_dir/$filename"
            else
              download_filename="$tmp_dir/$filename"
            fi

            # ensure the parent directory where to download the installer always exists
            download_dir=`dirname $download_filename`
            (umask 077 && mkdir -p $download_dir) || exit 1

            # check if we have that file locally available and if so verify the checksum
            cached_file_available="false"
            if test -f $download_filename; then
              echo "$download_filename already exists, verifiying checksum..."
              if do_checksum "$download_filename" "$sha256"; then
                echo "checksum compare succeeded, using existing file!"
                cached_file_available="true"
              else
                echo "checksum mismatch, downloading latest version of the file"
              fi
            fi

            # download if no local version of the file available
            if test "x$cached_file_available" != "xtrue"; then
              do_download "$download_url"  "$download_filename"
              do_checksum "$download_filename" "$sha256" || checksum_mismatch
            fi

            ############
            # end of fetch_package.sh
            ############


            # install_package.sh
            ############
            # Installs a package and removed the temp directory.
            #
            # Inputs:
            # $download_filename: Name of the file to be installed.
            # $filetype: Type of the file to be installed.
            # $version: The version requested. Used only for warning user if not set.
            ############

            if test "x$version" = "x"; then
              echo
              echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
              echo
              echo "You are installing an omnibus package without a version pin.  If you are installing"
              echo "on production servers via an automated process this is DANGEROUS and you will"
              echo "be upgraded without warning on new releases, even to new major releases."
              echo "Letting the version float is only appropriate in desktop, test, development or"
              echo "CI/CD environments."
              echo
              echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
              echo
            fi

            install_file $filetype "$download_filename"

            if test "x$tmp_dir" != "x"; then
              rm -r "$tmp_dir"
            fi

            ############
            # end of install_package.sh
            ############

            EOL
            chmod +x /tmp/chef-installer.sh
            sudo -E /tmp/chef-installer.sh)
                   bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                   /bin/bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                   /bin/bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                   el 6 x86_64
                   el 6 x86_64
                   Waited 100/300s for instance <i-a4548d0b> to become ready.
                   downloading http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.x86_64.rpm
                     to file /tmp/install.sh.959/chef-12.12.10-1.el6.x86_64.rpm
                   trying curl...
                   downloading http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.x86_64.rpm
                     to file /tmp/install.sh.961/chef-12.12.10-1.el6.x86_64.rpm
                   trying curl...
                   Waited 100/300s for instance <i-39558c96> to become ready.
                   Comparing checksum with sha256sum...
                   Comparing checksum with sha256sum...
                   Installing chef 12.12.10
                   installing with rpm...
                   Installing chef 12.12.10
                   installing with rpm...
                   warning: /tmp/install.sh.961/chef-12.12.10-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
                   warning: /tmp/install.sh.959/chef-12.12.10-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
                   Preparing...                                                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                   Preparing...                                                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                   Waited 105/300s for instance <i-a4548d0b> to become ready.
                   Waited 105/300s for instance <i-39558c96> to become ready.
            D      Console output: ---
            2016/06/30 18:34:33Z: EC2ConfigMonitorState: 0
            2016/06/30 18:34:33Z: Windows sysprep configuration complete.
            2016/06/30 18:34:37Z: AMI Origin Version: 2016.06.15
            2016/06/30 18:34:37Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
            2016/06/30 18:34:37Z: OS: Microsoft Windows NT 6.3.9600
            2016/06/30 18:34:37Z: OsVersion: 6.3
            2016/06/30 18:34:37Z: OsProductName: Windows Server 2012 R2 Standard
            2016/06/30 18:34:37Z: OsBuildLabEx: 9600.18292.amd64fre.winblue_ltsb.160330-1744
            2016/06/30 18:34:37Z: Language: en-US
            2016/06/30 18:34:37Z: TimeZone: Coordinated Universal Time
            2016/06/30 18:34:37Z: Offset: UTC 00:00:00
            2016/06/30 18:34:37Z: EC2 Agent: Ec2Config service v3.17.1032
            2016/06/30 18:34:40Z: Message: Waiting for meta-data accessibility...
            2016/06/30 18:34:40Z: Message: Meta-data is now available.
            2016/06/30 18:34:41Z: AMI-ID: ami-8d0acfed
            2016/06/30 18:34:41Z: Instance-ID: i-39558c96
            2016/06/30 18:34:45Z: Driver: AWS PV Network Device v7.3.2.0
            2016/06/30 18:34:45Z: Driver: AWS PV Storage Host Adapter v7.3.2.0
            2016/06/30 18:34:45Z: Ec2SetPassword: Enabled
            2016/06/30 18:34:45Z: RDPCERTIFICATE-SUBJECTNAME: WIN-BLK027AP49T
            2016/06/30 18:34:45Z: RDPCERTIFICATE-THUMBPRINT: BE65898DE4C3CBC07E4B34A12DBF648F7152780E
            2016/06/30 18:34:48Z: Username: Administrator
            2016/06/30 18:34:48Z: Password: <Password>
            RgE9Jo3G39Nw8skOiv0jNl0nICLdJUvmFV0b+0gyHxXWCiCjI3Wl5ihp3KVaK5rYjfZzbijlfW+7KMzjxNxFEmI22XWZDeGY48zI2UQCsWDbPPFYDpsKohcutrUbHGIyep09uN4U+qcjF7bAA2ecQUZiQCIYzPNAtAt3bIO+toooMDJXmqcyy3k+lPAxccte+XAojyuT644MQ4/V6sX5aUTVj9Yift85YshuGQaZc4o+9gpZTMmH+RXt1Ix2Kv4UVsxK39tKSq+CaJ31zbHTV49JrYp3rp38lFRlz9iYIqCobKA263eqmwGCwE5lX3VeEfGdJWECKb/bjt/5jMWKYA==
            </Password>
            2016/06/30 18:34:52Z: Message: Windows is Ready to use

                   Waited 0/300s for instance <i-39558c96> to fetch windows admin password.
                   Retrieved Windows password for instance <i-39558c96>.
                   EC2 instance <i-39558c96> ready.
                      1:chef                                                               (  1%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (  3%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (  6%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (  8%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        ( 10%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       ( 13%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      ( 15%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     ( 17%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    ( 19%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   ( 22%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  ( 24%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 ( 26%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                ( 28%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               ( 31%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              ( 33%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             ( 35%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            ( 38%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           ( 40%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          ( 42%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         ( 44%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        ( 47%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       ( 49%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      ( 51%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     ( 53%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    ( 56%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   ( 58%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  ( 60%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 ( 63%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                ( 65%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               ( 67%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              ( 69%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             ( 72%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            ( 74%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           ( 76%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          ( 78%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         ( 81%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        ( 83%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       ( 85%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      ( 88%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     ( 90%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    ( 92%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   ( 94%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  ( 97%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### ( 99%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                      1:chef                                                               (  1%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (  3%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (  6%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (  8%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        ( 10%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       ( 13%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      ( 15%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     ( 17%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    ( 19%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   ( 22%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  ( 24%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 ( 26%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                ( 28%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               ( 31%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              ( 33%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             ( 35%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            ( 38%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           ( 40%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          ( 42%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         ( 44%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        ( 47%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       ( 49%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      ( 51%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     ( 53%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    ( 56%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   ( 58%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  ( 60%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 ( 63%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                ( 65%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               ( 67%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              ( 69%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             ( 72%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            ( 74%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           ( 76%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          ( 78%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         ( 81%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        ( 83%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       ( 85%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      ( 88%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     ( 90%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    ( 92%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   ( 94%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  ( 97%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### ( 99%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
            D      [WinRM] opening remote shell on http://10.194.9.239:5985/wsman
                   /bin/sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                   /bin/sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                   Thank you for installing Chef!
            D      [SSH] root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '
            sudo_rm="sudo -E rm"
            dirs="/tmp/kitchen/clients /tmp/kitchen/cookbooks /tmp/kitchen/data /tmp/kitchen/data_bags /tmp/kitchen/encrypted_data_bag_secret /tmp/kitchen/environments /tmp/kitchen/roles"
            root_path="/tmp/kitchen"

            $sudo_rm -rf $dirs
            mkdir -p $root_path
            ')
                   bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                   sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                   Thank you for installing Chef!
            D      [SSH] root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '
            sudo_rm="sudo -E rm"
            dirs="/tmp/kitchen/clients /tmp/kitchen/cookbooks /tmp/kitchen/data /tmp/kitchen/data_bags /tmp/kitchen/encrypted_data_bag_secret /tmp/kitchen/environments /tmp/kitchen/roles"
            root_path="/tmp/kitchen"

            $sudo_rm -rf $dirs
            mkdir -p $root_path
            ')
                   bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                   sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                   Transferring files to <fips-integration-centos-6>
            D      TIMING: scp async upload (Kitchen::Transport::Ssh)
                   Transferring files to <fips-unit-functional-centos-6>
            D      TIMING: scp async upload (Kitchen::Transport::Ssh)
            D      TIMING: scp async upload (Kitchen::Transport::Ssh) took (0m0.19s)
            D      Transfer complete
            D      [SSH] root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '
            sudo -E /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json --chef-zero-port 8889
            ')
                   bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                   sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
            D      TIMING: scp async upload (Kitchen::Transport::Ssh) took (0m0.33s)
            D      Transfer complete
            D      [SSH] root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '
            sudo -E /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json --chef-zero-port 8889
            ')
                   bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                   sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                   Starting Chef Client, version 12.12.10
                   Starting Chef Client, version 12.12.10
                   Waited 110/300s for instance <i-a4548d0b> to become ready.
                   Creating a new client identity for fips-unit-functional-centos-6 using the validator key.
                   resolving cookbooks for run list: []
                   Synchronizing Cookbooks:
                   Installing Cookbook Gems:
                   Compiling Cookbooks...
                   [2016-06-30T18:35:03+00:00] WARN: Node fips-unit-functional-centos-6 has an empty run list.
                   Converging 0 resources
                   Creating a new client identity for fips-integration-centos-6 using the validator key.
                   Starting audit phase
                   resolving cookbooks for run list: []
                   Synchronizing Cookbooks:
                   Installing Cookbook Gems:
                   Compiling Cookbooks...
                   [2016-06-30T18:35:04+00:00] WARN: Node fips-integration-centos-6 has an empty run list.
                   Converging 0 resources
                   Starting audit phase

                   Finished in 0.00034 seconds (files took 0.442 seconds to load)
                   0 examples, 0 failures
                   Auditing complete

                   Running handlers:
                   Running handlers complete
                   Chef Client finished, 0/0 resources updated in 03 seconds
                   [2016-06-30T18:35:04+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json

                   Finished in 0.00036 seconds (files took 0.4288 seconds to load)
                   0 examples, 0 failures
                   Auditing complete

                   Running handlers:
                   Running handlers complete
                   Chef Client finished, 0/0 resources updated in 03 seconds
                   [2016-06-30T18:35:04+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json
            D      Cleaning up local sandbox in /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160630-30892-hwedvi
                   Finished converging <fips-unit-functional-centos-6> (0m13.60s).
            D      [SSH] shutting previous connection root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
            D      [SSH] closing connection to root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
            D      Cleaning up local sandbox in /tmp/cheftest/fips-integration-centos-6-sandbox-20160630-30892-1ya4oq6
                   Finished converging <fips-integration-centos-6> (0m13.75s).
            D      [SSH] shutting previous connection root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
            D      [SSH] closing connection to root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                   Waited 115/300s for instance <i-a4548d0b> to become ready.
            D      Console output: ---
            2016/06/30 18:34:43Z: EC2ConfigMonitorState: 0
            2016/06/30 18:34:43Z: Windows sysprep configuration complete.
            2016/06/30 18:34:47Z: AMI Origin Version: 2016.06.15
            2016/06/30 18:34:47Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
            2016/06/30 18:34:47Z: OS: Microsoft Windows NT 6.3.9600
            2016/06/30 18:34:47Z: OsVersion: 6.3
            2016/06/30 18:34:47Z: OsProductName: Windows Server 2012 R2 Standard
            2016/06/30 18:34:47Z: OsBuildLabEx: 9600.18292.amd64fre.winblue_ltsb.160330-1744
            2016/06/30 18:34:47Z: Language: en-US
            2016/06/30 18:34:47Z: TimeZone: Coordinated Universal Time
            2016/06/30 18:34:47Z: Offset: UTC 00:00:00
            2016/06/30 18:34:47Z: EC2 Agent: Ec2Config service v3.17.1032
            2016/06/30 18:34:50Z: Message: Waiting for meta-data accessibility...
            2016/06/30 18:34:50Z: Message: Meta-data is now available.
            2016/06/30 18:34:51Z: AMI-ID: ami-8d0acfed
            2016/06/30 18:34:51Z: Instance-ID: i-a4548d0b
            2016/06/30 18:34:54Z: Driver: AWS PV Network Device v7.3.2.0
            2016/06/30 18:34:54Z: Driver: AWS PV Storage Host Adapter v7.3.2.0
            2016/06/30 18:34:54Z: Ec2SetPassword: Enabled
            2016/06/30 18:34:55Z: RDPCERTIFICATE-SUBJECTNAME: WIN-L93V7PQDGES
            2016/06/30 18:34:55Z: RDPCERTIFICATE-THUMBPRINT: 60967D3EDD2A0C9334FAA6461425D88CA6ADE053
            2016/06/30 18:34:58Z: Username: Administrator
            2016/06/30 18:34:58Z: Password: <Password>
            U91+Dkc6yiLPxbtTsEHLOZy2QSCJJpscjhiZZ0lP1YYpKS17/vzldih8GeP/BfsCC7pBnps6pdXRWWWLZXLYfj9Sm53/6eczCDEffCwATeOSaiAk5pqwY7nLlrKX4WZVqYh4aaKn7VzVKZwevSv4iEN8CvBGJ3ymiccEQXX5Gtc4iw/4jsBdSnOVIfB2XbBsvHyxb4B7wNr2kidRi6DAYyUeY1h7dIuFxtXiRuXyNyP4THIyx9X5zPl/KbG/1EzphO8sD6dho58mfuxWfFbp0qcS7eQMI0X/H6g0qIP0h9nqS4j5E4WmAeHARh+AoW1MdjLJpIvJsSrpWodtZ3Z5Yw==
            </Password>
            2016/06/30 18:35:00Z: Message: Windows is Ready to use

                   Waited 0/300s for instance <i-a4548d0b> to fetch windows admin password.
                   Retrieved Windows password for instance <i-a4548d0b>.
                   EC2 instance <i-a4548d0b> ready.
            D      [WinRM] remote shell 674D7D6E-E278-45DE-BD35-2C01AA61AE98 is open on http://10.194.9.239:5985/wsman
            D      [WinRM] negotiate::http://10.194.9.239:5985/wsman<{:user=>"administrator", :pass=>"4nkmF?o-MNk", :elevated_username=>"administrator", :elevated_password=>"4nkmF?o-MNk", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
            ')
                   [WinRM] Established

            D      [WinRM] reusing existing connection negotiate::http://10.194.9.239:5985/wsman<{:user=>"administrator", :pass=>"4nkmF?o-MNk", :elevated_username=>"administrator", :elevated_password=>"4nkmF?o-MNk", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
            D      [WinRM] negotiate::http://10.194.9.239:5985/wsman<{:user=>"administrator", :pass=>"4nkmF?o-MNk", :elevated_username=>"administrator", :elevated_password=>"4nkmF?o-MNk", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)


                       Directory: C:\chef\ohai\hints


                   Mode                LastWriteTime     Length Name
                   ----                -------------     ------ ----
                   -a---         6/30/2016   6:35 PM          0 ec2.json


            D      ec2:create '10.194.9.239'
                   Finished creating <fips-unit-functional-windows-2012r2> (2m30.69s).
            -----> Converging <fips-unit-functional-windows-2012r2>...
                   Preparing files for transfer
            D      Creating local sandbox in /tmp/cheftest/fips-unit-functional-windows-2012r2-sandbox-20160630-30892-1djhazf
                   Preparing dna.json
            D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                   Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                   Removing non-cookbook files before transfer
                   Preparing validation.pem
            D      Using a dummy validation.pem
                   Preparing client.rb
            D      Creating client.rb from {:node_name=>"fips-unit-functional-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
            D      [WinRM] reusing existing connection negotiate::http://10.194.9.239:5985/wsman<{:user=>"administrator", :pass=>"4nkmF?o-MNk", :elevated_username=>"administrator", :elevated_password=>"4nkmF?o-MNk", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
            D      [WinRM] negotiate::http://10.194.9.239:5985/wsman<{:user=>"administrator", :pass=>"4nkmF?o-MNk", :elevated_username=>"administrator", :elevated_password=>"4nkmF?o-MNk", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
            function Get-PlatformVersion {
              switch -regex ((get-wmiobject win32_operatingsystem).version) {
                '10\.0\.\d+' {$platform_version = '2012r2'}
                '6\.3\.\d+'  {$platform_version = '2012r2'}
                '6\.2\.\d+'  {$platform_version = '2012'}
                '6\.1\.\d+'  {$platform_version = '2008r2'}
                '6\.0\.\d+'  {$platform_version = '2008'}
              }
              return $platform_version
            }

            function Get-PlatformArchitecture {
              if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                $architecture = 'x86_64'
              } else {
                $architecture = 'i386'
              }
              return $architecture
            }

            function New-Uri {
              param ($baseuri, $newuri)

              try {
              new-object System.Uri $baseuri, $newuri
              }
              catch [System.Management.Automation.MethodInvocationException]{
                Write-Error "$($_.exception.message)"
                throw $_.exception
              }
            }

            function Get-WebContent {
              param ($uri, $filepath)
              $proxy = New-Object -TypeName System.Net.WebProxy
              $wc = new-object System.Net.WebClient
              $proxy.Address = $env:http_proxy
              $wc.Proxy = $proxy

              try {
                if ([string]::IsNullOrEmpty($filepath)) {
                  $wc.downloadstring($uri)
                }
                else {
                  $wc.downloadfile($uri, $filepath)
                }
              }
              catch {
                $exception = $_.Exception
                Write-Host "There was an error: "
                do {
                  Write-Host "`t$($exception.message)"
                  $exception = $exception.innerexception
                } while ($exception)
                throw "Failed to download from $uri."
              }
            }

            function Test-ProjectPackage {
              [cmdletbinding()]
              param ($Path, $Algorithm = 'SHA256', $Hash)

              if (-not (get-command get-filehash))   {
                function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                function Get-FileHash ($Path, $Algorithm) {
                  $Path = (resolve-path $path).providerpath
                  $hash = @{Algorithm = $Algorithm; Path = $Path}
                  use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                    use ($in = (gi $path).OpenRead()) {
                      $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                    }
                  }
                  new-object PSObject -Property $hash
                }
              }
              Write-Verbose "Testing the $Algorithm hash for $path."
              $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
              Write-Verbose "`tDesired Hash - '$hash'"
              Write-Verbose "`tActual Hash  - '$ActualHash'"
              $Valid = $ActualHash -eq $Hash
              if (-not $Valid) {
                Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
              }
              return $Valid
            }

            function Get-ProjectMetadata {
              <#
                .SYNOPSIS
                Get metadata for a Chef Software, Inc. project
                .DESCRIPTION
                Get metadata for project
                .EXAMPLE
                iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                Gets the download url and SHA256 checksum for the latest stable release of Chef.
                .EXAMPLE
                iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
              #>
              [cmdletbinding()]
              param (
                # Base url to retrieve metadata from.
                [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                [string]
                # Project to install
                [string]
                $project = 'chef',
                # Version of the application to install
                # This parameter is optional, if not supplied it will provide the latest version,
                # and if an iteration number is not specified, it will grab the latest available iteration.
                # Partial version numbers are also acceptable (using v=11
                # will grab the latest 11.x client which matches the other flags).
                [string]
                $version,
                # Release channel to install from
                $channel = 'unstable',
                # The following legacy switches are just aliases for the current channel
                [switch]
                $prerelease,
                [switch]
                $nightlies,
                [validateset('auto', 'i386', 'x86_64')]
                [string]
                $architecture = 'auto'
              )

              # PowerShell is only on Windows ATM
              $platform = 'windows'
              Write-Verbose "Platform: $platform"

              $platform_version = Get-PlatformVersion
              Write-Verbose "Platform Version: $platform_version"

              if ($architecture -eq 'auto') {
                $architecture = Get-PlatformArchitecture
              }

              Write-Verbose "Architecture: $architecture"
              Write-Verbose "Project: $project"


                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 16b55cbf511b3989b006c98c940f8230858cf6eba81b6ec9793912d686b66885" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.9/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.10/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.11/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ios_xr/6/chef-12.12.10-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f8f5e1bc424c103f9423aa7b4ed1d2dfc7bd7e1132c0af9c34c78caaf7631a9b" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/nexus/7/chef-12.12.10-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 e03a7b07f699d96ce4f2093f8dd4be61fc8547860fa52d19ad0f0394fa488e66" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 76ea4ba096b432e6544be0dd8ab04c201aeaf6343965b0f5cd2cc1fd3bb957e1" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 746a2030bb5e078a525051508253dd70ae70d8999c89b2f95de3f368b98d64d9" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 eb0627c6f828cd08d95d4822874412ab6a4fe8fd6e8f29721ce0953def3fb0ed" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 41676f26ce135282cbc09cb3f9de6c04dfdec964547fdb995318fe659f3166f9" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 b291ce4b5c01fb87dd98033e06c27e313c740b3139ebc30d33dd25154d0edd73" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 fedff09be8b6b3bad5f33bb0f675cd240a3b653ce7ce7e9236f888b28b1cea92" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 83a6de2ac1484959c90b830d70cf6cef8528ec89a1f416d95d314b23b82efe21" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 a72febfdba2d28ff67f9540c554c6f94b60f9781f31c791355e0e0f55cdbc86a" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 96af6e90f6ff3876d357859544bea71c24c6dc4d92eb098a3ae3f36b45b3dac6" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 bf531b332f24a1f4d5cc5d43597443714aef3a801cd4b4edf45644132a26a276" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 d3a5206694949575e519354f8e121703de2e75940446a2d7f58013affe96c656" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/6.1/chef-12.12.10-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/7.1/chef-12.12.10-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" | out-file "$artifact_info_dir/artifact_info" -Append


              $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

              $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

              Write-Verbose "Project details: "
              foreach ($key in $package_metadata.keys) {
                Write-Verbose "`t$key = $($package_metadata[$key])"
              }
              $package_metadata
            }

            function Install-Project {
              <#
                .SYNOPSIS
                Install a Chef Software, Inc. product
                .DESCRIPTION
                Install a Chef Software, Inc. product
                .EXAMPLE
                iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                Installs the latest stable version of Chef.
                .EXAMPLE
                iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                Installs the latest integration build of the Chef Development Kit
              #>
              [cmdletbinding(SupportsShouldProcess=$true)]
              param (
                # Project to install
                [string]
                $project = 'chef',
                # Release channel to install from
                [validateset('current', 'stable', 'unstable')]
                [string]
                $channel = 'stable',
                # Version of the application to install
                # This parameter is optional, if not supplied it will provide the latest version,
                # and if an iteration number is not specified, it will grab the latest available iteration.
                # Partial version numbers are also acceptable (using v=11
                # will grab the latest 11.x client which matches the other flags).
                [string]
                $version,
                # Full path for the downloaded installer.
                [string]
                $filename,
                # Full path to the location to download the installer
                [string]
                $download_directory = $env:temp,
                # The following legacy switches are just aliases for the current channel
                [switch]
                $prerelease,
                [switch]
                $nightlies,
                [validateset('auto', 'i386', 'x86_64')]
                [string]
                $architecture = 'auto'
              )

              $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

              if (-not [string]::IsNullOrEmpty($filename)) {
                $download_directory = split-path $filename
                $filename = split-path $filename -leaf
                if ([string]::IsNullOrEmpty($download_directory)) {
                  $download_directory = $pwd
                }
              }
              else {
                $filename = ($package_metadata.url -split '/')[-1]
              }
              Write-Verbose "Download directory: $download_directory"
              Write-Verbose "Filename: $filename"

              if (-not (test-path $download_directory)) {
                mkdir $download_directory
              }
              $download_directory = (resolve-path $download_directory).providerpath
              $download_destination = join-path $download_directory $filename

              if ((test-path $download_destination) -and
                (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                Write-Verbose "Found existing valid installer at $download_destination."
              }
              else {
                if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                  Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                  Get-WebContent $package_metadata.url -filepath $download_destination
                }
              }

              if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                  Write-Host "Installing $project from $download_destination"
                  $installingProject = $True
                  $installAttempts = 0
                  while ($installingProject) {
                    $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                    $p.WaitForExit()
                    if ($p.ExitCode -eq 1618) {
                      Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                      continue
                    } elseif ($p.ExitCode -ne 0) {
                      throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                    }
                    $installingProject = $False
                  }
                }
                else {
                  throw "Failed to validate the downloaded installer for $project."
                }
              }
            }
            set-alias install -value Install-Project
            export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

            }

            install -project chef -version 12.12.10 -channel unstable
            )
            D      creating hash for file $env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
            D      Running check_files.ps1
            D      @{
            D        "ee541b042a0f0ef2da5f8f2861cc4131" = @{
            D          "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
            D          "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
            D          "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
            D        }
            D      }
            D      [WinRM] opening new shell since the current one failed
            D      [WinRM] opening remote shell on http://10.194.9.239:5985/wsman
            D      [WinRM] remote shell AE1D79B9-C96C-4F04-BB8F-CE5ED3CCECCC is open on http://10.194.9.239:5985/wsman
            D      Cleaning up local sandbox in /tmp/cheftest/fips-unit-functional-windows-2012r2-sandbox-20160630-30892-1djhazf
                   [WinRM] connection failed. retrying in 3 seconds: #<HTTPClient::ConnectTimeoutError: execution expired>
            D      [WinRM] opening remote shell on http://10.194.11.105:5985/wsman
            D      [WinRM] remote shell 58BB15DF-FF49-4C53-92D2-B4052D0A0E49 is open on http://10.194.11.105:5985/wsman
            D      [WinRM] negotiate::http://10.194.11.105:5985/wsman<{:user=>"administrator", :pass=>"NqdwNQ3@;5", :elevated_username=>"administrator", :elevated_password=>"NqdwNQ3@;5", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
            ')
                   [WinRM] Established

            D      [WinRM] reusing existing connection negotiate::http://10.194.11.105:5985/wsman<{:user=>"administrator", :pass=>"NqdwNQ3@;5", :elevated_username=>"administrator", :elevated_password=>"NqdwNQ3@;5", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
            D      [WinRM] negotiate::http://10.194.11.105:5985/wsman<{:user=>"administrator", :pass=>"NqdwNQ3@;5", :elevated_username=>"administrator", :elevated_password=>"NqdwNQ3@;5", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)


                       Directory: C:\chef\ohai\hints


                   Mode                LastWriteTime     Length Name
                   ----                -------------     ------ ----
                   -a---         6/30/2016   6:36 PM          0 ec2.json


            D      ec2:create '10.194.11.105'
                   Finished creating <fips-integration-windows-2012r2> (3m25.26s).
            -----> Converging <fips-integration-windows-2012r2>...
                   Preparing files for transfer
            D      Creating local sandbox in /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160630-30892-37jg2q
                   Preparing dna.json
            D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                   Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                   Removing non-cookbook files before transfer
                   Preparing validation.pem
            D      Using a dummy validation.pem
                   Preparing client.rb
            D      Creating client.rb from {:node_name=>"fips-integration-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
            D      [WinRM] reusing existing connection negotiate::http://10.194.11.105:5985/wsman<{:user=>"administrator", :pass=>"NqdwNQ3@;5", :elevated_username=>"administrator", :elevated_password=>"NqdwNQ3@;5", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
            D      [WinRM] negotiate::http://10.194.11.105:5985/wsman<{:user=>"administrator", :pass=>"NqdwNQ3@;5", :elevated_username=>"administrator", :elevated_password=>"NqdwNQ3@;5", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
            function Get-PlatformVersion {
              switch -regex ((get-wmiobject win32_operatingsystem).version) {
                '10\.0\.\d+' {$platform_version = '2012r2'}
                '6\.3\.\d+'  {$platform_version = '2012r2'}
                '6\.2\.\d+'  {$platform_version = '2012'}
                '6\.1\.\d+'  {$platform_version = '2008r2'}
                '6\.0\.\d+'  {$platform_version = '2008'}
              }
              return $platform_version
            }

            function Get-PlatformArchitecture {
              if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                $architecture = 'x86_64'
              } else {
                $architecture = 'i386'
              }
              return $architecture
            }

            function New-Uri {
              param ($baseuri, $newuri)

              try {
              new-object System.Uri $baseuri, $newuri
              }
              catch [System.Management.Automation.MethodInvocationException]{
                Write-Error "$($_.exception.message)"
                throw $_.exception
              }
            }

            function Get-WebContent {
              param ($uri, $filepath)
              $proxy = New-Object -TypeName System.Net.WebProxy
              $wc = new-object System.Net.WebClient
              $proxy.Address = $env:http_proxy
              $wc.Proxy = $proxy

              try {
                if ([string]::IsNullOrEmpty($filepath)) {
                  $wc.downloadstring($uri)
                }
                else {
                  $wc.downloadfile($uri, $filepath)
                }
              }
              catch {
                $exception = $_.Exception
                Write-Host "There was an error: "
                do {
                  Write-Host "`t$($exception.message)"
                  $exception = $exception.innerexception
                } while ($exception)
                throw "Failed to download from $uri."
              }
            }

            function Test-ProjectPackage {
              [cmdletbinding()]
              param ($Path, $Algorithm = 'SHA256', $Hash)

              if (-not (get-command get-filehash))   {
                function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                function Get-FileHash ($Path, $Algorithm) {
                  $Path = (resolve-path $path).providerpath
                  $hash = @{Algorithm = $Algorithm; Path = $Path}
                  use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                    use ($in = (gi $path).OpenRead()) {
                      $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                    }
                  }
                  new-object PSObject -Property $hash
                }
              }
              Write-Verbose "Testing the $Algorithm hash for $path."
              $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
              Write-Verbose "`tDesired Hash - '$hash'"
              Write-Verbose "`tActual Hash  - '$ActualHash'"
              $Valid = $ActualHash -eq $Hash
              if (-not $Valid) {
                Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
              }
              return $Valid
            }

            function Get-ProjectMetadata {
              <#
                .SYNOPSIS
                Get metadata for a Chef Software, Inc. project
                .DESCRIPTION
                Get metadata for project
                .EXAMPLE
                iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                Gets the download url and SHA256 checksum for the latest stable release of Chef.
                .EXAMPLE
                iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
              #>
              [cmdletbinding()]
              param (
                # Base url to retrieve metadata from.
                [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                [string]
                # Project to install
                [string]
                $project = 'chef',
                # Version of the application to install
                # This parameter is optional, if not supplied it will provide the latest version,
                # and if an iteration number is not specified, it will grab the latest available iteration.
                # Partial version numbers are also acceptable (using v=11
                # will grab the latest 11.x client which matches the other flags).
                [string]
                $version,
                # Release channel to install from
                $channel = 'unstable',
                # The following legacy switches are just aliases for the current channel
                [switch]
                $prerelease,
                [switch]
                $nightlies,
                [validateset('auto', 'i386', 'x86_64')]
                [string]
                $architecture = 'auto'
              )

              # PowerShell is only on Windows ATM
              $platform = 'windows'
              Write-Verbose "Platform: $platform"

              $platform_version = Get-PlatformVersion
              Write-Verbose "Platform Version: $platform_version"

              if ($architecture -eq 'auto') {
                $architecture = Get-PlatformArchitecture
              }

              Write-Verbose "Architecture: $architecture"
              Write-Verbose "Project: $project"


                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 16b55cbf511b3989b006c98c940f8230858cf6eba81b6ec9793912d686b66885" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.9/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.10/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.11/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ios_xr/6/chef-12.12.10-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f8f5e1bc424c103f9423aa7b4ed1d2dfc7bd7e1132c0af9c34c78caaf7631a9b" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/nexus/7/chef-12.12.10-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 e03a7b07f699d96ce4f2093f8dd4be61fc8547860fa52d19ad0f0394fa488e66" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 76ea4ba096b432e6544be0dd8ab04c201aeaf6343965b0f5cd2cc1fd3bb957e1" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 746a2030bb5e078a525051508253dd70ae70d8999c89b2f95de3f368b98d64d9" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 eb0627c6f828cd08d95d4822874412ab6a4fe8fd6e8f29721ce0953def3fb0ed" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 41676f26ce135282cbc09cb3f9de6c04dfdec964547fdb995318fe659f3166f9" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 b291ce4b5c01fb87dd98033e06c27e313c740b3139ebc30d33dd25154d0edd73" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 fedff09be8b6b3bad5f33bb0f675cd240a3b653ce7ce7e9236f888b28b1cea92" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 83a6de2ac1484959c90b830d70cf6cef8528ec89a1f416d95d314b23b82efe21" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 a72febfdba2d28ff67f9540c554c6f94b60f9781f31c791355e0e0f55cdbc86a" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 96af6e90f6ff3876d357859544bea71c24c6dc4d92eb098a3ae3f36b45b3dac6" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 bf531b332f24a1f4d5cc5d43597443714aef3a801cd4b4edf45644132a26a276" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 d3a5206694949575e519354f8e121703de2e75940446a2d7f58013affe96c656" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/6.1/chef-12.12.10-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/7.1/chef-12.12.10-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" | out-file "$artifact_info_dir/artifact_info" -Append


              $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

              $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

              Write-Verbose "Project details: "
              foreach ($key in $package_metadata.keys) {
                Write-Verbose "`t$key = $($package_metadata[$key])"
              }
              $package_metadata
            }

            function Install-Project {
              <#
                .SYNOPSIS
                Install a Chef Software, Inc. product
                .DESCRIPTION
                Install a Chef Software, Inc. product
                .EXAMPLE
                iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                Installs the latest stable version of Chef.
                .EXAMPLE
                iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                Installs the latest integration build of the Chef Development Kit
              #>
              [cmdletbinding(SupportsShouldProcess=$true)]
              param (
                # Project to install
                [string]
                $project = 'chef',
                # Release channel to install from
                [validateset('current', 'stable', 'unstable')]
                [string]
                $channel = 'stable',
                # Version of the application to install
                # This parameter is optional, if not supplied it will provide the latest version,
                # and if an iteration number is not specified, it will grab the latest available iteration.
                # Partial version numbers are also acceptable (using v=11
                # will grab the latest 11.x client which matches the other flags).
                [string]
                $version,
                # Full path for the downloaded installer.
                [string]
                $filename,
                # Full path to the location to download the installer
                [string]
                $download_directory = $env:temp,
                # The following legacy switches are just aliases for the current channel
                [switch]
                $prerelease,
                [switch]
                $nightlies,
                [validateset('auto', 'i386', 'x86_64')]
                [string]
                $architecture = 'auto'
              )

              $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

              if (-not [string]::IsNullOrEmpty($filename)) {
                $download_directory = split-path $filename
                $filename = split-path $filename -leaf
                if ([string]::IsNullOrEmpty($download_directory)) {
                  $download_directory = $pwd
                }
              }
              else {
                $filename = ($package_metadata.url -split '/')[-1]
              }
              Write-Verbose "Download directory: $download_directory"
              Write-Verbose "Filename: $filename"

              if (-not (test-path $download_directory)) {
                mkdir $download_directory
              }
              $download_directory = (resolve-path $download_directory).providerpath
              $download_destination = join-path $download_directory $filename

              if ((test-path $download_destination) -and
                (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                Write-Verbose "Found existing valid installer at $download_destination."
              }
              else {
                if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                  Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                  Get-WebContent $package_metadata.url -filepath $download_destination
                }
              }

              if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                  Write-Host "Installing $project from $download_destination"
                  $installingProject = $True
                  $installAttempts = 0
                  while ($installingProject) {
                    $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                    $p.WaitForExit()
                    if ($p.ExitCode -eq 1618) {
                      Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                      continue
                    } elseif ($p.ExitCode -ne 0) {
                      throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                    }
                    $installingProject = $False
                  }
                }
                else {
                  throw "Failed to validate the downloaded installer for $project."
                }
              }
            }
            set-alias install -value Install-Project
            export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

            }

            install -project chef -version 12.12.10 -channel unstable
            )
            D      creating hash for file $env:TEMP/fips-integration-windows-2012r2-long_script.ps1
            D      Running check_files.ps1
            D      @{
            D        "ee541b042a0f0ef2da5f8f2861cc4131" = @{
            D          "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1";
            D          "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
            D          "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
            D        }
            D      }
            D      Parsing CSV Response
            D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
            "False","ee541b042a0f0ef2da5f8f2861cc4131",,"True","False","False"

            D      Uploading /tmp/cheftest/kitchen-long-script20160630-30892-1lkv35g/fips-integration-windows-2012r2-long_script.ps1 to encoded tmpfile $env:TEMP\b64-ee541b042a0f0ef2da5f8f2861cc4131.txt
            D      Finished uploading /tmp/cheftest/kitchen-long-script20160630-30892-1lkv35g/fips-integration-windows-2012r2-long_script.ps1 to encoded tmpfile $env:TEMP\b64-ee541b042a0f0ef2da5f8f2861cc4131.txt (38.844 KB over 5 chunks) in (0m0.63s)
            D      Running decode_files.ps1
            D      @{
            D        "$env:TEMP\b64-ee541b042a0f0ef2da5f8f2861cc4131.txt" = @{
            D          "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
            D        }
            D      }
            D      Parsing CSV Response
            D      "src_md5","tmpzip","verifies","tmpfile","dst_md5","dst"
            "ee541b042a0f0ef2da5f8f2861cc4131",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-ee541b042a0f0ef2da5f8f2861cc4131.txt","ee541b042a0f0ef2da5f8f2861cc4131","C:\Users\ADMINI~1\AppData\Local\Temp/fips-integration-windows-2012r2-long_script.ps1"

            D      Uploaded 1 items dirty_check: (0m0.97s) stream_files: (0m0.63s) decode: (0m1.00s)

                   ModuleType Version    Name                                ExportedCommands
                   ---------- -------    ----                                ----------------
                   Script     0.0        Omnitruck                           {Get-ProjectMetada...
                   Installing chef from C:\Users\ADMINI~1\AppData\Local\Temp\chef-client-12.12.10-1-x64.msi
            D      [WinRM] retrying receive request after timeout


            D      [WinRM] negotiate::http://10.194.11.105:5985/wsman<{:user=>"administrator", :pass=>"NqdwNQ3@;5", :elevated_username=>"administrator", :elevated_password=>"NqdwNQ3@;5", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($dirs = @("$env:TEMP\kitchen\clients", "$env:TEMP\kitchen\cookbooks", "$env:TEMP\kitchen\data", "$env:TEMP\kitchen\data_bags", "$env:TEMP\kitchen\encrypted_data_bag_secret", "$env:TEMP\kitchen\environments", "$env:TEMP\kitchen\roles")
            $root_path = "$env:TEMP\kitchen"

            Function Delete-AllDirs($dirs) {
              $dirs | ForEach-Object {
                if (Test-Path ($path = Unresolve-Path $_)) { Remove-Item $path -Recurse -Force }
              }
            }

            Function Unresolve-Path($p) {
              if ($p -eq $null) { return $null }
              else { return $ExecutionContext.SessionState.Path.GetUnresolvedProviderPathFromPSPath($p) }
            }

            Function Make-RootPath($p) {
              $p = Unresolve-Path $p
              if (-Not (Test-Path $p)) { New-Item $p -ItemType directory | Out-Null }
            }

            Delete-AllDirs $dirs
            Make-RootPath $root_path
            )
                   Transferring files to <fips-integration-windows-2012r2>
            D      creating hash for file $env:TEMP\kitchen
            D      creating hash for file $env:TEMP\kitchen
            D      creating hash for directory $env:TEMP\kitchen
            D      Populating files
            D      === All files added.
            D      creating hash for file $env:TEMP\kitchen
            D      creating hash for directory $env:TEMP\kitchen
            D      Populating files
            D      +++ Adding fips/metadata.rb
            D      === All files added.
            D      Running check_files.ps1
            D      @{
            D        "f36538b1f10bf80532dc432fbec25a65" = @{
            D          "target" = "$env:TEMP\kitchen";
            D          "src_basename" = "dna.json";
            D          "dst" = "$env:TEMP\kitchen"
            D        };
            D        "608ae6e6474ca88bdec913156a101881" = @{
            D          "target" = "$env:TEMP\kitchen";
            D          "src_basename" = "client.rb";
            D          "dst" = "$env:TEMP\kitchen"
            D        };
            D        "76cdb2bad9582d23c1f6f4d868218d6c" = @{
            D          "target" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip";
            D          "src_basename" = "cache";
            D          "dst" = "$env:TEMP\kitchen\cache"
            D        };
            D        "49abb94825cb80b9a9cd59e5f76daf4a" = @{
            D          "target" = "$env:TEMP\kitchen";
            D          "src_basename" = "validation.pem";
            D          "dst" = "$env:TEMP\kitchen"
            D        };
            D        "33968442c0ef69a92763825b33850e28" = @{
            D          "target" = "$env:TEMP\winrm-upload\tmpzip-33968442c0ef69a92763825b33850e28.zip";
            D          "src_basename" = "cookbooks";
            D          "dst" = "$env:TEMP\kitchen\cookbooks"
            D        }
            D      }
            D      Parsing CSV Response
            D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
            "False","33968442c0ef69a92763825b33850e28",,"True","False","False"
            "False","76cdb2bad9582d23c1f6f4d868218d6c",,"True","False","False"
            "False","f36538b1f10bf80532dc432fbec25a65",,"True","False","True"
            "False","608ae6e6474ca88bdec913156a101881",,"True","False","True"
            "False","49abb94825cb80b9a9cd59e5f76daf4a",,"True","False","True"

            D      Uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160630-30892-37jg2q/dna.json to encoded tmpfile $env:TEMP\b64-f36538b1f10bf80532dc432fbec25a65.txt
            D      Finished uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160630-30892-37jg2q/dna.json to encoded tmpfile $env:TEMP\b64-f36538b1f10bf80532dc432fbec25a65.txt (0.084 KB over 1 chunks) in (0m0.06s)
            D      Uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160630-30892-37jg2q/client.rb to encoded tmpfile $env:TEMP\b64-608ae6e6474ca88bdec913156a101881.txt
            D      Finished uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160630-30892-37jg2q/client.rb to encoded tmpfile $env:TEMP\b64-608ae6e6474ca88bdec913156a101881.txt (1.116 KB over 1 chunks) in (0m0.07s)
            D      Uploading /tmp/cheftest/tmpzip-20160630-30892-rtn6wp.zip to encoded tmpfile $env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt
            D      Finished uploading /tmp/cheftest/tmpzip-20160630-30892-rtn6wp.zip to encoded tmpfile $env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt (0.028 KB over 1 chunks) in (0m0.06s)
            D      Uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160630-30892-37jg2q/validation.pem to encoded tmpfile $env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt
            D      Finished uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160630-30892-37jg2q/validation.pem to encoded tmpfile $env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt (2.236 KB over 1 chunks) in (0m0.11s)
            D      Uploading /tmp/cheftest/tmpzip-20160630-30892-1oevfqs.zip to encoded tmpfile $env:TEMP\b64-33968442c0ef69a92763825b33850e28.txt
            D      Finished uploading /tmp/cheftest/tmpzip-20160630-30892-1oevfqs.zip to encoded tmpfile $env:TEMP\b64-33968442c0ef69a92763825b33850e28.txt (0.192 KB over 1 chunks) in (0m0.08s)
            D      Running decode_files.ps1
            D      @{
            D        "$env:TEMP\b64-f36538b1f10bf80532dc432fbec25a65.txt" = @{
            D          "dst" = "$env:TEMP\kitchen/dna.json"
            D        };
            D        "$env:TEMP\b64-608ae6e6474ca88bdec913156a101881.txt" = @{
            D          "dst" = "$env:TEMP\kitchen/client.rb"
            D        };
            D        "$env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt" = @{
            D          "dst" = "$env:TEMP\kitchen\cache";
            D          "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip"
            D        };
            D        "$env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt" = @{
            D          "dst" = "$env:TEMP\kitchen/validation.pem"
            D        };
            D        "$env:TEMP\b64-33968442c0ef69a92763825b33850e28.txt" = @{
            D          "dst" = "$env:TEMP\kitchen\cookbooks";
            D          "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-33968442c0ef69a92763825b33850e28.zip"
            D        }
            D      }
            D      Parsing CSV Response
            D      "src_md5","tmpzip","verifies","tmpfile","dst_md5","dst"
            "608ae6e6474ca88bdec913156a101881",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-608ae6e6474ca88bdec913156a101881.txt","608ae6e6474ca88bdec913156a101881","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/client.rb"
            "76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip","True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt","76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache"
            "f36538b1f10bf80532dc432fbec25a65",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-f36538b1f10bf80532dc432fbec25a65.txt","f36538b1f10bf80532dc432fbec25a65","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/dna.json"
            "33968442c0ef69a92763825b33850e28","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-33968442c0ef69a92763825b33850e28.zip","True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-33968442c0ef69a92763825b33850e28.txt","33968442c0ef69a92763825b33850e28","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cookbooks"
            "49abb94825cb80b9a9cd59e5f76daf4a",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt","49abb94825cb80b9a9cd59e5f76daf4a","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/validation.pem"

            D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160630-30892-rtn6wp.zip
            D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160630-30892-1oevfqs.zip
            D      Uploaded 5 items dirty_check: (0m0.90s) stream_files: (0m0.39s) decode: (0m1.16s)
            D      Transfer complete
            D      [WinRM] negotiate::http://10.194.11.105:5985/wsman<{:user=>"administrator", :pass=>"NqdwNQ3@;5", :elevated_username=>"administrator", :elevated_password=>"NqdwNQ3@;5", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($env:PATH = [System.Environment]::GetEnvironmentVariable("PATH","Machine")

            & $env:systemdrive\opscode\chef\bin\chef-client.bat --local-mode --config $env:TEMP\kitchen\client.rb --log_level auto --force-formatter --no-color --json-attributes $env:TEMP\kitchen\dna.json --chef-zero-port 8889)
                   Starting Chef Client, version 12.12.10
                   Creating a new client identity for fips-integration-windows-2012r2 using the validator key.
                   resolving cookbooks for run list: []
                   Synchronizing Cookbooks:
                   Installing Cookbook Gems:
                   Compiling Cookbooks...
                   [2016-06-30T18:38:30+00:00] WARN: Node fips-integration-windows-2012r2 has an empty run list.
                   Converging 0 resources
                   Starting audit phase

                   Finished in 0 seconds (files took 0.64067 seconds to load)
                   0 examples, 0 failures
                   Auditing complete

                   Running handlers:
                   Running handlers complete
                   Chef Client finished, 0/0 resources updated in 32 seconds
                   [2016-06-30T18:38:30+00:00] ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json
            D      Cleaning up local sandbox in /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160630-30892-37jg2q
                   Finished converging <fips-integration-windows-2012r2> (2m3.18s).
            D      ------Exception-------
            D      Class: Kitchen::ActionFailed
            D      Message: 1 actions failed.
            D      ----------------------
            D      ------Backtrace-------
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:179:in `run_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command/action.rb:39:in `block in call'
            D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command/action.rb:37:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/cli.rb:56:in `perform'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/cli.rb:184:in `block (2 levels) in <class:CLI>'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/cli.rb:325:in `invoke_task'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/bin/kitchen:13:in `block in <top (required)>'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/errors.rb:174:in `with_friendly_errors'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/bin/kitchen:13:in `<top (required)>'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:23:in `load'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:23:in `<main>'
            D      ----End Backtrace-----
            D      -Composite Exception--
            D      Class: Kitchen::ActionFailed
            D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
            There was an error invoking '@{
              "ee541b042a0f0ef2da5f8f2861cc4131" = @{
                "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
              }
            }@{
              "ee541b042a0f0ef2da5f8f2861cc4131" = @{
                "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
              }
            }
            ':
            Invoke-Expression : At line:7 char:2
            + }@{
            +  ~~
            Unexpected token '@{' in expression or statement.
            At line:51 char:12
            +     return Invoke-Expression "$expr"
            +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
               tion
                + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
               vokeExpressionCommand

            At line:54 char:5
            +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
            +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                + CategoryInfo          : OperationStopped: (There was an er...ionCommand


            :String) [], RuntimeException
                + FullyQualifiedErrorId : There was an error invoking '@{
              "ee541b042a0f0ef2da5f8f2861cc4131" = @{
                    "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
               ps1";
                    "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
               ;
                    "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
               "
              }
            }@{
              "ee541b042a0f0ef2da5f8f2861cc4131" = @{
                    "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
               ps1";
                    "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
               ;
                    "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
               "
              }
            }
            ':
            Invoke-Expression : At line:7 char:2
            + }@{
            +  ~~
            Unexpected token '@{' in expression or statement.
            At line:51 char:12
            +     return Invoke-Expression "$expr"
            +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                    + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
               xcep
               tion
                    + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
               s.In
               vokeExpressionCommand


            ] on fips-unit-functional-windows-2012r2
            D      ----------------------
            D      ------Backtrace-------
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:394:in `parse_response'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:203:in `check_files'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:80:in `block in upload'
            D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:78:in `upload'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/transport/winrm.rb:130:in `upload'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/transport/winrm.rb:390:in `run_from_file_command'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/transport/winrm.rb:100:in `execute'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/provisioner/base.rb:67:in `block in call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/transport/winrm.rb:522:in `reuse_connection'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/transport/winrm.rb:72:in `connection'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/provisioner/base.rb:66:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:373:in `block in converge_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:513:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:513:in `synchronize_or_call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:478:in `block in action'
            D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:477:in `action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:369:in `converge_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:348:in `block in transition_to'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:347:in `each'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:347:in `transition_to'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:138:in `converge'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:194:in `public_send'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:194:in `run_action_in_thread'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
            D      ----End Backtrace-----
            D      ---Nested Exception---
            D      Class: Kitchen::ActionFailed
            D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
            There was an error invoking '@{
              "ee541b042a0f0ef2da5f8f2861cc4131" = @{
                "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
              }
            }@{
              "ee541b042a0f0ef2da5f8f2861cc4131" = @{
                "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
                "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
                "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
              }
            }
            ':
            Invoke-Expression : At line:7 char:2
            + }@{
            +  ~~
            Unexpected token '@{' in expression or statement.
            At line:51 char:12
            +     return Invoke-Expression "$expr"
            +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
               tion
                + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
               vokeExpressionCommand

            At line:54 char:5
            +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
            +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                + CategoryInfo          : OperationStopped: (There was an er...ionCommand


            :String) [], RuntimeException
                + FullyQualifiedErrorId : There was an error invoking '@{
              "ee541b042a0f0ef2da5f8f2861cc4131" = @{
                    "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
               ps1";
                    "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
               ;
                    "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
               "
              }
            }@{
              "ee541b042a0f0ef2da5f8f2861cc4131" = @{
                    "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
               ps1";
                    "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
               ;
                    "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
               "
              }
            }
            ':
            Invoke-Expression : At line:7 char:2
            + }@{
            +  ~~
            Unexpected token '@{' in expression or statement.
            At line:51 char:12
            +     return Invoke-Expression "$expr"
            +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                    + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
               xcep
               tion
                    + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
               s.In
               vokeExpressionCommand


            ]
            D      ----------------------
            D      ------Backtrace-------
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:394:in `parse_response'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:203:in `check_files'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:80:in `block in upload'
            D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:78:in `upload'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/transport/winrm.rb:130:in `upload'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/transport/winrm.rb:390:in `run_from_file_command'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/transport/winrm.rb:100:in `execute'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/provisioner/base.rb:67:in `block in call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/transport/winrm.rb:522:in `reuse_connection'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/transport/winrm.rb:72:in `connection'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/provisioner/base.rb:66:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:373:in `block in converge_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:513:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:513:in `synchronize_or_call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:478:in `block in action'
            D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:477:in `action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:369:in `converge_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:348:in `block in transition_to'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:347:in `each'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:347:in `transition_to'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:138:in `converge'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:194:in `public_send'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:194:in `run_action_in_thread'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
            D      ----End Backtrace-----
            D      [WinRM] closing remote shell 58BB15DF-FF49-4C53-92D2-B4052D0A0E49 on http://10.194.11.105:5985/wsman
            D      [WinRM] remote shell 58BB15DF-FF49-4C53-92D2-B4052D0A0E49 closed
            D      [WinRM] closing remote shell 674D7D6E-E278-45DE-BD35-2C01AA61AE98 on http://10.194.9.239:5985/wsman
            D      [WinRM] closing remote shell AE1D79B9-C96C-4F04-BB8F-CE5ED3CCECCC on http://10.194.9.239:5985/wsman
            D      [WinRM] remote shell AE1D79B9-C96C-4F04-BB8F-CE5ED3CCECCC closed
            STDERR: >>>>>> ------Exception-------
            >>>>>> Class: Kitchen::ActionFailed
            >>>>>> Message: 1 actions failed.
            >>>>>> ----------------------
            >>>>>> Please see .kitchen/logs/kitchen.log for more details
            >>>>>> Also try running `kitchen diagnose --all` for configuration
            ---- End output of bundle exec kitchen converge  -c -l debug ----
            Ran bundle exec kitchen converge  -c -l debug returned 20

            Resource Declaration:
            ---------------------
            # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb

             36:       execute "bundle exec kitchen #{command}#{instances ? " #{instances}" : ""}#{kitchen_options ? " #{kitchen_options}" : ""}" do
             37:         cwd kitchen_dir
             38:         env({
             39:           "KITCHEN_DRIVER" => driver,
             40:           "KITCHEN_INSTANCES" => instances,
             41:           "KITCHEN_LOCAL_YAML" => ::File.expand_path("../../.kitchen.#{driver}.yml", __FILE__),
             42:           "KITCHEN_CHEF_PRODUCT" => chef_product,
             43:           "KITCHEN_CHEF_CHANNEL" => chef_channel,
             44:           "KITCHEN_CHEF_VERSION" => chef_version,
             45:           "ARTIFACTORY_USERNAME" => artifactory_username,
             46:           "ARTIFACTORY_PASSWORD" => artifactory_password
             47:         }.merge(new_resource.env))
             48:       end
             49:     end

            Compiled Resource:
            ------------------
            # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:36:in `block in <class:Kitchen>'

            execute("bundle exec kitchen converge  -c -l debug") do
              action [:run]
              retries 0
              retry_delay 2
              default_guard_interpreter :execute
              command "bundle exec kitchen converge  -c -l debug"
              backup 5
              cwd "/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/fips"
              environment {"KITCHEN_DRIVER"=>"ec2", "KITCHEN_INSTANCES"=>"", "KITCHEN_LOCAL_YAML"=>"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/.kitchen.ec2.yml", "KITCHEN_CHEF_PRODUCT"=>"chef", "KITCHEN_CHEF_CHANNEL"=>"unstable", "KITCHEN_CHEF_VERSION"=>"12.12.10", "ARTIFACTORY_USERNAME"=>"chef-web-downloads", "ARTIFACTORY_PASSWORD"=>"fWPxYSB69EiuSpl8*3Dr^kGwf#hxUE6cmjeZRB%H!Cruit7qiKp%toH3nXKStQUg"}
              returns 0
              declared_type :execute
              cookbook_name "acceptance-cookbook"
            end


          ================================================================================
          Error executing action `run` on resource 'kitchen[converge]'
          ================================================================================

          Mixlib::ShellOut::ShellCommandFailed
          ------------------------------------
          execute[bundle exec kitchen converge  -c -l debug] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 36) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '20'
          ---- Begin output of bundle exec kitchen converge  -c -l debug ----
          STDOUT: -----> Starting Kitchen (v1.9.2)
          D      winrm requested, loading winrm gem (["~> 1.6"])
          D      winrm is loaded.
          D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
          D      winrm-fs is loaded.
          D      winrm requested, loading winrm gem (["~> 1.6"])
          D      winrm was already loaded.
          D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
          D      winrm-fs was already loaded.
          -----> Creating <fips-unit-functional-windows-2012r2>...
          D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
          -----> Creating <fips-unit-functional-centos-6>...
          D      platform name centos-6 appears to be a standard platform. Searching for centos 6 ...
          D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
          D      Searching for images matching {:name=>"CentOS-6.5-GA-*", :"owner-alias"=>"aws-marketplace", :architecture=>"x86_64", :"virtualization-type"=>"paravirtual", :"block-device-mapping.volume-type"=>"standard", :"image-type"=>"machine"} ...
          -----> Creating <fips-integration-centos-6>...
          D      platform name centos-6 appears to be a standard platform. Searching for centos 6 ...
          D      Searching for images matching {:name=>"CentOS-6.5-GA-*", :"owner-alias"=>"aws-marketplace", :architecture=>"x86_64", :"virtualization-type"=>"paravirtual", :"block-device-mapping.volume-type"=>"standard", :"image-type"=>"machine"} ...
          -----> Creating <fips-integration-windows-2012r2>...
          D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
          D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
          D      Search returned 3 images:
          D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
          D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
          D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
          D      Search returned 3 images:
          D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
          D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
          D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
          D      Image for fips-unit-functional-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                 Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
          D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
                 If you are not using an account that qualifies under the AWS
          free-tier, you may be charged to run these suites. The charge
          should be minimal, but neither Test Kitchen nor its maintainers
          are responsible for your incurred costs.

          D      Creating EC2 instance in region us-west-2 with properties:
          D      - instance_type = "m3.large"
          D      - ebs_optimized = false
          D      - image_id = "ami-8d0acfed"
          D      - key_name = "jenkins"
          D      - subnet_id = "subnet-19ac017c"
          D      - private_ip_address = nil
          D      - placement = {:availability_zone=>"us-west-2a"}
          D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
          D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
          D      Image for fips-integration-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                 Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
          D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
                 If you are not using an account that qualifies under the AWS
          free-tier, you may be charged to run these suites. The charge
          should be minimal, but neither Test Kitchen nor its maintainers
          are responsible for your incurred costs.

          D      Creating EC2 instance in region us-west-2 with properties:
          D      - instance_type = "m3.large"
          D      - ebs_optimized = false
          D      - image_id = "ami-8d0acfed"
          D      - key_name = "jenkins"
          D      - subnet_id = "subnet-19ac017c"
          D      - private_ip_address = nil
          D      - placement = {:availability_zone=>"us-west-2a"}
          D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
          D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
          D      Search returned 1 images:
          D      - CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2: Detected centos 6.5 x86_64.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
          D      Search returned 1 images:
          D      - CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2: Detected centos 6.5 x86_64.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
          D      Image for fips-unit-functional-centos-6: CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                 Detected platform: centos version 6.5 on x86_64. Instance Type: m3.large. Default username: root (default).
          D      No SSH username specified: using default username root  for image ami-b6bdde86, which we detected as centos 6.5 x86_64.
                 If you are not using an account that qualifies under the AWS
          free-tier, you may be charged to run these suites. The charge
          should be minimal, but neither Test Kitchen nor its maintainers
          are responsible for your incurred costs.

          D      Creating EC2 instance in region us-west-2 with properties:
          D      - instance_type = "m3.large"
          D      - ebs_optimized = false
          D      - image_id = "ami-b6bdde86"
          D      - key_name = "jenkins"
          D      - subnet_id = "subnet-19ac017c"
          D      - private_ip_address = nil
          D      Image for fips-integration-centos-6: CentOS-6.5-GA-03.3-f4325b48-37b0-405a-9847-236c64622e3e-ami-6be4dc02.2.  Architecture: x86_64, Virtualization: paravirtual, Storage: ebs, Created: 2014-02-05T16:52:47.000Z
                 Detected platform: centos version 6.5 on x86_64. Instance Type: m3.large. Default username: root (default).
          D      No SSH username specified: using default username root  for image ami-b6bdde86, which we detected as centos 6.5 x86_64.
                 If you are not using an account that qualifies under the AWS
          free-tier, you may be charged to run these suites. The charge
          should be minimal, but neither Test Kitchen nor its maintainers
          are responsible for your incurred costs.

          D      Creating EC2 instance in region us-west-2 with properties:
          D      - instance_type = "m3.large"
          D      - placement = {:availability_zone=>"us-west-2a"}
          D      - ebs_optimized = false
          D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
          D      - image_id = "ami-b6bdde86"
          D      - key_name = "jenkins"
          D      - subnet_id = "subnet-19ac017c"
          D      - private_ip_address = nil
          D      - placement = {:availability_zone=>"us-west-2a"}
          D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
                 Instance <i-a4548d0b> requested.
                 Polling AWS for existence, attempt 0...
                 Instance <i-39558c96> requested.
                 Polling AWS for existence, attempt 0...
                 Attempting to tag the instance, 0 retries
                 Attempting to tag the instance, 0 retries
                 EC2 instance <i-a4548d0b> created.
                 Waited 0/300s for instance <i-a4548d0b> to become ready.
                 EC2 instance <i-39558c96> created.
                 Waited 0/300s for instance <i-39558c96> to become ready.
                 Instance <i-fa548d55> requested.
                 Polling AWS for existence, attempt 0...
                 Instance <i-38558c97> requested.
                 Polling AWS for existence, attempt 0...
                 Attempting to tag the instance, 0 retries
                 Attempting to tag the instance, 0 retries
                 EC2 instance <i-38558c97> created.
                 Waited 0/300s for instance <i-38558c97> to become ready.
                 EC2 instance <i-fa548d55> created.
                 Waited 0/300s for instance <i-fa548d55> to become ready.
                 Waited 5/300s for instance <i-a4548d0b> to become ready.
                 Waited 5/300s for instance <i-39558c96> to become ready.
                 Waited 5/300s for instance <i-38558c97> to become ready.
                 Waited 5/300s for instance <i-fa548d55> to become ready.
                 Waited 10/300s for instance <i-39558c96> to become ready.
                 Waited 10/300s for instance <i-a4548d0b> to become ready.
                 Waited 10/300s for instance <i-38558c97> to become ready.
                 Waited 10/300s for instance <i-fa548d55> to become ready.
                 Waited 15/300s for instance <i-39558c96> to become ready.
                 Waited 15/300s for instance <i-a4548d0b> to become ready.
                 Waited 15/300s for instance <i-38558c97> to become ready.
                 Waited 15/300s for instance <i-fa548d55> to become ready.
                 Waited 20/300s for instance <i-39558c96> to become ready.
                 Waited 20/300s for instance <i-a4548d0b> to become ready.
                 Waited 20/300s for instance <i-38558c97> to become ready.
                 Waited 20/300s for instance <i-fa548d55> to become ready.
                 EC2 instance <i-fa548d55> ready.
          D      [SSH] opening connection to root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"]}>
                 Waited 25/300s for instance <i-39558c96> to become ready.
                 Waited 25/300s for instance <i-a4548d0b> to become ready.
                 Waited 25/300s for instance <i-38558c97> to become ready.
                 Waited 30/300s for instance <i-39558c96> to become ready.
                 Waited 30/300s for instance <i-a4548d0b> to become ready.
                 Waited 30/300s for instance <i-38558c97> to become ready.
                 EC2 instance <i-38558c97> ready.
          D      [SSH] opening connection to root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"]}>
          D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                 Waiting for SSH service on 10.194.13.49:22, retrying in 3 seconds
                 Waited 35/300s for instance <i-39558c96> to become ready.
                 Waited 35/300s for instance <i-a4548d0b> to become ready.
          D      [SSH] opening connection to root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                 Waited 40/300s for instance <i-39558c96> to become ready.
                 Waited 40/300s for instance <i-a4548d0b> to become ready.
          D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                 Waiting for SSH service on 10.194.11.20:22, retrying in 3 seconds
                 Waited 45/300s for instance <i-a4548d0b> to become ready.
                 Waited 45/300s for instance <i-39558c96> to become ready.
          D      [SSH] opening connection to root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                 Waited 50/300s for instance <i-a4548d0b> to become ready.
                 Waited 50/300s for instance <i-39558c96> to become ready.
          D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                 Waiting for SSH service on 10.194.13.49:22, retrying in 3 seconds
          D      [SSH] opening connection to root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                 Waited 55/300s for instance <i-a4548d0b> to become ready.
                 Waited 55/300s for instance <i-39558c96> to become ready.
                 Waited 60/300s for instance <i-a4548d0b> to become ready.
                 Waited 60/300s for instance <i-39558c96> to become ready.
          D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                 Waiting for SSH service on 10.194.11.20:22, retrying in 3 seconds
          D      [SSH] opening connection to root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                 Waited 65/300s for instance <i-a4548d0b> to become ready.
                 Waited 65/300s for instance <i-39558c96> to become ready.
          D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                 Waiting for SSH service on 10.194.13.49:22, retrying in 3 seconds
                 Waited 70/300s for instance <i-a4548d0b> to become ready.
                 Waited 70/300s for instance <i-39558c96> to become ready.
          D      [SSH] opening connection to root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                 Waited 75/300s for instance <i-a4548d0b> to become ready.
                 Waited 75/300s for instance <i-39558c96> to become ready.
          D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                 Waiting for SSH service on 10.194.11.20:22, retrying in 3 seconds
                 Waited 80/300s for instance <i-a4548d0b> to become ready.
                 Waited 80/300s for instance <i-39558c96> to become ready.
          D      [SSH] opening connection to root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                 Waited 85/300s for instance <i-a4548d0b> to become ready.
                 Waited 85/300s for instance <i-39558c96> to become ready.
          D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                 Waiting for SSH service on 10.194.13.49:22, retrying in 3 seconds
          D      [SSH] opening connection to root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                 Waited 90/300s for instance <i-a4548d0b> to become ready.
                 Waited 90/300s for instance <i-39558c96> to become ready.
                 Waited 95/300s for instance <i-a4548d0b> to become ready.
                 Waited 95/300s for instance <i-39558c96> to become ready.
          D      [SSH] connection failed (#<Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout>)
                 Waiting for SSH service on 10.194.11.20:22, retrying in 3 seconds
          D      [SSH] connection failed (#<Net::SSH::AuthenticationFailed: Authentication failed for user root@10.194.13.49>)
                 Waiting for SSH service on 10.194.13.49:22, retrying in 3 seconds
          D      [SSH] opening connection to root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
          D      [SSH] root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (echo '[SSH] Established')
          D      [SSH] opening connection to root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
          D      [SSH] root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (echo '[SSH] Established')
                 bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                 [SSH] Established
          D      Using sudo_command='sudo -E' for ohai hints
          D      [SSH] reusing existing connection root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
          D      [SSH] root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E mkdir -p /etc/chef/ohai/hints; sudo -E touch /etc/chef/ohai/hints/ec2.json)
                 bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                 bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                 [SSH] Established
          D      Using sudo_command='sudo -E' for ohai hints
          D      [SSH] reusing existing connection root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
          D      [SSH] root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E mkdir -p /etc/chef/ohai/hints; sudo -E touch /etc/chef/ohai/hints/ec2.json)
                 bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
          D      ec2:create '10.194.11.20'
                 Finished creating <fips-integration-centos-6> (1m48.73s).
          -----> Converging <fips-integration-centos-6>...
                 Preparing files for transfer
          D      Creating local sandbox in /tmp/cheftest/fips-integration-centos-6-sandbox-20160630-30892-1ya4oq6
                 Preparing dna.json
          D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                 Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                 Removing non-cookbook files before transfer
                 Preparing validation.pem
          D      Using a dummy validation.pem
                 Preparing client.rb
          D      Creating client.rb from {:node_name=>"fips-integration-centos-6", :checksum_path=>"/tmp/kitchen/checksums", :file_cache_path=>"/tmp/kitchen/cache", :file_backup_path=>"/tmp/kitchen/backup", :cookbook_path=>["/tmp/kitchen/cookbooks", "/tmp/kitchen/site-cookbooks"], :data_bag_path=>"/tmp/kitchen/data_bags", :environment_path=>"/tmp/kitchen/environments", :node_path=>"/tmp/kitchen/nodes", :role_path=>"/tmp/kitchen/roles", :client_path=>"/tmp/kitchen/clients", :user_path=>"/tmp/kitchen/users", :validation_key=>"/tmp/kitchen/validation.pem", :client_key=>"/tmp/kitchen/client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"/tmp/kitchen/encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
          D      [SSH] reusing existing connection root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
          D      ec2:create '10.194.13.49'
                 Finished creating <fips-unit-functional-centos-6> (1m48.79s).
          -----> Converging <fips-unit-functional-centos-6>...
                 Preparing files for transfer
          D      Creating local sandbox in /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160630-30892-hwedvi
                 Preparing dna.json
          D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                 Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                 Removing non-cookbook files before transfer
                 Preparing validation.pem
          D      Using a dummy validation.pem
                 Preparing client.rb
          D      Creating client.rb from {:node_name=>"fips-unit-functional-centos-6", :checksum_path=>"/tmp/kitchen/checksums", :file_cache_path=>"/tmp/kitchen/cache", :file_backup_path=>"/tmp/kitchen/backup", :cookbook_path=>["/tmp/kitchen/cookbooks", "/tmp/kitchen/site-cookbooks"], :data_bag_path=>"/tmp/kitchen/data_bags", :environment_path=>"/tmp/kitchen/environments", :node_path=>"/tmp/kitchen/nodes", :role_path=>"/tmp/kitchen/roles", :client_path=>"/tmp/kitchen/clients", :user_path=>"/tmp/kitchen/users", :validation_key=>"/tmp/kitchen/validation.pem", :client_key=>"/tmp/kitchen/client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"/tmp/kitchen/encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
          D      [SSH] reusing existing connection root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
          D      [SSH] root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E cat > /tmp/chef-installer.sh <<"EOL"
          #!/bin/bash
          #!/bin/sh
          # WARNING: REQUIRES /bin/sh
          #
          # - must run on /bin/sh on solaris 9
          # - must run on /bin/sh on AIX 6.x
          #
          # Copyright:: Copyright (c) 2010-2015 Chef Software, Inc.
          # License:: Apache License, Version 2.0
          #
          # Licensed under the Apache License, Version 2.0 (the "License");
          # you may not use this file except in compliance with the License.
          # You may obtain a copy of the License at
          #
          #     http://www.apache.org/licenses/LICENSE-2.0
          #
          # Unless required by applicable law or agreed to in writing, software
          # distributed under the License is distributed on an "AS IS" BASIS,
          # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
          # See the License for the specific language governing permissions and
          # limitations under the License.
          #

          # helpers.sh
          ############
          # This section has some helper functions to make life easier.
          #
          # Outputs:
          # $tmp_dir: secure-ish temp directory that can be used during installation.
          ############

          # Check whether a command exists - returns 0 if it does, 1 if it does not
          exists() {
            if command -v $1 >/dev/null 2>&1
            then
              return 0
            else
              return 1
            fi
          }

          # Output the instructions to report bug about this script
          report_bug() {
            echo "Version: $version"
            echo ""
            echo "Please file a Bug Report at https://github.com/chef/omnitruck/issues/new"
            echo "Alternatively, feel free to open a Support Ticket at https://www.chef.io/support/tickets"
            echo "More Chef support resources can be found at https://www.chef.io/support"
            echo ""
            echo "Please include as many details about the problem as possible i.e., how to reproduce"
            echo "the problem (if possible), type of the Operating System and its version, etc.,"
            echo "and any other relevant details that might help us with troubleshooting."
            echo ""
          }

          checksum_mismatch() {
            echo "Package checksum mismatch!"
            report_bug
            exit 1
          }

          unable_to_retrieve_package() {
            echo "Unable to retrieve a valid package!"
            report_bug
            echo "Metadata URL: $metadata_url"
            if test "x$download_url" != "x"; then
              echo "Download URL: $download_url"
            fi
            if test "x$stderr_results" != "x"; then
              echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
            fi
            exit 1
          }

          http_404_error() {
            echo "Omnitruck artifact does not exist for version $version on platform $platform"
            echo ""
            echo "Either this means:"
            echo "   - We do not support $platform"
            echo "   - We do not have an artifact for $version"
            echo ""
            echo "This is often the latter case due to running a prerelease or RC version of chef"
            echo "or a gem version which was only pushed to rubygems and not omnitruck."
            echo ""
            echo "You may be able to set your knife[:bootstrap_version] to the most recent stable"
            echo "release of Chef to fix this problem (or the most recent stable major version number)."
            echo ""
            echo "In order to test the version parameter, adventurous users may take the Metadata URL"
            echo "below and modify the '&v=<number>' parameter until you successfully get a URL that"
            echo "does not 404 (e.g. via curl or wget).  You should be able to use '&v=11' or '&v=12'"
            echo "succesfully."
            echo ""
            echo "If you cannot fix this problem by setting the bootstrap_version, it probably means"
            echo "that $platform is not supported."
            echo ""
            # deliberately do not call report_bug to suppress bug report noise.
            echo "Metadata URL: $metadata_url"
            if test "x$download_url" != "x"; then
              echo "Download URL: $download_url"
            fi
            if test "x$stderr_results" != "x"; then
              echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
            fi
            exit 1
          }

          capture_tmp_stderr() {
            # spool up /tmp/stderr from all the commands we called
            if test -f "$tmp_dir/stderr"; then
              output=`cat $tmp_dir/stderr`
              stderr_results="${stderr_results}\nSTDERR from $1:\n\n$output\n"
              rm $tmp_dir/stderr
            fi
          }

          # do_wget URL FILENAME
          do_wget() {
            echo "trying wget..."
            wget -O "$2" "$1" 2>$tmp_dir/stderr
            rc=$?
            # check for 404
            grep "ERROR 404" $tmp_dir/stderr 2>&1 >/dev/null
            if test $? -eq 0; then
              echo "ERROR 404"
              http_404_error
            fi

            # check for bad return status or empty output
            if test $rc -ne 0 || test ! -s "$2"; then
              capture_tmp_stderr "wget"
              return 1
            fi

            return 0
          }

          # do_curl URL FILENAME
          do_curl() {
            echo "trying curl..."
            curl --retry 5 -sL -D $tmp_dir/stderr "$1" > "$2"
            rc=$?
            # check for 404
            grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
            if test $? -eq 0; then
              echo "ERROR 404"
              http_404_error
            fi

            # check for bad return status or empty output
            if test $rc -ne 0 || test ! -s "$2"; then
              capture_tmp_stderr "curl"
              return 1
            fi

            return 0
          }

          # do_fetch URL FILENAME
          do_fetch() {
            echo "trying fetch..."
            fetch -o "$2" "$1" 2>$tmp_dir/stderr
            # check for bad return status
            test $? -ne 0 && return 1
            return 0
          }

          # do_perl URL FILENAME
          do_perl() {
            echo "trying perl..."
            perl -e 'use LWP::Simple; getprint($ARGV[0]);' "$1" > "$2" 2>$tmp_dir/stderr
            rc=$?
            # check for 404
            grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
            if test $? -eq 0; then
              echo "ERROR 404"
              http_404_error
            fi

            # check for bad return status or empty output
            if test $rc -ne 0 || test ! -s "$2"; then
              capture_tmp_stderr "perl"
              return 1
            fi

            return 0
          }

          # do_python URL FILENAME
          do_python() {
            echo "trying python..."
            python -c "import sys,urllib2 ; sys.stdout.write(urllib2.urlopen(sys.argv[1]).read())" "$1" > "$2" 2>$tmp_dir/stderr
            rc=$?
            # check for 404
            grep "HTTP Error 404" $tmp_dir/stderr 2>&1 >/dev/null
            if test $? -eq 0; then
              echo "ERROR 404"
              http_404_error
            fi

            # check for bad return status or empty output
            if test $rc -ne 0 || test ! -s "$2"; then
              capture_tmp_stderr "python"
              return 1
            fi
            return 0
          }

          # returns 0 if checksums match
          do_checksum() {
            if exists sha256sum; then
              echo "Comparing checksum with sha256sum..."
              checksum=`sha256sum $1 | awk '{ print $1 }'`
              return `test "x$checksum" = "x$2"`
            elif exists shasum; then
              echo "Comparing checksum with shasum..."
              checksum=`shasum -a 256 $1 | awk '{ print $1 }'`
              return `test "x$checksum" = "x$2"`
            else
              echo "WARNING: could not find a valid checksum program, pre-install shasum or sha256sum in your O/S image to get valdation..."
              return 0
            fi
          }

          # do_download URL FILENAME
          do_download() {
            echo "downloading $1"
            echo "  to file $2"

            url=`echo $1`
            if test "x$platform" = "xsolaris2"; then
              if test "x$platform_version" = "x5.9" -o "x$platform_version" = "x5.10"; then
                # solaris 9 lacks openssl, solaris 10 lacks recent enough credentials - your base O/S is completely insecure, please upgrade
                url=`echo $url | sed -e 's/https/http/'`
              fi
            fi

            # we try all of these until we get success.
            # perl, in particular may be present but LWP::Simple may not be installed

            if exists wget; then
              do_wget $url $2 && return 0
            fi

            if exists curl; then
              do_curl $url $2 && return 0
            fi

            if exists fetch; then
              do_fetch $url $2 && return 0
            fi

            if exists perl; then
              do_perl $url $2 && return 0
            fi

            if exists python; then
              do_python $url $2 && return 0
            fi

            unable_to_retrieve_package
          }

          # install_file TYPE FILENAME
          # TYPE is "rpm", "deb", "solaris", "sh", etc.
          install_file() {
            echo "Installing $project $version"
            case "$1" in
              "rpm")
                if test "x$platform" = "xnexus" || test "x$platform" = "xios_xr"; then
                  echo "installing with yum..."
                  yum install -yv "$2"
                else
                  echo "installing with rpm..."
                  rpm -Uvh --oldpackage --replacepkgs "$2"
                fi
                ;;
              "deb")
                echo "installing with dpkg..."
                dpkg -i "$2"
                ;;
              "bff")
                echo "installing with installp..."
                installp -aXYgd "$2" all
                ;;
              "solaris")
                echo "installing with pkgadd..."
                echo "conflict=nocheck" > $tmp_dir/nocheck
                echo "action=nocheck" >> $tmp_dir/nocheck
                echo "mail=" >> $tmp_dir/nocheck
                pkgrm -a $tmp_dir/nocheck -n $project >/dev/null 2>&1 || true
                pkgadd -G -n -d "$2" -a $tmp_dir/nocheck $project
                ;;
              "pkg")
                echo "installing with installer..."
                cd / && /usr/sbin/installer -pkg "$2" -target /
                ;;
              "dmg")
                echo "installing dmg file..."
                hdiutil detach "/Volumes/chef_software" >/dev/null 2>&1 || true
                hdiutil attach "$2" -mountpoint "/Volumes/chef_software"
                cd / && /usr/sbin/installer -pkg `find "/Volumes/chef_software" -name \*.pkg` -target /
                hdiutil detach "/Volumes/chef_software"
                ;;
              "sh" )
                echo "installing with sh..."
                sh "$2"
                ;;
              *)
                echo "Unknown filetype: $1"
                report_bug
                exit 1
                ;;
            esac
            if test $? -ne 0; then
              echo "Installation failed"
              report_bug
              exit 1
            fi
          }

          if test "x$TMPDIR" = "x"; then
            tmp="/tmp"
          else
            tmp=$TMPDIR
          fi
          # secure-ish temp dir creation without having mktemp available (DDoS-able but not expliotable)
          tmp_dir="$tmp/install.sh.$$"
          (umask 077 && mkdir $tmp_dir) || exit 1

          ############
          # end of helpers.sh
          ############


          project=chef
          version=12.12.10
          channel=unstable


          # platform_detection.sh
          ############
          # This section makes platform detection compatible with omnitruck on the system
          #   it runs.
          #
          # Outputs:
          # $platform: Name of the platform.
          # $platform_version: Version of the platform.
          # $machine: System's architecture.
          ############

          #
          # Platform and Platform Version detection
          #
          # NOTE: This should now match ohai platform and platform_version matching.
          # do not invented new platform and platform_version schemas, just make this behave
          # like what ohai returns as platform and platform_version for the server.
          #
          # ALSO NOTE: Do not mangle platform or platform_version here.  It is less error
          # prone and more future-proof to do that in the server, and then all omnitruck clients
          # will 'inherit' the changes (install.sh is not the only client of the omnitruck
          # endpoint out there).
          #

          machine=`uname -m`
          os=`uname -s`

          if test -f "/etc/lsb-release" && grep -q DISTRIB_ID /etc/lsb-release && ! grep -q wrlinux /etc/lsb-release; then
            platform=`grep DISTRIB_ID /etc/lsb-release | cut -d "=" -f 2 | tr '[A-Z]' '[a-z]'`
            platform_version=`grep DISTRIB_RELEASE /etc/lsb-release | cut -d "=" -f 2`
          elif test -f "/etc/debian_version"; then
            platform="debian"
            platform_version=`cat /etc/debian_version`
          elif test -f "/etc/redhat-release"; then
            platform=`sed 's/^\(.\+\) release.*/\1/' /etc/redhat-release | tr '[A-Z]' '[a-z]'`
            platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/redhat-release`

            # If /etc/redhat-release exists, we act like RHEL by default
            if test "$platform" = "fedora"; then
              # FIXME: stop remapping fedora to el
              # FIXME: remove client side platform_version mangling and hard coded yolo
              # Change platform version for use below.
              platform_version="6.0"
            fi

            if test "$platform" = "xenserver"; then
              # Current XenServer 6.2 is based on CentOS 5, platform is not reset to "el" server should hanlde response
              platform="xenserver"
            else
              # FIXME: use "redhat"
              platform="el"
            fi

          elif test -f "/etc/system-release"; then
            platform=`sed 's/^\(.\+\) release.\+/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
            platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
            # amazon is built off of fedora, so act like RHEL
            if test "$platform" = "amazon linux ami"; then
              # FIXME: remove client side platform_version mangling and hard coded yolo, and remapping to deprecated "el"
              platform="el"
              platform_version="6.0"
            fi
          # Apple OS X
          elif test -f "/usr/bin/sw_vers"; then
            platform="mac_os_x"
            # Matching the tab-space with sed is error-prone
            platform_version=`sw_vers | awk '/^ProductVersion:/ { print $2 }' | cut -d. -f1,2`

            # x86_64 Apple hardware often runs 32-bit kernels (see OHAI-63)
            x86_64=`sysctl -n hw.optional.x86_64`
            if test $x86_64 -eq 1; then
              machine="x86_64"
            fi
          elif test -f "/etc/release"; then
            machine=`/usr/bin/uname -p`
            if grep -q SmartOS /etc/release; then
              platform="smartos"
              platform_version=`grep ^Image /etc/product | awk '{ print $3 }'`
            else
              platform="solaris2"
              platform_version=`/usr/bin/uname -r`
            fi
          elif test -f "/etc/SuSE-release"; then
            if grep -q 'Enterprise' /etc/SuSE-release;
            then
                platform="sles"
                platform_version=`awk '/^VERSION/ {V = $3}; /^PATCHLEVEL/ {P = $3}; END {print V "." P}' /etc/SuSE-release`
            else
                platform="suse"
                platform_version=`awk '/^VERSION =/ { print $3 }' /etc/SuSE-release`
            fi
          elif test "x$os" = "xFreeBSD"; then
            platform="freebsd"
            platform_version=`uname -r | sed 's/-.*//'`
          elif test "x$os" = "xAIX"; then
            platform="aix"
            platform_version="`uname -v`.`uname -r`"
            machine="powerpc"
          elif test -f "/etc/os-release"; then
            . /etc/os-release
            if test "x$CISCO_RELEASE_INFO" != "x"; then
              . $CISCO_RELEASE_INFO
            fi

            platform=$ID
            platform_version=$VERSION
          fi

          if test "x$platform" = "x"; then
            echo "Unable to determine platform version!"
            report_bug
            exit 1
          fi

          #
          # NOTE: platform manging in the install.sh is DEPRECATED
          #
          # - install.sh should be true to ohai and should not remap
          #   platform or platform versions.
          #
          # - remapping platform and mangling platform version numbers is
          #   now the complete responsibility of the server-side endpoints
          #

          major_version=`echo $platform_version | cut -d. -f1`
          case $platform in
            # FIXME: should remove this case statement completely
            "el")
              # FIXME:  "el" is deprecated, should use "redhat"
              platform_version=$major_version
              ;;
            "debian")
              if test "x$major_version" = "x5"; then
                # This is here for potential back-compat.
                # We do not have 5 in versions we publish for anymore but we
                # might have it for earlier versions.
                platform_version="6"
              else
                platform_version=$major_version
              fi
              ;;
            "freebsd")
              platform_version=$major_version
              ;;
            "sles")
              platform_version=$major_version
              ;;
            "suse")
              platform_version=$major_version
              ;;
          esac

          # normalize the architecture we detected
          case $machine in
            "x86_64"|"amd64"|"x64")
              machine="x86_64"
              ;;
            "i386"|"i86pc"|"x86"|"i686")
              machine="i386"
              ;;
            "sparc"|"sun4u"|"sun4v")
              machine="sparc"
              ;;
          esac

          if test "x$platform_version" = "x"; then
            echo "Unable to determine platform version!"
            report_bug
            exit 1
          fi

          if test "x$platform" = "xsolaris2"; then
            # hack up the path on Solaris to find wget, pkgadd
            PATH=/usr/sfw/bin:/usr/sbin:$PATH
            export PATH
          fi

          echo "$platform $platform_version $machine"

          ############
          # end of platform_detection.sh
          ############


          # artifactory_urls.sh
          ############
          # This section sets up the information for a build to be installed from artifactory
          #  then uses $platform, $platform_version and $machine to select the correct
          #  version.
          #
          # Inputs:
          # $platform:
          # $platform_version:
          # $machine:
          #
          # Outputs:
          # $download_url:
          # $sha256:
          ############


            artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/ppc64le"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_ppc64el.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 16b55cbf511b3989b006c98c940f8230858cf6eba81b6ec9793912d686b66885" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.9/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.9/chef-12.12.10-1.dmg" >> "$artifact_info_dir/artifact_info"
            echo "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.10/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.10/chef-12.12.10-1.dmg" >> "$artifact_info_dir/artifact_info"
            echo "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.11/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.11/chef-12.12.10-1.dmg" >> "$artifact_info_dir/artifact_info"
            echo "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/ios_xr/6/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ios_xr/6/chef-12.12.10-1.ios_xr6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
            echo "sha256 f8f5e1bc424c103f9423aa7b4ed1d2dfc7bd7e1132c0af9c34c78caaf7631a9b" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/nexus/7/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/nexus/7/chef-12.12.10-1.nexus7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
            echo "sha256 e03a7b07f699d96ce4f2093f8dd4be61fc8547860fa52d19ad0f0394fa488e66" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/debian/6/i686"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_i386.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/debian/7/i686"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_i386.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/debian/8/i686"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_i386.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/i386"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.i386.sh" >> "$artifact_info_dir/artifact_info"
            echo "sha256 76ea4ba096b432e6544be0dd8ab04c201aeaf6343965b0f5cd2cc1fd3bb957e1" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/i686"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_i386.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/i686"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_i386.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/i386"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.i386.sh" >> "$artifact_info_dir/artifact_info"
            echo "sha256 746a2030bb5e078a525051508253dd70ae70d8999c89b2f95de3f368b98d64d9" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/el/5/i686"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.i386.rpm" >> "$artifact_info_dir/artifact_info"
            echo "sha256 eb0627c6f828cd08d95d4822874412ab6a4fe8fd6e8f29721ce0953def3fb0ed" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/el/7/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
            echo "sha256 41676f26ce135282cbc09cb3f9de6c04dfdec964547fdb995318fe659f3166f9" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/i386"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
            echo "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/el/6/i686"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.i386.rpm" >> "$artifact_info_dir/artifact_info"
            echo "sha256 b291ce4b5c01fb87dd98033e06c27e313c740b3139ebc30d33dd25154d0edd73" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/i386"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
            echo "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/i386"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x86.msi" >> "$artifact_info_dir/artifact_info"
            echo "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/el/7/ppc64le"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64le.rpm" >> "$artifact_info_dir/artifact_info"
            echo "sha256 fedff09be8b6b3bad5f33bb0f675cd240a3b653ce7ce7e9236f888b28b1cea92" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/windows/2012/i386"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x86.msi" >> "$artifact_info_dir/artifact_info"
            echo "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/el/7/ppc64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64.rpm" >> "$artifact_info_dir/artifact_info"
            echo "sha256 83a6de2ac1484959c90b830d70cf6cef8528ec89a1f416d95d314b23b82efe21" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/debian/6/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/debian/7/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/debian/8/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/amd64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
            echo "sha256 a72febfdba2d28ff67f9540c554c6f94b60f9781f31c791355e0e0f55cdbc86a" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/i386"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x86.msi" >> "$artifact_info_dir/artifact_info"
            echo "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/el/5/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
            echo "sha256 96af6e90f6ff3876d357859544bea71c24c6dc4d92eb098a3ae3f36b45b3dac6" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/el/6/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
            echo "sha256 bf531b332f24a1f4d5cc5d43597443714aef3a801cd4b4edf45644132a26a276" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x64.msi" >> "$artifact_info_dir/artifact_info"
            echo "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/amd64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
            echo "sha256 d3a5206694949575e519354f8e121703de2e75940446a2d7f58013affe96c656" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/windows/2012/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x64.msi" >> "$artifact_info_dir/artifact_info"
            echo "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x64.msi" >> "$artifact_info_dir/artifact_info"
            echo "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/aix/6.1/powerpc"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/6.1/chef-12.12.10-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
            echo "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/aix/7.1/powerpc"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/7.1/chef-12.12.10-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
            echo "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/sparc"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
            echo "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/sparc"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
            echo "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" >> "$artifact_info_dir/artifact_info"


          artifact_info_for_platform="$tmp_dir/artifact_info/$platform/$platform_version/$machine/artifact_info"

          download_url=`awk '$1 == "url" { print $2 }' "$artifact_info_for_platform"`
          sha256=`awk '$1 == "sha256" { print $2 }' "$artifact_info_for_platform"`


          # fetch_package.sh
          ############
          # This section fetchs a package from $download_url and verifies its metadata.
          #
          # Inputs:
          # $download_url:
          # $tmp_dir:
          # Optional Inputs:
          # $cmdline_filename: Name of the package downloaded on local disk.
          # $cmdline_dl_dir: Name of the directory downloaded package will be saved to on local disk.
          #
          # Outputs:
          # $download_filename: Name of the downloaded file on local disk.
          # $filetype: Type of the file downloaded.
          ############

          filename=`echo $download_url | sed -e 's/^.*\///'`
          filetype=`echo $filename | sed -e 's/^.*\.//'`

          # use either $tmp_dir, the provided directory (-d) or the provided filename (-f)
          if test "x$cmdline_filename" != "x"; then
            download_filename="$cmdline_filename"
          elif test "x$cmdline_dl_dir" != "x"; then
            download_filename="$cmdline_dl_dir/$filename"
          else
            download_filename="$tmp_dir/$filename"
          fi

          # ensure the parent directory where to download the installer always exists
          download_dir=`dirname $download_filename`
          (umask 077 && mkdir -p $download_dir) || exit 1

          # check if we have that file locally available and if so verify the checksum
          cached_file_available="false"
          if test -f $download_filename; then
            echo "$download_filename already exists, verifiying checksum..."
            if do_checksum "$download_filename" "$sha256"; then
              echo "checksum compare succeeded, using existing file!"
              cached_file_available="true"
            else
              echo "checksum mismatch, downloading latest version of the file"
            fi
          fi

          # download if no local version of the file available
          if test "x$cached_file_available" != "xtrue"; then
            do_download "$download_url"  "$download_filename"
            do_checksum "$download_filename" "$sha256" || checksum_mismatch
          fi

          ############
          # end of fetch_package.sh
          ############


          # install_package.sh
          ############
          # Installs a package and removed the temp directory.
          #
          # Inputs:
          # $download_filename: Name of the file to be installed.
          # $filetype: Type of the file to be installed.
          # $version: The version requested. Used only for warning user if not set.
          ############

          if test "x$version" = "x"; then
            echo
            echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
            echo
            echo "You are installing an omnibus package without a version pin.  If you are installing"
            echo "on production servers via an automated process this is DANGEROUS and you will"
            echo "be upgraded without warning on new releases, even to new major releases."
            echo "Letting the version float is only appropriate in desktop, test, development or"
            echo "CI/CD environments."
            echo
            echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
            echo
          fi

          install_file $filetype "$download_filename"

          if test "x$tmp_dir" != "x"; then
            rm -r "$tmp_dir"
          fi

          ############
          # end of install_package.sh
          ############

          EOL
          chmod +x /tmp/chef-installer.sh
          sudo -E /tmp/chef-installer.sh)
                 bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
          D      [SSH] root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sudo -E cat > /tmp/chef-installer.sh <<"EOL"
          #!/bin/bash
          #!/bin/sh
          # WARNING: REQUIRES /bin/sh
          #
          # - must run on /bin/sh on solaris 9
          # - must run on /bin/sh on AIX 6.x
          #
          # Copyright:: Copyright (c) 2010-2015 Chef Software, Inc.
          # License:: Apache License, Version 2.0
          #
          # Licensed under the Apache License, Version 2.0 (the "License");
          # you may not use this file except in compliance with the License.
          # You may obtain a copy of the License at
          #
          #     http://www.apache.org/licenses/LICENSE-2.0
          #
          # Unless required by applicable law or agreed to in writing, software
          # distributed under the License is distributed on an "AS IS" BASIS,
          # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
          # See the License for the specific language governing permissions and
          # limitations under the License.
          #

          # helpers.sh
          ############
          # This section has some helper functions to make life easier.
          #
          # Outputs:
          # $tmp_dir: secure-ish temp directory that can be used during installation.
          ############

          # Check whether a command exists - returns 0 if it does, 1 if it does not
          exists() {
            if command -v $1 >/dev/null 2>&1
            then
              return 0
            else
              return 1
            fi
          }

          # Output the instructions to report bug about this script
          report_bug() {
            echo "Version: $version"
            echo ""
            echo "Please file a Bug Report at https://github.com/chef/omnitruck/issues/new"
            echo "Alternatively, feel free to open a Support Ticket at https://www.chef.io/support/tickets"
            echo "More Chef support resources can be found at https://www.chef.io/support"
            echo ""
            echo "Please include as many details about the problem as possible i.e., how to reproduce"
            echo "the problem (if possible), type of the Operating System and its version, etc.,"
            echo "and any other relevant details that might help us with troubleshooting."
            echo ""
          }

          checksum_mismatch() {
            echo "Package checksum mismatch!"
            report_bug
            exit 1
          }

          unable_to_retrieve_package() {
            echo "Unable to retrieve a valid package!"
            report_bug
            echo "Metadata URL: $metadata_url"
            if test "x$download_url" != "x"; then
              echo "Download URL: $download_url"
            fi
            if test "x$stderr_results" != "x"; then
              echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
            fi
            exit 1
          }

          http_404_error() {
            echo "Omnitruck artifact does not exist for version $version on platform $platform"
            echo ""
            echo "Either this means:"
            echo "   - We do not support $platform"
            echo "   - We do not have an artifact for $version"
            echo ""
            echo "This is often the latter case due to running a prerelease or RC version of chef"
            echo "or a gem version which was only pushed to rubygems and not omnitruck."
            echo ""
            echo "You may be able to set your knife[:bootstrap_version] to the most recent stable"
            echo "release of Chef to fix this problem (or the most recent stable major version number)."
            echo ""
            echo "In order to test the version parameter, adventurous users may take the Metadata URL"
            echo "below and modify the '&v=<number>' parameter until you successfully get a URL that"
            echo "does not 404 (e.g. via curl or wget).  You should be able to use '&v=11' or '&v=12'"
            echo "succesfully."
            echo ""
            echo "If you cannot fix this problem by setting the bootstrap_version, it probably means"
            echo "that $platform is not supported."
            echo ""
            # deliberately do not call report_bug to suppress bug report noise.
            echo "Metadata URL: $metadata_url"
            if test "x$download_url" != "x"; then
              echo "Download URL: $download_url"
            fi
            if test "x$stderr_results" != "x"; then
              echo "\nDEBUG OUTPUT FOLLOWS:\n$stderr_results"
            fi
            exit 1
          }

          capture_tmp_stderr() {
            # spool up /tmp/stderr from all the commands we called
            if test -f "$tmp_dir/stderr"; then
              output=`cat $tmp_dir/stderr`
              stderr_results="${stderr_results}\nSTDERR from $1:\n\n$output\n"
              rm $tmp_dir/stderr
            fi
          }

          # do_wget URL FILENAME
          do_wget() {
            echo "trying wget..."
            wget -O "$2" "$1" 2>$tmp_dir/stderr
            rc=$?
            # check for 404
            grep "ERROR 404" $tmp_dir/stderr 2>&1 >/dev/null
            if test $? -eq 0; then
              echo "ERROR 404"
              http_404_error
            fi

            # check for bad return status or empty output
            if test $rc -ne 0 || test ! -s "$2"; then
              capture_tmp_stderr "wget"
              return 1
            fi

            return 0
          }

          # do_curl URL FILENAME
          do_curl() {
            echo "trying curl..."
            curl --retry 5 -sL -D $tmp_dir/stderr "$1" > "$2"
            rc=$?
            # check for 404
            grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
            if test $? -eq 0; then
              echo "ERROR 404"
              http_404_error
            fi

            # check for bad return status or empty output
            if test $rc -ne 0 || test ! -s "$2"; then
              capture_tmp_stderr "curl"
              return 1
            fi

            return 0
          }

          # do_fetch URL FILENAME
          do_fetch() {
            echo "trying fetch..."
            fetch -o "$2" "$1" 2>$tmp_dir/stderr
            # check for bad return status
            test $? -ne 0 && return 1
            return 0
          }

          # do_perl URL FILENAME
          do_perl() {
            echo "trying perl..."
            perl -e 'use LWP::Simple; getprint($ARGV[0]);' "$1" > "$2" 2>$tmp_dir/stderr
            rc=$?
            # check for 404
            grep "404 Not Found" $tmp_dir/stderr 2>&1 >/dev/null
            if test $? -eq 0; then
              echo "ERROR 404"
              http_404_error
            fi

            # check for bad return status or empty output
            if test $rc -ne 0 || test ! -s "$2"; then
              capture_tmp_stderr "perl"
              return 1
            fi

            return 0
          }

          # do_python URL FILENAME
          do_python() {
            echo "trying python..."
            python -c "import sys,urllib2 ; sys.stdout.write(urllib2.urlopen(sys.argv[1]).read())" "$1" > "$2" 2>$tmp_dir/stderr
            rc=$?
            # check for 404
            grep "HTTP Error 404" $tmp_dir/stderr 2>&1 >/dev/null
            if test $? -eq 0; then
              echo "ERROR 404"
              http_404_error
            fi

            # check for bad return status or empty output
            if test $rc -ne 0 || test ! -s "$2"; then
              capture_tmp_stderr "python"
              return 1
            fi
            return 0
          }

          # returns 0 if checksums match
          do_checksum() {
            if exists sha256sum; then
              echo "Comparing checksum with sha256sum..."
              checksum=`sha256sum $1 | awk '{ print $1 }'`
              return `test "x$checksum" = "x$2"`
            elif exists shasum; then
              echo "Comparing checksum with shasum..."
              checksum=`shasum -a 256 $1 | awk '{ print $1 }'`
              return `test "x$checksum" = "x$2"`
            else
              echo "WARNING: could not find a valid checksum program, pre-install shasum or sha256sum in your O/S image to get valdation..."
              return 0
            fi
          }

          # do_download URL FILENAME
          do_download() {
            echo "downloading $1"
            echo "  to file $2"

            url=`echo $1`
            if test "x$platform" = "xsolaris2"; then
              if test "x$platform_version" = "x5.9" -o "x$platform_version" = "x5.10"; then
                # solaris 9 lacks openssl, solaris 10 lacks recent enough credentials - your base O/S is completely insecure, please upgrade
                url=`echo $url | sed -e 's/https/http/'`
              fi
            fi

            # we try all of these until we get success.
            # perl, in particular may be present but LWP::Simple may not be installed

            if exists wget; then
              do_wget $url $2 && return 0
            fi

            if exists curl; then
              do_curl $url $2 && return 0
            fi

            if exists fetch; then
              do_fetch $url $2 && return 0
            fi

            if exists perl; then
              do_perl $url $2 && return 0
            fi

            if exists python; then
              do_python $url $2 && return 0
            fi

            unable_to_retrieve_package
          }

          # install_file TYPE FILENAME
          # TYPE is "rpm", "deb", "solaris", "sh", etc.
          install_file() {
            echo "Installing $project $version"
            case "$1" in
              "rpm")
                if test "x$platform" = "xnexus" || test "x$platform" = "xios_xr"; then
                  echo "installing with yum..."
                  yum install -yv "$2"
                else
                  echo "installing with rpm..."
                  rpm -Uvh --oldpackage --replacepkgs "$2"
                fi
                ;;
              "deb")
                echo "installing with dpkg..."
                dpkg -i "$2"
                ;;
              "bff")
                echo "installing with installp..."
                installp -aXYgd "$2" all
                ;;
              "solaris")
                echo "installing with pkgadd..."
                echo "conflict=nocheck" > $tmp_dir/nocheck
                echo "action=nocheck" >> $tmp_dir/nocheck
                echo "mail=" >> $tmp_dir/nocheck
                pkgrm -a $tmp_dir/nocheck -n $project >/dev/null 2>&1 || true
                pkgadd -G -n -d "$2" -a $tmp_dir/nocheck $project
                ;;
              "pkg")
                echo "installing with installer..."
                cd / && /usr/sbin/installer -pkg "$2" -target /
                ;;
              "dmg")
                echo "installing dmg file..."
                hdiutil detach "/Volumes/chef_software" >/dev/null 2>&1 || true
                hdiutil attach "$2" -mountpoint "/Volumes/chef_software"
                cd / && /usr/sbin/installer -pkg `find "/Volumes/chef_software" -name \*.pkg` -target /
                hdiutil detach "/Volumes/chef_software"
                ;;
              "sh" )
                echo "installing with sh..."
                sh "$2"
                ;;
              *)
                echo "Unknown filetype: $1"
                report_bug
                exit 1
                ;;
            esac
            if test $? -ne 0; then
              echo "Installation failed"
              report_bug
              exit 1
            fi
          }

          if test "x$TMPDIR" = "x"; then
            tmp="/tmp"
          else
            tmp=$TMPDIR
          fi
          # secure-ish temp dir creation without having mktemp available (DDoS-able but not expliotable)
          tmp_dir="$tmp/install.sh.$$"
          (umask 077 && mkdir $tmp_dir) || exit 1

          ############
          # end of helpers.sh
          ############


          project=chef
          version=12.12.10
          channel=unstable


          # platform_detection.sh
          ############
          # This section makes platform detection compatible with omnitruck on the system
          #   it runs.
          #
          # Outputs:
          # $platform: Name of the platform.
          # $platform_version: Version of the platform.
          # $machine: System's architecture.
          ############

          #
          # Platform and Platform Version detection
          #
          # NOTE: This should now match ohai platform and platform_version matching.
          # do not invented new platform and platform_version schemas, just make this behave
          # like what ohai returns as platform and platform_version for the server.
          #
          # ALSO NOTE: Do not mangle platform or platform_version here.  It is less error
          # prone and more future-proof to do that in the server, and then all omnitruck clients
          # will 'inherit' the changes (install.sh is not the only client of the omnitruck
          # endpoint out there).
          #

          machine=`uname -m`
          os=`uname -s`

          if test -f "/etc/lsb-release" && grep -q DISTRIB_ID /etc/lsb-release && ! grep -q wrlinux /etc/lsb-release; then
            platform=`grep DISTRIB_ID /etc/lsb-release | cut -d "=" -f 2 | tr '[A-Z]' '[a-z]'`
            platform_version=`grep DISTRIB_RELEASE /etc/lsb-release | cut -d "=" -f 2`
          elif test -f "/etc/debian_version"; then
            platform="debian"
            platform_version=`cat /etc/debian_version`
          elif test -f "/etc/redhat-release"; then
            platform=`sed 's/^\(.\+\) release.*/\1/' /etc/redhat-release | tr '[A-Z]' '[a-z]'`
            platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/redhat-release`

            # If /etc/redhat-release exists, we act like RHEL by default
            if test "$platform" = "fedora"; then
              # FIXME: stop remapping fedora to el
              # FIXME: remove client side platform_version mangling and hard coded yolo
              # Change platform version for use below.
              platform_version="6.0"
            fi

            if test "$platform" = "xenserver"; then
              # Current XenServer 6.2 is based on CentOS 5, platform is not reset to "el" server should hanlde response
              platform="xenserver"
            else
              # FIXME: use "redhat"
              platform="el"
            fi

          elif test -f "/etc/system-release"; then
            platform=`sed 's/^\(.\+\) release.\+/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
            platform_version=`sed 's/^.\+ release \([.0-9]\+\).*/\1/' /etc/system-release | tr '[A-Z]' '[a-z]'`
            # amazon is built off of fedora, so act like RHEL
            if test "$platform" = "amazon linux ami"; then
              # FIXME: remove client side platform_version mangling and hard coded yolo, and remapping to deprecated "el"
              platform="el"
              platform_version="6.0"
            fi
          # Apple OS X
          elif test -f "/usr/bin/sw_vers"; then
            platform="mac_os_x"
            # Matching the tab-space with sed is error-prone
            platform_version=`sw_vers | awk '/^ProductVersion:/ { print $2 }' | cut -d. -f1,2`

            # x86_64 Apple hardware often runs 32-bit kernels (see OHAI-63)
            x86_64=`sysctl -n hw.optional.x86_64`
            if test $x86_64 -eq 1; then
              machine="x86_64"
            fi
          elif test -f "/etc/release"; then
            machine=`/usr/bin/uname -p`
            if grep -q SmartOS /etc/release; then
              platform="smartos"
              platform_version=`grep ^Image /etc/product | awk '{ print $3 }'`
            else
              platform="solaris2"
              platform_version=`/usr/bin/uname -r`
            fi
          elif test -f "/etc/SuSE-release"; then
            if grep -q 'Enterprise' /etc/SuSE-release;
            then
                platform="sles"
                platform_version=`awk '/^VERSION/ {V = $3}; /^PATCHLEVEL/ {P = $3}; END {print V "." P}' /etc/SuSE-release`
            else
                platform="suse"
                platform_version=`awk '/^VERSION =/ { print $3 }' /etc/SuSE-release`
            fi
          elif test "x$os" = "xFreeBSD"; then
            platform="freebsd"
            platform_version=`uname -r | sed 's/-.*//'`
          elif test "x$os" = "xAIX"; then
            platform="aix"
            platform_version="`uname -v`.`uname -r`"
            machine="powerpc"
          elif test -f "/etc/os-release"; then
            . /etc/os-release
            if test "x$CISCO_RELEASE_INFO" != "x"; then
              . $CISCO_RELEASE_INFO
            fi

            platform=$ID
            platform_version=$VERSION
          fi

          if test "x$platform" = "x"; then
            echo "Unable to determine platform version!"
            report_bug
            exit 1
          fi

          #
          # NOTE: platform manging in the install.sh is DEPRECATED
          #
          # - install.sh should be true to ohai and should not remap
          #   platform or platform versions.
          #
          # - remapping platform and mangling platform version numbers is
          #   now the complete responsibility of the server-side endpoints
          #

          major_version=`echo $platform_version | cut -d. -f1`
          case $platform in
            # FIXME: should remove this case statement completely
            "el")
              # FIXME:  "el" is deprecated, should use "redhat"
              platform_version=$major_version
              ;;
            "debian")
              if test "x$major_version" = "x5"; then
                # This is here for potential back-compat.
                # We do not have 5 in versions we publish for anymore but we
                # might have it for earlier versions.
                platform_version="6"
              else
                platform_version=$major_version
              fi
              ;;
            "freebsd")
              platform_version=$major_version
              ;;
            "sles")
              platform_version=$major_version
              ;;
            "suse")
              platform_version=$major_version
              ;;
          esac

          # normalize the architecture we detected
          case $machine in
            "x86_64"|"amd64"|"x64")
              machine="x86_64"
              ;;
            "i386"|"i86pc"|"x86"|"i686")
              machine="i386"
              ;;
            "sparc"|"sun4u"|"sun4v")
              machine="sparc"
              ;;
          esac

          if test "x$platform_version" = "x"; then
            echo "Unable to determine platform version!"
            report_bug
            exit 1
          fi

          if test "x$platform" = "xsolaris2"; then
            # hack up the path on Solaris to find wget, pkgadd
            PATH=/usr/sfw/bin:/usr/sbin:$PATH
            export PATH
          fi

          echo "$platform $platform_version $machine"

          ############
          # end of platform_detection.sh
          ############


          # artifactory_urls.sh
          ############
          # This section sets up the information for a build to be installed from artifactory
          #  then uses $platform, $platform_version and $machine to select the correct
          #  version.
          #
          # Inputs:
          # $platform:
          # $platform_version:
          # $machine:
          #
          # Outputs:
          # $download_url:
          # $sha256:
          ############


            artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/ppc64le"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_ppc64el.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 16b55cbf511b3989b006c98c940f8230858cf6eba81b6ec9793912d686b66885" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.9/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.9/chef-12.12.10-1.dmg" >> "$artifact_info_dir/artifact_info"
            echo "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.10/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.10/chef-12.12.10-1.dmg" >> "$artifact_info_dir/artifact_info"
            echo "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/mac_os_x/10.11/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.11/chef-12.12.10-1.dmg" >> "$artifact_info_dir/artifact_info"
            echo "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/ios_xr/6/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ios_xr/6/chef-12.12.10-1.ios_xr6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
            echo "sha256 f8f5e1bc424c103f9423aa7b4ed1d2dfc7bd7e1132c0af9c34c78caaf7631a9b" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/nexus/7/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/nexus/7/chef-12.12.10-1.nexus7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
            echo "sha256 e03a7b07f699d96ce4f2093f8dd4be61fc8547860fa52d19ad0f0394fa488e66" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/debian/6/i686"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_i386.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/debian/7/i686"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_i386.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/debian/8/i686"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_i386.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/i386"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.i386.sh" >> "$artifact_info_dir/artifact_info"
            echo "sha256 76ea4ba096b432e6544be0dd8ab04c201aeaf6343965b0f5cd2cc1fd3bb957e1" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/i686"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_i386.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/i686"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_i386.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/i386"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.i386.sh" >> "$artifact_info_dir/artifact_info"
            echo "sha256 746a2030bb5e078a525051508253dd70ae70d8999c89b2f95de3f368b98d64d9" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/el/5/i686"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.i386.rpm" >> "$artifact_info_dir/artifact_info"
            echo "sha256 eb0627c6f828cd08d95d4822874412ab6a4fe8fd6e8f29721ce0953def3fb0ed" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/el/7/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
            echo "sha256 41676f26ce135282cbc09cb3f9de6c04dfdec964547fdb995318fe659f3166f9" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/i386"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
            echo "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/el/6/i686"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.i386.rpm" >> "$artifact_info_dir/artifact_info"
            echo "sha256 b291ce4b5c01fb87dd98033e06c27e313c740b3139ebc30d33dd25154d0edd73" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/i386"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.i386.solaris" >> "$artifact_info_dir/artifact_info"
            echo "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/ubuntu/12.04/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/ubuntu/14.04/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/i386"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x86.msi" >> "$artifact_info_dir/artifact_info"
            echo "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/el/7/ppc64le"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64le.rpm" >> "$artifact_info_dir/artifact_info"
            echo "sha256 fedff09be8b6b3bad5f33bb0f675cd240a3b653ce7ce7e9236f888b28b1cea92" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/windows/2012/i386"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x86.msi" >> "$artifact_info_dir/artifact_info"
            echo "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/el/7/ppc64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64.rpm" >> "$artifact_info_dir/artifact_info"
            echo "sha256 83a6de2ac1484959c90b830d70cf6cef8528ec89a1f416d95d314b23b82efe21" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/debian/6/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/debian/7/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/debian/8/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_amd64.deb" >> "$artifact_info_dir/artifact_info"
            echo "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/freebsd/10/amd64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
            echo "sha256 a72febfdba2d28ff67f9540c554c6f94b60f9781f31c791355e0e0f55cdbc86a" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/i386"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x86.msi" >> "$artifact_info_dir/artifact_info"
            echo "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/el/5/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
            echo "sha256 96af6e90f6ff3876d357859544bea71c24c6dc4d92eb098a3ae3f36b45b3dac6" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/el/6/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.x86_64.rpm" >> "$artifact_info_dir/artifact_info"
            echo "sha256 bf531b332f24a1f4d5cc5d43597443714aef3a801cd4b4edf45644132a26a276" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/windows/2008r2/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x64.msi" >> "$artifact_info_dir/artifact_info"
            echo "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/freebsd/9/amd64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.amd64.sh" >> "$artifact_info_dir/artifact_info"
            echo "sha256 d3a5206694949575e519354f8e121703de2e75940446a2d7f58013affe96c656" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/windows/2012/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x64.msi" >> "$artifact_info_dir/artifact_info"
            echo "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/windows/2012r2/x86_64"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x64.msi" >> "$artifact_info_dir/artifact_info"
            echo "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/aix/6.1/powerpc"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/6.1/chef-12.12.10-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
            echo "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/aix/7.1/powerpc"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/7.1/chef-12.12.10-1.powerpc.bff" >> "$artifact_info_dir/artifact_info"
            echo "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.10/sparc"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
            echo "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" >> "$artifact_info_dir/artifact_info"

            artifact_info_dir="$tmp_dir/artifact_info/solaris2/5.11/sparc"
            mkdir -p $artifact_info_dir
            touch "$artifact_info_dir/artifact_info"
            echo "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.sparc.solaris" >> "$artifact_info_dir/artifact_info"
            echo "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" >> "$artifact_info_dir/artifact_info"


          artifact_info_for_platform="$tmp_dir/artifact_info/$platform/$platform_version/$machine/artifact_info"

          download_url=`awk '$1 == "url" { print $2 }' "$artifact_info_for_platform"`
          sha256=`awk '$1 == "sha256" { print $2 }' "$artifact_info_for_platform"`


          # fetch_package.sh
          ############
          # This section fetchs a package from $download_url and verifies its metadata.
          #
          # Inputs:
          # $download_url:
          # $tmp_dir:
          # Optional Inputs:
          # $cmdline_filename: Name of the package downloaded on local disk.
          # $cmdline_dl_dir: Name of the directory downloaded package will be saved to on local disk.
          #
          # Outputs:
          # $download_filename: Name of the downloaded file on local disk.
          # $filetype: Type of the file downloaded.
          ############

          filename=`echo $download_url | sed -e 's/^.*\///'`
          filetype=`echo $filename | sed -e 's/^.*\.//'`

          # use either $tmp_dir, the provided directory (-d) or the provided filename (-f)
          if test "x$cmdline_filename" != "x"; then
            download_filename="$cmdline_filename"
          elif test "x$cmdline_dl_dir" != "x"; then
            download_filename="$cmdline_dl_dir/$filename"
          else
            download_filename="$tmp_dir/$filename"
          fi

          # ensure the parent directory where to download the installer always exists
          download_dir=`dirname $download_filename`
          (umask 077 && mkdir -p $download_dir) || exit 1

          # check if we have that file locally available and if so verify the checksum
          cached_file_available="false"
          if test -f $download_filename; then
            echo "$download_filename already exists, verifiying checksum..."
            if do_checksum "$download_filename" "$sha256"; then
              echo "checksum compare succeeded, using existing file!"
              cached_file_available="true"
            else
              echo "checksum mismatch, downloading latest version of the file"
            fi
          fi

          # download if no local version of the file available
          if test "x$cached_file_available" != "xtrue"; then
            do_download "$download_url"  "$download_filename"
            do_checksum "$download_filename" "$sha256" || checksum_mismatch
          fi

          ############
          # end of fetch_package.sh
          ############


          # install_package.sh
          ############
          # Installs a package and removed the temp directory.
          #
          # Inputs:
          # $download_filename: Name of the file to be installed.
          # $filetype: Type of the file to be installed.
          # $version: The version requested. Used only for warning user if not set.
          ############

          if test "x$version" = "x"; then
            echo
            echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
            echo
            echo "You are installing an omnibus package without a version pin.  If you are installing"
            echo "on production servers via an automated process this is DANGEROUS and you will"
            echo "be upgraded without warning on new releases, even to new major releases."
            echo "Letting the version float is only appropriate in desktop, test, development or"
            echo "CI/CD environments."
            echo
            echo "WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING"
            echo
          fi

          install_file $filetype "$download_filename"

          if test "x$tmp_dir" != "x"; then
            rm -r "$tmp_dir"
          fi

          ############
          # end of install_package.sh
          ############

          EOL
          chmod +x /tmp/chef-installer.sh
          sudo -E /tmp/chef-installer.sh)
                 bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                 /bin/bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                 /bin/bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                 el 6 x86_64
                 el 6 x86_64
                 Waited 100/300s for instance <i-a4548d0b> to become ready.
                 downloading http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.x86_64.rpm
                   to file /tmp/install.sh.959/chef-12.12.10-1.el6.x86_64.rpm
                 trying curl...
                 downloading http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.x86_64.rpm
                   to file /tmp/install.sh.961/chef-12.12.10-1.el6.x86_64.rpm
                 trying curl...
                 Waited 100/300s for instance <i-39558c96> to become ready.
                 Comparing checksum with sha256sum...
                 Comparing checksum with sha256sum...
                 Installing chef 12.12.10
                 installing with rpm...
                 Installing chef 12.12.10
                 installing with rpm...
                 warning: /tmp/install.sh.961/chef-12.12.10-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
                 warning: /tmp/install.sh.959/chef-12.12.10-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
                 Preparing...                                                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                 Preparing...                                                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### (100%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                 Waited 105/300s for instance <i-a4548d0b> to become ready.
                 Waited 105/300s for instance <i-39558c96> to become ready.
          D      Console output: ---
          2016/06/30 18:34:33Z: EC2ConfigMonitorState: 0
          2016/06/30 18:34:33Z: Windows sysprep configuration complete.
          2016/06/30 18:34:37Z: AMI Origin Version: 2016.06.15
          2016/06/30 18:34:37Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
          2016/06/30 18:34:37Z: OS: Microsoft Windows NT 6.3.9600
          2016/06/30 18:34:37Z: OsVersion: 6.3
          2016/06/30 18:34:37Z: OsProductName: Windows Server 2012 R2 Standard
          2016/06/30 18:34:37Z: OsBuildLabEx: 9600.18292.amd64fre.winblue_ltsb.160330-1744
          2016/06/30 18:34:37Z: Language: en-US
          2016/06/30 18:34:37Z: TimeZone: Coordinated Universal Time
          2016/06/30 18:34:37Z: Offset: UTC 00:00:00
          2016/06/30 18:34:37Z: EC2 Agent: Ec2Config service v3.17.1032
          2016/06/30 18:34:40Z: Message: Waiting for meta-data accessibility...
          2016/06/30 18:34:40Z: Message: Meta-data is now available.
          2016/06/30 18:34:41Z: AMI-ID: ami-8d0acfed
          2016/06/30 18:34:41Z: Instance-ID: i-39558c96
          2016/06/30 18:34:45Z: Driver: AWS PV Network Device v7.3.2.0
          2016/06/30 18:34:45Z: Driver: AWS PV Storage Host Adapter v7.3.2.0
          2016/06/30 18:34:45Z: Ec2SetPassword: Enabled
          2016/06/30 18:34:45Z: RDPCERTIFICATE-SUBJECTNAME: WIN-BLK027AP49T
          2016/06/30 18:34:45Z: RDPCERTIFICATE-THUMBPRINT: BE65898DE4C3CBC07E4B34A12DBF648F7152780E
          2016/06/30 18:34:48Z: Username: Administrator
          2016/06/30 18:34:48Z: Password: <Password>
          RgE9Jo3G39Nw8skOiv0jNl0nICLdJUvmFV0b+0gyHxXWCiCjI3Wl5ihp3KVaK5rYjfZzbijlfW+7KMzjxNxFEmI22XWZDeGY48zI2UQCsWDbPPFYDpsKohcutrUbHGIyep09uN4U+qcjF7bAA2ecQUZiQCIYzPNAtAt3bIO+toooMDJXmqcyy3k+lPAxccte+XAojyuT644MQ4/V6sX5aUTVj9Yift85YshuGQaZc4o+9gpZTMmH+RXt1Ix2Kv4UVsxK39tKSq+CaJ31zbHTV49JrYp3rp38lFRlz9iYIqCobKA263eqmwGCwE5lX3VeEfGdJWECKb/bjt/5jMWKYA==
          </Password>
          2016/06/30 18:34:52Z: Message: Windows is Ready to use

                 Waited 0/300s for instance <i-39558c96> to fetch windows admin password.
                 Retrieved Windows password for instance <i-39558c96>.
                 EC2 instance <i-39558c96> ready.
                    1:chef                                                               (  1%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (  3%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (  6%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (  8%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        ( 10%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       ( 13%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      ( 15%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     ( 17%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    ( 19%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   ( 22%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  ( 24%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 ( 26%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                ( 28%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               ( 31%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              ( 33%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             ( 35%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            ( 38%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           ( 40%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          ( 42%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         ( 44%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        ( 47%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       ( 49%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      ( 51%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     ( 53%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    ( 56%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   ( 58%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  ( 60%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 ( 63%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                ( 65%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               ( 67%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              ( 69%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             ( 72%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            ( 74%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           ( 76%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          ( 78%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         ( 81%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        ( 83%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       ( 85%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      ( 88%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     ( 90%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    ( 92%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   ( 94%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  ( 97%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### ( 99%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
                    1:chef                                                               (  1%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#                                           (  3%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##                                          (  6%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###                                         (  8%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####                                        ( 10%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####                                       ( 13%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######                                      ( 15%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######                                     ( 17%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########                                    ( 19%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########                                   ( 22%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########                                  ( 24%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########                                 ( 26%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############                                ( 28%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############                               ( 31%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############                              ( 33%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############                             ( 35%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################                            ( 38%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################                           ( 40%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################                          ( 42%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################                         ( 44%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################                        ( 47%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################                       ( 49%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################                      ( 51%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################                     ( 53%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################                    ( 56%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################                   ( 58%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################                  ( 60%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###########################                 ( 63%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10############################                ( 65%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#############################               ( 67%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##############################              ( 69%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###############################             ( 72%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10################################            ( 74%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#################################           ( 76%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##################################          ( 78%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10###################################         ( 81%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10####################################        ( 83%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#####################################       ( 85%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10######################################      ( 88%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#######################################     ( 90%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################    ( 92%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10#########################################   ( 94%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10##########################################  ( 97%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### ( 99%)\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10\10########################################### [100%]
          D      [WinRM] opening remote shell on http://10.194.9.239:5985/wsman
                 /bin/sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                 /bin/sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                 Thank you for installing Chef!
          D      [SSH] root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '
          sudo_rm="sudo -E rm"
          dirs="/tmp/kitchen/clients /tmp/kitchen/cookbooks /tmp/kitchen/data /tmp/kitchen/data_bags /tmp/kitchen/encrypted_data_bag_secret /tmp/kitchen/environments /tmp/kitchen/roles"
          root_path="/tmp/kitchen"

          $sudo_rm -rf $dirs
          mkdir -p $root_path
          ')
                 bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                 sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                 Thank you for installing Chef!
          D      [SSH] root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '
          sudo_rm="sudo -E rm"
          dirs="/tmp/kitchen/clients /tmp/kitchen/cookbooks /tmp/kitchen/data /tmp/kitchen/data_bags /tmp/kitchen/encrypted_data_bag_secret /tmp/kitchen/environments /tmp/kitchen/roles"
          root_path="/tmp/kitchen"

          $sudo_rm -rf $dirs
          mkdir -p $root_path
          ')
                 bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                 sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                 Transferring files to <fips-integration-centos-6>
          D      TIMING: scp async upload (Kitchen::Transport::Ssh)
                 Transferring files to <fips-unit-functional-centos-6>
          D      TIMING: scp async upload (Kitchen::Transport::Ssh)
          D      TIMING: scp async upload (Kitchen::Transport::Ssh) took (0m0.19s)
          D      Transfer complete
          D      [SSH] root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '
          sudo -E /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json --chef-zero-port 8889
          ')
                 bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                 sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
          D      TIMING: scp async upload (Kitchen::Transport::Ssh) took (0m0.33s)
          D      Transfer complete
          D      [SSH] root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}> (sh -c '
          sudo -E /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json --chef-zero-port 8889
          ')
                 bash: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                 sh: warning: setlocale: LC_ALL: cannot change locale (C.UTF-8)
                 Starting Chef Client, version 12.12.10
                 Starting Chef Client, version 12.12.10
                 Waited 110/300s for instance <i-a4548d0b> to become ready.
                 Creating a new client identity for fips-unit-functional-centos-6 using the validator key.
                 resolving cookbooks for run list: []
                 Synchronizing Cookbooks:
                 Installing Cookbook Gems:
                 Compiling Cookbooks...
                 [2016-06-30T18:35:03+00:00] WARN: Node fips-unit-functional-centos-6 has an empty run list.
                 Converging 0 resources
                 Creating a new client identity for fips-integration-centos-6 using the validator key.
                 Starting audit phase
                 resolving cookbooks for run list: []
                 Synchronizing Cookbooks:
                 Installing Cookbook Gems:
                 Compiling Cookbooks...
                 [2016-06-30T18:35:04+00:00] WARN: Node fips-integration-centos-6 has an empty run list.
                 Converging 0 resources
                 Starting audit phase

                 Finished in 0.00034 seconds (files took 0.442 seconds to load)
                 0 examples, 0 failures
                 Auditing complete

                 Running handlers:
                 Running handlers complete
                 Chef Client finished, 0/0 resources updated in 03 seconds
                 [2016-06-30T18:35:04+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json

                 Finished in 0.00036 seconds (files took 0.4288 seconds to load)
                 0 examples, 0 failures
                 Auditing complete

                 Running handlers:
                 Running handlers complete
                 Chef Client finished, 0/0 resources updated in 03 seconds
                 [2016-06-30T18:35:04+00:00] ERROR: Failed to post audit report to server. Saving report to /tmp/kitchen/cache/failed-audit-data.json
          D      Cleaning up local sandbox in /tmp/cheftest/fips-unit-functional-centos-6-sandbox-20160630-30892-hwedvi
                 Finished converging <fips-unit-functional-centos-6> (0m13.60s).
          D      [SSH] shutting previous connection root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
          D      [SSH] closing connection to root@10.194.13.49<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
          D      Cleaning up local sandbox in /tmp/cheftest/fips-integration-centos-6-sandbox-20160630-30892-1ya4oq6
                 Finished converging <fips-integration-centos-6> (0m13.75s).
          D      [SSH] shutting previous connection root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
          D      [SSH] closing connection to root@10.194.11.20<{:user_known_hosts_file=>"/dev/null", :paranoid=>false, :port=>22, :compression=>false, :compression_level=>0, :keepalive=>true, :keepalive_interval=>60, :timeout=>15, :keys_only=>true, :keys=>["/home/jenkins/.ssh/jenkins.pem"], :auth_methods=>["publickey"], :user=>"root"}>
                 Waited 115/300s for instance <i-a4548d0b> to become ready.
          D      Console output: ---
          2016/06/30 18:34:43Z: EC2ConfigMonitorState: 0
          2016/06/30 18:34:43Z: Windows sysprep configuration complete.
          2016/06/30 18:34:47Z: AMI Origin Version: 2016.06.15
          2016/06/30 18:34:47Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
          2016/06/30 18:34:47Z: OS: Microsoft Windows NT 6.3.9600
          2016/06/30 18:34:47Z: OsVersion: 6.3
          2016/06/30 18:34:47Z: OsProductName: Windows Server 2012 R2 Standard
          2016/06/30 18:34:47Z: OsBuildLabEx: 9600.18292.amd64fre.winblue_ltsb.160330-1744
          2016/06/30 18:34:47Z: Language: en-US
          2016/06/30 18:34:47Z: TimeZone: Coordinated Universal Time
          2016/06/30 18:34:47Z: Offset: UTC 00:00:00
          2016/06/30 18:34:47Z: EC2 Agent: Ec2Config service v3.17.1032
          2016/06/30 18:34:50Z: Message: Waiting for meta-data accessibility...
          2016/06/30 18:34:50Z: Message: Meta-data is now available.
          2016/06/30 18:34:51Z: AMI-ID: ami-8d0acfed
          2016/06/30 18:34:51Z: Instance-ID: i-a4548d0b
          2016/06/30 18:34:54Z: Driver: AWS PV Network Device v7.3.2.0
          2016/06/30 18:34:54Z: Driver: AWS PV Storage Host Adapter v7.3.2.0
          2016/06/30 18:34:54Z: Ec2SetPassword: Enabled
          2016/06/30 18:34:55Z: RDPCERTIFICATE-SUBJECTNAME: WIN-L93V7PQDGES
          2016/06/30 18:34:55Z: RDPCERTIFICATE-THUMBPRINT: 60967D3EDD2A0C9334FAA6461425D88CA6ADE053
          2016/06/30 18:34:58Z: Username: Administrator
          2016/06/30 18:34:58Z: Password: <Password>
          U91+Dkc6yiLPxbtTsEHLOZy2QSCJJpscjhiZZ0lP1YYpKS17/vzldih8GeP/BfsCC7pBnps6pdXRWWWLZXLYfj9Sm53/6eczCDEffCwATeOSaiAk5pqwY7nLlrKX4WZVqYh4aaKn7VzVKZwevSv4iEN8CvBGJ3ymiccEQXX5Gtc4iw/4jsBdSnOVIfB2XbBsvHyxb4B7wNr2kidRi6DAYyUeY1h7dIuFxtXiRuXyNyP4THIyx9X5zPl/KbG/1EzphO8sD6dho58mfuxWfFbp0qcS7eQMI0X/H6g0qIP0h9nqS4j5E4WmAeHARh+AoW1MdjLJpIvJsSrpWodtZ3Z5Yw==
          </Password>
          2016/06/30 18:35:00Z: Message: Windows is Ready to use

                 Waited 0/300s for instance <i-a4548d0b> to fetch windows admin password.
                 Retrieved Windows password for instance <i-a4548d0b>.
                 EC2 instance <i-a4548d0b> ready.
          D      [WinRM] remote shell 674D7D6E-E278-45DE-BD35-2C01AA61AE98 is open on http://10.194.9.239:5985/wsman
          D      [WinRM] negotiate::http://10.194.9.239:5985/wsman<{:user=>"administrator", :pass=>"4nkmF?o-MNk", :elevated_username=>"administrator", :elevated_password=>"4nkmF?o-MNk", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
          ')
                 [WinRM] Established

          D      [WinRM] reusing existing connection negotiate::http://10.194.9.239:5985/wsman<{:user=>"administrator", :pass=>"4nkmF?o-MNk", :elevated_username=>"administrator", :elevated_password=>"4nkmF?o-MNk", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
          D      [WinRM] negotiate::http://10.194.9.239:5985/wsman<{:user=>"administrator", :pass=>"4nkmF?o-MNk", :elevated_username=>"administrator", :elevated_password=>"4nkmF?o-MNk", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)


                     Directory: C:\chef\ohai\hints


                 Mode                LastWriteTime     Length Name
                 ----                -------------     ------ ----
                 -a---         6/30/2016   6:35 PM          0 ec2.json


          D      ec2:create '10.194.9.239'
                 Finished creating <fips-unit-functional-windows-2012r2> (2m30.69s).
          -----> Converging <fips-unit-functional-windows-2012r2>...
                 Preparing files for transfer
          D      Creating local sandbox in /tmp/cheftest/fips-unit-functional-windows-2012r2-sandbox-20160630-30892-1djhazf
                 Preparing dna.json
          D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                 Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                 Removing non-cookbook files before transfer
                 Preparing validation.pem
          D      Using a dummy validation.pem
                 Preparing client.rb
          D      Creating client.rb from {:node_name=>"fips-unit-functional-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
          D      [WinRM] reusing existing connection negotiate::http://10.194.9.239:5985/wsman<{:user=>"administrator", :pass=>"4nkmF?o-MNk", :elevated_username=>"administrator", :elevated_password=>"4nkmF?o-MNk", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
          D      [WinRM] negotiate::http://10.194.9.239:5985/wsman<{:user=>"administrator", :pass=>"4nkmF?o-MNk", :elevated_username=>"administrator", :elevated_password=>"4nkmF?o-MNk", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
          function Get-PlatformVersion {
            switch -regex ((get-wmiobject win32_operatingsystem).version) {
              '10\.0\.\d+' {$platform_version = '2012r2'}
              '6\.3\.\d+'  {$platform_version = '2012r2'}
              '6\.2\.\d+'  {$platform_version = '2012'}
              '6\.1\.\d+'  {$platform_version = '2008r2'}
              '6\.0\.\d+'  {$platform_version = '2008'}
            }
            return $platform_version
          }

          function Get-PlatformArchitecture {
            if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
              $architecture = 'x86_64'
            } else {
              $architecture = 'i386'
            }
            return $architecture
          }

          function New-Uri {
            param ($baseuri, $newuri)

            try {
            new-object System.Uri $baseuri, $newuri
            }
            catch [System.Management.Automation.MethodInvocationException]{
              Write-Error "$($_.exception.message)"
              throw $_.exception
            }
          }

          function Get-WebContent {
            param ($uri, $filepath)
            $proxy = New-Object -TypeName System.Net.WebProxy
            $wc = new-object System.Net.WebClient
            $proxy.Address = $env:http_proxy
            $wc.Proxy = $proxy

            try {
              if ([string]::IsNullOrEmpty($filepath)) {
                $wc.downloadstring($uri)
              }
              else {
                $wc.downloadfile($uri, $filepath)
              }
            }
            catch {
              $exception = $_.Exception
              Write-Host "There was an error: "
              do {
                Write-Host "`t$($exception.message)"
                $exception = $exception.innerexception
              } while ($exception)
              throw "Failed to download from $uri."
            }
          }

          function Test-ProjectPackage {
            [cmdletbinding()]
            param ($Path, $Algorithm = 'SHA256', $Hash)

            if (-not (get-command get-filehash))   {
              function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
              function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
              function Get-FileHash ($Path, $Algorithm) {
                $Path = (resolve-path $path).providerpath
                $hash = @{Algorithm = $Algorithm; Path = $Path}
                use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                  use ($in = (gi $path).OpenRead()) {
                    $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                  }
                }
                new-object PSObject -Property $hash
              }
            }
            Write-Verbose "Testing the $Algorithm hash for $path."
            $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
            Write-Verbose "`tDesired Hash - '$hash'"
            Write-Verbose "`tActual Hash  - '$ActualHash'"
            $Valid = $ActualHash -eq $Hash
            if (-not $Valid) {
              Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
            }
            return $Valid
          }

          function Get-ProjectMetadata {
            <#
              .SYNOPSIS
              Get metadata for a Chef Software, Inc. project
              .DESCRIPTION
              Get metadata for project
              .EXAMPLE
              iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

              Gets the download url and SHA256 checksum for the latest stable release of Chef.
              .EXAMPLE
              iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

              Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
            #>
            [cmdletbinding()]
            param (
              # Base url to retrieve metadata from.
              [uri]$base_server_uri = 'https://omnitruck.chef.io/',
              [string]
              # Project to install
              [string]
              $project = 'chef',
              # Version of the application to install
              # This parameter is optional, if not supplied it will provide the latest version,
              # and if an iteration number is not specified, it will grab the latest available iteration.
              # Partial version numbers are also acceptable (using v=11
              # will grab the latest 11.x client which matches the other flags).
              [string]
              $version,
              # Release channel to install from
              $channel = 'unstable',
              # The following legacy switches are just aliases for the current channel
              [switch]
              $prerelease,
              [switch]
              $nightlies,
              [validateset('auto', 'i386', 'x86_64')]
              [string]
              $architecture = 'auto'
            )

            # PowerShell is only on Windows ATM
            $platform = 'windows'
            Write-Verbose "Platform: $platform"

            $platform_version = Get-PlatformVersion
            Write-Verbose "Platform Version: $platform_version"

            if ($architecture -eq 'auto') {
              $architecture = Get-PlatformArchitecture
            }

            Write-Verbose "Architecture: $architecture"
            Write-Verbose "Project: $project"


              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 16b55cbf511b3989b006c98c940f8230858cf6eba81b6ec9793912d686b66885" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.9/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.10/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.11/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ios_xr/6/chef-12.12.10-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f8f5e1bc424c103f9423aa7b4ed1d2dfc7bd7e1132c0af9c34c78caaf7631a9b" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/nexus/7/chef-12.12.10-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 e03a7b07f699d96ce4f2093f8dd4be61fc8547860fa52d19ad0f0394fa488e66" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 76ea4ba096b432e6544be0dd8ab04c201aeaf6343965b0f5cd2cc1fd3bb957e1" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 746a2030bb5e078a525051508253dd70ae70d8999c89b2f95de3f368b98d64d9" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 eb0627c6f828cd08d95d4822874412ab6a4fe8fd6e8f29721ce0953def3fb0ed" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 41676f26ce135282cbc09cb3f9de6c04dfdec964547fdb995318fe659f3166f9" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 b291ce4b5c01fb87dd98033e06c27e313c740b3139ebc30d33dd25154d0edd73" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 fedff09be8b6b3bad5f33bb0f675cd240a3b653ce7ce7e9236f888b28b1cea92" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 83a6de2ac1484959c90b830d70cf6cef8528ec89a1f416d95d314b23b82efe21" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 a72febfdba2d28ff67f9540c554c6f94b60f9781f31c791355e0e0f55cdbc86a" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 96af6e90f6ff3876d357859544bea71c24c6dc4d92eb098a3ae3f36b45b3dac6" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 bf531b332f24a1f4d5cc5d43597443714aef3a801cd4b4edf45644132a26a276" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 d3a5206694949575e519354f8e121703de2e75940446a2d7f58013affe96c656" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/6.1/chef-12.12.10-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
              "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/7.1/chef-12.12.10-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
              "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" | out-file "$artifact_info_dir/artifact_info" -Append


            $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

            $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
              foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

            Write-Verbose "Project details: "
            foreach ($key in $package_metadata.keys) {
              Write-Verbose "`t$key = $($package_metadata[$key])"
            }
            $package_metadata
          }

          function Install-Project {
            <#
              .SYNOPSIS
              Install a Chef Software, Inc. product
              .DESCRIPTION
              Install a Chef Software, Inc. product
              .EXAMPLE
              iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

              Installs the latest stable version of Chef.
              .EXAMPLE
              iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

              Installs the latest integration build of the Chef Development Kit
            #>
            [cmdletbinding(SupportsShouldProcess=$true)]
            param (
              # Project to install
              [string]
              $project = 'chef',
              # Release channel to install from
              [validateset('current', 'stable', 'unstable')]
              [string]
              $channel = 'stable',
              # Version of the application to install
              # This parameter is optional, if not supplied it will provide the latest version,
              # and if an iteration number is not specified, it will grab the latest available iteration.
              # Partial version numbers are also acceptable (using v=11
              # will grab the latest 11.x client which matches the other flags).
              [string]
              $version,
              # Full path for the downloaded installer.
              [string]
              $filename,
              # Full path to the location to download the installer
              [string]
              $download_directory = $env:temp,
              # The following legacy switches are just aliases for the current channel
              [switch]
              $prerelease,
              [switch]
              $nightlies,
              [validateset('auto', 'i386', 'x86_64')]
              [string]
              $architecture = 'auto'
            )

            $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

            if (-not [string]::IsNullOrEmpty($filename)) {
              $download_directory = split-path $filename
              $filename = split-path $filename -leaf
              if ([string]::IsNullOrEmpty($download_directory)) {
                $download_directory = $pwd
              }
            }
            else {
              $filename = ($package_metadata.url -split '/')[-1]
            }
            Write-Verbose "Download directory: $download_directory"
            Write-Verbose "Filename: $filename"

            if (-not (test-path $download_directory)) {
              mkdir $download_directory
            }
            $download_directory = (resolve-path $download_directory).providerpath
            $download_destination = join-path $download_directory $filename

            if ((test-path $download_destination) -and
              (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
              Write-Verbose "Found existing valid installer at $download_destination."
            }
            else {
              if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                Get-WebContent $package_metadata.url -filepath $download_destination
              }
            }

            if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
              if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                Write-Host "Installing $project from $download_destination"
                $installingProject = $True
                $installAttempts = 0
                while ($installingProject) {
                  $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                  $p.WaitForExit()
                  if ($p.ExitCode -eq 1618) {
                    Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                    continue
                  } elseif ($p.ExitCode -ne 0) {
                    throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                  }
                  $installingProject = $False
                }
              }
              else {
                throw "Failed to validate the downloaded installer for $project."
              }
            }
          }
          set-alias install -value Install-Project
          export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

          }

          install -project chef -version 12.12.10 -channel unstable
          )
          D      creating hash for file $env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
          D      Running check_files.ps1
          D      @{
          D        "ee541b042a0f0ef2da5f8f2861cc4131" = @{
          D          "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
          D          "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
          D          "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
          D        }
          D      }
          D      [WinRM] opening new shell since the current one failed
          D      [WinRM] opening remote shell on http://10.194.9.239:5985/wsman
          D      [WinRM] remote shell AE1D79B9-C96C-4F04-BB8F-CE5ED3CCECCC is open on http://10.194.9.239:5985/wsman
          D      Cleaning up local sandbox in /tmp/cheftest/fips-unit-functional-windows-2012r2-sandbox-20160630-30892-1djhazf
                 [WinRM] connection failed. retrying in 3 seconds: #<HTTPClient::ConnectTimeoutError: execution expired>
          D      [WinRM] opening remote shell on http://10.194.11.105:5985/wsman
          D      [WinRM] remote shell 58BB15DF-FF49-4C53-92D2-B4052D0A0E49 is open on http://10.194.11.105:5985/wsman
          D      [WinRM] negotiate::http://10.194.11.105:5985/wsman<{:user=>"administrator", :pass=>"NqdwNQ3@;5", :elevated_username=>"administrator", :elevated_password=>"NqdwNQ3@;5", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
          ')
                 [WinRM] Established

          D      [WinRM] reusing existing connection negotiate::http://10.194.11.105:5985/wsman<{:user=>"administrator", :pass=>"NqdwNQ3@;5", :elevated_username=>"administrator", :elevated_password=>"NqdwNQ3@;5", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
          D      [WinRM] negotiate::http://10.194.11.105:5985/wsman<{:user=>"administrator", :pass=>"NqdwNQ3@;5", :elevated_username=>"administrator", :elevated_password=>"NqdwNQ3@;5", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)


                     Directory: C:\chef\ohai\hints


                 Mode                LastWriteTime     Length Name
                 ----                -------------     ------ ----
                 -a---         6/30/2016   6:36 PM          0 ec2.json


          D      ec2:create '10.194.11.105'
                 Finished creating <fips-integration-windows-2012r2> (3m25.26s).
          -----> Converging <fips-integration-windows-2012r2>...
                 Preparing files for transfer
          D      Creating local sandbox in /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160630-30892-37jg2q
                 Preparing dna.json
          D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                 Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                 Removing non-cookbook files before transfer
                 Preparing validation.pem
          D      Using a dummy validation.pem
                 Preparing client.rb
          D      Creating client.rb from {:node_name=>"fips-integration-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
          D      [WinRM] reusing existing connection negotiate::http://10.194.11.105:5985/wsman<{:user=>"administrator", :pass=>"NqdwNQ3@;5", :elevated_username=>"administrator", :elevated_password=>"NqdwNQ3@;5", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
          D      [WinRM] negotiate::http://10.194.11.105:5985/wsman<{:user=>"administrator", :pass=>"NqdwNQ3@;5", :elevated_username=>"administrator", :elevated_password=>"NqdwNQ3@;5", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
          function Get-PlatformVersion {
            switch -regex ((get-wmiobject win32_operatingsystem).version) {
              '10\.0\.\d+' {$platform_version = '2012r2'}
              '6\.3\.\d+'  {$platform_version = '2012r2'}
              '6\.2\.\d+'  {$platform_version = '2012'}
              '6\.1\.\d+'  {$platform_version = '2008r2'}
              '6\.0\.\d+'  {$platform_version = '2008'}
            }
            return $platform_version
          }

          function Get-PlatformArchitecture {
            if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
              $architecture = 'x86_64'
            } else {
              $architecture = 'i386'
            }
            return $architecture
          }

          function New-Uri {
            param ($baseuri, $newuri)

            try {
            new-object System.Uri $baseuri, $newuri
            }
            catch [System.Management.Automation.MethodInvocationException]{
              Write-Error "$($_.exception.message)"
              throw $_.exception
            }
          }

          function Get-WebContent {
            param ($uri, $filepath)
            $proxy = New-Object -TypeName System.Net.WebProxy
            $wc = new-object System.Net.WebClient
            $proxy.Address = $env:http_proxy
            $wc.Proxy = $proxy

            try {
              if ([string]::IsNullOrEmpty($filepath)) {
                $wc.downloadstring($uri)
              }
              else {
                $wc.downloadfile($uri, $filepath)
              }
            }
            catch {
              $exception = $_.Exception
              Write-Host "There was an error: "
              do {
                Write-Host "`t$($exception.message)"
                $exception = $exception.innerexception
              } while ($exception)
              throw "Failed to download from $uri."
            }
          }

          function Test-ProjectPackage {
            [cmdletbinding()]
            param ($Path, $Algorithm = 'SHA256', $Hash)

            if (-not (get-command get-filehash))   {
              function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
              function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
              function Get-FileHash ($Path, $Algorithm) {
                $Path = (resolve-path $path).providerpath
                $hash = @{Algorithm = $Algorithm; Path = $Path}
                use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                  use ($in = (gi $path).OpenRead()) {
                    $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                  }
                }
                new-object PSObject -Property $hash
              }
            }
            Write-Verbose "Testing the $Algorithm hash for $path."
            $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
            Write-Verbose "`tDesired Hash - '$hash'"
            Write-Verbose "`tActual Hash  - '$ActualHash'"
            $Valid = $ActualHash -eq $Hash
            if (-not $Valid) {
              Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
            }
            return $Valid
          }

          function Get-ProjectMetadata {
            <#
              .SYNOPSIS
              Get metadata for a Chef Software, Inc. project
              .DESCRIPTION
              Get metadata for project
              .EXAMPLE
              iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

              Gets the download url and SHA256 checksum for the latest stable release of Chef.
              .EXAMPLE
              iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

              Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
            #>
            [cmdletbinding()]
            param (
              # Base url to retrieve metadata from.
              [uri]$base_server_uri = 'https://omnitruck.chef.io/',
              [string]
              # Project to install
              [string]
              $project = 'chef',
              # Version of the application to install
              # This parameter is optional, if not supplied it will provide the latest version,
              # and if an iteration number is not specified, it will grab the latest available iteration.
              # Partial version numbers are also acceptable (using v=11
              # will grab the latest 11.x client which matches the other flags).
              [string]
              $version,
              # Release channel to install from
              $channel = 'unstable',
              # The following legacy switches are just aliases for the current channel
              [switch]
              $prerelease,
              [switch]
              $nightlies,
              [validateset('auto', 'i386', 'x86_64')]
              [string]
              $architecture = 'auto'
            )

            # PowerShell is only on Windows ATM
            $platform = 'windows'
            Write-Verbose "Platform: $platform"

            $platform_version = Get-PlatformVersion
            Write-Verbose "Platform Version: $platform_version"

            if ($architecture -eq 'auto') {
              $architecture = Get-PlatformArchitecture
            }

            Write-Verbose "Architecture: $architecture"
            Write-Verbose "Project: $project"


              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 16b55cbf511b3989b006c98c940f8230858cf6eba81b6ec9793912d686b66885" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.9/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.10/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.11/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ios_xr/6/chef-12.12.10-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f8f5e1bc424c103f9423aa7b4ed1d2dfc7bd7e1132c0af9c34c78caaf7631a9b" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/nexus/7/chef-12.12.10-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 e03a7b07f699d96ce4f2093f8dd4be61fc8547860fa52d19ad0f0394fa488e66" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 76ea4ba096b432e6544be0dd8ab04c201aeaf6343965b0f5cd2cc1fd3bb957e1" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 746a2030bb5e078a525051508253dd70ae70d8999c89b2f95de3f368b98d64d9" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 eb0627c6f828cd08d95d4822874412ab6a4fe8fd6e8f29721ce0953def3fb0ed" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 41676f26ce135282cbc09cb3f9de6c04dfdec964547fdb995318fe659f3166f9" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 b291ce4b5c01fb87dd98033e06c27e313c740b3139ebc30d33dd25154d0edd73" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 fedff09be8b6b3bad5f33bb0f675cd240a3b653ce7ce7e9236f888b28b1cea92" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 83a6de2ac1484959c90b830d70cf6cef8528ec89a1f416d95d314b23b82efe21" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 a72febfdba2d28ff67f9540c554c6f94b60f9781f31c791355e0e0f55cdbc86a" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 96af6e90f6ff3876d357859544bea71c24c6dc4d92eb098a3ae3f36b45b3dac6" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 bf531b332f24a1f4d5cc5d43597443714aef3a801cd4b4edf45644132a26a276" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 d3a5206694949575e519354f8e121703de2e75940446a2d7f58013affe96c656" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/6.1/chef-12.12.10-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
              "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/7.1/chef-12.12.10-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
              "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" | out-file "$artifact_info_dir/artifact_info" -Append


            $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

            $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
              foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

            Write-Verbose "Project details: "
            foreach ($key in $package_metadata.keys) {
              Write-Verbose "`t$key = $($package_metadata[$key])"
            }
            $package_metadata
          }

          function Install-Project {
            <#
              .SYNOPSIS
              Install a Chef Software, Inc. product
              .DESCRIPTION
              Install a Chef Software, Inc. product
              .EXAMPLE
              iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

              Installs the latest stable version of Chef.
              .EXAMPLE
              iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

              Installs the latest integration build of the Chef Development Kit
            #>
            [cmdletbinding(SupportsShouldProcess=$true)]
            param (
              # Project to install
              [string]
              $project = 'chef',
              # Release channel to install from
              [validateset('current', 'stable', 'unstable')]
              [string]
              $channel = 'stable',
              # Version of the application to install
              # This parameter is optional, if not supplied it will provide the latest version,
              # and if an iteration number is not specified, it will grab the latest available iteration.
              # Partial version numbers are also acceptable (using v=11
              # will grab the latest 11.x client which matches the other flags).
              [string]
              $version,
              # Full path for the downloaded installer.
              [string]
              $filename,
              # Full path to the location to download the installer
              [string]
              $download_directory = $env:temp,
              # The following legacy switches are just aliases for the current channel
              [switch]
              $prerelease,
              [switch]
              $nightlies,
              [validateset('auto', 'i386', 'x86_64')]
              [string]
              $architecture = 'auto'
            )

            $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

            if (-not [string]::IsNullOrEmpty($filename)) {
              $download_directory = split-path $filename
              $filename = split-path $filename -leaf
              if ([string]::IsNullOrEmpty($download_directory)) {
                $download_directory = $pwd
              }
            }
            else {
              $filename = ($package_metadata.url -split '/')[-1]
            }
            Write-Verbose "Download directory: $download_directory"
            Write-Verbose "Filename: $filename"

            if (-not (test-path $download_directory)) {
              mkdir $download_directory
            }
            $download_directory = (resolve-path $download_directory).providerpath
            $download_destination = join-path $download_directory $filename

            if ((test-path $download_destination) -and
              (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
              Write-Verbose "Found existing valid installer at $download_destination."
            }
            else {
              if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                Get-WebContent $package_metadata.url -filepath $download_destination
              }
            }

            if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
              if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                Write-Host "Installing $project from $download_destination"
                $installingProject = $True
                $installAttempts = 0
                while ($installingProject) {
                  $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                  $p.WaitForExit()
                  if ($p.ExitCode -eq 1618) {
                    Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                    continue
                  } elseif ($p.ExitCode -ne 0) {
                    throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                  }
                  $installingProject = $False
                }
              }
              else {
                throw "Failed to validate the downloaded installer for $project."
              }
            }
          }
          set-alias install -value Install-Project
          export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

          }

          install -project chef -version 12.12.10 -channel unstable
          )
          D      creating hash for file $env:TEMP/fips-integration-windows-2012r2-long_script.ps1
          D      Running check_files.ps1
          D      @{
          D        "ee541b042a0f0ef2da5f8f2861cc4131" = @{
          D          "target" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1";
          D          "src_basename" = "fips-integration-windows-2012r2-long_script.ps1";
          D          "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
          D        }
          D      }
          D      Parsing CSV Response
          D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
          "False","ee541b042a0f0ef2da5f8f2861cc4131",,"True","False","False"

          D      Uploading /tmp/cheftest/kitchen-long-script20160630-30892-1lkv35g/fips-integration-windows-2012r2-long_script.ps1 to encoded tmpfile $env:TEMP\b64-ee541b042a0f0ef2da5f8f2861cc4131.txt
          D      Finished uploading /tmp/cheftest/kitchen-long-script20160630-30892-1lkv35g/fips-integration-windows-2012r2-long_script.ps1 to encoded tmpfile $env:TEMP\b64-ee541b042a0f0ef2da5f8f2861cc4131.txt (38.844 KB over 5 chunks) in (0m0.63s)
          D      Running decode_files.ps1
          D      @{
          D        "$env:TEMP\b64-ee541b042a0f0ef2da5f8f2861cc4131.txt" = @{
          D          "dst" = "$env:TEMP/fips-integration-windows-2012r2-long_script.ps1"
          D        }
          D      }
          D      Parsing CSV Response
          D      "src_md5","tmpzip","verifies","tmpfile","dst_md5","dst"
          "ee541b042a0f0ef2da5f8f2861cc4131",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-ee541b042a0f0ef2da5f8f2861cc4131.txt","ee541b042a0f0ef2da5f8f2861cc4131","C:\Users\ADMINI~1\AppData\Local\Temp/fips-integration-windows-2012r2-long_script.ps1"

          D      Uploaded 1 items dirty_check: (0m0.97s) stream_files: (0m0.63s) decode: (0m1.00s)

                 ModuleType Version    Name                                ExportedCommands
                 ---------- -------    ----                                ----------------
                 Script     0.0        Omnitruck                           {Get-ProjectMetada...
                 Installing chef from C:\Users\ADMINI~1\AppData\Local\Temp\chef-client-12.12.10-1-x64.msi
          D      [WinRM] retrying receive request after timeout


          D      [WinRM] negotiate::http://10.194.11.105:5985/wsman<{:user=>"administrator", :pass=>"NqdwNQ3@;5", :elevated_username=>"administrator", :elevated_password=>"NqdwNQ3@;5", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($dirs = @("$env:TEMP\kitchen\clients", "$env:TEMP\kitchen\cookbooks", "$env:TEMP\kitchen\data", "$env:TEMP\kitchen\data_bags", "$env:TEMP\kitchen\encrypted_data_bag_secret", "$env:TEMP\kitchen\environments", "$env:TEMP\kitchen\roles")
          $root_path = "$env:TEMP\kitchen"

          Function Delete-AllDirs($dirs) {
            $dirs | ForEach-Object {
              if (Test-Path ($path = Unresolve-Path $_)) { Remove-Item $path -Recurse -Force }
            }
          }

          Function Unresolve-Path($p) {
            if ($p -eq $null) { return $null }
            else { return $ExecutionContext.SessionState.Path.GetUnresolvedProviderPathFromPSPath($p) }
          }

          Function Make-RootPath($p) {
            $p = Unresolve-Path $p
            if (-Not (Test-Path $p)) { New-Item $p -ItemType directory | Out-Null }
          }

          Delete-AllDirs $dirs
          Make-RootPath $root_path
          )
                 Transferring files to <fips-integration-windows-2012r2>
          D      creating hash for file $env:TEMP\kitchen
          D      creating hash for file $env:TEMP\kitchen
          D      creating hash for directory $env:TEMP\kitchen
          D      Populating files
          D      === All files added.
          D      creating hash for file $env:TEMP\kitchen
          D      creating hash for directory $env:TEMP\kitchen
          D      Populating files
          D      +++ Adding fips/metadata.rb
          D      === All files added.
          D      Running check_files.ps1
          D      @{
          D        "f36538b1f10bf80532dc432fbec25a65" = @{
          D          "target" = "$env:TEMP\kitchen";
          D          "src_basename" = "dna.json";
          D          "dst" = "$env:TEMP\kitchen"
          D        };
          D        "608ae6e6474ca88bdec913156a101881" = @{
          D          "target" = "$env:TEMP\kitchen";
          D          "src_basename" = "client.rb";
          D          "dst" = "$env:TEMP\kitchen"
          D        };
          D        "76cdb2bad9582d23c1f6f4d868218d6c" = @{
          D          "target" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip";
          D          "src_basename" = "cache";
          D          "dst" = "$env:TEMP\kitchen\cache"
          D        };
          D        "49abb94825cb80b9a9cd59e5f76daf4a" = @{
          D          "target" = "$env:TEMP\kitchen";
          D          "src_basename" = "validation.pem";
          D          "dst" = "$env:TEMP\kitchen"
          D        };
          D        "33968442c0ef69a92763825b33850e28" = @{
          D          "target" = "$env:TEMP\winrm-upload\tmpzip-33968442c0ef69a92763825b33850e28.zip";
          D          "src_basename" = "cookbooks";
          D          "dst" = "$env:TEMP\kitchen\cookbooks"
          D        }
          D      }
          D      Parsing CSV Response
          D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
          "False","33968442c0ef69a92763825b33850e28",,"True","False","False"
          "False","76cdb2bad9582d23c1f6f4d868218d6c",,"True","False","False"
          "False","f36538b1f10bf80532dc432fbec25a65",,"True","False","True"
          "False","608ae6e6474ca88bdec913156a101881",,"True","False","True"
          "False","49abb94825cb80b9a9cd59e5f76daf4a",,"True","False","True"

          D      Uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160630-30892-37jg2q/dna.json to encoded tmpfile $env:TEMP\b64-f36538b1f10bf80532dc432fbec25a65.txt
          D      Finished uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160630-30892-37jg2q/dna.json to encoded tmpfile $env:TEMP\b64-f36538b1f10bf80532dc432fbec25a65.txt (0.084 KB over 1 chunks) in (0m0.06s)
          D      Uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160630-30892-37jg2q/client.rb to encoded tmpfile $env:TEMP\b64-608ae6e6474ca88bdec913156a101881.txt
          D      Finished uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160630-30892-37jg2q/client.rb to encoded tmpfile $env:TEMP\b64-608ae6e6474ca88bdec913156a101881.txt (1.116 KB over 1 chunks) in (0m0.07s)
          D      Uploading /tmp/cheftest/tmpzip-20160630-30892-rtn6wp.zip to encoded tmpfile $env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt
          D      Finished uploading /tmp/cheftest/tmpzip-20160630-30892-rtn6wp.zip to encoded tmpfile $env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt (0.028 KB over 1 chunks) in (0m0.06s)
          D      Uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160630-30892-37jg2q/validation.pem to encoded tmpfile $env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt
          D      Finished uploading /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160630-30892-37jg2q/validation.pem to encoded tmpfile $env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt (2.236 KB over 1 chunks) in (0m0.11s)
          D      Uploading /tmp/cheftest/tmpzip-20160630-30892-1oevfqs.zip to encoded tmpfile $env:TEMP\b64-33968442c0ef69a92763825b33850e28.txt
          D      Finished uploading /tmp/cheftest/tmpzip-20160630-30892-1oevfqs.zip to encoded tmpfile $env:TEMP\b64-33968442c0ef69a92763825b33850e28.txt (0.192 KB over 1 chunks) in (0m0.08s)
          D      Running decode_files.ps1
          D      @{
          D        "$env:TEMP\b64-f36538b1f10bf80532dc432fbec25a65.txt" = @{
          D          "dst" = "$env:TEMP\kitchen/dna.json"
          D        };
          D        "$env:TEMP\b64-608ae6e6474ca88bdec913156a101881.txt" = @{
          D          "dst" = "$env:TEMP\kitchen/client.rb"
          D        };
          D        "$env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt" = @{
          D          "dst" = "$env:TEMP\kitchen\cache";
          D          "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip"
          D        };
          D        "$env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt" = @{
          D          "dst" = "$env:TEMP\kitchen/validation.pem"
          D        };
          D        "$env:TEMP\b64-33968442c0ef69a92763825b33850e28.txt" = @{
          D          "dst" = "$env:TEMP\kitchen\cookbooks";
          D          "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-33968442c0ef69a92763825b33850e28.zip"
          D        }
          D      }
          D      Parsing CSV Response
          D      "src_md5","tmpzip","verifies","tmpfile","dst_md5","dst"
          "608ae6e6474ca88bdec913156a101881",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-608ae6e6474ca88bdec913156a101881.txt","608ae6e6474ca88bdec913156a101881","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/client.rb"
          "76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip","True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt","76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache"
          "f36538b1f10bf80532dc432fbec25a65",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-f36538b1f10bf80532dc432fbec25a65.txt","f36538b1f10bf80532dc432fbec25a65","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/dna.json"
          "33968442c0ef69a92763825b33850e28","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-33968442c0ef69a92763825b33850e28.zip","True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-33968442c0ef69a92763825b33850e28.txt","33968442c0ef69a92763825b33850e28","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cookbooks"
          "49abb94825cb80b9a9cd59e5f76daf4a",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt","49abb94825cb80b9a9cd59e5f76daf4a","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/validation.pem"

          D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160630-30892-rtn6wp.zip
          D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160630-30892-1oevfqs.zip
          D      Uploaded 5 items dirty_check: (0m0.90s) stream_files: (0m0.39s) decode: (0m1.16s)
          D      Transfer complete
          D      [WinRM] negotiate::http://10.194.11.105:5985/wsman<{:user=>"administrator", :pass=>"NqdwNQ3@;5", :elevated_username=>"administrator", :elevated_password=>"NqdwNQ3@;5", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($env:PATH = [System.Environment]::GetEnvironmentVariable("PATH","Machine")

          & $env:systemdrive\opscode\chef\bin\chef-client.bat --local-mode --config $env:TEMP\kitchen\client.rb --log_level auto --force-formatter --no-color --json-attributes $env:TEMP\kitchen\dna.json --chef-zero-port 8889)
                 Starting Chef Client, version 12.12.10
                 Creating a new client identity for fips-integration-windows-2012r2 using the validator key.
                 resolving cookbooks for run list: []
                 Synchronizing Cookbooks:
                 Installing Cookbook Gems:
                 Compiling Cookbooks...
                 [2016-06-30T18:38:30+00:00] WARN: Node fips-integration-windows-2012r2 has an empty run list.
                 Converging 0 resources
                 Starting audit phase

                 Finished in 0 seconds (files took 0.64067 seconds to load)
                 0 examples, 0 failures
                 Auditing complete

                 Running handlers:
                 Running handlers complete
                 Chef Client finished, 0/0 resources updated in 32 seconds
                 [2016-06-30T18:38:30+00:00] ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json
          D      Cleaning up local sandbox in /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160630-30892-37jg2q
                 Finished converging <fips-integration-windows-2012r2> (2m3.18s).
          D      ------Exception-------
          D      Class: Kitchen::ActionFailed
          D      Message: 1 actions failed.
          D      ----------------------
          D      ------Backtrace-------
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:179:in `run_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command/action.rb:39:in `block in call'
          D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command/action.rb:37:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/cli.rb:56:in `perform'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/cli.rb:184:in `block (2 levels) in <class:CLI>'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/cli.rb:325:in `invoke_task'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/bin/kitchen:13:in `block in <top (required)>'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/errors.rb:174:in `with_friendly_errors'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/bin/kitchen:13:in `<top (required)>'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:23:in `load'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:23:in `<main>'
          D      ----End Backtrace-----
          D      -Composite Exception--
          D      Class: Kitchen::ActionFailed
          D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
          There was an error invoking '@{
            "ee541b042a0f0ef2da5f8f2861cc4131" = @{
              "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
              "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
              "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
            }
          }@{
            "ee541b042a0f0ef2da5f8f2861cc4131" = @{
              "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
              "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
              "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
            }
          }
          ':
          Invoke-Expression : At line:7 char:2
          + }@{
          +  ~~
          Unexpected token '@{' in expression or statement.
          At line:51 char:12
          +     return Invoke-Expression "$expr"
          +            ~~~~~~~~~~~~~~~~~~~~~~~~~
              + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
             tion
              + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
             vokeExpressionCommand

          At line:54 char:5
          +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
          +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
              + CategoryInfo          : OperationStopped: (There was an er...ionCommand


          :String) [], RuntimeException
              + FullyQualifiedErrorId : There was an error invoking '@{
            "ee541b042a0f0ef2da5f8f2861cc4131" = @{
                  "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
             ps1";
                  "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
             ;
                  "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
             "
            }
          }@{
            "ee541b042a0f0ef2da5f8f2861cc4131" = @{
                  "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
             ps1";
                  "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
             ;
                  "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
             "
            }
          }
          ':
          Invoke-Expression : At line:7 char:2
          + }@{
          +  ~~
          Unexpected token '@{' in expression or statement.
          At line:51 char:12
          +     return Invoke-Expression "$expr"
          +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                  + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
             xcep
             tion
                  + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
             s.In
             vokeExpressionCommand


          ] on fips-unit-functional-windows-2012r2
          D      ----------------------
          D      ------Backtrace-------
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:394:in `parse_response'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:203:in `check_files'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:80:in `block in upload'
          D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:78:in `upload'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/transport/winrm.rb:130:in `upload'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/transport/winrm.rb:390:in `run_from_file_command'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/transport/winrm.rb:100:in `execute'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/provisioner/base.rb:67:in `block in call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/transport/winrm.rb:522:in `reuse_connection'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/transport/winrm.rb:72:in `connection'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/provisioner/base.rb:66:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:373:in `block in converge_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:513:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:513:in `synchronize_or_call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:478:in `block in action'
          D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:477:in `action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:369:in `converge_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:348:in `block in transition_to'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:347:in `each'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:347:in `transition_to'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:138:in `converge'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:194:in `public_send'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:194:in `run_action_in_thread'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
          D      ----End Backtrace-----
          D      ---Nested Exception---
          D      Class: Kitchen::ActionFailed
          D      Message: Failed to complete #converge action: [[WinRM::FS::Core::FileTransporter] Upload failed (exitcode: 1)
          There was an error invoking '@{
            "ee541b042a0f0ef2da5f8f2861cc4131" = @{
              "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
              "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
              "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
            }
          }@{
            "ee541b042a0f0ef2da5f8f2861cc4131" = @{
              "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1";
              "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1";
              "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1"
            }
          }
          ':
          Invoke-Expression : At line:7 char:2
          + }@{
          +  ~~
          Unexpected token '@{' in expression or statement.
          At line:51 char:12
          +     return Invoke-Expression "$expr"
          +            ~~~~~~~~~~~~~~~~~~~~~~~~~
              + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseExcep
             tion
              + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Commands.In
             vokeExpressionCommand

          At line:54 char:5
          +     throw "There was an error invoking '$expr': `n$($_ | Out-String)"
          +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
              + CategoryInfo          : OperationStopped: (There was an er...ionCommand


          :String) [], RuntimeException
              + FullyQualifiedErrorId : There was an error invoking '@{
            "ee541b042a0f0ef2da5f8f2861cc4131" = @{
                  "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
             ps1";
                  "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
             ;
                  "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
             "
            }
          }@{
            "ee541b042a0f0ef2da5f8f2861cc4131" = @{
                  "target" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.
             ps1";
                  "src_basename" = "fips-unit-functional-windows-2012r2-long_script.ps1"
             ;
                  "dst" = "$env:TEMP/fips-unit-functional-windows-2012r2-long_script.ps1
             "
            }
          }
          ':
          Invoke-Expression : At line:7 char:2
          + }@{
          +  ~~
          Unexpected token '@{' in expression or statement.
          At line:51 char:12
          +     return Invoke-Expression "$expr"
          +            ~~~~~~~~~~~~~~~~~~~~~~~~~
                  + CategoryInfo          : ParserError: (:) [Invoke-Expression], ParseE
             xcep
             tion
                  + FullyQualifiedErrorId : UnexpectedToken,Microsoft.PowerShell.Command
             s.In
             vokeExpressionCommand


          ]
          D      ----------------------
          D      ------Backtrace-------
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:394:in `parse_response'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:203:in `check_files'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:80:in `block in upload'
          D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/winrm-fs-0.4.2/lib/winrm-fs/core/file_transporter.rb:78:in `upload'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/transport/winrm.rb:130:in `upload'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/transport/winrm.rb:390:in `run_from_file_command'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/transport/winrm.rb:100:in `execute'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/provisioner/base.rb:67:in `block in call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/transport/winrm.rb:522:in `reuse_connection'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/transport/winrm.rb:72:in `connection'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/provisioner/base.rb:66:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:373:in `block in converge_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:513:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:513:in `synchronize_or_call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:478:in `block in action'
          D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:477:in `action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:369:in `converge_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:348:in `block in transition_to'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:347:in `each'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:347:in `transition_to'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:138:in `converge'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:194:in `public_send'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:194:in `run_action_in_thread'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
          D      ----End Backtrace-----
          D      [WinRM] closing remote shell 58BB15DF-FF49-4C53-92D2-B4052D0A0E49 on http://10.194.11.105:5985/wsman
          D      [WinRM] remote shell 58BB15DF-FF49-4C53-92D2-B4052D0A0E49 closed
          D      [WinRM] closing remote shell 674D7D6E-E278-45DE-BD35-2C01AA61AE98 on http://10.194.9.239:5985/wsman
          D      [WinRM] closing remote shell AE1D79B9-C96C-4F04-BB8F-CE5ED3CCECCC on http://10.194.9.239:5985/wsman
          D      [WinRM] remote shell AE1D79B9-C96C-4F04-BB8F-CE5ED3CCECCC closed
          STDERR: >>>>>> ------Exception-------
          >>>>>> Class: Kitchen::ActionFailed
          >>>>>> Message: 1 actions failed.
          >>>>>> ----------------------
          >>>>>> Please see .kitchen/logs/kitchen.log for more details
          >>>>>> Also try running `kitchen diagnose --all` for configuration
          ---- End output of bundle exec kitchen converge  -c -l debug ----
          Ran bundle exec kitchen converge  -c -l debug returned 20

          Resource Declaration:
          ---------------------
          # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/acceptance-cookbook/recipes/provision.rb

            1: kitchen "converge"

          Compiled Resource:
          ------------------
          # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/acceptance-cookbook/recipes/provision.rb:1:in `from_file'

          kitchen("converge") do
            action [:run]
            retries 0
            retry_delay 2
            default_guard_interpreter :default
            declared_type :kitchen
            cookbook_name "acceptance-cookbook"
            recipe_name "provision"
            command "converge"
            kitchen_options "-c -l debug"
            kitchen_dir "/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/fips"
            chef_product "chef"
          end

      Starting audit phase
    33943: |2

      Running handlers:
      [2016-06-30T18:38:34+00:00] ERROR: Running exception handlers
      Running handlers complete
      [2016-06-30T18:38:34+00:00] ERROR: Exception handlers complete
      Chef Client failed. 0 resources updated in 05 minutes 36 seconds
      [2016-06-30T18:38:34+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/chef-stacktrace.out
      [2016-06-30T18:38:34+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
      [2016-06-30T18:38:34+00:00] ERROR: Found 1 errors, they are stored in the backtrace
      [2016-06-30T18:38:35+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
      STDERR:
      ---- End output of chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/dna.json -o acceptance-cookbook::provision --no-color ----
      Ran chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/dna.json -o acceptance-cookbook::provision --no-color returned 1
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:289:in `invalid!'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:276:in `error!'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/chef_runner.rb:53:in `block in run!'
      /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:219:in `block in with_clean_env'
      /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:199:in `with_original_env'
      /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:205:in `with_clean_env'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/chef_runner.rb:42:in `run!'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:149:in `run_command'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:116:in `block in run_suite'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:114:in `each'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:114:in `run_suite'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:76:in `block (2 levels) in start_worker'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:74:in `loop'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:74:in `block in start_worker'
      CHEF-ACCEPTANCE::[2016-06-30 18:38:35 +0000] --force-destroy specified so attempting to run the destroy recipe
      FIPS::DESTROY::[2016-06-30 18:38:35 +0000] Initialized [/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/logs/fips/destroy.log] logger...
    40028: |
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:46 +0000]
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:46 +0000]                          Running handlers:
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:46 +0000]                          [2016-06-30T19:15:45+00:00] ERROR: Running exception handlers
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:46 +0000]                          Running handlers complete
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:46 +0000]                          [2016-06-30T19:15:45+00:00] ERROR: Exception handlers complete
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:46 +0000]                          Chef Client failed. 21 resources updated in 03 minutes 38 seconds
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:46 +0000]                          [2016-06-30T19:15:45+00:00] ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json
                               [2016-06-30T19:15:45+00:00] FATAL: Stacktrace dumped to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/chef-stacktrace.out
                               [2016-06-30T19:15:45+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
                               [2016-06-30T19:15:45+00:00] FATAL: Chef::Exceptions::RunFailedWrappingError: Found 1 errors, they are stored in the backtrace
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:46 +0000]                   $$$$$$ C:/opscode/chef/embedded/lib/ruby/2.1.0/x64-mingw32/dl.so: warning: already initialized constant DL::RUBY_FREE
                        $$$$$$ C:/opscode/chef/embedded/lib/ruby/gems/2.1.0/gems/net-ssh-3.2.0/lib/net/ssh/authentication/pageant.rb:16: warning: previous definition of RUBY_FREE was here
    40113: |
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:46 +0000]                   D      [WinRM] remote shell C5287A6B-6D6B-4A3A-BEE6-E834FABD96D7 closed
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:47 +0000]
              ================================================================================
              Error executing action `run` on resource 'execute[bundle exec kitchen converge  -c -l debug]'
              ================================================================================

              Mixlib::ShellOut::ShellCommandFailed
              ------------------------------------
              Expected process to exit with [0], but received '10'
              ---- Begin output of bundle exec kitchen converge  -c -l debug ----
              STDOUT: -----> Starting Kitchen (v1.9.2)
              D      Berksfile found at /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/winbox/Berksfile, loading Berkshelf
              D      Berkshelf 4.3.5 library loaded
              D      winrm requested, loading winrm gem (["~> 1.6"])
              D      winrm is loaded.
              D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
              D      winrm-fs is loaded.
              -----> Creating <default-windows-2012r2>...
              D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
              D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
              D      Search returned 3 images:
              D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
              D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
              D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
              D      Image for default-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                     Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
              D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
                     If you are not using an account that qualifies under the AWS
              free-tier, you may be charged to run these suites. The charge
              should be minimal, but neither Test Kitchen nor its maintainers
              are responsible for your incurred costs.

              D      Creating EC2 instance in region us-west-2 with properties:
              D      - instance_type = "m3.large"
              D      - ebs_optimized = false
              D      - image_id = "ami-8d0acfed"
              D      - key_name = "jenkins"
              D      - subnet_id = "subnet-19ac017c"
              D      - private_ip_address = nil
              D      - placement = {:availability_zone=>"us-west-2a"}
              D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
              D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:47 +0000] jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                     Instance <i-6c449dc3> requested.
    41400: |2
                       * powershell_script[conemu] action run

                         ================================================================================
                         Error executing action `run` on resource 'powershell_script[conemu]'
                         ================================================================================

                         Mixlib::ShellOut::ShellCommandFailed
                         ------------------------------------
                         Expected process to exit with [0], but received '1'
                         ---- Begin output of "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-1u6bnwv.ps1" ----
                         STDOUT: Installing the following packages:
                         conemu
                         By installing you accept licenses for the packages.
                         conemu not installed. An error occurred during installation:
                          The remote server returned an error: (500) Internal Server Error.
                         The install of conemu was NOT successful.
                         conemu not installed. An error occurred during installation:
                          The remote server returned an error: (500) Internal Server Error.

                         Chocolatey installed 0/1 packages. 1 packages failed.
                          See the log for details (C:\ProgramData\chocolatey\logs\chocolatey.log).

                         Failures
                          - conemu - conemu not installed. An error occurred during installation:
                          The remote server returned an error: (500) Internal Server Error.
                         Installing the following packages:
                         conemu
                         By installing you accept licenses for the packages.
                         conemu not installed. An error occurred during installation:
                          The remote server retur
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:47 +0000] ned an error: (500) Internal Server Error.
                         The install of conemu was NOT successful.
    41491: |2

                     Running handlers:
                     [2016-06-30T19:15:45+00:00] ERROR: Running exception handlers
                     Running handlers complete
                     [2016-06-30T19:15:45+00:00] ERROR: Exception handlers complete
                     Chef Client failed. 21 resources updated in 03 minutes 38 seconds
                     [2016-06-30T19:15:45+00:00] ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json
                     [2016-06-30T19:15:45+00:00] FATAL: Stacktrace dumped to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/chef-stacktrace.out
                     [2016-06-30T19:15:45+00:
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:47 +0000] 00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
                     [2016-06-30T19:15:45+00:00] FATAL: Chef::Exceptions::RunFailedWrappingError: Found 1 errors, they are stored in the backtrace
              $$$$$$ C:/opscode/chef/embedded/lib/ruby/2.1.0/x64-mingw32/dl.so: warning: already initialized constant DL::RUBY_FREE
              $$$$$$ C:/opscode/chef/embedded/lib/ruby/gems/2.1.0/gems/net-ssh-3.2.0/lib/net/ssh/authentication/pageant.rb:16: warning: previous definition of RUBY_FREE was here
    41610: |2


            ================================================================================
            Error executing action `run` on resource 'cookbook_kitchen[converge winbox]'
            ================================================================================

            Mixlib::ShellOut::ShellCommandFailed
            ------------------------------------
            execute[bundle exec kitchen converge  -c -l debug] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 36) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '10'
            ---- Begin output of bundle exec kitchen converge  -c -l debug ----
            STDOUT: -----> Starting Kitchen (v1.9.2)
            D      Berksfile found at /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/winbox/Berksfile, loading Berkshelf
            D      Berkshelf 4.3.5 library loaded
            D      winrm requested, loading winrm gem (["~> 1.6"])
            D      winrm is loaded.
            D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
            D      winrm-fs is loaded.
            -----> Creating <default-windows-2012r2>...
            D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
            D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
            D      Search returned 3 images:
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
            D      Image for default-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                   Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
            D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
                   If you are not using an account that qualifies under the AWS
            free-tier, you may be charged to run these suites. The charge
            shoul
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:47 +0000] d be minimal, but neither Test Kitchen nor its maintainers
            are responsible for your incurred costs.
    42897: |2
                     * powershell_script[conemu] action run

                       ================================================================================
                       Error executing action `run` on resource 'powershell_script[conemu]'
                       ================================================================================

                       Mixlib::ShellOut::ShellCommandFailed
                       ------------------------------------
                       Expected process to exit with [0], but received '1'
                       ---- Begin output of "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-1u6bnwv.ps1" ----
                       STDOUT: Installing the following packages:
                       conemu
                       By installing you accept licenses for the packages.
                       conemu not installed. An error occurred during installation:
                        The remote server returned an error: (500) Internal Server Error.
                       The install of conemu was NOT successful.
                       conemu not installed. An error occurred during installation:
                        The remote server returned an error: (500) Internal Server Error.

                       Chocolatey installed 0/1 packages. 1 packages failed.
                        See the log for details (C:\ProgramData\chocolatey\logs\chocolatey.log).

                       Failures
                        - conemu - conemu not installed. An error occurred during installation:
                        The remote server returned an error: (500) Internal Server Error.
                       Installing the following packages:
                       conemu
                       By installing you accept licenses for the packages.
                       conemu not installed. An error occurred during installation:
                        The remote server returned an error: (500) Internal Server Error.
                       The install of conemu was NOT successful.
                       conemu not installed. An error occurred during installation:
                        The remote server returned an error: (500) Internal Server Error.

                       Chocolatey installed 0/1 packages. 1 packages failed.
                        See the log for details (C:\ProgramData\chocolatey\logs\chocolatey.log).
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:47 +0000]
    42988: |2

                   Running handlers:
                   [2016-06-30T19:15:45+00:00] ERROR: Running exception handlers
                   Running handlers complete
                   [2016-06-30T19:15:45+00:00] ERROR: Exception handlers complete
                   Chef Client failed. 21 resources updated in 03 minutes 38 seconds
                   [2016-06-30T19:15:45+00:00] ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json
                   [2016-06-30T19:15:45+00:00] FATAL: Stacktrace dumped to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/chef-stacktrace.out
                   [2016-06-30T19:15:45+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
                   [2016-06-30T19:15:45+00:00] FATAL: Chef::Exceptions::RunFailedWrappingError: Found 1 errors, they are stored in the backtrace
            $$$$$$ C:/opscode/chef/embedded/lib/ruby/2.1.0/x64-mingw32/dl.so: warning: already initialized constant DL::RUBY_FREE
            $$$$$$ C:/opscode/chef/embedded/lib/ruby/gems/2.1.0/gems/net-ssh-3.2.0/lib/net/ssh/authentication/pageant.rb:16: warning: previous definition of RUBY_FREE was here
    43102: |2


          ================================================================================
          Error executing action `run` on resource 'top_cookbooks[converge]'
          ================================================================================

          Mixlib::ShellOut::ShellCommandFailed
          ------------------------------------
          cookbook_kitchen[converge winbox] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/libr
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:47 +0000] aries/top_cookbooks.rb line 32) had an error: Mixlib::ShellOut::ShellCommandFailed: execute[bundle exec kitchen converge  -c -l debug] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 36) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '10'
          ---- Begin output of bundle exec kitchen converge  -c -l debug ----
    44389: |2
                   * powershell_script[conemu] action run

                     ================================================================================
                     Error executing action `run` on resource 'powershell_script[conemu]'
                     ================================================================================

                     Mixlib::ShellOut::ShellCommandFailed
                     ------------------------------------
                     Expected process to exit with [0], but received '1'
                     ---- Begin output of "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-1u6bnwv.ps1" ----
                     STDOUT: Installing the following packages:
                     conemu
                     By installing you accept licenses for the packages.
                     conemu not installed. An error occurred during installation:
                      The remote server returned an error: (500) Internal Server Error.
                     The install of conemu was NOT successful.
                     conemu not installed. An error occurred during installation:
                      The remote server returned an error: (500) Internal Server Error.

                     Chocolatey installed 0/1 packages. 1 packages failed.
                      See the log for details (C:\ProgramData\chocolatey\logs\chocolatey.log).

                     Failures
                      - conemu - conemu not installed. An error occurred during installation:
                      The remote server returned an error: (500) Internal Server Error.
                     Installing the following packages:
                     conemu
                     By installing you accept licenses for the packages.
                     conemu not installed. An error occurred during installation:
                      The remote server returned an error: (500) Internal Server Error.
                     The install of conemu was NOT successful.
                     conemu not installed. An error occurred during installation:
                      The remote server returned an error: (500) Internal Server Error.

                     Chocolatey in
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:47 +0000] stalled 0/1 packages. 1 packages failed.
                      See the log for details (C:\ProgramData\chocolatey\logs\chocolatey.log).
    44480: |2

                 Running handlers:
                 [2016-06-30T19:15:45+00:00] ERROR: Running exception handlers
                 Running handlers complete
                 [2016-06-30T19:15:45+00:00] ERROR: Exception handlers complete
                 Chef Client failed. 21 resources updated in 03 minutes 38 seconds
                 [2016-06-30T19:15:45+00:00] ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json
                 [2016-06-30T19:15:45+00:00] FATAL: Stacktrace dumped to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/chef-stacktrace.out
                 [2016-06-30T19:15:45+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
                 [2016-06-30T19:15:45+00:00] FATAL: Chef::Exceptions::RunFailedWrappingError: Found 1 errors, they are stored in the backtrace
          $$$$$$ C:/opscode/chef/embedded/lib/ruby/2.1.0/x64-mingw32/dl.so: warning: already initialized constant DL::RUBY_FREE
          $$$$$$ C:/opscode/chef/embedded/lib/ruby/gems/2.1.0/gems/net-ssh-3.2.0/lib/net/ssh/authentication/pageant.rb:16: warning: previous definition of RUBY_FREE was here
    44592: |
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:48 +0000] Running handlers:
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:48 +0000]
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:48 +0000] [2016-06-30T19:15:48+00:00] ERROR: Running exception handlers
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:48 +0000] Running handlers complete
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:48 +0000] [2016-06-30T19:15:48+00:00] ERROR: Exception handlers complete
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:48 +0000] Chef Client failed. 23 resources updated in 47 minutes 42 seconds
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:48 +0000]
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:48 +0000] [2016-06-30T19:15:48+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/chef-stacktrace.out
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:48 +0000] [2016-06-30T19:15:48+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:48 +0000] [2016-06-30T19:15:48+00:00] ERROR: Found 1 errors, they are stored in the backtrace
      TOP-COOKBOOKS::PROVISION::[2016-06-30 19:15:48 +0000] [2016-06-30T19:15:48+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
      CHEF-ACCEPTANCE::[2016-06-30 19:15:49 +0000] Encountered an error running the recipe provision: Expected process to exit with [0], but received '1'
      ---- Begin output of chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/dna.json -o acceptance-cookbook::provision --no-color ----
    55974: |2
                                 * powershell_script[conemu] action run

                                   ================================================================================
                                   Error executing action `run` on resource 'powershell_script[conemu]'
                                   ================================================================================

                                   Mixlib::ShellOut::ShellCommandFailed
                                   ------------------------------------
                                   Expected process to exit with [0], but received '1'
                                   ---- Begin output of "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-1u6bnwv.ps1" ----
                                   STDOUT: Installing the following packages:
                                   conemu
                                   By installing you accept licenses for the packages.
                                   conemu not installed. An error occurred during installation:
                                    The remote server returned an error: (500) Internal Server Error.
                                   The install of conemu was NOT successful.
                                   conemu not installed. An error occurred during installation:
                                    The remote server returned an error: (500) Internal Server Error.

                                   Chocolatey installed 0/1 packages. 1 packages failed.
                                    See the log for details (C:\ProgramData\chocolatey\logs\chocolatey.log).

                                   Failures
                                    - conemu - conemu not installed. An error occurred during installation:
                                    The remote server returned an error: (500) Internal Server Error.
                                   Installing the following packages:
                                   conemu
                                   By installing you accept licenses for the packages.
                                   conemu not installed. An error occurred during installation:
                                    The remote server returned an error: (500) Internal Server Error.
                                   The install of conemu was NOT successful.
                                   conemu not installed. An error occurred during installation:
                                    The remote server returned an error: (500) Internal Server Error.

                                   Chocolatey installed 0/1 packages. 1 packages failed.
                                    See the log for details (C:\ProgramData\chocolatey\logs\chocolatey.log).

                                   Failures
                                    - conemu - conemu not installed. An error occurred during installation:
                                    The remote server returned an error: (500) Internal Server Error.
                                   STDERR:
                                   ---- End output of "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-1u6bnwv.ps1" ----
                                   Ran "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-1u6bnwv.ps1" returned 1

                                   Resource Declaration:
                                   ---------------------
                                   # In C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/cookbooks/winbox/recipes/console.rb

                                    27: powershell_script 'conemu' do
                                    28:   code <<-EOH
                                    29: chocolatey install conemu -y
                                    30: if ($LASTEXITCODE -ne 0)
                                    31: {
                                    32:   $LASTEXITCODE = 0
                                    33:   chocolatey install conemu -y
                                    34: }
                                    35: EOH
                                    36:   only_if '(get-wmiobject Win32_MSIResource | Where-Object -Property value -like -Value conemu) -eq $null'
                                    37: end
                                    38:

                                   Compiled Resource:
                                   ------------------
                                   # Declared in C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/cookbooks/winbox/recipes/console.rb:27:in `from_file'

                                   powershell_script("conemu") do
                                     action [:run]
                                     retries 0
                                     retry_delay 2
                                     default_guard_interpreter :powershell_script
                                     command "conemu"
                                     backup 5
                                     returns 0
                                     code "chocolatey install conemu -y\nif ($LASTEXITCODE -ne 0)\n{\n  $LASTEXITCODE = 0\n  chocolatey install conemu -y\n}\n"
                                     interpreter "powershell.exe"
                                     declared_type :powershell_script
                                     cookbook_name "winbox"
                                     recipe_name "console"
                                     only_if "(get-wmiobject Win32_MSIResource | Where-Object -Property value -like -Value conemu) -eq $null"
                                   end

                                   Platform:
                                   ---------
                                   x64-mingw32

                               Starting audit phase
    56064: |2

                               Running handlers:
                               [2016-06-30T19:15:45+00:00] ERROR: Running exception handlers
                               Running handlers complete
                               [2016-06-30T19:15:45+00:00] ERROR: Exception handlers complete
                               Chef Client failed. 21 resources updated in 03 minutes 38 seconds
                               [2016-06-30T19:15:45+00:00] ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json
                               [2016-06-30T19:15:45+00:00] FATAL: Stacktrace dumped to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/chef-stacktrace.out
                               [2016-06-30T19:15:45+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
                               [2016-06-30T19:15:45+00:00] FATAL: Chef::Exceptions::RunFailedWrappingError: Found 1 errors, they are stored in the backtrace
                        $$$$$$ C:/opscode/chef/embedded/lib/ruby/2.1.0/x64-mingw32/dl.so: warning: already initialized constant DL::RUBY_FREE
                        $$$$$$ C:/opscode/chef/embedded/lib/ruby/gems/2.1.0/gems/net-ssh-3.2.0/lib/net/ssh/authentication/pageant.rb:16: warning: previous definition of RUBY_FREE was here
    56139: |2
                        D      [WinRM] remote shell C5287A6B-6D6B-4A3A-BEE6-E834FABD96D7 closed

              ================================================================================
              Error executing action `run` on resource 'execute[bundle exec kitchen converge  -c -l debug]'
              ================================================================================

              Mixlib::ShellOut::ShellCommandFailed
              ------------------------------------
              Expected process to exit with [0], but received '10'
              ---- Begin output of bundle exec kitchen converge  -c -l debug ----
              STDOUT: -----> Starting Kitchen (v1.9.2)
              D      Berksfile found at /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/winbox/Berksfile, loading Berkshelf
              D      Berkshelf 4.3.5 library loaded
              D      winrm requested, loading winrm gem (["~> 1.6"])
              D      winrm is loaded.
              D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
              D      winrm-fs is loaded.
              -----> Creating <default-windows-2012r2>...
              D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
              D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
              D      Search returned 3 images:
              D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
              D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
              D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
              D      Image for default-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                     Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
              D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
                     If you are not using an account that qualifies under the AWS
              free-tier, you may be charged to run these suites. The charge
              should be minimal, but neither Test Kitchen nor its maintainers
              are responsible for your incurred costs.

              D      Creating EC2 instance in region us-west-2 with properties:
              D      - instance_type = "m3.large"
              D      - ebs_optimized = false
              D      - image_id = "ami-8d0acfed"
              D      - key_name = "jenkins"
              D      - subnet_id = "subnet-19ac017c"
              D      - private_ip_address = nil
              D      - placement = {:availability_zone=>"us-west-2a"}
              D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
              D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                     Instance <i-6c449dc3> requested.
                     Polling AWS for existence, attempt 0...
                     Attempting to tag the instance, 0 retries
                     EC2 instance <i-6c449dc3> created.
                     Waited 0/300s for instance <i-6c449dc3> to become ready.
                     Waited 5/300s for instance <i-6c449dc3> to become ready.
                     Waited 10/300s for instance <i-6c449dc3> to become ready.
                     Waited 15/300s for instance <i-6c449dc3> to become ready.
                     Waited 20/300s for instance <i-6c449dc3> to become ready.
                     Waited 25/300s for instance <i-6c449dc3> to become ready.
                     Waited 30/300s for instance <i-6c449dc3> to become ready.
                     Waited 35/300s for instance <i-6c449dc3> to become ready.
                     Waited 40/300s for instance <i-6c449dc3> to become ready.
                     Waited 45/300s for instance <i-6c449dc3> to become ready.
                     Waited 50/300s for instance <i-6c449dc3> to become ready.
                     Waited 55/300s for instance <i-6c449dc3> to become ready.
                     Waited 60/300s for instance <i-6c449dc3> to become ready.
                     Waited 65/300s for instance <i-6c449dc3> to become ready.
                     Waited 70/300s for instance <i-6c449dc3> to become ready.
                     Waited 75/300s for instance <i-6c449dc3> to become ready.
                     Waited 80/300s for instance <i-6c449dc3> to become ready.
                     Waited 85/300s for instance <i-6c449dc3> to become ready.
              D      Console output: ---
              2016/06/30 19:09:32Z: EC2ConfigMonitorState: 0
              2016/06/30 19:09:32Z: Windows sysprep configuration complete.
              2016/06/30 19:09:34Z: AMI Origin Version: 2016.06.15
              2016/06/30 19:09:34Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
              2016/06/30 19:09:34Z: OS: Microsoft Windows NT 6.3.9600
              2016/06/30 19:09:34Z: OsVersion: 6.3
              2016/06/30 19:09:34Z: OsProductName: Windows Server 2012 R2 Standard
              2016/06/30 19:09:34Z: OsBuildLabEx: 9600.18292.amd64fre.winblue_ltsb.160330-1744
              2016/06/30 19:09:34Z: Language: en-US
              2016/06/30 19:09:34Z: TimeZone: Coordinated Universal Time
              2016/06/30 19:09:34Z: Offset: UTC 00:00:00
              2016/06/30 19:09:34Z: EC2 Agent: Ec2Config service v3.17.1032
              2016/06/30 19:09:36Z: Message: Waiting for meta-data accessibility...
              2016/06/30 19:09:36Z: Message: Meta-data is now available.
              2016/06/30 19:09:37Z: AMI-ID: ami-8d0acfed
              2016/06/30 19:09:37Z: Instance-ID: i-6c449dc3
              2016/06/30 19:09:38Z: Driver: AWS PV Network Device v7.3.2.0
              2016/06/30 19:09:38Z: Driver: AWS PV Storage Host Adapter v7.3.2.0
              2016/06/30 19:09:38Z: Ec2SetPassword: Enabled
              2016/06/30 19:09:38Z: RDPCERTIFICATE-SUBJECTNAME: WIN-AD14LT2NAIR
              2016/06/30 19:09:38Z: RDPCERTIFICATE-THUMBPRINT: 5B4E827D4E3E68FC34F8D4B3EE68CCEAEB8B292A
              2016/06/30 19:09:41Z: Username: Administrator
              2016/06/30 19:09:41Z: Password: <Password>
              uV1TlEhzdkF6lTTD4gkq0nuBTBH2JeKsWh9LmJGbaOwhiiLtyA7rPAZopsX0kSbDTZyjWag75ZGouIJ+xe/5iJ1xQrU03a8fAVKfPPQGrn+0qUVB8KyiIVt6a6o75BhzpfXZgZi6+vbkomE/aRwa9cqLQqFI/Sn8lbU95QtUHtnAMPHEkLqmqfyohkjj47Ej4DLeg7B0uTOldMwoKFdblsMG/6lF8FGZJDk5YHPxYL8PjkNFUaybRFb8ko/VK1Zp9sSxkbpOJdRG4gNZqlvXH4Bx2m1Jm6NvLejUHexEgP2t0aznozlCyDQaR3WQO5OBxrtqW8FRCzge6XncpmBaWw==
              </Password>
              2016/06/30 19:09:42Z: Message: Windows is Ready to use

                     Waited 0/300s for instance <i-6c449dc3> to fetch windows admin password.
                     Retrieved Windows password for instance <i-6c449dc3>.
                     EC2 instance <i-6c449dc3> ready.
              D      [WinRM] opening remote shell on http://10.194.14.46:5985/wsman
              D      [WinRM] remote shell FF1880CD-88FA-4A95-AFCF-7BA758C1933B is open on http://10.194.14.46:5985/wsman
              D      [WinRM] negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
              ')
                     [WinRM] Established

              D      [WinRM] reusing existing connection negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
              D      [WinRM] negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)


                         Directory: C:\chef\ohai\hints


                     Mode                LastWriteTime     Length Name
                     ----                -------------     ------ ----
                     -a---         6/30/2016   7:10 PM          0 ec2.json


              D      ec2:create '10.194.14.46'
                     Finished creating <default-windows-2012r2> (2m2.88s).
              -----> Converging <default-windows-2012r2>...
                     Preparing files for transfer
              D      Creating local sandbox in /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872
                     Preparing dna.json
              D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>["recipe[winbox::default]"]}
                     Resolving cookbook dependencies with Berkshelf 4.3.5...
              D      Using Berksfile from /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/winbox/Berksfile
                     Removing non-cookbook files before transfer
                     Preparing validation.pem
              D      Using a dummy validation.pem
                     Preparing client.rb
              D      Creating client.rb from {:node_name=>"default-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
              D      [WinRM] reusing existing connection negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
              D      [WinRM] negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
              function Get-PlatformVersion {
                switch -regex ((get-wmiobject win32_operatingsystem).version) {
                  '10\.0\.\d+' {$platform_version = '2012r2'}
                  '6\.3\.\d+'  {$platform_version = '2012r2'}
                  '6\.2\.\d+'  {$platform_version = '2012'}
                  '6\.1\.\d+'  {$platform_version = '2008r2'}
                  '6\.0\.\d+'  {$platform_version = '2008'}
                }
                return $platform_version
              }

              function Get-PlatformArchitecture {
                if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                  $architecture = 'x86_64'
                } else {
                  $architecture = 'i386'
                }
                return $architecture
              }

              function New-Uri {
                param ($baseuri, $newuri)

                try {
                new-object System.Uri $baseuri, $newuri
                }
                catch [System.Management.Automation.MethodInvocationException]{
                  Write-Error "$($_.exception.message)"
                  throw $_.exception
                }
              }

              function Get-WebContent {
                param ($uri, $filepath)
                $proxy = New-Object -TypeName System.Net.WebProxy
                $wc = new-object System.Net.WebClient
                $proxy.Address = $env:http_proxy
                $wc.Proxy = $proxy

                try {
                  if ([string]::IsNullOrEmpty($filepath)) {
                    $wc.downloadstring($uri)
                  }
                  else {
                    $wc.downloadfile($uri, $filepath)
                  }
                }
                catch {
                  $exception = $_.Exception
                  Write-Host "There was an error: "
                  do {
                    Write-Host "`t$($exception.message)"
                    $exception = $exception.innerexception
                  } while ($exception)
                  throw "Failed to download from $uri."
                }
              }

              function Test-ProjectPackage {
                [cmdletbinding()]
                param ($Path, $Algorithm = 'SHA256', $Hash)

                if (-not (get-command get-filehash))   {
                  function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                  function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                  function Get-FileHash ($Path, $Algorithm) {
                    $Path = (resolve-path $path).providerpath
                    $hash = @{Algorithm = $Algorithm; Path = $Path}
                    use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                      use ($in = (gi $path).OpenRead()) {
                        $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                      }
                    }
                    new-object PSObject -Property $hash
                  }
                }
                Write-Verbose "Testing the $Algorithm hash for $path."
                $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
                Write-Verbose "`tDesired Hash - '$hash'"
                Write-Verbose "`tActual Hash  - '$ActualHash'"
                $Valid = $ActualHash -eq $Hash
                if (-not $Valid) {
                  Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
                }
                return $Valid
              }

              function Get-ProjectMetadata {
                <#
                  .SYNOPSIS
                  Get metadata for a Chef Software, Inc. project
                  .DESCRIPTION
                  Get metadata for project
                  .EXAMPLE
                  iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                  Gets the download url and SHA256 checksum for the latest stable release of Chef.
                  .EXAMPLE
                  iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                  Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
                #>
                [cmdletbinding()]
                param (
                  # Base url to retrieve metadata from.
                  [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                  [string]
                  # Project to install
                  [string]
                  $project = 'chef',
                  # Version of the application to install
                  # This parameter is optional, if not supplied it will provide the latest version,
                  # and if an iteration number is not specified, it will grab the latest available iteration.
                  # Partial version numbers are also acceptable (using v=11
                  # will grab the latest 11.x client which matches the other flags).
                  [string]
                  $version,
                  # Release channel to install from
                  $channel = 'unstable',
                  # The following legacy switches are just aliases for the current channel
                  [switch]
                  $prerelease,
                  [switch]
                  $nightlies,
                  [validateset('auto', 'i386', 'x86_64')]
                  [string]
                  $architecture = 'auto'
                )

                # PowerShell is only on Windows ATM
                $platform = 'windows'
                Write-Verbose "Platform: $platform"

                $platform_version = Get-PlatformVersion
                Write-Verbose "Platform Version: $platform_version"

                if ($architecture -eq 'auto') {
                  $architecture = Get-PlatformArchitecture
                }

                Write-Verbose "Architecture: $architecture"
                Write-Verbose "Project: $project"


                  $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 16b55cbf511b3989b006c98c940f8230858cf6eba81b6ec9793912d686b66885" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.9/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.10/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.11/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ios_xr/6/chef-12.12.10-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 f8f5e1bc424c103f9423aa7b4ed1d2dfc7bd7e1132c0af9c34c78caaf7631a9b" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/nexus/7/chef-12.12.10-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 e03a7b07f699d96ce4f2093f8dd4be61fc8547860fa52d19ad0f0394fa488e66" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 76ea4ba096b432e6544be0dd8ab04c201aeaf6343965b0f5cd2cc1fd3bb957e1" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 746a2030bb5e078a525051508253dd70ae70d8999c89b2f95de3f368b98d64d9" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 eb0627c6f828cd08d95d4822874412ab6a4fe8fd6e8f29721ce0953def3fb0ed" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 41676f26ce135282cbc09cb3f9de6c04dfdec964547fdb995318fe659f3166f9" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 b291ce4b5c01fb87dd98033e06c27e313c740b3139ebc30d33dd25154d0edd73" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 fedff09be8b6b3bad5f33bb0f675cd240a3b653ce7ce7e9236f888b28b1cea92" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 83a6de2ac1484959c90b830d70cf6cef8528ec89a1f416d95d314b23b82efe21" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 a72febfdba2d28ff67f9540c554c6f94b60f9781f31c791355e0e0f55cdbc86a" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 96af6e90f6ff3876d357859544bea71c24c6dc4d92eb098a3ae3f36b45b3dac6" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 bf531b332f24a1f4d5cc5d43597443714aef3a801cd4b4edf45644132a26a276" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 d3a5206694949575e519354f8e121703de2e75940446a2d7f58013affe96c656" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/6.1/chef-12.12.10-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/7.1/chef-12.12.10-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" | out-file "$artifact_info_dir/artifact_info" -Append

                  $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                  New-Item -ItemType directory -Path $artifact_info_dir -force
                  New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                  "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                  "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" | out-file "$artifact_info_dir/artifact_info" -Append


                $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

                $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                  foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

                Write-Verbose "Project details: "
                foreach ($key in $package_metadata.keys) {
                  Write-Verbose "`t$key = $($package_metadata[$key])"
                }
                $package_metadata
              }

              function Install-Project {
                <#
                  .SYNOPSIS
                  Install a Chef Software, Inc. product
                  .DESCRIPTION
                  Install a Chef Software, Inc. product
                  .EXAMPLE
                  iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                  Installs the latest stable version of Chef.
                  .EXAMPLE
                  iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                  Installs the latest integration build of the Chef Development Kit
                #>
                [cmdletbinding(SupportsShouldProcess=$true)]
                param (
                  # Project to install
                  [string]
                  $project = 'chef',
                  # Release channel to install from
                  [validateset('current', 'stable', 'unstable')]
                  [string]
                  $channel = 'stable',
                  # Version of the application to install
                  # This parameter is optional, if not supplied it will provide the latest version,
                  # and if an iteration number is not specified, it will grab the latest available iteration.
                  # Partial version numbers are also acceptable (using v=11
                  # will grab the latest 11.x client which matches the other flags).
                  [string]
                  $version,
                  # Full path for the downloaded installer.
                  [string]
                  $filename,
                  # Full path to the location to download the installer
                  [string]
                  $download_directory = $env:temp,
                  # The following legacy switches are just aliases for the current channel
                  [switch]
                  $prerelease,
                  [switch]
                  $nightlies,
                  [validateset('auto', 'i386', 'x86_64')]
                  [string]
                  $architecture = 'auto'
                )

                $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

                if (-not [string]::IsNullOrEmpty($filename)) {
                  $download_directory = split-path $filename
                  $filename = split-path $filename -leaf
                  if ([string]::IsNullOrEmpty($download_directory)) {
                    $download_directory = $pwd
                  }
                }
                else {
                  $filename = ($package_metadata.url -split '/')[-1]
                }
                Write-Verbose "Download directory: $download_directory"
                Write-Verbose "Filename: $filename"

                if (-not (test-path $download_directory)) {
                  mkdir $download_directory
                }
                $download_directory = (resolve-path $download_directory).providerpath
                $download_destination = join-path $download_directory $filename

                if ((test-path $download_destination) -and
                  (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                  Write-Verbose "Found existing valid installer at $download_destination."
                }
                else {
                  if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                    Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                    Get-WebContent $package_metadata.url -filepath $download_destination
                  }
                }

                if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                  if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                    Write-Host "Installing $project from $download_destination"
                    $installingProject = $True
                    $installAttempts = 0
                    while ($installingProject) {
                      $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                      $p.WaitForExit()
                      if ($p.ExitCode -eq 1618) {
                        Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                        continue
                      } elseif ($p.ExitCode -ne 0) {
                        throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                      }
                      $installingProject = $False
                    }
                  }
                  else {
                    throw "Failed to validate the downloaded installer for $project."
                  }
                }
              }
              set-alias install -value Install-Project
              export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

              }

              install -project chef -version 12.12.10 -channel unstable
              )
              D      creating hash for file $env:TEMP/default-windows-2012r2-long_script.ps1
              D      Running check_files.ps1
              D      @{
              D        "ee541b042a0f0ef2da5f8f2861cc4131" = @{
              D          "target" = "$env:TEMP/default-windows-2012r2-long_script.ps1";
              D          "src_basename" = "default-windows-2012r2-long_script.ps1";
              D          "dst" = "$env:TEMP/default-windows-2012r2-long_script.ps1"
              D        }
              D      }
              D      [WinRM] opening new shell since the current one failed
              D      [WinRM] opening remote shell on http://10.194.14.46:5985/wsman
              D      [WinRM] remote shell C5287A6B-6D6B-4A3A-BEE6-E834FABD96D7 is open on http://10.194.14.46:5985/wsman
              D      Parsing CSV Response
              D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
              "False","ee541b042a0f0ef2da5f8f2861cc4131",,"True","False","False"

              D      Uploading /tmp/cheftest/kitchen-long-script20160630-4924-g85am7/default-windows-2012r2-long_script.ps1 to encoded tmpfile $env:TEMP\b64-ee541b042a0f0ef2da5f8f2861cc4131.txt
              D      Finished uploading /tmp/cheftest/kitchen-long-script20160630-4924-g85am7/default-windows-2012r2-long_script.ps1 to encoded tmpfile $env:TEMP\b64-ee541b042a0f0ef2da5f8f2861cc4131.txt (38.844 KB over 5 chunks) in (0m0.48s)
              D      Running decode_files.ps1
              D      @{
              D        "$env:TEMP\b64-ee541b042a0f0ef2da5f8f2861cc4131.txt" = @{
              D          "dst" = "$env:TEMP/default-windows-2012r2-long_script.ps1"
              D        }
              D      }
              D      Parsing CSV Response
              D      "src_md5","tmpzip","verifies","tmpfile","dst_md5","dst"
              "ee541b042a0f0ef2da5f8f2861cc4131",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-ee541b042a0f0ef2da5f8f2861cc4131.txt","ee541b042a0f0ef2da5f8f2861cc4131","C:\Users\ADMINI~1\AppData\Local\Temp/default-windows-2012r2-long_script.ps1"

              D      Uploaded 1 items dirty_check: (0m0.77s) stream_files: (0m0.48s) decode: (0m0.90s)

                     ModuleType Version    Name                                ExportedCommands
                     ---------- -------    ----                                ----------------
                     Script     0.0        Omnitruck                           {Get-ProjectMetada...
                     Installing chef from C:\Users\ADMINI~1\AppData\Local\Temp\chef-client-12.12.10-1-x64.msi
              D      [WinRM] retrying receive request after timeout


              D      [WinRM] negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($dirs = @("$env:TEMP\kitchen\clients", "$env:TEMP\kitchen\cookbooks", "$env:TEMP\kitchen\data", "$env:TEMP\kitchen\data_bags", "$env:TEMP\kitchen\encrypted_data_bag_secret", "$env:TEMP\kitchen\environments", "$env:TEMP\kitchen\roles")
              $root_path = "$env:TEMP\kitchen"

              Function Delete-AllDirs($dirs) {
                $dirs | ForEach-Object {
                  if (Test-Path ($path = Unresolve-Path $_)) { Remove-Item $path -Recurse -Force }
                }
              }

              Function Unresolve-Path($p) {
                if ($p -eq $null) { return $null }
                else { return $ExecutionContext.SessionState.Path.GetUnresolvedProviderPathFromPSPath($p) }
              }

              Function Make-RootPath($p) {
                $p = Unresolve-Path $p
                if (-Not (Test-Path $p)) { New-Item $p -ItemType directory | Out-Null }
              }

              Delete-AllDirs $dirs
              Make-RootPath $root_path
              )
                     Transferring files to <default-windows-2012r2>
              D      creating hash for file $env:TEMP\kitchen
              D      creating hash for file $env:TEMP\kitchen
              D      creating hash for directory $env:TEMP\kitchen
              D      Populating files
              D      === All files added.
              D      creating hash for file $env:TEMP\kitchen
              D      creating hash for directory $env:TEMP\kitchen
              D      Populating files
              D      +++ Adding build-essential/README.md
              D      +++ Adding build-essential/attributes/default.rb
              D      +++ Adding build-essential/libraries/matchers.rb
              D      +++ Adding build-essential/libraries/xcode_command_line_tools.rb
              D      +++ Adding build-essential/metadata.json
              D      +++ Adding build-essential/recipes/_windows.rb
              D      +++ Adding build-essential/recipes/default.rb
              D      +++ Adding build-essential/resources/build_essential.rb
              D      +++ Adding chef_handler/README.md
              D      +++ Adding chef_handler/attributes/default.rb
              D      +++ Adding chef_handler/files/default/handlers/README
              D      +++ Adding chef_handler/libraries/helpers.rb
              D      +++ Adding chef_handler/libraries/matchers.rb
              D      +++ Adding chef_handler/metadata.json
              D      +++ Adding chef_handler/providers/default.rb
              D      +++ Adding chef_handler/recipes/default.rb
              D      +++ Adding chef_handler/recipes/json_file.rb
              D      +++ Adding chef_handler/resources/default.rb
              D      +++ Adding compat_resource/README.md
              D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/constants.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/delayed_evaluator.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/dsl/core.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/dsl/declare_resource.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/dsl/recipe.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/mixin/lazy_module_include.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/mixin/notifying_block.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/mixin/params_validate.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/mixin/powershell_out.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/mixin/properties.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/property.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/provider/noop.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/provider.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/resource/action_class.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/resource.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/resource_builder.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/mixin/properties.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/exceptions.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/log.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/mixin/params_validate.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/property.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/provider.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/recipe.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/resource/lwrp_base.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/resource.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/resource_builder.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/resource_collection/resource_list.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/resource_collection/resource_set.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/resource_collection.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/run_context.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/property.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/recipe.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/resource/lwrp_base.rb
              D      +++ Adding compat_resource/files/lib/chef_compat/resource.rb
              D      +++ Adding compat_resource/files/lib/compat_resource/gemspec.rb
              D      +++ Adding compat_resource/files/lib/compat_resource/version.rb
              D      +++ Adding compat_resource/files/lib/compat_resource.rb
              D      +++ Adding compat_resource/files/spec/cookbook_spec.rb
              D      +++ Adding compat_resource/files/spec/data/Gemfile
              D      +++ Adding compat_resource/files/spec/data/Gemfile.lock
              D      +++ Adding compat_resource/files/spec/data/config.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/cloning/metadata.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/cloning/providers/resource.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/cloning/recipes/default.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/cloning/resources/resource.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/future/libraries/future_custom_resource.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/future/libraries/super_properties.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/future/metadata.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/future/recipes/declare_resource.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/future/resources/resource.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/future/resources/super_resource.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/hybrid/libraries/normal_hwrp.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/hybrid/metadata.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/hybrid/providers/resource.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/hybrid/resources/resource.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/normal/libraries/normal_hwrp.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/normal/metadata.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/normal/providers/resource.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/normal/recipes/declare_resource.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/normal/resources/resource.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/notifications/metadata.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/notifications/recipes/default.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/notifications/resources/resource.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/test/metadata.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/test/recipes/default.rb
              D      +++ Adding compat_resource/files/spec/data/cookbooks/test/recipes/test.rb
              D      +++ Adding compat_resource/files/spec/data/nodes/ettores-mbp.lan.json
              D      +++ Adding compat_resource/files/spec/spec_helper.rb
              D      +++ Adding compat_resource/libraries/autoload.rb
              D      +++ Adding compat_resource/metadata.json
              D      +++ Adding dmg/README.md
              D      +++ Adding dmg/attributes/default.rb
              D      +++ Adding dmg/libraries/matchers.rb
              D      +++ Adding dmg/metadata.json
              D      +++ Adding dmg/providers/package.rb
              D      +++ Adding dmg/recipes/default.rb
              D      +++ Adding dmg/resources/package.rb
              D      +++ Adding git/README.md
              D      +++ Adding git/attributes/default.rb
              D      +++ Adding git/libraries/helpers.rb
              D      +++ Adding git/libraries/matchers.rb
              D      +++ Adding git/libraries/provider_git_client.rb
              D      +++ Adding git/libraries/provider_git_client_osx.rb
              D      +++ Adding git/libraries/provider_git_client_package.rb
              D      +++ Adding git/libraries/provider_git_client_source.rb
              D      +++ Adding git/libraries/provider_git_client_windows.rb
              D      +++ Adding git/libraries/provider_git_service.rb
              D      +++ Adding git/libraries/provider_git_service_xinetd.rb
              D      +++ Adding git/libraries/resource_git_client.rb
              D      +++ Adding git/libraries/resource_git_service.rb
              D      +++ Adding git/libraries/z_provider_mapping.rb
              D      +++ Adding git/metadata.json
              D      +++ Adding git/providers/config.rb
              D      +++ Adding git/recipes/default.rb
              D      +++ Adding git/recipes/package.rb
              D      +++ Adding git/recipes/server.rb
              D      +++ Adding git/recipes/source.rb
              D      +++ Adding git/recipes/windows.rb
              D      +++ Adding git/resources/config.rb
              D      +++ Adding git/templates/default/git-xinetd.d.erb
              D      +++ Adding git/templates/default/sv-git-daemon-log-run.erb
              D      +++ Adding git/templates/default/sv-git-daemon-run.erb
              D      +++ Adding mingw/README.md
              D      +++ Adding mingw/files/default/bash.bat
              D      +++ Adding mingw/files/default/custom-upgrade.sh
              D      +++ Adding mingw/files/default/pthread.h
              D      +++ Adding mingw/files/default/time.h
              D      +++ Adding mingw/libraries/_helper.rb
              D      +++ Adding mingw/metadata.json
              D      +++ Adding mingw/recipes/default.rb
              D      +++ Adding mingw/resources/get.rb
              D      +++ Adding mingw/resources/msys2_package.rb
              D      +++ Adding mingw/resources/tdm_gcc.rb
              D      +++ Adding seven_zip/README.md
              D      +++ Adding seven_zip/attributes/default.rb
              D      +++ Adding seven_zip/metadata.json
              D      +++ Adding seven_zip/providers/archive.rb
              D      +++ Adding seven_zip/recipes/default.rb
              D      +++ Adding seven_zip/resources/archive.rb
              D      +++ Adding winbox/README.md
              D      +++ Adding winbox/attributes/debugger_install_path.rb
              D      +++ Adding winbox/attributes/editor.rb
              D      +++ Adding winbox/files/default/ConEmu.xml
              D      +++ Adding winbox/files/default/chef-dk.ico
              D      +++ Adding winbox/files/default/get-help-full.ps1
              D      +++ Adding winbox/files/default/install.ps1
              D      +++ Adding winbox/files/default/set-location-docs.ps1
              D      +++ Adding winbox/files/default/start-chefdk.ps1
              D      +++ Adding winbox/files/default/vscode-keybindings.json
              D      +++ Adding winbox/files/default/vscode-settings.json
              D      +++ Adding winbox/files/default/winbox-ps-profile.ps1
              D      +++ Adding winbox/libraries/executable_finder.rb
              D      +++ Adding winbox/libraries/git_information.rb
              D      +++ Adding winbox/metadata.json
              D      +++ Adding winbox/recipes/chefdk.rb
              D      +++ Adding winbox/recipes/chefdk_shortcut.rb
              D      +++ Adding winbox/recipes/chocolatey_install.rb
              D      +++ Adding winbox/recipes/console.rb
              D      +++ Adding winbox/recipes/debugger.rb
              D      +++ Adding winbox/recipes/default.rb
              D      +++ Adding winbox/recipes/editor.rb
              D      +++ Adding winbox/recipes/powershell_dev.rb
              D      +++ Adding winbox/recipes/readline.rb
              D      +++ Adding winbox/recipes/vscode_emacs.rb
              D      +++ Adding windows/README.md
              D      +++ Adding windows/attributes/default.rb
              D      +++ Adding windows/files/default/handlers/windows_reboot_handler.rb
              D      +++ Adding windows/libraries/feature_base.rb
              D      +++ Adding windows/libraries/matchers.rb
              D      +++ Adding windows/libraries/powershell_helper.rb
              D      +++ Adding windows/libraries/powershell_out.rb
              D      +++ Adding windows/libraries/registry_helper.rb
              D      +++ Adding windows/libraries/version.rb
              D      +++ Adding windows/libraries/windows_architecture_helper.rb
              D      +++ Adding windows/libraries/windows_helper.rb
              D      +++ Adding windows/libraries/windows_package.rb
              D      +++ Adding windows/libraries/windows_privileged.rb
              D      +++ Adding windows/libraries/wmi_helper.rb
              D      +++ Adding windows/metadata.json
              D      +++ Adding windows/providers/auto_run.rb
              D      +++ Adding windows/providers/batch.rb
              D      +++ Adding windows/providers/certificate.rb
              D      +++ Adding windows/providers/certificate_binding.rb
              D      +++ Adding windows/providers/feature_dism.rb
              D      +++ Adding windows/providers/feature_powershell.rb
              D      +++ Adding windows/providers/feature_servermanagercmd.rb
              D      +++ Adding windows/providers/font.rb
              D      +++ Adding windows/providers/http_acl.rb
              D      +++ Adding windows/providers/pagefile.rb
              D      +++ Adding windows/providers/path.rb
              D      +++ Adding windows/providers/printer.rb
              D      +++ Adding windows/providers/printer_port.rb
              D      +++ Adding windows/providers/reboot.rb
              D      +++ Adding windows/providers/registry.rb
              D      +++ Adding windows/providers/shortcut.rb
              D      +++ Adding windows/providers/task.rb
              D      +++ Adding windows/providers/zipfile.rb
              D      +++ Adding windows/recipes/default.rb
              D      +++ Adding windows/recipes/reboot_handler.rb
              D      +++ Adding windows/resources/auto_run.rb
              D      +++ Adding windows/resources/batch.rb
              D      +++ Adding windows/resources/certificate.rb
              D      +++ Adding windows/resources/certificate_binding.rb
              D      +++ Adding windows/resources/feature.rb
              D      +++ Adding windows/resources/font.rb
              D      +++ Adding windows/resources/http_acl.rb
              D      +++ Adding windows/resources/pagefile.rb
              D      +++ Adding windows/resources/path.rb
              D      +++ Adding windows/resources/printer.rb
              D      +++ Adding windows/resources/printer_port.rb
              D      +++ Adding windows/resources/reboot.rb
              D      +++ Adding windows/resources/registry.rb
              D      +++ Adding windows/resources/shortcut.rb
              D      +++ Adding windows/resources/task.rb
              D      +++ Adding windows/resources/zipfile.rb
              D      +++ Adding yum/README.md
              D      +++ Adding yum/attributes/main.rb
              D      +++ Adding yum/libraries/matchers.rb
              D      +++ Adding yum/metadata.json
              D      +++ Adding yum/providers/globalconfig.rb
              D      +++ Adding yum/providers/repository.rb
              D      +++ Adding yum/recipes/default.rb
              D      +++ Adding yum/recipes/dnf_yum_compat.rb
              D      +++ Adding yum/resources/globalconfig.rb
              D      +++ Adding yum/resources/repository.rb
              D      +++ Adding yum/templates/default/main.erb
              D      +++ Adding yum/templates/default/repo.erb
              D      +++ Adding yum-epel/README.md
              D      +++ Adding yum-epel/attributes/default.rb
              D      +++ Adding yum-epel/attributes/epel-debuginfo.rb
              D      +++ Adding yum-epel/attributes/epel-source.rb
              D      +++ Adding yum-epel/attributes/epel-testing-debuginfo.rb
              D      +++ Adding yum-epel/attributes/epel-testing-source.rb
              D      +++ Adding yum-epel/attributes/epel-testing.rb
              D      +++ Adding yum-epel/attributes/epel.rb
              D      +++ Adding yum-epel/metadata.json
              D      +++ Adding yum-epel/recipes/default.rb
              D      === All files added.
              D      Running check_files.ps1
              D      @{
              D        "a86f70dc25c9c07f2959adeb0ed8a08c" = @{
              D          "target" = "$env:TEMP\kitchen";
              D          "src_basename" = "dna.json";
              D          "dst" = "$env:TEMP\kitchen"
              D        };
              D        "b8a32ad42457120c47ccf2013d837e5d" = @{
              D          "target" = "$env:TEMP\kitchen";
              D          "src_basename" = "client.rb";
              D          "dst" = "$env:TEMP\kitchen"
              D        };
              D        "76cdb2bad9582d23c1f6f4d868218d6c" = @{
              D          "target" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip";
              D          "src_basename" = "cache";
              D          "dst" = "$env:TEMP\kitchen\cache"
              D        };
              D        "49abb94825cb80b9a9cd59e5f76daf4a" = @{
              D          "target" = "$env:TEMP\kitchen";
              D          "src_basename" = "validation.pem";
              D          "dst" = "$env:TEMP\kitchen"
              D        };
              D        "84a924240051e1b98a005b4b4aab8d67" = @{
              D          "target" = "$env:TEMP\winrm-upload\tmpzip-84a924240051e1b98a005b4b4aab8d67.zip";
              D          "src_basename" = "cookbooks";
              D          "dst" = "$env:TEMP\kitchen\cookbooks"
              D        }
              D      }
              D      Parsing CSV Response
              D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
              "False","84a924240051e1b98a005b4b4aab8d67",,"True","False","False"
              "False","a86f70dc25c9c07f2959adeb0ed8a08c",,"True","False","True"
              "False","76cdb2bad9582d23c1f6f4d868218d6c",,"True","False","False"
              "False","49abb94825cb80b9a9cd59e5f76daf4a",,"True","False","True"
              "False","b8a32ad42457120c47ccf2013d837e5d",,"True","False","True"

              D      Uploading /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872/dna.json to encoded tmpfile $env:TEMP\b64-a86f70dc25c9c07f2959adeb0ed8a08c.txt
              D      Finished uploading /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872/dna.json to encoded tmpfile $env:TEMP\b64-a86f70dc25c9c07f2959adeb0ed8a08c.txt (0.12 KB over 1 chunks) in (0m0.06s)
              D      Uploading /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872/client.rb to encoded tmpfile $env:TEMP\b64-b8a32ad42457120c47ccf2013d837e5d.txt
              D      Finished uploading /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872/client.rb to encoded tmpfile $env:TEMP\b64-b8a32ad42457120c47ccf2013d837e5d.txt (1.104 KB over 1 chunks) in (0m0.07s)
              D      Uploading /tmp/cheftest/tmpzip-20160630-4924-1erptln.zip to encoded tmpfile $env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt
              D      Finished uploading /tmp/cheftest/tmpzip-20160630-4924-1erptln.zip to encoded tmpfile $env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt (0.028 KB over 1 chunks) in (0m0.07s)
              D      Uploading /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872/validation.pem to encoded tmpfile $env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt
              D      Finished uploading /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872/validation.pem to encoded tmpfile $env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt (2.236 KB over 1 chunks) in (0m0.20s)
              D      Uploading /tmp/cheftest/tmpzip-20160630-4924-1v9qc5f.zip to encoded tmpfile $env:TEMP\b64-84a924240051e1b98a005b4b4aab8d67.txt
              D      Wrote chunk 25 for $env:TEMP\b64-84a924240051e1b98a005b4b4aab8d67.txt
              D      Wrote chunk 50 for $env:TEMP\b64-84a924240051e1b98a005b4b4aab8d67.txt
              D      Finished uploading /tmp/cheftest/tmpzip-20160630-4924-1v9qc5f.zip to encoded tmpfile $env:TEMP\b64-84a924240051e1b98a005b4b4aab8d67.txt (430.132 KB over 54 chunks) in (0m5.02s)
              D      Running decode_files.ps1
              D      @{
              D        "$env:TEMP\b64-a86f70dc25c9c07f2959adeb0ed8a08c.txt" = @{
              D          "dst" = "$env:TEMP\kitchen/dna.json"
              D        };
              D        "$env:TEMP\b64-b8a32ad42457120c47ccf2013d837e5d.txt" = @{
              D          "dst" = "$env:TEMP\kitchen/client.rb"
              D        };
              D        "$env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt" = @{
              D          "dst" = "$env:TEMP\kitchen\cache";
              D          "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip"
              D        };
              D        "$env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt" = @{
              D          "dst" = "$env:TEMP\kitchen/validation.pem"
              D        };
              D        "$env:TEMP\b64-84a924240051e1b98a005b4b4aab8d67.txt" = @{
              D          "dst" = "$env:TEMP\kitchen\cookbooks";
              D          "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-84a924240051e1b98a005b4b4aab8d67.zip"
              D        }
              D      }
              D      Parsing CSV Response
              D      "src_md5","tmpzip","verifies","tmpfile","dst_md5","dst"
              "76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip","True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt","76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache"
              "a86f70dc25c9c07f2959adeb0ed8a08c",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-a86f70dc25c9c07f2959adeb0ed8a08c.txt","a86f70dc25c9c07f2959adeb0ed8a08c","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/dna.json"
              "84a924240051e1b98a005b4b4aab8d67","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-84a924240051e1b98a005b4b4aab8d67.zip","True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-84a924240051e1b98a005b4b4aab8d67.txt","84a924240051e1b98a005b4b4aab8d67","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cookbooks"
              "49abb94825cb80b9a9cd59e5f76daf4a",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt","49abb94825cb80b9a9cd59e5f76daf4a","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/validation.pem"
              "b8a32ad42457120c47ccf2013d837e5d",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-b8a32ad42457120c47ccf2013d837e5d.txt","b8a32ad42457120c47ccf2013d837e5d","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/client.rb"

              D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160630-4924-1erptln.zip
              D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160630-4924-1v9qc5f.zip
              D      Uploaded 5 items dirty_check: (0m1.64s) stream_files: (0m5.44s) decode: (0m2.58s)
              D      Transfer complete
              D      [WinRM] negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($env:PATH = [System.Environment]::GetEnvironmentVariable("PATH","Machine")

              & $env:systemdrive\opscode\chef\bin\chef-client.bat --local-mode --config $env:TEMP\kitchen\client.rb --log_level auto --force-formatter --no-color --json-attributes $env:TEMP\kitchen\dna.json --chef-zero-port 8889)
                     Starting Chef Client, version 12.12.10
                     Creating a new client identity for default-windows-2012r2 using the validator key.
                     resolving cookbooks for run list: ["winbox::default"]
                     Synchronizing Cookbooks:
                       - winbox (0.9.105)
                       - git (4.5.0)
                       - windows (1.44.1)
                       - build-essential (6.0.0)
                       - dmg (2.4.0)
                       - yum-epel (0.7.0)
                       - chef_handler (1.4.0)
                       - seven_zip (2.0.1)
                       - mingw (1.2.2)
                       - compat_resource (12.10.6)
                       - yum (3.11.0)
                     Installing Cookbook Gems:
                     Compiling Cookbooks...
                     Converging 25 resources
                     Recipe: git::windows
                       * git_client[default] action install[2016-06-30T19:12:42+00:00] WARN: Please use the package resource available in Chef Client 12.6.
                     windows_package will be removed in the next major version release
                     of the Windows cookbook.


                         * windows_package[Git version 2.8.1] action install
                         Recipe: <Dynamically Defined Resource>
                           * remote_file[C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache\package\Git-2.8.1-64-bit.exe] action create
                      - create new file C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache\package\Git-2.8.1-64-bit.exe
                      - update content in file C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache\package\Git-2.8.1-64-bit.exe from none to 5e5283
                      (file sizes exceed 10000000 bytes, diff output suppressed)
                           - install version latest of package Git version 2.8.1
                         * ruby_block[Add Git Path] action nothing (skipped due to action :nothing)
                         * windows_path[C:\Program Files\Git\Cmd] action add
                           * env[path] action modify

                           * ruby_block[fix ruby ENV['PATH']] action run
                      - execute the ruby block fix ruby ENV['PATH']
                           * ruby_block[fix ruby ENV['PATH']] action nothing (skipped due to action :nothing)

                         * ruby_block[Add Git Path] action create
                           - execute the ruby block Add Git Path

                     Recipe: winbox::chocolatey_install
                       * windows_path[update_path_for_system] action add
                         * env[path] action modify

                         * ruby_block[fix ruby ENV['PATH']] action run
                           - execute the ruby block fix ruby ENV['PATH']
                         * ruby_block[fix ruby ENV['PATH']] action nothing (skipped due to action :nothing)

                       * ruby_block[add_chocolatey_path] action run (skipped due to not_if)
                       * powershell_script[chocolatey_install] action run
                         - execute "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-1tnyltv.ps1"
                     Recipe: winbox::powershell_dev
                       * powershell_script[ExecutionPolicyUnrestricted] action run (skipped due to only_if)
                       * powershell_script[ExecutionPolicyUnrestrictedX86] action run
                         - execute "C:\Windows\SysWOW64\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-10d2yd3.ps1"
                       * cookbook_file[C:\Users\Administrator/winbox-ps-profile.ps1] action create_if_missing
                         - create new file C:\Users\Administrator/winbox-ps-profile.ps1
                         - update content in file C:\Users\Administrator/winbox-ps-profile.ps1 from none to 19a092
                         --- C:\Users\Administrator/winbox-ps-profile.ps1  2016-06-30 19:13:23.000000000 +0000
                         +++ C:\Users\Administrator/chef-winbox-ps-profile.ps120160630-4068-1r3as3y  2016-06-30 19:13:23.000000000 +0000
                         @@ -1 +1,89 @@
                         +# WinBox PowerShell profile
                         +#
                         +# Copyright 2015, Adam Edwards
                         +#
                         +# Licensed under the Apache License, Version 2.0 (the "License");
                         +# you may not use this file except in compliance with the License.
                         +# You may obtain a copy of the License at
                         +#
                         +#     http://www.apache.org/licenses/LICENSE-2.0
                         +#
                         +# Unless required by applicable law or agreed to in writing, software
                         +# distributed under the License is distributed on an "AS IS" BASIS,
                         +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                         +# See the License for the specific language governing permissions and
                         +# limitations under the License.
                         +
                         +# Enable readline support
                         +import-module psreadline
                         +Set-PSReadlineOption -EditMode Emacs
                         +
                         +# Enable posh-git support
                         +if ((get-module -listavailable 'posh-git') -ne $null)
                         +{
                         +    import-module posh-git
                         +}
                         +
                         +# Get the username and whether we're elevated for display
                         +# in the title and prompt
                         +$identity = [Security.Principal.WindowsIdentity]::GetCurrent()
                         +$principal = [Security.Principal.WindowsPrincipal] $identity
                         +$titleprefix = ""
                         +if (test-path variable:/PSDebugContext)
                         +{
                         +    $titleprefix = 'Debug: '
                         +}
                         +else
                         +{
                         +    if ($principal.IsInRole([Security.Principal.WindowsBuiltInRole] "Administrator"))
                         +    {
                         +        $titleprefix = "Administrator: "
                         +    }
                         +}
                         +
                         +#
                         +# The title will look like one of the following:
                         +#
                         +#   myusername@myhost
                         +#   Administrator: myusername@myhost
                         +#
                         +(get-host).ui.rawui.windowtitle = "$titleprefix$($env:username)@$($env:computername)"
                         +
                         +#
                         +# Set a useful two-line prompt that uses color for readability and status.
                         +# The format is 'host: lastexitcode: currentdirectory `newline `username >'.
                         +#
                         +# Here's example output:
                         +#
                         +#   myhost (0x00000001) c:\windows\system32\drivers\etc
                         +#   myuser >
                         +#
                         +function prompt
                         +{
                         +    $lasterror = $?
                         +    $lastexit = $lastexitcode
                         +    if ($lastexit -eq $null) { $lastexit = 0 }
                         +    $errorcolor = 'green'
                         +    $exitcolor = 'green'
                         +    if (! $lasterror) { $errorcolor = 'red' }
                         +    if ($lastexit -ne 0) { $exitcolor = 'red' }
                         +
                         +    write-host -nonewline -foregroundcolor $errorcolor '% '
                         +    write-host -nonewline -foregroundcolor darkyellow "$env:computername "
                         +    write-host -nonewline -foregroundcolor gray "("
                         +    write-host -nonewline -foregroundcolor $exitcolor "0x$(($lastexit).ToString("X8"))"
                         +    write-host -nonewline -foregroundcolor gray ")"
                         +    if ( get-command write-vcsstatus) { Write-VcsStatus }
                         +    write-host -foregroundcolor cyan " $($executionContext.SessionState.Path.CurrentLocation)"
                         +    write-host -nonewline -foregroundcolor darkyellow "$env:username"
                         +    "$('>' * ($nestedPromptLevel + 1)) "
                         +}
                         +
                         +# Make the man alias show full help by default
                         +. ~\get-help-full.ps1
                         +set-alias -option allscope man get-help-full
                         +
                         +# Useful shortcut to get to Documents folder
                         +. ~\set-location-docs.ps1
                         +new-alias docs set-location-docs
                       * cookbook_file[C:\Users\Administrator/get-help-full.ps1] action create
                         - create new file C:\Users\Administrator/get-help-full.ps1
                         - update content in file C:\Users\Administrator/get-help-full.ps1 from none to 7edc66
                         --- C:\Users\Administrator/get-help-full.ps1  2016-06-30 19:13:23.000000000 +0000
                         +++ C:\Users\Administrator/chef-get-help-full.ps120160630-4068-1dunghq  2016-06-30 19:13:23.000000000 +0000
                         @@ -1 +1,30 @@
                         +#
                         +# Copyright 2015, Adam Edwards
                         +#
                         +# Licensed under the Apache License, Version 2.0 (the "License");
                         +# you may not use this file except in compliance with the License.
                         +# You may obtain a copy of the License at
                         +#
                         +#     http://www.apache.org/licenses/LICENSE-2.0
                         +#
                         +# Unless required by applicable law or agreed to in writing, software
                         +# distributed under the License is distributed on an "AS IS" BASIS,
                         +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                         +# See the License for the specific language governing permissions and
                         +# limitations under the License.
                         +
                         +# Shows help page with full help, rather than the
                         +# abbreviated help which is the default for get-help
                         +function get-help-full
                         +{
                         +    try
                         +    {
                         +        get-help @args -full | out-host -paging
                         +    }
                         +    catch [System.Management.Automation.HaltCommandException]
                         +    {
                         +        # Do nothing if the user chooses 'q'
                         +    }
                         +}
                         +
                       * cookbook_file[C:\Users\Administrator/set-location-docs.ps1] action create
                         - create new file C:\Users\Administrator/set-location-docs.ps1
                         - update content in file C:\Users\Administrator/set-location-docs.ps1 from none to 3e28a0
                         --- C:\Users\Administrator/set-location-docs.ps1  2016-06-30 19:13:23.000000000 +0000
                         +++ C:\Users\Administrator/chef-set-location-docs.ps120160630-4068-1rpc0fh  2016-06-30 19:13:23.000000000 +0000
                         @@ -1 +1,31 @@
                         +# Documents directory shortcut
                         +#
                         +# Copyright 2015, Adam Edwards
                         +#
                         +# Licensed under the Apache License, Version 2.0 (the "License");
                         +# you may not use this file except in compliance with the License.
                         +# You may obtain a copy of the License at
                         +#
                         +#     http://www.apache.org/licenses/LICENSE-2.0
                         +#
                         +# Unless required by applicable law or agreed to in writing, software
                         +# distributed under the License is distributed on an "AS IS" BASIS,
                         +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                         +# See the License for the specific language governing permissions and
                         +# limitations under the License.
                         +
                         +# Set the current directory to the location of the
                         +# Documents directory, and also set up an environment
                         +# variables called DOCS.
                         +function set-location-docs
                         +{
                         +
                         +    if ($env:DOCS -eq $null)
                         +    {
                         +        $myDocsPath = [environment]::GetFolderPath("MyDocuments")
                         +        $env:DOCS = $myDocsPath
                         +    }
                         +
                         +    pushd $env:DOCS
                         +}
                       * directory[C:/Users/Administrator/Documents/WindowsPowerShell] action create (up to date)
                       * powershell_script[C:\Users\Administrator\Documents\WindowsPowerShell\Microsoft.PowerShell_profile.ps1] action run (skipped due to not_if)
                     Recipe: winbox::readline
                       * remote_file[C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache\psreadline.zip] action create
                         - create new file C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache\psreadline.zip
                         - update content in file C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache\psreadline.zip from none to 68577a
                         (new content is binary, diff output suppressed)
                       * powershell_script[install_module] action run
                         - execute "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-m6c6sf.ps1"
                     Recipe: winbox::editor
                       * directory[C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/winbox/vscode] action create
                         - create new directory C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/winbox/vscode
                       * remote_file[C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/winbox/vscode/vscodesetup.exe] action create
                         - create new file C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/winbox/vscode/vscodesetup.exe
                         - update content in file C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/winbox/vscode/vscodesetup.exe from none to 3ae51c
                         (file sizes exceed 10000000 bytes, diff output suppressed)
                       * powershell_script[install vscode] action run
                         - execute "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-14y017i.ps1"
                       * env[EDITOR] action create

                     Recipe: winbox::console
                       * cookbook_file[C:\Program Files/conemu/ConEmu.xml] action nothing (skipped due to action :nothing)
              D      [WinRM] retrying receive request after timeout
              D      [WinRM] retrying receive request after timeout
                       * powershell_script[conemu] action run

                         ================================================================================
                         Error executing action `run` on resource 'powershell_script[conemu]'
                         ================================================================================

                         Mixlib::ShellOut::ShellCommandFailed
                         ------------------------------------
                         Expected process to exit with [0], but received '1'
                         ---- Begin output of "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-1u6bnwv.ps1" ----
                         STDOUT: Installing the following packages:
                         conemu
                         By installing you accept licenses for the packages.
                         conemu not installed. An error occurred during installation:
                          The remote server returned an error: (500) Internal Server Error.
                         The install of conemu was NOT successful.
                         conemu not installed. An error occurred during installation:
                          The remote server returned an error: (500) Internal Server Error.

                         Chocolatey installed 0/1 packages. 1 packages failed.
                          See the log for details (C:\ProgramData\chocolatey\logs\chocolatey.log).

                         Failures
                          - conemu - conemu not installed. An error occurred during installation:
                          The remote server returned an error: (500) Internal Server Error.
                         Installing the following packages:
                         conemu
                         By installing you accept licenses for the packages.
                         conemu not installed. An error occurred during installation:
                          The remote server returned an error: (500) Internal Server Error.
                         The install of conemu was NOT successful.
                         conemu not installed. An error occurred during installation:
                          The remote server returned an error: (500) Internal Server Error.

                         Chocolatey installed 0/1 packages. 1 packages failed.
                          See the log for details (C:\ProgramData\chocolatey\logs\chocolatey.log).

                         Failures
                          - conemu - conemu not installed. An error occurred during installation:
                          The remote server returned an error: (500) Internal Server Error.
                         STDERR:
                         ---- End output of "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-1u6bnwv.ps1" ----
                         Ran "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-1u6bnwv.ps1" returned 1

                         Resource Declaration:
                         ---------------------
                         # In C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/cookbooks/winbox/recipes/console.rb

                          27: powershell_script 'conemu' do
                          28:   code <<-EOH
                          29: chocolatey install conemu -y
                          30: if ($LASTEXITCODE -ne 0)
                          31: {
                          32:   $LASTEXITCODE = 0
                          33:   chocolatey install conemu -y
                          34: }
                          35: EOH
                          36:   only_if '(get-wmiobject Win32_MSIResource | Where-Object -Property value -like -Value conemu) -eq $null'
                          37: end
                          38:

                         Compiled Resource:
                         ------------------
                         # Declared in C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/cookbooks/winbox/recipes/console.rb:27:in `from_file'

                         powershell_script("conemu") do
                           action [:run]
                           retries 0
                           retry_delay 2
                           default_guard_interpreter :powershell_script
                           command "conemu"
                           backup 5
                           returns 0
                           code "chocolatey install conemu -y\nif ($LASTEXITCODE -ne 0)\n{\n  $LASTEXITCODE = 0\n  chocolatey install conemu -y\n}\n"
                           interpreter "powershell.exe"
                           declared_type :powershell_script
                           cookbook_name "winbox"
                           recipe_name "console"
                           only_if "(get-wmiobject Win32_MSIResource | Where-Object -Property value -like -Value conemu) -eq $null"
                         end

                         Platform:
                         ---------
                         x64-mingw32

                     Starting audit phase

                     Finished in 0.001 seconds (files took 0.71177 seconds to load)
                     0 examples, 0 failures
                     Auditing complete

                     Running handlers:
                     [2016-06-30T19:15:45+00:00] ERROR: Running exception handlers
                     Running handlers complete
                     [2016-06-30T19:15:45+00:00] ERROR: Exception handlers complete
                     Chef Client failed. 21 resources updated in 03 minutes 38 seconds
                     [2016-06-30T19:15:45+00:00] ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json
                     [2016-06-30T19:15:45+00:00] FATAL: Stacktrace dumped to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/chef-stacktrace.out
                     [2016-06-30T19:15:45+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
                     [2016-06-30T19:15:45+00:00] FATAL: Chef::Exceptions::RunFailedWrappingError: Found 1 errors, they are stored in the backtrace
              $$$$$$ C:/opscode/chef/embedded/lib/ruby/2.1.0/x64-mingw32/dl.so: warning: already initialized constant DL::RUBY_FREE
              $$$$$$ C:/opscode/chef/embedded/lib/ruby/gems/2.1.0/gems/net-ssh-3.2.0/lib/net/ssh/authentication/pageant.rb:16: warning: previous definition of RUBY_FREE was here
              $$$$$$ DL is deprecated, please use Fiddle
              D      Cleaning up local sandbox in /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872
              D      Converge failed on instance <default-windows-2012r2>.
              D      ------Exception-------
              D      Class: Kitchen::InstanceFailure
              D      Message: Converge failed on instance <default-windows-2012r2>.  Please see .kitchen/logs/default-windows-2012r2.log for more details
              D      ----------------------
              D      ------Backtrace-------
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/provisioner/base.rb:76:in `rescue in call'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/provisioner/base.rb:79:in `call'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:373:in `block in converge_action'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:513:in `call'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:513:in `synchronize_or_call'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:478:in `block in action'
              D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:477:in `action'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:369:in `converge_action'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:348:in `block in transition_to'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:347:in `each'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:347:in `transition_to'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:138:in `converge'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:194:in `public_send'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:194:in `run_action_in_thread'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
              D      ----End Backtrace-----
              D      ---Nested Exception---
              D      Class: Kitchen::ActionFailed
              D      Message: WinRM exited (1) for command: [$env:PATH = [System.Environment]::GetEnvironmentVariable("PATH","Machine")

              & $env:systemdrive\opscode\chef\bin\chef-client.bat --local-mode --config $env:TEMP\kitchen\client.rb --log_level auto --force-formatter --no-color --json-attributes $env:TEMP\kitchen\dna.json --chef-zero-port 8889]
              D      ----------------------
              D      ------Backtrace-------
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/provisioner/base.rb:76:in `rescue in call'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/provisioner/base.rb:79:in `call'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:373:in `block in converge_action'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:513:in `call'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:513:in `synchronize_or_call'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:478:in `block in action'
              D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:477:in `action'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:369:in `converge_action'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:348:in `block in transition_to'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:347:in `each'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:347:in `transition_to'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:138:in `converge'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:194:in `public_send'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:194:in `run_action_in_thread'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
              D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
              D      ----End Backtrace-----
              D      [WinRM] closing remote shell FF1880CD-88FA-4A95-AFCF-7BA758C1933B on http://10.194.14.46:5985/wsman
              D      [WinRM] closing remote shell C5287A6B-6D6B-4A3A-BEE6-E834FABD96D7 on http://10.194.14.46:5985/wsman
              D      [WinRM] remote shell C5287A6B-6D6B-4A3A-BEE6-E834FABD96D7 closed
              STDERR: >>>>>> Converge failed on instance <default-windows-2012r2>.
              >>>>>> Please see .kitchen/logs/default-windows-2012r2.log for more details
              >>>>>> ------Exception-------
              >>>>>> Class: Kitchen::ActionFailed
              >>>>>> Message: WinRM exited (1) for command: [$env:PATH = [System.Environment]::GetEnvironmentVariable("PATH","Machine")

              & $env:systemdrive\opscode\chef\bin\chef-client.bat --local-mode --config $env:TEMP\kitchen\client.rb --log_level auto --force-formatter --no-color --json-attributes $env:TEMP\kitchen\dna.json --chef-zero-port 8889]
              >>>>>> ----------------------
              ---- End output of bundle exec kitchen converge  -c -l debug ----
              Ran bundle exec kitchen converge  -c -l debug returned 10

              Resource Declaration:
              ---------------------
              # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb

               36:       execute "bundle exec kitchen #{command}#{instances ? " #{instances}" : ""}#{kitchen_options ? " #{kitchen_options}" : ""}" do
               37:         cwd kitchen_dir
               38:         env({
               39:           "KITCHEN_DRIVER" => driver,
               40:           "KITCHEN_INSTANCES" => instances,
               41:           "KITCHEN_LOCAL_YAML" => ::File.expand_path("../../.kitchen.#{driver}.yml", __FILE__),
               42:           "KITCHEN_CHEF_PRODUCT" => chef_product,
               43:           "KITCHEN_CHEF_CHANNEL" => chef_channel,
               44:           "KITCHEN_CHEF_VERSION" => chef_version,
               45:           "ARTIFACTORY_USERNAME" => artifactory_username,
               46:           "ARTIFACTORY_PASSWORD" => artifactory_password
               47:         }.merge(new_resource.env))
               48:       end
               49:     end

              Compiled Resource:
              ------------------
              # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:36:in `block in <class:Kitchen>'

              execute("bundle exec kitchen converge  -c -l debug") do
                action [:run]
                retries 0
                retry_delay 2
                default_guard_interpreter :execute
                command "bundle exec kitchen converge  -c -l debug"
                backup 5
                cwd "/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/winbox/"
                environment {"KITCHEN_DRIVER"=>"ec2", "KITCHEN_INSTANCES"=>"", "KITCHEN_LOCAL_YAML"=>"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/.kitchen.ec2.yml", "KITCHEN_CHEF_PRODUCT"=>"chef", "KITCHEN_CHEF_CHANNEL"=>"unstable", "KITCHEN_CHEF_VERSION"=>"12.12.10", "ARTIFACTORY_USERNAME"=>"chef-web-downloads", "ARTIFACTORY_PASSWORD"=>"fWPxYSB69EiuSpl8*3Dr^kGwf#hxUE6cmjeZRB%H!Cruit7qiKp%toH3nXKStQUg", "BUNDLE_GEMFILE"=>"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/Gemfile", "KITCHEN_YAML"=>"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/.kitchen.winbox.yml"}
                returns 0
                declared_type :execute
                cookbook_name "acceptance-cookbook"
              end


            ================================================================================
            Error executing action `run` on resource 'cookbook_kitchen[converge winbox]'
            ================================================================================

            Mixlib::ShellOut::ShellCommandFailed
            ------------------------------------
            execute[bundle exec kitchen converge  -c -l debug] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 36) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '10'
            ---- Begin output of bundle exec kitchen converge  -c -l debug ----
            STDOUT: -----> Starting Kitchen (v1.9.2)
            D      Berksfile found at /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/winbox/Berksfile, loading Berkshelf
            D      Berkshelf 4.3.5 library loaded
            D      winrm requested, loading winrm gem (["~> 1.6"])
            D      winrm is loaded.
            D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
            D      winrm-fs is loaded.
            -----> Creating <default-windows-2012r2>...
            D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
            D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
            D      Search returned 3 images:
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
            D      Image for default-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                   Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
            D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
                   If you are not using an account that qualifies under the AWS
            free-tier, you may be charged to run these suites. The charge
            should be minimal, but neither Test Kitchen nor its maintainers
            are responsible for your incurred costs.

            D      Creating EC2 instance in region us-west-2 with properties:
            D      - instance_type = "m3.large"
            D      - ebs_optimized = false
            D      - image_id = "ami-8d0acfed"
            D      - key_name = "jenkins"
            D      - subnet_id = "subnet-19ac017c"
            D      - private_ip_address = nil
            D      - placement = {:availability_zone=>"us-west-2a"}
            D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
            D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                   Instance <i-6c449dc3> requested.
                   Polling AWS for existence, attempt 0...
                   Attempting to tag the instance, 0 retries
                   EC2 instance <i-6c449dc3> created.
                   Waited 0/300s for instance <i-6c449dc3> to become ready.
                   Waited 5/300s for instance <i-6c449dc3> to become ready.
                   Waited 10/300s for instance <i-6c449dc3> to become ready.
                   Waited 15/300s for instance <i-6c449dc3> to become ready.
                   Waited 20/300s for instance <i-6c449dc3> to become ready.
                   Waited 25/300s for instance <i-6c449dc3> to become ready.
                   Waited 30/300s for instance <i-6c449dc3> to become ready.
                   Waited 35/300s for instance <i-6c449dc3> to become ready.
                   Waited 40/300s for instance <i-6c449dc3> to become ready.
                   Waited 45/300s for instance <i-6c449dc3> to become ready.
                   Waited 50/300s for instance <i-6c449dc3> to become ready.
                   Waited 55/300s for instance <i-6c449dc3> to become ready.
                   Waited 60/300s for instance <i-6c449dc3> to become ready.
                   Waited 65/300s for instance <i-6c449dc3> to become ready.
                   Waited 70/300s for instance <i-6c449dc3> to become ready.
                   Waited 75/300s for instance <i-6c449dc3> to become ready.
                   Waited 80/300s for instance <i-6c449dc3> to become ready.
                   Waited 85/300s for instance <i-6c449dc3> to become ready.
            D      Console output: ---
            2016/06/30 19:09:32Z: EC2ConfigMonitorState: 0
            2016/06/30 19:09:32Z: Windows sysprep configuration complete.
            2016/06/30 19:09:34Z: AMI Origin Version: 2016.06.15
            2016/06/30 19:09:34Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
            2016/06/30 19:09:34Z: OS: Microsoft Windows NT 6.3.9600
            2016/06/30 19:09:34Z: OsVersion: 6.3
            2016/06/30 19:09:34Z: OsProductName: Windows Server 2012 R2 Standard
            2016/06/30 19:09:34Z: OsBuildLabEx: 9600.18292.amd64fre.winblue_ltsb.160330-1744
            2016/06/30 19:09:34Z: Language: en-US
            2016/06/30 19:09:34Z: TimeZone: Coordinated Universal Time
            2016/06/30 19:09:34Z: Offset: UTC 00:00:00
            2016/06/30 19:09:34Z: EC2 Agent: Ec2Config service v3.17.1032
            2016/06/30 19:09:36Z: Message: Waiting for meta-data accessibility...
            2016/06/30 19:09:36Z: Message: Meta-data is now available.
            2016/06/30 19:09:37Z: AMI-ID: ami-8d0acfed
            2016/06/30 19:09:37Z: Instance-ID: i-6c449dc3
            2016/06/30 19:09:38Z: Driver: AWS PV Network Device v7.3.2.0
            2016/06/30 19:09:38Z: Driver: AWS PV Storage Host Adapter v7.3.2.0
            2016/06/30 19:09:38Z: Ec2SetPassword: Enabled
            2016/06/30 19:09:38Z: RDPCERTIFICATE-SUBJECTNAME: WIN-AD14LT2NAIR
            2016/06/30 19:09:38Z: RDPCERTIFICATE-THUMBPRINT: 5B4E827D4E3E68FC34F8D4B3EE68CCEAEB8B292A
            2016/06/30 19:09:41Z: Username: Administrator
            2016/06/30 19:09:41Z: Password: <Password>
            uV1TlEhzdkF6lTTD4gkq0nuBTBH2JeKsWh9LmJGbaOwhiiLtyA7rPAZopsX0kSbDTZyjWag75ZGouIJ+xe/5iJ1xQrU03a8fAVKfPPQGrn+0qUVB8KyiIVt6a6o75BhzpfXZgZi6+vbkomE/aRwa9cqLQqFI/Sn8lbU95QtUHtnAMPHEkLqmqfyohkjj47Ej4DLeg7B0uTOldMwoKFdblsMG/6lF8FGZJDk5YHPxYL8PjkNFUaybRFb8ko/VK1Zp9sSxkbpOJdRG4gNZqlvXH4Bx2m1Jm6NvLejUHexEgP2t0aznozlCyDQaR3WQO5OBxrtqW8FRCzge6XncpmBaWw==
            </Password>
            2016/06/30 19:09:42Z: Message: Windows is Ready to use

                   Waited 0/300s for instance <i-6c449dc3> to fetch windows admin password.
                   Retrieved Windows password for instance <i-6c449dc3>.
                   EC2 instance <i-6c449dc3> ready.
            D      [WinRM] opening remote shell on http://10.194.14.46:5985/wsman
            D      [WinRM] remote shell FF1880CD-88FA-4A95-AFCF-7BA758C1933B is open on http://10.194.14.46:5985/wsman
            D      [WinRM] negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
            ')
                   [WinRM] Established

            D      [WinRM] reusing existing connection negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
            D      [WinRM] negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)


                       Directory: C:\chef\ohai\hints


                   Mode                LastWriteTime     Length Name
                   ----                -------------     ------ ----
                   -a---         6/30/2016   7:10 PM          0 ec2.json


            D      ec2:create '10.194.14.46'
                   Finished creating <default-windows-2012r2> (2m2.88s).
            -----> Converging <default-windows-2012r2>...
                   Preparing files for transfer
            D      Creating local sandbox in /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872
                   Preparing dna.json
            D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>["recipe[winbox::default]"]}
                   Resolving cookbook dependencies with Berkshelf 4.3.5...
            D      Using Berksfile from /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/winbox/Berksfile
                   Removing non-cookbook files before transfer
                   Preparing validation.pem
            D      Using a dummy validation.pem
                   Preparing client.rb
            D      Creating client.rb from {:node_name=>"default-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
            D      [WinRM] reusing existing connection negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
            D      [WinRM] negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
            function Get-PlatformVersion {
              switch -regex ((get-wmiobject win32_operatingsystem).version) {
                '10\.0\.\d+' {$platform_version = '2012r2'}
                '6\.3\.\d+'  {$platform_version = '2012r2'}
                '6\.2\.\d+'  {$platform_version = '2012'}
                '6\.1\.\d+'  {$platform_version = '2008r2'}
                '6\.0\.\d+'  {$platform_version = '2008'}
              }
              return $platform_version
            }

            function Get-PlatformArchitecture {
              if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                $architecture = 'x86_64'
              } else {
                $architecture = 'i386'
              }
              return $architecture
            }

            function New-Uri {
              param ($baseuri, $newuri)

              try {
              new-object System.Uri $baseuri, $newuri
              }
              catch [System.Management.Automation.MethodInvocationException]{
                Write-Error "$($_.exception.message)"
                throw $_.exception
              }
            }

            function Get-WebContent {
              param ($uri, $filepath)
              $proxy = New-Object -TypeName System.Net.WebProxy
              $wc = new-object System.Net.WebClient
              $proxy.Address = $env:http_proxy
              $wc.Proxy = $proxy

              try {
                if ([string]::IsNullOrEmpty($filepath)) {
                  $wc.downloadstring($uri)
                }
                else {
                  $wc.downloadfile($uri, $filepath)
                }
              }
              catch {
                $exception = $_.Exception
                Write-Host "There was an error: "
                do {
                  Write-Host "`t$($exception.message)"
                  $exception = $exception.innerexception
                } while ($exception)
                throw "Failed to download from $uri."
              }
            }

            function Test-ProjectPackage {
              [cmdletbinding()]
              param ($Path, $Algorithm = 'SHA256', $Hash)

              if (-not (get-command get-filehash))   {
                function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                function Get-FileHash ($Path, $Algorithm) {
                  $Path = (resolve-path $path).providerpath
                  $hash = @{Algorithm = $Algorithm; Path = $Path}
                  use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                    use ($in = (gi $path).OpenRead()) {
                      $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                    }
                  }
                  new-object PSObject -Property $hash
                }
              }
              Write-Verbose "Testing the $Algorithm hash for $path."
              $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
              Write-Verbose "`tDesired Hash - '$hash'"
              Write-Verbose "`tActual Hash  - '$ActualHash'"
              $Valid = $ActualHash -eq $Hash
              if (-not $Valid) {
                Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
              }
              return $Valid
            }

            function Get-ProjectMetadata {
              <#
                .SYNOPSIS
                Get metadata for a Chef Software, Inc. project
                .DESCRIPTION
                Get metadata for project
                .EXAMPLE
                iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                Gets the download url and SHA256 checksum for the latest stable release of Chef.
                .EXAMPLE
                iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
              #>
              [cmdletbinding()]
              param (
                # Base url to retrieve metadata from.
                [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                [string]
                # Project to install
                [string]
                $project = 'chef',
                # Version of the application to install
                # This parameter is optional, if not supplied it will provide the latest version,
                # and if an iteration number is not specified, it will grab the latest available iteration.
                # Partial version numbers are also acceptable (using v=11
                # will grab the latest 11.x client which matches the other flags).
                [string]
                $version,
                # Release channel to install from
                $channel = 'unstable',
                # The following legacy switches are just aliases for the current channel
                [switch]
                $prerelease,
                [switch]
                $nightlies,
                [validateset('auto', 'i386', 'x86_64')]
                [string]
                $architecture = 'auto'
              )

              # PowerShell is only on Windows ATM
              $platform = 'windows'
              Write-Verbose "Platform: $platform"

              $platform_version = Get-PlatformVersion
              Write-Verbose "Platform Version: $platform_version"

              if ($architecture -eq 'auto') {
                $architecture = Get-PlatformArchitecture
              }

              Write-Verbose "Architecture: $architecture"
              Write-Verbose "Project: $project"


                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 16b55cbf511b3989b006c98c940f8230858cf6eba81b6ec9793912d686b66885" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.9/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.10/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.11/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ios_xr/6/chef-12.12.10-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f8f5e1bc424c103f9423aa7b4ed1d2dfc7bd7e1132c0af9c34c78caaf7631a9b" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/nexus/7/chef-12.12.10-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 e03a7b07f699d96ce4f2093f8dd4be61fc8547860fa52d19ad0f0394fa488e66" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 76ea4ba096b432e6544be0dd8ab04c201aeaf6343965b0f5cd2cc1fd3bb957e1" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 746a2030bb5e078a525051508253dd70ae70d8999c89b2f95de3f368b98d64d9" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 eb0627c6f828cd08d95d4822874412ab6a4fe8fd6e8f29721ce0953def3fb0ed" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 41676f26ce135282cbc09cb3f9de6c04dfdec964547fdb995318fe659f3166f9" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 b291ce4b5c01fb87dd98033e06c27e313c740b3139ebc30d33dd25154d0edd73" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 fedff09be8b6b3bad5f33bb0f675cd240a3b653ce7ce7e9236f888b28b1cea92" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 83a6de2ac1484959c90b830d70cf6cef8528ec89a1f416d95d314b23b82efe21" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 a72febfdba2d28ff67f9540c554c6f94b60f9781f31c791355e0e0f55cdbc86a" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 96af6e90f6ff3876d357859544bea71c24c6dc4d92eb098a3ae3f36b45b3dac6" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 bf531b332f24a1f4d5cc5d43597443714aef3a801cd4b4edf45644132a26a276" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 d3a5206694949575e519354f8e121703de2e75940446a2d7f58013affe96c656" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/6.1/chef-12.12.10-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/7.1/chef-12.12.10-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" | out-file "$artifact_info_dir/artifact_info" -Append


              $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

              $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

              Write-Verbose "Project details: "
              foreach ($key in $package_metadata.keys) {
                Write-Verbose "`t$key = $($package_metadata[$key])"
              }
              $package_metadata
            }

            function Install-Project {
              <#
                .SYNOPSIS
                Install a Chef Software, Inc. product
                .DESCRIPTION
                Install a Chef Software, Inc. product
                .EXAMPLE
                iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                Installs the latest stable version of Chef.
                .EXAMPLE
                iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                Installs the latest integration build of the Chef Development Kit
              #>
              [cmdletbinding(SupportsShouldProcess=$true)]
              param (
                # Project to install
                [string]
                $project = 'chef',
                # Release channel to install from
                [validateset('current', 'stable', 'unstable')]
                [string]
                $channel = 'stable',
                # Version of the application to install
                # This parameter is optional, if not supplied it will provide the latest version,
                # and if an iteration number is not specified, it will grab the latest available iteration.
                # Partial version numbers are also acceptable (using v=11
                # will grab the latest 11.x client which matches the other flags).
                [string]
                $version,
                # Full path for the downloaded installer.
                [string]
                $filename,
                # Full path to the location to download the installer
                [string]
                $download_directory = $env:temp,
                # The following legacy switches are just aliases for the current channel
                [switch]
                $prerelease,
                [switch]
                $nightlies,
                [validateset('auto', 'i386', 'x86_64')]
                [string]
                $architecture = 'auto'
              )

              $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

              if (-not [string]::IsNullOrEmpty($filename)) {
                $download_directory = split-path $filename
                $filename = split-path $filename -leaf
                if ([string]::IsNullOrEmpty($download_directory)) {
                  $download_directory = $pwd
                }
              }
              else {
                $filename = ($package_metadata.url -split '/')[-1]
              }
              Write-Verbose "Download directory: $download_directory"
              Write-Verbose "Filename: $filename"

              if (-not (test-path $download_directory)) {
                mkdir $download_directory
              }
              $download_directory = (resolve-path $download_directory).providerpath
              $download_destination = join-path $download_directory $filename

              if ((test-path $download_destination) -and
                (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                Write-Verbose "Found existing valid installer at $download_destination."
              }
              else {
                if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                  Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                  Get-WebContent $package_metadata.url -filepath $download_destination
                }
              }

              if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                  Write-Host "Installing $project from $download_destination"
                  $installingProject = $True
                  $installAttempts = 0
                  while ($installingProject) {
                    $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                    $p.WaitForExit()
                    if ($p.ExitCode -eq 1618) {
                      Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                      continue
                    } elseif ($p.ExitCode -ne 0) {
                      throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                    }
                    $installingProject = $False
                  }
                }
                else {
                  throw "Failed to validate the downloaded installer for $project."
                }
              }
            }
            set-alias install -value Install-Project
            export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

            }

            install -project chef -version 12.12.10 -channel unstable
            )
            D      creating hash for file $env:TEMP/default-windows-2012r2-long_script.ps1
            D      Running check_files.ps1
            D      @{
            D        "ee541b042a0f0ef2da5f8f2861cc4131" = @{
            D          "target" = "$env:TEMP/default-windows-2012r2-long_script.ps1";
            D          "src_basename" = "default-windows-2012r2-long_script.ps1";
            D          "dst" = "$env:TEMP/default-windows-2012r2-long_script.ps1"
            D        }
            D      }
            D      [WinRM] opening new shell since the current one failed
            D      [WinRM] opening remote shell on http://10.194.14.46:5985/wsman
            D      [WinRM] remote shell C5287A6B-6D6B-4A3A-BEE6-E834FABD96D7 is open on http://10.194.14.46:5985/wsman
            D      Parsing CSV Response
            D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
            "False","ee541b042a0f0ef2da5f8f2861cc4131",,"True","False","False"

            D      Uploading /tmp/cheftest/kitchen-long-script20160630-4924-g85am7/default-windows-2012r2-long_script.ps1 to encoded tmpfile $env:TEMP\b64-ee541b042a0f0ef2da5f8f2861cc4131.txt
            D      Finished uploading /tmp/cheftest/kitchen-long-script20160630-4924-g85am7/default-windows-2012r2-long_script.ps1 to encoded tmpfile $env:TEMP\b64-ee541b042a0f0ef2da5f8f2861cc4131.txt (38.844 KB over 5 chunks) in (0m0.48s)
            D      Running decode_files.ps1
            D      @{
            D        "$env:TEMP\b64-ee541b042a0f0ef2da5f8f2861cc4131.txt" = @{
            D          "dst" = "$env:TEMP/default-windows-2012r2-long_script.ps1"
            D        }
            D      }
            D      Parsing CSV Response
            D      "src_md5","tmpzip","verifies","tmpfile","dst_md5","dst"
            "ee541b042a0f0ef2da5f8f2861cc4131",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-ee541b042a0f0ef2da5f8f2861cc4131.txt","ee541b042a0f0ef2da5f8f2861cc4131","C:\Users\ADMINI~1\AppData\Local\Temp/default-windows-2012r2-long_script.ps1"

            D      Uploaded 1 items dirty_check: (0m0.77s) stream_files: (0m0.48s) decode: (0m0.90s)

                   ModuleType Version    Name                                ExportedCommands
                   ---------- -------    ----                                ----------------
                   Script     0.0        Omnitruck                           {Get-ProjectMetada...
                   Installing chef from C:\Users\ADMINI~1\AppData\Local\Temp\chef-client-12.12.10-1-x64.msi
            D      [WinRM] retrying receive request after timeout


            D      [WinRM] negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($dirs = @("$env:TEMP\kitchen\clients", "$env:TEMP\kitchen\cookbooks", "$env:TEMP\kitchen\data", "$env:TEMP\kitchen\data_bags", "$env:TEMP\kitchen\encrypted_data_bag_secret", "$env:TEMP\kitchen\environments", "$env:TEMP\kitchen\roles")
            $root_path = "$env:TEMP\kitchen"

            Function Delete-AllDirs($dirs) {
              $dirs | ForEach-Object {
                if (Test-Path ($path = Unresolve-Path $_)) { Remove-Item $path -Recurse -Force }
              }
            }

            Function Unresolve-Path($p) {
              if ($p -eq $null) { return $null }
              else { return $ExecutionContext.SessionState.Path.GetUnresolvedProviderPathFromPSPath($p) }
            }

            Function Make-RootPath($p) {
              $p = Unresolve-Path $p
              if (-Not (Test-Path $p)) { New-Item $p -ItemType directory | Out-Null }
            }

            Delete-AllDirs $dirs
            Make-RootPath $root_path
            )
                   Transferring files to <default-windows-2012r2>
            D      creating hash for file $env:TEMP\kitchen
            D      creating hash for file $env:TEMP\kitchen
            D      creating hash for directory $env:TEMP\kitchen
            D      Populating files
            D      === All files added.
            D      creating hash for file $env:TEMP\kitchen
            D      creating hash for directory $env:TEMP\kitchen
            D      Populating files
            D      +++ Adding build-essential/README.md
            D      +++ Adding build-essential/attributes/default.rb
            D      +++ Adding build-essential/libraries/matchers.rb
            D      +++ Adding build-essential/libraries/xcode_command_line_tools.rb
            D      +++ Adding build-essential/metadata.json
            D      +++ Adding build-essential/recipes/_windows.rb
            D      +++ Adding build-essential/recipes/default.rb
            D      +++ Adding build-essential/resources/build_essential.rb
            D      +++ Adding chef_handler/README.md
            D      +++ Adding chef_handler/attributes/default.rb
            D      +++ Adding chef_handler/files/default/handlers/README
            D      +++ Adding chef_handler/libraries/helpers.rb
            D      +++ Adding chef_handler/libraries/matchers.rb
            D      +++ Adding chef_handler/metadata.json
            D      +++ Adding chef_handler/providers/default.rb
            D      +++ Adding chef_handler/recipes/default.rb
            D      +++ Adding chef_handler/recipes/json_file.rb
            D      +++ Adding chef_handler/resources/default.rb
            D      +++ Adding compat_resource/README.md
            D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/constants.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/delayed_evaluator.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/dsl/core.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/dsl/declare_resource.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/dsl/recipe.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/mixin/lazy_module_include.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/mixin/notifying_block.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/mixin/params_validate.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/mixin/powershell_out.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/mixin/properties.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/property.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/provider/noop.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/provider.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/resource/action_class.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/resource.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/resource_builder.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/mixin/properties.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/exceptions.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/log.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/mixin/params_validate.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/property.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/provider.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/recipe.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/resource/lwrp_base.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/resource.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/resource_builder.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/resource_collection/resource_list.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/resource_collection/resource_set.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/resource_collection.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/run_context.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/property.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/recipe.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/resource/lwrp_base.rb
            D      +++ Adding compat_resource/files/lib/chef_compat/resource.rb
            D      +++ Adding compat_resource/files/lib/compat_resource/gemspec.rb
            D      +++ Adding compat_resource/files/lib/compat_resource/version.rb
            D      +++ Adding compat_resource/files/lib/compat_resource.rb
            D      +++ Adding compat_resource/files/spec/cookbook_spec.rb
            D      +++ Adding compat_resource/files/spec/data/Gemfile
            D      +++ Adding compat_resource/files/spec/data/Gemfile.lock
            D      +++ Adding compat_resource/files/spec/data/config.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/cloning/metadata.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/cloning/providers/resource.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/cloning/recipes/default.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/cloning/resources/resource.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/future/libraries/future_custom_resource.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/future/libraries/super_properties.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/future/metadata.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/future/recipes/declare_resource.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/future/resources/resource.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/future/resources/super_resource.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/hybrid/libraries/normal_hwrp.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/hybrid/metadata.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/hybrid/providers/resource.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/hybrid/resources/resource.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/normal/libraries/normal_hwrp.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/normal/metadata.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/normal/providers/resource.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/normal/recipes/declare_resource.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/normal/resources/resource.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/notifications/metadata.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/notifications/recipes/default.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/notifications/resources/resource.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/test/metadata.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/test/recipes/default.rb
            D      +++ Adding compat_resource/files/spec/data/cookbooks/test/recipes/test.rb
            D      +++ Adding compat_resource/files/spec/data/nodes/ettores-mbp.lan.json
            D      +++ Adding compat_resource/files/spec/spec_helper.rb
            D      +++ Adding compat_resource/libraries/autoload.rb
            D      +++ Adding compat_resource/metadata.json
            D      +++ Adding dmg/README.md
            D      +++ Adding dmg/attributes/default.rb
            D      +++ Adding dmg/libraries/matchers.rb
            D      +++ Adding dmg/metadata.json
            D      +++ Adding dmg/providers/package.rb
            D      +++ Adding dmg/recipes/default.rb
            D      +++ Adding dmg/resources/package.rb
            D      +++ Adding git/README.md
            D      +++ Adding git/attributes/default.rb
            D      +++ Adding git/libraries/helpers.rb
            D      +++ Adding git/libraries/matchers.rb
            D      +++ Adding git/libraries/provider_git_client.rb
            D      +++ Adding git/libraries/provider_git_client_osx.rb
            D      +++ Adding git/libraries/provider_git_client_package.rb
            D      +++ Adding git/libraries/provider_git_client_source.rb
            D      +++ Adding git/libraries/provider_git_client_windows.rb
            D      +++ Adding git/libraries/provider_git_service.rb
            D      +++ Adding git/libraries/provider_git_service_xinetd.rb
            D      +++ Adding git/libraries/resource_git_client.rb
            D      +++ Adding git/libraries/resource_git_service.rb
            D      +++ Adding git/libraries/z_provider_mapping.rb
            D      +++ Adding git/metadata.json
            D      +++ Adding git/providers/config.rb
            D      +++ Adding git/recipes/default.rb
            D      +++ Adding git/recipes/package.rb
            D      +++ Adding git/recipes/server.rb
            D      +++ Adding git/recipes/source.rb
            D      +++ Adding git/recipes/windows.rb
            D      +++ Adding git/resources/config.rb
            D      +++ Adding git/templates/default/git-xinetd.d.erb
            D      +++ Adding git/templates/default/sv-git-daemon-log-run.erb
            D      +++ Adding git/templates/default/sv-git-daemon-run.erb
            D      +++ Adding mingw/README.md
            D      +++ Adding mingw/files/default/bash.bat
            D      +++ Adding mingw/files/default/custom-upgrade.sh
            D      +++ Adding mingw/files/default/pthread.h
            D      +++ Adding mingw/files/default/time.h
            D      +++ Adding mingw/libraries/_helper.rb
            D      +++ Adding mingw/metadata.json
            D      +++ Adding mingw/recipes/default.rb
            D      +++ Adding mingw/resources/get.rb
            D      +++ Adding mingw/resources/msys2_package.rb
            D      +++ Adding mingw/resources/tdm_gcc.rb
            D      +++ Adding seven_zip/README.md
            D      +++ Adding seven_zip/attributes/default.rb
            D      +++ Adding seven_zip/metadata.json
            D      +++ Adding seven_zip/providers/archive.rb
            D      +++ Adding seven_zip/recipes/default.rb
            D      +++ Adding seven_zip/resources/archive.rb
            D      +++ Adding winbox/README.md
            D      +++ Adding winbox/attributes/debugger_install_path.rb
            D      +++ Adding winbox/attributes/editor.rb
            D      +++ Adding winbox/files/default/ConEmu.xml
            D      +++ Adding winbox/files/default/chef-dk.ico
            D      +++ Adding winbox/files/default/get-help-full.ps1
            D      +++ Adding winbox/files/default/install.ps1
            D      +++ Adding winbox/files/default/set-location-docs.ps1
            D      +++ Adding winbox/files/default/start-chefdk.ps1
            D      +++ Adding winbox/files/default/vscode-keybindings.json
            D      +++ Adding winbox/files/default/vscode-settings.json
            D      +++ Adding winbox/files/default/winbox-ps-profile.ps1
            D      +++ Adding winbox/libraries/executable_finder.rb
            D      +++ Adding winbox/libraries/git_information.rb
            D      +++ Adding winbox/metadata.json
            D      +++ Adding winbox/recipes/chefdk.rb
            D      +++ Adding winbox/recipes/chefdk_shortcut.rb
            D      +++ Adding winbox/recipes/chocolatey_install.rb
            D      +++ Adding winbox/recipes/console.rb
            D      +++ Adding winbox/recipes/debugger.rb
            D      +++ Adding winbox/recipes/default.rb
            D      +++ Adding winbox/recipes/editor.rb
            D      +++ Adding winbox/recipes/powershell_dev.rb
            D      +++ Adding winbox/recipes/readline.rb
            D      +++ Adding winbox/recipes/vscode_emacs.rb
            D      +++ Adding windows/README.md
            D      +++ Adding windows/attributes/default.rb
            D      +++ Adding windows/files/default/handlers/windows_reboot_handler.rb
            D      +++ Adding windows/libraries/feature_base.rb
            D      +++ Adding windows/libraries/matchers.rb
            D      +++ Adding windows/libraries/powershell_helper.rb
            D      +++ Adding windows/libraries/powershell_out.rb
            D      +++ Adding windows/libraries/registry_helper.rb
            D      +++ Adding windows/libraries/version.rb
            D      +++ Adding windows/libraries/windows_architecture_helper.rb
            D      +++ Adding windows/libraries/windows_helper.rb
            D      +++ Adding windows/libraries/windows_package.rb
            D      +++ Adding windows/libraries/windows_privileged.rb
            D      +++ Adding windows/libraries/wmi_helper.rb
            D      +++ Adding windows/metadata.json
            D      +++ Adding windows/providers/auto_run.rb
            D      +++ Adding windows/providers/batch.rb
            D      +++ Adding windows/providers/certificate.rb
            D      +++ Adding windows/providers/certificate_binding.rb
            D      +++ Adding windows/providers/feature_dism.rb
            D      +++ Adding windows/providers/feature_powershell.rb
            D      +++ Adding windows/providers/feature_servermanagercmd.rb
            D      +++ Adding windows/providers/font.rb
            D      +++ Adding windows/providers/http_acl.rb
            D      +++ Adding windows/providers/pagefile.rb
            D      +++ Adding windows/providers/path.rb
            D      +++ Adding windows/providers/printer.rb
            D      +++ Adding windows/providers/printer_port.rb
            D      +++ Adding windows/providers/reboot.rb
            D      +++ Adding windows/providers/registry.rb
            D      +++ Adding windows/providers/shortcut.rb
            D      +++ Adding windows/providers/task.rb
            D      +++ Adding windows/providers/zipfile.rb
            D      +++ Adding windows/recipes/default.rb
            D      +++ Adding windows/recipes/reboot_handler.rb
            D      +++ Adding windows/resources/auto_run.rb
            D      +++ Adding windows/resources/batch.rb
            D      +++ Adding windows/resources/certificate.rb
            D      +++ Adding windows/resources/certificate_binding.rb
            D      +++ Adding windows/resources/feature.rb
            D      +++ Adding windows/resources/font.rb
            D      +++ Adding windows/resources/http_acl.rb
            D      +++ Adding windows/resources/pagefile.rb
            D      +++ Adding windows/resources/path.rb
            D      +++ Adding windows/resources/printer.rb
            D      +++ Adding windows/resources/printer_port.rb
            D      +++ Adding windows/resources/reboot.rb
            D      +++ Adding windows/resources/registry.rb
            D      +++ Adding windows/resources/shortcut.rb
            D      +++ Adding windows/resources/task.rb
            D      +++ Adding windows/resources/zipfile.rb
            D      +++ Adding yum/README.md
            D      +++ Adding yum/attributes/main.rb
            D      +++ Adding yum/libraries/matchers.rb
            D      +++ Adding yum/metadata.json
            D      +++ Adding yum/providers/globalconfig.rb
            D      +++ Adding yum/providers/repository.rb
            D      +++ Adding yum/recipes/default.rb
            D      +++ Adding yum/recipes/dnf_yum_compat.rb
            D      +++ Adding yum/resources/globalconfig.rb
            D      +++ Adding yum/resources/repository.rb
            D      +++ Adding yum/templates/default/main.erb
            D      +++ Adding yum/templates/default/repo.erb
            D      +++ Adding yum-epel/README.md
            D      +++ Adding yum-epel/attributes/default.rb
            D      +++ Adding yum-epel/attributes/epel-debuginfo.rb
            D      +++ Adding yum-epel/attributes/epel-source.rb
            D      +++ Adding yum-epel/attributes/epel-testing-debuginfo.rb
            D      +++ Adding yum-epel/attributes/epel-testing-source.rb
            D      +++ Adding yum-epel/attributes/epel-testing.rb
            D      +++ Adding yum-epel/attributes/epel.rb
            D      +++ Adding yum-epel/metadata.json
            D      +++ Adding yum-epel/recipes/default.rb
            D      === All files added.
            D      Running check_files.ps1
            D      @{
            D        "a86f70dc25c9c07f2959adeb0ed8a08c" = @{
            D          "target" = "$env:TEMP\kitchen";
            D          "src_basename" = "dna.json";
            D          "dst" = "$env:TEMP\kitchen"
            D        };
            D        "b8a32ad42457120c47ccf2013d837e5d" = @{
            D          "target" = "$env:TEMP\kitchen";
            D          "src_basename" = "client.rb";
            D          "dst" = "$env:TEMP\kitchen"
            D        };
            D        "76cdb2bad9582d23c1f6f4d868218d6c" = @{
            D          "target" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip";
            D          "src_basename" = "cache";
            D          "dst" = "$env:TEMP\kitchen\cache"
            D        };
            D        "49abb94825cb80b9a9cd59e5f76daf4a" = @{
            D          "target" = "$env:TEMP\kitchen";
            D          "src_basename" = "validation.pem";
            D          "dst" = "$env:TEMP\kitchen"
            D        };
            D        "84a924240051e1b98a005b4b4aab8d67" = @{
            D          "target" = "$env:TEMP\winrm-upload\tmpzip-84a924240051e1b98a005b4b4aab8d67.zip";
            D          "src_basename" = "cookbooks";
            D          "dst" = "$env:TEMP\kitchen\cookbooks"
            D        }
            D      }
            D      Parsing CSV Response
            D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
            "False","84a924240051e1b98a005b4b4aab8d67",,"True","False","False"
            "False","a86f70dc25c9c07f2959adeb0ed8a08c",,"True","False","True"
            "False","76cdb2bad9582d23c1f6f4d868218d6c",,"True","False","False"
            "False","49abb94825cb80b9a9cd59e5f76daf4a",,"True","False","True"
            "False","b8a32ad42457120c47ccf2013d837e5d",,"True","False","True"

            D      Uploading /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872/dna.json to encoded tmpfile $env:TEMP\b64-a86f70dc25c9c07f2959adeb0ed8a08c.txt
            D      Finished uploading /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872/dna.json to encoded tmpfile $env:TEMP\b64-a86f70dc25c9c07f2959adeb0ed8a08c.txt (0.12 KB over 1 chunks) in (0m0.06s)
            D      Uploading /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872/client.rb to encoded tmpfile $env:TEMP\b64-b8a32ad42457120c47ccf2013d837e5d.txt
            D      Finished uploading /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872/client.rb to encoded tmpfile $env:TEMP\b64-b8a32ad42457120c47ccf2013d837e5d.txt (1.104 KB over 1 chunks) in (0m0.07s)
            D      Uploading /tmp/cheftest/tmpzip-20160630-4924-1erptln.zip to encoded tmpfile $env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt
            D      Finished uploading /tmp/cheftest/tmpzip-20160630-4924-1erptln.zip to encoded tmpfile $env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt (0.028 KB over 1 chunks) in (0m0.07s)
            D      Uploading /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872/validation.pem to encoded tmpfile $env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt
            D      Finished uploading /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872/validation.pem to encoded tmpfile $env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt (2.236 KB over 1 chunks) in (0m0.20s)
            D      Uploading /tmp/cheftest/tmpzip-20160630-4924-1v9qc5f.zip to encoded tmpfile $env:TEMP\b64-84a924240051e1b98a005b4b4aab8d67.txt
            D      Wrote chunk 25 for $env:TEMP\b64-84a924240051e1b98a005b4b4aab8d67.txt
            D      Wrote chunk 50 for $env:TEMP\b64-84a924240051e1b98a005b4b4aab8d67.txt
            D      Finished uploading /tmp/cheftest/tmpzip-20160630-4924-1v9qc5f.zip to encoded tmpfile $env:TEMP\b64-84a924240051e1b98a005b4b4aab8d67.txt (430.132 KB over 54 chunks) in (0m5.02s)
            D      Running decode_files.ps1
            D      @{
            D        "$env:TEMP\b64-a86f70dc25c9c07f2959adeb0ed8a08c.txt" = @{
            D          "dst" = "$env:TEMP\kitchen/dna.json"
            D        };
            D        "$env:TEMP\b64-b8a32ad42457120c47ccf2013d837e5d.txt" = @{
            D          "dst" = "$env:TEMP\kitchen/client.rb"
            D        };
            D        "$env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt" = @{
            D          "dst" = "$env:TEMP\kitchen\cache";
            D          "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip"
            D        };
            D        "$env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt" = @{
            D          "dst" = "$env:TEMP\kitchen/validation.pem"
            D        };
            D        "$env:TEMP\b64-84a924240051e1b98a005b4b4aab8d67.txt" = @{
            D          "dst" = "$env:TEMP\kitchen\cookbooks";
            D          "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-84a924240051e1b98a005b4b4aab8d67.zip"
            D        }
            D      }
            D      Parsing CSV Response
            D      "src_md5","tmpzip","verifies","tmpfile","dst_md5","dst"
            "76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip","True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt","76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache"
            "a86f70dc25c9c07f2959adeb0ed8a08c",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-a86f70dc25c9c07f2959adeb0ed8a08c.txt","a86f70dc25c9c07f2959adeb0ed8a08c","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/dna.json"
            "84a924240051e1b98a005b4b4aab8d67","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-84a924240051e1b98a005b4b4aab8d67.zip","True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-84a924240051e1b98a005b4b4aab8d67.txt","84a924240051e1b98a005b4b4aab8d67","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cookbooks"
            "49abb94825cb80b9a9cd59e5f76daf4a",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt","49abb94825cb80b9a9cd59e5f76daf4a","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/validation.pem"
            "b8a32ad42457120c47ccf2013d837e5d",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-b8a32ad42457120c47ccf2013d837e5d.txt","b8a32ad42457120c47ccf2013d837e5d","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/client.rb"

            D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160630-4924-1erptln.zip
            D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160630-4924-1v9qc5f.zip
            D      Uploaded 5 items dirty_check: (0m1.64s) stream_files: (0m5.44s) decode: (0m2.58s)
            D      Transfer complete
            D      [WinRM] negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($env:PATH = [System.Environment]::GetEnvironmentVariable("PATH","Machine")

            & $env:systemdrive\opscode\chef\bin\chef-client.bat --local-mode --config $env:TEMP\kitchen\client.rb --log_level auto --force-formatter --no-color --json-attributes $env:TEMP\kitchen\dna.json --chef-zero-port 8889)
                   Starting Chef Client, version 12.12.10
                   Creating a new client identity for default-windows-2012r2 using the validator key.
                   resolving cookbooks for run list: ["winbox::default"]
                   Synchronizing Cookbooks:
                     - winbox (0.9.105)
                     - git (4.5.0)
                     - windows (1.44.1)
                     - build-essential (6.0.0)
                     - dmg (2.4.0)
                     - yum-epel (0.7.0)
                     - chef_handler (1.4.0)
                     - seven_zip (2.0.1)
                     - mingw (1.2.2)
                     - compat_resource (12.10.6)
                     - yum (3.11.0)
                   Installing Cookbook Gems:
                   Compiling Cookbooks...
                   Converging 25 resources
                   Recipe: git::windows
                     * git_client[default] action install[2016-06-30T19:12:42+00:00] WARN: Please use the package resource available in Chef Client 12.6.
                   windows_package will be removed in the next major version release
                   of the Windows cookbook.


                       * windows_package[Git version 2.8.1] action install
                       Recipe: <Dynamically Defined Resource>
                         * remote_file[C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache\package\Git-2.8.1-64-bit.exe] action create
                    - create new file C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache\package\Git-2.8.1-64-bit.exe
                    - update content in file C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache\package\Git-2.8.1-64-bit.exe from none to 5e5283
                    (file sizes exceed 10000000 bytes, diff output suppressed)
                         - install version latest of package Git version 2.8.1
                       * ruby_block[Add Git Path] action nothing (skipped due to action :nothing)
                       * windows_path[C:\Program Files\Git\Cmd] action add
                         * env[path] action modify

                         * ruby_block[fix ruby ENV['PATH']] action run
                    - execute the ruby block fix ruby ENV['PATH']
                         * ruby_block[fix ruby ENV['PATH']] action nothing (skipped due to action :nothing)

                       * ruby_block[Add Git Path] action create
                         - execute the ruby block Add Git Path

                   Recipe: winbox::chocolatey_install
                     * windows_path[update_path_for_system] action add
                       * env[path] action modify

                       * ruby_block[fix ruby ENV['PATH']] action run
                         - execute the ruby block fix ruby ENV['PATH']
                       * ruby_block[fix ruby ENV['PATH']] action nothing (skipped due to action :nothing)

                     * ruby_block[add_chocolatey_path] action run (skipped due to not_if)
                     * powershell_script[chocolatey_install] action run
                       - execute "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-1tnyltv.ps1"
                   Recipe: winbox::powershell_dev
                     * powershell_script[ExecutionPolicyUnrestricted] action run (skipped due to only_if)
                     * powershell_script[ExecutionPolicyUnrestrictedX86] action run
                       - execute "C:\Windows\SysWOW64\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-10d2yd3.ps1"
                     * cookbook_file[C:\Users\Administrator/winbox-ps-profile.ps1] action create_if_missing
                       - create new file C:\Users\Administrator/winbox-ps-profile.ps1
                       - update content in file C:\Users\Administrator/winbox-ps-profile.ps1 from none to 19a092
                       --- C:\Users\Administrator/winbox-ps-profile.ps1  2016-06-30 19:13:23.000000000 +0000
                       +++ C:\Users\Administrator/chef-winbox-ps-profile.ps120160630-4068-1r3as3y  2016-06-30 19:13:23.000000000 +0000
                       @@ -1 +1,89 @@
                       +# WinBox PowerShell profile
                       +#
                       +# Copyright 2015, Adam Edwards
                       +#
                       +# Licensed under the Apache License, Version 2.0 (the "License");
                       +# you may not use this file except in compliance with the License.
                       +# You may obtain a copy of the License at
                       +#
                       +#     http://www.apache.org/licenses/LICENSE-2.0
                       +#
                       +# Unless required by applicable law or agreed to in writing, software
                       +# distributed under the License is distributed on an "AS IS" BASIS,
                       +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                       +# See the License for the specific language governing permissions and
                       +# limitations under the License.
                       +
                       +# Enable readline support
                       +import-module psreadline
                       +Set-PSReadlineOption -EditMode Emacs
                       +
                       +# Enable posh-git support
                       +if ((get-module -listavailable 'posh-git') -ne $null)
                       +{
                       +    import-module posh-git
                       +}
                       +
                       +# Get the username and whether we're elevated for display
                       +# in the title and prompt
                       +$identity = [Security.Principal.WindowsIdentity]::GetCurrent()
                       +$principal = [Security.Principal.WindowsPrincipal] $identity
                       +$titleprefix = ""
                       +if (test-path variable:/PSDebugContext)
                       +{
                       +    $titleprefix = 'Debug: '
                       +}
                       +else
                       +{
                       +    if ($principal.IsInRole([Security.Principal.WindowsBuiltInRole] "Administrator"))
                       +    {
                       +        $titleprefix = "Administrator: "
                       +    }
                       +}
                       +
                       +#
                       +# The title will look like one of the following:
                       +#
                       +#   myusername@myhost
                       +#   Administrator: myusername@myhost
                       +#
                       +(get-host).ui.rawui.windowtitle = "$titleprefix$($env:username)@$($env:computername)"
                       +
                       +#
                       +# Set a useful two-line prompt that uses color for readability and status.
                       +# The format is 'host: lastexitcode: currentdirectory `newline `username >'.
                       +#
                       +# Here's example output:
                       +#
                       +#   myhost (0x00000001) c:\windows\system32\drivers\etc
                       +#   myuser >
                       +#
                       +function prompt
                       +{
                       +    $lasterror = $?
                       +    $lastexit = $lastexitcode
                       +    if ($lastexit -eq $null) { $lastexit = 0 }
                       +    $errorcolor = 'green'
                       +    $exitcolor = 'green'
                       +    if (! $lasterror) { $errorcolor = 'red' }
                       +    if ($lastexit -ne 0) { $exitcolor = 'red' }
                       +
                       +    write-host -nonewline -foregroundcolor $errorcolor '% '
                       +    write-host -nonewline -foregroundcolor darkyellow "$env:computername "
                       +    write-host -nonewline -foregroundcolor gray "("
                       +    write-host -nonewline -foregroundcolor $exitcolor "0x$(($lastexit).ToString("X8"))"
                       +    write-host -nonewline -foregroundcolor gray ")"
                       +    if ( get-command write-vcsstatus) { Write-VcsStatus }
                       +    write-host -foregroundcolor cyan " $($executionContext.SessionState.Path.CurrentLocation)"
                       +    write-host -nonewline -foregroundcolor darkyellow "$env:username"
                       +    "$('>' * ($nestedPromptLevel + 1)) "
                       +}
                       +
                       +# Make the man alias show full help by default
                       +. ~\get-help-full.ps1
                       +set-alias -option allscope man get-help-full
                       +
                       +# Useful shortcut to get to Documents folder
                       +. ~\set-location-docs.ps1
                       +new-alias docs set-location-docs
                     * cookbook_file[C:\Users\Administrator/get-help-full.ps1] action create
                       - create new file C:\Users\Administrator/get-help-full.ps1
                       - update content in file C:\Users\Administrator/get-help-full.ps1 from none to 7edc66
                       --- C:\Users\Administrator/get-help-full.ps1  2016-06-30 19:13:23.000000000 +0000
                       +++ C:\Users\Administrator/chef-get-help-full.ps120160630-4068-1dunghq  2016-06-30 19:13:23.000000000 +0000
                       @@ -1 +1,30 @@
                       +#
                       +# Copyright 2015, Adam Edwards
                       +#
                       +# Licensed under the Apache License, Version 2.0 (the "License");
                       +# you may not use this file except in compliance with the License.
                       +# You may obtain a copy of the License at
                       +#
                       +#     http://www.apache.org/licenses/LICENSE-2.0
                       +#
                       +# Unless required by applicable law or agreed to in writing, software
                       +# distributed under the License is distributed on an "AS IS" BASIS,
                       +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                       +# See the License for the specific language governing permissions and
                       +# limitations under the License.
                       +
                       +# Shows help page with full help, rather than the
                       +# abbreviated help which is the default for get-help
                       +function get-help-full
                       +{
                       +    try
                       +    {
                       +        get-help @args -full | out-host -paging
                       +    }
                       +    catch [System.Management.Automation.HaltCommandException]
                       +    {
                       +        # Do nothing if the user chooses 'q'
                       +    }
                       +}
                       +
                     * cookbook_file[C:\Users\Administrator/set-location-docs.ps1] action create
                       - create new file C:\Users\Administrator/set-location-docs.ps1
                       - update content in file C:\Users\Administrator/set-location-docs.ps1 from none to 3e28a0
                       --- C:\Users\Administrator/set-location-docs.ps1  2016-06-30 19:13:23.000000000 +0000
                       +++ C:\Users\Administrator/chef-set-location-docs.ps120160630-4068-1rpc0fh  2016-06-30 19:13:23.000000000 +0000
                       @@ -1 +1,31 @@
                       +# Documents directory shortcut
                       +#
                       +# Copyright 2015, Adam Edwards
                       +#
                       +# Licensed under the Apache License, Version 2.0 (the "License");
                       +# you may not use this file except in compliance with the License.
                       +# You may obtain a copy of the License at
                       +#
                       +#     http://www.apache.org/licenses/LICENSE-2.0
                       +#
                       +# Unless required by applicable law or agreed to in writing, software
                       +# distributed under the License is distributed on an "AS IS" BASIS,
                       +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                       +# See the License for the specific language governing permissions and
                       +# limitations under the License.
                       +
                       +# Set the current directory to the location of the
                       +# Documents directory, and also set up an environment
                       +# variables called DOCS.
                       +function set-location-docs
                       +{
                       +
                       +    if ($env:DOCS -eq $null)
                       +    {
                       +        $myDocsPath = [environment]::GetFolderPath("MyDocuments")
                       +        $env:DOCS = $myDocsPath
                       +    }
                       +
                       +    pushd $env:DOCS
                       +}
                     * directory[C:/Users/Administrator/Documents/WindowsPowerShell] action create (up to date)
                     * powershell_script[C:\Users\Administrator\Documents\WindowsPowerShell\Microsoft.PowerShell_profile.ps1] action run (skipped due to not_if)
                   Recipe: winbox::readline
                     * remote_file[C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache\psreadline.zip] action create
                       - create new file C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache\psreadline.zip
                       - update content in file C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache\psreadline.zip from none to 68577a
                       (new content is binary, diff output suppressed)
                     * powershell_script[install_module] action run
                       - execute "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-m6c6sf.ps1"
                   Recipe: winbox::editor
                     * directory[C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/winbox/vscode] action create
                       - create new directory C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/winbox/vscode
                     * remote_file[C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/winbox/vscode/vscodesetup.exe] action create
                       - create new file C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/winbox/vscode/vscodesetup.exe
                       - update content in file C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/winbox/vscode/vscodesetup.exe from none to 3ae51c
                       (file sizes exceed 10000000 bytes, diff output suppressed)
                     * powershell_script[install vscode] action run
                       - execute "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-14y017i.ps1"
                     * env[EDITOR] action create

                   Recipe: winbox::console
                     * cookbook_file[C:\Program Files/conemu/ConEmu.xml] action nothing (skipped due to action :nothing)
            D      [WinRM] retrying receive request after timeout
            D      [WinRM] retrying receive request after timeout
                     * powershell_script[conemu] action run

                       ================================================================================
                       Error executing action `run` on resource 'powershell_script[conemu]'
                       ================================================================================

                       Mixlib::ShellOut::ShellCommandFailed
                       ------------------------------------
                       Expected process to exit with [0], but received '1'
                       ---- Begin output of "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-1u6bnwv.ps1" ----
                       STDOUT: Installing the following packages:
                       conemu
                       By installing you accept licenses for the packages.
                       conemu not installed. An error occurred during installation:
                        The remote server returned an error: (500) Internal Server Error.
                       The install of conemu was NOT successful.
                       conemu not installed. An error occurred during installation:
                        The remote server returned an error: (500) Internal Server Error.

                       Chocolatey installed 0/1 packages. 1 packages failed.
                        See the log for details (C:\ProgramData\chocolatey\logs\chocolatey.log).

                       Failures
                        - conemu - conemu not installed. An error occurred during installation:
                        The remote server returned an error: (500) Internal Server Error.
                       Installing the following packages:
                       conemu
                       By installing you accept licenses for the packages.
                       conemu not installed. An error occurred during installation:
                        The remote server returned an error: (500) Internal Server Error.
                       The install of conemu was NOT successful.
                       conemu not installed. An error occurred during installation:
                        The remote server returned an error: (500) Internal Server Error.

                       Chocolatey installed 0/1 packages. 1 packages failed.
                        See the log for details (C:\ProgramData\chocolatey\logs\chocolatey.log).

                       Failures
                        - conemu - conemu not installed. An error occurred during installation:
                        The remote server returned an error: (500) Internal Server Error.
                       STDERR:
                       ---- End output of "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-1u6bnwv.ps1" ----
                       Ran "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-1u6bnwv.ps1" returned 1

                       Resource Declaration:
                       ---------------------
                       # In C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/cookbooks/winbox/recipes/console.rb

                        27: powershell_script 'conemu' do
                        28:   code <<-EOH
                        29: chocolatey install conemu -y
                        30: if ($LASTEXITCODE -ne 0)
                        31: {
                        32:   $LASTEXITCODE = 0
                        33:   chocolatey install conemu -y
                        34: }
                        35: EOH
                        36:   only_if '(get-wmiobject Win32_MSIResource | Where-Object -Property value -like -Value conemu) -eq $null'
                        37: end
                        38:

                       Compiled Resource:
                       ------------------
                       # Declared in C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/cookbooks/winbox/recipes/console.rb:27:in `from_file'

                       powershell_script("conemu") do
                         action [:run]
                         retries 0
                         retry_delay 2
                         default_guard_interpreter :powershell_script
                         command "conemu"
                         backup 5
                         returns 0
                         code "chocolatey install conemu -y\nif ($LASTEXITCODE -ne 0)\n{\n  $LASTEXITCODE = 0\n  chocolatey install conemu -y\n}\n"
                         interpreter "powershell.exe"
                         declared_type :powershell_script
                         cookbook_name "winbox"
                         recipe_name "console"
                         only_if "(get-wmiobject Win32_MSIResource | Where-Object -Property value -like -Value conemu) -eq $null"
                       end

                       Platform:
                       ---------
                       x64-mingw32

                   Starting audit phase

                   Finished in 0.001 seconds (files took 0.71177 seconds to load)
                   0 examples, 0 failures
                   Auditing complete

                   Running handlers:
                   [2016-06-30T19:15:45+00:00] ERROR: Running exception handlers
                   Running handlers complete
                   [2016-06-30T19:15:45+00:00] ERROR: Exception handlers complete
                   Chef Client failed. 21 resources updated in 03 minutes 38 seconds
                   [2016-06-30T19:15:45+00:00] ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json
                   [2016-06-30T19:15:45+00:00] FATAL: Stacktrace dumped to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/chef-stacktrace.out
                   [2016-06-30T19:15:45+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
                   [2016-06-30T19:15:45+00:00] FATAL: Chef::Exceptions::RunFailedWrappingError: Found 1 errors, they are stored in the backtrace
            $$$$$$ C:/opscode/chef/embedded/lib/ruby/2.1.0/x64-mingw32/dl.so: warning: already initialized constant DL::RUBY_FREE
            $$$$$$ C:/opscode/chef/embedded/lib/ruby/gems/2.1.0/gems/net-ssh-3.2.0/lib/net/ssh/authentication/pageant.rb:16: warning: previous definition of RUBY_FREE was here
            $$$$$$ DL is deprecated, please use Fiddle
            D      Cleaning up local sandbox in /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872
            D      Converge failed on instance <default-windows-2012r2>.
            D      ------Exception-------
            D      Class: Kitchen::InstanceFailure
            D      Message: Converge failed on instance <default-windows-2012r2>.  Please see .kitchen/logs/default-windows-2012r2.log for more details
            D      ----------------------
            D      ------Backtrace-------
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/provisioner/base.rb:76:in `rescue in call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/provisioner/base.rb:79:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:373:in `block in converge_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:513:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:513:in `synchronize_or_call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:478:in `block in action'
            D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:477:in `action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:369:in `converge_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:348:in `block in transition_to'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:347:in `each'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:347:in `transition_to'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:138:in `converge'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:194:in `public_send'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:194:in `run_action_in_thread'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
            D      ----End Backtrace-----
            D      ---Nested Exception---
            D      Class: Kitchen::ActionFailed
            D      Message: WinRM exited (1) for command: [$env:PATH = [System.Environment]::GetEnvironmentVariable("PATH","Machine")

            & $env:systemdrive\opscode\chef\bin\chef-client.bat --local-mode --config $env:TEMP\kitchen\client.rb --log_level auto --force-formatter --no-color --json-attributes $env:TEMP\kitchen\dna.json --chef-zero-port 8889]
            D      ----------------------
            D      ------Backtrace-------
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/provisioner/base.rb:76:in `rescue in call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/provisioner/base.rb:79:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:373:in `block in converge_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:513:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:513:in `synchronize_or_call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:478:in `block in action'
            D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:477:in `action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:369:in `converge_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:348:in `block in transition_to'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:347:in `each'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:347:in `transition_to'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:138:in `converge'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:194:in `public_send'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:194:in `run_action_in_thread'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
            D      ----End Backtrace-----
            D      [WinRM] closing remote shell FF1880CD-88FA-4A95-AFCF-7BA758C1933B on http://10.194.14.46:5985/wsman
            D      [WinRM] closing remote shell C5287A6B-6D6B-4A3A-BEE6-E834FABD96D7 on http://10.194.14.46:5985/wsman
            D      [WinRM] remote shell C5287A6B-6D6B-4A3A-BEE6-E834FABD96D7 closed
            STDERR: >>>>>> Converge failed on instance <default-windows-2012r2>.
            >>>>>> Please see .kitchen/logs/default-windows-2012r2.log for more details
            >>>>>> ------Exception-------
            >>>>>> Class: Kitchen::ActionFailed
            >>>>>> Message: WinRM exited (1) for command: [$env:PATH = [System.Environment]::GetEnvironmentVariable("PATH","Machine")

            & $env:systemdrive\opscode\chef\bin\chef-client.bat --local-mode --config $env:TEMP\kitchen\client.rb --log_level auto --force-formatter --no-color --json-attributes $env:TEMP\kitchen\dna.json --chef-zero-port 8889]
            >>>>>> ----------------------
            ---- End output of bundle exec kitchen converge  -c -l debug ----
            Ran bundle exec kitchen converge  -c -l debug returned 10

            Resource Declaration:
            ---------------------
            # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/libraries/top_cookbooks.rb

             32:     cookbook_kitchen "#{command} winbox" do
             33:       repository "adamedx/winbox"
             34:     end
             35:

            Compiled Resource:
            ------------------
            # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/libraries/top_cookbooks.rb:32:in `block in <class:TopCookbooks>'

            cookbook_kitchen("converge winbox") do
              action [:run]
              updated true
              updated_by_last_action true
              retries 0
              retry_delay 2
              default_guard_interpreter :default
              declared_type :cookbook_kitchen
              cookbook_name "acceptance-cookbook"
              repository "https://github.com/adamedx/winbox.git"
              test_cookbook "winbox"
              repository_root "/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/winbox"
              branch "master"
              command "converge"
              kitchen_options "-c -l debug"
              kitchen_dir "/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/winbox/"
              chef_product "chef"
              env {"BUNDLE_GEMFILE"=>"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/Gemfile", "KITCHEN_YAML"=>"/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/.kitchen.winbox.yml"}
            end


          ================================================================================
          Error executing action `run` on resource 'top_cookbooks[converge]'
          ================================================================================

          Mixlib::ShellOut::ShellCommandFailed
          ------------------------------------
          cookbook_kitchen[converge winbox] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/libraries/top_cookbooks.rb line 32) had an error: Mixlib::ShellOut::ShellCommandFailed: execute[bundle exec kitchen converge  -c -l debug] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 36) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '10'
          ---- Begin output of bundle exec kitchen converge  -c -l debug ----
          STDOUT: -----> Starting Kitchen (v1.9.2)
          D      Berksfile found at /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/winbox/Berksfile, loading Berkshelf
          D      Berkshelf 4.3.5 library loaded
          D      winrm requested, loading winrm gem (["~> 1.6"])
          D      winrm is loaded.
          D      winrm-fs requested, loading winrm-fs gem (["~> 0.4.1"])
          D      winrm-fs is loaded.
          -----> Creating <default-windows-2012r2>...
          D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
          D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
          D      Search returned 3 images:
          D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
          D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
          D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.04.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-04-13T01:30:48.000Z
          D      Image for default-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
                 Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
          D      No SSH username specified: using default username administrator  for image ami-8d0acfed, which we detected as windows 2012r2rtm x86_64.
                 If you are not using an account that qualifies under the AWS
          free-tier, you may be charged to run these suites. The charge
          should be minimal, but neither Test Kitchen nor its maintainers
          are responsible for your incurred costs.

          D      Creating EC2 instance in region us-west-2 with properties:
          D      - instance_type = "m3.large"
          D      - ebs_optimized = false
          D      - image_id = "ami-8d0acfed"
          D      - key_name = "jenkins"
          D      - subnet_id = "subnet-19ac017c"
          D      - private_ip_address = nil
          D      - placement = {:availability_zone=>"us-west-2a"}
          D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
          D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                 Instance <i-6c449dc3> requested.
                 Polling AWS for existence, attempt 0...
                 Attempting to tag the instance, 0 retries
                 EC2 instance <i-6c449dc3> created.
                 Waited 0/300s for instance <i-6c449dc3> to become ready.
                 Waited 5/300s for instance <i-6c449dc3> to become ready.
                 Waited 10/300s for instance <i-6c449dc3> to become ready.
                 Waited 15/300s for instance <i-6c449dc3> to become ready.
                 Waited 20/300s for instance <i-6c449dc3> to become ready.
                 Waited 25/300s for instance <i-6c449dc3> to become ready.
                 Waited 30/300s for instance <i-6c449dc3> to become ready.
                 Waited 35/300s for instance <i-6c449dc3> to become ready.
                 Waited 40/300s for instance <i-6c449dc3> to become ready.
                 Waited 45/300s for instance <i-6c449dc3> to become ready.
                 Waited 50/300s for instance <i-6c449dc3> to become ready.
                 Waited 55/300s for instance <i-6c449dc3> to become ready.
                 Waited 60/300s for instance <i-6c449dc3> to become ready.
                 Waited 65/300s for instance <i-6c449dc3> to become ready.
                 Waited 70/300s for instance <i-6c449dc3> to become ready.
                 Waited 75/300s for instance <i-6c449dc3> to become ready.
                 Waited 80/300s for instance <i-6c449dc3> to become ready.
                 Waited 85/300s for instance <i-6c449dc3> to become ready.
          D      Console output: ---
          2016/06/30 19:09:32Z: EC2ConfigMonitorState: 0
          2016/06/30 19:09:32Z: Windows sysprep configuration complete.
          2016/06/30 19:09:34Z: AMI Origin Version: 2016.06.15
          2016/06/30 19:09:34Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
          2016/06/30 19:09:34Z: OS: Microsoft Windows NT 6.3.9600
          2016/06/30 19:09:34Z: OsVersion: 6.3
          2016/06/30 19:09:34Z: OsProductName: Windows Server 2012 R2 Standard
          2016/06/30 19:09:34Z: OsBuildLabEx: 9600.18292.amd64fre.winblue_ltsb.160330-1744
          2016/06/30 19:09:34Z: Language: en-US
          2016/06/30 19:09:34Z: TimeZone: Coordinated Universal Time
          2016/06/30 19:09:34Z: Offset: UTC 00:00:00
          2016/06/30 19:09:34Z: EC2 Agent: Ec2Config service v3.17.1032
          2016/06/30 19:09:36Z: Message: Waiting for meta-data accessibility...
          2016/06/30 19:09:36Z: Message: Meta-data is now available.
          2016/06/30 19:09:37Z: AMI-ID: ami-8d0acfed
          2016/06/30 19:09:37Z: Instance-ID: i-6c449dc3
          2016/06/30 19:09:38Z: Driver: AWS PV Network Device v7.3.2.0
          2016/06/30 19:09:38Z: Driver: AWS PV Storage Host Adapter v7.3.2.0
          2016/06/30 19:09:38Z: Ec2SetPassword: Enabled
          2016/06/30 19:09:38Z: RDPCERTIFICATE-SUBJECTNAME: WIN-AD14LT2NAIR
          2016/06/30 19:09:38Z: RDPCERTIFICATE-THUMBPRINT: 5B4E827D4E3E68FC34F8D4B3EE68CCEAEB8B292A
          2016/06/30 19:09:41Z: Username: Administrator
          2016/06/30 19:09:41Z: Password: <Password>
          uV1TlEhzdkF6lTTD4gkq0nuBTBH2JeKsWh9LmJGbaOwhiiLtyA7rPAZopsX0kSbDTZyjWag75ZGouIJ+xe/5iJ1xQrU03a8fAVKfPPQGrn+0qUVB8KyiIVt6a6o75BhzpfXZgZi6+vbkomE/aRwa9cqLQqFI/Sn8lbU95QtUHtnAMPHEkLqmqfyohkjj47Ej4DLeg7B0uTOldMwoKFdblsMG/6lF8FGZJDk5YHPxYL8PjkNFUaybRFb8ko/VK1Zp9sSxkbpOJdRG4gNZqlvXH4Bx2m1Jm6NvLejUHexEgP2t0aznozlCyDQaR3WQO5OBxrtqW8FRCzge6XncpmBaWw==
          </Password>
          2016/06/30 19:09:42Z: Message: Windows is Ready to use

                 Waited 0/300s for instance <i-6c449dc3> to fetch windows admin password.
                 Retrieved Windows password for instance <i-6c449dc3>.
                 EC2 instance <i-6c449dc3> ready.
          D      [WinRM] opening remote shell on http://10.194.14.46:5985/wsman
          D      [WinRM] remote shell FF1880CD-88FA-4A95-AFCF-7BA758C1933B is open on http://10.194.14.46:5985/wsman
          D      [WinRM] negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
          ')
                 [WinRM] Established

          D      [WinRM] reusing existing connection negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
          D      [WinRM] negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)


                     Directory: C:\chef\ohai\hints


                 Mode                LastWriteTime     Length Name
                 ----                -------------     ------ ----
                 -a---         6/30/2016   7:10 PM          0 ec2.json


          D      ec2:create '10.194.14.46'
                 Finished creating <default-windows-2012r2> (2m2.88s).
          -----> Converging <default-windows-2012r2>...
                 Preparing files for transfer
          D      Creating local sandbox in /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872
                 Preparing dna.json
          D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>["recipe[winbox::default]"]}
                 Resolving cookbook dependencies with Berkshelf 4.3.5...
          D      Using Berksfile from /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/top-cookbooks/test_run/winbox/Berksfile
                 Removing non-cookbook files before transfer
                 Preparing validation.pem
          D      Using a dummy validation.pem
                 Preparing client.rb
          D      Creating client.rb from {:node_name=>"default-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
          D      [WinRM] reusing existing connection negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
          D      [WinRM] negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
          function Get-PlatformVersion {
            switch -regex ((get-wmiobject win32_operatingsystem).version) {
              '10\.0\.\d+' {$platform_version = '2012r2'}
              '6\.3\.\d+'  {$platform_version = '2012r2'}
              '6\.2\.\d+'  {$platform_version = '2012'}
              '6\.1\.\d+'  {$platform_version = '2008r2'}
              '6\.0\.\d+'  {$platform_version = '2008'}
            }
            return $platform_version
          }

          function Get-PlatformArchitecture {
            if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
              $architecture = 'x86_64'
            } else {
              $architecture = 'i386'
            }
            return $architecture
          }

          function New-Uri {
            param ($baseuri, $newuri)

            try {
            new-object System.Uri $baseuri, $newuri
            }
            catch [System.Management.Automation.MethodInvocationException]{
              Write-Error "$($_.exception.message)"
              throw $_.exception
            }
          }

          function Get-WebContent {
            param ($uri, $filepath)
            $proxy = New-Object -TypeName System.Net.WebProxy
            $wc = new-object System.Net.WebClient
            $proxy.Address = $env:http_proxy
            $wc.Proxy = $proxy

            try {
              if ([string]::IsNullOrEmpty($filepath)) {
                $wc.downloadstring($uri)
              }
              else {
                $wc.downloadfile($uri, $filepath)
              }
            }
            catch {
              $exception = $_.Exception
              Write-Host "There was an error: "
              do {
                Write-Host "`t$($exception.message)"
                $exception = $exception.innerexception
              } while ($exception)
              throw "Failed to download from $uri."
            }
          }

          function Test-ProjectPackage {
            [cmdletbinding()]
            param ($Path, $Algorithm = 'SHA256', $Hash)

            if (-not (get-command get-filehash))   {
              function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
              function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
              function Get-FileHash ($Path, $Algorithm) {
                $Path = (resolve-path $path).providerpath
                $hash = @{Algorithm = $Algorithm; Path = $Path}
                use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                  use ($in = (gi $path).OpenRead()) {
                    $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                  }
                }
                new-object PSObject -Property $hash
              }
            }
            Write-Verbose "Testing the $Algorithm hash for $path."
            $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
            Write-Verbose "`tDesired Hash - '$hash'"
            Write-Verbose "`tActual Hash  - '$ActualHash'"
            $Valid = $ActualHash -eq $Hash
            if (-not $Valid) {
              Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
            }
            return $Valid
          }

          function Get-ProjectMetadata {
            <#
              .SYNOPSIS
              Get metadata for a Chef Software, Inc. project
              .DESCRIPTION
              Get metadata for project
              .EXAMPLE
              iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

              Gets the download url and SHA256 checksum for the latest stable release of Chef.
              .EXAMPLE
              iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

              Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
            #>
            [cmdletbinding()]
            param (
              # Base url to retrieve metadata from.
              [uri]$base_server_uri = 'https://omnitruck.chef.io/',
              [string]
              # Project to install
              [string]
              $project = 'chef',
              # Version of the application to install
              # This parameter is optional, if not supplied it will provide the latest version,
              # and if an iteration number is not specified, it will grab the latest available iteration.
              # Partial version numbers are also acceptable (using v=11
              # will grab the latest 11.x client which matches the other flags).
              [string]
              $version,
              # Release channel to install from
              $channel = 'unstable',
              # The following legacy switches are just aliases for the current channel
              [switch]
              $prerelease,
              [switch]
              $nightlies,
              [validateset('auto', 'i386', 'x86_64')]
              [string]
              $architecture = 'auto'
            )

            # PowerShell is only on Windows ATM
            $platform = 'windows'
            Write-Verbose "Platform: $platform"

            $platform_version = Get-PlatformVersion
            Write-Verbose "Platform Version: $platform_version"

            if ($architecture -eq 'auto') {
              $architecture = Get-PlatformArchitecture
            }

            Write-Verbose "Architecture: $architecture"
            Write-Verbose "Project: $project"


              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 16b55cbf511b3989b006c98c940f8230858cf6eba81b6ec9793912d686b66885" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.9/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.10/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/mac_os_x/10.11/chef-12.12.10-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 e150a7845ba89574a1a8c9425426d2f6f9fb5fad5c0ed0877a8135f16259b9a3" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ios_xr/6/chef-12.12.10-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f8f5e1bc424c103f9423aa7b4ed1d2dfc7bd7e1132c0af9c34c78caaf7631a9b" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/nexus/7/chef-12.12.10-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 e03a7b07f699d96ce4f2093f8dd4be61fc8547860fa52d19ad0f0394fa488e66" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 bbebd432f6c43cda1d3f03ac5a009822b05d6d9adf5ba9fed03f88b5c4e06360" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 76ea4ba096b432e6544be0dd8ab04c201aeaf6343965b0f5cd2cc1fd3bb957e1" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 da47c80beb9619bb0a3a4c565898dc4f50ea3208d143842945f2dee91711b830" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 746a2030bb5e078a525051508253dd70ae70d8999c89b2f95de3f368b98d64d9" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 eb0627c6f828cd08d95d4822874412ab6a4fe8fd6e8f29721ce0953def3fb0ed" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 41676f26ce135282cbc09cb3f9de6c04dfdec964547fdb995318fe659f3166f9" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 b291ce4b5c01fb87dd98033e06c27e313c740b3139ebc30d33dd25154d0edd73" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5379d057625a234638ef08f34aa16265f823f40c5139686ecfad5ef9917ebadb" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/12.04/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/ubuntu/14.04/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 04ab72ee41e8ef1917a841583cdcf92e39182a29ef70c981b4d1901a2c892efe" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 fedff09be8b6b3bad5f33bb0f675cd240a3b653ce7ce7e9236f888b28b1cea92" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/7/chef-12.12.10-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 83a6de2ac1484959c90b830d70cf6cef8528ec89a1f416d95d314b23b82efe21" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/6/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/7/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/debian/8/chef_12.12.10-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 7b4905a23d3ace0c62edf0b7296ab61e29a5f1ec3b2ff4556afd40fe7b89fc92" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/10/chef-12.12.10_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 a72febfdba2d28ff67f9540c554c6f94b60f9781f31c791355e0e0f55cdbc86a" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 1131c7372033523203749548ef79eaa8b60612973d2b6108fa9125281879767b" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/5/chef-12.12.10-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 96af6e90f6ff3876d357859544bea71c24c6dc4d92eb098a3ae3f36b45b3dac6" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/el/6/chef-12.12.10-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 bf531b332f24a1f4d5cc5d43597443714aef3a801cd4b4edf45644132a26a276" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2008r2/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/freebsd/9/chef-12.12.10_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 d3a5206694949575e519354f8e121703de2e75940446a2d7f58013affe96c656" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/windows/2012r2/chef-client-12.12.10-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5b50e7288d8cf08e312c180228a95e3fa08bf5ebb7f5dc8dd0f41881ce7d0835" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/6.1/chef-12.12.10-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
              "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/aix/7.1/chef-12.12.10-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
              "sha256 4b657301bc4c7cdb551739c1ff44271796243429f991ef1674cad8af5c5040a1" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.10/chef-12.12.10-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co/omnibus-unstable-local/com/getchef/chef/12.12.10/solaris2/5.11/chef-12.12.10-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 789d6bc4bf0b9b25830f19b17380efbcd579f01637450c0a0f48fcece87d0139" | out-file "$artifact_info_dir/artifact_info" -Append


            $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

            $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
              foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

            Write-Verbose "Project details: "
            foreach ($key in $package_metadata.keys) {
              Write-Verbose "`t$key = $($package_metadata[$key])"
            }
            $package_metadata
          }

          function Install-Project {
            <#
              .SYNOPSIS
              Install a Chef Software, Inc. product
              .DESCRIPTION
              Install a Chef Software, Inc. product
              .EXAMPLE
              iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

              Installs the latest stable version of Chef.
              .EXAMPLE
              iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

              Installs the latest integration build of the Chef Development Kit
            #>
            [cmdletbinding(SupportsShouldProcess=$true)]
            param (
              # Project to install
              [string]
              $project = 'chef',
              # Release channel to install from
              [validateset('current', 'stable', 'unstable')]
              [string]
              $channel = 'stable',
              # Version of the application to install
              # This parameter is optional, if not supplied it will provide the latest version,
              # and if an iteration number is not specified, it will grab the latest available iteration.
              # Partial version numbers are also acceptable (using v=11
              # will grab the latest 11.x client which matches the other flags).
              [string]
              $version,
              # Full path for the downloaded installer.
              [string]
              $filename,
              # Full path to the location to download the installer
              [string]
              $download_directory = $env:temp,
              # The following legacy switches are just aliases for the current channel
              [switch]
              $prerelease,
              [switch]
              $nightlies,
              [validateset('auto', 'i386', 'x86_64')]
              [string]
              $architecture = 'auto'
            )

            $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

            if (-not [string]::IsNullOrEmpty($filename)) {
              $download_directory = split-path $filename
              $filename = split-path $filename -leaf
              if ([string]::IsNullOrEmpty($download_directory)) {
                $download_directory = $pwd
              }
            }
            else {
              $filename = ($package_metadata.url -split '/')[-1]
            }
            Write-Verbose "Download directory: $download_directory"
            Write-Verbose "Filename: $filename"

            if (-not (test-path $download_directory)) {
              mkdir $download_directory
            }
            $download_directory = (resolve-path $download_directory).providerpath
            $download_destination = join-path $download_directory $filename

            if ((test-path $download_destination) -and
              (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
              Write-Verbose "Found existing valid installer at $download_destination."
            }
            else {
              if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                Get-WebContent $package_metadata.url -filepath $download_destination
              }
            }

            if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
              if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                Write-Host "Installing $project from $download_destination"
                $installingProject = $True
                $installAttempts = 0
                while ($installingProject) {
                  $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                  $p.WaitForExit()
                  if ($p.ExitCode -eq 1618) {
                    Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                    continue
                  } elseif ($p.ExitCode -ne 0) {
                    throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                  }
                  $installingProject = $False
                }
              }
              else {
                throw "Failed to validate the downloaded installer for $project."
              }
            }
          }
          set-alias install -value Install-Project
          export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

          }

          install -project chef -version 12.12.10 -channel unstable
          )
          D      creating hash for file $env:TEMP/default-windows-2012r2-long_script.ps1
          D      Running check_files.ps1
          D      @{
          D        "ee541b042a0f0ef2da5f8f2861cc4131" = @{
          D          "target" = "$env:TEMP/default-windows-2012r2-long_script.ps1";
          D          "src_basename" = "default-windows-2012r2-long_script.ps1";
          D          "dst" = "$env:TEMP/default-windows-2012r2-long_script.ps1"
          D        }
          D      }
          D      [WinRM] opening new shell since the current one failed
          D      [WinRM] opening remote shell on http://10.194.14.46:5985/wsman
          D      [WinRM] remote shell C5287A6B-6D6B-4A3A-BEE6-E834FABD96D7 is open on http://10.194.14.46:5985/wsman
          D      Parsing CSV Response
          D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
          "False","ee541b042a0f0ef2da5f8f2861cc4131",,"True","False","False"

          D      Uploading /tmp/cheftest/kitchen-long-script20160630-4924-g85am7/default-windows-2012r2-long_script.ps1 to encoded tmpfile $env:TEMP\b64-ee541b042a0f0ef2da5f8f2861cc4131.txt
          D      Finished uploading /tmp/cheftest/kitchen-long-script20160630-4924-g85am7/default-windows-2012r2-long_script.ps1 to encoded tmpfile $env:TEMP\b64-ee541b042a0f0ef2da5f8f2861cc4131.txt (38.844 KB over 5 chunks) in (0m0.48s)
          D      Running decode_files.ps1
          D      @{
          D        "$env:TEMP\b64-ee541b042a0f0ef2da5f8f2861cc4131.txt" = @{
          D          "dst" = "$env:TEMP/default-windows-2012r2-long_script.ps1"
          D        }
          D      }
          D      Parsing CSV Response
          D      "src_md5","tmpzip","verifies","tmpfile","dst_md5","dst"
          "ee541b042a0f0ef2da5f8f2861cc4131",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-ee541b042a0f0ef2da5f8f2861cc4131.txt","ee541b042a0f0ef2da5f8f2861cc4131","C:\Users\ADMINI~1\AppData\Local\Temp/default-windows-2012r2-long_script.ps1"

          D      Uploaded 1 items dirty_check: (0m0.77s) stream_files: (0m0.48s) decode: (0m0.90s)

                 ModuleType Version    Name                                ExportedCommands
                 ---------- -------    ----                                ----------------
                 Script     0.0        Omnitruck                           {Get-ProjectMetada...
                 Installing chef from C:\Users\ADMINI~1\AppData\Local\Temp\chef-client-12.12.10-1-x64.msi
          D      [WinRM] retrying receive request after timeout


          D      [WinRM] negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($dirs = @("$env:TEMP\kitchen\clients", "$env:TEMP\kitchen\cookbooks", "$env:TEMP\kitchen\data", "$env:TEMP\kitchen\data_bags", "$env:TEMP\kitchen\encrypted_data_bag_secret", "$env:TEMP\kitchen\environments", "$env:TEMP\kitchen\roles")
          $root_path = "$env:TEMP\kitchen"

          Function Delete-AllDirs($dirs) {
            $dirs | ForEach-Object {
              if (Test-Path ($path = Unresolve-Path $_)) { Remove-Item $path -Recurse -Force }
            }
          }

          Function Unresolve-Path($p) {
            if ($p -eq $null) { return $null }
            else { return $ExecutionContext.SessionState.Path.GetUnresolvedProviderPathFromPSPath($p) }
          }

          Function Make-RootPath($p) {
            $p = Unresolve-Path $p
            if (-Not (Test-Path $p)) { New-Item $p -ItemType directory | Out-Null }
          }

          Delete-AllDirs $dirs
          Make-RootPath $root_path
          )
                 Transferring files to <default-windows-2012r2>
          D      creating hash for file $env:TEMP\kitchen
          D      creating hash for file $env:TEMP\kitchen
          D      creating hash for directory $env:TEMP\kitchen
          D      Populating files
          D      === All files added.
          D      creating hash for file $env:TEMP\kitchen
          D      creating hash for directory $env:TEMP\kitchen
          D      Populating files
          D      +++ Adding build-essential/README.md
          D      +++ Adding build-essential/attributes/default.rb
          D      +++ Adding build-essential/libraries/matchers.rb
          D      +++ Adding build-essential/libraries/xcode_command_line_tools.rb
          D      +++ Adding build-essential/metadata.json
          D      +++ Adding build-essential/recipes/_windows.rb
          D      +++ Adding build-essential/recipes/default.rb
          D      +++ Adding build-essential/resources/build_essential.rb
          D      +++ Adding chef_handler/README.md
          D      +++ Adding chef_handler/attributes/default.rb
          D      +++ Adding chef_handler/files/default/handlers/README
          D      +++ Adding chef_handler/libraries/helpers.rb
          D      +++ Adding chef_handler/libraries/matchers.rb
          D      +++ Adding chef_handler/metadata.json
          D      +++ Adding chef_handler/providers/default.rb
          D      +++ Adding chef_handler/recipes/default.rb
          D      +++ Adding chef_handler/recipes/json_file.rb
          D      +++ Adding chef_handler/resources/default.rb
          D      +++ Adding compat_resource/README.md
          D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/constants.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/delayed_evaluator.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/dsl/core.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/dsl/declare_resource.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/dsl/recipe.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/mixin/lazy_module_include.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/mixin/notifying_block.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/mixin/params_validate.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/mixin/powershell_out.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/mixin/properties.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/property.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/provider/noop.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/provider.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/resource/action_class.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/resource.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef/chef/resource_builder.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/copied_from_chef.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/mixin/properties.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/exceptions.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/log.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/mixin/params_validate.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/property.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/provider.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/recipe.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/resource/lwrp_base.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/resource.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/resource_builder.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/resource_collection/resource_list.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/resource_collection/resource_set.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/resource_collection.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/run_context.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef/runner.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches/chef.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/monkeypatches.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/property.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/recipe.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/resource/lwrp_base.rb
          D      +++ Adding compat_resource/files/lib/chef_compat/resource.rb
          D      +++ Adding compat_resource/files/lib/compat_resource/gemspec.rb
          D      +++ Adding compat_resource/files/lib/compat_resource/version.rb
          D      +++ Adding compat_resource/files/lib/compat_resource.rb
          D      +++ Adding compat_resource/files/spec/cookbook_spec.rb
          D      +++ Adding compat_resource/files/spec/data/Gemfile
          D      +++ Adding compat_resource/files/spec/data/Gemfile.lock
          D      +++ Adding compat_resource/files/spec/data/config.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/cloning/metadata.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/cloning/providers/resource.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/cloning/recipes/default.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/cloning/resources/resource.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/future/libraries/future_custom_resource.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/future/libraries/super_properties.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/future/metadata.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/future/recipes/declare_resource.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/future/resources/resource.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/future/resources/super_resource.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/hybrid/libraries/normal_hwrp.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/hybrid/metadata.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/hybrid/providers/resource.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/hybrid/resources/resource.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/normal/libraries/normal_hwrp.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/normal/metadata.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/normal/providers/resource.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/normal/recipes/declare_resource.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/normal/resources/resource.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/notifications/metadata.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/notifications/recipes/default.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/notifications/resources/resource.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/test/metadata.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/test/recipes/default.rb
          D      +++ Adding compat_resource/files/spec/data/cookbooks/test/recipes/test.rb
          D      +++ Adding compat_resource/files/spec/data/nodes/ettores-mbp.lan.json
          D      +++ Adding compat_resource/files/spec/spec_helper.rb
          D      +++ Adding compat_resource/libraries/autoload.rb
          D      +++ Adding compat_resource/metadata.json
          D      +++ Adding dmg/README.md
          D      +++ Adding dmg/attributes/default.rb
          D      +++ Adding dmg/libraries/matchers.rb
          D      +++ Adding dmg/metadata.json
          D      +++ Adding dmg/providers/package.rb
          D      +++ Adding dmg/recipes/default.rb
          D      +++ Adding dmg/resources/package.rb
          D      +++ Adding git/README.md
          D      +++ Adding git/attributes/default.rb
          D      +++ Adding git/libraries/helpers.rb
          D      +++ Adding git/libraries/matchers.rb
          D      +++ Adding git/libraries/provider_git_client.rb
          D      +++ Adding git/libraries/provider_git_client_osx.rb
          D      +++ Adding git/libraries/provider_git_client_package.rb
          D      +++ Adding git/libraries/provider_git_client_source.rb
          D      +++ Adding git/libraries/provider_git_client_windows.rb
          D      +++ Adding git/libraries/provider_git_service.rb
          D      +++ Adding git/libraries/provider_git_service_xinetd.rb
          D      +++ Adding git/libraries/resource_git_client.rb
          D      +++ Adding git/libraries/resource_git_service.rb
          D      +++ Adding git/libraries/z_provider_mapping.rb
          D      +++ Adding git/metadata.json
          D      +++ Adding git/providers/config.rb
          D      +++ Adding git/recipes/default.rb
          D      +++ Adding git/recipes/package.rb
          D      +++ Adding git/recipes/server.rb
          D      +++ Adding git/recipes/source.rb
          D      +++ Adding git/recipes/windows.rb
          D      +++ Adding git/resources/config.rb
          D      +++ Adding git/templates/default/git-xinetd.d.erb
          D      +++ Adding git/templates/default/sv-git-daemon-log-run.erb
          D      +++ Adding git/templates/default/sv-git-daemon-run.erb
          D      +++ Adding mingw/README.md
          D      +++ Adding mingw/files/default/bash.bat
          D      +++ Adding mingw/files/default/custom-upgrade.sh
          D      +++ Adding mingw/files/default/pthread.h
          D      +++ Adding mingw/files/default/time.h
          D      +++ Adding mingw/libraries/_helper.rb
          D      +++ Adding mingw/metadata.json
          D      +++ Adding mingw/recipes/default.rb
          D      +++ Adding mingw/resources/get.rb
          D      +++ Adding mingw/resources/msys2_package.rb
          D      +++ Adding mingw/resources/tdm_gcc.rb
          D      +++ Adding seven_zip/README.md
          D      +++ Adding seven_zip/attributes/default.rb
          D      +++ Adding seven_zip/metadata.json
          D      +++ Adding seven_zip/providers/archive.rb
          D      +++ Adding seven_zip/recipes/default.rb
          D      +++ Adding seven_zip/resources/archive.rb
          D      +++ Adding winbox/README.md
          D      +++ Adding winbox/attributes/debugger_install_path.rb
          D      +++ Adding winbox/attributes/editor.rb
          D      +++ Adding winbox/files/default/ConEmu.xml
          D      +++ Adding winbox/files/default/chef-dk.ico
          D      +++ Adding winbox/files/default/get-help-full.ps1
          D      +++ Adding winbox/files/default/install.ps1
          D      +++ Adding winbox/files/default/set-location-docs.ps1
          D      +++ Adding winbox/files/default/start-chefdk.ps1
          D      +++ Adding winbox/files/default/vscode-keybindings.json
          D      +++ Adding winbox/files/default/vscode-settings.json
          D      +++ Adding winbox/files/default/winbox-ps-profile.ps1
          D      +++ Adding winbox/libraries/executable_finder.rb
          D      +++ Adding winbox/libraries/git_information.rb
          D      +++ Adding winbox/metadata.json
          D      +++ Adding winbox/recipes/chefdk.rb
          D      +++ Adding winbox/recipes/chefdk_shortcut.rb
          D      +++ Adding winbox/recipes/chocolatey_install.rb
          D      +++ Adding winbox/recipes/console.rb
          D      +++ Adding winbox/recipes/debugger.rb
          D      +++ Adding winbox/recipes/default.rb
          D      +++ Adding winbox/recipes/editor.rb
          D      +++ Adding winbox/recipes/powershell_dev.rb
          D      +++ Adding winbox/recipes/readline.rb
          D      +++ Adding winbox/recipes/vscode_emacs.rb
          D      +++ Adding windows/README.md
          D      +++ Adding windows/attributes/default.rb
          D      +++ Adding windows/files/default/handlers/windows_reboot_handler.rb
          D      +++ Adding windows/libraries/feature_base.rb
          D      +++ Adding windows/libraries/matchers.rb
          D      +++ Adding windows/libraries/powershell_helper.rb
          D      +++ Adding windows/libraries/powershell_out.rb
          D      +++ Adding windows/libraries/registry_helper.rb
          D      +++ Adding windows/libraries/version.rb
          D      +++ Adding windows/libraries/windows_architecture_helper.rb
          D      +++ Adding windows/libraries/windows_helper.rb
          D      +++ Adding windows/libraries/windows_package.rb
          D      +++ Adding windows/libraries/windows_privileged.rb
          D      +++ Adding windows/libraries/wmi_helper.rb
          D      +++ Adding windows/metadata.json
          D      +++ Adding windows/providers/auto_run.rb
          D      +++ Adding windows/providers/batch.rb
          D      +++ Adding windows/providers/certificate.rb
          D      +++ Adding windows/providers/certificate_binding.rb
          D      +++ Adding windows/providers/feature_dism.rb
          D      +++ Adding windows/providers/feature_powershell.rb
          D      +++ Adding windows/providers/feature_servermanagercmd.rb
          D      +++ Adding windows/providers/font.rb
          D      +++ Adding windows/providers/http_acl.rb
          D      +++ Adding windows/providers/pagefile.rb
          D      +++ Adding windows/providers/path.rb
          D      +++ Adding windows/providers/printer.rb
          D      +++ Adding windows/providers/printer_port.rb
          D      +++ Adding windows/providers/reboot.rb
          D      +++ Adding windows/providers/registry.rb
          D      +++ Adding windows/providers/shortcut.rb
          D      +++ Adding windows/providers/task.rb
          D      +++ Adding windows/providers/zipfile.rb
          D      +++ Adding windows/recipes/default.rb
          D      +++ Adding windows/recipes/reboot_handler.rb
          D      +++ Adding windows/resources/auto_run.rb
          D      +++ Adding windows/resources/batch.rb
          D      +++ Adding windows/resources/certificate.rb
          D      +++ Adding windows/resources/certificate_binding.rb
          D      +++ Adding windows/resources/feature.rb
          D      +++ Adding windows/resources/font.rb
          D      +++ Adding windows/resources/http_acl.rb
          D      +++ Adding windows/resources/pagefile.rb
          D      +++ Adding windows/resources/path.rb
          D      +++ Adding windows/resources/printer.rb
          D      +++ Adding windows/resources/printer_port.rb
          D      +++ Adding windows/resources/reboot.rb
          D      +++ Adding windows/resources/registry.rb
          D      +++ Adding windows/resources/shortcut.rb
          D      +++ Adding windows/resources/task.rb
          D      +++ Adding windows/resources/zipfile.rb
          D      +++ Adding yum/README.md
          D      +++ Adding yum/attributes/main.rb
          D      +++ Adding yum/libraries/matchers.rb
          D      +++ Adding yum/metadata.json
          D      +++ Adding yum/providers/globalconfig.rb
          D      +++ Adding yum/providers/repository.rb
          D      +++ Adding yum/recipes/default.rb
          D      +++ Adding yum/recipes/dnf_yum_compat.rb
          D      +++ Adding yum/resources/globalconfig.rb
          D      +++ Adding yum/resources/repository.rb
          D      +++ Adding yum/templates/default/main.erb
          D      +++ Adding yum/templates/default/repo.erb
          D      +++ Adding yum-epel/README.md
          D      +++ Adding yum-epel/attributes/default.rb
          D      +++ Adding yum-epel/attributes/epel-debuginfo.rb
          D      +++ Adding yum-epel/attributes/epel-source.rb
          D      +++ Adding yum-epel/attributes/epel-testing-debuginfo.rb
          D      +++ Adding yum-epel/attributes/epel-testing-source.rb
          D      +++ Adding yum-epel/attributes/epel-testing.rb
          D      +++ Adding yum-epel/attributes/epel.rb
          D      +++ Adding yum-epel/metadata.json
          D      +++ Adding yum-epel/recipes/default.rb
          D      === All files added.
          D      Running check_files.ps1
          D      @{
          D        "a86f70dc25c9c07f2959adeb0ed8a08c" = @{
          D          "target" = "$env:TEMP\kitchen";
          D          "src_basename" = "dna.json";
          D          "dst" = "$env:TEMP\kitchen"
          D        };
          D        "b8a32ad42457120c47ccf2013d837e5d" = @{
          D          "target" = "$env:TEMP\kitchen";
          D          "src_basename" = "client.rb";
          D          "dst" = "$env:TEMP\kitchen"
          D        };
          D        "76cdb2bad9582d23c1f6f4d868218d6c" = @{
          D          "target" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip";
          D          "src_basename" = "cache";
          D          "dst" = "$env:TEMP\kitchen\cache"
          D        };
          D        "49abb94825cb80b9a9cd59e5f76daf4a" = @{
          D          "target" = "$env:TEMP\kitchen";
          D          "src_basename" = "validation.pem";
          D          "dst" = "$env:TEMP\kitchen"
          D        };
          D        "84a924240051e1b98a005b4b4aab8d67" = @{
          D          "target" = "$env:TEMP\winrm-upload\tmpzip-84a924240051e1b98a005b4b4aab8d67.zip";
          D          "src_basename" = "cookbooks";
          D          "dst" = "$env:TEMP\kitchen\cookbooks"
          D        }
          D      }
          D      Parsing CSV Response
          D      "chk_exists","src_md5","dst_md5","chk_dirty","verifies","target_is_folder"
          "False","84a924240051e1b98a005b4b4aab8d67",,"True","False","False"
          "False","a86f70dc25c9c07f2959adeb0ed8a08c",,"True","False","True"
          "False","76cdb2bad9582d23c1f6f4d868218d6c",,"True","False","False"
          "False","49abb94825cb80b9a9cd59e5f76daf4a",,"True","False","True"
          "False","b8a32ad42457120c47ccf2013d837e5d",,"True","False","True"

          D      Uploading /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872/dna.json to encoded tmpfile $env:TEMP\b64-a86f70dc25c9c07f2959adeb0ed8a08c.txt
          D      Finished uploading /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872/dna.json to encoded tmpfile $env:TEMP\b64-a86f70dc25c9c07f2959adeb0ed8a08c.txt (0.12 KB over 1 chunks) in (0m0.06s)
          D      Uploading /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872/client.rb to encoded tmpfile $env:TEMP\b64-b8a32ad42457120c47ccf2013d837e5d.txt
          D      Finished uploading /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872/client.rb to encoded tmpfile $env:TEMP\b64-b8a32ad42457120c47ccf2013d837e5d.txt (1.104 KB over 1 chunks) in (0m0.07s)
          D      Uploading /tmp/cheftest/tmpzip-20160630-4924-1erptln.zip to encoded tmpfile $env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt
          D      Finished uploading /tmp/cheftest/tmpzip-20160630-4924-1erptln.zip to encoded tmpfile $env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt (0.028 KB over 1 chunks) in (0m0.07s)
          D      Uploading /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872/validation.pem to encoded tmpfile $env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt
          D      Finished uploading /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872/validation.pem to encoded tmpfile $env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt (2.236 KB over 1 chunks) in (0m0.20s)
          D      Uploading /tmp/cheftest/tmpzip-20160630-4924-1v9qc5f.zip to encoded tmpfile $env:TEMP\b64-84a924240051e1b98a005b4b4aab8d67.txt
          D      Wrote chunk 25 for $env:TEMP\b64-84a924240051e1b98a005b4b4aab8d67.txt
          D      Wrote chunk 50 for $env:TEMP\b64-84a924240051e1b98a005b4b4aab8d67.txt
          D      Finished uploading /tmp/cheftest/tmpzip-20160630-4924-1v9qc5f.zip to encoded tmpfile $env:TEMP\b64-84a924240051e1b98a005b4b4aab8d67.txt (430.132 KB over 54 chunks) in (0m5.02s)
          D      Running decode_files.ps1
          D      @{
          D        "$env:TEMP\b64-a86f70dc25c9c07f2959adeb0ed8a08c.txt" = @{
          D          "dst" = "$env:TEMP\kitchen/dna.json"
          D        };
          D        "$env:TEMP\b64-b8a32ad42457120c47ccf2013d837e5d.txt" = @{
          D          "dst" = "$env:TEMP\kitchen/client.rb"
          D        };
          D        "$env:TEMP\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt" = @{
          D          "dst" = "$env:TEMP\kitchen\cache";
          D          "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip"
          D        };
          D        "$env:TEMP\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt" = @{
          D          "dst" = "$env:TEMP\kitchen/validation.pem"
          D        };
          D        "$env:TEMP\b64-84a924240051e1b98a005b4b4aab8d67.txt" = @{
          D          "dst" = "$env:TEMP\kitchen\cookbooks";
          D          "tmpzip" = "$env:TEMP\winrm-upload\tmpzip-84a924240051e1b98a005b4b4aab8d67.zip"
          D        }
          D      }
          D      Parsing CSV Response
          D      "src_md5","tmpzip","verifies","tmpfile","dst_md5","dst"
          "76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-76cdb2bad9582d23c1f6f4d868218d6c.zip","True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-76cdb2bad9582d23c1f6f4d868218d6c.txt","76cdb2bad9582d23c1f6f4d868218d6c","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache"
          "a86f70dc25c9c07f2959adeb0ed8a08c",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-a86f70dc25c9c07f2959adeb0ed8a08c.txt","a86f70dc25c9c07f2959adeb0ed8a08c","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/dna.json"
          "84a924240051e1b98a005b4b4aab8d67","C:\Users\ADMINI~1\AppData\Local\Temp\winrm-upload\tmpzip-84a924240051e1b98a005b4b4aab8d67.zip","True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-84a924240051e1b98a005b4b4aab8d67.txt","84a924240051e1b98a005b4b4aab8d67","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cookbooks"
          "49abb94825cb80b9a9cd59e5f76daf4a",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-49abb94825cb80b9a9cd59e5f76daf4a.txt","49abb94825cb80b9a9cd59e5f76daf4a","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/validation.pem"
          "b8a32ad42457120c47ccf2013d837e5d",,"True","C:\Users\ADMINI~1\AppData\Local\Temp\b64-b8a32ad42457120c47ccf2013d837e5d.txt","b8a32ad42457120c47ccf2013d837e5d","C:\Users\ADMINI~1\AppData\Local\Temp\kitchen/client.rb"

          D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160630-4924-1erptln.zip
          D      Cleaned up src_zip /tmp/cheftest/tmpzip-20160630-4924-1v9qc5f.zip
          D      Uploaded 5 items dirty_check: (0m1.64s) stream_files: (0m5.44s) decode: (0m2.58s)
          D      Transfer complete
          D      [WinRM] negotiate::http://10.194.14.46:5985/wsman<{:user=>"administrator", :pass=>"P&)NA==-=h", :elevated_username=>"administrator", :elevated_password=>"P&)NA==-=h", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> ($env:PATH = [System.Environment]::GetEnvironmentVariable("PATH","Machine")

          & $env:systemdrive\opscode\chef\bin\chef-client.bat --local-mode --config $env:TEMP\kitchen\client.rb --log_level auto --force-formatter --no-color --json-attributes $env:TEMP\kitchen\dna.json --chef-zero-port 8889)
                 Starting Chef Client, version 12.12.10
                 Creating a new client identity for default-windows-2012r2 using the validator key.
                 resolving cookbooks for run list: ["winbox::default"]
                 Synchronizing Cookbooks:
                   - winbox (0.9.105)
                   - git (4.5.0)
                   - windows (1.44.1)
                   - build-essential (6.0.0)
                   - dmg (2.4.0)
                   - yum-epel (0.7.0)
                   - chef_handler (1.4.0)
                   - seven_zip (2.0.1)
                   - mingw (1.2.2)
                   - compat_resource (12.10.6)
                   - yum (3.11.0)
                 Installing Cookbook Gems:
                 Compiling Cookbooks...
                 Converging 25 resources
                 Recipe: git::windows
                   * git_client[default] action install[2016-06-30T19:12:42+00:00] WARN: Please use the package resource available in Chef Client 12.6.
                 windows_package will be removed in the next major version release
                 of the Windows cookbook.


                     * windows_package[Git version 2.8.1] action install
                     Recipe: <Dynamically Defined Resource>
                       * remote_file[C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache\package\Git-2.8.1-64-bit.exe] action create
                  - create new file C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache\package\Git-2.8.1-64-bit.exe
                  - update content in file C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache\package\Git-2.8.1-64-bit.exe from none to 5e5283
                  (file sizes exceed 10000000 bytes, diff output suppressed)
                       - install version latest of package Git version 2.8.1
                     * ruby_block[Add Git Path] action nothing (skipped due to action :nothing)
                     * windows_path[C:\Program Files\Git\Cmd] action add
                       * env[path] action modify

                       * ruby_block[fix ruby ENV['PATH']] action run
                  - execute the ruby block fix ruby ENV['PATH']
                       * ruby_block[fix ruby ENV['PATH']] action nothing (skipped due to action :nothing)

                     * ruby_block[Add Git Path] action create
                       - execute the ruby block Add Git Path

                 Recipe: winbox::chocolatey_install
                   * windows_path[update_path_for_system] action add
                     * env[path] action modify

                     * ruby_block[fix ruby ENV['PATH']] action run
                       - execute the ruby block fix ruby ENV['PATH']
                     * ruby_block[fix ruby ENV['PATH']] action nothing (skipped due to action :nothing)

                   * ruby_block[add_chocolatey_path] action run (skipped due to not_if)
                   * powershell_script[chocolatey_install] action run
                     - execute "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-1tnyltv.ps1"
                 Recipe: winbox::powershell_dev
                   * powershell_script[ExecutionPolicyUnrestricted] action run (skipped due to only_if)
                   * powershell_script[ExecutionPolicyUnrestrictedX86] action run
                     - execute "C:\Windows\SysWOW64\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-10d2yd3.ps1"
                   * cookbook_file[C:\Users\Administrator/winbox-ps-profile.ps1] action create_if_missing
                     - create new file C:\Users\Administrator/winbox-ps-profile.ps1
                     - update content in file C:\Users\Administrator/winbox-ps-profile.ps1 from none to 19a092
                     --- C:\Users\Administrator/winbox-ps-profile.ps1  2016-06-30 19:13:23.000000000 +0000
                     +++ C:\Users\Administrator/chef-winbox-ps-profile.ps120160630-4068-1r3as3y  2016-06-30 19:13:23.000000000 +0000
                     @@ -1 +1,89 @@
                     +# WinBox PowerShell profile
                     +#
                     +# Copyright 2015, Adam Edwards
                     +#
                     +# Licensed under the Apache License, Version 2.0 (the "License");
                     +# you may not use this file except in compliance with the License.
                     +# You may obtain a copy of the License at
                     +#
                     +#     http://www.apache.org/licenses/LICENSE-2.0
                     +#
                     +# Unless required by applicable law or agreed to in writing, software
                     +# distributed under the License is distributed on an "AS IS" BASIS,
                     +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                     +# See the License for the specific language governing permissions and
                     +# limitations under the License.
                     +
                     +# Enable readline support
                     +import-module psreadline
                     +Set-PSReadlineOption -EditMode Emacs
                     +
                     +# Enable posh-git support
                     +if ((get-module -listavailable 'posh-git') -ne $null)
                     +{
                     +    import-module posh-git
                     +}
                     +
                     +# Get the username and whether we're elevated for display
                     +# in the title and prompt
                     +$identity = [Security.Principal.WindowsIdentity]::GetCurrent()
                     +$principal = [Security.Principal.WindowsPrincipal] $identity
                     +$titleprefix = ""
                     +if (test-path variable:/PSDebugContext)
                     +{
                     +    $titleprefix = 'Debug: '
                     +}
                     +else
                     +{
                     +    if ($principal.IsInRole([Security.Principal.WindowsBuiltInRole] "Administrator"))
                     +    {
                     +        $titleprefix = "Administrator: "
                     +    }
                     +}
                     +
                     +#
                     +# The title will look like one of the following:
                     +#
                     +#   myusername@myhost
                     +#   Administrator: myusername@myhost
                     +#
                     +(get-host).ui.rawui.windowtitle = "$titleprefix$($env:username)@$($env:computername)"
                     +
                     +#
                     +# Set a useful two-line prompt that uses color for readability and status.
                     +# The format is 'host: lastexitcode: currentdirectory `newline `username >'.
                     +#
                     +# Here's example output:
                     +#
                     +#   myhost (0x00000001) c:\windows\system32\drivers\etc
                     +#   myuser >
                     +#
                     +function prompt
                     +{
                     +    $lasterror = $?
                     +    $lastexit = $lastexitcode
                     +    if ($lastexit -eq $null) { $lastexit = 0 }
                     +    $errorcolor = 'green'
                     +    $exitcolor = 'green'
                     +    if (! $lasterror) { $errorcolor = 'red' }
                     +    if ($lastexit -ne 0) { $exitcolor = 'red' }
                     +
                     +    write-host -nonewline -foregroundcolor $errorcolor '% '
                     +    write-host -nonewline -foregroundcolor darkyellow "$env:computername "
                     +    write-host -nonewline -foregroundcolor gray "("
                     +    write-host -nonewline -foregroundcolor $exitcolor "0x$(($lastexit).ToString("X8"))"
                     +    write-host -nonewline -foregroundcolor gray ")"
                     +    if ( get-command write-vcsstatus) { Write-VcsStatus }
                     +    write-host -foregroundcolor cyan " $($executionContext.SessionState.Path.CurrentLocation)"
                     +    write-host -nonewline -foregroundcolor darkyellow "$env:username"
                     +    "$('>' * ($nestedPromptLevel + 1)) "
                     +}
                     +
                     +# Make the man alias show full help by default
                     +. ~\get-help-full.ps1
                     +set-alias -option allscope man get-help-full
                     +
                     +# Useful shortcut to get to Documents folder
                     +. ~\set-location-docs.ps1
                     +new-alias docs set-location-docs
                   * cookbook_file[C:\Users\Administrator/get-help-full.ps1] action create
                     - create new file C:\Users\Administrator/get-help-full.ps1
                     - update content in file C:\Users\Administrator/get-help-full.ps1 from none to 7edc66
                     --- C:\Users\Administrator/get-help-full.ps1  2016-06-30 19:13:23.000000000 +0000
                     +++ C:\Users\Administrator/chef-get-help-full.ps120160630-4068-1dunghq  2016-06-30 19:13:23.000000000 +0000
                     @@ -1 +1,30 @@
                     +#
                     +# Copyright 2015, Adam Edwards
                     +#
                     +# Licensed under the Apache License, Version 2.0 (the "License");
                     +# you may not use this file except in compliance with the License.
                     +# You may obtain a copy of the License at
                     +#
                     +#     http://www.apache.org/licenses/LICENSE-2.0
                     +#
                     +# Unless required by applicable law or agreed to in writing, software
                     +# distributed under the License is distributed on an "AS IS" BASIS,
                     +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                     +# See the License for the specific language governing permissions and
                     +# limitations under the License.
                     +
                     +# Shows help page with full help, rather than the
                     +# abbreviated help which is the default for get-help
                     +function get-help-full
                     +{
                     +    try
                     +    {
                     +        get-help @args -full | out-host -paging
                     +    }
                     +    catch [System.Management.Automation.HaltCommandException]
                     +    {
                     +        # Do nothing if the user chooses 'q'
                     +    }
                     +}
                     +
                   * cookbook_file[C:\Users\Administrator/set-location-docs.ps1] action create
                     - create new file C:\Users\Administrator/set-location-docs.ps1
                     - update content in file C:\Users\Administrator/set-location-docs.ps1 from none to 3e28a0
                     --- C:\Users\Administrator/set-location-docs.ps1  2016-06-30 19:13:23.000000000 +0000
                     +++ C:\Users\Administrator/chef-set-location-docs.ps120160630-4068-1rpc0fh  2016-06-30 19:13:23.000000000 +0000
                     @@ -1 +1,31 @@
                     +# Documents directory shortcut
                     +#
                     +# Copyright 2015, Adam Edwards
                     +#
                     +# Licensed under the Apache License, Version 2.0 (the "License");
                     +# you may not use this file except in compliance with the License.
                     +# You may obtain a copy of the License at
                     +#
                     +#     http://www.apache.org/licenses/LICENSE-2.0
                     +#
                     +# Unless required by applicable law or agreed to in writing, software
                     +# distributed under the License is distributed on an "AS IS" BASIS,
                     +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                     +# See the License for the specific language governing permissions and
                     +# limitations under the License.
                     +
                     +# Set the current directory to the location of the
                     +# Documents directory, and also set up an environment
                     +# variables called DOCS.
                     +function set-location-docs
                     +{
                     +
                     +    if ($env:DOCS -eq $null)
                     +    {
                     +        $myDocsPath = [environment]::GetFolderPath("MyDocuments")
                     +        $env:DOCS = $myDocsPath
                     +    }
                     +
                     +    pushd $env:DOCS
                     +}
                   * directory[C:/Users/Administrator/Documents/WindowsPowerShell] action create (up to date)
                   * powershell_script[C:\Users\Administrator\Documents\WindowsPowerShell\Microsoft.PowerShell_profile.ps1] action run (skipped due to not_if)
                 Recipe: winbox::readline
                   * remote_file[C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache\psreadline.zip] action create
                     - create new file C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache\psreadline.zip
                     - update content in file C:\Users\ADMINI~1\AppData\Local\Temp\kitchen\cache\psreadline.zip from none to 68577a
                     (new content is binary, diff output suppressed)
                   * powershell_script[install_module] action run
                     - execute "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-m6c6sf.ps1"
                 Recipe: winbox::editor
                   * directory[C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/winbox/vscode] action create
                     - create new directory C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/winbox/vscode
                   * remote_file[C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/winbox/vscode/vscodesetup.exe] action create
                     - create new file C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/winbox/vscode/vscodesetup.exe
                     - update content in file C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/winbox/vscode/vscodesetup.exe from none to 3ae51c
                     (file sizes exceed 10000000 bytes, diff output suppressed)
                   * powershell_script[install vscode] action run
                     - execute "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-14y017i.ps1"
                   * env[EDITOR] action create

                 Recipe: winbox::console
                   * cookbook_file[C:\Program Files/conemu/ConEmu.xml] action nothing (skipped due to action :nothing)
          D      [WinRM] retrying receive request after timeout
          D      [WinRM] retrying receive request after timeout
                   * powershell_script[conemu] action run

                     ================================================================================
                     Error executing action `run` on resource 'powershell_script[conemu]'
                     ================================================================================

                     Mixlib::ShellOut::ShellCommandFailed
                     ------------------------------------
                     Expected process to exit with [0], but received '1'
                     ---- Begin output of "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-1u6bnwv.ps1" ----
                     STDOUT: Installing the following packages:
                     conemu
                     By installing you accept licenses for the packages.
                     conemu not installed. An error occurred during installation:
                      The remote server returned an error: (500) Internal Server Error.
                     The install of conemu was NOT successful.
                     conemu not installed. An error occurred during installation:
                      The remote server returned an error: (500) Internal Server Error.

                     Chocolatey installed 0/1 packages. 1 packages failed.
                      See the log for details (C:\ProgramData\chocolatey\logs\chocolatey.log).

                     Failures
                      - conemu - conemu not installed. An error occurred during installation:
                      The remote server returned an error: (500) Internal Server Error.
                     Installing the following packages:
                     conemu
                     By installing you accept licenses for the packages.
                     conemu not installed. An error occurred during installation:
                      The remote server returned an error: (500) Internal Server Error.
                     The install of conemu was NOT successful.
                     conemu not installed. An error occurred during installation:
                      The remote server returned an error: (500) Internal Server Error.

                     Chocolatey installed 0/1 packages. 1 packages failed.
                      See the log for details (C:\ProgramData\chocolatey\logs\chocolatey.log).

                     Failures
                      - conemu - conemu not installed. An error occurred during installation:
                      The remote server returned an error: (500) Internal Server Error.
                     STDERR:
                     ---- End output of "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-1u6bnwv.ps1" ----
                     Ran "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20160630-4068-1u6bnwv.ps1" returned 1

                     Resource Declaration:
                     ---------------------
                     # In C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/cookbooks/winbox/recipes/console.rb

                      27: powershell_script 'conemu' do
                      28:   code <<-EOH
                      29: chocolatey install conemu -y
                      30: if ($LASTEXITCODE -ne 0)
                      31: {
                      32:   $LASTEXITCODE = 0
                      33:   chocolatey install conemu -y
                      34: }
                      35: EOH
                      36:   only_if '(get-wmiobject Win32_MSIResource | Where-Object -Property value -like -Value conemu) -eq $null'
                      37: end
                      38:

                     Compiled Resource:
                     ------------------
                     # Declared in C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/cookbooks/winbox/recipes/console.rb:27:in `from_file'

                     powershell_script("conemu") do
                       action [:run]
                       retries 0
                       retry_delay 2
                       default_guard_interpreter :powershell_script
                       command "conemu"
                       backup 5
                       returns 0
                       code "chocolatey install conemu -y\nif ($LASTEXITCODE -ne 0)\n{\n  $LASTEXITCODE = 0\n  chocolatey install conemu -y\n}\n"
                       interpreter "powershell.exe"
                       declared_type :powershell_script
                       cookbook_name "winbox"
                       recipe_name "console"
                       only_if "(get-wmiobject Win32_MSIResource | Where-Object -Property value -like -Value conemu) -eq $null"
                     end

                     Platform:
                     ---------
                     x64-mingw32

                 Starting audit phase

                 Finished in 0.001 seconds (files took 0.71177 seconds to load)
                 0 examples, 0 failures
                 Auditing complete

                 Running handlers:
                 [2016-06-30T19:15:45+00:00] ERROR: Running exception handlers
                 Running handlers complete
                 [2016-06-30T19:15:45+00:00] ERROR: Exception handlers complete
                 Chef Client failed. 21 resources updated in 03 minutes 38 seconds
                 [2016-06-30T19:15:45+00:00] ERROR: Failed to post audit report to server. Saving report to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/failed-audit-data.json
                 [2016-06-30T19:15:45+00:00] FATAL: Stacktrace dumped to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/chef-stacktrace.out
                 [2016-06-30T19:15:45+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
                 [2016-06-30T19:15:45+00:00] FATAL: Chef::Exceptions::RunFailedWrappingError: Found 1 errors, they are stored in the backtrace
          $$$$$$ C:/opscode/chef/embedded/lib/ruby/2.1.0/x64-mingw32/dl.so: warning: already initialized constant DL::RUBY_FREE
          $$$$$$ C:/opscode/chef/embedded/lib/ruby/gems/2.1.0/gems/net-ssh-3.2.0/lib/net/ssh/authentication/pageant.rb:16: warning: previous definition of RUBY_FREE was here
          $$$$$$ DL is deprecated, please use Fiddle
          D      Cleaning up local sandbox in /tmp/cheftest/default-windows-2012r2-sandbox-20160630-4924-14s3872
          D      Converge failed on instance <default-windows-2012r2>.
          D      ------Exception-------
          D      Class: Kitchen::InstanceFailure
          D      Message: Converge failed on instance <default-windows-2012r2>.  Please see .kitchen/logs/default-windows-2012r2.log for more details
          D      ----------------------
          D      ------Backtrace-------
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/provisioner/base.rb:76:in `rescue in call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/provisioner/base.rb:79:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:373:in `block in converge_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:513:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:513:in `synchronize_or_call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:478:in `block in action'
          D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:477:in `action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:369:in `converge_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:348:in `block in transition_to'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:347:in `each'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:347:in `transition_to'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:138:in `converge'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:194:in `public_send'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:194:in `run_action_in_thread'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
          D      ----End Backtrace-----
          D      ---Nested Exception---
          D      Class: Kitchen::ActionFailed
          D      Message: WinRM exited (1) for command: [$env:PATH = [System.Environment]::GetEnvironmentVariable("PATH","Machine")

          & $env:systemdrive\opscode\chef\bin\chef-client.bat --local-mode --config $env:TEMP\kitchen\client.rb --log_level auto --force-formatter --no-color --json-attributes $env:TEMP\kitchen\dna.json --chef-zero-port 8889]
          D      ----------------------
          D      ------Backtrace-------
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/provisioner/base.rb:76:in `rescue in call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/provisioner/base.rb:79:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:373:in `block in converge_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:513:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:513:in `synchronize_or_call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:478:in `block in action'
          D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:477:in `action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:369:in `converge_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:348:in `block in transition_to'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:347:in `each'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:347:in `transition_to'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/instance.rb:138:in `converge'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:194:in `public_send'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:194:in `run_action_in_thread'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/test-kitchen-1.9.2/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
          D      ----End Backtrace-----
          D      [WinRM] closing remote shell FF1880CD-88FA-4A95-AFCF-7BA758C1933B on http://10.194.14.46:5985/wsman
          D      [WinRM] closing remote shell C5287A6B-6D6B-4A3A-BEE6-E834FABD96D7 on http://10.194.14.46:5985/wsman
          D      [WinRM] remote shell C5287A6B-6D6B-4A3A-BEE6-E834FABD96D7 closed
          STDERR: >>>>>> Converge failed on instance <default-windows-2012r2>.
          >>>>>> Please see .kitchen/logs/default-windows-2012r2.log for more details
          >>>>>> ------Exception-------
          >>>>>> Class: Kitchen::ActionFailed
          >>>>>> Message: WinRM exited (1) for command: [$env:PATH = [System.Environment]::GetEnvironmentVariable("PATH","Machine")

          & $env:systemdrive\opscode\chef\bin\chef-client.bat --local-mode --config $env:TEMP\kitchen\client.rb --log_level auto --force-formatter --no-color --json-attributes $env:TEMP\kitchen\dna.json --chef-zero-port 8889]
          >>>>>> ----------------------
          ---- End output of bundle exec kitchen converge  -c -l debug ----
          Ran bundle exec kitchen converge  -c -l debug returned 10

          Resource Declaration:
          ---------------------
          # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/recipes/provision.rb

            1: top_cookbooks "converge"

          Compiled Resource:
          ------------------
          # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/cookbooks/acceptance-cookbook/recipes/provision.rb:1:in `from_file'

          top_cookbooks("converge") do
            action [:run]
            updated true
            updated_by_last_action true
            retries 0
            retry_delay 2
            default_guard_interpreter :default
            declared_type :top_cookbooks
            cookbook_name "acceptance-cookbook"
            recipe_name "provision"
            command "converge"
          end

      Starting audit phase
    60540: |2

      Running handlers:
      [2016-06-30T19:15:48+00:00] ERROR: Running exception handlers
      Running handlers complete
      [2016-06-30T19:15:48+00:00] ERROR: Exception handlers complete
      Chef Client failed. 23 resources updated in 47 minutes 42 seconds
      [2016-06-30T19:15:48+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/cache/chef-stacktrace.out
      [2016-06-30T19:15:48+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
      [2016-06-30T19:15:48+00:00] ERROR: Found 1 errors, they are stored in the backtrace
      [2016-06-30T19:15:48+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
      STDERR:
      ---- End output of chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/dna.json -o acceptance-cookbook::provision --no-color ----
      Ran chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/top-cookbooks/provision/dna.json -o acceptance-cookbook::provision --no-color returned 1
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:289:in `invalid!'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:276:in `error!'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/chef_runner.rb:53:in `block in run!'
      /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:219:in `block in with_clean_env'
      /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:199:in `with_original_env'
      /home/jenkins/.chefdk/gem/ruby/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:205:in `with_clean_env'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/chef_runner.rb:42:in `run!'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:149:in `run_command'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:116:in `block in run_suite'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:114:in `each'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:114:in `run_suite'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:76:in `block (2 levels) in start_worker'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:74:in `loop'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:74:in `block in start_worker'
      CHEF-ACCEPTANCE::[2016-06-30 19:15:49 +0000] --force-destroy specified so attempting to run the destroy recipe
      TOP-COOKBOOKS::DESTROY::[2016-06-30 19:15:49 +0000] Initialized [/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/logs/top-cookbooks/destroy.log] logger...
    60819: |
      CHEF-ACCEPTANCE::[2016-06-30 19:16:40 +0000] | top-cookbooks   | Total         | 00:48:43 | Y     |
      CHEF-ACCEPTANCE::[2016-06-30 19:16:40 +0000] | Run             | Total         | 00:48:43 | Y     |
      Build step 'Invoke XShell command' marked build as failure
      Archiving artifacts
      Recording fingerprints
steps:
  total: 50m14s
  before (setup time): 1m30s
  CHEF-ACCEPTANCE:
    total: 48m44s
    OMNITRUCK::PROVISION: 21s
    TRIVIAL::PROVISION: 4m28s
    TOP-COOKBOOKS::PROVISION: 47m53s
    OMNITRUCK::VERIFY: 18s
    WINDOWS-SERVICE::PROVISION: 4m57s
    TRIVIAL::VERIFY: 16s
    TRIVIAL::DESTROY: 13s
    FIPS::PROVISION: 5m42s
    WINDOWS-SERVICE::VERIFY: 54s
    WINDOWS-SERVICE::DESTROY: 16s
    BASICS::PROVISION: 56s
    BASICS::VERIFY: 25s
    BASICS::DESTROY: 11s
    DATA-COLLECTOR::PROVISION: 1m15s
    DATA-COLLECTOR::VERIFY: 39s
    DATA-COLLECTOR::DESTROY: 14s
    FIPS::DESTROY: 15s
    TOP-COOKBOOKS::DESTROY: 51s
chef_acceptance_timing:
- omnitruck:
    provision: 12s
    verify: 12s
    destroy: 6s
    Total: 48s
  trivial:
    provision: 3m49s
    verify: 11s
    destroy: 9s
    Total: 4m56s
  windows-service:
    provision: 4m22s
    verify: 47s
    destroy: 10s
    Total: 6m8s
  basics:
    provision: 47s
    verify: 20s
    destroy: 7s
    Total: 1m32s
  data-collector:
    provision: 1m5s
    verify: 33s
    destroy: 10s
    Total: 2m10s
  fips:
    provision: 4m46s
    force-destroy: 7s
    Total: 5m53s
  top-cookbooks:
    provision: 43m54s
    force-destroy: 35s
    Total: 48m43s
  Run:
    Total: 48m43s
