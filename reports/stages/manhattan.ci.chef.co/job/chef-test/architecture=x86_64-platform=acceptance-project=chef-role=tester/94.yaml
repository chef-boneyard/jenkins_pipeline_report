---
result: FAILURE
failure_category: code
failure_cause: chef_acceptance[fips::provision]
failed_in:
  chef_acceptance:
  - fips::provision
  step: CHEF-ACCEPTANCE
timestamp: 2016-07-24 02:28:18 UTC
url: http://manhattan.ci.chef.co/job/chef-test/architecture=x86_64,platform=acceptance,project=chef,role=tester/94/
trigger_url: http://manhattan.ci.chef.co/job/chef-trigger-ad_hoc/99/
duration: 4m1s
logs:
  consoleText:
    3131: |
      D      Class: Kitchen::ActionFailed
      D      Message: 2 actions failed.
      >>>>>>     Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).] on fips-unit-functional-windows-2012r2
      >>>>>>     Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-integration-windows-2012r2
      D      ----------------------
      D      ------Backtrace-------
    3170: |
      D      -Composite Exception--
      D      Class: Kitchen::ActionFailed
      D      Message: Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).] on fips-unit-functional-windows-2012r2
      D      ----------------------
      D      ------Backtrace-------
      FIPS::PROVISION::[2016-07-24 02:32:18 +0000] >>>>>> ------Exception-------
      >>>>>> Class: Kitchen::ActionFailed
      >>>>>> Message: 2 actions failed.
      >>>>>>     Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).] on fips-unit-functional-windows-2012r2
      >>>>>>     Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-integration-windows-2012r2
      >>>>>> ----------------------
      >>>>>> Please see .kitchen/logs/kitchen.log for more details
    3219: |
      FIPS::PROVISION::[2016-07-24 02:32:18 +0000] D      ---Nested Exception---
      FIPS::PROVISION::[2016-07-24 02:32:18 +0000] D      Class: Kitchen::ActionFailed
      FIPS::PROVISION::[2016-07-24 02:32:18 +0000] D      Message: Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).]
      FIPS::PROVISION::[2016-07-24 02:32:18 +0000] D      ----------------------
      FIPS::PROVISION::[2016-07-24 02:32:18 +0000] D      ------Backtrace-------
    3260: |
      FIPS::PROVISION::[2016-07-24 02:32:18 +0000] D      -Composite Exception--
      FIPS::PROVISION::[2016-07-24 02:32:18 +0000] D      Class: Kitchen::ActionFailed
      FIPS::PROVISION::[2016-07-24 02:32:18 +0000] D      Message: Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-integration-windows-2012r2
      FIPS::PROVISION::[2016-07-24 02:32:18 +0000] D      ----------------------
      FIPS::PROVISION::[2016-07-24 02:32:18 +0000] D      ------Backtrace-------
    3302: |
      D      ---Nested Exception---
      D      Class: Kitchen::ActionFailed
      D      Message: Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>]
      D      ----------------------
      D      ------Backtrace-------
    3345: |
      FIPS::PROVISION::[2016-07-24 02:32:18 +0000]

            ================================================================================
            Error executing action `run` on resource 'ruby_block[copy_kitchen_logs_to_data_path]'
            ================================================================================

            Mixlib::ShellOut::ShellCommandFailed
            ------------------------------------
            Expected process to exit with [0], but received '20'
            ---- Begin output of bundle exec kitchen converge  -c -l debug ----
            STDOUT: -----> Starting Kitchen (v1.10.2)
            D      winrm requested, loading winrm gem (["~> 2.0"])
            D      winrm is loaded.
            D      winrm-fs requested, loading winrm-fs gem (["~> 1.0"])
            D      winrm-fs is loaded.
            D      winrm requested, loading winrm gem (["~> 2.0"])
            D      winrm was already loaded.
            D      winrm-fs requested, loading winrm-fs gem (["~> 1.0"])
            D      winrm-fs was already loaded.
            -----> Creating <fips-unit-functional-windows-2012r2>...
            D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
            D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
            -----> Creating <fips-integration-windows-2012r2>...
            D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
            D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
            D      Search returned 3 images:
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.07.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-07-14T09:59:33.000Z
            D      Search returned 3 images:
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.07.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-07-14T09:59:33.000Z
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
            D      Image for fips-unit-functional-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.07.13.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-07-14T09:59:33.000Z
                   Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
            D      No SSH username specified: using default username administrator  for image ami-26e72546, which we detected as windows 2012r2rtm x86_64.
                   If you are not using an account that qualifies under the AWS
            free-tier, you may be charged to run these suites. The charge
            should be minimal, but neither Test Kitchen nor its maintainers
            are responsible for your incurred costs.

            D      Creating EC2 instance in region us-west-2 with properties:
            D      - instance_type = "m3.large"
            D      - ebs_optimized = false
            D      - image_id = "ami-26e72546"
            D      - key_name = "jenkins"
            D
      FIPS::PROVISION::[2016-07-24 02:32:18 +0000]      - subnet_id = "subnet-19ac017c"
            D      Image for fips-integration-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.07.13.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-07-14T09:59:33.000Z
    5687: |2
            D      Class: Kitchen::ActionFailed
            D      Message: 2 actions failed.
            >>>>>>     Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).] on fips-unit-functional-windows-2012r2
            >>>>>>     Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-integration-windows-2012r2
            D      ----------------------
            D      ------Backtrace-------
    5726: |2
            D      -Composite Exception--
            D      Class: Kitchen::ActionFailed
            D      Message: Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).] on fips-unit-functional-windows-2012r2
            D      ----------------------
            D      ------Backtrace-------
    5769: |2
            D      ---Nested Exception---
            D      Class: Kitchen::ActionFailed
            D      Message: Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).]
            D      ----------------------
            D      ------Backtrace-------
    5812: |2
            D      -Composite Exception--
            D      Class: Kitchen::ActionFailed
            D      Message: Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-integration-windows-2012r2
            D      ----------------------
            D      ------Backtrace-------
    5855: |2
            D      ---Nested Exception---
            D      Class: Kitchen::ActionFailed
            D      Message: Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>]
            D      ----------------------
            D      ------Backtrace-------
    5899: |2
            >>>>>> Class: Kitchen::ActionFailed
            >>>>>> Message: 2 actions failed.
            >>>>>>     Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).] on fips-unit-functional-windows-2012r2
            >>>>>>     Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit o
      FIPS::PROVISION::[2016-07-24 02:32:18 +0000] r an application request. </f:Message></f:WSManFault>] on fips-integration-windows-2012r2
            >>>>>> ----------------------
    5910: |2
            Cookbook Trace:
            ---------------
            /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:55:in `block (3 levels) in <class:Kitchen>'

            Resource Declaration:
    5964: |2


          ================================================================================
          Error executing action `run` on resource 'kitchen[converge]'
          ================================================================================

          Mixlib::ShellOut::ShellCommandFailed
          ------------------------------------
          ruby_block[copy_kitchen_logs_to_data_path] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 39) had a
      FIPS::PROVISION::[2016-07-24 02:32:18 +0000] n error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '20'
          ---- Begin output of bundle exec kitchen converge  -c -l debug ----
    8306: |2
          D      Class: Kitchen::ActionFailed
          D      Message: 2 actions failed.
          >>>>>>     Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).] on fips-unit-functional-windows-2012r2
          >>>>>>     Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-integration-windows-2012r2
          D      ----------------------
          D      ------Backtrace-------
    8345: |2
          D      -Composite Exception--
          D      Class: Kitchen::ActionFailed
          D      Message: Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).] on fips-unit-functional-windows-2012r2
          D      ----------------------
          D      ------Backtrace-------
    8388: |2
          D      ---Nested Exception---
          D      Class: Kitchen::ActionFailed
          D      Message: Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).]
          D      ----------------------
          D      ------Backtrace-------
    8431: |2
          D      -Composite Exception--
          D      Class: Kitchen::ActionFailed
          D      Message: Failed to complete #converge action: [[WSMAN ERROR CODE:
      FIPS::PROVISION::[2016-07-24 02:32:18 +0000]  995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-integration-windows-2012r2
          D      ----------------------
    8475: |2
          D      ---Nested Exception---
          D      Class: Kitchen::ActionFailed
          D      Message: Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>]
          D      ----------------------
          D      ------Backtrace-------
    8519: |2
          >>>>>> Class: Kitchen::ActionFailed
          >>>>>> Message: 2 actions failed.
          >>>>>>     Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).] on fips-unit-functional-windows-2012r2
          >>>>>>     Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-integration-windows-2012r2
          >>>>>> ----------------------
          >>>>>> Please see .kitchen/logs/kitchen.log for more details
    8529: |2
          Cookbook Trace:
          ---------------
          /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:55:in `block (3 levels) in <class:Kitchen>'

          Resource Declaration:
    8568: |
      FIPS::PROVISION::[2016-07-24 02:32:19 +0000] Running handlers:
      FIPS::PROVISION::[2016-07-24 02:32:19 +0000]
      FIPS::PROVISION::[2016-07-24 02:32:19 +0000] [2016-07-24T02:32:19+00:00] ERROR: Running exception handlers
      FIPS::PROVISION::[2016-07-24 02:32:19 +0000] Running handlers complete
      FIPS::PROVISION::[2016-07-24 02:32:19 +0000] [2016-07-24T02:32:19+00:00] ERROR: Exception handlers complete
      FIPS::PROVISION::[2016-07-24 02:32:19 +0000] Chef Client failed. 0 resources updated in 02 minutes 16 seconds
      FIPS::PROVISION::[2016-07-24 02:32:19 +0000]
      FIPS::PROVISION::[2016-07-24 02:32:19 +0000] [2016-07-24T02:32:19+00:00] ERROR: Failed to post audit report to server. Saving report to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/failed-audit-data.json
      FIPS::PROVISION::[2016-07-24 02:32:19 +0000] [2016-07-24T02:32:19+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/chef-stacktrace.out
      FIPS::PROVISION::[2016-07-24 02:32:19 +0000] [2016-07-24T02:32:19+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
      FIPS::PROVISION::[2016-07-24 02:32:19 +0000] [2016-07-24T02:32:19+00:00] ERROR: Found 1 errors, they are stored in the backtrace
      FIPS::PROVISION::[2016-07-24 02:32:20 +0000] [2016-07-24T02:32:20+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
      CHEF-ACCEPTANCE::[2016-07-24 02:32:20 +0000] Encountered an error running the recipe provision: Expected process to exit with [0], but received '1'
      ---- Begin output of chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/dna.json -o acceptance-cookbook::provision --no-color ----
    10887: |
      D      Class: Kitchen::ActionFailed
      D      Message: 2 actions failed.
      >>>>>>     Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).] on fips-unit-functional-windows-2012r2
      >>>>>>     Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-integration-windows-2012r2
      D      ----------------------
      D      ------Backtrace-------
    10925: |
      D      -Composite Exception--
      D      Class: Kitchen::ActionFailed
      D      Message: Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).] on fips-unit-functional-windows-2012r2
      D      ----------------------
      D      ------Backtrace-------
      >>>>>> ------Exception-------
      >>>>>> Class: Kitchen::ActionFailed
      >>>>>> Message: 2 actions failed.
      >>>>>>     Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).] on fips-unit-functional-windows-2012r2
      >>>>>>     Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-integration-windows-2012r2
      >>>>>> ----------------------
      >>>>>> Please see .kitchen/logs/kitchen.log for more details
    10974: |
      D      ---Nested Exception---
      D      Class: Kitchen::ActionFailed
      D      Message: Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).]
      D      ----------------------
      D      ------Backtrace-------
    11015: |
      D      -Composite Exception--
      D      Class: Kitchen::ActionFailed
      D      Message: Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-integration-windows-2012r2
      D      ----------------------
      D      ------Backtrace-------
    11056: |
      D      ---Nested Exception---
      D      Class: Kitchen::ActionFailed
      D      Message: Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>]
      D      ----------------------
      D      ------Backtrace-------
    11097: |2


            ================================================================================
            Error executing action `run` on resource 'ruby_block[copy_kitchen_logs_to_data_path]'
            ================================================================================

            Mixlib::ShellOut::ShellCommandFailed
            ------------------------------------
            Expected process to exit with [0], but received '20'
            ---- Begin output of bundle exec kitchen converge  -c -l debug ----
            STDOUT: -----> Starting Kitchen (v1.10.2)
            D      winrm requested, loading winrm gem (["~> 2.0"])
            D      winrm is loaded.
            D      winrm-fs requested, loading winrm-fs gem (["~> 1.0"])
            D      winrm-fs is loaded.
            D      winrm requested, loading winrm gem (["~> 2.0"])
            D      winrm was already loaded.
            D      winrm-fs requested, loading winrm-fs gem (["~> 1.0"])
            D      winrm-fs was already loaded.
            -----> Creating <fips-unit-functional-windows-2012r2>...
            D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
            D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
            -----> Creating <fips-integration-windows-2012r2>...
            D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
            D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
            D      Search returned 3 images:
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.07.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-07-14T09:59:33.000Z
            D      Search returned 3 images:
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.07.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-07-14T09:59:33.000Z
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
            D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
            D      Image for fips-unit-functional-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.07.13.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-07-14T09:59:33.000Z
                   Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
            D      No SSH username specified: using default username administrator  for image ami-26e72546, which we detected as windows 2012r2rtm x86_64.
                   If you are not using an account that qualifies under the AWS
            free-tier, you may be charged to run these suites. The charge
            should be minimal, but neither Test Kitchen nor its maintainers
            are responsible for your incurred costs.

            D      Creating EC2 instance in region us-west-2 with properties:
            D      - instance_type = "m3.large"
            D      - ebs_optimized = false
            D      - image_id = "ami-26e72546"
            D      - key_name = "jenkins"
            D      - subnet_id = "subnet-19ac017c"
            D      Image for fips-integration-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.07.13.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-07-14T09:59:33.000Z
                   Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
            D      No SSH username specified: using default username administrator  for image ami-26e72546, which we detected as windows 2012r2rtm x86_64.
                   If you are not using an account that qualifies under the AWS
            free-tier, you may be charged to run these suites. The charge
            should be minimal, but neither Test Kitchen nor its maintainers
            are responsible for your incurred costs.

            D      Creating EC2 instance in region us-west-2 with properties:
            D      - instance_type = "m3.large"
            D      - ebs_optimized = false
            D      - image_id = "ami-26e72546"
            D      - key_name = "jenkins"
            D      - subnet_id = "subnet-19ac017c"
            D      - private_ip_address = nil
            D      - placement = {:availability_zone=>"us-west-2a"}
            D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
            D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
            D      - private_ip_address = nil
            D      - placement = {:availability_zone=>"us-west-2a"}
            D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
            D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                   Instance <i-604bc9cf> requested.
                   Polling AWS for existence, attempt 0...
                   Instance <i-0049cbaf> requested.
                   Polling AWS for existence, attempt 0...
                   Attempting to tag the instance, 0 retries
                   Attempting to tag the instance, 0 retries
                   EC2 instance <i-604bc9cf> created.
                   Waited 0/300s for instance <i-604bc9cf> to become ready.
                   EC2 instance <i-0049cbaf> created.
                   Waited 0/300s for instance <i-0049cbaf> to become ready.
                   Waited 5/300s for instance <i-604bc9cf> to become ready.
                   Waited 5/300s for instance <i-0049cbaf> to become ready.
                   Waited 10/300s for instance <i-0049cbaf> to become ready.
                   Waited 10/300s for instance <i-604bc9cf> to become ready.
                   Waited 15/300s for instance <i-0049cbaf> to become ready.
                   Waited 15/300s for instance <i-604bc9cf> to become ready.
                   Waited 20/300s for instance <i-0049cbaf> to become ready.
                   Waited 20/300s for instance <i-604bc9cf> to become ready.
                   Waited 25/300s for instance <i-0049cbaf> to become ready.
                   Waited 25/300s for instance <i-604bc9cf> to become ready.
                   Waited 30/300s for instance <i-0049cbaf> to become ready.
                   Waited 30/300s for instance <i-604bc9cf> to become ready.
                   Waited 35/300s for instance <i-0049cbaf> to become ready.
                   Waited 35/300s for instance <i-604bc9cf> to become ready.
                   Waited 40/300s for instance <i-0049cbaf> to become ready.
                   Waited 40/300s for instance <i-604bc9cf> to become ready.
                   Waited 45/300s for instance <i-0049cbaf> to become ready.
                   Waited 45/300s for instance <i-604bc9cf> to become ready.
                   Waited 50/300s for instance <i-0049cbaf> to become ready.
                   Waited 50/300s for instance <i-604bc9cf> to become ready.
                   Waited 55/300s for instance <i-0049cbaf> to become ready.
                   Waited 55/300s for instance <i-604bc9cf> to become ready.
                   Waited 60/300s for instance <i-0049cbaf> to become ready.
                   Waited 60/300s for instance <i-604bc9cf> to become ready.
                   Waited 65/300s for instance <i-0049cbaf> to become ready.
                   Waited 65/300s for instance <i-604bc9cf> to become ready.
                   Waited 70/300s for instance <i-0049cbaf> to become ready.
                   Waited 70/300s for instance <i-604bc9cf> to become ready.
                   Waited 75/300s for instance <i-0049cbaf> to become ready.
                   Waited 75/300s for instance <i-604bc9cf> to become ready.
                   Waited 80/300s for instance <i-0049cbaf> to become ready.
                   Waited 80/300s for instance <i-604bc9cf> to become ready.
                   Waited 85/300s for instance <i-0049cbaf> to become ready.
                   Waited 85/300s for instance <i-604bc9cf> to become ready.
            D      Console output: ---
            2016/07/24 02:31:23Z: EC2ConfigMonitorState: 0
            2016/07/24 02:31:23Z: Windows sysprep configuration complete.
            2016/07/24 02:31:25Z: AMI Origin Version: 2016.07.13
            2016/07/24 02:31:25Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
            2016/07/24 02:31:25Z: OS: Microsoft Windows NT 6.3.9600
            2016/07/24 02:31:25Z: OsVersion: 6.3
            2016/07/24 02:31:25Z: OsProductName: Windows Server 2012 R2 Standard
            2016/07/24 02:31:25Z: OsBuildLabEx: 9600.18289.amd64fre.winblue_ltsb.160328-1315
            2016/07/24 02:31:25Z: Language: en-US
            2016/07/24 02:31:25Z: TimeZone: Coordinated Universal Time
            2016/07/24 02:31:25Z: Offset: UTC 00:00:00
            2016/07/24 02:31:25Z: EC2 Agent: Ec2Config service v3.17.1032
            2016/07/24 02:31:27Z: Message: Waiting for meta-data accessibility...
            2016/07/24 02:31:27Z: Message: Meta-data is now available.
            2016/07/24 02:31:27Z: AMI-ID: ami-26e72546
            2016/07/24 02:31:27Z: Instance-ID: i-604bc9cf
            2016/07/24 02:31:29Z: Driver: AWS PV Network Device v7.4.2.0
            2016/07/24 02:31:29Z: Driver: AWS PV Storage Host Adapter v7.4.2.0
            2016/07/24 02:31:29Z: Ec2SetPassword: Enabled
            2016/07/24 02:31:29Z: RDPCERTIFICATE-SUBJECTNAME: WIN-FRIGOCNQ8NQ
            2016/07/24 02:31:29Z: RDPCERTIFICATE-THUMBPRINT: 7EF7CED037EC7303A7FE409859576A2F8A503482
            2016/07/24 02:31:32Z: Username: Administrator
            2016/07/24 02:31:32Z: Password: <Password>
            Eup8KyTKYuZoJlNqkVxKIvbStuqazCFSwO7ZwPiSQzK5utBaseAQHTP3cJ1FbLDnd67Zyyt4moKq/bR640lV+Wp3LSl/hY6LKlFKO/pnsZfNVF45KgWXh1TNGP8gL3vCeTZPSYqwBxBd5ArL1+YWfFmCuy3CHt4i3CMZqW7EyBMZWJ5QKtRgMUCK3Dw2pnZhg/ISRpMWHU9rwNpWp92FJDDI2HVchy0cJeLzVz4CvhMnWbBtx6NF/2b3+e+BGxNaQaZWxzZomn/nyQTYNngI4oVhYc/zXuZXQKIkyehsUZhQb0OV3LCFnHGrktuTVCEHprEY6E0Hw+ICoPPswTc77g==
            </Password>
            2016/07/24 02:31:33Z: Message: Windows is Ready to use

                   Waited 0/300s for instance <i-604bc9cf> to fetch windows admin password.
            D      Console output: ---
            2016/07/24 02:31:23Z: EC2ConfigMonitorState: 0
            2016/07/24 02:31:23Z: Windows sysprep configuration complete.
            2016/07/24 02:31:25Z: AMI Origin Version: 2016.07.13
            2016/07/24 02:31:25Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
            2016/07/24 02:31:25Z: OS: Microsoft Windows NT 6.3.9600
            2016/07/24 02:31:25Z: OsVersion: 6.3
            2016/07/24 02:31:25Z: OsProductName: Windows Server 2012 R2 Standard
            2016/07/24 02:31:25Z: OsBuildLabEx: 9600.18289.amd64fre.winblue_ltsb.160328-1315
            2016/07/24 02:31:25Z: Language: en-US
            2016/07/24 02:31:25Z: TimeZone: Coordinated Universal Time
            2016/07/24 02:31:25Z: Offset: UTC 00:00:00
            2016/07/24 02:31:26Z: EC2 Agent: Ec2Config service v3.17.1032
            2016/07/24 02:31:27Z: Message: Waiting for meta-data accessibility...
            2016/07/24 02:31:27Z: Message: Meta-data is now available.
            2016/07/24 02:31:28Z: AMI-ID: ami-26e72546
            2016/07/24 02:31:28Z: Instance-ID: i-0049cbaf
            2016/07/24 02:31:29Z: Driver: AWS PV Network Device v7.4.2.0
            2016/07/24 02:31:29Z: Driver: AWS PV Storage Host Adapter v7.4.2.0
            2016/07/24 02:31:29Z: Ec2SetPassword: Enabled
            2016/07/24 02:31:29Z: RDPCERTIFICATE-SUBJECTNAME: WIN-SVJUH3RL8CQ
            2016/07/24 02:31:29Z: RDPCERTIFICATE-THUMBPRINT: 03BA8CBF82D9A9E130D7B6793C9384B4047CCFCD
            2016/07/24 02:31:32Z: Username: Administrator
            2016/07/24 02:31:32Z: Password: <Password>
            bpbfIj+dno/EIUHgrhsQiTejWl81KMRKNS8M9YxYEgVIvP886N26zVWfyfLZqUnTiSYHKIs3z4LYfyMQE3EwTT5kriZHWZBK3IQeKJHdXGbxvmnMTLY03YR4qxb4SXcmpy3+9Dk2U52dU81RMi9HwuZaZ3eTs6slH9Nu28c1hjjL0Qn0BwH01WJfmZRQrQyvGZQzh/st6zv1aNa2CRj9IGrOaTGUMe7Tx4ViYRq5XS4CEgaisJRUI4vhdD443PSdwht6jhjaqwxHm/nC3lkhd2tnxKa00FxgdlH2PsrkqoknBZeuckSBAv4dWtLFvk7zDyd/b/TdJAlE4/Ett2Rn2w==
            </Password>
            2016/07/24 02:31:33Z: Message: Windows is Ready to use

                   Waited 0/300s for instance <i-0049cbaf> to fetch windows admin password.
                   Retrieved Windows password for instance <i-604bc9cf>.
                   EC2 instance <i-604bc9cf> ready.
                   Retrieved Windows password for instance <i-0049cbaf>.
                   EC2 instance <i-0049cbaf> ready.
            D      [WinRM] <{:endpoint=>"http://10.194.10.20:5985/wsman", :user=>"administrator", :password=>"x?w$@x%96i", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"x?w$@x%96i", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
            ')
            D      [WinRM] opening remote shell on http://10.194.10.20:5985/wsman
            D      [WinRM] <{:endpoint=>"http://10.194.14.36:5985/wsman", :user=>"administrator", :password=>"ES-AQjsVJHU", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"ES-AQjsVJHU", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
            ')
            D      [WinRM] opening remote shell on http://10.194.14.36:5985/wsman
            D      [WinRM] Waiting for output...
            D      [WinRM] Processing output
            D      [WinRM] polling for pipeline state. message: #<WinRM::PSRP::Message:0x00000003e8b860 @data="\xEF\xBB\xBF<Obj RefId=\"0\"><MS><Version N=\"protocolversion\">2.2</Version><Version N=\"PSVersion\">2.0</Version><Version N=\"SerializationVersion\">1.1.0.1</Version></MS></Obj>", @destination=1, @type=65538, @pipeline_id="00000000-0000-0000-0000-000000000000", @runspace_pool_id="00000000-0000-0000-0000-000000000000">
            D      [WinRM] Waiting for output...
            D      [WinRM] Processing output
            D      [WinRM] polling for pipeline state. message: #<WinRM::PSRP::Message:0x00000003d96748 @data="\xEF\xBB\xBF<Obj RefId=\"0\"><MS><Obj N=\"ApplicationPrivateData\" RefId=\"1\"><TN RefId=\"0\"><T>System.Management.Automation.PSPrimitiveDictionary</T><T>System.Collections.Hashtable</T><T>System.Object</T></TN><DCT><En><S N=\"Key\">DebugMode</S><I32 N=\"Value\">1</I32></En><En><S N=\"Key\">DebugStop</S><B N=\"Value\">false</B></En><En><S N=\"Key\">PSVersionTable</S><Obj N=\"Value\" RefId=\"2\"><TNRef RefId=\"0\" /><DCT><En><S N=\"Key\">PSVersion</S><Version N=\"Value\">2.0</Version></En><En><S N=\"Key\">PSCompatibleVersions</S><Obj N=\"Value\" RefId=\"3\"><TN RefId=\"1\"><T>System.Version[]</T><T>System.Array</T><T>System.Object</T></TN><LST><Version>1.0</Version><Version>2.0</Version><Version>3.0</Version><Version>4.0</Version></LST></Obj></En><En><S N=\"Key\">BuildVersion</S><Version N=\"Value\">6.3.9600.17400</Version></En><En><S N=\"Key\">CLRVersion</S><Version N=\"Value\">4.0.30319.42000</Version></En><En><S N=\"Key\">WSManStackVersion</S><Version N=\"Value\">3.0</Version></En><En><S N=\"Key\">PSRemotingProtocolVersion</S><Version N=\"Value\">2.2</Version></En><En><S N=\"Key\">SerializationVersion</S><Version N=\"Value\">1.1.0.1</Version></En></DCT></Obj></En><En><S N=\"Key\">DebugBreakpointCount</S><I32 N=\"Value\">0</I32></En></DCT></Obj></MS></Obj>", @destination=1, @type=135177, @pipeline_id="00000000-0000-0000-0000-000000000000", @runspace_pool_id="00000000-0000-0000-0000-000000000000">
            D      [WinRM] Waiting for output...
            D      [WinRM] Processing output
            D      [WinRM] polling for pipeline state. message: #<WinRM::PSRP::Message:0x00000002d572b0 @data="\xEF\xBB\xBF<Obj RefId=\"0\"><MS><I32 N=\"RunspaceState\">2</I32></MS></Obj>", @destination=1, @type=135173, @pipeline_id="00000000-0000-0000-0000-000000000000", @runspace_pool_id="00000000-0000-0000-0000-000000000000">
            D      [WinRM] remote shell created with shell_id: 88CAB3BA-A3DD-4AB8-B45F-942201C523B7
            D      [WinRM] Command created for Write-Host '[WinRM] Established
            ' with id: 4A7E3D5D-6856-4292-89B2-2F6C81B5E6C9
            D      [WinRM] creating command_id: 4A7E3D5D-6856-4292-89B2-2F6C81B5E6C9 on shell_id 88CAB3BA-A3DD-4AB8-B45F-942201C523B7
            D      [WinRM] Waiting for output...
            D      [WinRM] Processing output
                   [WinRM] Established

            D      [WinRM] cleaning up command_id: 4A7E3D5D-6856-4292-89B2-2F6C81B5E6C9 on shell_id 88CAB3BA-A3DD-4AB8-B45F-942201C523B7
            D      [WinRM] reusing existing connection <{:endpoint=>"http://10.194.10.20:5985/wsman", :user=>"administrator", :password=>"x?w$@x%96i", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"x?w$@x%96i", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
            D      [WinRM] <{:endpoint=>"http://10.194.10.20:5985/wsman", :user=>"administrator", :password=>"x?w$@x%96i", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"x?w$@x%96i", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)
            D      [WinRM] Command created for New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File with id: E37854B5-87D2-4A9A-90E5-FAD649CDBDFE
            D      [WinRM] creating command_id: E37854B5-87D2-4A9A-90E5-FAD649CDBDFE on shell_id 88CAB3BA-A3DD-4AB8-B45F-942201C523B7
            D      [WinRM] Waiting for output...
            D      [WinRM] Processing output


                       Directory: C:\chef\ohai\hints


                   Mode                LastWriteTime     Length Name
                   ----                -------------     ------ ----
                   -a---         7/24/2016   2:32 AM          0 ec2.json


            D      [WinRM] cleaning up command_id: E37854B5-87D2-4A9A-90E5-FAD649CDBDFE on shell_id 88CAB3BA-A3DD-4AB8-B45F-942201C523B7
            D      ec2:create '10.194.10.20'
                   Finished creating <fips-unit-functional-windows-2012r2> (2m2.35s).
            -----> Converging <fips-unit-functional-windows-2012r2>...
                   Preparing files for transfer
            D      Creating local sandbox in /tmp/cheftest/fips-unit-functional-windows-2012r2-sandbox-20160724-8146-yp150q
                   Preparing dna.json
            D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                   Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                   Removing non-cookbook files before transfer
                   Preparing validation.pem
            D      Using a dummy validation.pem
                   Preparing client.rb
            D      Creating client.rb from {:node_name=>"fips-unit-functional-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
            D      [WinRM] reusing existing connection <{:endpoint=>"http://10.194.10.20:5985/wsman", :user=>"administrator", :password=>"x?w$@x%96i", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"x?w$@x%96i", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
            D      [WinRM] <{:endpoint=>"http://10.194.10.20:5985/wsman", :user=>"administrator", :password=>"x?w$@x%96i", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"x?w$@x%96i", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
            function Get-PlatformVersion {
              switch -regex ((get-wmiobject win32_operatingsystem).version) {
                '10\.0\.\d+' {$platform_version = '2012r2'}
                '6\.3\.\d+'  {$platform_version = '2012r2'}
                '6\.2\.\d+'  {$platform_version = '2012'}
                '6\.1\.\d+'  {$platform_version = '2008r2'}
                '6\.0\.\d+'  {$platform_version = '2008'}
              }
              return $platform_version
            }

            function Get-PlatformArchitecture {
              if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                $architecture = 'x86_64'
              } else {
                $architecture = 'i386'
              }
              return $architecture
            }

            function New-Uri {
              param ($baseuri, $newuri)

              try {
              new-object System.Uri $baseuri, $newuri
              }
              catch [System.Management.Automation.MethodInvocationException]{
                Write-Error "$($_.exception.message)"
                throw $_.exception
              }
            }

            function Get-WebContent {
              param ($uri, $filepath)
              $proxy = New-Object -TypeName System.Net.WebProxy
              $wc = new-object System.Net.WebClient
              $proxy.Address = $env:http_proxy
              $wc.Proxy = $proxy

              try {
                if ([string]::IsNullOrEmpty($filepath)) {
                  $wc.downloadstring($uri)
                }
                else {
                  $wc.downloadfile($uri, $filepath)
                }
              }
              catch {
                $exception = $_.Exception
                Write-Host "There was an error: "
                do {
                  Write-Host "`t$($exception.message)"
                  $exception = $exception.innerexception
                } while ($exception)
                throw "Failed to download from $uri."
              }
            }

            function Test-ProjectPackage {
              [cmdletbinding()]
              param ($Path, $Algorithm = 'SHA256', $Hash)

              if (-not (get-command get-filehash))   {
                function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                function Get-FileHash ($Path, $Algorithm) {
                  $Path = (resolve-path $path).providerpath
                  $hash = @{Algorithm = $Algorithm; Path = $Path}
                  use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                    use ($in = (gi $path).OpenRead()) {
                      $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                    }
                  }
                  new-object PSObject -Property $hash
                }
              }
              Write-Verbose "Testing the $Algorithm hash for $path."
              $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
              Write-Verbose "`tDesired Hash - '$hash'"
              Write-Verbose "`tActual Hash  - '$ActualHash'"
              $Valid = $ActualHash -eq $Hash
              if (-not $Valid) {
                Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
              }
              return $Valid
            }

            function Get-ProjectMetadata {
              <#
                .SYNOPSIS
                Get metadata for a Chef Software, Inc. project
                .DESCRIPTION
                Get metadata for project
                .EXAMPLE
                iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                Gets the download url and SHA256 checksum for the latest stable release of Chef.
                .EXAMPLE
                iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
              #>
              [cmdletbinding()]
              param (
                # Base url to retrieve metadata from.
                [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                [string]
                # Project to install
                [string]
                $project = 'chef',
                # Version of the application to install
                # This parameter is optional, if not supplied it will provide the latest version,
                # and if an iteration number is not specified, it will grab the latest available iteration.
                # Partial version numbers are also acceptable (using v=11
                # will grab the latest 11.x client which matches the other flags).
                [string]
                $version,
                # Release channel to install from
                $channel = 'unstable',
                # The following legacy switches are just aliases for the current channel
                [switch]
                $prerelease,
                [switch]
                $nightlies,
                [validateset('auto', 'i386', 'x86_64')]
                [string]
                $architecture = 'auto'
              )

              # PowerShell is only on Windows ATM
              $platform = 'windows'
              Write-Verbose "Platform: $platform"

              $platform_version = Get-PlatformVersion
              Write-Verbose "Platform Version: $platform_version"

              if ($architecture -eq 'auto') {
                $architecture = Get-PlatformArchitecture
              }

              Write-Verbose "Architecture: $architecture"
              Write-Verbose "Project: $project"


                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 a9ee4e86c3ecaa44f9aa5a6e63829b4bac2ed7aa6fd2bb0c04228819c602859a" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.9/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.10/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.11/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ios_xr/6/chef-12.13.12+20160724015517-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 b646214b52c4a8d96dc5222ffea096af24bcc0775435faad8ee8284d1435bda0" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/nexus/7/chef-12.13.12+20160724015517-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 dafdbd09910049d5faa739e11ae3eb60b429dc5654b90185e3b151e621b700c2" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/6/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/7/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/10/chef-12.13.12+20160724015517_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 e55eceae56704977fbbc2079656c0bc977b44757be1567f65c20246f47861313" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/8/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/9/chef-12.13.12+20160724015517_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 03448c3175473d14b625b06ab6e2ccefc87fbba73efc45c902f91c2f5e358b8c" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/12.04/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 41c807aa414d673a99188a105c918092e443be6e8366da2222a4de910100bf17" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 41c807aa414d673a99188a105c918092e443be6e8366da2222a4de910100bf17" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 ab7460941b63d771e70410b7f2a3ad5c3f03781126ec5ad1f11b1f83f4f9b43f" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.10/chef-12.13.12+20160724015517-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 28486ff379c1d4699910f860749b7aa2d6cff32e2ec885a32ea52687fca1b636" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.11/chef-12.13.12+20160724015517-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 28486ff379c1d4699910f860749b7aa2d6cff32e2ec885a32ea52687fca1b636" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/12.04/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 eefa11a16bfac9962a6e923997ea63b2ecb5f70ba272baca569fb87f934be6a0" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 eefa11a16bfac9962a6e923997ea63b2ecb5f70ba272baca569fb87f934be6a0" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 3015f45c0d750a3c284b8c6236d1efd3f5bc8006340c5e7a8a390926d0c85712" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 dcde908bc57c3ee76feeb5ddd54990b68d8a9ff4cccbadf03dbe89f048c3b5db" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2008r2/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/10/chef-12.13.12+20160724015517_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 be7a56b4c74bb77aaea253c77dc7634b2133b5e375d26f6765b8647cc2fb9276" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/5/chef-12.13.12+20160724015517-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 628f25c66f3573c09e75ae3a1d5cfe45e57b62cdd918552de21bf90aa9413ddc" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/6/chef-12.13.12+20160724015517-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f17b63a0a9766aa83ac4f44abaec88f2176c25c49950ba4936e2c3df53c40bff" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012r2/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/6/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/7/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/8/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2008r2/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012r2/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/aix/6.1/chef-12.13.12+20160724015517-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5d5ec238856c052851de33c7e6c0ff6bd667706697cdb58ddccad8695d0c9694" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/aix/7.1/chef-12.13.12+20160724015517-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5d5ec238856c052851de33c7e6c0ff6bd667706697cdb58ddccad8695d0c9694" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/6/chef-12.13.12+20160724015517-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 b8ae79aca74bc0f084babc33190e70c499c0b4ff20d3511680e6390fb286e766" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/5/chef-12.13.12+20160724015517-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f91fbb8c747eb3ff29e70c2c0c4a04e510e98f50445082b735c7006e4cdfbbdc" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/9/chef-12.13.12+20160724015517_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 fdf4d823de45cb9379904c1c3c539e74a79eccc67c8e9fa2efad0dafd3a1d011" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.10/chef-12.13.12+20160724015517-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 8a5d6847f46868162cdd26086d2795affc218fd5304498e26544b0331eb05834" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.11/chef-12.13.12+20160724015517-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 8a5d6847f46868162cdd26086d2795affc218fd5304498e26544b0331eb05834" | out-file "$artifact_info_dir/artifact_info" -Append


              $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

              $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

              Write-Verbose "Project details: "
              foreach ($key in $package_metadata.keys) {
                Write-Verbose "`t$key = $($package_metadata[$key])"
              }
              $package_metadata
            }

            function Install-Project {
              <#
                .SYNOPSIS
                Install a Chef Software, Inc. product
                .DESCRIPTION
                Install a Chef Software, Inc. product
                .EXAMPLE
                iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                Installs the latest stable version of Chef.
                .EXAMPLE
                iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                Installs the latest integration build of the Chef Development Kit
              #>
              [cmdletbinding(SupportsShouldProcess=$true)]
              param (
                # Project to install
                [string]
                $project = 'chef',
                # Release channel to install from
                [validateset('current', 'stable', 'unstable')]
                [string]
                $channel = 'stable',
                # Version of the application to install
                # This parameter is optional, if not supplied it will provide the latest version,
                # and if an iteration number is not specified, it will grab the latest available iteration.
                # Partial version numbers are also acceptable (using v=11
                # will grab the latest 11.x client which matches the other flags).
                [string]
                $version,
                # Full path for the downloaded installer.
                [string]
                $filename,
                # Full path to the location to download the installer
                [string]
                $download_directory = $env:temp,
                # The following legacy switches are just aliases for the current channel
                [switch]
                $prerelease,
                [switch]
                $nightlies,
                [validateset('auto', 'i386', 'x86_64')]
                [string]
                $architecture = 'auto'
              )

              $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

              if (-not [string]::IsNullOrEmpty($filename)) {
                $download_directory = split-path $filename
                $filename = split-path $filename -leaf
                if ([string]::IsNullOrEmpty($download_directory)) {
                  $download_directory = $pwd
                }
              }
              else {
                $filename = ($package_metadata.url -split '/')[-1]
              }
              Write-Verbose "Download directory: $download_directory"
              Write-Verbose "Filename: $filename"

              if (-not (test-path $download_directory)) {
                mkdir $download_directory
              }
              $download_directory = (resolve-path $download_directory).providerpath
              $download_destination = join-path $download_directory $filename

              if ((test-path $download_destination) -and
                (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                Write-Verbose "Found existing valid installer at $download_destination."
              }
              else {
                if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                  Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                  Get-WebContent $package_metadata.url -filepath $download_destination
                }
              }

              if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                  Write-Host "Installing $project from $download_destination"
                  $installingProject = $True
                  $installAttempts = 0
                  while ($installingProject) {
                    $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                    $p.WaitForExit()
                    if ($p.ExitCode -eq 1618) {
                      Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                      continue
                    } elseif ($p.ExitCode -ne 0) {
                      throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                    }
                    $installingProject = $False
                  }
                }
                else {
                  throw "Failed to validate the downloaded installer for $project."
                }
              }
            }
            set-alias install -value Install-Project
            export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

            }

            install -project chef -version 12.13.12+20160724015517 -channel unstable
            )
            D      [WinRM] Command created for new-module -name Omnitruck -scriptblock {
            function Get-PlatformVersion {
              switch -regex ((get-wmiobject win32_operatingsystem).version) {
                '10\.0\.\d+' {$platform_version = '2012r2'}
                '6\.3\.\d+'  {$platform_version = '2012r2'}
                '6\.2\.\d+'  {$platform_version = '2012'}
                '6\.1\.\d+'  {$platform_version = '2008r2'}
                '6\.0\.\d+'  {$platform_version = '2008'}
              }
              return $platform_version
            }

            function Get-PlatformArchitecture {
              if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                $architecture = 'x86_64'
              } else {
                $architecture = 'i386'
              }
              return $architecture
            }

            function New-Uri {
              param ($baseuri, $newuri)

              try {
              new-object System.Uri $baseuri, $newuri
              }
              catch [System.Management.Automation.MethodInvocationException]{
                Write-Error "$($_.exception.message)"
                throw $_.exception
              }
            }

            function Get-WebContent {
              param ($uri, $filepath)
              $proxy = New-Object -TypeName System.Net.WebProxy
              $wc = new-object System.Net.WebClient
              $proxy.Address = $env:http_proxy
              $wc.Proxy = $proxy

              try {
                if ([string]::IsNullOrEmpty($filepath)) {
                  $wc.downloadstring($uri)
                }
                else {
                  $wc.downloadfile($uri, $filepath)
                }
              }
              catch {
                $exception = $_.Exception
                Write-Host "There was an error: "
                do {
                  Write-Host "`t$($exception.message)"
                  $exception = $exception.innerexception
                } while ($exception)
                throw "Failed to download from $uri."
              }
            }

            function Test-ProjectPackage {
              [cmdletbinding()]
              param ($Path, $Algorithm = 'SHA256', $Hash)

              if (-not (get-command get-filehash))   {
                function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                function Get-FileHash ($Path, $Algorithm) {
                  $Path = (resolve-path $path).providerpath
                  $hash = @{Algorithm = $Algorithm; Path = $Path}
                  use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                    use ($in = (gi $path).OpenRead()) {
                      $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                    }
                  }
                  new-object PSObject -Property $hash
                }
              }
              Write-Verbose "Testing the $Algorithm hash for $path."
              $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
              Write-Verbose "`tDesired Hash - '$hash'"
              Write-Verbose "`tActual Hash  - '$ActualHash'"
              $Valid = $ActualHash -eq $Hash
              if (-not $Valid) {
                Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
              }
              return $Valid
            }

            function Get-ProjectMetadata {
              <#
                .SYNOPSIS
                Get metadata for a Chef Software, Inc. project
                .DESCRIPTION
                Get metadata for project
                .EXAMPLE
                iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                Gets the download url and SHA256 checksum for the latest stable release of Chef.
                .EXAMPLE
                iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
              #>
              [cmdletbinding()]
              param (
                # Base url to retrieve metadata from.
                [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                [string]
                # Project to install
                [string]
                $project = 'chef',
                # Version of the application to install
                # This parameter is optional, if not supplied it will provide the latest version,
                # and if an iteration number is not specified, it will grab the latest available iteration.
                # Partial version numbers are also acceptable (using v=11
                # will grab the latest 11.x client which matches the other flags).
                [string]
                $version,
                # Release channel to install from
                $channel = 'unstable',
                # The following legacy switches are just aliases for the current channel
                [switch]
                $prerelease,
                [switch]
                $nightlies,
                [validateset('auto', 'i386', 'x86_64')]
                [string]
                $architecture = 'auto'
              )

              # PowerShell is only on Windows ATM
              $platform = 'windows'
              Write-Verbose "Platform: $platform"

              $platform_version = Get-PlatformVersion
              Write-Verbose "Platform Version: $platform_version"

              if ($architecture -eq 'auto') {
                $architecture = Get-PlatformArchitecture
              }

              Write-Verbose "Architecture: $architecture"
              Write-Verbose "Project: $project"


                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 a9ee4e86c3ecaa44f9aa5a6e63829b4bac2ed7aa6fd2bb0c04228819c602859a" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.9/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.10/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.11/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ios_xr/6/chef-12.13.12+20160724015517-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 b646214b52c4a8d96dc5222ffea096af24bcc0775435faad8ee8284d1435bda0" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/nexus/7/chef-12.13.12+20160724015517-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 dafdbd09910049d5faa739e11ae3eb60b429dc5654b90185e3b151e621b700c2" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/6/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/7/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/10/chef-12.13.12+20160724015517_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 e55eceae56704977fbbc2079656c0bc977b44757be1567f65c20246f47861313" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/8/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/9/chef-12.13.12+20160724015517_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 03448c3175473d14b625b06ab6e2ccefc87fbba73efc45c902f91c2f5e358b8c" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/12.04/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 41c807aa414d673a99188a105c918092e443be6e8366da2222a4de910100bf17" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 41c807aa414d673a99188a105c918092e443be6e8366da2222a4de910100bf17" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 ab7460941b63d771e70410b7f2a3ad5c3f03781126ec5ad1f11b1f83f4f9b43f" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.10/chef-12.13.12+20160724015517-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 28486ff379c1d4699910f860749b7aa2d6cff32e2ec885a32ea52687fca1b636" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.11/chef-12.13.12+20160724015517-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 28486ff379c1d4699910f860749b7aa2d6cff32e2ec885a32ea52687fca1b636" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/12.04/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 eefa11a16bfac9962a6e923997ea63b2ecb5f70ba272baca569fb87f934be6a0" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 eefa11a16bfac9962a6e923997ea63b2ecb5f70ba272baca569fb87f934be6a0" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 3015f45c0d750a3c284b8c6236d1efd3f5bc8006340c5e7a8a390926d0c85712" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 dcde908bc57c3ee76feeb5ddd54990b68d8a9ff4cccbadf03dbe89f048c3b5db" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2008r2/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/10/chef-12.13.12+20160724015517_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 be7a56b4c74bb77aaea253c77dc7634b2133b5e375d26f6765b8647cc2fb9276" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/5/chef-12.13.12+20160724015517-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 628f25c66f3573c09e75ae3a1d5cfe45e57b62cdd918552de21bf90aa9413ddc" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/6/chef-12.13.12+20160724015517-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f17b63a0a9766aa83ac4f44abaec88f2176c25c49950ba4936e2c3df53c40bff" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012r2/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/6/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/7/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/8/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2008r2/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012r2/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/aix/6.1/chef-12.13.12+20160724015517-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5d5ec238856c052851de33c7e6c0ff6bd667706697cdb58ddccad8695d0c9694" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/aix/7.1/chef-12.13.12+20160724015517-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5d5ec238856c052851de33c7e6c0ff6bd667706697cdb58ddccad8695d0c9694" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/6/chef-12.13.12+20160724015517-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 b8ae79aca74bc0f084babc33190e70c499c0b4ff20d3511680e6390fb286e766" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/5/chef-12.13.12+20160724015517-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f91fbb8c747eb3ff29e70c2c0c4a04e510e98f50445082b735c7006e4cdfbbdc" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/9/chef-12.13.12+20160724015517_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 fdf4d823de45cb9379904c1c3c539e74a79eccc67c8e9fa2efad0dafd3a1d011" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.10/chef-12.13.12+20160724015517-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 8a5d6847f46868162cdd26086d2795affc218fd5304498e26544b0331eb05834" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.11/chef-12.13.12+20160724015517-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 8a5d6847f46868162cdd26086d2795affc218fd5304498e26544b0331eb05834" | out-file "$artifact_info_dir/artifact_info" -Append


              $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

              $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

              Write-Verbose "Project details: "
              foreach ($key in $package_metadata.keys) {
                Write-Verbose "`t$key = $($package_metadata[$key])"
              }
              $package_metadata
            }

            function Install-Project {
              <#
                .SYNOPSIS
                Install a Chef Software, Inc. product
                .DESCRIPTION
                Install a Chef Software, Inc. product
                .EXAMPLE
                iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                Installs the latest stable version of Chef.
                .EXAMPLE
                iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                Installs the latest integration build of the Chef Development Kit
              #>
              [cmdletbinding(SupportsShouldProcess=$true)]
              param (
                # Project to install
                [string]
                $project = 'chef',
                # Release channel to install from
                [validateset('current', 'stable', 'unstable')]
                [string]
                $channel = 'stable',
                # Version of the application to install
                # This parameter is optional, if not supplied it will provide the latest version,
                # and if an iteration number is not specified, it will grab the latest available iteration.
                # Partial version numbers are also acceptable (using v=11
                # will grab the latest 11.x client which matches the other flags).
                [string]
                $version,
                # Full path for the downloaded installer.
                [string]
                $filename,
                # Full path to the location to download the installer
                [string]
                $download_directory = $env:temp,
                # The following legacy switches are just aliases for the current channel
                [switch]
                $prerelease,
                [switch]
                $nightlies,
                [validateset('auto', 'i386', 'x86_64')]
                [string]
                $architecture = 'auto'
              )

              $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

              if (-not [string]::IsNullOrEmpty($filename)) {
                $download_directory = split-path $filename
                $filename = split-path $filename -leaf
                if ([string]::IsNullOrEmpty($download_directory)) {
                  $download_directory = $pwd
                }
              }
              else {
                $filename = ($package_metadata.url -split '/')[-1]
              }
              Write-Verbose "Download directory: $download_directory"
              Write-Verbose "Filename: $filename"

              if (-not (test-path $download_directory)) {
                mkdir $download_directory
              }
              $download_directory = (resolve-path $download_directory).providerpath
              $download_destination = join-path $download_directory $filename

              if ((test-path $download_destination) -and
                (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                Write-Verbose "Found existing valid installer at $download_destination."
              }
              else {
                if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                  Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                  Get-WebContent $package_metadata.url -filepath $download_destination
                }
              }

              if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                  Write-Host "Installing $project from $download_destination"
                  $installingProject = $True
                  $installAttempts = 0
                  while ($installingProject) {
                    $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                    $p.WaitForExit()
                    if ($p.ExitCode -eq 1618) {
                      Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                      continue
                    } elseif ($p.ExitCode -ne 0) {
                      throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                    }
                    $installingProject = $False
                  }
                }
                else {
                  throw "Failed to validate the downloaded installer for $project."
                }
              }
            }
            set-alias install -value Install-Project
            export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

            }

            install -project chef -version 12.13.12+20160724015517 -channel unstable
             with id: 09BB8B67-C952-4306-BA53-B0B4565ABA74
            D      [WinRM] creating command_id: 09BB8B67-C952-4306-BA53-B0B4565ABA74 on shell_id 88CAB3BA-A3DD-4AB8-B45F-942201C523B7
            D      [WinRM] Waiting for output...
            D      [WinRM] Processing output

                   ModuleType Version    Name                                ExportedCommands
                   ---------- -------    ----                                ----------------
                   Script     0.0        Omnitruck                           {Get-ProjectMetada...
            D      [WinRM] Waiting for output...
            D      [WinRM] cleaning up command_id: 09BB8B67-C952-4306-BA53-B0B4565ABA74 on shell_id 88CAB3BA-A3DD-4AB8-B45F-942201C523B7
                   [WinRM] 500 returned in cleanup with error: Bad HTTP response returned from server. Body(if present): (500).
            D      Cleaning up local sandbox in /tmp/cheftest/fips-unit-functional-windows-2012r2-sandbox-20160724-8146-yp150q
            D      [WinRM] Waiting for output...
            D      [WinRM] Processing output
            D      [WinRM] polling for pipeline state. message: #<WinRM::PSRP::Message:0x0000000442f938 @data="\xEF\xBB\xBF<Obj RefId=\"0\"><MS><Version N=\"protocolversion\">2.2</Version><Version N=\"PSVersion\">2.0</Version><Version N=\"SerializationVersion\">1.1.0.1</Version></MS></Obj>", @destination=1, @type=65538, @pipeline_id="00000000-0000-0000-0000-000000000000", @runspace_pool_id="00000000-0000-0000-0000-000000000000">
            D      [WinRM] Waiting for output...
            D      [WinRM] Processing output
            D      [WinRM] polling for pipeline state. message: #<WinRM::PSRP::Message:0x000000041bce58 @data="\xEF\xBB\xBF<Obj RefId=\"0\"><MS><Obj N=\"ApplicationPrivateData\" RefId=\"1\"><TN RefId=\"0\"><T>System.Management.Automation.PSPrimitiveDictionary</T><T>System.Collections.Hashtable</T><T>System.Object</T></TN><DCT><En><S N=\"Key\">DebugMode</S><I32 N=\"Value\">1</I32></En><En><S N=\"Key\">DebugStop</S><B N=\"Value\">false</B></En><En><S N=\"Key\">PSVersionTable</S><Obj N=\"Value\" RefId=\"2\"><TNRef RefId=\"0\" /><DCT><En><S N=\"Key\">PSVersion</S><Version N=\"Value\">2.0</Version></En><En><S N=\"Key\">PSCompatibleVersions</S><Obj N=\"Value\" RefId=\"3\"><TN RefId=\"1\"><T>System.Version[]</T><T>System.Array</T><T>System.Object</T></TN><LST><Version>1.0</Version><Version>2.0</Version><Version>3.0</Version><Version>4.0</Version></LST></Obj></En><En><S N=\"Key\">BuildVersion</S><Version N=\"Value\">6.3.9600.17400</Version></En><En><S N=\"Key\">CLRVersion</S><Version N=\"Value\">4.0.30319.42000</Version></En><En><S N=\"Key\">WSManStackVersion</S><Version N=\"Value\">3.0</Version></En><En><S N=\"Key\">PSRemotingProtocolVersion</S><Version N=\"Value\">2.2</Version></En><En><S N=\"Key\">SerializationVersion</S><Version N=\"Value\">1.1.0.1</Version></En></DCT></Obj></En><En><S N=\"Key\">DebugBreakpointCount</S><I32 N=\"Value\">0</I32></En></DCT></Obj></MS></Obj>", @destination=1, @type=135177, @pipeline_id="00000000-0000-0000-0000-000000000000", @runspace_pool_id="00000000-0000-0000-0000-000000000000">
            D      [WinRM] Waiting for output...
            D      [WinRM] Processing output
            D      [WinRM] polling for pipeline state. message: #<WinRM::PSRP::Message:0x000000040a75b8 @data="\xEF\xBB\xBF<Obj RefId=\"0\"><MS><I32 N=\"RunspaceState\">2</I32></MS></Obj>", @destination=1, @type=135173, @pipeline_id="00000000-0000-0000-0000-000000000000", @runspace_pool_id="00000000-0000-0000-0000-000000000000">
            D      [WinRM] remote shell created with shell_id: ED645B0F-0808-4848-A782-54A20309AA8D
            D      [WinRM] Command created for Write-Host '[WinRM] Established
            ' with id: DC071345-42F0-49C3-B2B0-6A645EFE337F
            D      [WinRM] creating command_id: DC071345-42F0-49C3-B2B0-6A645EFE337F on shell_id ED645B0F-0808-4848-A782-54A20309AA8D
            D      [WinRM] Waiting for output...
            D      [WinRM] Processing output
                   [WinRM] Established

            D      [WinRM] cleaning up command_id: DC071345-42F0-49C3-B2B0-6A645EFE337F on shell_id ED645B0F-0808-4848-A782-54A20309AA8D
            D      [WinRM] reusing existing connection <{:endpoint=>"http://10.194.14.36:5985/wsman", :user=>"administrator", :password=>"ES-AQjsVJHU", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"ES-AQjsVJHU", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
            D      [WinRM] <{:endpoint=>"http://10.194.14.36:5985/wsman", :user=>"administrator", :password=>"ES-AQjsVJHU", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"ES-AQjsVJHU", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)
            D      [WinRM] Command created for New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File with id: BD731AD8-7C83-4F5A-B165-9FBB9D04E13E
            D      [WinRM] creating command_id: BD731AD8-7C83-4F5A-B165-9FBB9D04E13E on shell_id ED645B0F-0808-4848-A782-54A20309AA8D
            D      [WinRM] Waiting for output...
            D      [WinRM] Processing output


                       Directory: C:\chef\ohai\hints


                   Mode                LastWriteTime     Length Name
                   ----                -------------     ------ ----
                   -a---         7/24/2016   2:32 AM          0 ec2.json


            D      [WinRM] cleaning up command_id: BD731AD8-7C83-4F5A-B165-9FBB9D04E13E on shell_id ED645B0F-0808-4848-A782-54A20309AA8D
            D      ec2:create '10.194.14.36'
                   Finished creating <fips-integration-windows-2012r2> (2m9.03s).
            -----> Converging <fips-integration-windows-2012r2>...
                   Preparing files for transfer
            D      Creating local sandbox in /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160724-8146-1vrnrv5
                   Preparing dna.json
            D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                   Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                   Removing non-cookbook files before transfer
                   Preparing validation.pem
            D      Using a dummy validation.pem
                   Preparing client.rb
            D      Creating client.rb from {:node_name=>"fips-integration-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
            D      [WinRM] reusing existing connection <{:endpoint=>"http://10.194.14.36:5985/wsman", :user=>"administrator", :password=>"ES-AQjsVJHU", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"ES-AQjsVJHU", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
            D      [WinRM] <{:endpoint=>"http://10.194.14.36:5985/wsman", :user=>"administrator", :password=>"ES-AQjsVJHU", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"ES-AQjsVJHU", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
            function Get-PlatformVersion {
              switch -regex ((get-wmiobject win32_operatingsystem).version) {
                '10\.0\.\d+' {$platform_version = '2012r2'}
                '6\.3\.\d+'  {$platform_version = '2012r2'}
                '6\.2\.\d+'  {$platform_version = '2012'}
                '6\.1\.\d+'  {$platform_version = '2008r2'}
                '6\.0\.\d+'  {$platform_version = '2008'}
              }
              return $platform_version
            }

            function Get-PlatformArchitecture {
              if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                $architecture = 'x86_64'
              } else {
                $architecture = 'i386'
              }
              return $architecture
            }

            function New-Uri {
              param ($baseuri, $newuri)

              try {
              new-object System.Uri $baseuri, $newuri
              }
              catch [System.Management.Automation.MethodInvocationException]{
                Write-Error "$($_.exception.message)"
                throw $_.exception
              }
            }

            function Get-WebContent {
              param ($uri, $filepath)
              $proxy = New-Object -TypeName System.Net.WebProxy
              $wc = new-object System.Net.WebClient
              $proxy.Address = $env:http_proxy
              $wc.Proxy = $proxy

              try {
                if ([string]::IsNullOrEmpty($filepath)) {
                  $wc.downloadstring($uri)
                }
                else {
                  $wc.downloadfile($uri, $filepath)
                }
              }
              catch {
                $exception = $_.Exception
                Write-Host "There was an error: "
                do {
                  Write-Host "`t$($exception.message)"
                  $exception = $exception.innerexception
                } while ($exception)
                throw "Failed to download from $uri."
              }
            }

            function Test-ProjectPackage {
              [cmdletbinding()]
              param ($Path, $Algorithm = 'SHA256', $Hash)

              if (-not (get-command get-filehash))   {
                function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                function Get-FileHash ($Path, $Algorithm) {
                  $Path = (resolve-path $path).providerpath
                  $hash = @{Algorithm = $Algorithm; Path = $Path}
                  use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                    use ($in = (gi $path).OpenRead()) {
                      $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                    }
                  }
                  new-object PSObject -Property $hash
                }
              }
              Write-Verbose "Testing the $Algorithm hash for $path."
              $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
              Write-Verbose "`tDesired Hash - '$hash'"
              Write-Verbose "`tActual Hash  - '$ActualHash'"
              $Valid = $ActualHash -eq $Hash
              if (-not $Valid) {
                Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
              }
              return $Valid
            }

            function Get-ProjectMetadata {
              <#
                .SYNOPSIS
                Get metadata for a Chef Software, Inc. project
                .DESCRIPTION
                Get metadata for project
                .EXAMPLE
                iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                Gets the download url and SHA256 checksum for the latest stable release of Chef.
                .EXAMPLE
                iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
              #>
              [cmdletbinding()]
              param (
                # Base url to retrieve metadata from.
                [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                [string]
                # Project to install
                [string]
                $project = 'chef',
                # Version of the application to install
                # This parameter is optional, if not supplied it will provide the latest version,
                # and if an iteration number is not specified, it will grab the latest available iteration.
                # Partial version numbers are also acceptable (using v=11
                # will grab the latest 11.x client which matches the other flags).
                [string]
                $version,
                # Release channel to install from
                $channel = 'unstable',
                # The following legacy switches are just aliases for the current channel
                [switch]
                $prerelease,
                [switch]
                $nightlies,
                [validateset('auto', 'i386', 'x86_64')]
                [string]
                $architecture = 'auto'
              )

              # PowerShell is only on Windows ATM
              $platform = 'windows'
              Write-Verbose "Platform: $platform"

              $platform_version = Get-PlatformVersion
              Write-Verbose "Platform Version: $platform_version"

              if ($architecture -eq 'auto') {
                $architecture = Get-PlatformArchitecture
              }

              Write-Verbose "Architecture: $architecture"
              Write-Verbose "Project: $project"


                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 a9ee4e86c3ecaa44f9aa5a6e63829b4bac2ed7aa6fd2bb0c04228819c602859a" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.9/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.10/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.11/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ios_xr/6/chef-12.13.12+20160724015517-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 b646214b52c4a8d96dc5222ffea096af24bcc0775435faad8ee8284d1435bda0" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/nexus/7/chef-12.13.12+20160724015517-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 dafdbd09910049d5faa739e11ae3eb60b429dc5654b90185e3b151e621b700c2" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/6/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/7/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/10/chef-12.13.12+20160724015517_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 e55eceae56704977fbbc2079656c0bc977b44757be1567f65c20246f47861313" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/8/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/9/chef-12.13.12+20160724015517_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 03448c3175473d14b625b06ab6e2ccefc87fbba73efc45c902f91c2f5e358b8c" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/12.04/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 41c807aa414d673a99188a105c918092e443be6e8366da2222a4de910100bf17" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 41c807aa414d673a99188a105c918092e443be6e8366da2222a4de910100bf17" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 ab7460941b63d771e70410b7f2a3ad5c3f03781126ec5ad1f11b1f83f4f9b43f" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.10/chef-12.13.12+20160724015517-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 28486ff379c1d4699910f860749b7aa2d6cff32e2ec885a32ea52687fca1b636" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.11/chef-12.13.12+20160724015517-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 28486ff379c1d4699910f860749b7aa2d6cff32e2ec885a32ea52687fca1b636" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/12.04/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 eefa11a16bfac9962a6e923997ea63b2ecb5f70ba272baca569fb87f934be6a0" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 eefa11a16bfac9962a6e923997ea63b2ecb5f70ba272baca569fb87f934be6a0" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 3015f45c0d750a3c284b8c6236d1efd3f5bc8006340c5e7a8a390926d0c85712" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 dcde908bc57c3ee76feeb5ddd54990b68d8a9ff4cccbadf03dbe89f048c3b5db" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2008r2/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/10/chef-12.13.12+20160724015517_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 be7a56b4c74bb77aaea253c77dc7634b2133b5e375d26f6765b8647cc2fb9276" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/5/chef-12.13.12+20160724015517-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 628f25c66f3573c09e75ae3a1d5cfe45e57b62cdd918552de21bf90aa9413ddc" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/6/chef-12.13.12+20160724015517-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f17b63a0a9766aa83ac4f44abaec88f2176c25c49950ba4936e2c3df53c40bff" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012r2/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/6/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/7/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/8/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2008r2/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012r2/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/aix/6.1/chef-12.13.12+20160724015517-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5d5ec238856c052851de33c7e6c0ff6bd667706697cdb58ddccad8695d0c9694" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/aix/7.1/chef-12.13.12+20160724015517-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5d5ec238856c052851de33c7e6c0ff6bd667706697cdb58ddccad8695d0c9694" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/6/chef-12.13.12+20160724015517-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 b8ae79aca74bc0f084babc33190e70c499c0b4ff20d3511680e6390fb286e766" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/5/chef-12.13.12+20160724015517-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f91fbb8c747eb3ff29e70c2c0c4a04e510e98f50445082b735c7006e4cdfbbdc" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/9/chef-12.13.12+20160724015517_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 fdf4d823de45cb9379904c1c3c539e74a79eccc67c8e9fa2efad0dafd3a1d011" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.10/chef-12.13.12+20160724015517-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 8a5d6847f46868162cdd26086d2795affc218fd5304498e26544b0331eb05834" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.11/chef-12.13.12+20160724015517-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 8a5d6847f46868162cdd26086d2795affc218fd5304498e26544b0331eb05834" | out-file "$artifact_info_dir/artifact_info" -Append


              $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

              $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

              Write-Verbose "Project details: "
              foreach ($key in $package_metadata.keys) {
                Write-Verbose "`t$key = $($package_metadata[$key])"
              }
              $package_metadata
            }

            function Install-Project {
              <#
                .SYNOPSIS
                Install a Chef Software, Inc. product
                .DESCRIPTION
                Install a Chef Software, Inc. product
                .EXAMPLE
                iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                Installs the latest stable version of Chef.
                .EXAMPLE
                iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                Installs the latest integration build of the Chef Development Kit
              #>
              [cmdletbinding(SupportsShouldProcess=$true)]
              param (
                # Project to install
                [string]
                $project = 'chef',
                # Release channel to install from
                [validateset('current', 'stable', 'unstable')]
                [string]
                $channel = 'stable',
                # Version of the application to install
                # This parameter is optional, if not supplied it will provide the latest version,
                # and if an iteration number is not specified, it will grab the latest available iteration.
                # Partial version numbers are also acceptable (using v=11
                # will grab the latest 11.x client which matches the other flags).
                [string]
                $version,
                # Full path for the downloaded installer.
                [string]
                $filename,
                # Full path to the location to download the installer
                [string]
                $download_directory = $env:temp,
                # The following legacy switches are just aliases for the current channel
                [switch]
                $prerelease,
                [switch]
                $nightlies,
                [validateset('auto', 'i386', 'x86_64')]
                [string]
                $architecture = 'auto'
              )

              $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

              if (-not [string]::IsNullOrEmpty($filename)) {
                $download_directory = split-path $filename
                $filename = split-path $filename -leaf
                if ([string]::IsNullOrEmpty($download_directory)) {
                  $download_directory = $pwd
                }
              }
              else {
                $filename = ($package_metadata.url -split '/')[-1]
              }
              Write-Verbose "Download directory: $download_directory"
              Write-Verbose "Filename: $filename"

              if (-not (test-path $download_directory)) {
                mkdir $download_directory
              }
              $download_directory = (resolve-path $download_directory).providerpath
              $download_destination = join-path $download_directory $filename

              if ((test-path $download_destination) -and
                (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                Write-Verbose "Found existing valid installer at $download_destination."
              }
              else {
                if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                  Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                  Get-WebContent $package_metadata.url -filepath $download_destination
                }
              }

              if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                  Write-Host "Installing $project from $download_destination"
                  $installingProject = $True
                  $installAttempts = 0
                  while ($installingProject) {
                    $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                    $p.WaitForExit()
                    if ($p.ExitCode -eq 1618) {
                      Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                      continue
                    } elseif ($p.ExitCode -ne 0) {
                      throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                    }
                    $installingProject = $False
                  }
                }
                else {
                  throw "Failed to validate the downloaded installer for $project."
                }
              }
            }
            set-alias install -value Install-Project
            export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

            }

            install -project chef -version 12.13.12+20160724015517 -channel unstable
            )
            D      [WinRM] Command created for new-module -name Omnitruck -scriptblock {
            function Get-PlatformVersion {
              switch -regex ((get-wmiobject win32_operatingsystem).version) {
                '10\.0\.\d+' {$platform_version = '2012r2'}
                '6\.3\.\d+'  {$platform_version = '2012r2'}
                '6\.2\.\d+'  {$platform_version = '2012'}
                '6\.1\.\d+'  {$platform_version = '2008r2'}
                '6\.0\.\d+'  {$platform_version = '2008'}
              }
              return $platform_version
            }

            function Get-PlatformArchitecture {
              if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
                $architecture = 'x86_64'
              } else {
                $architecture = 'i386'
              }
              return $architecture
            }

            function New-Uri {
              param ($baseuri, $newuri)

              try {
              new-object System.Uri $baseuri, $newuri
              }
              catch [System.Management.Automation.MethodInvocationException]{
                Write-Error "$($_.exception.message)"
                throw $_.exception
              }
            }

            function Get-WebContent {
              param ($uri, $filepath)
              $proxy = New-Object -TypeName System.Net.WebProxy
              $wc = new-object System.Net.WebClient
              $proxy.Address = $env:http_proxy
              $wc.Proxy = $proxy

              try {
                if ([string]::IsNullOrEmpty($filepath)) {
                  $wc.downloadstring($uri)
                }
                else {
                  $wc.downloadfile($uri, $filepath)
                }
              }
              catch {
                $exception = $_.Exception
                Write-Host "There was an error: "
                do {
                  Write-Host "`t$($exception.message)"
                  $exception = $exception.innerexception
                } while ($exception)
                throw "Failed to download from $uri."
              }
            }

            function Test-ProjectPackage {
              [cmdletbinding()]
              param ($Path, $Algorithm = 'SHA256', $Hash)

              if (-not (get-command get-filehash))   {
                function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
                function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
                function Get-FileHash ($Path, $Algorithm) {
                  $Path = (resolve-path $path).providerpath
                  $hash = @{Algorithm = $Algorithm; Path = $Path}
                  use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                    use ($in = (gi $path).OpenRead()) {
                      $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                    }
                  }
                  new-object PSObject -Property $hash
                }
              }
              Write-Verbose "Testing the $Algorithm hash for $path."
              $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
              Write-Verbose "`tDesired Hash - '$hash'"
              Write-Verbose "`tActual Hash  - '$ActualHash'"
              $Valid = $ActualHash -eq $Hash
              if (-not $Valid) {
                Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
              }
              return $Valid
            }

            function Get-ProjectMetadata {
              <#
                .SYNOPSIS
                Get metadata for a Chef Software, Inc. project
                .DESCRIPTION
                Get metadata for project
                .EXAMPLE
                iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

                Gets the download url and SHA256 checksum for the latest stable release of Chef.
                .EXAMPLE
                iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

                Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
              #>
              [cmdletbinding()]
              param (
                # Base url to retrieve metadata from.
                [uri]$base_server_uri = 'https://omnitruck.chef.io/',
                [string]
                # Project to install
                [string]
                $project = 'chef',
                # Version of the application to install
                # This parameter is optional, if not supplied it will provide the latest version,
                # and if an iteration number is not specified, it will grab the latest available iteration.
                # Partial version numbers are also acceptable (using v=11
                # will grab the latest 11.x client which matches the other flags).
                [string]
                $version,
                # Release channel to install from
                $channel = 'unstable',
                # The following legacy switches are just aliases for the current channel
                [switch]
                $prerelease,
                [switch]
                $nightlies,
                [validateset('auto', 'i386', 'x86_64')]
                [string]
                $architecture = 'auto'
              )

              # PowerShell is only on Windows ATM
              $platform = 'windows'
              Write-Verbose "Platform: $platform"

              $platform_version = Get-PlatformVersion
              Write-Verbose "Platform Version: $platform_version"

              if ($architecture -eq 'auto') {
                $architecture = Get-PlatformArchitecture
              }

              Write-Verbose "Architecture: $architecture"
              Write-Verbose "Project: $project"


                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 a9ee4e86c3ecaa44f9aa5a6e63829b4bac2ed7aa6fd2bb0c04228819c602859a" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.9/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.10/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.11/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
                "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ios_xr/6/chef-12.13.12+20160724015517-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 b646214b52c4a8d96dc5222ffea096af24bcc0775435faad8ee8284d1435bda0" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/nexus/7/chef-12.13.12+20160724015517-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 dafdbd09910049d5faa739e11ae3eb60b429dc5654b90185e3b151e621b700c2" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/6/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/7/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/10/chef-12.13.12+20160724015517_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 e55eceae56704977fbbc2079656c0bc977b44757be1567f65c20246f47861313" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/8/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/9/chef-12.13.12+20160724015517_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 03448c3175473d14b625b06ab6e2ccefc87fbba73efc45c902f91c2f5e358b8c" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/12.04/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 41c807aa414d673a99188a105c918092e443be6e8366da2222a4de910100bf17" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 41c807aa414d673a99188a105c918092e443be6e8366da2222a4de910100bf17" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 ab7460941b63d771e70410b7f2a3ad5c3f03781126ec5ad1f11b1f83f4f9b43f" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.10/chef-12.13.12+20160724015517-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 28486ff379c1d4699910f860749b7aa2d6cff32e2ec885a32ea52687fca1b636" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.11/chef-12.13.12+20160724015517-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 28486ff379c1d4699910f860749b7aa2d6cff32e2ec885a32ea52687fca1b636" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/12.04/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 eefa11a16bfac9962a6e923997ea63b2ecb5f70ba272baca569fb87f934be6a0" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 eefa11a16bfac9962a6e923997ea63b2ecb5f70ba272baca569fb87f934be6a0" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 3015f45c0d750a3c284b8c6236d1efd3f5bc8006340c5e7a8a390926d0c85712" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 dcde908bc57c3ee76feeb5ddd54990b68d8a9ff4cccbadf03dbe89f048c3b5db" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2008r2/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/10/chef-12.13.12+20160724015517_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 be7a56b4c74bb77aaea253c77dc7634b2133b5e375d26f6765b8647cc2fb9276" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/5/chef-12.13.12+20160724015517-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 628f25c66f3573c09e75ae3a1d5cfe45e57b62cdd918552de21bf90aa9413ddc" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/6/chef-12.13.12+20160724015517-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f17b63a0a9766aa83ac4f44abaec88f2176c25c49950ba4936e2c3df53c40bff" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012r2/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/6/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/7/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/8/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
                "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2008r2/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012r2/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
                "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/aix/6.1/chef-12.13.12+20160724015517-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5d5ec238856c052851de33c7e6c0ff6bd667706697cdb58ddccad8695d0c9694" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/aix/7.1/chef-12.13.12+20160724015517-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
                "sha256 5d5ec238856c052851de33c7e6c0ff6bd667706697cdb58ddccad8695d0c9694" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/6/chef-12.13.12+20160724015517-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 b8ae79aca74bc0f084babc33190e70c499c0b4ff20d3511680e6390fb286e766" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/5/chef-12.13.12+20160724015517-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
                "sha256 f91fbb8c747eb3ff29e70c2c0c4a04e510e98f50445082b735c7006e4cdfbbdc" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/9/chef-12.13.12+20160724015517_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
                "sha256 fdf4d823de45cb9379904c1c3c539e74a79eccc67c8e9fa2efad0dafd3a1d011" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.10/chef-12.13.12+20160724015517-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 8a5d6847f46868162cdd26086d2795affc218fd5304498e26544b0331eb05834" | out-file "$artifact_info_dir/artifact_info" -Append

                $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
                New-Item -ItemType directory -Path $artifact_info_dir -force
                New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
                "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.11/chef-12.13.12+20160724015517-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
                "sha256 8a5d6847f46868162cdd26086d2795affc218fd5304498e26544b0331eb05834" | out-file "$artifact_info_dir/artifact_info" -Append


              $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

              $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
                foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

              Write-Verbose "Project details: "
              foreach ($key in $package_metadata.keys) {
                Write-Verbose "`t$key = $($package_metadata[$key])"
              }
              $package_metadata
            }

            function Install-Project {
              <#
                .SYNOPSIS
                Install a Chef Software, Inc. product
                .DESCRIPTION
                Install a Chef Software, Inc. product
                .EXAMPLE
                iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

                Installs the latest stable version of Chef.
                .EXAMPLE
                iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

                Installs the latest integration build of the Chef Development Kit
              #>
              [cmdletbinding(SupportsShouldProcess=$true)]
              param (
                # Project to install
                [string]
                $project = 'chef',
                # Release channel to install from
                [validateset('current', 'stable', 'unstable')]
                [string]
                $channel = 'stable',
                # Version of the application to install
                # This parameter is optional, if not supplied it will provide the latest version,
                # and if an iteration number is not specified, it will grab the latest available iteration.
                # Partial version numbers are also acceptable (using v=11
                # will grab the latest 11.x client which matches the other flags).
                [string]
                $version,
                # Full path for the downloaded installer.
                [string]
                $filename,
                # Full path to the location to download the installer
                [string]
                $download_directory = $env:temp,
                # The following legacy switches are just aliases for the current channel
                [switch]
                $prerelease,
                [switch]
                $nightlies,
                [validateset('auto', 'i386', 'x86_64')]
                [string]
                $architecture = 'auto'
              )

              $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

              if (-not [string]::IsNullOrEmpty($filename)) {
                $download_directory = split-path $filename
                $filename = split-path $filename -leaf
                if ([string]::IsNullOrEmpty($download_directory)) {
                  $download_directory = $pwd
                }
              }
              else {
                $filename = ($package_metadata.url -split '/')[-1]
              }
              Write-Verbose "Download directory: $download_directory"
              Write-Verbose "Filename: $filename"

              if (-not (test-path $download_directory)) {
                mkdir $download_directory
              }
              $download_directory = (resolve-path $download_directory).providerpath
              $download_destination = join-path $download_directory $filename

              if ((test-path $download_destination) -and
                (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
                Write-Verbose "Found existing valid installer at $download_destination."
              }
              else {
                if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                  Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                  Get-WebContent $package_metadata.url -filepath $download_destination
                }
              }

              if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
                if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                  Write-Host "Installing $project from $download_destination"
                  $installingProject = $True
                  $installAttempts = 0
                  while ($installingProject) {
                    $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                    $p.WaitForExit()
                    if ($p.ExitCode -eq 1618) {
                      Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                      continue
                    } elseif ($p.ExitCode -ne 0) {
                      throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                    }
                    $installingProject = $False
                  }
                }
                else {
                  throw "Failed to validate the downloaded installer for $project."
                }
              }
            }
            set-alias install -value Install-Project
            export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

            }

            install -project chef -version 12.13.12+20160724015517 -channel unstable
             with id: D5B5591C-96D1-4E83-A945-80867416F9B8
            D      [WinRM] creating command_id: D5B5591C-96D1-4E83-A945-80867416F9B8 on shell_id ED645B0F-0808-4848-A782-54A20309AA8D
            D      [WinRM] Waiting for output...
            D      [WinRM] Processing output

                   ModuleType Version    Name                                ExportedCommands
                   ---------- -------    ----                                ----------------
                   Script     0.0        Omnitruck                           {Get-ProjectMetada...
            D      [WinRM] Waiting for output...
            D      [WinRM] cleaning up command_id: D5B5591C-96D1-4E83-A945-80867416F9B8 on shell_id ED645B0F-0808-4848-A782-54A20309AA8D
                   [WinRM] 500 returned in cleanup with error: Bad HTTP response returned from server. Body(if present): (500).
            D      Cleaning up local sandbox in /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160724-8146-1vrnrv5
            D      ------Exception-------
            D      Class: Kitchen::ActionFailed
            D      Message: 2 actions failed.
            >>>>>>     Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).] on fips-unit-functional-windows-2012r2
            >>>>>>     Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-integration-windows-2012r2
            D      ----------------------
            D      ------Backtrace-------
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:187:in `report_errors'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:178:in `run_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command/action.rb:39:in `block in call'
            D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command/action.rb:37:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/cli.rb:56:in `perform'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/cli.rb:184:in `block (2 levels) in <class:CLI>'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/cli.rb:325:in `invoke_task'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/bin/kitchen:13:in `block in <top (required)>'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/errors.rb:174:in `with_friendly_errors'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/bin/kitchen:13:in `<top (required)>'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:22:in `load'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:22:in `<top (required)>'
            D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/cli/exec.rb:63:in `load'
            D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/cli/exec.rb:63:in `kernel_load'
            D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/cli/exec.rb:24:in `run'
            D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/cli.rb:304:in `exec'
            D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
            D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
            D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/vendor/thor/lib/thor.rb:359:in `dispatch'
            D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/vendor/thor/lib/thor/base.rb:440:in `start'
            D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/cli.rb:11:in `start'
            D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/exe/bundle:27:in `block in <top (required)>'
            D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/friendly_errors.rb:98:in `with_friendly_errors'
            D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/exe/bundle:19:in `<top (required)>'
            D      /opt/chefdk/embedded/bin/bundle:22:in `load'
            D      /opt/chefdk/embedded/bin/bundle:22:in `<main>'
            D      ----End Backtrace-----
            D      -Composite Exception--
            D      Class: Kitchen::ActionFailed
            D      Message: Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).] on fips-unit-functional-windows-2012r2
            D      ----------------------
            D      ------Backtrace-------
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:90:in `raise_transport_error'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:54:in `raise_if_error'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:36:in `parse_to_xml'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/transport.rb:186:in `send_request'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:93:in `send_get_output_message'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:63:in `read_response'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:41:in `read_message'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:60:in `block in read_output'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:75:in `with_output'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:59:in `read_output'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:76:in `block in run'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:122:in `with_command_shell'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:75:in `run'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:218:in `execute_with_exit_code'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:100:in `execute'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/provisioner/base.rb:72:in `block in call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:478:in `reuse_connection'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:72:in `connection'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/provisioner/base.rb:71:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:373:in `block in converge_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:513:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:513:in `synchronize_or_call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:478:in `block in action'
            D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:477:in `action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:369:in `converge_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:348:in `block in transition_to'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:347:in `each'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:347:in `transition_to'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:138:in `converge'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:201:in `public_send'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:201:in `run_action_in_thread'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
            D      ----End Backtrace-----
            D      ---Nested Exception---
            D      Class: Kitchen::ActionFailed
            D      Message: Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).]
            D      ----------------------
            D      ------Backtrace-------
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:90:in `raise_transport_error'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:54:in `raise_if_error'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:36:in `parse_to_xml'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/transport.rb:186:in `send_request'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:93:in `send_get_output_message'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:63:in `read_response'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:41:in `read_message'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:60:in `block in read_output'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:75:in `with_output'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:59:in `read_output'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:76:in `block in run'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:122:in `with_command_shell'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:75:in `run'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:218:in `execute_with_exit_code'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:100:in `execute'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/provisioner/base.rb:72:in `block in call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:478:in `reuse_connection'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:72:in `connection'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/provisioner/base.rb:71:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:373:in `block in converge_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:513:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:513:in `synchronize_or_call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:478:in `block in action'
            D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:477:in `action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:369:in `converge_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:348:in `block in transition_to'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:347:in `each'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:347:in `transition_to'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:138:in `converge'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:201:in `public_send'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:201:in `run_action_in_thread'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
            D      ----End Backtrace-----
            D      -Composite Exception--
            D      Class: Kitchen::ActionFailed
            D      Message: Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-integration-windows-2012r2
            D      ----------------------
            D      ------Backtrace-------
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:69:in `raise_if_wsman_fault'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:52:in `raise_if_error'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:36:in `parse_to_xml'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/transport.rb:186:in `send_request'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:93:in `send_get_output_message'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:63:in `read_response'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:41:in `read_message'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:60:in `block in read_output'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:75:in `with_output'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:59:in `read_output'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:76:in `block in run'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:122:in `with_command_shell'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:75:in `run'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:218:in `execute_with_exit_code'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:100:in `execute'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/provisioner/base.rb:72:in `block in call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:478:in `reuse_connection'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:72:in `connection'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/provisioner/base.rb:71:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:373:in `block in converge_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:513:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:513:in `synchronize_or_call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:478:in `block in action'
            D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:477:in `action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:369:in `converge_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:348:in `block in transition_to'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:347:in `each'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:347:in `transition_to'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:138:in `converge'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:201:in `public_send'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:201:in `run_action_in_thread'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
            D      ----End Backtrace-----
            D      ---Nested Exception---
            D      Class: Kitchen::ActionFailed
            D      Message: Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>]
            D      ----------------------
            D      ------Backtrace-------
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:69:in `raise_if_wsman_fault'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:52:in `raise_if_error'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:36:in `parse_to_xml'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/transport.rb:186:in `send_request'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:93:in `send_get_output_message'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:63:in `read_response'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:41:in `read_message'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:60:in `block in read_output'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:75:in `with_output'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:59:in `read_output'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:76:in `block in run'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:122:in `with_command_shell'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:75:in `run'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:218:in `execute_with_exit_code'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:100:in `execute'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/provisioner/base.rb:72:in `block in call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:478:in `reuse_connection'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:72:in `connection'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/provisioner/base.rb:71:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:373:in `block in converge_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:513:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:513:in `synchronize_or_call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:478:in `block in action'
            D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:477:in `action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:369:in `converge_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:348:in `block in transition_to'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:347:in `each'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:347:in `transition_to'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:138:in `converge'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:201:in `public_send'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:201:in `run_action_in_thread'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
            D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
            D      ----End Backtrace-----
            STDERR: >>>>>> ------Exception-------
            >>>>>> Class: Kitchen::ActionFailed
            >>>>>> Message: 2 actions failed.
            >>>>>>     Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).] on fips-unit-functional-windows-2012r2
            >>>>>>     Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-integration-windows-2012r2
            >>>>>> ----------------------
            >>>>>> Please see .kitchen/logs/kitchen.log for more details
            >>>>>> Also try running `kitchen diagnose --all` for configuration
            ---- End output of bundle exec kitchen converge  -c -l debug ----
            Ran bundle exec kitchen converge  -c -l debug returned 20

            Cookbook Trace:
            ---------------
            /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:55:in `block (3 levels) in <class:Kitchen>'

            Resource Declaration:
            ---------------------
            # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb

             39:       ruby_block "copy_kitchen_logs_to_data_path" do
             40:         block do
             41:           cmd_env = {
             42:             "KITCHEN_DRIVER" => driver,
             43:             "KITCHEN_INSTANCES" => instances,
             44:             "KITCHEN_LOCAL_YAML" => ::File.expand_path("../../.kitchen.#{driver}.yml", __FILE__),
             45:             "KITCHEN_CHEF_PRODUCT" => chef_product,
             46:             "KITCHEN_CHEF_CHANNEL" => chef_channel,
             47:             "KITCHEN_CHEF_VERSION" => chef_version,
             48:             "ARTIFACTORY_USERNAME" => artifactory_username,
             49:             "ARTIFACTORY_PASSWORD" => artifactory_password
             50:           }.merge(new_resource.env)
             51:           suite = kitchen_dir.split("/").last
             52:           kitchen_log_path = ENV["WORKSPACE"] ? "#{ENV["WORKSPACE"]}/chef-acceptance-data/logs" : "#{kitchen_dir}/../.acceptance_data/logs/"
             53:
             54:           begin
             55:             shell_out!("bundle exec kitchen #{command}#{instances ? " #{instances}" : ""}#{kitchen_options ? " #{kitchen_options}" : ""}",
             56:                        env: cmd_env,
             57:                        timeout: 60 * 30,
             58:                        live_stream: STDOUT,
             59:                        cwd: kitchen_dir)
             60:           ensure
             61:             FileUtils.mkdir_p("#{kitchen_log_path}/#{suite}/#{command}")
             62:             FileUtils.cp_r("#{kitchen_dir}/.kitchen/logs/.", "#{kitchen_log_path}/#{suite}/#{command}")
             63:           end
             64:         end
             65:       end

            Compiled Resource:
            ------------------
            # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:39:in `block in <class:Kitchen>'

            ruby_block("copy_kitchen_logs_to_data_path") do
              action [:run]
              retries 0
              retry_delay 2
              default_guard_interpreter :default
              block_name "copy_kitchen_logs_to_data_path"
              declared_type :ruby_block
              cookbook_name "acceptance-cookbook"
              block #<Proc:0x000000042301f0@/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:40>
            end

            Platform:
            ---------
            x86_64-linux


          ================================================================================
          Error executing action `run` on resource 'kitchen[converge]'
          ================================================================================

          Mixlib::ShellOut::ShellCommandFailed
          ------------------------------------
          ruby_block[copy_kitchen_logs_to_data_path] (/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 39) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '20'
          ---- Begin output of bundle exec kitchen converge  -c -l debug ----
          STDOUT: -----> Starting Kitchen (v1.10.2)
          D      winrm requested, loading winrm gem (["~> 2.0"])
          D      winrm is loaded.
          D      winrm-fs requested, loading winrm-fs gem (["~> 1.0"])
          D      winrm-fs is loaded.
          D      winrm requested, loading winrm gem (["~> 2.0"])
          D      winrm was already loaded.
          D      winrm-fs requested, loading winrm-fs gem (["~> 1.0"])
          D      winrm-fs was already loaded.
          -----> Creating <fips-unit-functional-windows-2012r2>...
          D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
          D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
          -----> Creating <fips-integration-windows-2012r2>...
          D      platform name windows-2012r2 appears to be a standard platform. Searching for windows 2012r2 ...
          D      Searching for images matching {:name=>"Windows_Server-2012-R2*-English-*-Base-*", :"owner-alias"=>"amazon", :architecture=>"x86_64", :"virtualization-type"=>"hvm", :"block-device-mapping.volume-type"=>"gp2", :"image-type"=>"machine"} ...
          D      Search returned 3 images:
          D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.07.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-07-14T09:59:33.000Z
          D      Search returned 3 images:
          D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
          D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
          D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.07.13: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-07-14T09:59:33.000Z
          D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.06.15: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-06-16T16:58:39.000Z
          D      - Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.05.11: Detected windows 2012r2rtm x86_64.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-05-12T20:22:38.000Z
          D      Image for fips-unit-functional-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.07.13.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-07-14T09:59:33.000Z
                 Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
          D      No SSH username specified: using default username administrator  for image ami-26e72546, which we detected as windows 2012r2rtm x86_64.
                 If you are not using an account that qualifies under the AWS
          free-tier, you may be charged to run these suites. The charge
          should be minimal, but neither Test Kitchen nor its maintainers
          are responsible for your incurred costs.

          D      Creating EC2 instance in region us-west-2 with properties:
          D      - instance_type = "m3.large"
          D      - ebs_optimized = false
          D      - image_id = "ami-26e72546"
          D      - key_name = "jenkins"
          D      - subnet_id = "subnet-19ac017c"
          D      Image for fips-integration-windows-2012r2: Windows_Server-2012-R2_RTM-English-64Bit-Base-2016.07.13.  Architecture: x86_64, Virtualization: hvm, Storage: ebs gp2, Created: 2016-07-14T09:59:33.000Z
                 Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m3.large. Default username: administrator (default).
          D      No SSH username specified: using default username administrator  for image ami-26e72546, which we detected as windows 2012r2rtm x86_64.
                 If you are not using an account that qualifies under the AWS
          free-tier, you may be charged to run these suites. The charge
          should be minimal, but neither Test Kitchen nor its maintainers
          are responsible for your incurred costs.

          D      Creating EC2 instance in region us-west-2 with properties:
          D      - instance_type = "m3.large"
          D      - ebs_optimized = false
          D      - image_id = "ami-26e72546"
          D      - key_name = "jenkins"
          D      - subnet_id = "subnet-19ac017c"
          D      - private_ip_address = nil
          D      - placement = {:availability_zone=>"us-west-2a"}
          D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
          D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
          D      - private_ip_address = nil
          D      - placement = {:availability_zone=>"us-west-2a"}
          D      - security_group_ids = ["sg-e401eb83", "sg-96274af3"]
          D      - user_data = "PHBvd2Vyc2hlbGw+CiRsb2dmaWxlPSJDOlxcUHJvZ3JhbSBGaWxlc1xcQW1h\nem9uXFxFYzJDb25maWdTZXJ2aWNlXFxMb2dzXFxraXRjaGVuLWVjMi5sb2ci\nCiNQUyBSZW1vdGluZyBhbmQgJiB3aW5ybS5jbWQgYmFzaWMgY29uZmlnCkVu\nYWJsZS1QU1JlbW90aW5nIC1Gb3JjZSAtU2tpcE5ldHdvcmtQcm9maWxlQ2hl\nY2sKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0\nbXM9IjE4MDAwMDAifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdp\nbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0\nIn0nID4+ICRsb2dmaWxlCiYgd2lucm0uY21kIHNldCB3aW5ybS9jb25maWcv\nd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iNTAifScgPj4gJGxvZ2ZpbGUK\nI1NlcnZlciBzZXR0aW5ncyAtIHN1cHBvcnQgdXNlcm5hbWUvcGFzc3dvcmQg\nbG9naW4KJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1\ndGggJ0B7QmFzaWM9InRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQg\nc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlICdAe0FsbG93VW5lbmNyeXB0ZWQ9\nInRydWUifScgPj4gJGxvZ2ZpbGUKJiB3aW5ybS5jbWQgc2V0IHdpbnJtL2Nv\nbmZpZy93aW5ycyAnQHtNYXhNZW1vcnlQZXJTaGVsbE1CPSIxMDI0In0nID4+\nICRsb2dmaWxlCiNGaXJld2FsbCBDb25maWcKJiBuZXRzaCBhZHZmaXJld2Fs\nbCBmaXJld2FsbCBzZXQgcnVsZSBuYW1lPSJXaW5kb3dzIFJlbW90ZSBNYW5h\nZ2VtZW50IChIVFRQLUluKSIgcHJvZmlsZT1wdWJsaWMgcHJvdG9jb2w9dGNw\nIGxvY2FscG9ydD01OTg1IHJlbW90ZWlwPWxvY2Fsc3VibmV0IG5ldyByZW1v\ndGVpcD1hbnkgID4+ICRsb2dmaWxlCiNTZXQgc2NyaXB0IGV4ZWN1dGlvbiB0\nbyB1bnJlc3RyaWN0ZWQKJiBTZXQtRXhlY3V0aW9uUG9saWN5IFVucmVzdHJp\nY3RlZCAtRm9yY2UKPC9wb3dlcnNoZWxsPgo=\n"
                 Instance <i-604bc9cf> requested.
                 Polling AWS for existence, attempt 0...
                 Instance <i-0049cbaf> requested.
                 Polling AWS for existence, attempt 0...
                 Attempting to tag the instance, 0 retries
                 Attempting to tag the instance, 0 retries
                 EC2 instance <i-604bc9cf> created.
                 Waited 0/300s for instance <i-604bc9cf> to become ready.
                 EC2 instance <i-0049cbaf> created.
                 Waited 0/300s for instance <i-0049cbaf> to become ready.
                 Waited 5/300s for instance <i-604bc9cf> to become ready.
                 Waited 5/300s for instance <i-0049cbaf> to become ready.
                 Waited 10/300s for instance <i-0049cbaf> to become ready.
                 Waited 10/300s for instance <i-604bc9cf> to become ready.
                 Waited 15/300s for instance <i-0049cbaf> to become ready.
                 Waited 15/300s for instance <i-604bc9cf> to become ready.
                 Waited 20/300s for instance <i-0049cbaf> to become ready.
                 Waited 20/300s for instance <i-604bc9cf> to become ready.
                 Waited 25/300s for instance <i-0049cbaf> to become ready.
                 Waited 25/300s for instance <i-604bc9cf> to become ready.
                 Waited 30/300s for instance <i-0049cbaf> to become ready.
                 Waited 30/300s for instance <i-604bc9cf> to become ready.
                 Waited 35/300s for instance <i-0049cbaf> to become ready.
                 Waited 35/300s for instance <i-604bc9cf> to become ready.
                 Waited 40/300s for instance <i-0049cbaf> to become ready.
                 Waited 40/300s for instance <i-604bc9cf> to become ready.
                 Waited 45/300s for instance <i-0049cbaf> to become ready.
                 Waited 45/300s for instance <i-604bc9cf> to become ready.
                 Waited 50/300s for instance <i-0049cbaf> to become ready.
                 Waited 50/300s for instance <i-604bc9cf> to become ready.
                 Waited 55/300s for instance <i-0049cbaf> to become ready.
                 Waited 55/300s for instance <i-604bc9cf> to become ready.
                 Waited 60/300s for instance <i-0049cbaf> to become ready.
                 Waited 60/300s for instance <i-604bc9cf> to become ready.
                 Waited 65/300s for instance <i-0049cbaf> to become ready.
                 Waited 65/300s for instance <i-604bc9cf> to become ready.
                 Waited 70/300s for instance <i-0049cbaf> to become ready.
                 Waited 70/300s for instance <i-604bc9cf> to become ready.
                 Waited 75/300s for instance <i-0049cbaf> to become ready.
                 Waited 75/300s for instance <i-604bc9cf> to become ready.
                 Waited 80/300s for instance <i-0049cbaf> to become ready.
                 Waited 80/300s for instance <i-604bc9cf> to become ready.
                 Waited 85/300s for instance <i-0049cbaf> to become ready.
                 Waited 85/300s for instance <i-604bc9cf> to become ready.
          D      Console output: ---
          2016/07/24 02:31:23Z: EC2ConfigMonitorState: 0
          2016/07/24 02:31:23Z: Windows sysprep configuration complete.
          2016/07/24 02:31:25Z: AMI Origin Version: 2016.07.13
          2016/07/24 02:31:25Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
          2016/07/24 02:31:25Z: OS: Microsoft Windows NT 6.3.9600
          2016/07/24 02:31:25Z: OsVersion: 6.3
          2016/07/24 02:31:25Z: OsProductName: Windows Server 2012 R2 Standard
          2016/07/24 02:31:25Z: OsBuildLabEx: 9600.18289.amd64fre.winblue_ltsb.160328-1315
          2016/07/24 02:31:25Z: Language: en-US
          2016/07/24 02:31:25Z: TimeZone: Coordinated Universal Time
          2016/07/24 02:31:25Z: Offset: UTC 00:00:00
          2016/07/24 02:31:25Z: EC2 Agent: Ec2Config service v3.17.1032
          2016/07/24 02:31:27Z: Message: Waiting for meta-data accessibility...
          2016/07/24 02:31:27Z: Message: Meta-data is now available.
          2016/07/24 02:31:27Z: AMI-ID: ami-26e72546
          2016/07/24 02:31:27Z: Instance-ID: i-604bc9cf
          2016/07/24 02:31:29Z: Driver: AWS PV Network Device v7.4.2.0
          2016/07/24 02:31:29Z: Driver: AWS PV Storage Host Adapter v7.4.2.0
          2016/07/24 02:31:29Z: Ec2SetPassword: Enabled
          2016/07/24 02:31:29Z: RDPCERTIFICATE-SUBJECTNAME: WIN-FRIGOCNQ8NQ
          2016/07/24 02:31:29Z: RDPCERTIFICATE-THUMBPRINT: 7EF7CED037EC7303A7FE409859576A2F8A503482
          2016/07/24 02:31:32Z: Username: Administrator
          2016/07/24 02:31:32Z: Password: <Password>
          Eup8KyTKYuZoJlNqkVxKIvbStuqazCFSwO7ZwPiSQzK5utBaseAQHTP3cJ1FbLDnd67Zyyt4moKq/bR640lV+Wp3LSl/hY6LKlFKO/pnsZfNVF45KgWXh1TNGP8gL3vCeTZPSYqwBxBd5ArL1+YWfFmCuy3CHt4i3CMZqW7EyBMZWJ5QKtRgMUCK3Dw2pnZhg/ISRpMWHU9rwNpWp92FJDDI2HVchy0cJeLzVz4CvhMnWbBtx6NF/2b3+e+BGxNaQaZWxzZomn/nyQTYNngI4oVhYc/zXuZXQKIkyehsUZhQb0OV3LCFnHGrktuTVCEHprEY6E0Hw+ICoPPswTc77g==
          </Password>
          2016/07/24 02:31:33Z: Message: Windows is Ready to use

                 Waited 0/300s for instance <i-604bc9cf> to fetch windows admin password.
          D      Console output: ---
          2016/07/24 02:31:23Z: EC2ConfigMonitorState: 0
          2016/07/24 02:31:23Z: Windows sysprep configuration complete.
          2016/07/24 02:31:25Z: AMI Origin Version: 2016.07.13
          2016/07/24 02:31:25Z: AMI Origin Name: Windows_Server-2012-R2_RTM-English-64Bit-Base
          2016/07/24 02:31:25Z: OS: Microsoft Windows NT 6.3.9600
          2016/07/24 02:31:25Z: OsVersion: 6.3
          2016/07/24 02:31:25Z: OsProductName: Windows Server 2012 R2 Standard
          2016/07/24 02:31:25Z: OsBuildLabEx: 9600.18289.amd64fre.winblue_ltsb.160328-1315
          2016/07/24 02:31:25Z: Language: en-US
          2016/07/24 02:31:25Z: TimeZone: Coordinated Universal Time
          2016/07/24 02:31:25Z: Offset: UTC 00:00:00
          2016/07/24 02:31:26Z: EC2 Agent: Ec2Config service v3.17.1032
          2016/07/24 02:31:27Z: Message: Waiting for meta-data accessibility...
          2016/07/24 02:31:27Z: Message: Meta-data is now available.
          2016/07/24 02:31:28Z: AMI-ID: ami-26e72546
          2016/07/24 02:31:28Z: Instance-ID: i-0049cbaf
          2016/07/24 02:31:29Z: Driver: AWS PV Network Device v7.4.2.0
          2016/07/24 02:31:29Z: Driver: AWS PV Storage Host Adapter v7.4.2.0
          2016/07/24 02:31:29Z: Ec2SetPassword: Enabled
          2016/07/24 02:31:29Z: RDPCERTIFICATE-SUBJECTNAME: WIN-SVJUH3RL8CQ
          2016/07/24 02:31:29Z: RDPCERTIFICATE-THUMBPRINT: 03BA8CBF82D9A9E130D7B6793C9384B4047CCFCD
          2016/07/24 02:31:32Z: Username: Administrator
          2016/07/24 02:31:32Z: Password: <Password>
          bpbfIj+dno/EIUHgrhsQiTejWl81KMRKNS8M9YxYEgVIvP886N26zVWfyfLZqUnTiSYHKIs3z4LYfyMQE3EwTT5kriZHWZBK3IQeKJHdXGbxvmnMTLY03YR4qxb4SXcmpy3+9Dk2U52dU81RMi9HwuZaZ3eTs6slH9Nu28c1hjjL0Qn0BwH01WJfmZRQrQyvGZQzh/st6zv1aNa2CRj9IGrOaTGUMe7Tx4ViYRq5XS4CEgaisJRUI4vhdD443PSdwht6jhjaqwxHm/nC3lkhd2tnxKa00FxgdlH2PsrkqoknBZeuckSBAv4dWtLFvk7zDyd/b/TdJAlE4/Ett2Rn2w==
          </Password>
          2016/07/24 02:31:33Z: Message: Windows is Ready to use

                 Waited 0/300s for instance <i-0049cbaf> to fetch windows admin password.
                 Retrieved Windows password for instance <i-604bc9cf>.
                 EC2 instance <i-604bc9cf> ready.
                 Retrieved Windows password for instance <i-0049cbaf>.
                 EC2 instance <i-0049cbaf> ready.
          D      [WinRM] <{:endpoint=>"http://10.194.10.20:5985/wsman", :user=>"administrator", :password=>"x?w$@x%96i", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"x?w$@x%96i", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
          ')
          D      [WinRM] opening remote shell on http://10.194.10.20:5985/wsman
          D      [WinRM] <{:endpoint=>"http://10.194.14.36:5985/wsman", :user=>"administrator", :password=>"ES-AQjsVJHU", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"ES-AQjsVJHU", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (Write-Host '[WinRM] Established
          ')
          D      [WinRM] opening remote shell on http://10.194.14.36:5985/wsman
          D      [WinRM] Waiting for output...
          D      [WinRM] Processing output
          D      [WinRM] polling for pipeline state. message: #<WinRM::PSRP::Message:0x00000003e8b860 @data="\xEF\xBB\xBF<Obj RefId=\"0\"><MS><Version N=\"protocolversion\">2.2</Version><Version N=\"PSVersion\">2.0</Version><Version N=\"SerializationVersion\">1.1.0.1</Version></MS></Obj>", @destination=1, @type=65538, @pipeline_id="00000000-0000-0000-0000-000000000000", @runspace_pool_id="00000000-0000-0000-0000-000000000000">
          D      [WinRM] Waiting for output...
          D      [WinRM] Processing output
          D      [WinRM] polling for pipeline state. message: #<WinRM::PSRP::Message:0x00000003d96748 @data="\xEF\xBB\xBF<Obj RefId=\"0\"><MS><Obj N=\"ApplicationPrivateData\" RefId=\"1\"><TN RefId=\"0\"><T>System.Management.Automation.PSPrimitiveDictionary</T><T>System.Collections.Hashtable</T><T>System.Object</T></TN><DCT><En><S N=\"Key\">DebugMode</S><I32 N=\"Value\">1</I32></En><En><S N=\"Key\">DebugStop</S><B N=\"Value\">false</B></En><En><S N=\"Key\">PSVersionTable</S><Obj N=\"Value\" RefId=\"2\"><TNRef RefId=\"0\" /><DCT><En><S N=\"Key\">PSVersion</S><Version N=\"Value\">2.0</Version></En><En><S N=\"Key\">PSCompatibleVersions</S><Obj N=\"Value\" RefId=\"3\"><TN RefId=\"1\"><T>System.Version[]</T><T>System.Array</T><T>System.Object</T></TN><LST><Version>1.0</Version><Version>2.0</Version><Version>3.0</Version><Version>4.0</Version></LST></Obj></En><En><S N=\"Key\">BuildVersion</S><Version N=\"Value\">6.3.9600.17400</Version></En><En><S N=\"Key\">CLRVersion</S><Version N=\"Value\">4.0.30319.42000</Version></En><En><S N=\"Key\">WSManStackVersion</S><Version N=\"Value\">3.0</Version></En><En><S N=\"Key\">PSRemotingProtocolVersion</S><Version N=\"Value\">2.2</Version></En><En><S N=\"Key\">SerializationVersion</S><Version N=\"Value\">1.1.0.1</Version></En></DCT></Obj></En><En><S N=\"Key\">DebugBreakpointCount</S><I32 N=\"Value\">0</I32></En></DCT></Obj></MS></Obj>", @destination=1, @type=135177, @pipeline_id="00000000-0000-0000-0000-000000000000", @runspace_pool_id="00000000-0000-0000-0000-000000000000">
          D      [WinRM] Waiting for output...
          D      [WinRM] Processing output
          D      [WinRM] polling for pipeline state. message: #<WinRM::PSRP::Message:0x00000002d572b0 @data="\xEF\xBB\xBF<Obj RefId=\"0\"><MS><I32 N=\"RunspaceState\">2</I32></MS></Obj>", @destination=1, @type=135173, @pipeline_id="00000000-0000-0000-0000-000000000000", @runspace_pool_id="00000000-0000-0000-0000-000000000000">
          D      [WinRM] remote shell created with shell_id: 88CAB3BA-A3DD-4AB8-B45F-942201C523B7
          D      [WinRM] Command created for Write-Host '[WinRM] Established
          ' with id: 4A7E3D5D-6856-4292-89B2-2F6C81B5E6C9
          D      [WinRM] creating command_id: 4A7E3D5D-6856-4292-89B2-2F6C81B5E6C9 on shell_id 88CAB3BA-A3DD-4AB8-B45F-942201C523B7
          D      [WinRM] Waiting for output...
          D      [WinRM] Processing output
                 [WinRM] Established

          D      [WinRM] cleaning up command_id: 4A7E3D5D-6856-4292-89B2-2F6C81B5E6C9 on shell_id 88CAB3BA-A3DD-4AB8-B45F-942201C523B7
          D      [WinRM] reusing existing connection <{:endpoint=>"http://10.194.10.20:5985/wsman", :user=>"administrator", :password=>"x?w$@x%96i", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"x?w$@x%96i", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
          D      [WinRM] <{:endpoint=>"http://10.194.10.20:5985/wsman", :user=>"administrator", :password=>"x?w$@x%96i", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"x?w$@x%96i", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)
          D      [WinRM] Command created for New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File with id: E37854B5-87D2-4A9A-90E5-FAD649CDBDFE
          D      [WinRM] creating command_id: E37854B5-87D2-4A9A-90E5-FAD649CDBDFE on shell_id 88CAB3BA-A3DD-4AB8-B45F-942201C523B7
          D      [WinRM] Waiting for output...
          D      [WinRM] Processing output


                     Directory: C:\chef\ohai\hints


                 Mode                LastWriteTime     Length Name
                 ----                -------------     ------ ----
                 -a---         7/24/2016   2:32 AM          0 ec2.json


          D      [WinRM] cleaning up command_id: E37854B5-87D2-4A9A-90E5-FAD649CDBDFE on shell_id 88CAB3BA-A3DD-4AB8-B45F-942201C523B7
          D      ec2:create '10.194.10.20'
                 Finished creating <fips-unit-functional-windows-2012r2> (2m2.35s).
          -----> Converging <fips-unit-functional-windows-2012r2>...
                 Preparing files for transfer
          D      Creating local sandbox in /tmp/cheftest/fips-unit-functional-windows-2012r2-sandbox-20160724-8146-yp150q
                 Preparing dna.json
          D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                 Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                 Removing non-cookbook files before transfer
                 Preparing validation.pem
          D      Using a dummy validation.pem
                 Preparing client.rb
          D      Creating client.rb from {:node_name=>"fips-unit-functional-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
          D      [WinRM] reusing existing connection <{:endpoint=>"http://10.194.10.20:5985/wsman", :user=>"administrator", :password=>"x?w$@x%96i", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"x?w$@x%96i", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
          D      [WinRM] <{:endpoint=>"http://10.194.10.20:5985/wsman", :user=>"administrator", :password=>"x?w$@x%96i", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"x?w$@x%96i", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
          function Get-PlatformVersion {
            switch -regex ((get-wmiobject win32_operatingsystem).version) {
              '10\.0\.\d+' {$platform_version = '2012r2'}
              '6\.3\.\d+'  {$platform_version = '2012r2'}
              '6\.2\.\d+'  {$platform_version = '2012'}
              '6\.1\.\d+'  {$platform_version = '2008r2'}
              '6\.0\.\d+'  {$platform_version = '2008'}
            }
            return $platform_version
          }

          function Get-PlatformArchitecture {
            if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
              $architecture = 'x86_64'
            } else {
              $architecture = 'i386'
            }
            return $architecture
          }

          function New-Uri {
            param ($baseuri, $newuri)

            try {
            new-object System.Uri $baseuri, $newuri
            }
            catch [System.Management.Automation.MethodInvocationException]{
              Write-Error "$($_.exception.message)"
              throw $_.exception
            }
          }

          function Get-WebContent {
            param ($uri, $filepath)
            $proxy = New-Object -TypeName System.Net.WebProxy
            $wc = new-object System.Net.WebClient
            $proxy.Address = $env:http_proxy
            $wc.Proxy = $proxy

            try {
              if ([string]::IsNullOrEmpty($filepath)) {
                $wc.downloadstring($uri)
              }
              else {
                $wc.downloadfile($uri, $filepath)
              }
            }
            catch {
              $exception = $_.Exception
              Write-Host "There was an error: "
              do {
                Write-Host "`t$($exception.message)"
                $exception = $exception.innerexception
              } while ($exception)
              throw "Failed to download from $uri."
            }
          }

          function Test-ProjectPackage {
            [cmdletbinding()]
            param ($Path, $Algorithm = 'SHA256', $Hash)

            if (-not (get-command get-filehash))   {
              function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
              function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
              function Get-FileHash ($Path, $Algorithm) {
                $Path = (resolve-path $path).providerpath
                $hash = @{Algorithm = $Algorithm; Path = $Path}
                use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                  use ($in = (gi $path).OpenRead()) {
                    $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                  }
                }
                new-object PSObject -Property $hash
              }
            }
            Write-Verbose "Testing the $Algorithm hash for $path."
            $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
            Write-Verbose "`tDesired Hash - '$hash'"
            Write-Verbose "`tActual Hash  - '$ActualHash'"
            $Valid = $ActualHash -eq $Hash
            if (-not $Valid) {
              Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
            }
            return $Valid
          }

          function Get-ProjectMetadata {
            <#
              .SYNOPSIS
              Get metadata for a Chef Software, Inc. project
              .DESCRIPTION
              Get metadata for project
              .EXAMPLE
              iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

              Gets the download url and SHA256 checksum for the latest stable release of Chef.
              .EXAMPLE
              iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

              Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
            #>
            [cmdletbinding()]
            param (
              # Base url to retrieve metadata from.
              [uri]$base_server_uri = 'https://omnitruck.chef.io/',
              [string]
              # Project to install
              [string]
              $project = 'chef',
              # Version of the application to install
              # This parameter is optional, if not supplied it will provide the latest version,
              # and if an iteration number is not specified, it will grab the latest available iteration.
              # Partial version numbers are also acceptable (using v=11
              # will grab the latest 11.x client which matches the other flags).
              [string]
              $version,
              # Release channel to install from
              $channel = 'unstable',
              # The following legacy switches are just aliases for the current channel
              [switch]
              $prerelease,
              [switch]
              $nightlies,
              [validateset('auto', 'i386', 'x86_64')]
              [string]
              $architecture = 'auto'
            )

            # PowerShell is only on Windows ATM
            $platform = 'windows'
            Write-Verbose "Platform: $platform"

            $platform_version = Get-PlatformVersion
            Write-Verbose "Platform Version: $platform_version"

            if ($architecture -eq 'auto') {
              $architecture = Get-PlatformArchitecture
            }

            Write-Verbose "Architecture: $architecture"
            Write-Verbose "Project: $project"


              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 a9ee4e86c3ecaa44f9aa5a6e63829b4bac2ed7aa6fd2bb0c04228819c602859a" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.9/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.10/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.11/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ios_xr/6/chef-12.13.12+20160724015517-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 b646214b52c4a8d96dc5222ffea096af24bcc0775435faad8ee8284d1435bda0" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/nexus/7/chef-12.13.12+20160724015517-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 dafdbd09910049d5faa739e11ae3eb60b429dc5654b90185e3b151e621b700c2" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/6/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/7/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/10/chef-12.13.12+20160724015517_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 e55eceae56704977fbbc2079656c0bc977b44757be1567f65c20246f47861313" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/8/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/9/chef-12.13.12+20160724015517_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 03448c3175473d14b625b06ab6e2ccefc87fbba73efc45c902f91c2f5e358b8c" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/12.04/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 41c807aa414d673a99188a105c918092e443be6e8366da2222a4de910100bf17" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 41c807aa414d673a99188a105c918092e443be6e8366da2222a4de910100bf17" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 ab7460941b63d771e70410b7f2a3ad5c3f03781126ec5ad1f11b1f83f4f9b43f" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.10/chef-12.13.12+20160724015517-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 28486ff379c1d4699910f860749b7aa2d6cff32e2ec885a32ea52687fca1b636" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.11/chef-12.13.12+20160724015517-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 28486ff379c1d4699910f860749b7aa2d6cff32e2ec885a32ea52687fca1b636" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/12.04/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 eefa11a16bfac9962a6e923997ea63b2ecb5f70ba272baca569fb87f934be6a0" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 eefa11a16bfac9962a6e923997ea63b2ecb5f70ba272baca569fb87f934be6a0" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 3015f45c0d750a3c284b8c6236d1efd3f5bc8006340c5e7a8a390926d0c85712" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 dcde908bc57c3ee76feeb5ddd54990b68d8a9ff4cccbadf03dbe89f048c3b5db" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2008r2/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/10/chef-12.13.12+20160724015517_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 be7a56b4c74bb77aaea253c77dc7634b2133b5e375d26f6765b8647cc2fb9276" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/5/chef-12.13.12+20160724015517-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 628f25c66f3573c09e75ae3a1d5cfe45e57b62cdd918552de21bf90aa9413ddc" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/6/chef-12.13.12+20160724015517-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f17b63a0a9766aa83ac4f44abaec88f2176c25c49950ba4936e2c3df53c40bff" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012r2/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/6/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/7/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/8/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2008r2/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012r2/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/aix/6.1/chef-12.13.12+20160724015517-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5d5ec238856c052851de33c7e6c0ff6bd667706697cdb58ddccad8695d0c9694" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/aix/7.1/chef-12.13.12+20160724015517-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5d5ec238856c052851de33c7e6c0ff6bd667706697cdb58ddccad8695d0c9694" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/6/chef-12.13.12+20160724015517-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 b8ae79aca74bc0f084babc33190e70c499c0b4ff20d3511680e6390fb286e766" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/5/chef-12.13.12+20160724015517-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f91fbb8c747eb3ff29e70c2c0c4a04e510e98f50445082b735c7006e4cdfbbdc" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/9/chef-12.13.12+20160724015517_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 fdf4d823de45cb9379904c1c3c539e74a79eccc67c8e9fa2efad0dafd3a1d011" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.10/chef-12.13.12+20160724015517-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 8a5d6847f46868162cdd26086d2795affc218fd5304498e26544b0331eb05834" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.11/chef-12.13.12+20160724015517-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 8a5d6847f46868162cdd26086d2795affc218fd5304498e26544b0331eb05834" | out-file "$artifact_info_dir/artifact_info" -Append


            $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

            $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
              foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

            Write-Verbose "Project details: "
            foreach ($key in $package_metadata.keys) {
              Write-Verbose "`t$key = $($package_metadata[$key])"
            }
            $package_metadata
          }

          function Install-Project {
            <#
              .SYNOPSIS
              Install a Chef Software, Inc. product
              .DESCRIPTION
              Install a Chef Software, Inc. product
              .EXAMPLE
              iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

              Installs the latest stable version of Chef.
              .EXAMPLE
              iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

              Installs the latest integration build of the Chef Development Kit
            #>
            [cmdletbinding(SupportsShouldProcess=$true)]
            param (
              # Project to install
              [string]
              $project = 'chef',
              # Release channel to install from
              [validateset('current', 'stable', 'unstable')]
              [string]
              $channel = 'stable',
              # Version of the application to install
              # This parameter is optional, if not supplied it will provide the latest version,
              # and if an iteration number is not specified, it will grab the latest available iteration.
              # Partial version numbers are also acceptable (using v=11
              # will grab the latest 11.x client which matches the other flags).
              [string]
              $version,
              # Full path for the downloaded installer.
              [string]
              $filename,
              # Full path to the location to download the installer
              [string]
              $download_directory = $env:temp,
              # The following legacy switches are just aliases for the current channel
              [switch]
              $prerelease,
              [switch]
              $nightlies,
              [validateset('auto', 'i386', 'x86_64')]
              [string]
              $architecture = 'auto'
            )

            $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

            if (-not [string]::IsNullOrEmpty($filename)) {
              $download_directory = split-path $filename
              $filename = split-path $filename -leaf
              if ([string]::IsNullOrEmpty($download_directory)) {
                $download_directory = $pwd
              }
            }
            else {
              $filename = ($package_metadata.url -split '/')[-1]
            }
            Write-Verbose "Download directory: $download_directory"
            Write-Verbose "Filename: $filename"

            if (-not (test-path $download_directory)) {
              mkdir $download_directory
            }
            $download_directory = (resolve-path $download_directory).providerpath
            $download_destination = join-path $download_directory $filename

            if ((test-path $download_destination) -and
              (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
              Write-Verbose "Found existing valid installer at $download_destination."
            }
            else {
              if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                Get-WebContent $package_metadata.url -filepath $download_destination
              }
            }

            if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
              if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                Write-Host "Installing $project from $download_destination"
                $installingProject = $True
                $installAttempts = 0
                while ($installingProject) {
                  $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                  $p.WaitForExit()
                  if ($p.ExitCode -eq 1618) {
                    Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                    continue
                  } elseif ($p.ExitCode -ne 0) {
                    throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                  }
                  $installingProject = $False
                }
              }
              else {
                throw "Failed to validate the downloaded installer for $project."
              }
            }
          }
          set-alias install -value Install-Project
          export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

          }

          install -project chef -version 12.13.12+20160724015517 -channel unstable
          )
          D      [WinRM] Command created for new-module -name Omnitruck -scriptblock {
          function Get-PlatformVersion {
            switch -regex ((get-wmiobject win32_operatingsystem).version) {
              '10\.0\.\d+' {$platform_version = '2012r2'}
              '6\.3\.\d+'  {$platform_version = '2012r2'}
              '6\.2\.\d+'  {$platform_version = '2012'}
              '6\.1\.\d+'  {$platform_version = '2008r2'}
              '6\.0\.\d+'  {$platform_version = '2008'}
            }
            return $platform_version
          }

          function Get-PlatformArchitecture {
            if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
              $architecture = 'x86_64'
            } else {
              $architecture = 'i386'
            }
            return $architecture
          }

          function New-Uri {
            param ($baseuri, $newuri)

            try {
            new-object System.Uri $baseuri, $newuri
            }
            catch [System.Management.Automation.MethodInvocationException]{
              Write-Error "$($_.exception.message)"
              throw $_.exception
            }
          }

          function Get-WebContent {
            param ($uri, $filepath)
            $proxy = New-Object -TypeName System.Net.WebProxy
            $wc = new-object System.Net.WebClient
            $proxy.Address = $env:http_proxy
            $wc.Proxy = $proxy

            try {
              if ([string]::IsNullOrEmpty($filepath)) {
                $wc.downloadstring($uri)
              }
              else {
                $wc.downloadfile($uri, $filepath)
              }
            }
            catch {
              $exception = $_.Exception
              Write-Host "There was an error: "
              do {
                Write-Host "`t$($exception.message)"
                $exception = $exception.innerexception
              } while ($exception)
              throw "Failed to download from $uri."
            }
          }

          function Test-ProjectPackage {
            [cmdletbinding()]
            param ($Path, $Algorithm = 'SHA256', $Hash)

            if (-not (get-command get-filehash))   {
              function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
              function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
              function Get-FileHash ($Path, $Algorithm) {
                $Path = (resolve-path $path).providerpath
                $hash = @{Algorithm = $Algorithm; Path = $Path}
                use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                  use ($in = (gi $path).OpenRead()) {
                    $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                  }
                }
                new-object PSObject -Property $hash
              }
            }
            Write-Verbose "Testing the $Algorithm hash for $path."
            $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
            Write-Verbose "`tDesired Hash - '$hash'"
            Write-Verbose "`tActual Hash  - '$ActualHash'"
            $Valid = $ActualHash -eq $Hash
            if (-not $Valid) {
              Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
            }
            return $Valid
          }

          function Get-ProjectMetadata {
            <#
              .SYNOPSIS
              Get metadata for a Chef Software, Inc. project
              .DESCRIPTION
              Get metadata for project
              .EXAMPLE
              iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

              Gets the download url and SHA256 checksum for the latest stable release of Chef.
              .EXAMPLE
              iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

              Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
            #>
            [cmdletbinding()]
            param (
              # Base url to retrieve metadata from.
              [uri]$base_server_uri = 'https://omnitruck.chef.io/',
              [string]
              # Project to install
              [string]
              $project = 'chef',
              # Version of the application to install
              # This parameter is optional, if not supplied it will provide the latest version,
              # and if an iteration number is not specified, it will grab the latest available iteration.
              # Partial version numbers are also acceptable (using v=11
              # will grab the latest 11.x client which matches the other flags).
              [string]
              $version,
              # Release channel to install from
              $channel = 'unstable',
              # The following legacy switches are just aliases for the current channel
              [switch]
              $prerelease,
              [switch]
              $nightlies,
              [validateset('auto', 'i386', 'x86_64')]
              [string]
              $architecture = 'auto'
            )

            # PowerShell is only on Windows ATM
            $platform = 'windows'
            Write-Verbose "Platform: $platform"

            $platform_version = Get-PlatformVersion
            Write-Verbose "Platform Version: $platform_version"

            if ($architecture -eq 'auto') {
              $architecture = Get-PlatformArchitecture
            }

            Write-Verbose "Architecture: $architecture"
            Write-Verbose "Project: $project"


              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 a9ee4e86c3ecaa44f9aa5a6e63829b4bac2ed7aa6fd2bb0c04228819c602859a" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.9/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.10/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.11/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ios_xr/6/chef-12.13.12+20160724015517-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 b646214b52c4a8d96dc5222ffea096af24bcc0775435faad8ee8284d1435bda0" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/nexus/7/chef-12.13.12+20160724015517-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 dafdbd09910049d5faa739e11ae3eb60b429dc5654b90185e3b151e621b700c2" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/6/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/7/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/10/chef-12.13.12+20160724015517_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 e55eceae56704977fbbc2079656c0bc977b44757be1567f65c20246f47861313" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/8/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/9/chef-12.13.12+20160724015517_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 03448c3175473d14b625b06ab6e2ccefc87fbba73efc45c902f91c2f5e358b8c" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/12.04/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 41c807aa414d673a99188a105c918092e443be6e8366da2222a4de910100bf17" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 41c807aa414d673a99188a105c918092e443be6e8366da2222a4de910100bf17" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 ab7460941b63d771e70410b7f2a3ad5c3f03781126ec5ad1f11b1f83f4f9b43f" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.10/chef-12.13.12+20160724015517-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 28486ff379c1d4699910f860749b7aa2d6cff32e2ec885a32ea52687fca1b636" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.11/chef-12.13.12+20160724015517-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 28486ff379c1d4699910f860749b7aa2d6cff32e2ec885a32ea52687fca1b636" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/12.04/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 eefa11a16bfac9962a6e923997ea63b2ecb5f70ba272baca569fb87f934be6a0" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 eefa11a16bfac9962a6e923997ea63b2ecb5f70ba272baca569fb87f934be6a0" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 3015f45c0d750a3c284b8c6236d1efd3f5bc8006340c5e7a8a390926d0c85712" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 dcde908bc57c3ee76feeb5ddd54990b68d8a9ff4cccbadf03dbe89f048c3b5db" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2008r2/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/10/chef-12.13.12+20160724015517_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 be7a56b4c74bb77aaea253c77dc7634b2133b5e375d26f6765b8647cc2fb9276" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/5/chef-12.13.12+20160724015517-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 628f25c66f3573c09e75ae3a1d5cfe45e57b62cdd918552de21bf90aa9413ddc" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/6/chef-12.13.12+20160724015517-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f17b63a0a9766aa83ac4f44abaec88f2176c25c49950ba4936e2c3df53c40bff" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012r2/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/6/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/7/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/8/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2008r2/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012r2/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/aix/6.1/chef-12.13.12+20160724015517-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5d5ec238856c052851de33c7e6c0ff6bd667706697cdb58ddccad8695d0c9694" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/aix/7.1/chef-12.13.12+20160724015517-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5d5ec238856c052851de33c7e6c0ff6bd667706697cdb58ddccad8695d0c9694" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/6/chef-12.13.12+20160724015517-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 b8ae79aca74bc0f084babc33190e70c499c0b4ff20d3511680e6390fb286e766" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/5/chef-12.13.12+20160724015517-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f91fbb8c747eb3ff29e70c2c0c4a04e510e98f50445082b735c7006e4cdfbbdc" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/9/chef-12.13.12+20160724015517_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 fdf4d823de45cb9379904c1c3c539e74a79eccc67c8e9fa2efad0dafd3a1d011" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.10/chef-12.13.12+20160724015517-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 8a5d6847f46868162cdd26086d2795affc218fd5304498e26544b0331eb05834" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.11/chef-12.13.12+20160724015517-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 8a5d6847f46868162cdd26086d2795affc218fd5304498e26544b0331eb05834" | out-file "$artifact_info_dir/artifact_info" -Append


            $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

            $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
              foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

            Write-Verbose "Project details: "
            foreach ($key in $package_metadata.keys) {
              Write-Verbose "`t$key = $($package_metadata[$key])"
            }
            $package_metadata
          }

          function Install-Project {
            <#
              .SYNOPSIS
              Install a Chef Software, Inc. product
              .DESCRIPTION
              Install a Chef Software, Inc. product
              .EXAMPLE
              iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

              Installs the latest stable version of Chef.
              .EXAMPLE
              iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

              Installs the latest integration build of the Chef Development Kit
            #>
            [cmdletbinding(SupportsShouldProcess=$true)]
            param (
              # Project to install
              [string]
              $project = 'chef',
              # Release channel to install from
              [validateset('current', 'stable', 'unstable')]
              [string]
              $channel = 'stable',
              # Version of the application to install
              # This parameter is optional, if not supplied it will provide the latest version,
              # and if an iteration number is not specified, it will grab the latest available iteration.
              # Partial version numbers are also acceptable (using v=11
              # will grab the latest 11.x client which matches the other flags).
              [string]
              $version,
              # Full path for the downloaded installer.
              [string]
              $filename,
              # Full path to the location to download the installer
              [string]
              $download_directory = $env:temp,
              # The following legacy switches are just aliases for the current channel
              [switch]
              $prerelease,
              [switch]
              $nightlies,
              [validateset('auto', 'i386', 'x86_64')]
              [string]
              $architecture = 'auto'
            )

            $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

            if (-not [string]::IsNullOrEmpty($filename)) {
              $download_directory = split-path $filename
              $filename = split-path $filename -leaf
              if ([string]::IsNullOrEmpty($download_directory)) {
                $download_directory = $pwd
              }
            }
            else {
              $filename = ($package_metadata.url -split '/')[-1]
            }
            Write-Verbose "Download directory: $download_directory"
            Write-Verbose "Filename: $filename"

            if (-not (test-path $download_directory)) {
              mkdir $download_directory
            }
            $download_directory = (resolve-path $download_directory).providerpath
            $download_destination = join-path $download_directory $filename

            if ((test-path $download_destination) -and
              (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
              Write-Verbose "Found existing valid installer at $download_destination."
            }
            else {
              if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                Get-WebContent $package_metadata.url -filepath $download_destination
              }
            }

            if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
              if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                Write-Host "Installing $project from $download_destination"
                $installingProject = $True
                $installAttempts = 0
                while ($installingProject) {
                  $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                  $p.WaitForExit()
                  if ($p.ExitCode -eq 1618) {
                    Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                    continue
                  } elseif ($p.ExitCode -ne 0) {
                    throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                  }
                  $installingProject = $False
                }
              }
              else {
                throw "Failed to validate the downloaded installer for $project."
              }
            }
          }
          set-alias install -value Install-Project
          export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

          }

          install -project chef -version 12.13.12+20160724015517 -channel unstable
           with id: 09BB8B67-C952-4306-BA53-B0B4565ABA74
          D      [WinRM] creating command_id: 09BB8B67-C952-4306-BA53-B0B4565ABA74 on shell_id 88CAB3BA-A3DD-4AB8-B45F-942201C523B7
          D      [WinRM] Waiting for output...
          D      [WinRM] Processing output

                 ModuleType Version    Name                                ExportedCommands
                 ---------- -------    ----                                ----------------
                 Script     0.0        Omnitruck                           {Get-ProjectMetada...
          D      [WinRM] Waiting for output...
          D      [WinRM] cleaning up command_id: 09BB8B67-C952-4306-BA53-B0B4565ABA74 on shell_id 88CAB3BA-A3DD-4AB8-B45F-942201C523B7
                 [WinRM] 500 returned in cleanup with error: Bad HTTP response returned from server. Body(if present): (500).
          D      Cleaning up local sandbox in /tmp/cheftest/fips-unit-functional-windows-2012r2-sandbox-20160724-8146-yp150q
          D      [WinRM] Waiting for output...
          D      [WinRM] Processing output
          D      [WinRM] polling for pipeline state. message: #<WinRM::PSRP::Message:0x0000000442f938 @data="\xEF\xBB\xBF<Obj RefId=\"0\"><MS><Version N=\"protocolversion\">2.2</Version><Version N=\"PSVersion\">2.0</Version><Version N=\"SerializationVersion\">1.1.0.1</Version></MS></Obj>", @destination=1, @type=65538, @pipeline_id="00000000-0000-0000-0000-000000000000", @runspace_pool_id="00000000-0000-0000-0000-000000000000">
          D      [WinRM] Waiting for output...
          D      [WinRM] Processing output
          D      [WinRM] polling for pipeline state. message: #<WinRM::PSRP::Message:0x000000041bce58 @data="\xEF\xBB\xBF<Obj RefId=\"0\"><MS><Obj N=\"ApplicationPrivateData\" RefId=\"1\"><TN RefId=\"0\"><T>System.Management.Automation.PSPrimitiveDictionary</T><T>System.Collections.Hashtable</T><T>System.Object</T></TN><DCT><En><S N=\"Key\">DebugMode</S><I32 N=\"Value\">1</I32></En><En><S N=\"Key\">DebugStop</S><B N=\"Value\">false</B></En><En><S N=\"Key\">PSVersionTable</S><Obj N=\"Value\" RefId=\"2\"><TNRef RefId=\"0\" /><DCT><En><S N=\"Key\">PSVersion</S><Version N=\"Value\">2.0</Version></En><En><S N=\"Key\">PSCompatibleVersions</S><Obj N=\"Value\" RefId=\"3\"><TN RefId=\"1\"><T>System.Version[]</T><T>System.Array</T><T>System.Object</T></TN><LST><Version>1.0</Version><Version>2.0</Version><Version>3.0</Version><Version>4.0</Version></LST></Obj></En><En><S N=\"Key\">BuildVersion</S><Version N=\"Value\">6.3.9600.17400</Version></En><En><S N=\"Key\">CLRVersion</S><Version N=\"Value\">4.0.30319.42000</Version></En><En><S N=\"Key\">WSManStackVersion</S><Version N=\"Value\">3.0</Version></En><En><S N=\"Key\">PSRemotingProtocolVersion</S><Version N=\"Value\">2.2</Version></En><En><S N=\"Key\">SerializationVersion</S><Version N=\"Value\">1.1.0.1</Version></En></DCT></Obj></En><En><S N=\"Key\">DebugBreakpointCount</S><I32 N=\"Value\">0</I32></En></DCT></Obj></MS></Obj>", @destination=1, @type=135177, @pipeline_id="00000000-0000-0000-0000-000000000000", @runspace_pool_id="00000000-0000-0000-0000-000000000000">
          D      [WinRM] Waiting for output...
          D      [WinRM] Processing output
          D      [WinRM] polling for pipeline state. message: #<WinRM::PSRP::Message:0x000000040a75b8 @data="\xEF\xBB\xBF<Obj RefId=\"0\"><MS><I32 N=\"RunspaceState\">2</I32></MS></Obj>", @destination=1, @type=135173, @pipeline_id="00000000-0000-0000-0000-000000000000", @runspace_pool_id="00000000-0000-0000-0000-000000000000">
          D      [WinRM] remote shell created with shell_id: ED645B0F-0808-4848-A782-54A20309AA8D
          D      [WinRM] Command created for Write-Host '[WinRM] Established
          ' with id: DC071345-42F0-49C3-B2B0-6A645EFE337F
          D      [WinRM] creating command_id: DC071345-42F0-49C3-B2B0-6A645EFE337F on shell_id ED645B0F-0808-4848-A782-54A20309AA8D
          D      [WinRM] Waiting for output...
          D      [WinRM] Processing output
                 [WinRM] Established

          D      [WinRM] cleaning up command_id: DC071345-42F0-49C3-B2B0-6A645EFE337F on shell_id ED645B0F-0808-4848-A782-54A20309AA8D
          D      [WinRM] reusing existing connection <{:endpoint=>"http://10.194.14.36:5985/wsman", :user=>"administrator", :password=>"ES-AQjsVJHU", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"ES-AQjsVJHU", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
          D      [WinRM] <{:endpoint=>"http://10.194.14.36:5985/wsman", :user=>"administrator", :password=>"ES-AQjsVJHU", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"ES-AQjsVJHU", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File)
          D      [WinRM] Command created for New-Item -Force C:\chef\ohai\hints\ec2.json -ItemType File with id: BD731AD8-7C83-4F5A-B165-9FBB9D04E13E
          D      [WinRM] creating command_id: BD731AD8-7C83-4F5A-B165-9FBB9D04E13E on shell_id ED645B0F-0808-4848-A782-54A20309AA8D
          D      [WinRM] Waiting for output...
          D      [WinRM] Processing output


                     Directory: C:\chef\ohai\hints


                 Mode                LastWriteTime     Length Name
                 ----                -------------     ------ ----
                 -a---         7/24/2016   2:32 AM          0 ec2.json


          D      [WinRM] cleaning up command_id: BD731AD8-7C83-4F5A-B165-9FBB9D04E13E on shell_id ED645B0F-0808-4848-A782-54A20309AA8D
          D      ec2:create '10.194.14.36'
                 Finished creating <fips-integration-windows-2012r2> (2m9.03s).
          -----> Converging <fips-integration-windows-2012r2>...
                 Preparing files for transfer
          D      Creating local sandbox in /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160724-8146-1vrnrv5
                 Preparing dna.json
          D      Creating dna.json from {:chef_acceptance=>"true", :use_system_chef=>"true", :run_list=>[]}
                 Berksfile, Cheffile, cookbooks/, or metadata.rb not found so Chef will run with effectively no cookbooks. Is this intended?
                 Removing non-cookbook files before transfer
                 Preparing validation.pem
          D      Using a dummy validation.pem
                 Preparing client.rb
          D      Creating client.rb from {:node_name=>"fips-integration-windows-2012r2", :checksum_path=>"\#{ENV['TEMP']}\\kitchen\\checksums", :file_cache_path=>"\#{ENV['TEMP']}\\kitchen\\cache", :file_backup_path=>"\#{ENV['TEMP']}\\kitchen\\backup", :cookbook_path=>["\#{ENV['TEMP']}\\kitchen\\cookbooks", "\#{ENV['TEMP']}\\kitchen\\site-cookbooks"], :data_bag_path=>"\#{ENV['TEMP']}\\kitchen\\data_bags", :environment_path=>"\#{ENV['TEMP']}\\kitchen\\environments", :node_path=>"\#{ENV['TEMP']}\\kitchen\\nodes", :role_path=>"\#{ENV['TEMP']}\\kitchen\\roles", :client_path=>"\#{ENV['TEMP']}\\kitchen\\clients", :user_path=>"\#{ENV['TEMP']}\\kitchen\\users", :validation_key=>"\#{ENV['TEMP']}\\kitchen\\validation.pem", :client_key=>"\#{ENV['TEMP']}\\kitchen\\client.pem", :chef_server_url=>"http://127.0.0.1:8889", :encrypted_data_bag_secret=>"\#{ENV['TEMP']}\\kitchen\\encrypted_data_bag_secret", :audit_mode=>":enabled", :named_run_list=>{}}
          D      [WinRM] reusing existing connection <{:endpoint=>"http://10.194.14.36:5985/wsman", :user=>"administrator", :password=>"ES-AQjsVJHU", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"ES-AQjsVJHU", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}>
          D      [WinRM] <{:endpoint=>"http://10.194.14.36:5985/wsman", :user=>"administrator", :password=>"ES-AQjsVJHU", :transport=>:negotiate, :elevated_username=>"administrator", :elevated_password=>"ES-AQjsVJHU", :no_ssl_peer_verification=>true, :disable_sspi=>false, :basic_auth_only=>false}> (new-module -name Omnitruck -scriptblock {
          function Get-PlatformVersion {
            switch -regex ((get-wmiobject win32_operatingsystem).version) {
              '10\.0\.\d+' {$platform_version = '2012r2'}
              '6\.3\.\d+'  {$platform_version = '2012r2'}
              '6\.2\.\d+'  {$platform_version = '2012'}
              '6\.1\.\d+'  {$platform_version = '2008r2'}
              '6\.0\.\d+'  {$platform_version = '2008'}
            }
            return $platform_version
          }

          function Get-PlatformArchitecture {
            if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
              $architecture = 'x86_64'
            } else {
              $architecture = 'i386'
            }
            return $architecture
          }

          function New-Uri {
            param ($baseuri, $newuri)

            try {
            new-object System.Uri $baseuri, $newuri
            }
            catch [System.Management.Automation.MethodInvocationException]{
              Write-Error "$($_.exception.message)"
              throw $_.exception
            }
          }

          function Get-WebContent {
            param ($uri, $filepath)
            $proxy = New-Object -TypeName System.Net.WebProxy
            $wc = new-object System.Net.WebClient
            $proxy.Address = $env:http_proxy
            $wc.Proxy = $proxy

            try {
              if ([string]::IsNullOrEmpty($filepath)) {
                $wc.downloadstring($uri)
              }
              else {
                $wc.downloadfile($uri, $filepath)
              }
            }
            catch {
              $exception = $_.Exception
              Write-Host "There was an error: "
              do {
                Write-Host "`t$($exception.message)"
                $exception = $exception.innerexception
              } while ($exception)
              throw "Failed to download from $uri."
            }
          }

          function Test-ProjectPackage {
            [cmdletbinding()]
            param ($Path, $Algorithm = 'SHA256', $Hash)

            if (-not (get-command get-filehash))   {
              function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
              function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
              function Get-FileHash ($Path, $Algorithm) {
                $Path = (resolve-path $path).providerpath
                $hash = @{Algorithm = $Algorithm; Path = $Path}
                use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                  use ($in = (gi $path).OpenRead()) {
                    $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                  }
                }
                new-object PSObject -Property $hash
              }
            }
            Write-Verbose "Testing the $Algorithm hash for $path."
            $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
            Write-Verbose "`tDesired Hash - '$hash'"
            Write-Verbose "`tActual Hash  - '$ActualHash'"
            $Valid = $ActualHash -eq $Hash
            if (-not $Valid) {
              Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
            }
            return $Valid
          }

          function Get-ProjectMetadata {
            <#
              .SYNOPSIS
              Get metadata for a Chef Software, Inc. project
              .DESCRIPTION
              Get metadata for project
              .EXAMPLE
              iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

              Gets the download url and SHA256 checksum for the latest stable release of Chef.
              .EXAMPLE
              iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

              Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
            #>
            [cmdletbinding()]
            param (
              # Base url to retrieve metadata from.
              [uri]$base_server_uri = 'https://omnitruck.chef.io/',
              [string]
              # Project to install
              [string]
              $project = 'chef',
              # Version of the application to install
              # This parameter is optional, if not supplied it will provide the latest version,
              # and if an iteration number is not specified, it will grab the latest available iteration.
              # Partial version numbers are also acceptable (using v=11
              # will grab the latest 11.x client which matches the other flags).
              [string]
              $version,
              # Release channel to install from
              $channel = 'unstable',
              # The following legacy switches are just aliases for the current channel
              [switch]
              $prerelease,
              [switch]
              $nightlies,
              [validateset('auto', 'i386', 'x86_64')]
              [string]
              $architecture = 'auto'
            )

            # PowerShell is only on Windows ATM
            $platform = 'windows'
            Write-Verbose "Platform: $platform"

            $platform_version = Get-PlatformVersion
            Write-Verbose "Platform Version: $platform_version"

            if ($architecture -eq 'auto') {
              $architecture = Get-PlatformArchitecture
            }

            Write-Verbose "Architecture: $architecture"
            Write-Verbose "Project: $project"


              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 a9ee4e86c3ecaa44f9aa5a6e63829b4bac2ed7aa6fd2bb0c04228819c602859a" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.9/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.10/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.11/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ios_xr/6/chef-12.13.12+20160724015517-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 b646214b52c4a8d96dc5222ffea096af24bcc0775435faad8ee8284d1435bda0" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/nexus/7/chef-12.13.12+20160724015517-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 dafdbd09910049d5faa739e11ae3eb60b429dc5654b90185e3b151e621b700c2" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/6/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/7/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/10/chef-12.13.12+20160724015517_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 e55eceae56704977fbbc2079656c0bc977b44757be1567f65c20246f47861313" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/8/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/9/chef-12.13.12+20160724015517_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 03448c3175473d14b625b06ab6e2ccefc87fbba73efc45c902f91c2f5e358b8c" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/12.04/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 41c807aa414d673a99188a105c918092e443be6e8366da2222a4de910100bf17" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 41c807aa414d673a99188a105c918092e443be6e8366da2222a4de910100bf17" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 ab7460941b63d771e70410b7f2a3ad5c3f03781126ec5ad1f11b1f83f4f9b43f" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.10/chef-12.13.12+20160724015517-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 28486ff379c1d4699910f860749b7aa2d6cff32e2ec885a32ea52687fca1b636" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.11/chef-12.13.12+20160724015517-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 28486ff379c1d4699910f860749b7aa2d6cff32e2ec885a32ea52687fca1b636" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/12.04/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 eefa11a16bfac9962a6e923997ea63b2ecb5f70ba272baca569fb87f934be6a0" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 eefa11a16bfac9962a6e923997ea63b2ecb5f70ba272baca569fb87f934be6a0" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 3015f45c0d750a3c284b8c6236d1efd3f5bc8006340c5e7a8a390926d0c85712" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 dcde908bc57c3ee76feeb5ddd54990b68d8a9ff4cccbadf03dbe89f048c3b5db" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2008r2/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/10/chef-12.13.12+20160724015517_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 be7a56b4c74bb77aaea253c77dc7634b2133b5e375d26f6765b8647cc2fb9276" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/5/chef-12.13.12+20160724015517-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 628f25c66f3573c09e75ae3a1d5cfe45e57b62cdd918552de21bf90aa9413ddc" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/6/chef-12.13.12+20160724015517-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f17b63a0a9766aa83ac4f44abaec88f2176c25c49950ba4936e2c3df53c40bff" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012r2/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/6/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/7/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/8/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2008r2/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012r2/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/aix/6.1/chef-12.13.12+20160724015517-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5d5ec238856c052851de33c7e6c0ff6bd667706697cdb58ddccad8695d0c9694" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/aix/7.1/chef-12.13.12+20160724015517-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5d5ec238856c052851de33c7e6c0ff6bd667706697cdb58ddccad8695d0c9694" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/6/chef-12.13.12+20160724015517-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 b8ae79aca74bc0f084babc33190e70c499c0b4ff20d3511680e6390fb286e766" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/5/chef-12.13.12+20160724015517-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f91fbb8c747eb3ff29e70c2c0c4a04e510e98f50445082b735c7006e4cdfbbdc" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/9/chef-12.13.12+20160724015517_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 fdf4d823de45cb9379904c1c3c539e74a79eccc67c8e9fa2efad0dafd3a1d011" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.10/chef-12.13.12+20160724015517-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 8a5d6847f46868162cdd26086d2795affc218fd5304498e26544b0331eb05834" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.11/chef-12.13.12+20160724015517-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 8a5d6847f46868162cdd26086d2795affc218fd5304498e26544b0331eb05834" | out-file "$artifact_info_dir/artifact_info" -Append


            $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

            $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
              foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

            Write-Verbose "Project details: "
            foreach ($key in $package_metadata.keys) {
              Write-Verbose "`t$key = $($package_metadata[$key])"
            }
            $package_metadata
          }

          function Install-Project {
            <#
              .SYNOPSIS
              Install a Chef Software, Inc. product
              .DESCRIPTION
              Install a Chef Software, Inc. product
              .EXAMPLE
              iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

              Installs the latest stable version of Chef.
              .EXAMPLE
              iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

              Installs the latest integration build of the Chef Development Kit
            #>
            [cmdletbinding(SupportsShouldProcess=$true)]
            param (
              # Project to install
              [string]
              $project = 'chef',
              # Release channel to install from
              [validateset('current', 'stable', 'unstable')]
              [string]
              $channel = 'stable',
              # Version of the application to install
              # This parameter is optional, if not supplied it will provide the latest version,
              # and if an iteration number is not specified, it will grab the latest available iteration.
              # Partial version numbers are also acceptable (using v=11
              # will grab the latest 11.x client which matches the other flags).
              [string]
              $version,
              # Full path for the downloaded installer.
              [string]
              $filename,
              # Full path to the location to download the installer
              [string]
              $download_directory = $env:temp,
              # The following legacy switches are just aliases for the current channel
              [switch]
              $prerelease,
              [switch]
              $nightlies,
              [validateset('auto', 'i386', 'x86_64')]
              [string]
              $architecture = 'auto'
            )

            $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

            if (-not [string]::IsNullOrEmpty($filename)) {
              $download_directory = split-path $filename
              $filename = split-path $filename -leaf
              if ([string]::IsNullOrEmpty($download_directory)) {
                $download_directory = $pwd
              }
            }
            else {
              $filename = ($package_metadata.url -split '/')[-1]
            }
            Write-Verbose "Download directory: $download_directory"
            Write-Verbose "Filename: $filename"

            if (-not (test-path $download_directory)) {
              mkdir $download_directory
            }
            $download_directory = (resolve-path $download_directory).providerpath
            $download_destination = join-path $download_directory $filename

            if ((test-path $download_destination) -and
              (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
              Write-Verbose "Found existing valid installer at $download_destination."
            }
            else {
              if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                Get-WebContent $package_metadata.url -filepath $download_destination
              }
            }

            if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
              if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                Write-Host "Installing $project from $download_destination"
                $installingProject = $True
                $installAttempts = 0
                while ($installingProject) {
                  $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                  $p.WaitForExit()
                  if ($p.ExitCode -eq 1618) {
                    Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                    continue
                  } elseif ($p.ExitCode -ne 0) {
                    throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                  }
                  $installingProject = $False
                }
              }
              else {
                throw "Failed to validate the downloaded installer for $project."
              }
            }
          }
          set-alias install -value Install-Project
          export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

          }

          install -project chef -version 12.13.12+20160724015517 -channel unstable
          )
          D      [WinRM] Command created for new-module -name Omnitruck -scriptblock {
          function Get-PlatformVersion {
            switch -regex ((get-wmiobject win32_operatingsystem).version) {
              '10\.0\.\d+' {$platform_version = '2012r2'}
              '6\.3\.\d+'  {$platform_version = '2012r2'}
              '6\.2\.\d+'  {$platform_version = '2012'}
              '6\.1\.\d+'  {$platform_version = '2008r2'}
              '6\.0\.\d+'  {$platform_version = '2008'}
            }
            return $platform_version
          }

          function Get-PlatformArchitecture {
            if ((get-wmiobject win32_operatingsystem).osarchitecture -like '64-bit') {
              $architecture = 'x86_64'
            } else {
              $architecture = 'i386'
            }
            return $architecture
          }

          function New-Uri {
            param ($baseuri, $newuri)

            try {
            new-object System.Uri $baseuri, $newuri
            }
            catch [System.Management.Automation.MethodInvocationException]{
              Write-Error "$($_.exception.message)"
              throw $_.exception
            }
          }

          function Get-WebContent {
            param ($uri, $filepath)
            $proxy = New-Object -TypeName System.Net.WebProxy
            $wc = new-object System.Net.WebClient
            $proxy.Address = $env:http_proxy
            $wc.Proxy = $proxy

            try {
              if ([string]::IsNullOrEmpty($filepath)) {
                $wc.downloadstring($uri)
              }
              else {
                $wc.downloadfile($uri, $filepath)
              }
            }
            catch {
              $exception = $_.Exception
              Write-Host "There was an error: "
              do {
                Write-Host "`t$($exception.message)"
                $exception = $exception.innerexception
              } while ($exception)
              throw "Failed to download from $uri."
            }
          }

          function Test-ProjectPackage {
            [cmdletbinding()]
            param ($Path, $Algorithm = 'SHA256', $Hash)

            if (-not (get-command get-filehash))   {
              function disposable($o){($o -is [IDisposable]) -and (($o | get-member | foreach-object {$_.name}) -contains 'Dispose')}
              function use($obj, [scriptblock]$sb){try {& $sb} catch [exception]{throw $_} finally {if (disposable $obj) {$obj.Dispose()}} }
              function Get-FileHash ($Path, $Algorithm) {
                $Path = (resolve-path $path).providerpath
                $hash = @{Algorithm = $Algorithm; Path = $Path}
                use ($c = New-Object -TypeName Security.Cryptography.SHA256Managed) {
                  use ($in = (gi $path).OpenRead()) {
                    $hash.Hash = ([BitConverter]::ToString($c.ComputeHash($in))).Replace("-", "").ToUpper()
                  }
                }
                new-object PSObject -Property $hash
              }
            }
            Write-Verbose "Testing the $Algorithm hash for $path."
            $ActualHash = (Get-FileHash -Algorithm $Algorithm -Path $Path).Hash.ToLower()
            Write-Verbose "`tDesired Hash - '$hash'"
            Write-Verbose "`tActual Hash  - '$ActualHash'"
            $Valid = $ActualHash -eq $Hash
            if (-not $Valid) {
              Write-Error "Failed to validate the downloaded installer.  The expected $Algorithm hash was '$Hash' and the actual hash was '$ActualHash' for $path"
            }
            return $Valid
          }

          function Get-ProjectMetadata {
            <#
              .SYNOPSIS
              Get metadata for a Chef Software, Inc. project
              .DESCRIPTION
              Get metadata for project
              .EXAMPLE
              iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chef -channel stable

              Gets the download url and SHA256 checksum for the latest stable release of Chef.
              .EXAMPLE
              iex (irm 'https://omnitruck.chef.io/install.ps1'); Get-ProjectMetadata -project chefdk -channel stable -version 0.8.0

              Gets the download url, and SHA256 checksum for ChefDK 0.8.0.
            #>
            [cmdletbinding()]
            param (
              # Base url to retrieve metadata from.
              [uri]$base_server_uri = 'https://omnitruck.chef.io/',
              [string]
              # Project to install
              [string]
              $project = 'chef',
              # Version of the application to install
              # This parameter is optional, if not supplied it will provide the latest version,
              # and if an iteration number is not specified, it will grab the latest available iteration.
              # Partial version numbers are also acceptable (using v=11
              # will grab the latest 11.x client which matches the other flags).
              [string]
              $version,
              # Release channel to install from
              $channel = 'unstable',
              # The following legacy switches are just aliases for the current channel
              [switch]
              $prerelease,
              [switch]
              $nightlies,
              [validateset('auto', 'i386', 'x86_64')]
              [string]
              $architecture = 'auto'
            )

            # PowerShell is only on Windows ATM
            $platform = 'windows'
            Write-Verbose "Platform: $platform"

            $platform_version = Get-PlatformVersion
            Write-Verbose "Platform Version: $platform_version"

            if ($architecture -eq 'auto') {
              $architecture = Get-PlatformArchitecture
            }

            Write-Verbose "Architecture: $architecture"
            Write-Verbose "Project: $project"


              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/ppc64le"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_ppc64el.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 a9ee4e86c3ecaa44f9aa5a6e63829b4bac2ed7aa6fd2bb0c04228819c602859a" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.9/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.9/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.10/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.10/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/mac_os_x/10.11/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/mac_os_x/10.11/chef-12.13.12+20160724015517-1.dmg" | out-file "$artifact_info_dir/artifact_info"
              "sha256 61c9f9a5dbcaa81d90bbf9323631fb4892b4e8583c250cd3862191ebc3df6c6a" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ios_xr/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ios_xr/6/chef-12.13.12+20160724015517-1.ios_xr6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 b646214b52c4a8d96dc5222ffea096af24bcc0775435faad8ee8284d1435bda0" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/nexus/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/nexus/7/chef-12.13.12+20160724015517-1.nexus7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 dafdbd09910049d5faa739e11ae3eb60b429dc5654b90185e3b151e621b700c2" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/6/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/7/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/10/chef-12.13.12+20160724015517_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 e55eceae56704977fbbc2079656c0bc977b44757be1567f65c20246f47861313" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/8/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 cb395e7193c4e8752dbf91f3c77e71887e56dee8f7194c22607874dd484fbf8e" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/9/chef-12.13.12+20160724015517_1.i386.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 03448c3175473d14b625b06ab6e2ccefc87fbba73efc45c902f91c2f5e358b8c" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/12.04/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 41c807aa414d673a99188a105c918092e443be6e8366da2222a4de910100bf17" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_i386.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 41c807aa414d673a99188a105c918092e443be6e8366da2222a4de910100bf17" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 ab7460941b63d771e70410b7f2a3ad5c3f03781126ec5ad1f11b1f83f4f9b43f" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.10/chef-12.13.12+20160724015517-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 28486ff379c1d4699910f860749b7aa2d6cff32e2ec885a32ea52687fca1b636" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.11/chef-12.13.12+20160724015517-1.i386.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 28486ff379c1d4699910f860749b7aa2d6cff32e2ec885a32ea52687fca1b636" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/12.04/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/12.04/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 eefa11a16bfac9962a6e923997ea63b2ecb5f70ba272baca569fb87f934be6a0" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/ubuntu/14.04/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/ubuntu/14.04/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 eefa11a16bfac9962a6e923997ea63b2ecb5f70ba272baca569fb87f934be6a0" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.ppc64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 3015f45c0d750a3c284b8c6236d1efd3f5bc8006340c5e7a8a390926d0c85712" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/7/ppc64le"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/7/chef-12.13.12+20160724015517-1.el7.ppc64le.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 dcde908bc57c3ee76feeb5ddd54990b68d8a9ff4cccbadf03dbe89f048c3b5db" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2008r2/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/10/amd64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/10/chef-12.13.12+20160724015517_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 be7a56b4c74bb77aaea253c77dc7634b2133b5e375d26f6765b8647cc2fb9276" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/5/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/5/chef-12.13.12+20160724015517-1.el5.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 628f25c66f3573c09e75ae3a1d5cfe45e57b62cdd918552de21bf90aa9413ddc" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/6/chef-12.13.12+20160724015517-1.el6.x86_64.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f17b63a0a9766aa83ac4f44abaec88f2176c25c49950ba4936e2c3df53c40bff" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/i386"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012r2/chef-client-12.13.12+20160724015517-1-x86.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f5b86069344d034fddf47c1c0e0395d256ad904dcef03452d6a827b746e86620" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/6/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/6/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/7/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/7/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/debian/8/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/debian/8/chef_12.13.12+20160724015517-1_amd64.deb" | out-file "$artifact_info_dir/artifact_info"
              "sha256 ed0fe49b2ac5d40984ae4fc297d61db30397c6745e17bec9444bf34851c61703" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2008r2/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2008r2/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/windows/2012r2/x86_64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/windows/2012r2/chef-client-12.13.12+20160724015517-1-x64.msi" | out-file "$artifact_info_dir/artifact_info"
              "sha256 014c3913f09b42611deed65d856c8e319f8c62464cf9c5ef5e8a4fdb75dcf989" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/aix/6.1/powerpc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/aix/6.1/chef-12.13.12+20160724015517-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5d5ec238856c052851de33c7e6c0ff6bd667706697cdb58ddccad8695d0c9694" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/aix/7.1/powerpc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/aix/7.1/chef-12.13.12+20160724015517-1.powerpc.bff" | out-file "$artifact_info_dir/artifact_info"
              "sha256 5d5ec238856c052851de33c7e6c0ff6bd667706697cdb58ddccad8695d0c9694" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/6/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/6/chef-12.13.12+20160724015517-1.el6.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 b8ae79aca74bc0f084babc33190e70c499c0b4ff20d3511680e6390fb286e766" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/el/5/i686"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/el/5/chef-12.13.12+20160724015517-1.el5.i386.rpm" | out-file "$artifact_info_dir/artifact_info"
              "sha256 f91fbb8c747eb3ff29e70c2c0c4a04e510e98f50445082b735c7006e4cdfbbdc" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/freebsd/9/amd64"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/freebsd/9/chef-12.13.12+20160724015517_1.amd64.sh" | out-file "$artifact_info_dir/artifact_info"
              "sha256 fdf4d823de45cb9379904c1c3c539e74a79eccc67c8e9fa2efad0dafd3a1d011" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.10/sparc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.10/chef-12.13.12+20160724015517-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 8a5d6847f46868162cdd26086d2795affc218fd5304498e26544b0331eb05834" | out-file "$artifact_info_dir/artifact_info" -Append

              $artifact_info_dir = "$($env:temp)/artifact_info/solaris2/5.11/sparc"
              New-Item -ItemType directory -Path $artifact_info_dir -force
              New-Item -ItemType file "$($artifact_info_dir)/artifact_info" -force
              "url http://artifactory.chef.co:8081/omnibus-unstable-local/com/getchef/chef/12.13.12+20160724015517/solaris2/5.11/chef-12.13.12+20160724015517-1.sparc.solaris" | out-file "$artifact_info_dir/artifact_info"
              "sha256 8a5d6847f46868162cdd26086d2795affc218fd5304498e26544b0331eb05834" | out-file "$artifact_info_dir/artifact_info" -Append


            $artifact_info_for_platform = Get-Content "$($env:temp)/artifact_info/$($platform)/$($platform_version)/$($architecture)/artifact_info"

            $package_metadata = ($artifact_info_for_platform).trim() -split '\n' |
              foreach { $hash = @{} } {$key, $value = $_ -split '\s+'; $hash.Add($key, $value)} {$hash}

            Write-Verbose "Project details: "
            foreach ($key in $package_metadata.keys) {
              Write-Verbose "`t$key = $($package_metadata[$key])"
            }
            $package_metadata
          }

          function Install-Project {
            <#
              .SYNOPSIS
              Install a Chef Software, Inc. product
              .DESCRIPTION
              Install a Chef Software, Inc. product
              .EXAMPLE
              iex (new-object net.webclient).downloadstring('https://omnitruck.chef.io/install.ps1'); Install-Project -project chef -channel stable

              Installs the latest stable version of Chef.
              .EXAMPLE
              iex (irm 'https://omnitruck.chef.io/install.ps1'); Install-Project -project chefdk -channel current

              Installs the latest integration build of the Chef Development Kit
            #>
            [cmdletbinding(SupportsShouldProcess=$true)]
            param (
              # Project to install
              [string]
              $project = 'chef',
              # Release channel to install from
              [validateset('current', 'stable', 'unstable')]
              [string]
              $channel = 'stable',
              # Version of the application to install
              # This parameter is optional, if not supplied it will provide the latest version,
              # and if an iteration number is not specified, it will grab the latest available iteration.
              # Partial version numbers are also acceptable (using v=11
              # will grab the latest 11.x client which matches the other flags).
              [string]
              $version,
              # Full path for the downloaded installer.
              [string]
              $filename,
              # Full path to the location to download the installer
              [string]
              $download_directory = $env:temp,
              # The following legacy switches are just aliases for the current channel
              [switch]
              $prerelease,
              [switch]
              $nightlies,
              [validateset('auto', 'i386', 'x86_64')]
              [string]
              $architecture = 'auto'
            )

            $package_metadata = Get-ProjectMetadata -project $project -channel $channel -version $version -prerelease:$prerelease -nightlies:$nightlies -architecture $architecture

            if (-not [string]::IsNullOrEmpty($filename)) {
              $download_directory = split-path $filename
              $filename = split-path $filename -leaf
              if ([string]::IsNullOrEmpty($download_directory)) {
                $download_directory = $pwd
              }
            }
            else {
              $filename = ($package_metadata.url -split '/')[-1]
            }
            Write-Verbose "Download directory: $download_directory"
            Write-Verbose "Filename: $filename"

            if (-not (test-path $download_directory)) {
              mkdir $download_directory
            }
            $download_directory = (resolve-path $download_directory).providerpath
            $download_destination = join-path $download_directory $filename

            if ((test-path $download_destination) -and
              (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256 -ea SilentlyContinue)){
              Write-Verbose "Found existing valid installer at $download_destination."
            }
            else {
              if ($pscmdlet.ShouldProcess("$($package_metadata.url)", "Download $project")) {
                Write-Verbose "Downloading $project from $($package_metadata.url) to $download_destination."
                Get-WebContent $package_metadata.url -filepath $download_destination
              }
            }

            if ($pscmdlet.ShouldProcess("$download_destination", "Installing")){
              if (Test-ProjectPackage -Path $download_destination -Algorithm 'SHA256' -Hash $package_metadata.sha256) {
                Write-Host "Installing $project from $download_destination"
                $installingProject = $True
                $installAttempts = 0
                while ($installingProject) {
                  $p = Start-Process -FilePath "msiexec" -ArgumentList "/qn /i $download_destination" -Passthru -Wait
                  $p.WaitForExit()
                  if ($p.ExitCode -eq 1618) {
                    Write-Host "Another msi install is in progress (exit code 1618), retrying ($($installAttempts))..."
                    continue
                  } elseif ($p.ExitCode -ne 0) {
                    throw "msiexec was not successful. Received exit code $($p.ExitCode)"
                  }
                  $installingProject = $False
                }
              }
              else {
                throw "Failed to validate the downloaded installer for $project."
              }
            }
          }
          set-alias install -value Install-Project
          export-modulemember -function 'Install-Project','Get-ProjectMetadata' -alias 'install'

          }

          install -project chef -version 12.13.12+20160724015517 -channel unstable
           with id: D5B5591C-96D1-4E83-A945-80867416F9B8
          D      [WinRM] creating command_id: D5B5591C-96D1-4E83-A945-80867416F9B8 on shell_id ED645B0F-0808-4848-A782-54A20309AA8D
          D      [WinRM] Waiting for output...
          D      [WinRM] Processing output

                 ModuleType Version    Name                                ExportedCommands
                 ---------- -------    ----                                ----------------
                 Script     0.0        Omnitruck                           {Get-ProjectMetada...
          D      [WinRM] Waiting for output...
          D      [WinRM] cleaning up command_id: D5B5591C-96D1-4E83-A945-80867416F9B8 on shell_id ED645B0F-0808-4848-A782-54A20309AA8D
                 [WinRM] 500 returned in cleanup with error: Bad HTTP response returned from server. Body(if present): (500).
          D      Cleaning up local sandbox in /tmp/cheftest/fips-integration-windows-2012r2-sandbox-20160724-8146-1vrnrv5
          D      ------Exception-------
          D      Class: Kitchen::ActionFailed
          D      Message: 2 actions failed.
          >>>>>>     Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).] on fips-unit-functional-windows-2012r2
          >>>>>>     Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-integration-windows-2012r2
          D      ----------------------
          D      ------Backtrace-------
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:187:in `report_errors'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:178:in `run_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command/action.rb:39:in `block in call'
          D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command/action.rb:37:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/cli.rb:56:in `perform'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/cli.rb:184:in `block (2 levels) in <class:CLI>'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/cli.rb:325:in `invoke_task'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/bin/kitchen:13:in `block in <top (required)>'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/errors.rb:174:in `with_friendly_errors'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/bin/kitchen:13:in `<top (required)>'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:22:in `load'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bin/kitchen:22:in `<top (required)>'
          D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/cli/exec.rb:63:in `load'
          D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/cli/exec.rb:63:in `kernel_load'
          D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/cli/exec.rb:24:in `run'
          D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/cli.rb:304:in `exec'
          D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
          D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
          D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/vendor/thor/lib/thor.rb:359:in `dispatch'
          D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/vendor/thor/lib/thor/base.rb:440:in `start'
          D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/cli.rb:11:in `start'
          D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/exe/bundle:27:in `block in <top (required)>'
          D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler/friendly_errors.rb:98:in `with_friendly_errors'
          D      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/exe/bundle:19:in `<top (required)>'
          D      /opt/chefdk/embedded/bin/bundle:22:in `load'
          D      /opt/chefdk/embedded/bin/bundle:22:in `<main>'
          D      ----End Backtrace-----
          D      -Composite Exception--
          D      Class: Kitchen::ActionFailed
          D      Message: Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).] on fips-unit-functional-windows-2012r2
          D      ----------------------
          D      ------Backtrace-------
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:90:in `raise_transport_error'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:54:in `raise_if_error'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:36:in `parse_to_xml'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/transport.rb:186:in `send_request'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:93:in `send_get_output_message'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:63:in `read_response'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:41:in `read_message'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:60:in `block in read_output'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:75:in `with_output'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:59:in `read_output'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:76:in `block in run'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:122:in `with_command_shell'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:75:in `run'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:218:in `execute_with_exit_code'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:100:in `execute'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/provisioner/base.rb:72:in `block in call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:478:in `reuse_connection'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:72:in `connection'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/provisioner/base.rb:71:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:373:in `block in converge_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:513:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:513:in `synchronize_or_call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:478:in `block in action'
          D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:477:in `action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:369:in `converge_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:348:in `block in transition_to'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:347:in `each'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:347:in `transition_to'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:138:in `converge'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:201:in `public_send'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:201:in `run_action_in_thread'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
          D      ----End Backtrace-----
          D      ---Nested Exception---
          D      Class: Kitchen::ActionFailed
          D      Message: Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).]
          D      ----------------------
          D      ------Backtrace-------
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:90:in `raise_transport_error'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:54:in `raise_if_error'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:36:in `parse_to_xml'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/transport.rb:186:in `send_request'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:93:in `send_get_output_message'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:63:in `read_response'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:41:in `read_message'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:60:in `block in read_output'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:75:in `with_output'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:59:in `read_output'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:76:in `block in run'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:122:in `with_command_shell'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:75:in `run'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:218:in `execute_with_exit_code'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:100:in `execute'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/provisioner/base.rb:72:in `block in call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:478:in `reuse_connection'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:72:in `connection'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/provisioner/base.rb:71:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:373:in `block in converge_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:513:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:513:in `synchronize_or_call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:478:in `block in action'
          D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:477:in `action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:369:in `converge_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:348:in `block in transition_to'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:347:in `each'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:347:in `transition_to'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:138:in `converge'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:201:in `public_send'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:201:in `run_action_in_thread'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
          D      ----End Backtrace-----
          D      -Composite Exception--
          D      Class: Kitchen::ActionFailed
          D      Message: Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-integration-windows-2012r2
          D      ----------------------
          D      ------Backtrace-------
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:69:in `raise_if_wsman_fault'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:52:in `raise_if_error'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:36:in `parse_to_xml'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/transport.rb:186:in `send_request'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:93:in `send_get_output_message'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:63:in `read_response'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:41:in `read_message'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:60:in `block in read_output'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:75:in `with_output'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:59:in `read_output'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:76:in `block in run'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:122:in `with_command_shell'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:75:in `run'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:218:in `execute_with_exit_code'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:100:in `execute'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/provisioner/base.rb:72:in `block in call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:478:in `reuse_connection'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:72:in `connection'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/provisioner/base.rb:71:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:373:in `block in converge_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:513:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:513:in `synchronize_or_call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:478:in `block in action'
          D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:477:in `action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:369:in `converge_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:348:in `block in transition_to'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:347:in `each'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:347:in `transition_to'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:138:in `converge'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:201:in `public_send'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:201:in `run_action_in_thread'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
          D      ----End Backtrace-----
          D      ---Nested Exception---
          D      Class: Kitchen::ActionFailed
          D      Message: Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>]
          D      ----------------------
          D      ------Backtrace-------
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:69:in `raise_if_wsman_fault'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:52:in `raise_if_error'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/response_handler.rb:36:in `parse_to_xml'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/http/transport.rb:186:in `send_request'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:93:in `send_get_output_message'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:63:in `read_response'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:41:in `read_message'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:60:in `block in read_output'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/wsmv/receive_response_reader.rb:75:in `with_output'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/psrp/receive_response_reader.rb:59:in `read_output'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:76:in `block in run'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:122:in `with_command_shell'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/winrm-0f35bbd96302/lib/winrm/shells/base.rb:75:in `run'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:218:in `execute_with_exit_code'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:100:in `execute'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/provisioner/base.rb:72:in `block in call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:478:in `reuse_connection'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/transport/winrm.rb:72:in `connection'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/provisioner/base.rb:71:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:373:in `block in converge_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:513:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:513:in `synchronize_or_call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:478:in `block in action'
          D      /opt/chefdk/embedded/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:477:in `action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:369:in `converge_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:348:in `block in transition_to'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:347:in `each'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:347:in `transition_to'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/instance.rb:138:in `converge'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:201:in `public_send'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:201:in `run_action_in_thread'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/test-kitchen-06d7c0168ed6/lib/kitchen/command.rb:173:in `block (2 levels) in run_action'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `call'
          D      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/logging-2.1.0/lib/logging/diagnostic_context.rb:450:in `block in create_with_logging_context'
          D      ----End Backtrace-----
          STDERR: >>>>>> ------Exception-------
          >>>>>> Class: Kitchen::ActionFailed
          >>>>>> Message: 2 actions failed.
          >>>>>>     Failed to complete #converge action: [Bad HTTP response returned from server. Body(if present): (500).] on fips-unit-functional-windows-2012r2
          >>>>>>     Failed to complete #converge action: [[WSMAN ERROR CODE: 995]: <f:WSManFault Code='995' Machine='10.194.14.36' xmlns:f='http://schemas.microsoft.com/wbem/wsman/1/wsmanfault'><f:Message>The I/O operation has been aborted because of either a thread exit or an application request. </f:Message></f:WSManFault>] on fips-integration-windows-2012r2
          >>>>>> ----------------------
          >>>>>> Please see .kitchen/logs/kitchen.log for more details
          >>>>>> Also try running `kitchen diagnose --all` for configuration
          ---- End output of bundle exec kitchen converge  -c -l debug ----
          Ran bundle exec kitchen converge  -c -l debug returned 20

          Cookbook Trace:
          ---------------
          /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:55:in `block (3 levels) in <class:Kitchen>'

          Resource Declaration:
          ---------------------
          # In /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/acceptance-cookbook/recipes/provision.rb

            1: kitchen "converge"

          Compiled Resource:
          ------------------
          # Declared in /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/cookbooks/acceptance-cookbook/recipes/provision.rb:1:in `from_file'

          kitchen("converge") do
            action [:run]
            retries 0
            retry_delay 2
            default_guard_interpreter :default
            declared_type :kitchen
            cookbook_name "acceptance-cookbook"
            recipe_name "provision"
            chef_product "chef"
            kitchen_dir "/home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/fips"
            command "converge"
            kitchen_options "-c -l debug"
          end

          Platform:
          ---------
          x86_64-linux

      Starting audit phase
    16218: |2

      Running handlers:
      [2016-07-24T02:32:19+00:00] ERROR: Running exception handlers
      Running handlers complete
      [2016-07-24T02:32:19+00:00] ERROR: Exception handlers complete
      Chef Client failed. 0 resources updated in 02 minutes 16 seconds
      [2016-07-24T02:32:19+00:00] ERROR: Failed to post audit report to server. Saving report to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/failed-audit-data.json
      [2016-07-24T02:32:19+00:00] FATAL: Stacktrace dumped to /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/cache/chef-stacktrace.out
      [2016-07-24T02:32:19+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
      [2016-07-24T02:32:19+00:00] ERROR: Found 1 errors, they are stored in the backtrace
      [2016-07-24T02:32:20+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
      STDERR:
      ---- End output of chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/dna.json -o acceptance-cookbook::provision --no-color ----
      Ran chef-client -z -c /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/.chef/config.rb --force-formatter -j /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/chef-acceptance-data/chef/fips/provision/dna.json -o acceptance-cookbook::provision --no-color returned 1
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:289:in `invalid!'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:276:in `error!'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/chef_runner.rb:53:in `block in run!'
      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler.rb:237:in `block in with_clean_env'
      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler.rb:447:in `with_env'
      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.12.5/lib/bundler.rb:237:in `with_clean_env'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/chef_runner.rb:42:in `run!'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:149:in `run_command'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:116:in `block in run_suite'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:114:in `each'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:114:in `run_suite'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:76:in `block (2 levels) in start_worker'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:74:in `loop'
      /home/jenkins/workspace/chef-test/architecture/x86_64/platform/acceptance/project/chef/role/tester/acceptance/vendor/bundle/ruby/2.1.0/bundler/gems/chef-acceptance-e92ddae46d21/lib/chef-acceptance/application.rb:74:in `block in start_worker'
      CHEF-ACCEPTANCE::[2016-07-24 02:32:20 +0000]
      CHEF-ACCEPTANCE::[2016-07-24 02:32:20 +0000] chef-acceptance run failed
    16250: |
      CHEF-ACCEPTANCE::[2016-07-24 02:32:20 +0000] | fips  | Total     | 00:02:21 | Y     |
      CHEF-ACCEPTANCE::[2016-07-24 02:32:20 +0000] | Run   | Total     | 00:02:21 | Y     |
      Build step 'Invoke XShell command' marked build as failure
      Archiving artifacts
      Recording fingerprints
steps:
  total: 4m1s
  before (setup time): 1m40s
  CHEF-ACCEPTANCE:
    FIPS::PROVISION: 2m21s
chef_acceptance_timing:
- fips:
    provision: 2m10s
    Total: 2m21s
  Run:
    Total: 2m21s
