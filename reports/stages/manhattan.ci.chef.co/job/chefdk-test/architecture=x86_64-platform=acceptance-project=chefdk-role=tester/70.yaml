---
result: FAILURE
failure_category: code
failure_cause: chef_acceptance[top-cookbooks::provision]
failed_in:
  chef_acceptance:
  - top-cookbooks::provision
  step: CHEF-ACCEPTANCE
timestamp: 2016-03-31 16:58:10 UTC
url: http://manhattan.ci.chef.co/job/chefdk-test/architecture=x86_64,platform=acceptance,project=chefdk,role=tester/70/
trigger_url: http://manhattan.ci.chef.co/job/chefdk-trigger-ad_hoc/91/
duration: 53m3s
logs:
  consoleText:
    793: |
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:02:23 +0000]                          Finished converging <docker-default-ubuntu-1404> (1m25.57s).
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:02:23 +0000]                   -----> Kitchen is finished. (2m44.32s)
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:02:23 +0000]                   zlib(finalizer): the stream was freed prematurely.
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:02:23 +0000]         - execute bundle exec kitchen converge  -c
    1056: |
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:09:45 +0000]                   -----> Kitchen is finished. (7m17.04s)
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:09:45 +0000]
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:09:45 +0000] zlib(finalizer): the stream was freed prematurely.
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:09:45 +0000]         - execute bundle exec kitchen converge  -c
    2409: |
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:12:41 +0000]                          Finished converging <learn-the-basics-ubuntu-default-ubuntu-1404> (1m35.50s).
                        -----> Kitchen is finished. (2m51.36s)
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:12:41 +0000]                   zlib(finalizer): the stream was freed prematurely.
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:12:41 +0000]         - execute bundle exec kitchen converge  -c
    3728: |
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:50:13 +0000]                   >>>>>> Class: Kitchen::ActionFailed
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:50:13 +0000]
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:50:13 +0000]                   >>>>>> Message: Failed to complete #create action: [Request limit exceeded.]
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:50:13 +0000]
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:50:13 +0000]                   >>>>>> ----------------------
    3796: |2
              STDERR: >>>>>> ------Exception-------
              >>>>>> Class: Kitchen::ActionFailed
              >>>>>> Message: Failed to complete #create action: [Request limit exceeded.]
              >>>>>> ----------------------
              >>>>>> Please see .kitchen/logs/kitchen.log for more details
    3901: |2
            STDERR: >>>>>> ------Exception-------
            >>>>>> Class: Kitchen::ActionFailed
            >>>>>> Message: Failed to complete #create action: [Request limit exceeded.]
            >>>>>> ----------------------
            >>>>>> Please see .kitchen/logs/kitchen.log for more details
    3947: |2


          ================================================================================
          Error executing action `run` on resource 'top_cookbooks[converge]'
          ================================================================================

          Mixlib::ShellOut::ShellCommandFailed
          ------------------------------------
          cookbook_kitchen[converge sql_server] (/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/cookbooks/acceptance-cookbook/libraries/top_cookbooks.rb line 29) had an error: Mixlib::ShellOut::ShellCommandFailed: execute[bundle exec kitchen converge  -c] (/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 36) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '20'
          ---- Begin output of bundle exec kitchen converge  -c ----
          STDOUT: -----> Starting Kitchen (v1.4.3.dev.0)

      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:50:13 +0000] -----> Creating <sql-server-windows-2012r2>...
                 If you are not using an account that qualifies under the AWS
    3993: |2
          STDERR: >>>>>> ------Exception-------
          >>>>>> Class: Kitchen::ActionFailed
          >>>>>> Message: Failed to complete #create action: [Request limit exceeded.]
          >>>>>> ----------------------
          >>>>>> Please see .kitchen/logs/kitchen.log for more details
    4036: |
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:50:14 +0000] Running handlers:
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:50:14 +0000]
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:50:14 +0000] [2016-03-31T17:50:14+00:00] ERROR: Running exception handlers
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:50:14 +0000] Running handlers complete
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:50:14 +0000] [2016-03-31T17:50:14+00:00] ERROR: Exception handlers complete
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:50:14 +0000] Chef Client failed. 20 resources updated in 50 minutes 45 seconds
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:50:14 +0000]
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:50:14 +0000] [2016-03-31T17:50:14+00:00] ERROR: Failed to post audit report to server. Saving report to /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/failed-audit-data.json
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:50:14 +0000] [2016-03-31T17:50:14+00:00] FATAL: Stacktrace dumped to /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/chef-stacktrace.out
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:50:14 +0000] [2016-03-31T17:50:14+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:50:14 +0000] [2016-03-31T17:50:14+00:00] ERROR: Found 1 errors, they are stored in the backtrace
      TOP-COOKBOOKS::PROVISION::[2016-03-31 17:50:16 +0000] [2016-03-31T17:50:16+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
      CHEF-ACCEPTANCE::[2016-03-31 17:50:16 +0000] Encountered an error running the recipe provision: Expected process to exit with [0], but received '1'
      ---- Begin output of chef-client -z -c /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/config.rb --force-formatter -j /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/dna.json -o acceptance-cookbook::provision --no-color ----
    4314: |2
                               Finished converging <docker-default-ubuntu-1404> (1m25.57s).
                        -----> Kitchen is finished. (2m44.32s)
                        zlib(finalizer): the stream was freed prematurely.
              - execute bundle exec kitchen converge  -c
    4565: |2
                               Finished converging <git-default-windows-windows-2012r2> (4m3.48s).
                        -----> Kitchen is finished. (7m17.04s)
                        zlib(finalizer): the stream was freed prematurely.
              - execute bundle exec kitchen converge  -c
    5856: |2
                               Finished converging <learn-the-basics-ubuntu-default-ubuntu-1404> (1m35.50s).
                        -----> Kitchen is finished. (2m51.36s)
                        zlib(finalizer): the stream was freed prematurely.
              - execute bundle exec kitchen converge  -c
    7078: |2
                        >>>>>> ------Exception-------
                        >>>>>> Class: Kitchen::ActionFailed
                        >>>>>> Message: Failed to complete #create action: [Request limit exceeded.]
                        >>>>>> ----------------------
                        >>>>>> Please see .kitchen/logs/kitchen.log for more details
                        >>>>>> Also try running `kitchen diagnose --all` for configuration

              ================================================================================
              Error executing action `run` on resource 'execute[bundle exec kitchen converge  -c]'
              ================================================================================

              Mixlib::ShellOut::ShellCommandFailed
              ------------------------------------
              Expected process to exit with [0], but received '20'
              ---- Begin output of bundle exec kitchen converge  -c ----
              STDOUT: -----> Starting Kitchen (v1.4.3.dev.0)
              -----> Creating <sql-server-windows-2012r2>...
                     If you are not using an account that qualifies under the AWS
              free-tier, you may be charged to run these suites. The charge
              should be minimal, but neither Test Kitchen nor its maintainers
              are responsible for your incurred costs.

                     Instance <i-edd4e32a> requested.
                     Polling AWS for existence, attempt 0...
                     Attempting to tag the instance, 0 retries
                     EC2 instance <i-edd4e32a> created.
                     Waited 0/300s for instance <i-edd4e32a> to become ready.
                     Waited 5/300s for instance <i-edd4e32a> to become ready.
                     Waited 10/300s for instance <i-edd4e32a> to become ready.
                     Waited 15/300s for instance <i-edd4e32a> to become ready.
                     Waited 20/300s for instance <i-edd4e32a> to become ready.
                     Waited 25/300s for instance <i-edd4e32a> to become ready.
                     Waited 30/300s for instance <i-edd4e32a> to become ready.
                     Waited 35/300s for instance <i-edd4e32a> to become ready.
                     Waited 40/300s for instance <i-edd4e32a> to become ready.
                     Waited 45/300s for instance <i-edd4e32a> to become ready.
                     Waited 50/300s for instance <i-edd4e32a> to become ready.
                     Waited 55/300s for instance <i-edd4e32a> to become ready.
                     Waited 60/300s for instance <i-edd4e32a> to become ready.
                     Waited 65/300s for instance <i-edd4e32a> to become ready.
                     Waited 70/300s for instance <i-edd4e32a> to become ready.
                     Waited 75/300s for instance <i-edd4e32a> to become ready.
                     Waited 80/300s for instance <i-edd4e32a> to become ready.
                     Waited 85/300s for instance <i-edd4e32a> to become ready.
                     Waited 90/300s for instance <i-edd4e32a> to become ready.
                     Waited 95/300s for instance <i-edd4e32a> to become ready.
                     Waited 100/300s for instance <i-edd4e32a> to become ready.
                     Waited 105/300s for instance <i-edd4e32a> to become ready.
                     Waited 110/300s for instance <i-edd4e32a> to become ready.
                     Waited 115/300s for instance <i-edd4e32a> to become ready.
              STDERR: >>>>>> ------Exception-------
              >>>>>> Class: Kitchen::ActionFailed
              >>>>>> Message: Failed to complete #create action: [Request limit exceeded.]
              >>>>>> ----------------------
              >>>>>> Please see .kitchen/logs/kitchen.log for more details
              >>>>>> Also try running `kitchen diagnose --all` for configuration
              ---- End output of bundle exec kitchen converge  -c ----
              Ran bundle exec kitchen converge  -c returned 20

              Resource Declaration:
              ---------------------
              # In /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb

               36:       execute "bundle exec kitchen #{command}#{instances ? " #{instances}" : ""}#{kitchen_options ? " #{kitchen_options}" : ""}" do
               37:         cwd kitchen_dir
               38:         env({
               39:           "KITCHEN_DRIVER" => driver,
               40:           "KITCHEN_INSTANCES" => instances,
               41:           "KITCHEN_LOCAL_YAML" => ::File.expand_path("../../.kitchen.#{driver}.yml", __FILE__),
               42:           "KITCHEN_CHEF_PRODUCT" => chef_product,
               43:           "KITCHEN_CHEF_CHANNEL" => chef_channel,
               44:           "KITCHEN_CHEF_VERSION" => chef_version,
               45:           "ARTIFACTORY_USERNAME" => artifactory_username,
               46:           "ARTIFACTORY_PASSWORD" => artifactory_password
               47:         }.merge(new_resource.env))
               48:       end
               49:     end

              Compiled Resource:
              ------------------
              # Declared in /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb:36:in `block in <class:Kitchen>'

              execute("bundle exec kitchen converge  -c") do
                action [:run]
                retries 0
                retry_delay 2
                default_guard_interpreter :execute
                command "bundle exec kitchen converge  -c"
                backup 5
                cwd "/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/test_run/sql_server/"
                environment {"KITCHEN_DRIVER"=>"ec2", "KITCHEN_INSTANCES"=>"", "KITCHEN_LOCAL_YAML"=>"/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/cookbooks/kitchen_acceptance/.kitchen.ec2.yml", "KITCHEN_CHEF_PRODUCT"=>"chefdk", "KITCHEN_CHEF_CHANNEL"=>"unstable", "KITCHEN_CHEF_VERSION"=>"latest", "ARTIFACTORY_USERNAME"=>"chef-web-downloads", "ARTIFACTORY_PASSWORD"=>"fWPxYSB69EiuSpl8*3Dr^kGwf#hxUE6cmjeZRB%H!Cruit7qiKp%toH3nXKStQUg", "BUNDLE_GEMFILE"=>"/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/Gemfile", "KITCHEN_YAML"=>"/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.kitchen.sql_server.yml"}
                returns 0
                declared_type :execute
                cookbook_name "acceptance-cookbook"
              end

              Platform:
              ---------
              x86_64-linux


            ================================================================================
            Error executing action `run` on resource 'cookbook_kitchen[converge sql_server]'
            ================================================================================

            Mixlib::ShellOut::ShellCommandFailed
            ------------------------------------
            execute[bundle exec kitchen converge  -c] (/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 36) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '20'
            ---- Begin output of bundle exec kitchen converge  -c ----
            STDOUT: -----> Starting Kitchen (v1.4.3.dev.0)
            -----> Creating <sql-server-windows-2012r2>...
                   If you are not using an account that qualifies under the AWS
            free-tier, you may be charged to run these suites. The charge
            should be minimal, but neither Test Kitchen nor its maintainers
            are responsible for your incurred costs.

                   Instance <i-edd4e32a> requested.
                   Polling AWS for existence, attempt 0...
                   Attempting to tag the instance, 0 retries
                   EC2 instance <i-edd4e32a> created.
                   Waited 0/300s for instance <i-edd4e32a> to become ready.
                   Waited 5/300s for instance <i-edd4e32a> to become ready.
                   Waited 10/300s for instance <i-edd4e32a> to become ready.
                   Waited 15/300s for instance <i-edd4e32a> to become ready.
                   Waited 20/300s for instance <i-edd4e32a> to become ready.
                   Waited 25/300s for instance <i-edd4e32a> to become ready.
                   Waited 30/300s for instance <i-edd4e32a> to become ready.
                   Waited 35/300s for instance <i-edd4e32a> to become ready.
                   Waited 40/300s for instance <i-edd4e32a> to become ready.
                   Waited 45/300s for instance <i-edd4e32a> to become ready.
                   Waited 50/300s for instance <i-edd4e32a> to become ready.
                   Waited 55/300s for instance <i-edd4e32a> to become ready.
                   Waited 60/300s for instance <i-edd4e32a> to become ready.
                   Waited 65/300s for instance <i-edd4e32a> to become ready.
                   Waited 70/300s for instance <i-edd4e32a> to become ready.
                   Waited 75/300s for instance <i-edd4e32a> to become ready.
                   Waited 80/300s for instance <i-edd4e32a> to become ready.
                   Waited 85/300s for instance <i-edd4e32a> to become ready.
                   Waited 90/300s for instance <i-edd4e32a> to become ready.
                   Waited 95/300s for instance <i-edd4e32a> to become ready.
                   Waited 100/300s for instance <i-edd4e32a> to become ready.
                   Waited 105/300s for instance <i-edd4e32a> to become ready.
                   Waited 110/300s for instance <i-edd4e32a> to become ready.
                   Waited 115/300s for instance <i-edd4e32a> to become ready.
            STDERR: >>>>>> ------Exception-------
            >>>>>> Class: Kitchen::ActionFailed
            >>>>>> Message: Failed to complete #create action: [Request limit exceeded.]
            >>>>>> ----------------------
            >>>>>> Please see .kitchen/logs/kitchen.log for more details
            >>>>>> Also try running `kitchen diagnose --all` for configuration
            ---- End output of bundle exec kitchen converge  -c ----
            Ran bundle exec kitchen converge  -c returned 20

            Resource Declaration:
            ---------------------
            # In /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/cookbooks/acceptance-cookbook/libraries/top_cookbooks.rb

             29:     cookbook_kitchen "#{command} sql_server" do
             30:     end
             31:

            Compiled Resource:
            ------------------
            # Declared in /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/cookbooks/acceptance-cookbook/libraries/top_cookbooks.rb:29:in `block in <class:TopCookbooks>'

            cookbook_kitchen("converge sql_server") do
              action [:run]
              updated true
              updated_by_last_action true
              retries 0
              retry_delay 2
              default_guard_interpreter :default
              declared_type :cookbook_kitchen
              cookbook_name "acceptance-cookbook"
              repository "https://github.com/chef-cookbooks/sql_server.git"
              test_cookbook "sql_server"
              repository_root "/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/test_run/sql_server"
              branch "master"
              command "converge"
              kitchen_options "-c"
              kitchen_dir "/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/test_run/sql_server/"
              chef_channel "unstable"
              chef_version "latest"
              env {"BUNDLE_GEMFILE"=>"/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/Gemfile", "KITCHEN_YAML"=>"/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.kitchen.sql_server.yml"}
            end

            Platform:
            ---------
            x86_64-linux


          ================================================================================
          Error executing action `run` on resource 'top_cookbooks[converge]'
          ================================================================================

          Mixlib::ShellOut::ShellCommandFailed
          ------------------------------------
          cookbook_kitchen[converge sql_server] (/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/cookbooks/acceptance-cookbook/libraries/top_cookbooks.rb line 29) had an error: Mixlib::ShellOut::ShellCommandFailed: execute[bundle exec kitchen converge  -c] (/opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/cookbooks/kitchen_acceptance/libraries/kitchen.rb line 36) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '20'
          ---- Begin output of bundle exec kitchen converge  -c ----
          STDOUT: -----> Starting Kitchen (v1.4.3.dev.0)
          -----> Creating <sql-server-windows-2012r2>...
                 If you are not using an account that qualifies under the AWS
          free-tier, you may be charged to run these suites. The charge
          should be minimal, but neither Test Kitchen nor its maintainers
          are responsible for your incurred costs.

                 Instance <i-edd4e32a> requested.
                 Polling AWS for existence, attempt 0...
                 Attempting to tag the instance, 0 retries
                 EC2 instance <i-edd4e32a> created.
                 Waited 0/300s for instance <i-edd4e32a> to become ready.
                 Waited 5/300s for instance <i-edd4e32a> to become ready.
                 Waited 10/300s for instance <i-edd4e32a> to become ready.
                 Waited 15/300s for instance <i-edd4e32a> to become ready.
                 Waited 20/300s for instance <i-edd4e32a> to become ready.
                 Waited 25/300s for instance <i-edd4e32a> to become ready.
                 Waited 30/300s for instance <i-edd4e32a> to become ready.
                 Waited 35/300s for instance <i-edd4e32a> to become ready.
                 Waited 40/300s for instance <i-edd4e32a> to become ready.
                 Waited 45/300s for instance <i-edd4e32a> to become ready.
                 Waited 50/300s for instance <i-edd4e32a> to become ready.
                 Waited 55/300s for instance <i-edd4e32a> to become ready.
                 Waited 60/300s for instance <i-edd4e32a> to become ready.
                 Waited 65/300s for instance <i-edd4e32a> to become ready.
                 Waited 70/300s for instance <i-edd4e32a> to become ready.
                 Waited 75/300s for instance <i-edd4e32a> to become ready.
                 Waited 80/300s for instance <i-edd4e32a> to become ready.
                 Waited 85/300s for instance <i-edd4e32a> to become ready.
                 Waited 90/300s for instance <i-edd4e32a> to become ready.
                 Waited 95/300s for instance <i-edd4e32a> to become ready.
                 Waited 100/300s for instance <i-edd4e32a> to become ready.
                 Waited 105/300s for instance <i-edd4e32a> to become ready.
                 Waited 110/300s for instance <i-edd4e32a> to become ready.
                 Waited 115/300s for instance <i-edd4e32a> to become ready.
          STDERR: >>>>>> ------Exception-------
          >>>>>> Class: Kitchen::ActionFailed
          >>>>>> Message: Failed to complete #create action: [Request limit exceeded.]
          >>>>>> ----------------------
          >>>>>> Please see .kitchen/logs/kitchen.log for more details
          >>>>>> Also try running `kitchen diagnose --all` for configuration
          ---- End output of bundle exec kitchen converge  -c ----
          Ran bundle exec kitchen converge  -c returned 20

          Resource Declaration:
          ---------------------
          # In /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/cookbooks/acceptance-cookbook/recipes/provision.rb

            1: top_cookbooks "converge"

          Compiled Resource:
          ------------------
          # Declared in /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/cookbooks/acceptance-cookbook/recipes/provision.rb:1:in `from_file'

          top_cookbooks("converge") do
            action [:run]
            updated true
            updated_by_last_action true
            retries 0
            retry_delay 2
            default_guard_interpreter :default
            declared_type :top_cookbooks
            cookbook_name "acceptance-cookbook"
            recipe_name "provision"
            command "converge"
          end

          Platform:
          ---------
          x86_64-linux

      Starting audit phase
    7353: |2

      Running handlers:
      [2016-03-31T17:50:14+00:00] ERROR: Running exception handlers
      Running handlers complete
      [2016-03-31T17:50:14+00:00] ERROR: Exception handlers complete
      Chef Client failed. 20 resources updated in 50 minutes 45 seconds
      [2016-03-31T17:50:14+00:00] ERROR: Failed to post audit report to server. Saving report to /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/failed-audit-data.json
      [2016-03-31T17:50:14+00:00] FATAL: Stacktrace dumped to /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/local-mode-cache/cache/chef-stacktrace.out
      [2016-03-31T17:50:14+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
      [2016-03-31T17:50:14+00:00] ERROR: Found 1 errors, they are stored in the backtrace
      [2016-03-31T17:50:16+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
      STDERR:
      ---- End output of chef-client -z -c /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/config.rb --force-formatter -j /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/dna.json -o acceptance-cookbook::provision --no-color ----
      Ran chef-client -z -c /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/.chef/config.rb --force-formatter -j /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.7/acceptance/top-cookbooks/.acceptance/acceptance-cookbook/tmp/dna.json -o acceptance-cookbook::provision --no-color returned 1
      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:289:in `invalid!'
      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/mixlib-shellout-2.2.6/lib/mixlib/shellout.rb:276:in `error!'
      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/bundler/gems/chef-acceptance-455676a8bd31/lib/chef-acceptance/chef_runner.rb:40:in `block in run!'
      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:219:in `block in with_clean_env'
      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:199:in `with_original_env'
      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/gems/bundler-1.11.2/lib/bundler.rb:205:in `with_clean_env'
      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/bundler/gems/chef-acceptance-455676a8bd31/lib/chef-acceptance/chef_runner.rb:35:in `run!'
      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/bundler/gems/chef-acceptance-455676a8bd31/lib/chef-acceptance/application.rb:144:in `run_command'
      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/bundler/gems/chef-acceptance-455676a8bd31/lib/chef-acceptance/application.rb:111:in `block in run_suite'
      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/bundler/gems/chef-acceptance-455676a8bd31/lib/chef-acceptance/application.rb:109:in `each'
      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/bundler/gems/chef-acceptance-455676a8bd31/lib/chef-acceptance/application.rb:109:in `run_suite'
      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/bundler/gems/chef-acceptance-455676a8bd31/lib/chef-acceptance/application.rb:75:in `block (2 levels) in start_worker'
      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/bundler/gems/chef-acceptance-455676a8bd31/lib/chef-acceptance/application.rb:73:in `loop'
      /opt/chefdk/embedded/lib/ruby/gems/2.1.0/bundler/gems/chef-acceptance-455676a8bd31/lib/chef-acceptance/application.rb:73:in `block in start_worker'
      CHEF-ACCEPTANCE::[2016-03-31 17:50:16 +0000] --force-destroy specified so attempting to run the destroy recipe
      TOP-COOKBOOKS::DESTROY::[2016-03-31 17:50:16 +0000] Initialized [.acceptance_logs/top-cookbooks/destroy.log] logger...
    7570: |
      CHEF-ACCEPTANCE::[2016-03-31 17:51:14 +0000] | top-cookbooks | Total         | 00:51:47 | Y     |
      CHEF-ACCEPTANCE::[2016-03-31 17:51:14 +0000] | Run           | Total         | 00:51:47 | Y     |
      Build step 'Invoke XShell command' marked build as failure
      Archiving artifacts
      Recording fingerprints
steps:
  total: 53m3s
  before (setup time): 1m16s
  CHEF-ACCEPTANCE:
    total: 51m47s
    TOP-COOKBOOKS::PROVISION: 50m49s
    TOP-COOKBOOKS::DESTROY: 58s
chef_acceptance_timing:
- top-cookbooks:
    provision: 47m57s
    force-destroy: 43s
    Total: 51m47s
  Run:
    Total: 51m47s
