---
result: FAILURE
failure_category: network
failure_cause: network reset
timestamp: 2016-04-05 06:14:45 UTC
url: http://manhattan.ci.chef.co/job/chefdk-build/architecture=i386,platform=windows-2008r2,project=chefdk,role=builder/186/
trigger_url: http://manhattan.ci.chef.co/job/chefdk-trigger-ad_hoc/107/
duration: 3h3m27s
logs:
  consoleText:
    276: |2
                               [Software] I | Loading software `chef-dk-complete' from `C:/jenkins/workspace/chefdk-build/architecture/i386/platform/windows-2008r2/project/chefdk/role/builder/omnibus/config/software/chef-dk-complete.rb' using overrides from chefdk.
                               [Software] I | Loading software `chef-dk' from `C:/jenkins/workspace/chefdk-build/architecture/i386/platform/windows-2008r2/project/chefdk/role/builder/omnibus/config/software/chef-dk.rb' using overrides from chefdk.
                      [Software: chef-dk] W | Version local_source for software chef-dk was not parseable. Comparison methods such as #satisfies? will not be available for this version.
                      [Software: chef-dk] W | Version local_source for software chef-dk was not parseable. Comparison methods such as #satisfies? will not be available for this version.
                               [Software] I | Loading software `libxml2' from `C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-software-0e03409b6e11/config/software/libxml2.rb' using overrides from chefdk.
                               [Software] I | Loading software `zlib' from `C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-software-0e03409b6e11/config/software/zlib.rb' using overrides from chefdk.
    7690: |2
                               [Software] I | Loading software `ruby-windows-devkit' from `C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-software-0e03409b6e11/config/software/ruby-windows-devkit.rb' using overrides from chefdk.
          [Software: ruby-windows-devkit] I | Resolving manifest entry for ruby-windows-devkit
          [Software: ruby-windows-devkit] W | DEPRECATED: project_file (DSL). This is a property of the NetFetcher and will not be publically exposed in the next major release. In general, you should not be using this method in your software definitions as it is an internal implementation detail of the NetFetcher. If you disagree with this statement, you should open an issue on the Omnibus repository on GitHub an explain your use case. For now, I will return the path to the downloaded file on disk, but please rethink the problem you are trying to solve :).
                               [Software] I | Loading software `chef-dk-remove-docs' from `C:/jenkins/workspace/chefdk-build/architecture/i386/platform/windows-2008r2/project/chefdk/role/builder/omnibus/config/software/chef-dk-remove-docs.rb' using overrides from chefdk.
                               [Software] I | Loading software `rubygems-customization' from `C:/jenkins/workspace/chefdk-build/architecture/i386/platform/windows-2008r2/project/chefdk/role/builder/omnibus/config/software/rubygems-customization.rb' using overrides from chefdk.
    7798: |
      [Software: chef-dk-powershell-scripts] I | Resolving manifest entry for chef-dk-powershell-scripts
      [PathFetcher: chef-dk-gem-ruby-shadow] I | Digesting C:/omnibus-ruby/src/chef-dk-gem-ruby-shadow with sha256
                      [Software: chef-dk] W | Version local_source for software chef-dk was not parseable. Comparison methods such as #satisfies? will not be available for this version.
          [PathFetcher: chef-dk-gem-json] I | Digesting C:/omnibus-ruby/src/chef-dk-gem-json with sha256
         [PathFetcher: chef-dk-gem-nio4r] I | Digesting C:/omnibus-ruby/src/chef-dk-gem-nio4r with sha256
    7805: |
      [NullFetcher: chef-dk-powershell-scripts] I | Fetching `chef-dk-powershell-scripts' (nothing to fetch)
          [Software: chef-dk-remove-docs] I | Resolving manifest entry for chef-dk-remove-docs
                      [Software: chef-dk] W | Version local_source for software chef-dk was not parseable. Comparison methods such as #satisfies? will not be available for this version.
      [PathFetcher: chef-dk-gem-yajl-ruby] I | Digesting C:/omnibus-ruby/src/chef-dk-gem-yajl-ruby with sha256
       [Software: rubygems-customization] I | Resolving manifest entry for rubygems-customization
    25956: |2
                                          D | configuring -test-/dln/empty
                                          D | configuring -test-/exception
                                          D | configuring -test-/fatal
                                          D | configuring -test-/file
                                          D | configuring -test-/funcall
    26100: |2
                                          D | installing default exception libraries
                                          D | make[2]: Leaving directory `/c/omnibus-ruby/src/ruby/ruby-2.1.8/ext/-test-/exception'
                                          D | make[2]: Entering directory `/c/omnibus-ruby/src/ruby/ruby-2.1.8/ext/-test-/fatal'
                                          D | generating rb_fatal-i386-mingw32.def
                                          D | compiling rb_fatal.c
                                          D | linking shared-object -test-/fatal/rb_fatal.so
                                          D | installing default rb_fatal libraries
                                          D | make[2]: Leaving directory `/c/omnibus-ruby/src/ruby/ruby-2.1.8/ext/-test-/fatal'
                                          D | make[2]: Entering directory `/c/omnibus-ruby/src/ruby/ruby-2.1.8/ext/-test-/file'
                                          D | generating file-i386-mingw32.def
    26695: |2
                                          D | installing default exception libraries
                                          D | make[2]: Leaving directory `/c/omnibus-ruby/src/ruby/ruby-2.1.8/ext/-test-/exception'
                                          D | make[2]: Entering directory `/c/omnibus-ruby/src/ruby/ruby-2.1.8/ext/-test-/fatal'
                                          D | installing default rb_fatal libraries
                                          D | make[2]: Leaving directory `/c/omnibus-ruby/src/ruby/ruby-2.1.8/ext/-test-/fatal'
                                          D | make[2]: Entering directory `/c/omnibus-ruby/src/ruby/ruby-2.1.8/ext/-test-/file'
                                          D | installing default file libraries
    32861: |2
                                          D |   --ruby=C:/opscode/chefdk/embedded/bin/ruby
                                          D | extconf.rb:67:in `<main>': You are missing some of the required functions from either shadow.h on Linux/Solaris, or pwd.h on FreeBSD/MirBSD/NetBSD/OpenBSD/OS X. (RuntimeError)
                                          D | ERROR:  Error installing ruby-shadow:
                                          D |   ERROR: Failed to build gem native extension.
                                          D |
                                          D |     Building has failed. See above output for more information on the failure.
    32900: |2
                                          D | current directory: C:/opscode/chefdk/embedded/lib/ruby/gems/2.1.0/gems/ruby-shadow-2.5.0
                                          D | C:/opscode/chefdk/embedded/bin/ruby.exe -r ./siteconf20160405-1908-1au6h0u.rb extconf.rb
       [Builder: chef-dk-gem-ruby-shadow] W | [1/3] Failed to execute command. Retrying in 10 seconds...
       [Builder: chef-dk-gem-ruby-shadow] I | Environment:
       [Builder: chef-dk-gem-ruby-shadow] I |   ARFLAGS="rv --target=pe-i386"
    32951: |2
                                          D | current directory: C:/opscode/chefdk/embedded/lib/ruby/gems/2.1.0/gems/ruby-shadow-2.5.0
                                          D | C:/opscode/chefdk/embedded/bin/ruby.exe -r ./siteconf20160405-2628-164gvdd.rb extconf.rb
                                          D | ERROR:  Error installing ruby-shadow:
                                          D |   ERROR: Failed to build gem native extension.
                                          D |
                                          D |     Building has failed. See above output for more information on the failure.
    32963: |2
                                          D | Gem files will remain installed in C:/opscode/chefdk/embedded/lib/ruby/gems/2.1.0/gems/ruby-shadow-2.5.0 for inspection.
                                          D | Results logged to C:/opscode/chefdk/embedded/lib/ruby/gems/2.1.0/extensions/x86-mingw32/2.1.0/ruby-shadow-2.5.0/gem_make.out
       [Builder: chef-dk-gem-ruby-shadow] W | [2/3] Failed to execute command. Retrying in 20 seconds...
       [Builder: chef-dk-gem-ruby-shadow] I | Environment:
       [Builder: chef-dk-gem-ruby-shadow] I |   ARFLAGS="rv --target=pe-i386"
    32996: |2
                                          D |   --ruby=C:/opscode/chefdk/embedded/bin/ruby
                                          D | extconf.rb:67:in `<main>': You are missing some of the required functions from either shadow.h on Linux/Solaris, or pwd.h on FreeBSD/MirBSD/NetBSD/OpenBSD/OS X. (RuntimeError)
                                          D | ERROR:  Error installing ruby-shadow:
                                          D |   ERROR: Failed to build gem native extension.
                                          D |
                                          D |     Building has failed. See above output for more information on the failure.
    33026: |2
                                          D | current directory: C:/opscode/chefdk/embedded/lib/ruby/gems/2.1.0/gems/ruby-shadow-2.5.0
                                          D | C:/opscode/chefdk/embedded/bin/ruby.exe -r ./siteconf20160405-2740-mnwf2e.rb extconf.rb
       [Builder: chef-dk-gem-ruby-shadow] W | [3/3] Failed to execute command. Retrying in 40 seconds...
       [Builder: chef-dk-gem-ruby-shadow] I | Environment:
       [Builder: chef-dk-gem-ruby-shadow] I |   ARFLAGS="rv --target=pe-i386"
    33059: |2
                                          D |   --ruby=C:/opscode/chefdk/embedded/bin/ruby
                                          D | extconf.rb:67:in `<main>': You are missing some of the required functions from either shadow.h on Linux/Solaris, or pwd.h on FreeBSD/MirBSD/NetBSD/OpenBSD/OS X. (RuntimeError)
                                          D | ERROR:  Error installing ruby-shadow:
                                          D |   ERROR: Failed to build gem native extension.
                                          D |
                                          D |     Building has failed. See above output for more information on the failure.
    33091: |2
       [Builder: chef-dk-gem-ruby-shadow] I | gem `install ruby-shadow -v 2.5.0 --ignore-dependencies --verbose -- ': 99.2398s
       [Builder: chef-dk-gem-ruby-shadow] I | Build chef-dk-gem-ruby-shadow: 99.318s
      The following shell command exited with status 1:

          $ ARFLAGS=rv --target=pe-i386 CFLAGS=-IC:/opscode/chefdk/embedded/include -m32 -O3 -march=i686 CPPFLAGS=-IC:/opscode/chefdk/embedded/include -m32 -O3 -march=i686 CXXFLAGS=-IC:/opscode/chefdk/embedded/include -m32 -O3 -march=i686 LDFLAGS=-LC:/opscode/chefdk/embedded/lib -m32 LD_RUN_PATH=C:/opscode/chefdk/embedded/lib NOKOGIRI_USE_SYSTEM_LIBRARIES=true PKG_CONFIG_PATH=C:/opscode/chefdk/embedded/lib/pkgconfig PROG_TAR=bsdtar Path=C:/opscode/chefdk/bin;C:/opscode/chefdk/embedded/bin;C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bin;C:\msys\bin;C:\msys\mingw\bin;C:\Program Files (x86)\Git\Cmd;C:\Program Files (x86)\Git\libexec\git-core;C:\languages\ruby\2.1.5\bin;C:\wix;C:\Program Files\7-zip;C:\Program Files (x86)\Windows Kits\8.1\bin\x64;C:\Program Files\Java\jre1.8.0_45\bin;C:\ProgramData\Oracle\Java\javapath;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\opscode\chef\bin\ RCFLAGS=--target=pe-i386 C:\opscode\chefdk\embedded\bin\gem install ruby-shadow -v 2.5.0 --ignore-dependencies --verbose --

      Output:

          checking for ruby/io.h... yes
      GET https://api.rubygems.org/specs.4.8.gz
      302 Moved Temporarily
      GET https://rubygems.global.ssl.fastly.net/specs.4.8.gz
      304 Not Modified
      C:/opscode/chefdk/embedded/lib/ruby/gems/2.1.0/gems/ruby-shadow-2.5.0/HISTORY
      C:/opscode/chefdk/embedded/lib/ruby/gems/2.1.0/gems/ruby-shadow-2.5.0/LICENSE
      C:/opscode/chefdk/embedded/lib/ruby/gems/2.1.0/gems/ruby-shadow-2.5.0/MANIFEST
      C:/opscode/chefdk/embedded/lib/ruby/gems/2.1.0/gems/ruby-shadow-2.5.0/README
      C:/opscode/chefdk/embedded/lib/ruby/gems/2.1.0/gems/ruby-shadow-2.5.0/README.euc
      C:/opscode/chefdk/embedded/lib/ruby/gems/2.1.0/gems/ruby-shadow-2.5.0/extconf.rb
      C:/opscode/chefdk/embedded/lib/ruby/gems/2.1.0/gems/ruby-shadow-2.5.0/pwd/depend
      C:/opscode/chefdk/embedded/lib/ruby/gems/2.1.0/gems/ruby-shadow-2.5.0/pwd/shadow.c
      C:/opscode/chefdk/embedded/lib/ruby/gems/2.1.0/gems/ruby-shadow-2.5.0/ruby-shadow.gemspec
      C:/opscode/chefdk/embedded/lib/ruby/gems/2.1.0/gems/ruby-shadow-2.5.0/shadow/depend
      C:/opscode/chefdk/embedded/lib/ruby/gems/2.1.0/gems/ruby-shadow-2.5.0/shadow/shadow.c
      Building native extensions.  This could take a while...
      current directory: C:/opscode/chefdk/embedded/lib/ruby/gems/2.1.0/gems/ruby-shadow-2.5.0
      C:/opscode/chefdk/embedded/bin/ruby.exe -r ./siteconf20160405-1180-1fu84jh.rb extconf.rb

      Error:

          *** extconf.rb failed ***
      Could not create Makefile due to some reason, probably lack of necessary
      libraries and/or headers.  Check the mkmf.log file for more details.  You may
      need configuration options.

      Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=C:/opscode/chefdk/embedded/bin/ruby
      extconf.rb:67:in `<main>': You are missing some of the required functions from either shadow.h on Linux/Solaris, or pwd.h on FreeBSD/MirBSD/NetBSD/OpenBSD/OS X. (RuntimeError)
      ERROR:  Error installing ruby-shadow:
        ERROR: Failed to build gem native extension.

          Building has failed. See above output for more information on the failure.
      To see why this extension failed to compile, please check the mkmf.log which can be found here:

        C:/opscode/chefdk/embedded/lib/ruby/gems/2.1.0/extensions/x86-mingw32/2.1.0/ruby-shadow-2.5.0/mkmf.log

      extconf failed, exit code 1

      Gem files will remain installed in C:/opscode/chefdk/embedded/lib/ruby/gems/2.1.0/gems/ruby-shadow-2.5.0 for inspection.
      Results logged to C:/opscode/chefdk/embedded/lib/ruby/gems/2.1.0/extensions/x86-mingw32/2.1.0/ruby-shadow-2.5.0/gem_make.out

      C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/util.rb:101:in `rescue in shellout!'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/util.rb:97:in `shellout!'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/builder.rb:825:in `shellout!'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/builder.rb:309:in `block in gem'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/builder.rb:1012:in `instance_eval'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/builder.rb:1012:in `run'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/builder.rb:843:in `block (3 levels) in execute'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/builder.rb:865:in `call'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/builder.rb:865:in `with_retries'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/builder.rb:842:in `block (2 levels) in execute'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/instrumentation.rb:23:in `call'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/instrumentation.rb:23:in `measure'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/builder.rb:841:in `block in execute'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/builder.rb:915:in `call'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/builder.rb:915:in `with_clean_env'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/builder.rb:840:in `execute'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/builder.rb:704:in `block (2 levels) in build'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/builder.rb:703:in `each'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/builder.rb:703:in `block in build'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/instrumentation.rb:23:in `call'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/instrumentation.rb:23:in `measure'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/builder.rb:702:in `build'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/software.rb:1142:in `execute_build'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/software.rb:1005:in `build_me'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/project.rb:1077:in `block in build'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/project.rb:1076:in `each'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/project.rb:1076:in `build'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/cli.rb:83:in `build'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/cli/base.rb:33:in `dispatch'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/lib/omnibus/cli.rb:41:in `execute!'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bundler/gems/omnibus-961695bbc1b2/bin/omnibus:16:in `<top (required)>'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bin/omnibus:23:in `load'
        C:/languages/ruby/2.1.5/lib/ruby/gems/2.1.0/bin/omnibus:23:in `<main>'
      Failed with error level 1
      Build step 'Invoke XShell command' marked build as failure
      Archiving artifacts
      Recording fingerprints
