---
result: FAILURE
url: http://wilson.ci.chef.co/job/chef-analytics-trigger-release/6/
failure_category: unknown
failure_cause: 'unknown: all: chef-analytics-test'
timestamp: 2016-04-21 20:14:01 UTC
duration: 1h55m9s
triggered_by: patrick-wright
active_duration: 1h54m55s
parameters:
  GIT_REF: 1.4.0
  EXPIRE_CACHE: false
change:
  git_remote: git@github.com:chef/chef-analytics.git
  git_commit: '029e0a3a2c369209dbe1849d38f43c3b87bee0d4'
  project: opscode-analytics
  version: 1.4.0
stages:
  chef-analytics-test:
    result: FAILURE
    failure_category: unknown
    failure_cause: 'unknown: all'
    url: http://wilson.ci.chef.co/job/chef-analytics-test/210/
    duration: 32m53s
    runs:
      el-5:
        result: FAILURE
        failure_category: unknown
        failure_cause: unknown
        url: http://wilson.ci.chef.co/job/chef-analytics-test/architecture=x86_64,platform=el-5,project=opscode-analytics,role=tester/210/
        duration: 25m4s
        logs:
          consoleText:
            544: |
              [2016-04-21T17:47:05-04:00] INFO: GET /organizations/chef/nodes/ip-10-194-15-66.us-west-2.compute.internal
              [2016-04-21T17:47:05-04:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-15-66.us-west-2.compute.internal>
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:305:in `block in send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:336:in `block in retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `loop'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:299:in `send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:144:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:111:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:604:in `load'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:465:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:267:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:267:in `run_with_graceful_exit_option'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:243:in `block in run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:226:in `run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application/client.rb:419:in `run_application'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:58:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/bin/chef-client:26:in `<top (required)>'
              /opt/opscode/embedded/bin/chef-client:23:in `load'
              /opt/opscode/embedded/bin/chef-client:23:in `<main>'
              [2016-04-21T17:47:05-04:00] INFO:
              --- RESPONSE (404) ---
            3929: |2

                        if attempt == 120
                            raise 'ERROR: Timeout waiting for DRBD mount to return'
                        end
                        print '.'
            4783: |2
                  rescue Exception => e
                    message = <<-EOF
              ERROR:
              The /var/opt/opscode/upgrades/migration-level file is missing or corrupt!  Please read http://docs.getchef.com/install_server_pre.html and correct this file before proceeding
            4852: |
              if File.exists?("/etc/opscode/chef-server.json") &&
                  !(File.exist?("/etc/opscode/private-chef.rb") || File.exist?("/etc/opscode/chef-server.rb"))
                Chef::Log.fatal("Configuration via /etc/opscode/chef-server.json is not supported. Please use /etc/opscode/chef-server.rb")
                exit!(1)
              else
            7247: |2
                      `echo 'SELECT * FROM pg_database;' | su - #{node['private_chef']['postgresql']['username']} -c '/opt/opscode/embedded/bin/psql -p #{node['private_chef']['postgresql']['port']} -U #{node['private_chef']['postgresql']['db_superuser']} postgres -t -A'`
                if $?.exitstatus != 0
                        Chef::Log.fatal("Could not connect to database, retrying in 10 seconds.")
                        sleep 10
                      else
            7256: |2

                    unless connectable
                      Chef::Log.fatal <<-ERR

              Could not connect to the postgresql database.
            7529: |2

                  if !connected
                    Chef::Log.fatal("HAProxy status socket never appeared properly!")
                    Chef::Log.fatal("See /var/log/opscode/haproxy/current for more information")
                    Kernel.exit! 1
                  end
            7580: |2

                  if !stable
                    Chef::Log.fatal("HAProxy still showing multiple active backends")
                    Chef::Log.fatal("Please check /var/log/opscode/haproxy/current locally for problems.")
                    Chef::Log.fatal("Please check your backend cluster's status for problems.")
                    Kernel.exit! 1
                  end
            8720: |2
                      elsif PrivateChef['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            8733: |2
                  def generate_hex_if_bootstrap(chars, ha_guard)
                    if ha_guard
                      Chef::Log.fatal("Attempt to create secrets on non-bootstrap node in an H/A topology, please copy /etc/opscode/* around instead.")
                      exit 44
                    end
            9121: |2
                  def assert_server_config(node_name)
                    unless PrivateChef["servers"].key?(node_name)
                      Chef::Log.fatal <<-EOF
              No server configuration found for "#{node_name}" in /etc/opscode/chef-server.rb.
              Server configuration exists for the following hostnames:
            9148: |2
                        gen_api_fqdn
                      else
                        Chef::Log.fatal("I do not understand topology #{PrivateChef.topology} - try standalone, manual, ha, or tier.")
                        exit 55
                      end
            9456: |2
                    # use of exit! prevents exit handlers from running, ensuring the last thing
                    # the customer sees is the descriptive error we've provided.
                    Chef::Log.fatal("\n\n#{LINE_SEP}\n#{e.message}#{LINE_SEP}")
                    exit! 128
                  end
            19841: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            19912: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            19926: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            20115: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            20306: |2

                if [ ! -d "$OCF_ROOT" ]; then
                  ha_log "ERROR: OCF_ROOT points to non-directory $OCF_ROOT."
                  exit $OCF_ERR_GENERIC
                fi
            20326: |2

                if [ -z "$OCF_RESOURCE_INSTANCE" ]; then
                  ha_log "ERROR: Need to tell us our resource instance name."
                  exit $OCF_ERR_ARGS
                fi
            20363: |2
                        loglevel=notice
                        case "${*}" in
                          *ERROR*)    loglevel=err;;
                          *WARN*)   loglevel=warning;;
                          *INFO*|info)  loglevel=info;;
            20462: |2
                      case "${__OCF_PRIO}" in
                        crit) __OCF_PRIO="CRIT";;
                        err)  __OCF_PRIO="ERROR";;
                        warn) __OCF_PRIO="WARNING";;
                        info) __OCF_PRIO="INFO";;
            30061: |2

                if node['fqdn'].nil?
                  Chef::Log.fatal("This node's fqdn is set to nil, so a read token cannot be issued!" \
                                  "Please change your fqdn settings.")
                end
            38174: |
              [2016-04-21T17:53:38-04:00] INFO: GET /organizations/chef/nodes/ip-10-194-15-66.us-west-2.compute.internal
              [2016-04-21T17:53:38-04:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-15-66.us-west-2.compute.internal>
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:277:in `block in send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:308:in `block in retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:271:in `send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:143:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:110:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:604:in `load'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:466:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:266:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:270:in `block in fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:223:in `block in run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:211:in `run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:445:in `block in interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:424:in `run_application'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:58:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/bin/chef-client:26:in `<top (required)>'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `load'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `<main>'
              [2016-04-21T17:53:38-04:00] INFO:
              --- RESPONSE (404) ---
            44217: |
              default['analytics']['alaska']['log_rotation']['file_maxbytes'] = 104857600
              default['analytics']['alaska']['log_rotation']['num_to_keep'] = 10
              default['analytics']['alaska']['log_level'] = 'WARN' # TRACE, DEBUG, INFO, WARN, ERROR, ALL or OFF
              default['analytics']['alaska']['mode'] = 'foreground'
              default['analytics']['alaska']['pipeline']['name'] = 'chef_analytics_pipeline'
            44432: |2
                <appender name="chef_analytics" class="ch.qos.logback.core.ConsoleAppender">
                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>DENY</onMatch>
                    <onMismatch>ACCEPT</onMismatch>
            44454: |2

                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>ACCEPT</onMatch>
                    <onMismatch>DENY</onMismatch>
            44955: |2
                      elsif Analytics['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            46635: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            46706: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            46720: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            46909: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            48573: |
              action :add do
                unless user_exists?(new_resource.user)
                  Chef::Application.fatal!('rabbitmq_user with action :add requires a non-nil/empty password.') if new_resource.password.nil? || new_resource.password.empty?

                  # To escape single quotes in a shell, you have to close the surrounding single quotes, add
            48602: |2

              action :set_permissions do
                Chef::Application.fatal!("rabbitmq_user action :set_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                perm_list = new_resource.permissions.split
            48617: |2

              action :clear_permissions do
                Chef::Application.fatal!("rabbitmq_user action :clear_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                if user_has_permissions?(new_resource.user, new_resource.vhost)
            48631: |2

              action :set_tags do
                Chef::Application.fatal!("rabbitmq_user action :set_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, new_resource.tag)
            48644: |2

              action :clear_tags do
                Chef::Application.fatal!("rabbitmq_user action :clear_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, '"\[\]"')
            51862: |
              when 'rhel'
                if node['platform_version'].to_i <= 5
                  Chef::Log.fatal('Erlang Solutions pacakge repositories are not available for EL5')
                  raise
                end
            53027: |
              --- RESPONSE (200) ---
              I, [2014-10-14T14:05:34.449954 #11620]  INFO -- Kitchen: -----> Starting Kitchen (v1.2.1)
              E, [2014-10-14T14:05:34.450470 #11620] ERROR -- Kitchen: ------Exception-------
              E, [2014-10-14T14:05:34.450533 #11620] ERROR -- Kitchen: Class: Kitchen::UserError
              E, [2014-10-14T14:05:34.450587 #11620] ERROR -- Kitchen: Message: Kitchen YAML file /Users/joe/code/packagecloud/templates/.kitchen.yml does not exist.
              E, [2014-10-14T14:05:34.450645 #11620] ERROR -- Kitchen: ------Backtrace-------
              E, [2014-10-14T14:05:34.450685 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/loader/yaml.rb:74:in `read'
              E, [2014-10-14T14:05:34.450711 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:78:in `data'
              E, [2014-10-14T14:05:34.450735 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:66:in `suites'
              E, [2014-10-14T14:05:34.450829 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:90:in `filter_instances'
              E, [2014-10-14T14:05:34.450853 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:72:in `build_instances'
              E, [2014-10-14T14:05:34.450875 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:52:in `instances'
              E, [2014-10-14T14:05:34.450897 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:64:in `get_filtered_instances'
              E, [2014-10-14T14:05:34.450919 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:85:in `parse_subcommand'
              E, [2014-10-14T14:05:34.450940 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:37:in `block in call'
              E, [2014-10-14T14:05:34.450962 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
              E, [2014-10-14T14:05:34.450984 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:36:in `call'
              E, [2014-10-14T14:05:34.451006 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:47:in `perform'
              E, [2014-10-14T14:05:34.451028 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:118:in `block (2 levels) in <class:CLI>'
              E, [2014-10-14T14:05:34.451050 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
              E, [2014-10-14T14:05:34.451072 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
              E, [2014-10-14T14:05:34.451094 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:233:in `invoke_task'
              E, [2014-10-14T14:05:34.451116 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
              E, [2014-10-14T14:05:34.451137 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
              E, [2014-10-14T14:05:34.451159 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `block in <top (required)>'
              E, [2014-10-14T14:05:34.451181 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/errors.rb:81:in `with_friendly_errors'
              E, [2014-10-14T14:05:34.451203 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2[2016-04-21T17:53:41-04:00] INFO: Storing updated cookbooks/packagecloud/Gemfile.lock in the cache.
              .1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `<top (required)>'
              E, [2014-10-14T14:05:34.451240 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `load'
              E, [2014-10-14T14:05:34.451266 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `<main>'
              E, [2014-10-14T14:05:34.451333 #11620] ERROR -- Kitchen: ----------------------
              --- END RESPONSE ---
              [2016-04-21T17:53:41-04:00] INFO:
            60933: |2

              def check_for_errors(stderr)
                Chef::Log.fatal(stderr) unless stderr.empty?
              end
            62099: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot end"
                end
            62114: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot enable"
                end
            62237: |2
                if @new_resource.user && use_password?
                  if @new_resource.password.nil?
                    Chef::Log.fatal "#{@new_resource.task_name}: Can't specify a non-system user without a password!"
                  end
                end
            62244: |
              def validate_interactive_setting
                if @new_resource.interactive_enabled && @new_resource.password.nil?
                  Chef::Log.fatal "#{new_resource} did not provide a password when attempting to set interactive/non-interactive."
                end
              end
            62829: |2

                    unless hive
                      Chef::Application.fatal!("Unsupported registry hive '#{hive_name}'")
                    end
            73519: |
              Webhook Smoke
                when a new rule is created
              [2016-04-21T17:58:13-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 3s
              [2016-04-21T17:58:16-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 8s
              [2016-04-21T17:58:24-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 13s
              [2016-04-21T17:58:37-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 32s
              [2016-04-21T17:59:09-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 47s
              [2016-04-21T17:59:56-04:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"
                  it creates a webhook rule
                    has a successful code (FAILED - 1)
                    returns the rule location (FAILED - 2)
              [2016-04-21T17:59:56-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 4s
              [2016-04-21T18:00:00-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 5s
              [2016-04-21T18:00:05-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 10s
              [2016-04-21T18:00:15-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 18s
              [2016-04-21T18:00:33-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 47s
              [2016-04-21T18:01:20-04:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"

              An error occurred in an `after(:context)` hook.
            73570: |
              Randomized with seed 15772

              Build step 'Invoke XShell command' marked build as failure
              Performing Post build task...
              Match found for : : True
        steps:
          total: 25m4s
          before (setup time): 10m44s
          chef-client private-chef::default: 4m30s
          chef-client opscode-analytics::default: 2m34s
          after (cleanup time): 5m12s
      el-6:
        result: FAILURE
        failure_category: unknown
        failure_cause: unknown
        url: http://wilson.ci.chef.co/job/chef-analytics-test/architecture=x86_64,platform=el-6,project=opscode-analytics,role=tester/210/
        duration: 21m8s
        logs:
          consoleText:
            523: |
              [2016-04-21T17:47:26-04:00] INFO: GET /organizations/chef/nodes/ip-10-194-14-98.us-west-2.compute.internal
              [2016-04-21T17:47:26-04:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-14-98.us-west-2.compute.internal>
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:305:in `block in send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:336:in `block in retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `loop'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:299:in `send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:144:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:111:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:604:in `load'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:465:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:267:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:267:in `run_with_graceful_exit_option'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:243:in `block in run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:226:in `run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application/client.rb:419:in `run_application'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:58:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/bin/chef-client:26:in `<top (required)>'
              /opt/opscode/embedded/bin/chef-client:23:in `load'
              /opt/opscode/embedded/bin/chef-client:23:in `<main>'
              [2016-04-21T17:47:26-04:00] INFO:
              --- RESPONSE (404) ---
            4470: |2

                        if attempt == 120
                            raise 'ERROR: Timeout waiting for DRBD mount to return'
                        end
                        print '.'
            4543: |2
                  rescue Exception => e
                    message = <<-EOF
              ERROR:
              The /var/opt/opscode/upgrades/migration-level file is missing or corrupt!  Please read http://docs.getchef.com/install_server_pre.html and correct this file before proceeding
            6462: |
              if File.exists?("/etc/opscode/chef-server.json") &&
                  !(File.exist?("/etc/opscode/private-chef.rb") || File.exist?("/etc/opscode/chef-server.rb"))
                Chef::Log.fatal("Configuration via /etc/opscode/chef-server.json is not supported. Please use /etc/opscode/chef-server.rb")
                exit!(1)
              else
            6634: |2

                  if !connected
                    Chef::Log.fatal("HAProxy status socket never appeared properly!")
                    Chef::Log.fatal("See /var/log/opscode/haproxy/current for more information")
                    Kernel.exit! 1
                  end
            6685: |2

                  if !stable
                    Chef::Log.fatal("HAProxy still showing multiple active backends")
                    Chef::Log.fatal("Please check /var/log/opscode/haproxy/current locally for problems.")
                    Chef::Log.fatal("Please check your backend cluster's status for problems.")
                    Kernel.exit! 1
                  end
            7533: |2
                      `echo 'SELECT * FROM pg_database;' | su - #{node['private_chef']['postgresql']['username']} -c '/opt/opscode/embedded/bin/psql -p #{node['private_chef']['postgresql']['port']} -U #{node['private_chef']['postgresql']['db_superuser']} postgres -t -A'`
                if $?.exitstatus != 0
                        Chef::Log.fatal("Could not connect to database, retrying in 10 seconds.")
                        sleep 10
                      else
            7542: |2

                    unless connectable
                      Chef::Log.fatal <<-ERR

              Could not connect to the postgresql database.
            8256: |2
                      elsif PrivateChef['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            8269: |2
                  def generate_hex_if_bootstrap(chars, ha_guard)
                    if ha_guard
                      Chef::Log.fatal("Attempt to create secrets on non-bootstrap node in an H/A topology, please copy /etc/opscode/* around instead.")
                      exit 44
                    end
            8658: |2
                  def assert_server_config(node_name)
                    unless PrivateChef["servers"].key?(node_name)
                      Chef::Log.fatal <<-EOF
              No server configuration found for "#{node_name}" in /etc/opscode/chef-server.rb.
              Server configuration exists for the following hostnames:
            8685: |2
                        gen_api_fqdn
                      else
                        Chef::Log.fatal("I do not understand topology #{PrivateChef.topology} - try standalone, manual, ha, or tier.")
                        exit 55
                      end
            9557: |2
                    # use of exit! prevents exit handlers from running, ensuring the last thing
                    # the customer sees is the descriptive error we've provided.
                    Chef::Log.fatal("\n\n#{LINE_SEP}\n#{e.message}#{LINE_SEP}")
                    exit! 128
                  end
            18058: |2

                if [ ! -d "$OCF_ROOT" ]; then
                  ha_log "ERROR: OCF_ROOT points to non-directory $OCF_ROOT."
                  exit $OCF_ERR_GENERIC
                fi
            18078: |2

                if [ -z "$OCF_RESOURCE_INSTANCE" ]; then
                  ha_log "ERROR: Need to tell us our resource instance name."
                  exit $OCF_ERR_ARGS
                fi
            18115: |2
                        loglevel=notice
                        case "${*}" in
                          *ERROR*)    loglevel=err;;
                          *WARN*)   loglevel=warning;;
                          *INFO*|info)  loglevel=info;;
            18214: |2
                      case "${__OCF_PRIO}" in
                        crit) __OCF_PRIO="CRIT";;
                        err)  __OCF_PRIO="ERROR";;
                        warn) __OCF_PRIO="WARNING";;
                        info) __OCF_PRIO="INFO";;
            19233: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            19304: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            19318: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            19507: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            30041: |2

                if node['fqdn'].nil?
                  Chef::Log.fatal("This node's fqdn is set to nil, so a read token cannot be issued!" \
                                  "Please change your fqdn settings.")
                end
            31189: |
              [2016-04-21T17:48:27-04:00] INFO: execute[/opt/opscode/bin/private-chef-ctl start postgresql] ran successfully
              [2016-04-21T17:48:27-04:00] INFO: Processing ruby_block[wait for postgresql to start] action run (private-chef::postgresql line 126)
              psql: FATAL:  the database system is shutting down
              [2016-04-21T17:48:27-04:00] FATAL: Could not connect to database, retrying in 10 seconds.
              [2016-04-21T17:48:37-04:00] INFO: ruby_block[wait for postgresql to start] called
              [2016-04-21T17:48:37-04:00] INFO: Processing private_chef_pg_user[opscode-pgsql] action create (private-chef::postgresql line 155)
            38983: |
              [2016-04-21T17:55:06-04:00] INFO: GET /organizations/chef/nodes/ip-10-194-14-98.us-west-2.compute.internal
              [2016-04-21T17:55:06-04:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-14-98.us-west-2.compute.internal>
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:277:in `block in send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:308:in `block in retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:271:in `send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:143:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:110:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:604:in `load'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:466:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:266:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:270:in `block in fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:223:in `block in run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:211:in `run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:445:in `block in interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:424:in `run_application'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:58:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/bin/chef-client:26:in `<top (required)>'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `load'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `<main>'
              [2016-04-21T17:55:06-04:00] INFO:
              --- RESPONSE (404) ---
            45058: |2
                      elsif Analytics['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            45697: |
              default['analytics']['alaska']['log_rotation']['file_maxbytes'] = 104857600
              default['analytics']['alaska']['log_rotation']['num_to_keep'] = 10
              default['analytics']['alaska']['log_level'] = 'WARN' # TRACE, DEBUG, INFO, WARN, ERROR, ALL or OFF
              default['analytics']['alaska']['mode'] = 'foreground'
              default['analytics']['alaska']['pipeline']['name'] = 'chef_analytics_pipeline'
            47144: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            47215: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            47229: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            47418: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            47510: |2
                <appender name="chef_analytics" class="ch.qos.logback.core.ConsoleAppender">
                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>DENY</onMatch>
                    <onMismatch>ACCEPT</onMismatch>
            47532: |2

                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>ACCEPT</onMatch>
                    <onMismatch>DENY</onMismatch>
            49437: |
              action :add do
                unless user_exists?(new_resource.user)
                  Chef::Application.fatal!('rabbitmq_user with action :add requires a non-nil/empty password.') if new_resource.password.nil? || new_resource.password.empty?

                  # To escape single quotes in a shell, you have to close the surrounding single quotes, add
            49466: |2

              action :set_permissions do
                Chef::Application.fatal!("rabbitmq_user action :set_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                perm_list = new_resource.permissions.split
            49481: |2

              action :clear_permissions do
                Chef::Application.fatal!("rabbitmq_user action :clear_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                if user_has_permissions?(new_resource.user, new_resource.vhost)
            49495: |2

              action :set_tags do
                Chef::Application.fatal!("rabbitmq_user action :set_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, new_resource.tag)
            49508: |2

              action :clear_tags do
                Chef::Application.fatal!("rabbitmq_user action :clear_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, '"\[\]"')
            52792: |
              when 'rhel'
                if node['platform_version'].to_i <= 5
                  Chef::Log.fatal('Erlang Solutions pacakge repositories are not available for EL5')
                  raise
                end
            53534: |
              --- RESPONSE (200) ---
              I, [2014-10-14T14:05:34.449954 #11620]  INFO -- Kitchen: -----> Starting Kitchen (v1.2.1)
              E, [2014-10-14T14:05:34.450470 #11620] ERROR -- Kitchen: ------Exception-------
              E, [2014-10-14T14:05:34.450533 #11620] ERROR -- Kitchen: Class: Kitchen::UserError
              E, [2014-10-14T14:05:34.450587 #11620] ERROR -- Kitchen: Message: Kitchen YAML file /Users/joe/code/packagecloud/templates/.kitchen.yml does not exist.
              E, [2014-10-14T14:05:34.450645 #11620] ERROR -- Kitchen: ------Backtrace-------
              E, [2014-10-14T14:05:34.450685 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/loader/yaml.rb:74:in `read'
              E, [2014-10-14T14:05:34.450711 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:78:in `data'
              E, [2014-10-14T14:05:34.450735 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:66:in `suites'
              E, [2014-10-14T14:05:34.450829 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:90:in `filter_instances'
              E, [2014-10-14T14:05:34.450853 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:72:in `build_instances'
              E, [2014-10-14T14:05:34.450875 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:52:in `instances'
              E, [2014-10-14T14:05:34.450897 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:64:in `get_filtered_instances'
              E, [2014-10-14T14:05:34.450919 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:85:in `parse_subcommand'
              E, [2014-10-14T14:05:34.450940 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:37:in `block in call'
              E, [2014-10-14T14:05:34.450962 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
              E, [2014-10-14T14:05:34.450984 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:36:in `call'
              E, [2014-10-14T14:05:34.451006 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:47:in `perform'
              E, [2014-10-14T14:05:34.451028 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:118:in `block (2 levels) in <class:CLI>'
              E, [2014-10-14T14:05:34.451050 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
              E, [2014-10-14T14:05:34.451072 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
              E, [2014-10-14T14:05:34.451094 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:233:in `invoke_task'
              E, [2014-10-14T14:05:34.451116 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
              E, [2014-10-14T14:05:34.451137 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
              E, [2014-10-14T14:05:34.451159 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `block in <top (required)>'
              E, [2014-10-14T14:05:34.451181 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/errors.rb:81:in `with_friendly_errors'
              E, [2014-10-14T14:05:34.451203 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `<top (required)>'
              E, [2014-10-14T14:05:34.451240 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `load'
              E, [2014-10-14T14:05:34.451266 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `<main>'
              E, [2014-10-14T14:05:34.451333 #11620] ERROR -- Kitchen: ----------------------
              --- END RESPONSE ---
              [2016-04-21T17:55:10-04:00] INFO: Storing updated cookbooks/packagecloud/templates/default/yum.erb in the cache.
            61604: |2

              def check_for_errors(stderr)
                Chef::Log.fatal(stderr) unless stderr.empty?
              end
            62015: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot end"
                end
            62030: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot enable"
                end
            62154: |2
                if @new_resource.user && use_password?
                  if @new_resource.password.nil?
                    Chef::Log.fatal "#{@new_resource.task_name}: Can't specify a non-system user without a password!"
                  end
                end
            62161: |
              def validate_interactive_setting
                if @new_resource.interactive_enabled && @new_resource.password.nil?
                  Chef::Log.fatal "#{new_resource} did not provide a password when attempting to set interactive/non-interactive."
                end
              end
            63855: |2

                    unless hive
                      Chef::Application.fatal!("Unsupported registry hive '#{hive_name}'")
                    end
            68517: |
              \33[0mCookbook Trace:\33[0m
              ---------------\33[0m
              /opt/opscode-analytics/embedded/cookbooks/cache/cookbooks/runit/libraries/helpers.rb:181:in `restart_service'
              \33[0m/opt/opscode-analytics/embedded/cookbooks/cache/cookbooks/runit/libraries/provider_runit_service.rb:56:in `block (3 levels) in <class:RunitService>'
              \33[0m/opt/opscode-analytics/embedded/cookbooks/cache/cookbooks/runit/libraries/provider_runit_service.rb:280:in `block in <class:RunitService>'\33[0m

              \33[0mResource Declaration:\33[0m
            68836: |
              \33[0mCookbook Trace:\33[0m
              ---------------\33[0m
              /opt/opscode-analytics/embedded/cookbooks/cache/cookbooks/runit/libraries/helpers.rb:181:in `restart_service'
              \33[0m/opt/opscode-analytics/embedded/cookbooks/cache/cookbooks/runit/libraries/provider_runit_service.rb:56:in `block (3 levels) in <class:RunitService>'
              \33[0m/opt/opscode-analytics/embedded/cookbooks/cache/cookbooks/runit/libraries/provider_runit_service.rb:280:in `block in <class:RunitService>'\33[0m

              \33[0mResource Declaration:\33[0m
            75355: |
              Webhook Smoke
                when a new rule is created
              [2016-04-21T17:59:00-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 3s
              [2016-04-21T17:59:03-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 8s
              [2016-04-21T17:59:11-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 11s
              [2016-04-21T17:59:22-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 21s
              [2016-04-21T17:59:43-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 59s
              [2016-04-21T18:00:42-04:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"
                  it creates a webhook rule
                    has a successful code (FAILED - 1)
                    returns the rule location (FAILED - 2)
              [2016-04-21T18:00:42-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 4s
              [2016-04-21T18:00:46-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 5s
              [2016-04-21T18:00:51-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 16s
              [2016-04-21T18:01:07-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 17s
              [2016-04-21T18:01:24-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 47s
              [2016-04-21T18:02:11-04:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"

              An error occurred in an `after(:context)` hook.
            75406: |
              Randomized with seed 36553

              Build step 'Invoke XShell command' marked build as failure
              Performing Post build task...
              Match found for : : True
        steps:
          total: 21m8s
          before (setup time): 11m4s
          chef-client private-chef::default: 5m36s
          chef-client opscode-analytics::default: 1m54s
          after (cleanup time): 31s
      el-7:
        result: FAILURE
        failure_category: unknown
        failure_cause: unknown
        url: http://wilson.ci.chef.co/job/chef-analytics-test/architecture=x86_64,platform=el-7,project=opscode-analytics,role=tester/210/
        duration: 32m52s
        logs:
          consoleText:
            45328: |
              warning: file /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/int1-i.ri: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/file-i.ri: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/fatal%3f-i.ri: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/error%3f-i.ri: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/domain-i.ri: remove failed: No such file or directory
            55170: |
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/File/.packlist: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/File: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/Fatal/.packlist: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/Fatal: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/Exception/.packlist: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/Exception: remove failed: No such file or directory
            56116: |
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-File-1.44/MYMETA.json: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-File-1.44: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Fatal-0.014/install.json: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Fatal-0.014/MYMETA.json: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Fatal-0.014: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Exception-0.43/install.json: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Exception-0.43/MYMETA.json: remove failed: No such file or directory
            56498: |
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/Test/File.pm: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/Test/File: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/Test/Fatal.pm: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/Test/Exception.pm: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/Test/Dir/Base.pm: remove failed: No such file or directory
            60326: |
              warning: file /opt/opscode-analytics/embedded/lib/perl5/5.18.1/File/Basename.pm: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/5.18.1/File: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/5.18.1/Fatal.pm: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/5.18.1/ExtUtils/xsubpp: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/5.18.1/ExtUtils/typemap: remove failed: No such file or directory
            124194: |
              warning: file /opt/opscode/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/int1-i.ri: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/file-i.ri: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/fatal%3f-i.ri: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/error%3f-i.ri: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/domain-i.ri: remove failed: No such file or directory
            131408: |
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/File/.packlist: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/File: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/Fatal/.packlist: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/Fatal: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/Exception/.packlist: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/Exception: remove failed: No such file or directory
            132354: |
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-File-1.44/MYMETA.json: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-File-1.44: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Fatal-0.014/install.json: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Fatal-0.014/MYMETA.json: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Fatal-0.014: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Exception-0.43/install.json: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Exception-0.43/MYMETA.json: remove failed: No such file or directory
            132736: |
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/Test/File.pm: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/Test/File: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/Test/Fatal.pm: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/Test/Exception.pm: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/Test/Dir/Base.pm: remove failed: No such file or directory
            136562: |
              warning: file /opt/opscode/embedded/lib/perl5/5.18.1/File/Basename.pm: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/5.18.1/File: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/5.18.1/Fatal.pm: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/5.18.1/ExtUtils/xsubpp: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/5.18.1/ExtUtils/typemap: remove failed: No such file or directory
            145993: |
              [2016-04-21T17:45:45-04:00] INFO: GET /organizations/chef/nodes/ip-10-194-9-109.us-west-2.compute.internal
              [2016-04-21T17:45:45-04:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-9-109.us-west-2.compute.internal>
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:305:in `block in send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:336:in `block in retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `loop'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:299:in `send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:144:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:111:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:604:in `load'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:465:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:267:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:267:in `run_with_graceful_exit_option'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:243:in `block in run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:226:in `run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application/client.rb:419:in `run_application'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:58:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/bin/chef-client:26:in `<top (required)>'
              /opt/opscode/embedded/bin/chef-client:23:in `load'
              /opt/opscode/embedded/bin/chef-client:23:in `<main>'
              [2016-04-21T17:45:45-04:00] INFO:
              --- RESPONSE (404) ---
            150415: |
              if File.exists?("/etc/opscode/chef-server.json") &&
                  !(File.exist?("/etc/opscode/private-chef.rb") || File.exist?("/etc/opscode/chef-server.rb"))
                Chef::Log.fatal("Configuration via /etc/opscode/chef-server.json is not supported. Please use /etc/opscode/chef-server.rb")
                exit!(1)
              else
            150574: |2

                        if attempt == 120
                            raise 'ERROR: Timeout waiting for DRBD mount to return'
                        end
                        print '.'
            151016: |2

                  if !connected
                    Chef::Log.fatal("HAProxy status socket never appeared properly!")
                    Chef::Log.fatal("See /var/log/opscode/haproxy/current for more information")
                    Kernel.exit! 1
                  end
            151067: |2

                  if !stable
                    Chef::Log.fatal("HAProxy still showing multiple active backends")
                    Chef::Log.fatal("Please check /var/log/opscode/haproxy/current locally for problems.")
                    Chef::Log.fatal("Please check your backend cluster's status for problems.")
                    Kernel.exit! 1
                  end
            152056: |2
                  rescue Exception => e
                    message = <<-EOF
              ERROR:
              The /var/opt/opscode/upgrades/migration-level file is missing or corrupt!  Please read http://docs.getchef.com/install_server_pre.html and correct this file before proceeding
            152486: |2
                      `echo 'SELECT * FROM pg_database;' | su - #{node['private_chef']['postgresql']['username']} -c '/opt/opscode/embedded/bin/psql -p #{node['private_chef']['postgresql']['port']} -U #{node['private_chef']['postgresql']['db_superuser']} postgres -t -A'`
                if $?.exitstatus != 0
                        Chef::Log.fatal("Could not connect to database, retrying in 10 seconds.")
                        sleep 10
                      else
            152495: |2

                    unless connectable
                      Chef::Log.fatal <<-ERR

              Could not connect to the postgresql database.
            154574: |2
                    # use of exit! prevents exit handlers from running, ensuring the last thing
                    # the customer sees is the descriptive error we've provided.
                    Chef::Log.fatal("\n\n#{LINE_SEP}\n#{e.message}#{LINE_SEP}")
                    exit! 128
                  end
            155184: |2
                      elsif PrivateChef['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            155197: |2
                  def generate_hex_if_bootstrap(chars, ha_guard)
                    if ha_guard
                      Chef::Log.fatal("Attempt to create secrets on non-bootstrap node in an H/A topology, please copy /etc/opscode/* around instead.")
                      exit 44
                    end
            155585: |2
                  def assert_server_config(node_name)
                    unless PrivateChef["servers"].key?(node_name)
                      Chef::Log.fatal <<-EOF
              No server configuration found for "#{node_name}" in /etc/opscode/chef-server.rb.
              Server configuration exists for the following hostnames:
            155612: |2
                        gen_api_fqdn
                      else
                        Chef::Log.fatal("I do not understand topology #{PrivateChef.topology} - try standalone, manual, ha, or tier.")
                        exit 55
                      end
            160981: |2

                if [ ! -d "$OCF_ROOT" ]; then
                  ha_log "ERROR: OCF_ROOT points to non-directory $OCF_ROOT."
                  exit $OCF_ERR_GENERIC
                fi
            161001: |2

                if [ -z "$OCF_RESOURCE_INSTANCE" ]; then
                  ha_log "ERROR: Need to tell us our resource instance name."
                  exit $OCF_ERR_ARGS
                fi
            161038: |2
                        loglevel=notice
                        case "${*}" in
                          *ERROR*)    loglevel=err;;
                          *WARN*)   loglevel=warning;;
                          *INFO*|info)  loglevel=info;;
            161137: |2
                      case "${__OCF_PRIO}" in
                        crit) __OCF_PRIO="CRIT";;
                        err)  __OCF_PRIO="ERROR";;
                        warn) __OCF_PRIO="WARNING";;
                        info) __OCF_PRIO="INFO";;
            165428: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            165499: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            165513: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            165702: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            174755: |2

                if node['fqdn'].nil?
                  Chef::Log.fatal("This node's fqdn is set to nil, so a read token cannot be issued!" \
                                  "Please change your fqdn settings.")
                end
            183781: |
              [2016-04-21T17:58:52-04:00] INFO: GET /organizations/chef/nodes/ip-10-194-9-109.us-west-2.compute.internal
              [2016-04-21T17:58:52-04:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-9-109.us-west-2.compute.internal>
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:277:in `block in send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:308:in `block in retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:271:in `send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:143:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:110:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:604:in `load'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:466:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:266:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:270:in `block in fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:223:in `block in run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:211:in `run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:445:in `block in interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:424:in `run_application'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:58:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/bin/chef-client:26:in `<top (required)>'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `load'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `<main>'
              [2016-04-21T17:58:52-04:00] INFO:
              --- RESPONSE (404) ---
            189940: |2
                      elsif Analytics['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            190440: |
              default['analytics']['alaska']['log_rotation']['file_maxbytes'] = 104857600
              default['analytics']['alaska']['log_rotation']['num_to_keep'] = 10
              default['analytics']['alaska']['log_level'] = 'WARN' # TRACE, DEBUG, INFO, WARN, ERROR, ALL or OFF
              default['analytics']['alaska']['mode'] = 'foreground'
              default['analytics']['alaska']['pipeline']['name'] = 'chef_analytics_pipeline'
            191015: |2
                <appender name="chef_analytics" class="ch.qos.logback.core.ConsoleAppender">
                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>DENY</onMatch>
                    <onMismatch>ACCEPT</onMismatch>
            191037: |2

                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>ACCEPT</onMatch>
                    <onMismatch>DENY</onMismatch>
            191859: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            191930: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            191944: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            192133: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            193974: |
              action :add do
                unless user_exists?(new_resource.user)
                  Chef::Application.fatal!('rabbitmq_user with action :add requires a non-nil/empty password.') if new_resource.password.nil? || new_resource.password.empty?

                  # To escape single quotes in a shell, you have to close the surrounding single quotes, add
            194003: |2

              action :set_permissions do
                Chef::Application.fatal!("rabbitmq_user action :set_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                perm_list = new_resource.permissions.split
            194018: |2

              action :clear_permissions do
                Chef::Application.fatal!("rabbitmq_user action :clear_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                if user_has_permissions?(new_resource.user, new_resource.vhost)
            194032: |2

              action :set_tags do
                Chef::Application.fatal!("rabbitmq_user action :set_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, new_resource.tag)
            194045: |2

              action :clear_tags do
                Chef::Application.fatal!("rabbitmq_user action :clear_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, '"\[\]"')
            197136: |
              when 'rhel'
                if node['platform_version'].to_i <= 5
                  Chef::Log.fatal('Erlang Solutions pacakge repositories are not available for EL5')
                  raise
                end
            197896: |
              --- RESPONSE (200) ---
              I, [2014-10-14T14:05:34.449954 #11620]  INFO -- Kitchen: -----> Starting Kitchen (v1.2.1)
              E, [2014-10-14T14:05:34.450470 #11620] ERROR -- Kitchen: ------Exception-------
              E, [2014-10-14T14:05:34.450533 #11620] ERROR -- Kitchen: Class: Kitchen::UserError
              E, [2014-10-14T14:05:34.450587 #11620] ERROR -- Kitchen: Message: Kitchen YAML file /Users/joe/code/packagecloud/templates/.kitchen.yml does not exist.
              E, [2014-10-14T14:05:34.450645 #11620] ERROR -- Kitchen: ------Backtrace-------
              E, [2014-10-14T14:05:34.450685 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/loader/yaml.rb:74:in `read'
              E, [2014-10-14T14:05:34.450711 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:78:in `data'
              E, [2014-10-14T14:05:34.450735 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:66:in `suites'
              E, [2014-10-14T14:05:34.450829 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:90:in `filter_instances'
              E, [2014-10-14T14:05:34.450853 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:72:in `build_instances'
              E, [2014-10-14T14:05:34.450875 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:52:in `instances'
              E, [2014-10-14T14:05:34.450897 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:64:in `get_filtered_instances'
              E, [2014-10-14T14:05:34.450919 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:85:in `parse_subcommand'
              E, [2014-10-14T14:05:34.450940 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:37:in `block in call'
              E, [2014-10-14T14:05:34.450962 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
              E, [2014-10-14T14:05:34.450984 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:36:in `call'
              E, [2014-10-14T14:05:34.451006 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:47:in `perform'
              E, [2014-10-14T14:05:34.451028 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:118:in `block (2 levels) in <class:CLI>'
              E, [2014-10-14T14:05:34.451050 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
              E, [2014-10-14T14:05:34.451072 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
              E, [2014-10-14T14:05:34.451094 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:233:in `invoke_task'
              E, [2014-10-14T14:05:34.451116 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
              E, [2014-10-14T14:05:34.451137 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
              E, [2014-10-14T14:05:34.451159 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `block in <top (required)>'
              E, [2014-10-14T14:05:34.451181 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/errors.rb:81:in `with_friendly_errors'
              E, [2014-10-14T14:05:34.451203 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `<top (required)>'
              E, [2014-10-14T14:05:34.451240 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `load'
              E, [2014-10-14T14:05:34.451266 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `<main>'
              E, [2014-10-14T14:05:34.451333 #11620] ERROR -- Kitchen: ----------------------
              --- END RESPONSE ---
              [2016-04-21T17:59:00-04:00] INFO: Storing updated cookbooks/packagecloud/templates/.kitchen/logs/kitchen.log in the cache.
            206740: |2

              def check_for_errors(stderr)
                Chef::Log.fatal(stderr) unless stderr.empty?
              end
            207320: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot end"
                end
            207335: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot enable"
                end
            207458: |2
                if @new_resource.user && use_password?
                  if @new_resource.password.nil?
                    Chef::Log.fatal "#{@new_resource.task_name}: Can't specify a non-system user without a password!"
                  end
                end
            207465: |
              def validate_interactive_setting
                if @new_resource.interactive_enabled && @new_resource.password.nil?
                  Chef::Log.fatal "#{new_resource} did not provide a password when attempting to set interactive/non-interactive."
                end
              end
            208550: |2

                    unless hive
                      Chef::Application.fatal!("Unsupported registry hive '#{hive_name}'")
                    end
            219416: |
              Webhook Smoke
                when a new rule is created
              [2016-04-21T18:05:20-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 3s
              [2016-04-21T18:05:23-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 6s
              [2016-04-21T18:05:29-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 16s
              [2016-04-21T18:05:45-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 30s
              [2016-04-21T18:06:15-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 60s
              [2016-04-21T18:07:15-04:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"
                  it creates a webhook rule
                    has a successful code (FAILED - 1)
                    returns the rule location (FAILED - 2)
              [2016-04-21T18:07:15-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 4s
              [2016-04-21T18:07:19-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 6s
              [2016-04-21T18:07:25-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 9s
              [2016-04-21T18:07:34-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 28s
              [2016-04-21T18:08:02-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 64s
              [2016-04-21T18:09:06-04:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"

              An error occurred in an `after(:context)` hook.
            219467: |
              Randomized with seed 40170

              Build step 'Invoke XShell command' marked build as failure
              Performing Post build task...
              Match found for : : True
        steps:
          total: 32m52s
          before (setup time): 9m20s
          chef-client private-chef::default: 11m
          chef-client opscode-analytics::default: 4m15s
          after (cleanup time): 6m9s
      ubuntu-10.04:
        result: FAILURE
        failure_category: unknown
        failure_cause: unknown
        url: http://wilson.ci.chef.co/job/chef-analytics-test/architecture=x86_64,platform=ubuntu-10.04,project=opscode-analytics,role=tester/210/
        duration: 27m28s
        logs:
          consoleText:
            575: |
              [2016-04-21T21:44:40+00:00] INFO: GET /organizations/chef/nodes/ip-10-194-11-20.us-west-2.compute.internal
              [2016-04-21T21:44:40+00:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-11-20.us-west-2.compute.internal>
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:305:in `block in send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:336:in `block in retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `loop'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:299:in `send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:144:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:111:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:604:in `load'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:465:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:267:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:267:in `run_with_graceful_exit_option'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:243:in `block in run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:226:in `run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application/client.rb:419:in `run_application'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:58:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/bin/chef-client:26:in `<top (required)>'
              /opt/opscode/embedded/bin/chef-client:23:in `load'
              /opt/opscode/embedded/bin/chef-client:23:in `<main>'
              [2016-04-21T21:44:40+00:00] INFO:
              --- RESPONSE (404) ---
            4571: |2

                        if attempt == 120
                            raise 'ERROR: Timeout waiting for DRBD mount to return'
                        end
                        print '.'
            5425: |
              if File.exists?("/etc/opscode/chef-server.json") &&
                  !(File.exist?("/etc/opscode/private-chef.rb") || File.exist?("/etc/opscode/chef-server.rb"))
                Chef::Log.fatal("Configuration via /etc/opscode/chef-server.json is not supported. Please use /etc/opscode/chef-server.rb")
                exit!(1)
              else
            6028: |2
                  rescue Exception => e
                    message = <<-EOF
              ERROR:
              The /var/opt/opscode/upgrades/migration-level file is missing or corrupt!  Please read http://docs.getchef.com/install_server_pre.html and correct this file before proceeding
            7198: |2

                  if !connected
                    Chef::Log.fatal("HAProxy status socket never appeared properly!")
                    Chef::Log.fatal("See /var/log/opscode/haproxy/current for more information")
                    Kernel.exit! 1
                  end
            7249: |2

                  if !stable
                    Chef::Log.fatal("HAProxy still showing multiple active backends")
                    Chef::Log.fatal("Please check /var/log/opscode/haproxy/current locally for problems.")
                    Chef::Log.fatal("Please check your backend cluster's status for problems.")
                    Kernel.exit! 1
                  end
            7415: |2
                      `echo 'SELECT * FROM pg_database;' | su - #{node['private_chef']['postgresql']['username']} -c '/opt/opscode/embedded/bin/psql -p #{node['private_chef']['postgresql']['port']} -U #{node['private_chef']['postgresql']['db_superuser']} postgres -t -A'`
                if $?.exitstatus != 0
                        Chef::Log.fatal("Could not connect to database, retrying in 10 seconds.")
                        sleep 10
                      else
            7424: |2

                    unless connectable
                      Chef::Log.fatal <<-ERR

              Could not connect to the postgresql database.
            7702: |2
                      elsif PrivateChef['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            7715: |2
                  def generate_hex_if_bootstrap(chars, ha_guard)
                    if ha_guard
                      Chef::Log.fatal("Attempt to create secrets on non-bootstrap node in an H/A topology, please copy /etc/opscode/* around instead.")
                      exit 44
                    end
            8103: |2
                  def assert_server_config(node_name)
                    unless PrivateChef["servers"].key?(node_name)
                      Chef::Log.fatal <<-EOF
              No server configuration found for "#{node_name}" in /etc/opscode/chef-server.rb.
              Server configuration exists for the following hostnames:
            8130: |2
                        gen_api_fqdn
                      else
                        Chef::Log.fatal("I do not understand topology #{PrivateChef.topology} - try standalone, manual, ha, or tier.")
                        exit 55
                      end
            8426: |2
                    # use of exit! prevents exit handlers from running, ensuring the last thing
                    # the customer sees is the descriptive error we've provided.
                    Chef::Log.fatal("\n\n#{LINE_SEP}\n#{e.message}#{LINE_SEP}")
                    exit! 128
                  end
            16369: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            16440: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            16454: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            16643: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            16803: |2

                if [ ! -d "$OCF_ROOT" ]; then
                  ha_log "ERROR: OCF_ROOT points to non-directory $OCF_ROOT."
                  exit $OCF_ERR_GENERIC
                fi
            16823: |2

                if [ -z "$OCF_RESOURCE_INSTANCE" ]; then
                  ha_log "ERROR: Need to tell us our resource instance name."
                  exit $OCF_ERR_ARGS
                fi
            16860: |2
                        loglevel=notice
                        case "${*}" in
                          *ERROR*)    loglevel=err;;
                          *WARN*)   loglevel=warning;;
                          *INFO*|info)  loglevel=info;;
            16959: |2
                      case "${__OCF_PRIO}" in
                        crit) __OCF_PRIO="CRIT";;
                        err)  __OCF_PRIO="ERROR";;
                        warn) __OCF_PRIO="WARNING";;
                        info) __OCF_PRIO="INFO";;
            28607: |2

                if node['fqdn'].nil?
                  Chef::Log.fatal("This node's fqdn is set to nil, so a read token cannot be issued!" \
                                  "Please change your fqdn settings.")
                end
            37753: |
              [2016-04-21T21:52:10+00:00] INFO: GET /organizations/chef/nodes/ip-10-194-11-20.us-west-2.compute.internal
              [2016-04-21T21:52:10+00:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-11-20.us-west-2.compute.internal>
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:277:in `block in send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:308:in `block in retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:271:in `send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:143:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:110:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:604:in `load'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:466:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:266:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:270:in `block in fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:223:in `block in run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:211:in `run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:445:in `block in interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:424:in `run_application'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:58:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/bin/chef-client:26:in `<top (required)>'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `load'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `<main>'
              [2016-04-21T21:52:10+00:00] INFO:
              --- RESPONSE (404) ---
            44186: |
              default['analytics']['alaska']['log_rotation']['file_maxbytes'] = 104857600
              default['analytics']['alaska']['log_rotation']['num_to_keep'] = 10
              default['analytics']['alaska']['log_level'] = 'WARN' # TRACE, DEBUG, INFO, WARN, ERROR, ALL or OFF
              default['analytics']['alaska']['mode'] = 'foreground'
              default['analytics']['alaska']['pipeline']['name'] = 'chef_analytics_pipeline'
            44440: |2
                      elsif Analytics['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            45160: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            45231: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            45245: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            45434: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            46403: |2
                <appender name="chef_analytics" class="ch.qos.logback.core.ConsoleAppender">
                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>DENY</onMatch>
                    <onMismatch>ACCEPT</onMismatch>
            46425: |2

                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>ACCEPT</onMatch>
                    <onMismatch>DENY</onMismatch>
            47588: |
              action :add do
                unless user_exists?(new_resource.user)
                  Chef::Application.fatal!('rabbitmq_user with action :add requires a non-nil/empty password.') if new_resource.password.nil? || new_resource.password.empty?

                  # To escape single quotes in a shell, you have to close the surrounding single quotes, add
            47617: |2

              action :set_permissions do
                Chef::Application.fatal!("rabbitmq_user action :set_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                perm_list = new_resource.permissions.split
            47632: |2

              action :clear_permissions do
                Chef::Application.fatal!("rabbitmq_user action :clear_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                if user_has_permissions?(new_resource.user, new_resource.vhost)
            47646: |2

              action :set_tags do
                Chef::Application.fatal!("rabbitmq_user action :set_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, new_resource.tag)
            47659: |2

              action :clear_tags do
                Chef::Application.fatal!("rabbitmq_user action :clear_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, '"\[\]"')
            51437: |
              when 'rhel'
                if node['platform_version'].to_i <= 5
                  Chef::Log.fatal('Erlang Solutions pacakge repositories are not available for EL5')
                  raise
                end
            52650: |
              --- RESPONSE (200) ---
              I, [2014-10-14T14:05:34.449954 #11620]  INFO -- Kitchen: -----> Starting Kitchen (v1.2.1)
              E, [2014-10-14T14:05:34.450470 #11620] ERROR -- Kitchen: ------Exception-------
              E, [2014-10-14T14:05:34.450533 #11620] ERROR -- Kitchen: Class: Kitchen::UserError
              E, [2014-10-14T14:05:34.450587 #11620] ERROR -- Kitchen: Message: Kitchen YAML file /Users/joe/code/packagecloud/templates/.kitchen.yml does not exist.
              E, [2014-10-14T14:05:34.450645 #11620] ERROR -- Kitchen: ------Backtrace-------
              E, [2014-10-14T14:05:34.450685 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/loader/yaml.rb:74:in `read'
              E, [2014-10-14T14:05:34.450711 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:78:in `data'
              E, [2014-10-14T14:05:34.450735 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:66:in `suites'
              E, [2014-10-14T14:05:34.450829 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:90:in `filter_instances'
              E, [2014-10-14T14:05:34.450853 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:72:in `build_instances'
              E, [2014-10-14T14:05:34.450875 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:52:in `instances'
              E, [2014-10-14T14:05:34.450897 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:64:in `get_filtered_instances'
              E, [2014-10-14T14:05:34.450919 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:85:in `parse_subcommand'
              E, [2014-10-14T14:05:34.450940 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:37:in `block in call'
              E, [2014-10-14T14:05:34.450962 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
              E, [2014-10-14T14:05:34.450984 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:36:in `call'
              E, [2014-10-14T14:05:34.451006 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:47:in `perform'
              E, [2014-10-14T14:05:34.451028 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:118:in `block (2 levels) in <class:CLI>'
              E, [2014-10-14T14:05:34.451050 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
              E, [2014-10-14T14:05:34.451072 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
              E, [2014-10-14T14:05:34.451094 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:233:in `invoke_task'
              E, [2014-10-14T14:05:34.451116 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
              E, [2014-10-14T14:05:34.451137 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
              E, [2014-10-14T14:05:34.451159 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `block in <top (required)>'
              E, [2014-10-14T14:05:34.451181 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/errors.rb:81:in `with_friendly_errors'
              E, [2014-10-14T14:05:34.451203 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `<top (required)>'
              E, [2014-10-14T14:05:34.451240 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `load'
              E, [2014-10-14T14:05:34.451266 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `<main>'
              E, [2014-10-14T14:05:34.451333 #11620] ERROR -- Kitchen: ----------------------
              --- END RESPONSE ---
              [2016-04-21T21:52:23+00:00] INFO: Storing updated cookbooks/packagecloud/templates/.kitchen/logs/kitchen.log in the cache.
            60490: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot end"
                end
            60505: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot enable"
                end
            60628: |2
                if @new_resource.user && use_password?
                  if @new_resource.password.nil?
                    Chef::Log.fatal "#{@new_resource.task_name}: Can't specify a non-system user without a password!"
                  end
                end
            60635: |
              def validate_interactive_setting
                if @new_resource.interactive_enabled && @new_resource.password.nil?
                  Chef::Log.fatal "#{new_resource} did not provide a password when attempting to set interactive/non-interactive."
                end
              end
            60849: |2

              def check_for_errors(stderr)
                Chef::Log.fatal(stderr) unless stderr.empty?
              end
            65436: |2

                    unless hive
                      Chef::Application.fatal!("Unsupported registry hive '#{hive_name}'")
                    end
            72883: |
              Webhook Smoke
                when a new rule is created
              [2016-04-21T22:00:30+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 4s
              [2016-04-21T22:00:34+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 8s
              [2016-04-21T22:00:42+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 13s
              [2016-04-21T22:00:55+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 25s
              [2016-04-21T22:01:20+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 44s
              [2016-04-21T22:02:04+00:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"
                  it creates a webhook rule
                    has a successful code (FAILED - 1)
                    returns the rule location (FAILED - 2)
              [2016-04-21T22:02:05+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 4s
              [2016-04-21T22:02:09+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 8s
              [2016-04-21T22:02:17+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 11s
              [2016-04-21T22:02:28+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 23s
              [2016-04-21T22:02:51+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 51s
              [2016-04-21T22:03:42+00:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"

              An error occurred in an `after(:context)` hook.
            72934: |
              Randomized with seed 57567

              Build step 'Invoke XShell command' marked build as failure
              Performing Post build task...
              Match found for : : True
        steps:
          total: 27m28s
          before (setup time): 8m16s
          chef-client private-chef::default: 5m16s
          chef-client opscode-analytics::default: 6m3s
          after (cleanup time): 5m41s
      ubuntu-12.04:
        result: FAILURE
        failure_category: unknown
        failure_cause: unknown
        url: http://wilson.ci.chef.co/job/chef-analytics-test/architecture=x86_64,platform=ubuntu-12.04,project=opscode-analytics,role=tester/210/
        duration: 19m29s
        logs:
          consoleText:
            573: |
              [2016-04-21T21:44:10+00:00] INFO: GET /organizations/chef/nodes/ip-10-194-8-128.us-west-2.compute.internal
              [2016-04-21T21:44:10+00:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-8-128.us-west-2.compute.internal>
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:305:in `block in send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:336:in `block in retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `loop'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:299:in `send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:144:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:111:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:604:in `load'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:465:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:267:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:267:in `run_with_graceful_exit_option'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:243:in `block in run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:226:in `run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application/client.rb:419:in `run_application'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:58:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/bin/chef-client:26:in `<top (required)>'
              /opt/opscode/embedded/bin/chef-client:23:in `load'
              /opt/opscode/embedded/bin/chef-client:23:in `<main>'
              [2016-04-21T21:44:10+00:00] INFO:
              --- RESPONSE (404) ---
            4454: |2

                        if attempt == 120
                            raise 'ERROR: Timeout waiting for DRBD mount to return'
                        end
                        print '.'
            5055: |2
                      `echo 'SELECT * FROM pg_database;' | su - #{node['private_chef']['postgresql']['username']} -c '/opt/opscode/embedded/bin/psql -p #{node['private_chef']['postgresql']['port']} -U #{node['private_chef']['postgresql']['db_superuser']} postgres -t -A'`
                if $?.exitstatus != 0
                        Chef::Log.fatal("Could not connect to database, retrying in 10 seconds.")
                        sleep 10
                      else
            5064: |2

                    unless connectable
                      Chef::Log.fatal <<-ERR

              Could not connect to the postgresql database.
            5690: |2
                  rescue Exception => e
                    message = <<-EOF
              ERROR:
              The /var/opt/opscode/upgrades/migration-level file is missing or corrupt!  Please read http://docs.getchef.com/install_server_pre.html and correct this file before proceeding
            6508: |
              if File.exists?("/etc/opscode/chef-server.json") &&
                  !(File.exist?("/etc/opscode/private-chef.rb") || File.exist?("/etc/opscode/chef-server.rb"))
                Chef::Log.fatal("Configuration via /etc/opscode/chef-server.json is not supported. Please use /etc/opscode/chef-server.rb")
                exit!(1)
              else
            7824: |2

                  if !connected
                    Chef::Log.fatal("HAProxy status socket never appeared properly!")
                    Chef::Log.fatal("See /var/log/opscode/haproxy/current for more information")
                    Kernel.exit! 1
                  end
            7875: |2

                  if !stable
                    Chef::Log.fatal("HAProxy still showing multiple active backends")
                    Chef::Log.fatal("Please check /var/log/opscode/haproxy/current locally for problems.")
                    Chef::Log.fatal("Please check your backend cluster's status for problems.")
                    Kernel.exit! 1
                  end
            8704: |2
                      elsif PrivateChef['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            8717: |2
                  def generate_hex_if_bootstrap(chars, ha_guard)
                    if ha_guard
                      Chef::Log.fatal("Attempt to create secrets on non-bootstrap node in an H/A topology, please copy /etc/opscode/* around instead.")
                      exit 44
                    end
            9105: |2
                  def assert_server_config(node_name)
                    unless PrivateChef["servers"].key?(node_name)
                      Chef::Log.fatal <<-EOF
              No server configuration found for "#{node_name}" in /etc/opscode/chef-server.rb.
              Server configuration exists for the following hostnames:
            9132: |2
                        gen_api_fqdn
                      else
                        Chef::Log.fatal("I do not understand topology #{PrivateChef.topology} - try standalone, manual, ha, or tier.")
                        exit 55
                      end
            9750: |2
                    # use of exit! prevents exit handlers from running, ensuring the last thing
                    # the customer sees is the descriptive error we've provided.
                    Chef::Log.fatal("\n\n#{LINE_SEP}\n#{e.message}#{LINE_SEP}")
                    exit! 128
                  end
            18384: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            18457: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            18471: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            18660: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            20331: |2

                if [ ! -d "$OCF_ROOT" ]; then
                  ha_log "ERROR: OCF_ROOT points to non-directory $OCF_ROOT."
                  exit $OCF_ERR_GENERIC
                fi
            20351: |2

                if [ -z "$OCF_RESOURCE_INSTANCE" ]; then
                  ha_log "ERROR: Need to tell us our resource instance name."
                  exit $OCF_ERR_ARGS
                fi
            20388: |2
                        loglevel=notice
                        case "${*}" in
                          *ERROR*)    loglevel=err;;
                          *WARN*)   loglevel=warning;;
                          *INFO*|info)  loglevel=info;;
            20487: |2
                      case "${__OCF_PRIO}" in
                        crit) __OCF_PRIO="CRIT";;
                        err)  __OCF_PRIO="ERROR";;
                        warn) __OCF_PRIO="WARNING";;
                        info) __OCF_PRIO="INFO";;
            30076: |2

                if node['fqdn'].nil?
                  Chef::Log.fatal("This node's fqdn is set to nil, so a read token cannot be issued!" \
                                  "Please change your fqdn settings.")
                end
            38502: |
              [2016-04-21T21:49:20+00:00] INFO: GET /organizations/chef/nodes/ip-10-194-8-128.us-west-2.compute.internal
              [2016-04-21T21:49:20+00:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-8-128.us-west-2.compute.internal>
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:277:in `block in send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:308:in `block in retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:271:in `send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:143:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:110:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:604:in `load'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:466:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:266:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:270:in `block in fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:223:in `block in run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:211:in `run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:445:in `block in interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:424:in `run_application'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:58:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/bin/chef-client:26:in `<top (required)>'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `load'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `<main>'
              [2016-04-21T21:49:20+00:00] INFO:
              --- RESPONSE (404) ---
            44615: |2
                      elsif Analytics['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            45236: |
              default['analytics']['alaska']['log_rotation']['file_maxbytes'] = 104857600
              default['analytics']['alaska']['log_rotation']['num_to_keep'] = 10
              default['analytics']['alaska']['log_level'] = 'WARN' # TRACE, DEBUG, INFO, WARN, ERROR, ALL or OFF
              default['analytics']['alaska']['mode'] = 'foreground'
              default['analytics']['alaska']['pipeline']['name'] = 'chef_analytics_pipeline'
            45466: |2
                <appender name="chef_analytics" class="ch.qos.logback.core.ConsoleAppender">
                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>DENY</onMatch>
                    <onMismatch>ACCEPT</onMismatch>
            45488: |2

                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>ACCEPT</onMatch>
                    <onMismatch>DENY</onMismatch>
            46854: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            46925: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            46939: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            47128: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            49086: |
              action :add do
                unless user_exists?(new_resource.user)
                  Chef::Application.fatal!('rabbitmq_user with action :add requires a non-nil/empty password.') if new_resource.password.nil? || new_resource.password.empty?

                  # To escape single quotes in a shell, you have to close the surrounding single quotes, add
            49115: |2

              action :set_permissions do
                Chef::Application.fatal!("rabbitmq_user action :set_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                perm_list = new_resource.permissions.split
            49130: |2

              action :clear_permissions do
                Chef::Application.fatal!("rabbitmq_user action :clear_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                if user_has_permissions?(new_resource.user, new_resource.vhost)
            49144: |2

              action :set_tags do
                Chef::Application.fatal!("rabbitmq_user action :set_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, new_resource.tag)
            49157: |2

              action :clear_tags do
                Chef::Application.fatal!("rabbitmq_user action :clear_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, '"\[\]"')
            52458: |
              when 'rhel'
                if node['platform_version'].to_i <= 5
                  Chef::Log.fatal('Erlang Solutions pacakge repositories are not available for EL5')
                  raise
                end
            53086: |
              --- RESPONSE (200) ---
              I, [2014-10-14T14:05:34.449954 #11620]  INFO -- Kitchen: -----> Starting Kitchen (v1.2.1)
              E, [2014-10-14T14:05:34.450470 #11620] ERROR -- Kitchen: ------Exception-------
              E, [2014-10-14T14:05:34.450533 #11620] ERROR -- Kitchen: Class: Kitchen::UserError
              E, [2014-10-14T14:05:34.450587 #11620] ERROR -- Kitchen: Message: Kitchen YAML file /Users/joe/code/packagecloud/templates/.kitchen.yml does not exist.
              E, [2014-10-14T14:05:34.450645 #11620] ERROR -- Kitchen: ------Backtrace-------
              E, [2014-10-14T14:05:34.450685 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/loader/yaml.rb:74:in `read'
              E, [2014-10-14T14:05:34.450711 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:78:in `data'
              E, [2014-10-14T14:05:34.450735 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:66:in `suites'
              E, [2014-10-14T14:05:34.450829 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:90:in `filter_instances'
              E, [2014-10-14T14:05:34.450853 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:72:in `build_instances'
              E, [2014-10-14T14:05:34.450875 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:52:in `instances'
              E, [2014-10-14T14:05:34.450897 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:64:in `get_filtered_instances'
              E, [2014-10-14T14:05:34.450919 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:85:in `parse_subcommand'
              E, [2014-10-14T14:05:34.450940 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:37:in `block in call'
              E, [2014-10-14T14:05:34.450962 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
              E, [2014-10-14T14:05:34.450984 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:36:in `call'
              E, [2014-10-14T14:05:34.451006 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:47:in `perform'
              E, [2014-10-14T14:05:34.451028 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:118:in `block (2 levels) in <class:CLI>'
              E, [2014-10-14T14:05:34.451050 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
              E, [2014-10-14T14:05:34.451072 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
              E, [2014-10-14T14:05:34.451094 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:233:in `invoke_task'
              E, [2014-10-14T14:05:34.451116 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
              E, [2014-10-14T14:05:34.451137 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
              E, [2014-10-14T14:05:34.451159 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `block in <top (required)>'
              E, [2014-10-14T14:05:34.451181 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/errors.rb:81:in `with_friendly_errors'
              E, [2014-10-14T14:05:34.451203 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `<top (required)>'
              E, [2014-10-14T14:05:34.451240 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `load'
              E, [2014-10-14T14:05:34.451266 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `<main>'
              E, [2014-10-14T14:05:34.451333 #11620] ERROR -- Kitchen: ----------------------
              --- END RESPONSE ---
              [2016-04-21T21:49:23+00:00] INFO: GET /organizations/chef/file_store/repo/cookbooks/packagecloud/Gemfile
            61494: |2

              def check_for_errors(stderr)
                Chef::Log.fatal(stderr) unless stderr.empty?
              end
            62029: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot end"
                end
            62044: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot enable"
                end
            62167: |2
                if @new_resource.user && use_password?
                  if @new_resource.password.nil?
                    Chef::Log.fatal "#{@new_resource.task_name}: Can't specify a non-system user without a password!"
                  end
                end
            62174: |
              def validate_interactive_setting
                if @new_resource.interactive_enabled && @new_resource.password.nil?
                  Chef::Log.fatal "#{new_resource} did not provide a password when attempting to set interactive/non-interactive."
                end
              end
            64072: |2

                    unless hive
                      Chef::Application.fatal!("Unsupported registry hive '#{hive_name}'")
                    end
            74163: |
              Webhook Smoke
                when a new rule is created
              [2016-04-21T21:52:40+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 3s
              [2016-04-21T21:52:43+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 7s
              [2016-04-21T21:52:50+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 13s
              [2016-04-21T21:53:03+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 25s
              [2016-04-21T21:53:28+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 53s
              [2016-04-21T21:54:21+00:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"
                  it creates a webhook rule
                    has a successful code (FAILED - 1)
                    returns the rule location (FAILED - 2)
              [2016-04-21T21:54:21+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 4s
              [2016-04-21T21:54:25+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 8s
              [2016-04-21T21:54:33+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 9s
              [2016-04-21T21:54:42+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 20s
              [2016-04-21T21:55:02+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 43s
              [2016-04-21T21:55:45+00:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"

              An error occurred in an `after(:context)` hook.
            74214: |
              Randomized with seed 18124

              Build step 'Invoke XShell command' marked build as failure
              Performing Post build task...
              Match found for : : True
        steps:
          total: 19m29s
          before (setup time): 7m51s
          chef-client private-chef::default: 3m5s
          chef-client opscode-analytics::default: 1m17s
          after (cleanup time): 5m12s
      ubuntu-14.04:
        result: FAILURE
        failure_category: unknown
        failure_cause: unknown
        url: http://wilson.ci.chef.co/job/chef-analytics-test/architecture=x86_64,platform=ubuntu-14.04,project=opscode-analytics,role=tester/210/
        duration: 29m23s
        logs:
          consoleText:
            630: |
              [2016-04-21T21:44:58+00:00] INFO: GET /organizations/chef/nodes/ip-10-194-13-159.us-west-2.compute.internal
              [2016-04-21T21:44:58+00:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-13-159.us-west-2.compute.internal>
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:305:in `block in send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:336:in `block in retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `loop'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:299:in `send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:144:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:111:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:604:in `load'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:465:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:267:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:267:in `run_with_graceful_exit_option'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:243:in `block in run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:226:in `run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application/client.rb:419:in `run_application'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:58:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/bin/chef-client:26:in `<top (required)>'
              /opt/opscode/embedded/bin/chef-client:23:in `load'
              /opt/opscode/embedded/bin/chef-client:23:in `<main>'
              [2016-04-21T21:44:58+00:00] INFO:
              --- RESPONSE (404) ---
            4357: |2

                        if attempt == 120
                            raise 'ERROR: Timeout waiting for DRBD mount to return'
                        end
                        print '.'
            4986: |2

                  if !connected
                    Chef::Log.fatal("HAProxy status socket never appeared properly!")
                    Chef::Log.fatal("See /var/log/opscode/haproxy/current for more information")
                    Kernel.exit! 1
                  end
            5037: |2

                  if !stable
                    Chef::Log.fatal("HAProxy still showing multiple active backends")
                    Chef::Log.fatal("Please check /var/log/opscode/haproxy/current locally for problems.")
                    Chef::Log.fatal("Please check your backend cluster's status for problems.")
                    Kernel.exit! 1
                  end
            6298: |
              if File.exists?("/etc/opscode/chef-server.json") &&
                  !(File.exist?("/etc/opscode/private-chef.rb") || File.exist?("/etc/opscode/chef-server.rb"))
                Chef::Log.fatal("Configuration via /etc/opscode/chef-server.json is not supported. Please use /etc/opscode/chef-server.rb")
                exit!(1)
              else
            6841: |2
                      `echo 'SELECT * FROM pg_database;' | su - #{node['private_chef']['postgresql']['username']} -c '/opt/opscode/embedded/bin/psql -p #{node['private_chef']['postgresql']['port']} -U #{node['private_chef']['postgresql']['db_superuser']} postgres -t -A'`
                if $?.exitstatus != 0
                        Chef::Log.fatal("Could not connect to database, retrying in 10 seconds.")
                        sleep 10
                      else
            6850: |2

                    unless connectable
                      Chef::Log.fatal <<-ERR

              Could not connect to the postgresql database.
            7698: |2
                  rescue Exception => e
                    message = <<-EOF
              ERROR:
              The /var/opt/opscode/upgrades/migration-level file is missing or corrupt!  Please read http://docs.getchef.com/install_server_pre.html and correct this file before proceeding
            8395: |2
                    # use of exit! prevents exit handlers from running, ensuring the last thing
                    # the customer sees is the descriptive error we've provided.
                    Chef::Log.fatal("\n\n#{LINE_SEP}\n#{e.message}#{LINE_SEP}")
                    exit! 128
                  end
            8833: |2
                      elsif PrivateChef['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            8846: |2
                  def generate_hex_if_bootstrap(chars, ha_guard)
                    if ha_guard
                      Chef::Log.fatal("Attempt to create secrets on non-bootstrap node in an H/A topology, please copy /etc/opscode/* around instead.")
                      exit 44
                    end
            9234: |2
                  def assert_server_config(node_name)
                    unless PrivateChef["servers"].key?(node_name)
                      Chef::Log.fatal <<-EOF
              No server configuration found for "#{node_name}" in /etc/opscode/chef-server.rb.
              Server configuration exists for the following hostnames:
            9261: |2
                        gen_api_fqdn
                      else
                        Chef::Log.fatal("I do not understand topology #{PrivateChef.topology} - try standalone, manual, ha, or tier.")
                        exit 55
                      end
            13758: |2

                if [ ! -d "$OCF_ROOT" ]; then
                  ha_log "ERROR: OCF_ROOT points to non-directory $OCF_ROOT."
                  exit $OCF_ERR_GENERIC
                fi
            13778: |2

                if [ -z "$OCF_RESOURCE_INSTANCE" ]; then
                  ha_log "ERROR: Need to tell us our resource instance name."
                  exit $OCF_ERR_ARGS
                fi
            13815: |2
                        loglevel=notice
                        case "${*}" in
                          *ERROR*)    loglevel=err;;
                          *WARN*)   loglevel=warning;;
                          *INFO*|info)  loglevel=info;;
            13914: |2
                      case "${__OCF_PRIO}" in
                        crit) __OCF_PRIO="CRIT";;
                        err)  __OCF_PRIO="ERROR";;
                        warn) __OCF_PRIO="WARNING";;
                        info) __OCF_PRIO="INFO";;
            19137: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            19208: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            19222: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            19411: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            29899: |2

                if node['fqdn'].nil?
                  Chef::Log.fatal("This node's fqdn is set to nil, so a read token cannot be issued!" \
                                  "Please change your fqdn settings.")
                end
            38641: |
              [2016-04-21T21:53:29+00:00] INFO: GET /organizations/chef/nodes/ip-10-194-13-159.us-west-2.compute.internal
              [2016-04-21T21:53:29+00:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-13-159.us-west-2.compute.internal>
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:277:in `block in send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:308:in `block in retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:271:in `send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:143:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:110:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:604:in `load'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:466:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:266:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:270:in `block in fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:223:in `block in run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:211:in `run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:445:in `block in interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:424:in `run_application'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:58:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/bin/chef-client:26:in `<top (required)>'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `load'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `<main>'
              [2016-04-21T21:53:29+00:00] INFO:
              --- RESPONSE (404) ---
            44684: |
              default['analytics']['alaska']['log_rotation']['file_maxbytes'] = 104857600
              default['analytics']['alaska']['log_rotation']['num_to_keep'] = 10
              default['analytics']['alaska']['log_level'] = 'WARN' # TRACE, DEBUG, INFO, WARN, ERROR, ALL or OFF
              default['analytics']['alaska']['mode'] = 'foreground'
              default['analytics']['alaska']['pipeline']['name'] = 'chef_analytics_pipeline'
            45315: |2
                      elsif Analytics['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            46997: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            47068: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            47082: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            47271: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            47316: |2
                <appender name="chef_analytics" class="ch.qos.logback.core.ConsoleAppender">
                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>DENY</onMatch>
                    <onMismatch>ACCEPT</onMismatch>
            47338: |2

                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>ACCEPT</onMatch>
                    <onMismatch>DENY</onMismatch>
            48998: |
              action :add do
                unless user_exists?(new_resource.user)
                  Chef::Application.fatal!('rabbitmq_user with action :add requires a non-nil/empty password.') if new_resource.password.nil? || new_resource.password.empty?

                  # To escape single quotes in a shell, you have to close the surrounding single quotes, add
            49027: |2

              action :set_permissions do
                Chef::Application.fatal!("rabbitmq_user action :set_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                perm_list = new_resource.permissions.split
            49042: |2

              action :clear_permissions do
                Chef::Application.fatal!("rabbitmq_user action :clear_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                if user_has_permissions?(new_resource.user, new_resource.vhost)
            49056: |2

              action :set_tags do
                Chef::Application.fatal!("rabbitmq_user action :set_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, new_resource.tag)
            49069: |2

              action :clear_tags do
                Chef::Application.fatal!("rabbitmq_user action :clear_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, '"\[\]"')
            51368: |
              when 'rhel'
                if node['platform_version'].to_i <= 5
                  Chef::Log.fatal('Erlang Solutions pacakge repositories are not available for EL5')
                  raise
                end
            52978: |
              --- RESPONSE (200) ---
              I, [2014-10-14T14:05:34.449954 #11620]  INFO -- Kitchen: -----> Starting Kitchen (v1.2.1)
              E, [2014-10-14T14:05:34.450470 #11620] ERROR -- Kitchen: ------Exception-------
              E, [2014-10-14T14:05:34.450533 #11620] ERROR -- Kitchen: Class: Kitchen::UserError
              E, [2014-10-14T14:05:34.450587 #11620] ERROR -- Kitchen: Message: Kitchen YAML file /Users/joe/code/packagecloud/templates/.kitchen.yml does not exist.
              E, [2014-10-14T14:05:34.450645 #11620] ERROR -- Kitchen: ------Backtrace-------
              E, [2014-10-14T14:05:34.450685 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/loader/yaml.rb:74:in `read'
              E, [2014-10-14T14:05:34.450711 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:78:in `data'
              E, [2014-10-14T14:05:34.450735 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:66:in `suites'
              E, [2014-10-14T14:05:34.450829 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:90:in `filter_instances'
              E, [2014-10-14T14:05:34.450853 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:72:in `build_instances'
              E, [2014-10-14T14:05:34.450875 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:52:in `instances'
              E, [2014-10-14T14:05:34.450897 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:64:in `get_filtered_instances'
              E, [2014-10-14T14:05:34.450919 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:85:in `parse_subcommand'
              E, [2014-10-14T14:05:34.450940 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:37:in `block in call'
              E, [2014-10-14T14:05:34.450962 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
              E, [2014-10-14T14:05:34.450984 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:36:in `call'
              E, [2014-10-14T14:05:34.451006 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:47:in `perform'
              E, [2014-10-14T14:05:34.451028 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:118:in `block (2 levels) in <class:CLI>'
              E, [2014-10-14T14:05:34.451050 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
              E, [2014-10-14T14:05:34.451072 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
              E, [2014-10-14T14:05:34.451094 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:233:in `invoke_task'
              E, [2014-10-14T14:05:34.451116 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
              E, [2014-10-14T14:05:34.451137 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
              E, [2014-10-14T14:05:34.451159 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `block in <top (required)>'
              E, [2014-10-14T14:05:34.451181 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/errors.rb:81:in `with_friendly_errors'
              E, [2014-10-14T14:05:34.451203 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `<top (required)>'
              E, [2014-10-14T14:05:34.451240 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `load'
              E, [2014-10-14T14:05:34.451266 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `<main>'
              E, [2014-10-14T14:05:34.451333 #11620] ERROR -- Kitchen: ----------------------
              --- END RESPONSE ---
              [2016-04-21T21:53:42+00:00] INFO: Storing updated cookbooks/packagecloud/templates/.kitchen/logs/kitchen.log in the cache.
            61258: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot end"
                end
            61273: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot enable"
                end
            61396: |2
                if @new_resource.user && use_password?
                  if @new_resource.password.nil?
                    Chef::Log.fatal "#{@new_resource.task_name}: Can't specify a non-system user without a password!"
                  end
                end
            61403: |
              def validate_interactive_setting
                if @new_resource.interactive_enabled && @new_resource.password.nil?
                  Chef::Log.fatal "#{new_resource} did not provide a password when attempting to set interactive/non-interactive."
                end
              end
            62560: |2

              def check_for_errors(stderr)
                Chef::Log.fatal(stderr) unless stderr.empty?
              end
            63028: |2

                    unless hive
                      Chef::Application.fatal!("Unsupported registry hive '#{hive_name}'")
                    end
            74384: |
              Webhook Smoke
                when a new rule is created
              [2016-04-21T22:02:41+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 4s
              [2016-04-21T22:02:46+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 5s
              [2016-04-21T22:02:51+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 9s
              [2016-04-21T22:03:00+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 22s
              [2016-04-21T22:03:22+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 58s
              [2016-04-21T22:04:20+00:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"
                  it creates a webhook rule
                    has a successful code (FAILED - 1)
                    returns the rule location (FAILED - 2)
              [2016-04-21T22:04:20+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 3s
              [2016-04-21T22:04:23+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 8s
              [2016-04-21T22:04:31+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 10s
              [2016-04-21T22:04:41+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 21s
              [2016-04-21T22:05:02+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 35s
              [2016-04-21T22:05:37+00:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"

              An error occurred in an `after(:context)` hook.
            74435: |
              Randomized with seed 45219

              Build step 'Invoke XShell command' marked build as failure
              Performing Post build task...
              Match found for : : True
        steps:
          total: 29m23s
          before (setup time): 8m32s
          chef-client private-chef::default: 6m17s
          chef-client opscode-analytics::default: 6m49s
          after (cleanup time): 5m36s
  chef-analytics-build:
    result: SUCCESS
    url: http://wilson.ci.chef.co/job/chef-analytics-build/268/
    duration: 1h21m39s
    runs:
      el-5:
        result: SUCCESS
        url: http://wilson.ci.chef.co/job/chef-analytics-build/architecture=x86_64,platform=el-5,project=opscode-analytics,role=builder/268/
        duration: 27m8s
      el-6:
        result: SUCCESS
        url: http://wilson.ci.chef.co/job/chef-analytics-build/architecture=x86_64,platform=el-6,project=opscode-analytics,role=builder/268/
        duration: 1h21m21s
      el-7:
        result: SUCCESS
        url: http://wilson.ci.chef.co/job/chef-analytics-build/architecture=x86_64,platform=el-7,project=opscode-analytics,role=builder/268/
        duration: 26m30s
      ubuntu-10.04:
        result: SUCCESS
        url: http://wilson.ci.chef.co/job/chef-analytics-build/architecture=x86_64,platform=ubuntu-10.04,project=opscode-analytics,role=builder/268/
        duration: 1h6m21s
      ubuntu-12.04:
        result: SUCCESS
        url: http://wilson.ci.chef.co/job/chef-analytics-build/architecture=x86_64,platform=ubuntu-12.04,project=opscode-analytics,role=builder/268/
        duration: 18m11s
  chef-analytics-trigger-release:
    result: SUCCESS
    url: http://wilson.ci.chef.co/job/chef-analytics-trigger-release/6/
    duration: 21s
