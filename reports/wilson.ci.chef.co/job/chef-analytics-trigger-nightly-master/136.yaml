---
result: FAILURE
url: http://wilson.ci.chef.co/job/chef-analytics-trigger-nightly-master/136/
failure_category: unknown
failure_cause: 'unknown: all: chef-analytics-test'
timestamp: 2016-04-22 09:09:00 UTC
duration: 2h24m6s
active_duration: 2h23m49s
parameters: {}
change:
  git_remote: git@github.com:chef/chef-analytics.git
  git_commit: 029e0a3a2c369209dbe1849d38f43c3b87bee0d4
  project: opscode-analytics
  version: 1.4.0+20160422090957
stages:
  chef-analytics-test:
    result: FAILURE
    failure_category: unknown
    failure_cause: 'unknown: all'
    url: http://wilson.ci.chef.co/job/chef-analytics-test/211/
    duration: 40m26s
    runs:
      el-5:
        result: FAILURE
        failure_category: unknown
        failure_cause: unknown
        url: http://wilson.ci.chef.co/job/chef-analytics-test/architecture=x86_64,platform=el-5,project=opscode-analytics,role=tester/211/
        duration: 26m20s
        logs:
          consoleText:
            529: |
              [2016-04-22T07:02:13-04:00] INFO: GET /organizations/chef/nodes/ip-10-194-15-66.us-west-2.compute.internal
              [2016-04-22T07:02:13-04:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-15-66.us-west-2.compute.internal>
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:305:in `block in send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:336:in `block in retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `loop'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:299:in `send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:144:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:111:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:604:in `load'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:465:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:267:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:267:in `run_with_graceful_exit_option'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:243:in `block in run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:226:in `run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application/client.rb:419:in `run_application'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:58:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/bin/chef-client:26:in `<top (required)>'
              /opt/opscode/embedded/bin/chef-client:23:in `load'
              /opt/opscode/embedded/bin/chef-client:23:in `<main>'
              [2016-04-22T07:02:13-04:00] INFO:
              --- RESPONSE (404) ---
            4526: |2

                        if attempt == 120
                            raise 'ERROR: Timeout waiting for DRBD mount to return'
                        end
                        print '.'
            5016: |2
                  rescue Exception => e
                    message = <<-EOF
              ERROR:
              The /var/opt/opscode/upgrades/migration-level file is missing or corrupt!  Please read http://docs.chef.io/install_server_pre.html and correct this file before proceeding
            5089: |
              if File.exists?("/etc/opscode/chef-server.json") &&
                  !(File.exist?("/etc/opscode/private-chef.rb") || File.exist?("/etc/opscode/chef-server.rb"))
                Chef::Log.fatal("Configuration via /etc/opscode/chef-server.json is not supported. Please use /etc/opscode/chef-server.rb")
                exit!(1)
              else
            7303: |2
                      `echo 'SELECT * FROM pg_database;' | su - #{node['private_chef']['postgresql']['username']} -c '/opt/opscode/embedded/bin/psql -p #{node['private_chef']['postgresql']['port']} -U #{node['private_chef']['postgresql']['db_superuser']} postgres -t -A'`
                if $?.exitstatus != 0
                        Chef::Log.fatal("Could not connect to database, retrying in 10 seconds.")
                        sleep 10
                      else
            7312: |2

                    unless connectable
                      Chef::Log.fatal <<-ERR

              Could not connect to the postgresql database.
            7516: |2

                  if !connected
                    Chef::Log.fatal("HAProxy status socket never appeared properly!")
                    Chef::Log.fatal("See /var/log/opscode/haproxy/current for more information")
                    Kernel.exit! 1
                  end
            7567: |2

                  if !stable
                    Chef::Log.fatal("HAProxy still showing multiple active backends")
                    Chef::Log.fatal("Please check /var/log/opscode/haproxy/current locally for problems.")
                    Chef::Log.fatal("Please check your backend cluster's status for problems.")
                    Kernel.exit! 1
                  end
            8300: |2
                      elsif PrivateChef['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            8313: |2
                  def generate_hex_if_bootstrap(chars, ha_guard)
                    if ha_guard
                      Chef::Log.fatal("Attempt to create secrets on non-bootstrap node in an H/A topology, please copy /etc/opscode/* around instead.")
                      exit 44
                    end
            8702: |2
                  def assert_server_config(node_name)
                    unless PrivateChef["servers"].key?(node_name)
                      Chef::Log.fatal <<-EOF
              No server configuration found for "#{node_name}" in /etc/opscode/chef-server.rb.
              Server configuration exists for the following hostnames:
            8729: |2
                        gen_api_fqdn
                      else
                        Chef::Log.fatal("I do not understand topology #{PrivateChef.topology} - try standalone, manual, ha, or tier.")
                        exit 55
                      end
            9206: |2
                    # use of exit! prevents exit handlers from running, ensuring the last thing
                    # the customer sees is the descriptive error we've provided.
                    Chef::Log.fatal("\n\n#{LINE_SEP}\n#{e.message}#{LINE_SEP}")
                    exit! 128
                  end
            19817: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            19888: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            19902: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            20091: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            20311: |2

                if [ ! -d "$OCF_ROOT" ]; then
                  ha_log "ERROR: OCF_ROOT points to non-directory $OCF_ROOT."
                  exit $OCF_ERR_GENERIC
                fi
            20331: |2

                if [ -z "$OCF_RESOURCE_INSTANCE" ]; then
                  ha_log "ERROR: Need to tell us our resource instance name."
                  exit $OCF_ERR_ARGS
                fi
            20368: |2
                        loglevel=notice
                        case "${*}" in
                          *ERROR*)    loglevel=err;;
                          *WARN*)   loglevel=warning;;
                          *INFO*|info)  loglevel=info;;
            20467: |2
                      case "${__OCF_PRIO}" in
                        crit) __OCF_PRIO="CRIT";;
                        err)  __OCF_PRIO="ERROR";;
                        warn) __OCF_PRIO="WARNING";;
                        info) __OCF_PRIO="INFO";;
            30104: |2

                if node['fqdn'].nil?
                  Chef::Log.fatal("This node's fqdn is set to nil, so a read token cannot be issued!" \
                                  "Please change your fqdn settings.")
                end
            38166: |
              [2016-04-22T07:11:06-04:00] INFO: GET /organizations/chef/nodes/ip-10-194-15-66.us-west-2.compute.internal
              [2016-04-22T07:11:06-04:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-15-66.us-west-2.compute.internal>
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:277:in `block in send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:308:in `block in retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:271:in `send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:143:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:110:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:604:in `load'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:466:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:266:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:270:in `block in fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:223:in `block in run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:211:in `run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:445:in `block in interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:424:in `run_application'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:58:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/bin/chef-client:26:in `<top (required)>'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `load'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `<main>'
              [2016-04-22T07:11:06-04:00] INFO:
              --- RESPONSE (404) ---
            44509: |
              default['analytics']['alaska']['log_rotation']['file_maxbytes'] = 104857600
              default['analytics']['alaska']['log_rotation']['num_to_keep'] = 10
              default['analytics']['alaska']['log_level'] = 'WARN' # TRACE, DEBUG, INFO, WARN, ERROR, ALL or OFF
              default['analytics']['alaska']['mode'] = 'foreground'
              default['analytics']['alaska']['pipeline']['name'] = 'chef_analytics_pipeline'
            44825: |2
                      elsif Analytics['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            45092: |2
                <appender name="chef_analytics" class="ch.qos.logback.core.ConsoleAppender">
                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>DENY</onMatch>
                    <onMismatch>ACCEPT</onMismatch>
            45114: |2

                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>ACCEPT</onMatch>
                    <onMismatch>DENY</onMismatch>
            46612: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            46683: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            46697: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            46886: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            48565: |
              action :add do
                unless user_exists?(new_resource.user)
                  Chef::Application.fatal!('rabbitmq_user with action :add requires a non-nil/empty password.') if new_resource.password.nil? || new_resource.password.empty?

                  # To escape single quotes in a shell, you have to close the surrounding single quotes, add
            48594: |2

              action :set_permissions do
                Chef::Application.fatal!("rabbitmq_user action :set_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                perm_list = new_resource.permissions.split
            48609: |2

              action :clear_permissions do
                Chef::Application.fatal!("rabbitmq_user action :clear_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                if user_has_permissions?(new_resource.user, new_resource.vhost)
            48623: |2

              action :set_tags do
                Chef::Application.fatal!("rabbitmq_user action :set_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, new_resource.tag)
            48636: |2

              action :clear_tags do
                Chef::Application.fatal!("rabbitmq_user action :clear_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, '"\[\]"')
            51690: |
              when 'rhel'
                if node['platform_version'].to_i <= 5
                  Chef::Log.fatal('Erlang Solutions pacakge repositories are not available for EL5')
                  raise
                end
            52683: |
              --- RESPONSE (200) ---
              I, [2014-10-14T14:05:34.449954 #11620]  INFO -- Kitchen: -----> Starting Kitchen (v1.2.1)
              E, [2014-10-14T14:05:34.450470 #11620] ERROR -- Kitchen: ------Exception-------
              E, [2014-10-14T14:05:34.450533 #11620] ERROR -- Kitchen: Class: Kitchen::UserError
              E, [2014-10-14T14:05:34.450587 #11620] ERROR -- Kitchen: Message: Kitchen YAML file /Users/joe/code/packagecloud/templates/.kitchen.yml does not exist.
              E, [2014-10-14T14:05:34.450645 #11620] ERROR -- Kitchen: ------Backtrace-------
              E, [2014-10-14T14:05:34.450685 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/loader/yaml.rb:74:in `read'
              E, [2014-10-14T14:05:34.450711 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:78:in `data'
              E, [2014-10-14T14:05:34.450735 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:66:in `suites'
              E, [2014-10-14T14:05:34.450829 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:90:in `filter_instances'
              E, [2014-10-14T14:05:34.450853 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:72:in `build_instances'
              E, [2014-10-14T14:05:34.450875 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:52:in `instances'
              E, [2014-10-14T14:05:34.450897 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:64:in `get_filtered_instances'
              E, [2014-10-14T14:05:34.450919 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:85:in `parse_subcommand'
              E, [2014-10-14T14:05:34.450940 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:37:in `block in call'
              E, [2014-10-14T14:05:34.450962 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
              E, [2014-10-14T14:05:34.450984 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:36:in `call'
              E, [2014-10-14T14:05:34.451006 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:47:in `perform'
              E, [2014-10-14T14:05:34.451028 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:118:in `block (2 levels) in <class:CLI>'
              E, [2014-10-14T14:05:34.451050 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
              E, [2014-10-14T14:05:34.451072 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
              E, [2014-10-14T14:05:34.451094 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:233:in `invoke_task'
              E, [2014-10-14T14:05:34.451116 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
              E, [2014-10-14T14:05:34.451137 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
              E, [2014-10-14T14:05:34.451159 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `block in <top (required)>'
              E, [2014-10-14T14:05:34.451181 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/errors.rb:81:in `with_friendly_errors'
              E, [2014-10-14T14:05:34.451203 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `<top (required)>'
              E, [2014-10-14T14:05:34.451240 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `load'
              E, [2014-10-14T14:05:34.451266 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `<main>'
              E, [2014-10-14T14:05:34.451333 #11620] ERROR -- Kitchen: ----------------------
              --- END RESPONSE ---
              [2016-04-22T07:11:09-04:00] INFO: GET /organizations/chef/file_store/repo/cookbooks/packagecloud/Rakefile
            60915: |2

              def check_for_errors(stderr)
                Chef::Log.fatal(stderr) unless stderr.empty?
              end
            62090: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot end"
                end
            62105: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot enable"
                end
            62228: |2
                if @new_resource.user && use_password?
                  if @new_resource.password.nil?
                    Chef::Log.fatal "#{@new_resource.task_name}: Can't specify a non-system user without a password!"
                  end
                end
            62235: |
              def validate_interactive_setting
                if @new_resource.interactive_enabled && @new_resource.password.nil?
                  Chef::Log.fatal "#{new_resource} did not provide a password when attempting to set interactive/non-interactive."
                end
              end
            63070: |2

                    unless hive
                      Chef::Application.fatal!("Unsupported registry hive '#{hive_name}'")
                    end
            73492: |
              Webhook Smoke
                when a new rule is created
              [2016-04-22T07:15:41-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 4s
              [2016-04-22T07:15:45-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 7s
              [2016-04-22T07:15:52-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 15s
              [2016-04-22T07:16:07-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 28s
              [2016-04-22T07:16:35-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 42s
              [2016-04-22T07:17:17-04:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"
                  it creates a webhook rule
                    has a successful code (FAILED - 1)
                    returns the rule location (FAILED - 2)
              [2016-04-22T07:17:17-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 4s
              [2016-04-22T07:17:21-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 8s
              [2016-04-22T07:17:29-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 10s
              [2016-04-22T07:17:39-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 17s
              [2016-04-22T07:17:56-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 63s
              [2016-04-22T07:18:59-04:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"

              An error occurred in an `after(:context)` hook.
            73543: |
              Randomized with seed 63990

              Build step 'Invoke XShell command' marked build as failure
              Performing Post build task...
              Match found for : : True
        steps:
          total: 26m20s
          before (setup time): 9m28s
          chef-client private-chef::default: 6m50s
          chef-client opscode-analytics::default: 2m35s
          after (cleanup time): 5m23s
      el-6:
        result: FAILURE
        failure_category: unknown
        failure_cause: unknown
        url: http://wilson.ci.chef.co/job/chef-analytics-test/architecture=x86_64,platform=el-6,project=opscode-analytics,role=tester/211/
        duration: 21m34s
        logs:
          consoleText:
            529: |
              [2016-04-22T07:03:21-04:00] INFO: GET /organizations/chef/nodes/ip-10-194-14-98.us-west-2.compute.internal
              [2016-04-22T07:03:21-04:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-14-98.us-west-2.compute.internal>
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:305:in `block in send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:336:in `block in retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `loop'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:299:in `send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:144:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:111:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:604:in `load'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:465:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:267:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:267:in `run_with_graceful_exit_option'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:243:in `block in run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:226:in `run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application/client.rb:419:in `run_application'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:58:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/bin/chef-client:26:in `<top (required)>'
              /opt/opscode/embedded/bin/chef-client:23:in `load'
              /opt/opscode/embedded/bin/chef-client:23:in `<main>'
              [2016-04-22T07:03:21-04:00] INFO:
              --- RESPONSE (404) ---
            4542: |2

                        if attempt == 120
                            raise 'ERROR: Timeout waiting for DRBD mount to return'
                        end
                        print '.'
            5075: |2
                  rescue Exception => e
                    message = <<-EOF
              ERROR:
              The /var/opt/opscode/upgrades/migration-level file is missing or corrupt!  Please read http://docs.chef.io/install_server_pre.html and correct this file before proceeding
            6519: |
              if File.exists?("/etc/opscode/chef-server.json") &&
                  !(File.exist?("/etc/opscode/private-chef.rb") || File.exist?("/etc/opscode/chef-server.rb"))
                Chef::Log.fatal("Configuration via /etc/opscode/chef-server.json is not supported. Please use /etc/opscode/chef-server.rb")
                exit!(1)
              else
            6689: |2

                  if !connected
                    Chef::Log.fatal("HAProxy status socket never appeared properly!")
                    Chef::Log.fatal("See /var/log/opscode/haproxy/current for more information")
                    Kernel.exit! 1
                  end
            6740: |2

                  if !stable
                    Chef::Log.fatal("HAProxy still showing multiple active backends")
                    Chef::Log.fatal("Please check /var/log/opscode/haproxy/current locally for problems.")
                    Chef::Log.fatal("Please check your backend cluster's status for problems.")
                    Kernel.exit! 1
                  end
            7322: |2
                      `echo 'SELECT * FROM pg_database;' | su - #{node['private_chef']['postgresql']['username']} -c '/opt/opscode/embedded/bin/psql -p #{node['private_chef']['postgresql']['port']} -U #{node['private_chef']['postgresql']['db_superuser']} postgres -t -A'`
                if $?.exitstatus != 0
                        Chef::Log.fatal("Could not connect to database, retrying in 10 seconds.")
                        sleep 10
                      else
            7331: |2

                    unless connectable
                      Chef::Log.fatal <<-ERR

              Could not connect to the postgresql database.
            8314: |2
                      elsif PrivateChef['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            8327: |2
                  def generate_hex_if_bootstrap(chars, ha_guard)
                    if ha_guard
                      Chef::Log.fatal("Attempt to create secrets on non-bootstrap node in an H/A topology, please copy /etc/opscode/* around instead.")
                      exit 44
                    end
            8717: |2
                  def assert_server_config(node_name)
                    unless PrivateChef["servers"].key?(node_name)
                      Chef::Log.fatal <<-EOF
              No server configuration found for "#{node_name}" in /etc/opscode/chef-server.rb.
              Server configuration exists for the following hostnames:
            8744: |2
                        gen_api_fqdn
                      else
                        Chef::Log.fatal("I do not understand topology #{PrivateChef.topology} - try standalone, manual, ha, or tier.")
                        exit 55
                      end
            9475: |2
                    # use of exit! prevents exit handlers from running, ensuring the last thing
                    # the customer sees is the descriptive error we've provided.
                    Chef::Log.fatal("\n\n#{LINE_SEP}\n#{e.message}#{LINE_SEP}")
                    exit! 128
                  end
            18050: |2

                if [ ! -d "$OCF_ROOT" ]; then
                  ha_log "ERROR: OCF_ROOT points to non-directory $OCF_ROOT."
                  exit $OCF_ERR_GENERIC
                fi
            18070: |2

                if [ -z "$OCF_RESOURCE_INSTANCE" ]; then
                  ha_log "ERROR: Need to tell us our resource instance name."
                  exit $OCF_ERR_ARGS
                fi
            18107: |2
                        loglevel=notice
                        case "${*}" in
                          *ERROR*)    loglevel=err;;
                          *WARN*)   loglevel=warning;;
                          *INFO*|info)  loglevel=info;;
            18206: |2
                      case "${__OCF_PRIO}" in
                        crit) __OCF_PRIO="CRIT";;
                        err)  __OCF_PRIO="ERROR";;
                        warn) __OCF_PRIO="WARNING";;
                        info) __OCF_PRIO="INFO";;
            19870: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            19941: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            19955: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            20144: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            30061: |2

                if node['fqdn'].nil?
                  Chef::Log.fatal("This node's fqdn is set to nil, so a read token cannot be issued!" \
                                  "Please change your fqdn settings.")
                end
            38996: |
              [2016-04-22T07:10:01-04:00] INFO: GET /organizations/chef/nodes/ip-10-194-14-98.us-west-2.compute.internal
              [2016-04-22T07:10:01-04:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-14-98.us-west-2.compute.internal>
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:277:in `block in send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:308:in `block in retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:271:in `send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:143:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:110:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:604:in `load'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:466:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:266:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:270:in `block in fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:223:in `block in run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:211:in `run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:445:in `block in interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:424:in `run_application'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:58:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/bin/chef-client:26:in `<top (required)>'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `load'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `<main>'
              [2016-04-22T07:10:01-04:00] INFO:
              --- RESPONSE (404) ---
            45189: |
              default['analytics']['alaska']['log_rotation']['file_maxbytes'] = 104857600
              default['analytics']['alaska']['log_rotation']['num_to_keep'] = 10
              default['analytics']['alaska']['log_level'] = 'WARN' # TRACE, DEBUG, INFO, WARN, ERROR, ALL or OFF
              default['analytics']['alaska']['mode'] = 'foreground'
              default['analytics']['alaska']['pipeline']['name'] = 'chef_analytics_pipeline'
            45609: |2
                      elsif Analytics['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            47084: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            47155: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            47169: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            47358: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            47698: |2
                <appender name="chef_analytics" class="ch.qos.logback.core.ConsoleAppender">
                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>DENY</onMatch>
                    <onMismatch>ACCEPT</onMismatch>
            47720: |2

                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>ACCEPT</onMatch>
                    <onMismatch>DENY</onMismatch>
            49456: |
              action :add do
                unless user_exists?(new_resource.user)
                  Chef::Application.fatal!('rabbitmq_user with action :add requires a non-nil/empty password.') if new_resource.password.nil? || new_resource.password.empty?

                  # To escape single quotes in a shell, you have to close the surrounding single quotes, add
            49485: |2

              action :set_permissions do
                Chef::Application.fatal!("rabbitmq_user action :set_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                perm_list = new_resource.permissions.split
            49500: |2

              action :clear_permissions do
                Chef::Application.fatal!("rabbitmq_user action :clear_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                if user_has_permissions?(new_resource.user, new_resource.vhost)
            49514: |2

              action :set_tags do
                Chef::Application.fatal!("rabbitmq_user action :set_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, new_resource.tag)
            49527: |2

              action :clear_tags do
                Chef::Application.fatal!("rabbitmq_user action :clear_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, '"\[\]"')
            53018: |
              when 'rhel'
                if node['platform_version'].to_i <= 5
                  Chef::Log.fatal('Erlang Solutions pacakge repositories are not available for EL5')
                  raise
                end
            53553: |
              --- RESPONSE (200) ---
              I, [2014-10-14T14:05:34.449954 #11620]  INFO -- Kitchen: -----> Starting Kitchen (v1.2.1)
              E, [2014-10-14T14:05:34.450470 #11620] ERROR -- Kitchen: ------Exception-------
              E, [2014-10-14T14:05:34.450533 #11620] ERROR -- Kitchen: Class: Kitchen::UserError
              E, [2014-10-14T14:05:34.450587 #11620] ERROR -- Kitchen: Message: Kitchen YAML file /Users/joe/code/packagecloud/templates/.kitchen.yml does not exist.
              E, [2014-10-14T14:05:34.450645 #11620] ERROR -- Kitchen: ------Backtrace-------
              E, [2014-10-14T14:05:34.450685 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/loader/yaml.rb:74:in `read'
              E, [2014-10-14T14:05:34.450711 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:78:in `data'
              E, [2014-10-14T14:05:34.450735 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:66:in `suites'
              E, [2014-10-14T14:05:34.450829 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:90:in `filter_instances'
              E, [2014-10-14T14:05:34.450853 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:72:in `build_instances'
              E, [2014-10-14T14:05:34.450875 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:52:in `instances'
              E, [2014-10-14T14:05:34.450897 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:64:in `get_filtered_instances'
              E, [2014-10-14T14:05:34.450919 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:85:in `parse_subcommand'
              E, [2014-10-14T14:05:34.450940 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:37:in `block in call'
              E, [2014-10-14T14:05:34.450962 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
              E, [2014-10-14T14:05:34.450984 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:36:in `call'
              E, [2014-10-14T14:05:34.451006 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:47:in `perform'
              E, [2014-10-14T14:05:34.451028 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:118:in `block (2 levels) in <class:CLI>'
              E, [2014-10-14T14:05:34.451050 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
              E, [2014-10-14T14:05:34.451072 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
              E, [2014-10-14T14:05:34.451094 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:233:in `invoke_task'
              E, [2014-10-14T14:05:34.451116 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
              E, [2014-10-14T14:05:34.451137 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
              E, [2014-10-14T14:05:34.451159 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `block in <top (required)>'
              E, [2014-10-14T14:05:34.451181 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/errors.rb:81:in `with_friendly_errors'
              E, [2014-10-14T14:05:34.451203 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2[2016-04-22T07:10:05-04:00] INFO: Storing updated cookbooks/packagecloud/templates/default/yum.erb in the cache.
              .1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `<top (required)>'
              E, [2014-10-14T14:05:34.451240 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `load'
              E, [2014-10-14T14:05:34.451266 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `<main>'
              E, [2014-10-14T14:05:34.451333 #11620] ERROR -- Kitchen: ----------------------
              --- END RESPONSE ---
              [2016-04-22T07:10:05-04:00] INFO: Storing updated cookbooks/packagecloud/templates/.kitchen/logs/kitchen.log in the cache.
            61609: |2

              def check_for_errors(stderr)
                Chef::Log.fatal(stderr) unless stderr.empty?
              end
            61844: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot end"
                end
            61859: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot enable"
                end
            61982: |2
                if @new_resource.user && use_password?
                  if @new_resource.password.nil?
                    Chef::Log.fatal "#{@new_resource.task_name}: Can't specify a non-system user without a password!"
                  end
                end
            61989: |
              def validate_interactive_setting
                if @new_resource.interactive_enabled && @new_resource.password.nil?
                  Chef::Log.fatal "#{new_resource} did not provide a password when attempting to set interactive/non-interactive."
                end
              end
            63958: |2

                    unless hive
                      Chef::Application.fatal!("Unsupported registry hive '#{hive_name}'")
                    end
            75204: |
              Webhook Smoke
                when a new rule is created
              [2016-04-22T07:15:31-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 3s
              [2016-04-22T07:15:34-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 5s
              [2016-04-22T07:15:40-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 15s
              [2016-04-22T07:15:55-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 26s
              [2016-04-22T07:16:21-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 55s
              [2016-04-22T07:17:16-04:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"
                  it creates a webhook rule
                    has a successful code (FAILED - 1)
                    returns the rule location (FAILED - 2)
              [2016-04-22T07:17:16-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 4s
              [2016-04-22T07:17:20-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 8s
              [2016-04-22T07:17:28-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 16s
              [2016-04-22T07:17:44-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 31s
              [2016-04-22T07:18:15-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 46s
              [2016-04-22T07:19:01-04:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"

              An error occurred in an `after(:context)` hook.
            75255: |
              Randomized with seed 51101

              Build step 'Invoke XShell command' marked build as failure
              Performing Post build task...
              Match found for : : True
        steps:
          total: 21m34s
          before (setup time): 10m36s
          chef-client private-chef::default: 4m36s
          chef-client opscode-analytics::default: 3m30s
          after (cleanup time): 48s
      el-7:
        result: FAILURE
        failure_category: unknown
        failure_cause: unknown
        url: http://wilson.ci.chef.co/job/chef-analytics-test/architecture=x86_64,platform=el-7,project=opscode-analytics,role=tester/211/
        duration: 40m24s
        logs:
          consoleText:
            45367: |
              warning: file /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/int1-i.ri: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/file-i.ri: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/fatal%3f-i.ri: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/error%3f-i.ri: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/domain-i.ri: remove failed: No such file or directory
            55209: |
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/File/.packlist: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/File: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/Fatal/.packlist: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/Fatal: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/Exception/.packlist: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/Exception: remove failed: No such file or directory
            56155: |
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-File-1.44/MYMETA.json: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-File-1.44: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Fatal-0.014/install.json: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Fatal-0.014/MYMETA.json: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Fatal-0.014: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Exception-0.43/install.json: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Exception-0.43/MYMETA.json: remove failed: No such file or directory
            56537: |
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/Test/File.pm: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/Test/File: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/Test/Fatal.pm: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/Test/Exception.pm: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/site_perl/5.18.1/Test/Dir/Base.pm: remove failed: No such file or directory
            60365: |
              warning: file /opt/opscode-analytics/embedded/lib/perl5/5.18.1/File/Basename.pm: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/5.18.1/File: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/5.18.1/Fatal.pm: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/5.18.1/ExtUtils/xsubpp: remove failed: No such file or directory
              warning: file /opt/opscode-analytics/embedded/lib/perl5/5.18.1/ExtUtils/typemap: remove failed: No such file or directory
            126132: |
              warning: file /opt/opscode/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/int1-i.ri: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/file-i.ri: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/fatal%3f-i.ri: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/error%3f-i.ri: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/domain-i.ri: remove failed: No such file or directory
            133342: |
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/File/.packlist: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/File: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/Fatal/.packlist: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/Fatal: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/Exception/.packlist: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/Exception: remove failed: No such file or directory
            134288: |
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-File-1.44/MYMETA.json: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-File-1.44: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Fatal-0.014/install.json: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Fatal-0.014/MYMETA.json: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Fatal-0.014: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Exception-0.43/install.json: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Exception-0.43/MYMETA.json: remove failed: No such file or directory
            134670: |
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/Test/File.pm: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/Test/File: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/Test/Fatal.pm: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/Test/Exception.pm: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/Test/Dir/Base.pm: remove failed: No such file or directory
            138498: |
              warning: file /opt/opscode/embedded/lib/perl5/5.18.1/File/Basename.pm: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/5.18.1/File: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/5.18.1/Fatal.pm: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/5.18.1/ExtUtils/xsubpp: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/5.18.1/ExtUtils/typemap: remove failed: No such file or directory
            147961: |
              [2016-04-22T07:02:00-04:00] INFO: GET /organizations/chef/nodes/ip-10-194-9-109.us-west-2.compute.internal
              [2016-04-22T07:02:00-04:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-9-109.us-west-2.compute.internal>
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:305:in `block in send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:336:in `block in retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `loop'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:299:in `send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:144:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:111:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:604:in `load'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:465:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:267:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:267:in `run_with_graceful_exit_option'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:243:in `block in run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:226:in `run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application/client.rb:419:in `run_application'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:58:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/bin/chef-client:26:in `<top (required)>'
              /opt/opscode/embedded/bin/chef-client:23:in `load'
              /opt/opscode/embedded/bin/chef-client:23:in `<main>'
              [2016-04-22T07:02:00-04:00] INFO:
              --- RESPONSE (404) ---
            151351: |2

                        if attempt == 120
                            raise 'ERROR: Timeout waiting for DRBD mount to return'
                        end
                        print '.'
            152456: |
              if File.exists?("/etc/opscode/chef-server.json") &&
                  !(File.exist?("/etc/opscode/private-chef.rb") || File.exist?("/etc/opscode/chef-server.rb"))
                Chef::Log.fatal("Configuration via /etc/opscode/chef-server.json is not supported. Please use /etc/opscode/chef-server.rb")
                exit!(1)
              else
            152984: |2

                  if !connected
                    Chef::Log.fatal("HAProxy status socket never appeared properly!")
                    Chef::Log.fatal("See /var/log/opscode/haproxy/current for more information")
                    Kernel.exit! 1
                  end
            153035: |2

                  if !stable
                    Chef::Log.fatal("HAProxy still showing multiple active backends")
                    Chef::Log.fatal("Please check /var/log/opscode/haproxy/current locally for problems.")
                    Chef::Log.fatal("Please check your backend cluster's status for problems.")
                    Kernel.exit! 1
                  end
            154024: |2
                  rescue Exception => e
                    message = <<-EOF
              ERROR:
              The /var/opt/opscode/upgrades/migration-level file is missing or corrupt!  Please read http://docs.chef.io/install_server_pre.html and correct this file before proceeding
            154454: |2
                      `echo 'SELECT * FROM pg_database;' | su - #{node['private_chef']['postgresql']['username']} -c '/opt/opscode/embedded/bin/psql -p #{node['private_chef']['postgresql']['port']} -U #{node['private_chef']['postgresql']['db_superuser']} postgres -t -A'`
                if $?.exitstatus != 0
                        Chef::Log.fatal("Could not connect to database, retrying in 10 seconds.")
                        sleep 10
                      else
            154463: |2

                    unless connectable
                      Chef::Log.fatal <<-ERR

              Could not connect to the postgresql database.
            156542: |2
                    # use of exit! prevents exit handlers from running, ensuring the last thing
                    # the customer sees is the descriptive error we've provided.
                    Chef::Log.fatal("\n\n#{LINE_SEP}\n#{e.message}#{LINE_SEP}")
                    exit! 128
                  end
            157154: |2
                      elsif PrivateChef['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            157167: |2
                  def generate_hex_if_bootstrap(chars, ha_guard)
                    if ha_guard
                      Chef::Log.fatal("Attempt to create secrets on non-bootstrap node in an H/A topology, please copy /etc/opscode/* around instead.")
                      exit 44
                    end
            157556: |2
                  def assert_server_config(node_name)
                    unless PrivateChef["servers"].key?(node_name)
                      Chef::Log.fatal <<-EOF
              No server configuration found for "#{node_name}" in /etc/opscode/chef-server.rb.
              Server configuration exists for the following hostnames:
            157583: |2
                        gen_api_fqdn
                      else
                        Chef::Log.fatal("I do not understand topology #{PrivateChef.topology} - try standalone, manual, ha, or tier.")
                        exit 55
                      end
            163090: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            163161: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            163175: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            163364: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            163543: |2

                if [ ! -d "$OCF_ROOT" ]; then
                  ha_log "ERROR: OCF_ROOT points to non-directory $OCF_ROOT."
                  exit $OCF_ERR_GENERIC
                fi
            163563: |2

                if [ -z "$OCF_RESOURCE_INSTANCE" ]; then
                  ha_log "ERROR: Need to tell us our resource instance name."
                  exit $OCF_ERR_ARGS
                fi
            163600: |2
                        loglevel=notice
                        case "${*}" in
                          *ERROR*)    loglevel=err;;
                          *WARN*)   loglevel=warning;;
                          *INFO*|info)  loglevel=info;;
            163699: |2
                      case "${__OCF_PRIO}" in
                        crit) __OCF_PRIO="CRIT";;
                        err)  __OCF_PRIO="ERROR";;
                        warn) __OCF_PRIO="WARNING";;
                        info) __OCF_PRIO="INFO";;
            176567: |2

                if node['fqdn'].nil?
                  Chef::Log.fatal("This node's fqdn is set to nil, so a read token cannot be issued!" \
                                  "Please change your fqdn settings.")
                end
            185961: |
              [2016-04-22T07:15:18-04:00] INFO: GET /organizations/chef/nodes/ip-10-194-9-109.us-west-2.compute.internal
              [2016-04-22T07:15:18-04:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-9-109.us-west-2.compute.internal>
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:277:in `block in send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:308:in `block in retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:271:in `send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:143:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:110:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:604:in `load'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:466:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:266:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:270:in `block in fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:223:in `block in run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:211:in `run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:445:in `block in interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:424:in `run_application'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:58:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/bin/chef-client:26:in `<top (required)>'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `load'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `<main>'
              [2016-04-22T07:15:18-04:00] INFO:
              --- RESPONSE (404) ---
            192146: |2
                      elsif Analytics['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            192646: |
              default['analytics']['alaska']['log_rotation']['file_maxbytes'] = 104857600
              default['analytics']['alaska']['log_rotation']['num_to_keep'] = 10
              default['analytics']['alaska']['log_level'] = 'WARN' # TRACE, DEBUG, INFO, WARN, ERROR, ALL or OFF
              default['analytics']['alaska']['mode'] = 'foreground'
              default['analytics']['alaska']['pipeline']['name'] = 'chef_analytics_pipeline'
            193210: |2
                <appender name="chef_analytics" class="ch.qos.logback.core.ConsoleAppender">
                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>DENY</onMatch>
                    <onMismatch>ACCEPT</onMismatch>
            193232: |2

                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>ACCEPT</onMatch>
                    <onMismatch>DENY</onMismatch>
            194054: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            194125: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            194139: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            194328: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            196289: |
              action :add do
                unless user_exists?(new_resource.user)
                  Chef::Application.fatal!('rabbitmq_user with action :add requires a non-nil/empty password.') if new_resource.password.nil? || new_resource.password.empty?

                  # To escape single quotes in a shell, you have to close the surrounding single quotes, add
            196318: |2

              action :set_permissions do
                Chef::Application.fatal!("rabbitmq_user action :set_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                perm_list = new_resource.permissions.split
            196333: |2

              action :clear_permissions do
                Chef::Application.fatal!("rabbitmq_user action :clear_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                if user_has_permissions?(new_resource.user, new_resource.vhost)
            196347: |2

              action :set_tags do
                Chef::Application.fatal!("rabbitmq_user action :set_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, new_resource.tag)
            196360: |2

              action :clear_tags do
                Chef::Application.fatal!("rabbitmq_user action :clear_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, '"\[\]"')
            199681: |
              when 'rhel'
                if node['platform_version'].to_i <= 5
                  Chef::Log.fatal('Erlang Solutions pacakge repositories are not available for EL5')
                  raise
                end
            207821: |
              --- RESPONSE (200) ---
              I, [2014-10-14T14:05:34.449954 #11620]  INFO -- Kitchen: -----> Starting Kitchen (v1.2.1)
              E, [2014-10-14T14:05:34.450470 #11620] ERROR -- Kitchen: ------Exception-------
              E, [2014-10-14T14:05:34.450533 #11620] ERROR -- Kitchen: Class: Kitchen::UserError
              E, [2014-10-14T14:05:34.450587 #11620] ERROR -- Kitchen: Message: Kitchen YAML file /Users/joe/code/packagecloud/templates/.kitchen.yml does not exist.
              E, [2014-10-14T14:05:34.450645 #11620] ERROR -- Kitchen: ------Backtrace-------
              E, [2014-10-14T14:05:34.450685 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/loader/yaml.rb:74:in `read'
              E, [2014-10-14T14:05:34.450711 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:78:in `data'
              E, [2014-10-14T14:05:34.450735 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:66:in `suites'
              E, [2014-10-14T14:05:34.450829 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:90:in `filter_instances'
              E, [2014-10-14T14:05:34.450853 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:72:in `build_instances'
              E, [2014-10-14T14:05:34.450875 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:52:in `instances'
              E, [2014-10-14T14:05:34.450897 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:64:in `get_filtered_instances'
              E, [2014-10-14T14:05:34.450919 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:85:in `parse_subcommand'
              E, [2014-10-14T14:05:34.450940 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:37:in `block in call'
              E, [2014-10-14T14:05:34.450962 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
              E, [2014-10-14T14:05:34.450984 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:36:in `call'
              E, [2014-10-14T14:05:34.451006 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:47:in `perform'
              E, [2014-10-14T14:05:34.451028 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:118:in `block (2 levels) in <class:CLI>'
              E, [2014-10-14T14:05:34.451050 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
              E, [2014-10-14T14:05:34.451072 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
              E, [2014-10-14T14:05:34.451094 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:233:in `invoke_task'
              E, [2014-10-14T14:05:34.451116 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
              E, [2014-10-14T14:05:34.451137 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
              E, [2014-10-14T14:05:34.451159 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `block in <top (required)>'
              E, [2014-10-14T14:05:34.451181 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/errors.rb:81:in `with_friendly_errors'
              E, [2014-10-14T14:05:34.451203 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `<top (required)>'
              E, [2014-10-14T14:05:34.451240 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `load'
              E, [2014-10-14T14:05:34.451266 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `<main>'
              E, [2014-10-14T14:05:34.451333 #11620] ERROR -- Kitchen: ----------------------
              --- END RESPONSE ---
              [2016-04-22T07:15:27-04:00] INFO: Storing updated cookbooks/packagecloud/templates/.kitchen/logs/kitchen.log in the cache.
            209014: |2

              def check_for_errors(stderr)
                Chef::Log.fatal(stderr) unless stderr.empty?
              end
            209594: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot end"
                end
            209609: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot enable"
                end
            209732: |2
                if @new_resource.user && use_password?
                  if @new_resource.password.nil?
                    Chef::Log.fatal "#{@new_resource.task_name}: Can't specify a non-system user without a password!"
                  end
                end
            209739: |
              def validate_interactive_setting
                if @new_resource.interactive_enabled && @new_resource.password.nil?
                  Chef::Log.fatal "#{new_resource} did not provide a password when attempting to set interactive/non-interactive."
                end
              end
            210340: |2

                    unless hive
                      Chef::Application.fatal!("Unsupported registry hive '#{hive_name}'")
                    end
            214783: |
              \33[0mCookbook Trace:\33[0m
              ---------------\33[0m
              /opt/opscode-analytics/embedded/cookbooks/cache/cookbooks/runit/libraries/helpers.rb:181:in `restart_service'
              \33[0m/opt/opscode-analytics/embedded/cookbooks/cache/cookbooks/runit/libraries/provider_runit_service.rb:56:in `block (3 levels) in <class:RunitService>'
              \33[0m/opt/opscode-analytics/embedded/cookbooks/cache/cookbooks/runit/libraries/provider_runit_service.rb:280:in `block in <class:RunitService>'\33[0m

              \33[0mResource Declaration:\33[0m
            221787: |
              Webhook Smoke
                when a new rule is created
              [2016-04-22T07:29:43-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 3s
              [2016-04-22T07:29:46-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 6s
              [2016-04-22T07:29:52-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 11s
              [2016-04-22T07:30:03-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 28s
              [2016-04-22T07:30:31-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 42s
              [2016-04-22T07:31:13-04:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"
                  it creates a webhook rule
                    has a successful code (FAILED - 1)
                    returns the rule location (FAILED - 2)
              [2016-04-22T07:31:13-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 3s
              [2016-04-22T07:31:16-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 8s
              [2016-04-22T07:31:24-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 13s
              [2016-04-22T07:31:37-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 28s
              [2016-04-22T07:32:05-04:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 56s
              [2016-04-22T07:33:01-04:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"

              An error occurred in an `after(:context)` hook.
            221838: |
              Randomized with seed 48911

              Build step 'Invoke XShell command' marked build as failure
              Performing Post build task...
              Match found for : : True
        steps:
          total: 40m24s
          before (setup time): 9m12s
          chef-client private-chef::default: 11m10s
          chef-client opscode-analytics::default: 12m7s
          after (cleanup time): 5m45s
      ubuntu-10.04:
        result: FAILURE
        failure_category: unknown
        failure_cause: unknown
        url: http://wilson.ci.chef.co/job/chef-analytics-test/architecture=x86_64,platform=ubuntu-10.04,project=opscode-analytics,role=tester/211/
        duration: 40m23s
        logs:
          consoleText:
            570: |
              [2016-04-22T11:01:04+00:00] INFO: GET /organizations/chef/nodes/ip-10-194-11-20.us-west-2.compute.internal
              [2016-04-22T11:01:04+00:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-11-20.us-west-2.compute.internal>
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:305:in `block in send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:336:in `block in retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `loop'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:299:in `send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:144:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:111:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:604:in `load'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:465:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:267:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:267:in `run_with_graceful_exit_option'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:243:in `block in run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:226:in `run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application/client.rb:419:in `run_application'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:58:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/bin/chef-client:26:in `<top (required)>'
              /opt/opscode/embedded/bin/chef-client:23:in `load'
              /opt/opscode/embedded/bin/chef-client:23:in `<main>'
              [2016-04-22T11:01:04+00:00] INFO:
              --- RESPONSE (404) ---
            4463: |
              if File.exists?("/etc/opscode/chef-server.json") &&
                  !(File.exist?("/etc/opscode/private-chef.rb") || File.exist?("/etc/opscode/chef-server.rb"))
                Chef::Log.fatal("Configuration via /etc/opscode/chef-server.json is not supported. Please use /etc/opscode/chef-server.rb")
                exit!(1)
              else
            4814: |2

                        if attempt == 120
                            raise 'ERROR: Timeout waiting for DRBD mount to return'
                        end
                        print '.'
            5543: |2

                  if !connected
                    Chef::Log.fatal("HAProxy status socket never appeared properly!")
                    Chef::Log.fatal("See /var/log/opscode/haproxy/current for more information")
                    Kernel.exit! 1
                  end
            5594: |2

                  if !stable
                    Chef::Log.fatal("HAProxy still showing multiple active backends")
                    Chef::Log.fatal("Please check /var/log/opscode/haproxy/current locally for problems.")
                    Chef::Log.fatal("Please check your backend cluster's status for problems.")
                    Kernel.exit! 1
                  end
            6031: |2
                  rescue Exception => e
                    message = <<-EOF
              ERROR:
              The /var/opt/opscode/upgrades/migration-level file is missing or corrupt!  Please read http://docs.chef.io/install_server_pre.html and correct this file before proceeding
            7715: |2
                    # use of exit! prevents exit handlers from running, ensuring the last thing
                    # the customer sees is the descriptive error we've provided.
                    Chef::Log.fatal("\n\n#{LINE_SEP}\n#{e.message}#{LINE_SEP}")
                    exit! 128
                  end
            8455: |2
                      `echo 'SELECT * FROM pg_database;' | su - #{node['private_chef']['postgresql']['username']} -c '/opt/opscode/embedded/bin/psql -p #{node['private_chef']['postgresql']['port']} -U #{node['private_chef']['postgresql']['db_superuser']} postgres -t -A'`
                if $?.exitstatus != 0
                        Chef::Log.fatal("Could not connect to database, retrying in 10 seconds.")
                        sleep 10
                      else
            8464: |2

                    unless connectable
                      Chef::Log.fatal <<-ERR

              Could not connect to the postgresql database.
            12062: |2
                      elsif PrivateChef['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            12075: |2
                  def generate_hex_if_bootstrap(chars, ha_guard)
                    if ha_guard
                      Chef::Log.fatal("Attempt to create secrets on non-bootstrap node in an H/A topology, please copy /etc/opscode/* around instead.")
                      exit 44
                    end
            12464: |2
                  def assert_server_config(node_name)
                    unless PrivateChef["servers"].key?(node_name)
                      Chef::Log.fatal <<-EOF
              No server configuration found for "#{node_name}" in /etc/opscode/chef-server.rb.
              Server configuration exists for the following hostnames:
            12491: |2
                        gen_api_fqdn
                      else
                        Chef::Log.fatal("I do not understand topology #{PrivateChef.topology} - try standalone, manual, ha, or tier.")
                        exit 55
                      end
            13995: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            14066: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            14080: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            14269: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            17552: |2

                if [ ! -d "$OCF_ROOT" ]; then
                  ha_log "ERROR: OCF_ROOT points to non-directory $OCF_ROOT."
                  exit $OCF_ERR_GENERIC
                fi
            17572: |2

                if [ -z "$OCF_RESOURCE_INSTANCE" ]; then
                  ha_log "ERROR: Need to tell us our resource instance name."
                  exit $OCF_ERR_ARGS
                fi
            17609: |2
                        loglevel=notice
                        case "${*}" in
                          *ERROR*)    loglevel=err;;
                          *WARN*)   loglevel=warning;;
                          *INFO*|info)  loglevel=info;;
            17708: |2
                      case "${__OCF_PRIO}" in
                        crit) __OCF_PRIO="CRIT";;
                        err)  __OCF_PRIO="ERROR";;
                        warn) __OCF_PRIO="WARNING";;
                        info) __OCF_PRIO="INFO";;
            30860: |2

                if node['fqdn'].nil?
                  Chef::Log.fatal("This node's fqdn is set to nil, so a read token cannot be issued!" \
                                  "Please change your fqdn settings.")
                end
            37975: |
              [2016-04-22T11:15:10+00:00] INFO: GET /organizations/chef/nodes/ip-10-194-11-20.us-west-2.compute.internal
              [2016-04-22T11:15:10+00:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-11-20.us-west-2.compute.internal>
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:277:in `block in send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:308:in `block in retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:271:in `send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:143:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:110:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:604:in `load'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:466:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:266:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:270:in `block in fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:223:in `block in run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:211:in `run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:445:in `block in interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:424:in `run_application'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:58:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/bin/chef-client:26:in `<top (required)>'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `load'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `<main>'
              [2016-04-22T11:15:10+00:00] INFO:
              --- RESPONSE (404) ---
            44136: |
              default['analytics']['alaska']['log_rotation']['file_maxbytes'] = 104857600
              default['analytics']['alaska']['log_rotation']['num_to_keep'] = 10
              default['analytics']['alaska']['log_level'] = 'WARN' # TRACE, DEBUG, INFO, WARN, ERROR, ALL or OFF
              default['analytics']['alaska']['mode'] = 'foreground'
              default['analytics']['alaska']['pipeline']['name'] = 'chef_analytics_pipeline'
            44374: |2
                      elsif Analytics['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            45458: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            45529: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            45543: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            45732: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            46195: |2
                <appender name="chef_analytics" class="ch.qos.logback.core.ConsoleAppender">
                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>DENY</onMatch>
                    <onMismatch>ACCEPT</onMismatch>
            46217: |2

                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>ACCEPT</onMatch>
                    <onMismatch>DENY</onMismatch>
            47983: |
              action :add do
                unless user_exists?(new_resource.user)
                  Chef::Application.fatal!('rabbitmq_user with action :add requires a non-nil/empty password.') if new_resource.password.nil? || new_resource.password.empty?

                  # To escape single quotes in a shell, you have to close the surrounding single quotes, add
            48012: |2

              action :set_permissions do
                Chef::Application.fatal!("rabbitmq_user action :set_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                perm_list = new_resource.permissions.split
            48027: |2

              action :clear_permissions do
                Chef::Application.fatal!("rabbitmq_user action :clear_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                if user_has_permissions?(new_resource.user, new_resource.vhost)
            48041: |2

              action :set_tags do
                Chef::Application.fatal!("rabbitmq_user action :set_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, new_resource.tag)
            48054: |2

              action :clear_tags do
                Chef::Application.fatal!("rabbitmq_user action :clear_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, '"\[\]"')
            51875: |
              when 'rhel'
                if node['platform_version'].to_i <= 5
                  Chef::Log.fatal('Erlang Solutions pacakge repositories are not available for EL5')
                  raise
                end
            52893: |
              --- RESPONSE (200) ---
              I, [2014-10-14T14:05:34.449954 #11620]  INFO -- Kitchen: -----> Starting Kitchen (v1.2.1)
              E, [2014-10-14T14:05:34.450470 #11620] ERROR -- Kitchen: ------Exception-------
              E, [2014-10-14T14:05:34.450533 #11620] ERROR -- Kitchen: Class: Kitchen::UserError
              E, [2014-10-14T14:05:34.450587 #11620] ERROR -- Kitchen: Message: Kitchen YAML file /Users/joe/code/packagecloud/templates/.kitchen.yml does not exist.
              E, [2014-10-14T14:05:34.450645 #11620] ERROR -- Kitchen: ------Backtrace-------
              E, [2014-10-14T14:05:34.450685 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/loader/yaml.rb:74:in `read'
              E, [2014-10-14T14:05:34.450711 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:78:in `data'
              E, [2014-10-14T14:05:34.450735 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:66:in `suites'
              E, [2014-10-14T14:05:34.450829 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:90:in `filter_instances'
              E, [2014-10-14T14:05:34.450853 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:72:in `build_instances'
              E, [2014-10-14T14:05:34.450875 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:52:in `instances'
              E, [2014-10-14T14:05:34.450897 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:64:in `get_filtered_instances'
              E, [2014-10-14T14:05:34.450919 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:85:in `parse_subcommand'
              E, [2014-10-14T14:05:34.450940 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:37:in `block in call'
              E, [2014-10-14T14:05:34.450962 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
              E, [2014-10-14T14:05:34.450984 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:36:in `call'
              E, [2014-10-14T14:05:34.451006 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:47:in `perform'
              E, [2014-10-14T14:05:34.451028 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:118:in `block (2 levels) in <class:CLI>'
              E, [2014-10-14T14:05:34.451050 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
              E, [2014-10-14T14:05:34.451072 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
              E, [2014-10-14T14:05:34.451094 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:233:in `invoke_task'
              E, [2014-10-14T14:05:34.451116 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
              E, [2014-10-14T14:05:34.451137 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
              E, [2014-10-14T14:05:34.451159 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `block in <top (required)>'
              E, [2014-10-14T14:05:34.451181 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/errors.rb:81:in `with_friendly_errors'
              E, [2014-10-14T14:05:34.451203 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `<top (required)>'
              E, [2014-10-14T14:05:34.451240 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `load'
              E, [2014-10-14T14:05:34.451266 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `<main>'
              E, [2014-10-14T14:05:34.451333 #11620] ERROR -- Kitchen: ----------------------
              --- END RESPONSE ---
              [2016-04-22T11:15:20+00:00] INFO: Storing updated cookbooks/packagecloud/templates/.kitchen/logs/kitchen.log in the cache.
            60418: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot end"
                end
            60433: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot enable"
                end
            60556: |2
                if @new_resource.user && use_password?
                  if @new_resource.password.nil?
                    Chef::Log.fatal "#{@new_resource.task_name}: Can't specify a non-system user without a password!"
                  end
                end
            60563: |
              def validate_interactive_setting
                if @new_resource.interactive_enabled && @new_resource.password.nil?
                  Chef::Log.fatal "#{new_resource} did not provide a password when attempting to set interactive/non-interactive."
                end
              end
            60809: |2

              def check_for_errors(stderr)
                Chef::Log.fatal(stderr) unless stderr.empty?
              end
            62768: |2

                    unless hive
                      Chef::Application.fatal!("Unsupported registry hive '#{hive_name}'")
                    end
            73009: |
              Webhook Smoke
                when a new rule is created
              [2016-04-22T11:29:46+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 4s
              [2016-04-22T11:29:50+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 7s
              [2016-04-22T11:29:57+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 10s
              [2016-04-22T11:30:07+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 26s
              [2016-04-22T11:30:33+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 63s
              [2016-04-22T11:31:36+00:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"
                  it creates a webhook rule
                    has a successful code (FAILED - 1)
                    returns the rule location (FAILED - 2)
              [2016-04-22T11:31:36+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 3s
              [2016-04-22T11:31:39+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 8s
              [2016-04-22T11:31:47+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 14s
              [2016-04-22T11:32:01+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 20s
              [2016-04-22T11:32:21+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 39s
              [2016-04-22T11:33:01+00:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"

              An error occurred in an `after(:context)` hook.
            73060: |
              Randomized with seed 38429

              Build step 'Invoke XShell command' marked build as failure
              Performing Post build task...
              Match found for : : True
        steps:
          total: 40m23s
          before (setup time): 8m17s
          chef-client private-chef::default: 11m52s
          chef-client opscode-analytics::default: 12m16s
          after (cleanup time): 5m46s
      ubuntu-12.04:
        result: FAILURE
        failure_category: unknown
        failure_cause: unknown
        url: http://wilson.ci.chef.co/job/chef-analytics-test/architecture=x86_64,platform=ubuntu-12.04,project=opscode-analytics,role=tester/211/
        duration: 20m42s
        logs:
          consoleText:
            576: |
              [2016-04-22T11:00:27+00:00] INFO: GET /organizations/chef/nodes/ip-10-194-8-128.us-west-2.compute.internal
              [2016-04-22T11:00:27+00:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-8-128.us-west-2.compute.internal>
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:305:in `block in send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:336:in `block in retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `loop'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:299:in `send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:144:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:111:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:604:in `load'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:465:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:267:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:267:in `run_with_graceful_exit_option'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:243:in `block in run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:226:in `run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application/client.rb:419:in `run_application'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:58:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/bin/chef-client:26:in `<top (required)>'
              /opt/opscode/embedded/bin/chef-client:23:in `load'
              /opt/opscode/embedded/bin/chef-client:23:in `<main>'
              [2016-04-22T11:00:27+00:00] INFO:
              --- RESPONSE (404) ---
            4282: |2

                        if attempt == 120
                            raise 'ERROR: Timeout waiting for DRBD mount to return'
                        end
                        print '.'
            5277: |2
                      `echo 'SELECT * FROM pg_database;' | su - #{node['private_chef']['postgresql']['username']} -c '/opt/opscode/embedded/bin/psql -p #{node['private_chef']['postgresql']['port']} -U #{node['private_chef']['postgresql']['db_superuser']} postgres -t -A'`
                if $?.exitstatus != 0
                        Chef::Log.fatal("Could not connect to database, retrying in 10 seconds.")
                        sleep 10
                      else
            5286: |2

                    unless connectable
                      Chef::Log.fatal <<-ERR

              Could not connect to the postgresql database.
            5742: |2
                  rescue Exception => e
                    message = <<-EOF
              ERROR:
              The /var/opt/opscode/upgrades/migration-level file is missing or corrupt!  Please read http://docs.chef.io/install_server_pre.html and correct this file before proceeding
            6746: |
              if File.exists?("/etc/opscode/chef-server.json") &&
                  !(File.exist?("/etc/opscode/private-chef.rb") || File.exist?("/etc/opscode/chef-server.rb"))
                Chef::Log.fatal("Configuration via /etc/opscode/chef-server.json is not supported. Please use /etc/opscode/chef-server.rb")
                exit!(1)
              else
            7742: |2

                  if !connected
                    Chef::Log.fatal("HAProxy status socket never appeared properly!")
                    Chef::Log.fatal("See /var/log/opscode/haproxy/current for more information")
                    Kernel.exit! 1
                  end
            7793: |2

                  if !stable
                    Chef::Log.fatal("HAProxy still showing multiple active backends")
                    Chef::Log.fatal("Please check /var/log/opscode/haproxy/current locally for problems.")
                    Chef::Log.fatal("Please check your backend cluster's status for problems.")
                    Kernel.exit! 1
                  end
            8806: |2
                      elsif PrivateChef['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            8819: |2
                  def generate_hex_if_bootstrap(chars, ha_guard)
                    if ha_guard
                      Chef::Log.fatal("Attempt to create secrets on non-bootstrap node in an H/A topology, please copy /etc/opscode/* around instead.")
                      exit 44
                    end
            9209: |2
                  def assert_server_config(node_name)
                    unless PrivateChef["servers"].key?(node_name)
                      Chef::Log.fatal <<-EOF
              No server configuration found for "#{node_name}" in /etc/opscode/chef-server.rb.
              Server configuration exists for the following hostnames:
            9236: |2
                        gen_api_fqdn
                      else
                        Chef::Log.fatal("I do not understand topology #{PrivateChef.topology} - try standalone, manual, ha, or tier.")
                        exit 55
                      end
            10419: |2
                    # use of exit! prevents exit handlers from running, ensuring the last thing
                    # the customer sees is the descriptive error we've provided.
                    Chef::Log.fatal("\n\n#{LINE_SEP}\n#{e.message}#{LINE_SEP}")
                    exit! 128
                  end
            18407: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            18478: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            18492: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            18681: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            19224: |2

                if [ ! -d "$OCF_ROOT" ]; then
                  ha_log "ERROR: OCF_ROOT points to non-directory $OCF_ROOT."
                  exit $OCF_ERR_GENERIC
                fi
            19244: |2

                if [ -z "$OCF_RESOURCE_INSTANCE" ]; then
                  ha_log "ERROR: Need to tell us our resource instance name."
                  exit $OCF_ERR_ARGS
                fi
            19281: |2
                        loglevel=notice
                        case "${*}" in
                          *ERROR*)    loglevel=err;;
                          *WARN*)   loglevel=warning;;
                          *INFO*|info)  loglevel=info;;
            19380: |2
                      case "${__OCF_PRIO}" in
                        crit) __OCF_PRIO="CRIT";;
                        err)  __OCF_PRIO="ERROR";;
                        warn) __OCF_PRIO="WARNING";;
                        info) __OCF_PRIO="INFO";;
            29896: |2

                if node['fqdn'].nil?
                  Chef::Log.fatal("This node's fqdn is set to nil, so a read token cannot be issued!" \
                                  "Please change your fqdn settings.")
                end
            38518: |
              [2016-04-22T11:04:45+00:00] INFO: GET /organizations/chef/nodes/ip-10-194-8-128.us-west-2.compute.internal
              [2016-04-22T11:04:45+00:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-8-128.us-west-2.compute.internal>
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:277:in `block in send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:308:in `block in retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:271:in `send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:143:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:110:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:604:in `load'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:466:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:266:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:270:in `block in fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:223:in `block in run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:211:in `run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:445:in `block in interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:424:in `run_application'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:58:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/bin/chef-client:26:in `<top (required)>'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `load'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `<main>'
              [2016-04-22T11:04:45+00:00] INFO:
              --- RESPONSE (404) ---
            44937: |
              default['analytics']['alaska']['log_rotation']['file_maxbytes'] = 104857600
              default['analytics']['alaska']['log_rotation']['num_to_keep'] = 10
              default['analytics']['alaska']['log_level'] = 'WARN' # TRACE, DEBUG, INFO, WARN, ERROR, ALL or OFF
              default['analytics']['alaska']['mode'] = 'foreground'
              default['analytics']['alaska']['pipeline']['name'] = 'chef_analytics_pipeline'
            45176: |2
                      elsif Analytics['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            45463: |2
                <appender name="chef_analytics" class="ch.qos.logback.core.ConsoleAppender">
                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>DENY</onMatch>
                    <onMismatch>ACCEPT</onMismatch>
            45485: |2

                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>ACCEPT</onMatch>
                    <onMismatch>DENY</onMismatch>
            46752: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            46823: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            46837: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            47026: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            48919: |
              action :add do
                unless user_exists?(new_resource.user)
                  Chef::Application.fatal!('rabbitmq_user with action :add requires a non-nil/empty password.') if new_resource.password.nil? || new_resource.password.empty?

                  # To escape single quotes in a shell, you have to close the surrounding single quotes, add
            48948: |2

              action :set_permissions do
                Chef::Application.fatal!("rabbitmq_user action :set_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                perm_list = new_resource.permissions.split
            48963: |2

              action :clear_permissions do
                Chef::Application.fatal!("rabbitmq_user action :clear_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                if user_has_permissions?(new_resource.user, new_resource.vhost)
            48977: |2

              action :set_tags do
                Chef::Application.fatal!("rabbitmq_user action :set_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, new_resource.tag)
            48990: |2

              action :clear_tags do
                Chef::Application.fatal!("rabbitmq_user action :clear_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, '"\[\]"')
            52422: |
              when 'rhel'
                if node['platform_version'].to_i <= 5
                  Chef::Log.fatal('Erlang Solutions pacakge repositories are not available for EL5')
                  raise
                end
            53057: |
              --- RESPONSE (200) ---
              I, [2014-10-14T14:05:34.449954 #11620]  INFO -- Kitchen: -----> Starting Kitchen (v1.2.1)
              E, [2014-10-14T14:05:34.450470 #11620] ERROR -- Kitchen: ------Exception-------
              E, [2014-10-14T14:05:34.450533 #11620] ERROR -- Kitchen: Class: Kitchen::UserError
              E, [2014-10-14T14:05:34.450587 #11620] ERROR -- Kitchen: Message: Kitchen YAML file /Users/joe/code/packagecloud/templates/.kitchen.yml does not exist.
              E, [2014-10-14T14:05:34.450645 #11620] ERROR -- Kitchen: ------Backtrace-------
              E, [2014-10-14T14:05:34.450685 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/loader/yaml.rb:74:in `read'
              E, [2014-10-14T14:05:34.450711 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:78:in `data'
              E, [2014-10-14T14:05:34.450735 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:66:in `suites'
              E, [2014-10-14T14:05:34.450829 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:90:in `filter_instances'
              E, [2014-10-14T14:05:34.450853 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:72:in `build_instances'
              E, [2014-10-14T14:05:34.450875 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:52:in `instances'
              E, [2014-10-14T14:05:34.450897 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:64:in `get_filtered_instances'
              E, [2014-10-14T14:05:34.450919 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:85:in `parse_subcommand'
              E, [2014-10-14T14:05:34.450940 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:37:in `block in call'
              E, [2014-10-14T14:05:34.450962 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
              E, [2014-10-14T14:05:34.450984 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:36:in `call'
              E, [2014-10-14T14:05:34.451006 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:47:in `perform'
              E, [2014-10-14T14:05:34.451028 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:118:in `block (2 levels) in <class:CLI>'
              E, [2014-10-14T14:05:34.451050 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
              E, [2014-10-14T14:05:34.451072 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
              E, [2014-10-14T14:05:34.451094 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:233:in `invoke_task'
              E, [2014-10-14T14:05:34.451116 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
              E, [2014-10-14T14:05:34.451137 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
              E, [2014-10-14T14:05:34.451159 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `block in <top (required)>'
              E, [2014-10-14T14:05:34.451181 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/errors.rb:81:in `with_friendly_errors'
              E, [2014-10-14T14:05:34.451203 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `<top (required)>'
              E, [2014-10-14T14:05:34.451240 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `load'
              E, [2014-10-14T14:05:34.451266 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `<main>'
              E, [2014-10-14T14:05:34.451333 #11620] ERROR -- Kitchen: ----------------------
              --- END RESPONSE ---
              [2016-04-22T11:04:48+00:00] INFO: Storing updated cookbooks/packagecloud/Gemfile in the cache.
            61588: |2

              def check_for_errors(stderr)
                Chef::Log.fatal(stderr) unless stderr.empty?
              end
            62325: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot end"
                end
            62340: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot enable"
                end
            62463: |2
                if @new_resource.user && use_password?
                  if @new_resource.password.nil?
                    Chef::Log.fatal "#{@new_resource.task_name}: Can't specify a non-system user without a password!"
                  end
                end
            62470: |
              def validate_interactive_setting
                if @new_resource.interactive_enabled && @new_resource.password.nil?
                  Chef::Log.fatal "#{new_resource} did not provide a password when attempting to set interactive/non-interactive."
                end
              end
            64222: |2

                    unless hive
                      Chef::Application.fatal!("Unsupported registry hive '#{hive_name}'")
                    end
            74179: |
              Webhook Smoke
                when a new rule is created
              [2016-04-22T11:10:20+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 3s
              [2016-04-22T11:10:23+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 5s
              [2016-04-22T11:10:28+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 12s
              [2016-04-22T11:10:40+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 17s
              [2016-04-22T11:10:57+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 49s
              [2016-04-22T11:11:46+00:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"
                  it creates a webhook rule
                    has a successful code (FAILED - 1)
                    returns the rule location (FAILED - 2)
              [2016-04-22T11:11:46+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 4s
              [2016-04-22T11:11:50+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 6s
              [2016-04-22T11:11:56+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 16s
              [2016-04-22T11:12:12+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 32s
              [2016-04-22T11:12:44+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 37s
              [2016-04-22T11:13:21+00:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"

              An error occurred in an `after(:context)` hook.
            74230: |
              Randomized with seed 56348

              Build step 'Invoke XShell command' marked build as failure
              Performing Post build task...
              Match found for : : True
        steps:
          total: 20m42s
          before (setup time): 7m44s
          chef-client private-chef::default: 2m16s
          chef-client opscode-analytics::default: 3m31s
          after (cleanup time): 5m8s
      ubuntu-14.04:
        result: FAILURE
        failure_category: unknown
        failure_cause: unknown
        url: http://wilson.ci.chef.co/job/chef-analytics-test/architecture=x86_64,platform=ubuntu-14.04,project=opscode-analytics,role=tester/211/
        duration: 30m57s
        logs:
          consoleText:
            624: |
              [2016-04-22T11:01:07+00:00] INFO: GET /organizations/chef/nodes/ip-10-194-13-159.us-west-2.compute.internal
              [2016-04-22T11:01:07+00:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-13-159.us-west-2.compute.internal>
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:305:in `block in send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:336:in `block in retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `loop'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:334:in `retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:299:in `send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:144:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/http.rb:111:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:604:in `load'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:465:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/client.rb:267:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:267:in `run_with_graceful_exit_option'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:243:in `block in run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:226:in `run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application/client.rb:419:in `run_application'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/lib/chef/application.rb:58:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.13/bin/chef-client:26:in `<top (required)>'
              /opt/opscode/embedded/bin/chef-client:23:in `load'
              /opt/opscode/embedded/bin/chef-client:23:in `<main>'
              [2016-04-22T11:01:07+00:00] INFO:
              --- RESPONSE (404) ---
            4767: |2

                  if !connected
                    Chef::Log.fatal("HAProxy status socket never appeared properly!")
                    Chef::Log.fatal("See /var/log/opscode/haproxy/current for more information")
                    Kernel.exit! 1
                  end
            4818: |2

                  if !stable
                    Chef::Log.fatal("HAProxy still showing multiple active backends")
                    Chef::Log.fatal("Please check /var/log/opscode/haproxy/current locally for problems.")
                    Chef::Log.fatal("Please check your backend cluster's status for problems.")
                    Kernel.exit! 1
                  end
            4923: |2

                        if attempt == 120
                            raise 'ERROR: Timeout waiting for DRBD mount to return'
                        end
                        print '.'
            5614: |
              if File.exists?("/etc/opscode/chef-server.json") &&
                  !(File.exist?("/etc/opscode/private-chef.rb") || File.exist?("/etc/opscode/chef-server.rb"))
                Chef::Log.fatal("Configuration via /etc/opscode/chef-server.json is not supported. Please use /etc/opscode/chef-server.rb")
                exit!(1)
              else
            7214: |2
                  rescue Exception => e
                    message = <<-EOF
              ERROR:
              The /var/opt/opscode/upgrades/migration-level file is missing or corrupt!  Please read http://docs.chef.io/install_server_pre.html and correct this file before proceeding
            7536: |2
                      `echo 'SELECT * FROM pg_database;' | su - #{node['private_chef']['postgresql']['username']} -c '/opt/opscode/embedded/bin/psql -p #{node['private_chef']['postgresql']['port']} -U #{node['private_chef']['postgresql']['db_superuser']} postgres -t -A'`
                if $?.exitstatus != 0
                        Chef::Log.fatal("Could not connect to database, retrying in 10 seconds.")
                        sleep 10
                      else
            7545: |2

                    unless connectable
                      Chef::Log.fatal <<-ERR

              Could not connect to the postgresql database.
            10481: |2
                      elsif PrivateChef['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            10494: |2
                  def generate_hex_if_bootstrap(chars, ha_guard)
                    if ha_guard
                      Chef::Log.fatal("Attempt to create secrets on non-bootstrap node in an H/A topology, please copy /etc/opscode/* around instead.")
                      exit 44
                    end
            10883: |2
                  def assert_server_config(node_name)
                    unless PrivateChef["servers"].key?(node_name)
                      Chef::Log.fatal <<-EOF
              No server configuration found for "#{node_name}" in /etc/opscode/chef-server.rb.
              Server configuration exists for the following hostnames:
            10910: |2
                        gen_api_fqdn
                      else
                        Chef::Log.fatal("I do not understand topology #{PrivateChef.topology} - try standalone, manual, ha, or tier.")
                        exit 55
                      end
            11612: |2
                    # use of exit! prevents exit handlers from running, ensuring the last thing
                    # the customer sees is the descriptive error we've provided.
                    Chef::Log.fatal("\n\n#{LINE_SEP}\n#{e.message}#{LINE_SEP}")
                    exit! 128
                  end
            13724: |2

                if [ ! -d "$OCF_ROOT" ]; then
                  ha_log "ERROR: OCF_ROOT points to non-directory $OCF_ROOT."
                  exit $OCF_ERR_GENERIC
                fi
            13744: |2

                if [ -z "$OCF_RESOURCE_INSTANCE" ]; then
                  ha_log "ERROR: Need to tell us our resource instance name."
                  exit $OCF_ERR_ARGS
                fi
            13781: |2
                        loglevel=notice
                        case "${*}" in
                          *ERROR*)    loglevel=err;;
                          *WARN*)   loglevel=warning;;
                          *INFO*|info)  loglevel=info;;
            13880: |2
                      case "${__OCF_PRIO}" in
                        crit) __OCF_PRIO="CRIT";;
                        err)  __OCF_PRIO="ERROR";;
                        warn) __OCF_PRIO="WARNING";;
                        info) __OCF_PRIO="INFO";;
            18951: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            19022: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            19036: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            19225: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            30115: |2

                if node['fqdn'].nil?
                  Chef::Log.fatal("This node's fqdn is set to nil, so a read token cannot be issued!" \
                                  "Please change your fqdn settings.")
                end
            38569: |
              [2016-04-22T11:14:59+00:00] INFO: GET /organizations/chef/nodes/ip-10-194-13-159.us-west-2.compute.internal
              [2016-04-22T11:14:59+00:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-13-159.us-west-2.compute.internal>
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:277:in `block in send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:308:in `block in retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:306:in `retrying_http_errors'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:271:in `send_http_request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:143:in `request'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/http.rb:110:in `get'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:604:in `load'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:466:in `load_node'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/client.rb:266:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:270:in `block in fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:258:in `fork_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:223:in `block in run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:211:in `run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:445:in `block in interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `loop'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:435:in `interval_run_chef_client'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application/client.rb:424:in `run_application'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/lib/chef/application.rb:58:in `run'
              /opt/opscode-analytics/embedded/lib/ruby/gems/2.1.0/gems/chef-12.8.1/bin/chef-client:26:in `<top (required)>'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `load'
              /opt/opscode-analytics/embedded/bin/chef-client:22:in `<main>'
              [2016-04-22T11:14:59+00:00] INFO:
              --- RESPONSE (404) ---
            44507: |2
                      elsif Analytics['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            45280: |
              default['analytics']['alaska']['log_rotation']['file_maxbytes'] = 104857600
              default['analytics']['alaska']['log_rotation']['num_to_keep'] = 10
              default['analytics']['alaska']['log_level'] = 'WARN' # TRACE, DEBUG, INFO, WARN, ERROR, ALL or OFF
              default['analytics']['alaska']['mode'] = 'foreground'
              default['analytics']['alaska']['pipeline']['name'] = 'chef_analytics_pipeline'
            46625: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            46696: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            46710: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            46899: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            47375: |2
                <appender name="chef_analytics" class="ch.qos.logback.core.ConsoleAppender">
                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>DENY</onMatch>
                    <onMismatch>ACCEPT</onMismatch>
            47397: |2

                  <filter class="ch.qos.logback.classic.filter.LevelFilter">
                    <level>ERROR</level>
                    <onMatch>ACCEPT</onMatch>
                    <onMismatch>DENY</onMismatch>
            48674: |
              action :add do
                unless user_exists?(new_resource.user)
                  Chef::Application.fatal!('rabbitmq_user with action :add requires a non-nil/empty password.') if new_resource.password.nil? || new_resource.password.empty?

                  # To escape single quotes in a shell, you have to close the surrounding single quotes, add
            48703: |2

              action :set_permissions do
                Chef::Application.fatal!("rabbitmq_user action :set_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                perm_list = new_resource.permissions.split
            48718: |2

              action :clear_permissions do
                Chef::Application.fatal!("rabbitmq_user action :clear_permissions fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                if user_has_permissions?(new_resource.user, new_resource.vhost)
            48732: |2

              action :set_tags do
                Chef::Application.fatal!("rabbitmq_user action :set_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, new_resource.tag)
            48745: |2

              action :clear_tags do
                Chef::Application.fatal!("rabbitmq_user action :clear_tags fails with non-existant '#{new_resource.user}' user.") unless user_exists?(new_resource.user)

                unless user_has_tag?(new_resource.user, '"\[\]"')
            51910: |
              when 'rhel'
                if node['platform_version'].to_i <= 5
                  Chef::Log.fatal('Erlang Solutions pacakge repositories are not available for EL5')
                  raise
                end
            53150: |
              --- RESPONSE (200) ---
              I, [2014-10-14T14:05:34.449954 #11620]  INFO -- Kitchen: -----> Starting Kitchen (v1.2.1)
              E, [2014-10-14T14:05:34.450470 #11620] ERROR -- Kitchen: ------Exception-------
              E, [2014-10-14T14:05:34.450533 #11620] ERROR -- Kitchen: Class: Kitchen::UserError
              E, [2014-10-14T14:05:34.450587 #11620] ERROR -- Kitchen: Message: Kitchen YAML file /Users/joe/code/packagecloud/templates/.kitchen.yml does not exist.
              E, [2014-10-14T14:05:34.450645 #11620] ERROR -- Kitchen: ------Backtrace-------
              E, [2014-10-14T14:05:34.450685 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/loader/yaml.rb:74:in `read'
              E, [2014-10-14T14:05:34.450711 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:78:in `data'
              E, [2014-10-14T14:05:34.450735 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:66:in `suites'
              E, [2014-10-14T14:05:34.450829 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:90:in `filter_instances'
              E, [2014-10-14T14:05:34.450853 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:72:in `build_instances'
              E, [2014-10-14T14:05:34.450875 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/config.rb:52:in `instances'
              E, [2014-10-14T14:05:34.450897 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:64:in `get_filtered_instances'
              E, [2014-10-14T14:05:34.450919 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command.rb:85:in `parse_subcommand'
              E, [2014-10-14T14:05:34.450940 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:37:in `block in call'
              E, [2014-10-14T14:05:34.450962 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/2.1.0/benchmark.rb:279:in `measure'
              E, [2014-10-14T14:05:34.450984 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/command/action.rb:36:in `call'
              E, [2014-10-14T14:05:34.451006 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:47:in `perform'
              E, [2014-10-14T14:05:34.451028 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:118:in `block (2 levels) in <class:CLI>'
              E, [2014-10-14T14:05:34.451050 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'
              E, [2014-10-14T14:05:34.451072 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'
              E, [2014-10-14T14:05:34.451094 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/cli.rb:233:in `invoke_task'
              E, [2014-10-14T14:05:34.451116 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'
              E, [2014-10-14T14:05:34.451137 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'
              E, [2014-10-14T14:05:34.451159 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `block in <top (required)>'
              E, [2014-10-14T14:05:34.451181 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/lib/kitchen/errors.rb:81:in `with_friendly_errors'
              E, [2014-10-14T14:05:34.451203 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/test-kitchen-1.2.1/bin/kitchen:13:in `<top (required)>'
              E, [2014-10-14T14:05:34.451240 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `load'
              E, [2014-10-14T14:05:34.451266 #11620] ERROR -- Kitchen: /Users/joe/.rbenv/versions/2.1.0/bin/kitchen:23:in `<main>'
              E, [2014-10-14T14:05:34.451333 #11620] ERROR -- Kitchen: ----------------------
              --- END RESPONSE ---
              [2016-04-22T11:15:12+00:00] INFO: GET /organizations/chef/file_store/repo/cookbooks/packagecloud/Gemfile
            61622: |2

              def check_for_errors(stderr)
                Chef::Log.fatal(stderr) unless stderr.empty?
              end
            61752: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot end"
                end
            61767: |2
                  end
                else
                  Chef::Log.fatal "#{@new_resource} task doesn't exist - nothing to do"
                  raise Errno::ENOENT, "#{@new_resource}: task does not exist, cannot enable"
                end
            61890: |2
                if @new_resource.user && use_password?
                  if @new_resource.password.nil?
                    Chef::Log.fatal "#{@new_resource.task_name}: Can't specify a non-system user without a password!"
                  end
                end
            61897: |
              def validate_interactive_setting
                if @new_resource.interactive_enabled && @new_resource.password.nil?
                  Chef::Log.fatal "#{new_resource} did not provide a password when attempting to set interactive/non-interactive."
                end
              end
            62740: |2

                    unless hive
                      Chef::Application.fatal!("Unsupported registry hive '#{hive_name}'")
                    end
            74312: |
              Webhook Smoke
                when a new rule is created
              [2016-04-22T11:20:22+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 3s
              [2016-04-22T11:20:25+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 7s
              [2016-04-22T11:20:32+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 11s
              [2016-04-22T11:20:44+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 28s
              [2016-04-22T11:21:12+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 40s
              [2016-04-22T11:21:52+00:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"
                  it creates a webhook rule
                    has a successful code (FAILED - 1)
                    returns the rule location (FAILED - 2)
              [2016-04-22T11:21:52+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 1/5 in 4s
              [2016-04-22T11:21:56+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 2/5 in 6s
              [2016-04-22T11:22:02+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 3/5 in 16s
              [2016-04-22T11:22:18+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 4/5 in 31s
              [2016-04-22T11:22:49+00:00] ERROR: Server returned error 502 for https://localhost/id/oauth/token?grant_type=password, retrying 5/5 in 45s
              [2016-04-22T11:23:34+00:00] ERROR: Exception caught on getting token: 502 "Bad Gateway"

              An error occurred in an `after(:context)` hook.
            74363: |
              Randomized with seed 29815

              Build step 'Invoke XShell command' marked build as failure
              Performing Post build task...
              Match found for : : True
        steps:
          total: 30m57s
          before (setup time): 8m18s
          chef-client private-chef::default: 11m37s
          chef-client opscode-analytics::default: 3m10s
          after (cleanup time): 5m42s
  chef-analytics-build:
    result: SUCCESS
    url: http://wilson.ci.chef.co/job/chef-analytics-build/269/
    duration: 1h42m34s
    runs:
      el-5:
        result: SUCCESS
        url: http://wilson.ci.chef.co/job/chef-analytics-build/architecture=x86_64,platform=el-5,project=opscode-analytics,role=builder/269/
        duration: 1h41m57s
      el-6:
        result: SUCCESS
        url: http://wilson.ci.chef.co/job/chef-analytics-build/architecture=x86_64,platform=el-6,project=opscode-analytics,role=builder/269/
        duration: 1h22m35s
      el-7:
        result: SUCCESS
        url: http://wilson.ci.chef.co/job/chef-analytics-build/architecture=x86_64,platform=el-7,project=opscode-analytics,role=builder/269/
        duration: 1h10m53s
      ubuntu-10.04:
        result: SUCCESS
        url: http://wilson.ci.chef.co/job/chef-analytics-build/architecture=x86_64,platform=ubuntu-10.04,project=opscode-analytics,role=builder/269/
        duration: 1h10m2s
      ubuntu-12.04:
        result: SUCCESS
        url: http://wilson.ci.chef.co/job/chef-analytics-build/architecture=x86_64,platform=ubuntu-12.04,project=opscode-analytics,role=builder/269/
        duration: 1h8m40s
  chef-analytics-trigger-nightly-master:
    result: SUCCESS
    url: http://wilson.ci.chef.co/job/chef-analytics-trigger-nightly-master/136/
    duration: 48s
