---
result: FAILURE
url: http://wilson.ci.chef.co/job/chef-server-12-trigger-ad_hoc/147/
failure_category: unknown
failure_cause: 'unknown: all: chef-server-12-test'
timestamp: 2016-04-26 17:50:39 UTC
duration: 1h58m41s
triggered_by: tylercloke
active_duration: 1h58m24s
parameters:
  GIT_REF: pwm/make_migration_30_idempotent
  EXPIRE_CACHE: false
change:
  git_remote: git@github.com:chef/chef-server.git
  git_commit: e8c86467e52ce600d789ca3afbc450b5823d0073
  project: chef-server
  version: 12.5.0+20160426175109
stages:
  chef-server-12-test:
    result: FAILURE
    failure_category: unknown
    failure_cause: 'unknown: all'
    url: http://wilson.ci.chef.co/job/chef-server-12-test/205/
    duration: 1h23m21s
    runs:
      el-5:
        result: FAILURE
        failure_category: unknown
        failure_cause: unknown
        url: http://wilson.ci.chef.co/job/chef-server-12-test/architecture=x86_64,platform=el-5,project=chef-server,role=tester/205/
        duration: 1h23m21s
        logs:
          consoleText:
            389: |
              [2016-04-26T14:31:18-04:00] INFO: GET /organizations/chef/nodes/ip-10-194-15-112.us-west-2.compute.internal
              [2016-04-26T14:31:18-04:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-15-112.us-west-2.compute.internal>
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:305:in `block in send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:336:in `block in retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:334:in `loop'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:334:in `retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:299:in `send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:144:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:111:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/node.rb:604:in `load'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/client.rb:465:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/client.rb:267:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:267:in `run_with_graceful_exit_option'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:243:in `block in run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:226:in `run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application/client.rb:419:in `run_application'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:58:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/bin/chef-client:26:in `<top (required)>'
              /opt/opscode/embedded/bin/chef-client:23:in `load'
              /opt/opscode/embedded/bin/chef-client:23:in `<main>'
              [2016-04-26T14:31:18-04:00] INFO:
              --- RESPONSE (404) ---
            4005: |2

                        if attempt == 120
                            raise 'ERROR: Timeout waiting for DRBD mount to return'
                        end
                        print '.'
            4476: |2
                  rescue Exception => e
                    message = <<-EOF
              ERROR:
              The /var/opt/opscode/upgrades/migration-level file is missing or corrupt!  Please read http://docs.getchef.com/install_server_pre.html and correct this file before proceeding
            4813: |
              if File.exists?("/etc/opscode/chef-server.json") &&
                  !(File.exist?("/etc/opscode/private-chef.rb") || File.exist?("/etc/opscode/chef-server.rb"))
                Chef::Log.fatal("Configuration via /etc/opscode/chef-server.json is not supported. Please use /etc/opscode/chef-server.rb")
                exit!(1)
              else
            7672: |2
                    # use of exit! prevents exit handlers from running, ensuring the last thing
                    # the customer sees is the descriptive error we've provided.
                    Chef::Log.fatal("\n\n#{LINE_SEP}\n#{e.message}#{LINE_SEP}")
                    exit! 128
                  end
            9864: |2
                      `echo 'SELECT * FROM pg_database;' | su - #{node['private_chef']['postgresql']['username']} -c '/opt/opscode/embedded/bin/psql -p #{node['private_chef']['postgresql']['port']} -U #{node['private_chef']['postgresql']['db_superuser']} postgres -t -A'`
                if $?.exitstatus != 0
                        Chef::Log.fatal("Could not connect to database, retrying in 10 seconds.")
                        sleep 10
                      else
            9873: |2

                    unless connectable
                      Chef::Log.fatal <<-ERR

              Could not connect to the postgresql database.
            10318: |2
                      elsif PrivateChef['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            10331: |2
                  def generate_hex_if_bootstrap(chars, ha_guard)
                    if ha_guard
                      Chef::Log.fatal("Attempt to create secrets on non-bootstrap node in an H/A topology, please copy /etc/opscode/* around instead.")
                      exit 44
                    end
            10715: |2
                  def assert_server_config(node_name)
                    unless PrivateChef["servers"].key?(node_name)
                      Chef::Log.fatal <<-EOF
              No server configuration found for "#{node_name}" in /etc/opscode/chef-server.rb.
              Server configuration exists for the following hostnames:
            10742: |2
                        gen_api_fqdn
                      else
                        Chef::Log.fatal("I do not understand topology #{PrivateChef.topology} - try standalone, manual, ha, or tier.")
                        exit 55
                      end
            18564: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            18635: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            18649: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            18838: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            19548: |2

                if [ ! -d "$OCF_ROOT" ]; then
                  ha_log "ERROR: OCF_ROOT points to non-directory $OCF_ROOT."
                  exit $OCF_ERR_GENERIC
                fi
            19568: |2

                if [ -z "$OCF_RESOURCE_INSTANCE" ]; then
                  ha_log "ERROR: Need to tell us our resource instance name."
                  exit $OCF_ERR_ARGS
                fi
            19605: |2
                        loglevel=notice
                        case "${*}" in
                          *ERROR*)    loglevel=err;;
                          *WARN*)   loglevel=warning;;
                          *INFO*|info)  loglevel=info;;
            19704: |2
                      case "${__OCF_PRIO}" in
                        crit) __OCF_PRIO="CRIT";;
                        err)  __OCF_PRIO="ERROR";;
                        warn) __OCF_PRIO="WARNING";;
                        info) __OCF_PRIO="INFO";;
            28598: |2

                if node['fqdn'].nil?
                  Chef::Log.fatal("This node's fqdn is set to nil, so a read token cannot be issued!" \
                                  "Please change your fqdn settings.")
                end
            50331: |
              rspec ./spec/api/search/word_break_spec.rb[1:1:60:7] # Search API endpoint word break handling when searching for attribute an attribute key containing the special character '\' with a wildcard in attribute key after the special char with prefixing match, should find the node

              Build step 'Invoke XShell command' marked build as failure
              Performing Post build task...
              Match found for : : True
        steps:
          total: 1h23m21s
          before (setup time): 5m14s
          chef-client private-chef::default: 4m41s
          pedant: 1h10m9s
          after (cleanup time): 1m5s
      el-6:
        result: FAILURE
        failure_category: unknown
        failure_cause: unknown
        url: http://wilson.ci.chef.co/job/chef-server-12-test/architecture=x86_64,platform=el-6,project=chef-server,role=tester/205/
        duration: 1h7m40s
        logs:
          consoleText:
            391: |
              [2016-04-26T14:25:11-04:00] INFO: GET /organizations/chef/nodes/ip-10-194-9-233.us-west-2.compute.internal
              [2016-04-26T14:25:11-04:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-9-233.us-west-2.compute.internal>
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:305:in `block in send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:336:in `block in retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:334:in `loop'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:334:in `retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:299:in `send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:144:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:111:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/node.rb:604:in `load'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/client.rb:465:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/client.rb:267:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:267:in `run_with_graceful_exit_option'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:243:in `block in run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:226:in `run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application/client.rb:419:in `run_application'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:58:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/bin/chef-client:26:in `<top (required)>'
              /opt/opscode/embedded/bin/chef-client:23:in `load'
              /opt/opscode/embedded/bin/chef-client:23:in `<main>'
              [2016-04-26T14:25:11-04:00] INFO:
              --- RESPONSE (404) ---
            5051: |2
                  rescue Exception => e
                    message = <<-EOF
              ERROR:
              The /var/opt/opscode/upgrades/migration-level file is missing or corrupt!  Please read http://docs.getchef.com/install_server_pre.html and correct this file before proceeding
            5240: |2

                        if attempt == 120
                            raise 'ERROR: Timeout waiting for DRBD mount to return'
                        end
                        print '.'
            5566: |
              if File.exists?("/etc/opscode/chef-server.json") &&
                  !(File.exist?("/etc/opscode/private-chef.rb") || File.exist?("/etc/opscode/chef-server.rb"))
                Chef::Log.fatal("Configuration via /etc/opscode/chef-server.json is not supported. Please use /etc/opscode/chef-server.rb")
                exit!(1)
              else
            6820: |2
                      `echo 'SELECT * FROM pg_database;' | su - #{node['private_chef']['postgresql']['username']} -c '/opt/opscode/embedded/bin/psql -p #{node['private_chef']['postgresql']['port']} -U #{node['private_chef']['postgresql']['db_superuser']} postgres -t -A'`
                if $?.exitstatus != 0
                        Chef::Log.fatal("Could not connect to database, retrying in 10 seconds.")
                        sleep 10
                      else
            6829: |2

                    unless connectable
                      Chef::Log.fatal <<-ERR

              Could not connect to the postgresql database.
            7997: |2
                      elsif PrivateChef['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            8010: |2
                  def generate_hex_if_bootstrap(chars, ha_guard)
                    if ha_guard
                      Chef::Log.fatal("Attempt to create secrets on non-bootstrap node in an H/A topology, please copy /etc/opscode/* around instead.")
                      exit 44
                    end
            8394: |2
                  def assert_server_config(node_name)
                    unless PrivateChef["servers"].key?(node_name)
                      Chef::Log.fatal <<-EOF
              No server configuration found for "#{node_name}" in /etc/opscode/chef-server.rb.
              Server configuration exists for the following hostnames:
            8421: |2
                        gen_api_fqdn
                      else
                        Chef::Log.fatal("I do not understand topology #{PrivateChef.topology} - try standalone, manual, ha, or tier.")
                        exit 55
                      end
            8923: |2
                    # use of exit! prevents exit handlers from running, ensuring the last thing
                    # the customer sees is the descriptive error we've provided.
                    Chef::Log.fatal("\n\n#{LINE_SEP}\n#{e.message}#{LINE_SEP}")
                    exit! 128
                  end
            17369: |2

                if [ ! -d "$OCF_ROOT" ]; then
                  ha_log "ERROR: OCF_ROOT points to non-directory $OCF_ROOT."
                  exit $OCF_ERR_GENERIC
                fi
            17389: |2

                if [ -z "$OCF_RESOURCE_INSTANCE" ]; then
                  ha_log "ERROR: Need to tell us our resource instance name."
                  exit $OCF_ERR_ARGS
                fi
            17426: |2
                        loglevel=notice
                        case "${*}" in
                          *ERROR*)    loglevel=err;;
                          *WARN*)   loglevel=warning;;
                          *INFO*|info)  loglevel=info;;
            17525: |2
                      case "${__OCF_PRIO}" in
                        crit) __OCF_PRIO="CRIT";;
                        err)  __OCF_PRIO="ERROR";;
                        warn) __OCF_PRIO="WARNING";;
                        info) __OCF_PRIO="INFO";;
            19992: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            20063: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            20077: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            20266: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            29918: |2

                if node['fqdn'].nil?
                  Chef::Log.fatal("This node's fqdn is set to nil, so a read token cannot be issued!" \
                                  "Please change your fqdn settings.")
                end
            51250: |
              rspec ./spec/api/search/word_break_spec.rb[1:1:60:7] # Search API endpoint word break handling when searching for attribute an attribute key containing the special character '\' with a wildcard in attribute key after the special char with prefixing match, should find the node

              Build step 'Invoke XShell command' marked build as failure
              Performing Post build task...
              Match found for : : True
        steps:
          total: 1h7m40s
          before (setup time): "-52s"
          chef-client private-chef::default: 8m13s
          pedant: 54m5s
          after (cleanup time): 4m1s
      el-7:
        result: FAILURE
        failure_category: unknown
        failure_cause: unknown
        url: http://wilson.ci.chef.co/job/chef-server-12-test/architecture=x86_64,platform=el-7,project=chef-server,role=tester/205/
        duration: 42m41s
        logs:
          consoleText:
            55694: |
              warning: file /opt/opscode/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/int1-i.ri: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/file-i.ri: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/fatal%3f-i.ri: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/error%3f-i.ri: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/ruby/gems/2.1.0/doc/nokogiri-1.6.7.2/ri/Nokogiri/XML/SyntaxError/domain-i.ri: remove failed: No such file or directory
            62905: |
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/File/.packlist: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/File: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/Fatal/.packlist: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/Fatal: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/Exception/.packlist: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/auto/Test/Exception: remove failed: No such file or directory
            63851: |
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-File-1.44/MYMETA.json: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-File-1.44: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Fatal-0.014/install.json: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Fatal-0.014/MYMETA.json: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Fatal-0.014: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Exception-0.43/install.json: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/x86_64-linux-thread-multi/.meta/Test-Exception-0.43/MYMETA.json: remove failed: No such file or directory
            64233: |
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/Test/File.pm: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/Test/File: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/Test/Fatal.pm: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/Test/Exception.pm: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/site_perl/5.18.1/Test/Dir/Base.pm: remove failed: No such file or directory
            68061: |
              warning: file /opt/opscode/embedded/lib/perl5/5.18.1/File/Basename.pm: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/5.18.1/File: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/5.18.1/Fatal.pm: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/5.18.1/ExtUtils/xsubpp: remove failed: No such file or directory
              warning: file /opt/opscode/embedded/lib/perl5/5.18.1/ExtUtils/typemap: remove failed: No such file or directory
            77518: |
              [2016-04-26T14:29:46-04:00] INFO: GET /organizations/chef/nodes/ip-10-194-10-226.us-west-2.compute.internal
              [2016-04-26T14:29:46-04:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-10-226.us-west-2.compute.internal>
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:305:in `block in send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:336:in `block in retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:334:in `loop'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:334:in `retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:299:in `send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:144:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:111:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/node.rb:604:in `load'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/client.rb:465:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/client.rb:267:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:267:in `run_with_graceful_exit_option'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:243:in `block in run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:226:in `run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application/client.rb:419:in `run_application'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:58:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/bin/chef-client:26:in `<top (required)>'
              /opt/opscode/embedded/bin/chef-client:23:in `load'
              /opt/opscode/embedded/bin/chef-client:23:in `<main>'
              [2016-04-26T14:29:46-04:00] INFO:
              --- RESPONSE (404) ---
            80982: |2

                        if attempt == 120
                            raise 'ERROR: Timeout waiting for DRBD mount to return'
                        end
                        print '.'
            81639: |
              if File.exists?("/etc/opscode/chef-server.json") &&
                  !(File.exist?("/etc/opscode/private-chef.rb") || File.exist?("/etc/opscode/chef-server.rb"))
                Chef::Log.fatal("Configuration via /etc/opscode/chef-server.json is not supported. Please use /etc/opscode/chef-server.rb")
                exit!(1)
              else
            83881: |2
                      `echo 'SELECT * FROM pg_database;' | su - #{node['private_chef']['postgresql']['username']} -c '/opt/opscode/embedded/bin/psql -p #{node['private_chef']['postgresql']['port']} -U #{node['private_chef']['postgresql']['db_superuser']} postgres -t -A'`
                if $?.exitstatus != 0
                        Chef::Log.fatal("Could not connect to database, retrying in 10 seconds.")
                        sleep 10
                      else
            83890: |2

                    unless connectable
                      Chef::Log.fatal <<-ERR

              Could not connect to the postgresql database.
            83979: |2
                  rescue Exception => e
                    message = <<-EOF
              ERROR:
              The /var/opt/opscode/upgrades/migration-level file is missing or corrupt!  Please read http://docs.getchef.com/install_server_pre.html and correct this file before proceeding
            85313: |2
                    # use of exit! prevents exit handlers from running, ensuring the last thing
                    # the customer sees is the descriptive error we've provided.
                    Chef::Log.fatal("\n\n#{LINE_SEP}\n#{e.message}#{LINE_SEP}")
                    exit! 128
                  end
            86686: |2
                      elsif PrivateChef['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            86699: |2
                  def generate_hex_if_bootstrap(chars, ha_guard)
                    if ha_guard
                      Chef::Log.fatal("Attempt to create secrets on non-bootstrap node in an H/A topology, please copy /etc/opscode/* around instead.")
                      exit 44
                    end
            87083: |2
                  def assert_server_config(node_name)
                    unless PrivateChef["servers"].key?(node_name)
                      Chef::Log.fatal <<-EOF
              No server configuration found for "#{node_name}" in /etc/opscode/chef-server.rb.
              Server configuration exists for the following hostnames:
            87110: |2
                        gen_api_fqdn
                      else
                        Chef::Log.fatal("I do not understand topology #{PrivateChef.topology} - try standalone, manual, ha, or tier.")
                        exit 55
                      end
            92377: |2

                if [ ! -d "$OCF_ROOT" ]; then
                  ha_log "ERROR: OCF_ROOT points to non-directory $OCF_ROOT."
                  exit $OCF_ERR_GENERIC
                fi
            92397: |2

                if [ -z "$OCF_RESOURCE_INSTANCE" ]; then
                  ha_log "ERROR: Need to tell us our resource instance name."
                  exit $OCF_ERR_ARGS
                fi
            92434: |2
                        loglevel=notice
                        case "${*}" in
                          *ERROR*)    loglevel=err;;
                          *WARN*)   loglevel=warning;;
                          *INFO*|info)  loglevel=info;;
            92533: |2
                      case "${__OCF_PRIO}" in
                        crit) __OCF_PRIO="CRIT";;
                        err)  __OCF_PRIO="ERROR";;
                        warn) __OCF_PRIO="WARNING";;
                        info) __OCF_PRIO="INFO";;
            93598: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            93669: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            93683: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            93872: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            106661: |2

                if node['fqdn'].nil?
                  Chef::Log.fatal("This node's fqdn is set to nil, so a read token cannot be issued!" \
                                  "Please change your fqdn settings.")
                end
            128083: |
              rspec ./spec/api/search/word_break_spec.rb[1:1:60:7] # Search API endpoint word break handling when searching for attribute an attribute key containing the special character '\' with a wildcard in attribute key after the special char with prefixing match, should find the node

              Build step 'Invoke XShell command' marked build as failure
              Performing Post build task...
              Match found for : : True
        steps:
          total: 42m41s
          before (setup time): 3m43s
          chef-client private-chef::default: 3m26s
          pedant: 32m53s
          after (cleanup time): 31s
      ubuntu-10.04:
        result: FAILURE
        failure_category: unknown
        failure_cause: unknown
        url: http://wilson.ci.chef.co/job/chef-server-12-test/architecture=x86_64,platform=ubuntu-10.04,project=chef-server,role=tester/205/
        duration: 58m29s
        logs:
          consoleText:
            408: |
              [2016-04-26T18:28:38+00:00] INFO: GET /organizations/chef/nodes/ip-10-194-13-26.us-west-2.compute.internal
              [2016-04-26T18:28:38+00:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-13-26.us-west-2.compute.internal>
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:305:in `block in send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:336:in `block in retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:334:in `loop'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:334:in `retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:299:in `send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:144:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:111:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/node.rb:604:in `load'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/client.rb:465:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/client.rb:267:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:267:in `run_with_graceful_exit_option'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:243:in `block in run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:226:in `run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application/client.rb:419:in `run_application'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:58:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/bin/chef-client:26:in `<top (required)>'
              /opt/opscode/embedded/bin/chef-client:23:in `load'
              /opt/opscode/embedded/bin/chef-client:23:in `<main>'
              [2016-04-26T18:28:38+00:00] INFO:
              --- RESPONSE (404) ---
            4115: |2

                        if attempt == 120
                            raise 'ERROR: Timeout waiting for DRBD mount to return'
                        end
                        print '.'
            4680: |
              if File.exists?("/etc/opscode/chef-server.json") &&
                  !(File.exist?("/etc/opscode/private-chef.rb") || File.exist?("/etc/opscode/chef-server.rb"))
                Chef::Log.fatal("Configuration via /etc/opscode/chef-server.json is not supported. Please use /etc/opscode/chef-server.rb")
                exit!(1)
              else
            6139: |2
                  rescue Exception => e
                    message = <<-EOF
              ERROR:
              The /var/opt/opscode/upgrades/migration-level file is missing or corrupt!  Please read http://docs.getchef.com/install_server_pre.html and correct this file before proceeding
            6981: |2
                      `echo 'SELECT * FROM pg_database;' | su - #{node['private_chef']['postgresql']['username']} -c '/opt/opscode/embedded/bin/psql -p #{node['private_chef']['postgresql']['port']} -U #{node['private_chef']['postgresql']['db_superuser']} postgres -t -A'`
                if $?.exitstatus != 0
                        Chef::Log.fatal("Could not connect to database, retrying in 10 seconds.")
                        sleep 10
                      else
            6990: |2

                    unless connectable
                      Chef::Log.fatal <<-ERR

              Could not connect to the postgresql database.
            8019: |2
                    # use of exit! prevents exit handlers from running, ensuring the last thing
                    # the customer sees is the descriptive error we've provided.
                    Chef::Log.fatal("\n\n#{LINE_SEP}\n#{e.message}#{LINE_SEP}")
                    exit! 128
                  end
            9820: |2
                      elsif PrivateChef['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            9833: |2
                  def generate_hex_if_bootstrap(chars, ha_guard)
                    if ha_guard
                      Chef::Log.fatal("Attempt to create secrets on non-bootstrap node in an H/A topology, please copy /etc/opscode/* around instead.")
                      exit 44
                    end
            10217: |2
                  def assert_server_config(node_name)
                    unless PrivateChef["servers"].key?(node_name)
                      Chef::Log.fatal <<-EOF
              No server configuration found for "#{node_name}" in /etc/opscode/chef-server.rb.
              Server configuration exists for the following hostnames:
            10244: |2
                        gen_api_fqdn
                      else
                        Chef::Log.fatal("I do not understand topology #{PrivateChef.topology} - try standalone, manual, ha, or tier.")
                        exit 55
                      end
            15389: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            15460: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            15474: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            15663: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            16682: |2

                if [ ! -d "$OCF_ROOT" ]; then
                  ha_log "ERROR: OCF_ROOT points to non-directory $OCF_ROOT."
                  exit $OCF_ERR_GENERIC
                fi
            16702: |2

                if [ -z "$OCF_RESOURCE_INSTANCE" ]; then
                  ha_log "ERROR: Need to tell us our resource instance name."
                  exit $OCF_ERR_ARGS
                fi
            16739: |2
                        loglevel=notice
                        case "${*}" in
                          *ERROR*)    loglevel=err;;
                          *WARN*)   loglevel=warning;;
                          *INFO*|info)  loglevel=info;;
            16838: |2
                      case "${__OCF_PRIO}" in
                        crit) __OCF_PRIO="CRIT";;
                        err)  __OCF_PRIO="ERROR";;
                        warn) __OCF_PRIO="WARNING";;
                        info) __OCF_PRIO="INFO";;
            29506: |2

                if node['fqdn'].nil?
                  Chef::Log.fatal("This node's fqdn is set to nil, so a read token cannot be issued!" \
                                  "Please change your fqdn settings.")
                end
            50358: |
              rspec ./spec/api/search/word_break_spec.rb[1:1:60:7] # Search API endpoint word break handling when searching for attribute an attribute key containing the special character '\' with a wildcard in attribute key after the special char with prefixing match, should find the node

              Build step 'Invoke XShell command' marked build as failure
              Performing Post build task...
              Match found for : : True
        steps:
          total: 58m29s
          before (setup time): 2m35s
          chef-client private-chef::default: 4m30s
          pedant: 48m43s
          after (cleanup time): 30s
      ubuntu-12.04:
        result: FAILURE
        failure_category: unknown
        failure_cause: unknown
        url: http://wilson.ci.chef.co/job/chef-server-12-test/architecture=x86_64,platform=ubuntu-12.04,project=chef-server,role=tester/205/
        duration: 50m27s
        logs:
          consoleText:
            407: |
              [2016-04-26T18:29:11+00:00] INFO: GET /organizations/chef/nodes/ip-10-194-11-179.us-west-2.compute.internal
              [2016-04-26T18:29:11+00:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-11-179.us-west-2.compute.internal>
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:305:in `block in send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:336:in `block in retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:334:in `loop'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:334:in `retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:299:in `send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:144:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:111:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/node.rb:604:in `load'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/client.rb:465:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/client.rb:267:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:267:in `run_with_graceful_exit_option'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:243:in `block in run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:226:in `run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application/client.rb:419:in `run_application'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:58:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/bin/chef-client:26:in `<top (required)>'
              /opt/opscode/embedded/bin/chef-client:23:in `load'
              /opt/opscode/embedded/bin/chef-client:23:in `<main>'
              [2016-04-26T18:29:11+00:00] INFO:
              --- RESPONSE (404) ---
            4149: |2

                        if attempt == 120
                            raise 'ERROR: Timeout waiting for DRBD mount to return'
                        end
                        print '.'
            5011: |2
                  rescue Exception => e
                    message = <<-EOF
              ERROR:
              The /var/opt/opscode/upgrades/migration-level file is missing or corrupt!  Please read http://docs.getchef.com/install_server_pre.html and correct this file before proceeding
            5172: |2
                      `echo 'SELECT * FROM pg_database;' | su - #{node['private_chef']['postgresql']['username']} -c '/opt/opscode/embedded/bin/psql -p #{node['private_chef']['postgresql']['port']} -U #{node['private_chef']['postgresql']['db_superuser']} postgres -t -A'`
                if $?.exitstatus != 0
                        Chef::Log.fatal("Could not connect to database, retrying in 10 seconds.")
                        sleep 10
                      else
            5181: |2

                    unless connectable
                      Chef::Log.fatal <<-ERR

              Could not connect to the postgresql database.
            6484: |
              if File.exists?("/etc/opscode/chef-server.json") &&
                  !(File.exist?("/etc/opscode/private-chef.rb") || File.exist?("/etc/opscode/chef-server.rb"))
                Chef::Log.fatal("Configuration via /etc/opscode/chef-server.json is not supported. Please use /etc/opscode/chef-server.rb")
                exit!(1)
              else
            7633: |2
                      elsif PrivateChef['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            7646: |2
                  def generate_hex_if_bootstrap(chars, ha_guard)
                    if ha_guard
                      Chef::Log.fatal("Attempt to create secrets on non-bootstrap node in an H/A topology, please copy /etc/opscode/* around instead.")
                      exit 44
                    end
            8030: |2
                  def assert_server_config(node_name)
                    unless PrivateChef["servers"].key?(node_name)
                      Chef::Log.fatal <<-EOF
              No server configuration found for "#{node_name}" in /etc/opscode/chef-server.rb.
              Server configuration exists for the following hostnames:
            8057: |2
                        gen_api_fqdn
                      else
                        Chef::Log.fatal("I do not understand topology #{PrivateChef.topology} - try standalone, manual, ha, or tier.")
                        exit 55
                      end
            8309: |2
                    # use of exit! prevents exit handlers from running, ensuring the last thing
                    # the customer sees is the descriptive error we've provided.
                    Chef::Log.fatal("\n\n#{LINE_SEP}\n#{e.message}#{LINE_SEP}")
                    exit! 128
                  end
            18082: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            18153: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            18167: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            18356: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            20042: |2

                if [ ! -d "$OCF_ROOT" ]; then
                  ha_log "ERROR: OCF_ROOT points to non-directory $OCF_ROOT."
                  exit $OCF_ERR_GENERIC
                fi
            20062: |2

                if [ -z "$OCF_RESOURCE_INSTANCE" ]; then
                  ha_log "ERROR: Need to tell us our resource instance name."
                  exit $OCF_ERR_ARGS
                fi
            20099: |2
                        loglevel=notice
                        case "${*}" in
                          *ERROR*)    loglevel=err;;
                          *WARN*)   loglevel=warning;;
                          *INFO*|info)  loglevel=info;;
            20198: |2
                      case "${__OCF_PRIO}" in
                        crit) __OCF_PRIO="CRIT";;
                        err)  __OCF_PRIO="ERROR";;
                        warn) __OCF_PRIO="WARNING";;
                        info) __OCF_PRIO="INFO";;
            29501: |2

                if node['fqdn'].nil?
                  Chef::Log.fatal("This node's fqdn is set to nil, so a read token cannot be issued!" \
                                  "Please change your fqdn settings.")
                end
            50650: |
              rspec ./spec/api/search/word_break_spec.rb[1:1:60:7] # Search API endpoint word break handling when searching for attribute an attribute key containing the special character '\' with a wildcard in attribute key after the special char with prefixing match, should find the node

              Build step 'Invoke XShell command' marked build as failure
              Performing Post build task...
              Match found for : : True
        steps:
          total: 50m27s
          before (setup time): 3m9s
          chef-client private-chef::default: 3m6s
          pedant: 41m34s
          after (cleanup time): 30s
      ubuntu-14.04:
        result: FAILURE
        failure_category: unknown
        failure_cause: unknown
        url: http://wilson.ci.chef.co/job/chef-server-12-test/architecture=x86_64,platform=ubuntu-14.04,project=chef-server,role=tester/205/
        duration: 55m12s
        logs:
          consoleText:
            436: |
              [2016-04-26T18:28:38+00:00] INFO: GET /organizations/chef/nodes/ip-10-194-13-226.us-west-2.compute.internal
              [2016-04-26T18:28:38+00:00] INFO: #<ChefZero::RestErrorResponse: 404: Object not found: chefzero://localhost:8889/nodes/ip-10-194-13-226.us-west-2.compute.internal>
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:91:in `rescue in get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:83:in `get_data'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/endpoints/rest_object_endpoint.rb:18:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_base.rb:62:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/rest_router.rb:24:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:664:in `block in app'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `call'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/server.rb:336:in `handle_socketless_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:87:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-zero-4.6.1/lib/chef_zero/socketless_server_map.rb:33:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http/socketless_chef_zero_client.rb:154:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:305:in `block in send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:336:in `block in retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:334:in `loop'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:334:in `retrying_http_errors'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:299:in `send_http_request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:144:in `request'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/http.rb:111:in `get'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/node.rb:604:in `load'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/node.rb:588:in `find_or_create'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/policy_builder/dynamic.rb:72:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/client.rb:465:in `load_node'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/client.rb:267:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:267:in `run_with_graceful_exit_option'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:243:in `block in run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/local_mode.rb:44:in `with_server_connectivity'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:226:in `run_chef_client'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application/client.rb:419:in `run_application'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/lib/chef/application.rb:58:in `run'
              /opt/opscode/embedded/lib/ruby/gems/2.1.0/gems/chef-12.10.22/bin/chef-client:26:in `<top (required)>'
              /opt/opscode/embedded/bin/chef-client:23:in `load'
              /opt/opscode/embedded/bin/chef-client:23:in `<main>'
              [2016-04-26T18:28:38+00:00] INFO:
              --- RESPONSE (404) ---
            4462: |2

                        if attempt == 120
                            raise 'ERROR: Timeout waiting for DRBD mount to return'
                        end
                        print '.'
            5115: |
              if File.exists?("/etc/opscode/chef-server.json") &&
                  !(File.exist?("/etc/opscode/private-chef.rb") || File.exist?("/etc/opscode/chef-server.rb"))
                Chef::Log.fatal("Configuration via /etc/opscode/chef-server.json is not supported. Please use /etc/opscode/chef-server.rb")
                exit!(1)
              else
            6864: |2
                  rescue Exception => e
                    message = <<-EOF
              ERROR:
              The /var/opt/opscode/upgrades/migration-level file is missing or corrupt!  Please read http://docs.getchef.com/install_server_pre.html and correct this file before proceeding
            7459: |2
                      `echo 'SELECT * FROM pg_database;' | su - #{node['private_chef']['postgresql']['username']} -c '/opt/opscode/embedded/bin/psql -p #{node['private_chef']['postgresql']['port']} -U #{node['private_chef']['postgresql']['db_superuser']} postgres -t -A'`
                if $?.exitstatus != 0
                        Chef::Log.fatal("Could not connect to database, retrying in 10 seconds.")
                        sleep 10
                      else
            7468: |2

                    unless connectable
                      Chef::Log.fatal <<-ERR

              Could not connect to the postgresql database.
            8269: |2
                    # use of exit! prevents exit handlers from running, ensuring the last thing
                    # the customer sees is the descriptive error we've provided.
                    Chef::Log.fatal("\n\n#{LINE_SEP}\n#{e.message}#{LINE_SEP}")
                    exit! 128
                  end
            9209: |2
                      elsif PrivateChef['backend_vips']['ipaddress'] =~ /\:/
                        # IPv6 addresses must have the mask
                        Chef::Log.fatal("backend_vip ipaddress field appears to be a IPv6 address without a netmask  (e.g /64, /48)")
                        exit 66
                      else
            9222: |2
                  def generate_hex_if_bootstrap(chars, ha_guard)
                    if ha_guard
                      Chef::Log.fatal("Attempt to create secrets on non-bootstrap node in an H/A topology, please copy /etc/opscode/* around instead.")
                      exit 44
                    end
            9606: |2
                  def assert_server_config(node_name)
                    unless PrivateChef["servers"].key?(node_name)
                      Chef::Log.fatal <<-EOF
              No server configuration found for "#{node_name}" in /etc/opscode/chef-server.rb.
              Server configuration exists for the following hostnames:
            9633: |2
                        gen_api_fqdn
                      else
                        Chef::Log.fatal("I do not understand topology #{PrivateChef.topology} - try standalone, manual, ha, or tier.")
                        exit 55
                      end
            13095: |2

                if [ ! -d "$OCF_ROOT" ]; then
                  ha_log "ERROR: OCF_ROOT points to non-directory $OCF_ROOT."
                  exit $OCF_ERR_GENERIC
                fi
            13115: |2

                if [ -z "$OCF_RESOURCE_INSTANCE" ]; then
                  ha_log "ERROR: Need to tell us our resource instance name."
                  exit $OCF_ERR_ARGS
                fi
            13152: |2
                        loglevel=notice
                        case "${*}" in
                          *ERROR*)    loglevel=err;;
                          *WARN*)   loglevel=warning;;
                          *INFO*|info)  loglevel=info;;
            13251: |2
                      case "${__OCF_PRIO}" in
                        crit) __OCF_PRIO="CRIT";;
                        err)  __OCF_PRIO="ERROR";;
                        warn) __OCF_PRIO="WARNING";;
                        info) __OCF_PRIO="INFO";;
            18603: |2

              #------------------------------------------------------------------------------
              # ERROR REPORTING AND LOGGING
              #------------------------------------------------------------------------------
            18674: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic
            18688: |2
                        #   error
                        #   log
                        #   fatal
                        #   panic (effectively off)
            18877: |2

              #------------------------------------------------------------------------------
              # ERROR HANDLING
              #------------------------------------------------------------------------------
            28115: |2

                if node['fqdn'].nil?
                  Chef::Log.fatal("This node's fqdn is set to nil, so a read token cannot be issued!" \
                                  "Please change your fqdn settings.")
                end
            50995: |
              rspec ./spec/api/search/word_break_spec.rb[1:1:60:7] # Search API endpoint word break handling when searching for attribute an attribute key containing the special character '\' with a wildcard in attribute key after the special char with prefixing match, should find the node

              Build step 'Invoke XShell command' marked build as failure
              Performing Post build task...
              Match found for : : True
        steps:
          total: 55m12s
          before (setup time): 2m35s
          chef-client private-chef::default: 3m21s
          pedant: 46m37s
          after (cleanup time): 28s
  chef-server-12-build:
    result: SUCCESS
    url: http://wilson.ci.chef.co/job/chef-server-12-build/245/
    duration: 34m41s
    runs:
      el-5:
        result: SUCCESS
        url: http://wilson.ci.chef.co/job/chef-server-12-build/architecture=x86_64,platform=el-5,project=chef-server,role=builder/245/
        duration: 34m28s
      el-6:
        result: SUCCESS
        url: http://wilson.ci.chef.co/job/chef-server-12-build/architecture=x86_64,platform=el-6,project=chef-server,role=builder/245/
        duration: 31m58s
      el-7:
        result: SUCCESS
        url: http://wilson.ci.chef.co/job/chef-server-12-build/architecture=x86_64,platform=el-7,project=chef-server,role=builder/245/
        duration: 32m46s
      ubuntu-10.04:
        result: SUCCESS
        url: http://wilson.ci.chef.co/job/chef-server-12-build/architecture=x86_64,platform=ubuntu-10.04,project=chef-server,role=builder/245/
        duration: 27m27s
  chef-server-12-trigger-ad_hoc:
    result: SUCCESS
    url: http://wilson.ci.chef.co/job/chef-server-12-trigger-ad_hoc/147/
    duration: 20s
